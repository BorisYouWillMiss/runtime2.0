<?xml version="1.0" encoding="utf-8"?>
<Type>
	<Information>
		<ID>9a8f8e07-cb43-ff0f-7179-4a437911af23</ID>
		<Name>codeeditor</Name>
		<DisplayName>#Lang(001)</DisplayName>
		<ClassName>VDOM_codeeditor</ClassName>
		<Description>#Lang(002)</Description>
		<Version>1.391</Version>
		<Category>Form</Category>
		<InterfaceType>1</InterfaceType>
		<Icon>#Res(2a2d2448-2e13-b0bb-8a81-17014fba35bd)</Icon>
		<EditorIcon>#Res(c43c7089-459d-acc2-f636-fb4b23f22d5b)</EditorIcon>
		<StructureIcon>#Res(a7280e78-723d-4c0e-07b3-fb4b16697f8a)</StructureIcon>
		<Dynamic>1</Dynamic>
		<Moveable>1</Moveable>
		<Resizable>3</Resizable>
		<OptimizationPriority>1</OptimizationPriority>
		<Container>1</Container>
		<Containers>htmlcontainer, dialog, container, tablecell, form, accordeon, tabview, dialog_2, vdomclass</Containers>
		<Languages>en_US, fr_FR, ru_RU</Languages>
	</Information>
	<Attributes>
		<Attribute>
			<Name>stateful</Name>
			<DisplayName>#Lang(101)</DisplayName>
			<Description>#Lang(201)</Description>
			<DefaultValue>0</DefaultValue>
			<RegularExpressionValidation>^[01]$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(301)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>DropDown((#Lang(401)|0)|(#Lang(402)|1))</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>hierarchy</Name>
			<DisplayName>#Lang(102)</DisplayName>
			<Description>#Lang(202)</Description>
			<DefaultValue>0</DefaultValue>
			<RegularExpressionValidation>^\d{1,2}$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(302)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>TextField(2)</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>visible</Name>
			<DisplayName>#Lang(103)</DisplayName>
			<Description>#Lang(203)</Description>
			<DefaultValue>1</DefaultValue>
			<RegularExpressionValidation>^[01]$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(303)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>DropDown((#Lang(403)|0)|(#Lang(404)|1))</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>zindex</Name>
			<DisplayName>#Lang(104)</DisplayName>
			<Description>#Lang(204)</Description>
			<DefaultValue>0</DefaultValue>
			<RegularExpressionValidation>^\d{1,2}$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(304)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>TextField(2)</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>top</Name>
			<DisplayName>#Lang(105)</DisplayName>
			<Description>#Lang(205)</Description>
			<DefaultValue>0</DefaultValue>
			<RegularExpressionValidation>^\d{1,4}$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(305)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>TextField(4)</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>left</Name>
			<DisplayName>#Lang(106)</DisplayName>
			<Description>#Lang(206)</Description>
			<DefaultValue>0</DefaultValue>
			<RegularExpressionValidation>^\d{1,4}$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(306)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>TextField(4)</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>width</Name>
			<DisplayName>#Lang(107)</DisplayName>
			<Description>#Lang(207)</Description>
			<DefaultValue>250</DefaultValue>
			<RegularExpressionValidation>^\d{1,4}$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(307)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>TextField(4)</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>height</Name>
			<DisplayName>#Lang(108)</DisplayName>
			<Description>#Lang(208)</Description>
			<DefaultValue>100</DefaultValue>
			<RegularExpressionValidation>^\d{1,4}$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(308)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>TextField(4)</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>value</Name>
			<DisplayName>#Lang(109)</DisplayName>
			<Description>#Lang(209)</Description>
			<DefaultValue></DefaultValue>
			<RegularExpressionValidation>^.*$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(309)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>MultiLine(10000)</CodeInterface>
			<ColorGroup>2</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>syntax</Name>
			<DisplayName>#Lang(111)</DisplayName>
			<Description>#Lang(211)</Description>
			<DefaultValue>vscript</DefaultValue>
			<RegularExpressionValidation>^.*$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(311)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>DropDown((#Lang(405)|vscript)|(#Lang(406)|xml)|(#Lang(407)|python)|(#Lang(408)|javascript)|(#Lang(409)|html)|(#Lang(411)|css))</CodeInterface>
			<ColorGroup>2</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>is_readonly</Name>
			<DisplayName>#Lang(112)</DisplayName>
			<Description>#Lang(212)</Description>
			<DefaultValue>0</DefaultValue>
			<RegularExpressionValidation>^[01]$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(312)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>DropDown((#Lang(412)|1)|(#Lang(413)|0))</CodeInterface>
			<ColorGroup>2</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>customname</Name>
			<DisplayName>#Lang(113)</DisplayName>
			<Description>#Lang(213)</Description>
			<DefaultValue></DefaultValue>
			<RegularExpressionValidation>^.*$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(313)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>TextField(100)</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
	</Attributes>
	<Languages>
		<Language Code="en_US">
			<Sentence ID="001">Code editor</Sentence>
			<Sentence ID="002">The Code editor type produces an object used to display the multiline text as a piece of code. It can automatically numerate the lines of code and highlight the code elements.</Sentence>
			<Sentence ID="003"></Sentence>
			<Sentence ID="101"></Sentence>
			<Sentence ID="102">Hierarchy</Sentence>
			<Sentence ID="103">Visibility</Sentence>
			<Sentence ID="104">Z-Index</Sentence>
			<Sentence ID="105">Top</Sentence>
			<Sentence ID="106">Left</Sentence>
			<Sentence ID="107">Width</Sentence>
			<Sentence ID="108">Height</Sentence>
			<Sentence ID="109">Value</Sentence>
			<Sentence ID="111">Syntax</Sentence>
			<Sentence ID="112">readonly</Sentence>
			<Sentence ID="113">Custom name</Sentence>
			<Sentence ID="201"></Sentence>
			<Sentence ID="202">Order of rendering the object on the page</Sentence>
			<Sentence ID="203">Visibility of the object</Sentence>
			<Sentence ID="204">Position in visual hierarchy of objects</Sentence>
			<Sentence ID="205">Spacing between the top edge of the container and the object in pixels</Sentence>
			<Sentence ID="206">Spacing between the left edge of the container and the object in pixels</Sentence>
			<Sentence ID="207">Width of the object in pixels</Sentence>
			<Sentence ID="208">Height of the object in pixels</Sentence>
			<Sentence ID="209">Text to display</Sentence>
			<Sentence ID="211">Syntax</Sentence>
			<Sentence ID="212">Toggle readonly mode</Sentence>
			<Sentence ID="213">custom name for input</Sentence>
			<Sentence ID="301"></Sentence>
			<Sentence ID="302">Incorrect value, must be even integer from 0 to 99</Sentence>
			<Sentence ID="303">Incorrect value, must be either 0 or 1</Sentence>
			<Sentence ID="304">Incorrect value, must be even integer from 0 to 99</Sentence>
			<Sentence ID="305">Incorrect value, must be even positive integer</Sentence>
			<Sentence ID="306">Incorrect value, must be even positive integer</Sentence>
			<Sentence ID="307">Incorrect value, must be even positive integer</Sentence>
			<Sentence ID="308">Incorrect value, must be even positive integer</Sentence>
			<Sentence ID="309">Incorrect value</Sentence>
			<Sentence ID="311">Incorrect value</Sentence>
			<Sentence ID="312">newAttribute11</Sentence>
			<Sentence ID="313">invalid custom name for input</Sentence>
			<Sentence ID="401"></Sentence>
			<Sentence ID="402"></Sentence>
			<Sentence ID="403">Invisible</Sentence>
			<Sentence ID="404">Visible</Sentence>
			<Sentence ID="405">VScript</Sentence>
			<Sentence ID="406">XML</Sentence>
			<Sentence ID="407">Python</Sentence>
			<Sentence ID="408">Javascript</Sentence>
			<Sentence ID="409">HTML</Sentence>
			<Sentence ID="411">CSS</Sentence>
			<Sentence ID="412">ReadOnly</Sentence>
			<Sentence ID="413">Editable</Sentence>
			<Sentence ID="501">Set new text value</Sentence>
			<Sentence ID="502">Hide the object</Sentence>
			<Sentence ID="503">Move the object to a new position</Sentence>
			<Sentence ID="504">Show the object</Sentence>
			<Sentence ID="505">Show the object</Sentence>
			<Sentence ID="506">Set cursor to line</Sentence>
			<Sentence ID="507">Set new text value</Sentence>
			<Sentence ID="508">Show the object</Sentence>
			<Sentence ID="509">Show the object</Sentence>
			<Sentence ID="511">Set new text value</Sentence>
			<Sentence ID="512">Show the object</Sentence>
			<Sentence ID="513"></Sentence>
			<Sentence ID="514"></Sentence>
			<Sentence ID="601">setValue</Sentence>
			<Sentence ID="602">Hide</Sentence>
			<Sentence ID="603">moveTo</Sentence>
			<Sentence ID="604">Show</Sentence>
			<Sentence ID="605">Show</Sentence>
			<Sentence ID="606">setCursor</Sentence>
			<Sentence ID="607">setValue</Sentence>
			<Sentence ID="608">Show</Sentence>
			<Sentence ID="609">Show</Sentence>
			<Sentence ID="611">setValue</Sentence>
			<Sentence ID="612">Show</Sentence>
			<Sentence ID="701">Fade</Sentence>
			<Sentence ID="702">newX</Sentence>
			<Sentence ID="703">newY</Sentence>
			<Sentence ID="704">Effect</Sentence>
			<Sentence ID="705">Fade</Sentence>
			<Sentence ID="706"></Sentence>
			<Sentence ID="707">line</Sentence>
			<Sentence ID="708">Fade</Sentence>
			<Sentence ID="709">Fade</Sentence>
			<Sentence ID="711">Value</Sentence>
			<Sentence ID="712">Fade</Sentence>
			<Sentence ID="801">Fade effect, time is indicated in milliseconds</Sentence>
			<Sentence ID="802">X-coordinate of the new position relative to the left upper corner of the container</Sentence>
			<Sentence ID="803">Y-coordinate of the new position relative to the left upper corner of the container</Sentence>
			<Sentence ID="804">Visual effect of moving, time is indicated in milliseconds</Sentence>
			<Sentence ID="805">Fade effect, time is indicated in milliseconds</Sentence>
			<Sentence ID="806"></Sentence>
			<Sentence ID="807">Line number</Sentence>
			<Sentence ID="808">Fade effect, time is indicated in milliseconds</Sentence>
			<Sentence ID="809">Fade effect, time is indicated in milliseconds</Sentence>
			<Sentence ID="811">New text value</Sentence>
			<Sentence ID="812">Fade effect, time is indicated in milliseconds</Sentence>
			<Sentence ID="901"></Sentence>
			<Sentence ID="902"></Sentence>
			<Sentence ID="903"></Sentence>
		</Language>
		<Language Code="fr_FR">
			<Sentence ID="001">Zone de Texte</Sentence>
			<Sentence ID="002">Zone de Texte</Sentence>
			<Sentence ID="003"></Sentence>
			<Sentence ID="101"></Sentence>
			<Sentence ID="102">Hiérarchie</Sentence>
			<Sentence ID="103">Visibilité</Sentence>
			<Sentence ID="104">Z-Index</Sentence>
			<Sentence ID="105">Haut</Sentence>
			<Sentence ID="106">Gauche</Sentence>
			<Sentence ID="107">Largeur</Sentence>
			<Sentence ID="108">Hauteur</Sentence>
			<Sentence ID="109">Valeur</Sentence>
			<Sentence ID="111"></Sentence>
			<Sentence ID="112"></Sentence>
			<Sentence ID="113"></Sentence>
			<Sentence ID="201"></Sentence>
			<Sentence ID="202">Hiérarchie de l&apos;objet, ordre de chargement de l&apos;objet par rapport aux autres</Sentence>
			<Sentence ID="203">Afficher ou cacher l&apos;objet</Sentence>
			<Sentence ID="204">Niveau de superposition de l&apos;objet par rapport aux autres</Sentence>
			<Sentence ID="205">Distance depuis le bord haut de l&apos;objet parent en pixels</Sentence>
			<Sentence ID="206">Distance depuis le bord gauche de l&apos;objet parent en pixels</Sentence>
			<Sentence ID="207">Largeur de l&apos;objet en pixels</Sentence>
			<Sentence ID="208">Hauteur de l&apos;objet en pixels</Sentence>
			<Sentence ID="209">Texte dans le champs</Sentence>
			<Sentence ID="211"></Sentence>
			<Sentence ID="212"></Sentence>
			<Sentence ID="213"></Sentence>
			<Sentence ID="301"></Sentence>
			<Sentence ID="302">Valeur Incorrecte, doit être positive</Sentence>
			<Sentence ID="303">Valeur Incorrecte, doit être 0 ou 1</Sentence>
			<Sentence ID="304">Valeur Incorrecte, doit être positive</Sentence>
			<Sentence ID="305">Valeur Incorrecte, doit être positive</Sentence>
			<Sentence ID="306">Valeur Incorrecte, doit être positive</Sentence>
			<Sentence ID="307">Valeur Incorrecte, doit être positive</Sentence>
			<Sentence ID="308">Valeur Incorrecte, doit être positive</Sentence>
			<Sentence ID="309">Valeur Incorrecte</Sentence>
			<Sentence ID="311"></Sentence>
			<Sentence ID="312"></Sentence>
			<Sentence ID="313"></Sentence>
			<Sentence ID="401"></Sentence>
			<Sentence ID="402"></Sentence>
			<Sentence ID="403">Invisible</Sentence>
			<Sentence ID="404">Visible</Sentence>
			<Sentence ID="405"></Sentence>
			<Sentence ID="406"></Sentence>
			<Sentence ID="407"></Sentence>
			<Sentence ID="408"></Sentence>
			<Sentence ID="409"></Sentence>
			<Sentence ID="411"></Sentence>
			<Sentence ID="412"></Sentence>
			<Sentence ID="413"></Sentence>
			<Sentence ID="501">Set new text</Sentence>
			<Sentence ID="502">Hide the object</Sentence>
			<Sentence ID="503">Move object to selected point</Sentence>
			<Sentence ID="504">Show the object</Sentence>
			<Sentence ID="505">Show the object</Sentence>
			<Sentence ID="506"></Sentence>
			<Sentence ID="507">Set new text</Sentence>
			<Sentence ID="508">Show the object</Sentence>
			<Sentence ID="509">Show the object</Sentence>
			<Sentence ID="511">Set new text</Sentence>
			<Sentence ID="512">Show the object</Sentence>
			<Sentence ID="513"></Sentence>
			<Sentence ID="514"></Sentence>
			<Sentence ID="601">setValue</Sentence>
			<Sentence ID="602">Hide</Sentence>
			<Sentence ID="603">moveTo</Sentence>
			<Sentence ID="604">Show</Sentence>
			<Sentence ID="605">Show</Sentence>
			<Sentence ID="606"></Sentence>
			<Sentence ID="607">setValue</Sentence>
			<Sentence ID="608">Show</Sentence>
			<Sentence ID="609">Show</Sentence>
			<Sentence ID="611">setValue</Sentence>
			<Sentence ID="612">Show</Sentence>
			<Sentence ID="701">Fade</Sentence>
			<Sentence ID="702">newX</Sentence>
			<Sentence ID="703">newY</Sentence>
			<Sentence ID="704">Effect</Sentence>
			<Sentence ID="705">Fade</Sentence>
			<Sentence ID="706"></Sentence>
			<Sentence ID="707"></Sentence>
			<Sentence ID="708">Fade</Sentence>
			<Sentence ID="709">Fade</Sentence>
			<Sentence ID="711">Value</Sentence>
			<Sentence ID="712">Fade</Sentence>
			<Sentence ID="801">Fade time</Sentence>
			<Sentence ID="802">X-coordinate of new point</Sentence>
			<Sentence ID="803">Y-coordinate of new point</Sentence>
			<Sentence ID="804">Visual effect by moving</Sentence>
			<Sentence ID="805">Time of appearance</Sentence>
			<Sentence ID="806"></Sentence>
			<Sentence ID="807"></Sentence>
			<Sentence ID="808">Time of appearance</Sentence>
			<Sentence ID="809">Time of appearance</Sentence>
			<Sentence ID="811">New text</Sentence>
			<Sentence ID="812">Time of appearance</Sentence>
			<Sentence ID="901"></Sentence>
			<Sentence ID="902"></Sentence>
			<Sentence ID="903"></Sentence>
		</Language>
		<Language Code="ru_RU">
			<Sentence ID="001">Поле текста</Sentence>
			<Sentence ID="002">Текстовое поле формы</Sentence>
			<Sentence ID="003"></Sentence>
			<Sentence ID="101"></Sentence>
			<Sentence ID="102">Иерархия</Sentence>
			<Sentence ID="103">Отображение</Sentence>
			<Sentence ID="104">Позиция</Sentence>
			<Sentence ID="105">Сверху</Sentence>
			<Sentence ID="106">Слева</Sentence>
			<Sentence ID="107">Ширина</Sentence>
			<Sentence ID="108">Высота</Sentence>
			<Sentence ID="109">Значение</Sentence>
			<Sentence ID="111"></Sentence>
			<Sentence ID="112"></Sentence>
			<Sentence ID="113"></Sentence>
			<Sentence ID="201"></Sentence>
			<Sentence ID="202">Порядок визуализации объекта в ходе загрузки страницы</Sentence>
			<Sentence ID="203">Режим отображения объекта</Sentence>
			<Sentence ID="204">Положение в визуальной иерархии объектов</Sentence>
			<Sentence ID="205">Расстояние от верхней границы родительского контейнера до объекта в пикселях</Sentence>
			<Sentence ID="206">Расстояние от левой границы родительского контейнера до объекта в пикселях</Sentence>
			<Sentence ID="207">Ширина объекта в пикселях</Sentence>
			<Sentence ID="208">Высота объекта в пикселях</Sentence>
			<Sentence ID="209">Отображаемый текст</Sentence>
			<Sentence ID="211"></Sentence>
			<Sentence ID="212"></Sentence>
			<Sentence ID="213"></Sentence>
			<Sentence ID="301"></Sentence>
			<Sentence ID="302">Неправильное значение, должно быть указано целое число от 0 до 99</Sentence>
			<Sentence ID="303">Неправильное значение, должен быть указан 0 или 1</Sentence>
			<Sentence ID="304">Неправильное значение, должно быть указано целое число от 0 до 99</Sentence>
			<Sentence ID="305">Неправильное значение, должно быть целое положительное число</Sentence>
			<Sentence ID="306">Неправильное значение, должно быть целое положительное число</Sentence>
			<Sentence ID="307">Неправильное значение, должно быть целое положительное число</Sentence>
			<Sentence ID="308">Неправильное значение, должно быть целое положительное число</Sentence>
			<Sentence ID="309">Неправильное значение</Sentence>
			<Sentence ID="311"></Sentence>
			<Sentence ID="312"></Sentence>
			<Sentence ID="313"></Sentence>
			<Sentence ID="401"></Sentence>
			<Sentence ID="402"></Sentence>
			<Sentence ID="403">Не отображать</Sentence>
			<Sentence ID="404">Отображать</Sentence>
			<Sentence ID="405"></Sentence>
			<Sentence ID="406"></Sentence>
			<Sentence ID="407"></Sentence>
			<Sentence ID="408"></Sentence>
			<Sentence ID="409"></Sentence>
			<Sentence ID="411"></Sentence>
			<Sentence ID="412"></Sentence>
			<Sentence ID="413"></Sentence>
			<Sentence ID="501">Установить новый текст</Sentence>
			<Sentence ID="502">Скрыть объект</Sentence>
			<Sentence ID="503">Сдвинуть объект в заданную точку</Sentence>
			<Sentence ID="504">Показать объект</Sentence>
			<Sentence ID="505">Показать объект</Sentence>
			<Sentence ID="506"></Sentence>
			<Sentence ID="507">Установить новый текст</Sentence>
			<Sentence ID="508">Показать объект</Sentence>
			<Sentence ID="509">Показать объект</Sentence>
			<Sentence ID="511">Установить новый текст</Sentence>
			<Sentence ID="512">Показать объект</Sentence>
			<Sentence ID="513"></Sentence>
			<Sentence ID="514"></Sentence>
			<Sentence ID="601">Установить текст</Sentence>
			<Sentence ID="602">Скрыть</Sentence>
			<Sentence ID="603">Сдвинуть</Sentence>
			<Sentence ID="604">Показать</Sentence>
			<Sentence ID="605">Показать</Sentence>
			<Sentence ID="606"></Sentence>
			<Sentence ID="607">Установить текст</Sentence>
			<Sentence ID="608">Показать</Sentence>
			<Sentence ID="609">Показать</Sentence>
			<Sentence ID="611">Установить текст</Sentence>
			<Sentence ID="612">Показать</Sentence>
			<Sentence ID="701">Исчезновение</Sentence>
			<Sentence ID="702">Координата по оси X</Sentence>
			<Sentence ID="703">Координата по оси X</Sentence>
			<Sentence ID="704">Эффект</Sentence>
			<Sentence ID="705">Появление</Sentence>
			<Sentence ID="706"></Sentence>
			<Sentence ID="707"></Sentence>
			<Sentence ID="708">Появление</Sentence>
			<Sentence ID="709">Появление</Sentence>
			<Sentence ID="711">Текст</Sentence>
			<Sentence ID="712">Появление</Sentence>
			<Sentence ID="801">Время исчезновения в миллисекундах</Sentence>
			<Sentence ID="802">Координата новой точки по оси X</Sentence>
			<Sentence ID="803">Координата новой точки по оси Y</Sentence>
			<Sentence ID="804">Визуальный эффект при перетаскивании</Sentence>
			<Sentence ID="805">Время появления в миллисекундах</Sentence>
			<Sentence ID="806"></Sentence>
			<Sentence ID="807"></Sentence>
			<Sentence ID="808">Время появления в миллисекундах</Sentence>
			<Sentence ID="809">Время появления в миллисекундах</Sentence>
			<Sentence ID="811">Новый текст</Sentence>
			<Sentence ID="812">Время появления в миллисекундах</Sentence>
			<Sentence ID="901"></Sentence>
			<Sentence ID="902"></Sentence>
			<Sentence ID="903"></Sentence>
		</Language>
	</Languages>
	<Resources>
		<Resource ID="0116ae12-49d8-4389-bb9d-fd74e73890bb" Type="js" Name="search_cursor.js">
			Ly8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhl
			cnMNCi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJy
			b3IubmV0L0xJQ0VOU0UNCg0KKGZ1bmN0aW9uKG1vZCkgew0KICBpZiAodHlwZW9mIGV4cG9ydHMg
			PT0gIm9iamVjdCIgJiYgdHlwZW9mIG1vZHVsZSA9PSAib2JqZWN0IikgLy8gQ29tbW9uSlMNCiAg
			ICBtb2QocmVxdWlyZSgiLi4vLi4vbGliL2NvZGVtaXJyb3IiKSkNCiAgZWxzZSBpZiAodHlwZW9m
			IGRlZmluZSA9PSAiZnVuY3Rpb24iICYmIGRlZmluZS5hbWQpIC8vIEFNRA0KICAgIGRlZmluZShb
			Ii4uLy4uL2xpYi9jb2RlbWlycm9yIl0sIG1vZCkNCiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVu
			dg0KICAgIG1vZChDb2RlTWlycm9yKQ0KfSkoZnVuY3Rpb24oQ29kZU1pcnJvcikgew0KICAidXNl
			IHN0cmljdCINCiAgdmFyIFBvcyA9IENvZGVNaXJyb3IuUG9zDQoNCiAgZnVuY3Rpb24gcmVnZXhw
			RmxhZ3MocmVnZXhwKSB7DQogICAgdmFyIGZsYWdzID0gcmVnZXhwLmZsYWdzDQogICAgcmV0dXJu
			IGZsYWdzICE9IG51bGwgPyBmbGFncyA6IChyZWdleHAuaWdub3JlQ2FzZSA/ICJpIiA6ICIiKQ0K
			ICAgICAgKyAocmVnZXhwLmdsb2JhbCA/ICJnIiA6ICIiKQ0KICAgICAgKyAocmVnZXhwLm11bHRp
			bGluZSA/ICJtIiA6ICIiKQ0KICB9DQoNCiAgZnVuY3Rpb24gZW5zdXJlRmxhZ3MocmVnZXhwLCBm
			bGFncykgew0KICAgIHZhciBjdXJyZW50ID0gcmVnZXhwRmxhZ3MocmVnZXhwKSwgdGFyZ2V0ID0g
			Y3VycmVudA0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmxhZ3MubGVuZ3RoOyBpKyspIGlmICh0
			YXJnZXQuaW5kZXhPZihmbGFncy5jaGFyQXQoaSkpID09IC0xKQ0KICAgICAgdGFyZ2V0ICs9IGZs
			YWdzLmNoYXJBdChpKQ0KICAgIHJldHVybiBjdXJyZW50ID09IHRhcmdldCA/IHJlZ2V4cCA6IG5l
			dyBSZWdFeHAocmVnZXhwLnNvdXJjZSwgdGFyZ2V0KQ0KICB9DQoNCiAgZnVuY3Rpb24gbWF5YmVN
			dWx0aWxpbmUocmVnZXhwKSB7DQogICAgcmV0dXJuIC9cXHN8XFxufFxufFxcV3xcXER8XFtcXi8u
			dGVzdChyZWdleHAuc291cmNlKQ0KICB9DQoNCiAgZnVuY3Rpb24gc2VhcmNoUmVnZXhwRm9yd2Fy
			ZChkb2MsIHJlZ2V4cCwgc3RhcnQpIHsNCiAgICByZWdleHAgPSBlbnN1cmVGbGFncyhyZWdleHAs
			ICJnIikNCiAgICBmb3IgKHZhciBsaW5lID0gc3RhcnQubGluZSwgY2ggPSBzdGFydC5jaCwgbGFz
			dCA9IGRvYy5sYXN0TGluZSgpOyBsaW5lIDw9IGxhc3Q7IGxpbmUrKywgY2ggPSAwKSB7DQogICAg
			ICByZWdleHAubGFzdEluZGV4ID0gY2gNCiAgICAgIHZhciBzdHJpbmcgPSBkb2MuZ2V0TGluZShs
			aW5lKSwgbWF0Y2ggPSByZWdleHAuZXhlYyhzdHJpbmcpDQogICAgICBpZiAobWF0Y2gpDQogICAg
			ICAgIHJldHVybiB7ZnJvbTogUG9zKGxpbmUsIG1hdGNoLmluZGV4KSwNCiAgICAgICAgICAgICAg
			ICB0bzogUG9zKGxpbmUsIG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKSwNCiAgICAgICAg
			ICAgICAgICBtYXRjaDogbWF0Y2h9DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gc2VhcmNoUmVn
			ZXhwRm9yd2FyZE11bHRpbGluZShkb2MsIHJlZ2V4cCwgc3RhcnQpIHsNCiAgICBpZiAoIW1heWJl
			TXVsdGlsaW5lKHJlZ2V4cCkpIHJldHVybiBzZWFyY2hSZWdleHBGb3J3YXJkKGRvYywgcmVnZXhw
			LCBzdGFydCkNCg0KICAgIHJlZ2V4cCA9IGVuc3VyZUZsYWdzKHJlZ2V4cCwgImdtIikNCiAgICB2
			YXIgc3RyaW5nLCBjaHVuayA9IDENCiAgICBmb3IgKHZhciBsaW5lID0gc3RhcnQubGluZSwgbGFz
			dCA9IGRvYy5sYXN0TGluZSgpOyBsaW5lIDw9IGxhc3Q7KSB7DQogICAgICAvLyBUaGlzIGdyb3dz
			IHRoZSBzZWFyY2ggYnVmZmVyIGluIGV4cG9uZW50aWFsbHktc2l6ZWQgY2h1bmtzDQogICAgICAv
			LyBiZXR3ZWVuIG1hdGNoZXMsIHNvIHRoYXQgbmVhcmJ5IG1hdGNoZXMgYXJlIGZhc3QgYW5kIGRv
			bid0DQogICAgICAvLyByZXF1aXJlIGNvbmNhdGVuYXRpbmcgdGhlIHdob2xlIGRvY3VtZW50IChp
			biBjYXNlIHdlJ3JlDQogICAgICAvLyBzZWFyY2hpbmcgZm9yIHNvbWV0aGluZyB0aGF0IGhhcyB0
			b25zIG9mIG1hdGNoZXMpLCBidXQgYXQgdGhlDQogICAgICAvLyBzYW1lIHRpbWUsIHRoZSBhbW91
			bnQgb2YgcmV0cmllcyBpcyBsaW1pdGVkLg0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVu
			azsgaSsrKSB7DQogICAgICAgIGlmIChsaW5lID4gbGFzdCkgYnJlYWsNCiAgICAgICAgdmFyIGN1
			ckxpbmUgPSBkb2MuZ2V0TGluZShsaW5lKyspDQogICAgICAgIHN0cmluZyA9IHN0cmluZyA9PSBu
			dWxsID8gY3VyTGluZSA6IHN0cmluZyArICJcbiIgKyBjdXJMaW5lDQogICAgICB9DQogICAgICBj
			aHVuayA9IGNodW5rICogMg0KICAgICAgcmVnZXhwLmxhc3RJbmRleCA9IHN0YXJ0LmNoDQogICAg
			ICB2YXIgbWF0Y2ggPSByZWdleHAuZXhlYyhzdHJpbmcpDQogICAgICBpZiAobWF0Y2gpIHsNCiAg
			ICAgICAgdmFyIGJlZm9yZSA9IHN0cmluZy5zbGljZSgwLCBtYXRjaC5pbmRleCkuc3BsaXQoIlxu
			IiksIGluc2lkZSA9IG1hdGNoWzBdLnNwbGl0KCJcbiIpDQogICAgICAgIHZhciBzdGFydExpbmUg
			PSBzdGFydC5saW5lICsgYmVmb3JlLmxlbmd0aCAtIDEsIHN0YXJ0Q2ggPSBiZWZvcmVbYmVmb3Jl
			Lmxlbmd0aCAtIDFdLmxlbmd0aA0KICAgICAgICByZXR1cm4ge2Zyb206IFBvcyhzdGFydExpbmUs
			IHN0YXJ0Q2gpLA0KICAgICAgICAgICAgICAgIHRvOiBQb3Moc3RhcnRMaW5lICsgaW5zaWRlLmxl
			bmd0aCAtIDEsDQogICAgICAgICAgICAgICAgICAgICAgICBpbnNpZGUubGVuZ3RoID09IDEgPyBz
			dGFydENoICsgaW5zaWRlWzBdLmxlbmd0aCA6IGluc2lkZVtpbnNpZGUubGVuZ3RoIC0gMV0ubGVu
			Z3RoKSwNCiAgICAgICAgICAgICAgICBtYXRjaDogbWF0Y2h9DQogICAgICB9DQogICAgfQ0KICB9
			DQoNCiAgZnVuY3Rpb24gbGFzdE1hdGNoSW4oc3RyaW5nLCByZWdleHAsIGVuZE1hcmdpbikgew0K
			ICAgIHZhciBtYXRjaCwgZnJvbSA9IDANCiAgICB3aGlsZSAoZnJvbSA8PSBzdHJpbmcubGVuZ3Ro
			KSB7DQogICAgICByZWdleHAubGFzdEluZGV4ID0gZnJvbQ0KICAgICAgdmFyIG5ld01hdGNoID0g
			cmVnZXhwLmV4ZWMoc3RyaW5nKQ0KICAgICAgaWYgKCFuZXdNYXRjaCkgYnJlYWsNCiAgICAgIHZh
			ciBlbmQgPSBuZXdNYXRjaC5pbmRleCArIG5ld01hdGNoWzBdLmxlbmd0aA0KICAgICAgaWYgKGVu
			ZCA+IHN0cmluZy5sZW5ndGggLSBlbmRNYXJnaW4pIGJyZWFrDQogICAgICBpZiAoIW1hdGNoIHx8
			IGVuZCA+IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKQ0KICAgICAgICBtYXRjaCA9IG5l
			d01hdGNoDQogICAgICBmcm9tID0gbmV3TWF0Y2guaW5kZXggKyAxDQogICAgfQ0KICAgIHJldHVy
			biBtYXRjaA0KICB9DQoNCiAgZnVuY3Rpb24gc2VhcmNoUmVnZXhwQmFja3dhcmQoZG9jLCByZWdl
			eHAsIHN0YXJ0KSB7DQogICAgcmVnZXhwID0gZW5zdXJlRmxhZ3MocmVnZXhwLCAiZyIpDQogICAg
			Zm9yICh2YXIgbGluZSA9IHN0YXJ0LmxpbmUsIGNoID0gc3RhcnQuY2gsIGZpcnN0ID0gZG9jLmZp
			cnN0TGluZSgpOyBsaW5lID49IGZpcnN0OyBsaW5lLS0sIGNoID0gLTEpIHsNCiAgICAgIHZhciBz
			dHJpbmcgPSBkb2MuZ2V0TGluZShsaW5lKQ0KICAgICAgdmFyIG1hdGNoID0gbGFzdE1hdGNoSW4o
			c3RyaW5nLCByZWdleHAsIGNoIDwgMCA/IDAgOiBzdHJpbmcubGVuZ3RoIC0gY2gpDQogICAgICBp
			ZiAobWF0Y2gpDQogICAgICAgIHJldHVybiB7ZnJvbTogUG9zKGxpbmUsIG1hdGNoLmluZGV4KSwN
			CiAgICAgICAgICAgICAgICB0bzogUG9zKGxpbmUsIG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVu
			Z3RoKSwNCiAgICAgICAgICAgICAgICBtYXRjaDogbWF0Y2h9DQogICAgfQ0KICB9DQoNCiAgZnVu
			Y3Rpb24gc2VhcmNoUmVnZXhwQmFja3dhcmRNdWx0aWxpbmUoZG9jLCByZWdleHAsIHN0YXJ0KSB7
			DQogICAgaWYgKCFtYXliZU11bHRpbGluZShyZWdleHApKSByZXR1cm4gc2VhcmNoUmVnZXhwQmFj
			a3dhcmQoZG9jLCByZWdleHAsIHN0YXJ0KQ0KICAgIHJlZ2V4cCA9IGVuc3VyZUZsYWdzKHJlZ2V4
			cCwgImdtIikNCiAgICB2YXIgc3RyaW5nLCBjaHVua1NpemUgPSAxLCBlbmRNYXJnaW4gPSBkb2Mu
			Z2V0TGluZShzdGFydC5saW5lKS5sZW5ndGggLSBzdGFydC5jaA0KICAgIGZvciAodmFyIGxpbmUg
			PSBzdGFydC5saW5lLCBmaXJzdCA9IGRvYy5maXJzdExpbmUoKTsgbGluZSA+PSBmaXJzdDspIHsN
			CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2h1bmtTaXplICYmIGxpbmUgPj0gZmlyc3Q7IGkr
			Kykgew0KICAgICAgICB2YXIgY3VyTGluZSA9IGRvYy5nZXRMaW5lKGxpbmUtLSkNCiAgICAgICAg
			c3RyaW5nID0gc3RyaW5nID09IG51bGwgPyBjdXJMaW5lIDogY3VyTGluZSArICJcbiIgKyBzdHJp
			bmcNCiAgICAgIH0NCiAgICAgIGNodW5rU2l6ZSAqPSAyDQoNCiAgICAgIHZhciBtYXRjaCA9IGxh
			c3RNYXRjaEluKHN0cmluZywgcmVnZXhwLCBlbmRNYXJnaW4pDQogICAgICBpZiAobWF0Y2gpIHsN
			CiAgICAgICAgdmFyIGJlZm9yZSA9IHN0cmluZy5zbGljZSgwLCBtYXRjaC5pbmRleCkuc3BsaXQo
			IlxuIiksIGluc2lkZSA9IG1hdGNoWzBdLnNwbGl0KCJcbiIpDQogICAgICAgIHZhciBzdGFydExp
			bmUgPSBsaW5lICsgYmVmb3JlLmxlbmd0aCwgc3RhcnRDaCA9IGJlZm9yZVtiZWZvcmUubGVuZ3Ro
			IC0gMV0ubGVuZ3RoDQogICAgICAgIHJldHVybiB7ZnJvbTogUG9zKHN0YXJ0TGluZSwgc3RhcnRD
			aCksDQogICAgICAgICAgICAgICAgdG86IFBvcyhzdGFydExpbmUgKyBpbnNpZGUubGVuZ3RoIC0g
			MSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGluc2lkZS5sZW5ndGggPT0gMSA/IHN0YXJ0Q2gg
			KyBpbnNpZGVbMF0ubGVuZ3RoIDogaW5zaWRlW2luc2lkZS5sZW5ndGggLSAxXS5sZW5ndGgpLA0K
			ICAgICAgICAgICAgICAgIG1hdGNoOiBtYXRjaH0NCiAgICAgIH0NCiAgICB9DQogIH0NCg0KICB2
			YXIgZG9Gb2xkLCBub0ZvbGQNCiAgaWYgKFN0cmluZy5wcm90b3R5cGUubm9ybWFsaXplKSB7DQog
			ICAgZG9Gb2xkID0gZnVuY3Rpb24oc3RyKSB7IHJldHVybiBzdHIubm9ybWFsaXplKCJORkQiKS50
			b0xvd2VyQ2FzZSgpIH0NCiAgICBub0ZvbGQgPSBmdW5jdGlvbihzdHIpIHsgcmV0dXJuIHN0ci5u
			b3JtYWxpemUoIk5GRCIpIH0NCiAgfSBlbHNlIHsNCiAgICBkb0ZvbGQgPSBmdW5jdGlvbihzdHIp
			IHsgcmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpIH0NCiAgICBub0ZvbGQgPSBmdW5jdGlvbihzdHIp
			IHsgcmV0dXJuIHN0ciB9DQogIH0NCg0KICAvLyBNYXBzIGEgcG9zaXRpb24gaW4gYSBjYXNlLWZv
			bGRlZCBsaW5lIGJhY2sgdG8gYSBwb3NpdGlvbiBpbiB0aGUgb3JpZ2luYWwgbGluZQ0KICAvLyAo
			Y29tcGVuc2F0aW5nIGZvciBjb2RlcG9pbnRzIGluY3JlYXNpbmcgaW4gbnVtYmVyIGR1cmluZyBm
			b2xkaW5nKQ0KICBmdW5jdGlvbiBhZGp1c3RQb3Mob3JpZywgZm9sZGVkLCBwb3MsIGZvbGRGdW5j
			KSB7DQogICAgaWYgKG9yaWcubGVuZ3RoID09IGZvbGRlZC5sZW5ndGgpIHJldHVybiBwb3MNCiAg
			ICBmb3IgKHZhciBtaW4gPSAwLCBtYXggPSBwb3MgKyBNYXRoLm1heCgwLCBvcmlnLmxlbmd0aCAt
			IGZvbGRlZC5sZW5ndGgpOzspIHsNCiAgICAgIGlmIChtaW4gPT0gbWF4KSByZXR1cm4gbWluDQog
			ICAgICB2YXIgbWlkID0gKG1pbiArIG1heCkgPj4gMQ0KICAgICAgdmFyIGxlbiA9IGZvbGRGdW5j
			KG9yaWcuc2xpY2UoMCwgbWlkKSkubGVuZ3RoDQogICAgICBpZiAobGVuID09IHBvcykgcmV0dXJu
			IG1pZA0KICAgICAgZWxzZSBpZiAobGVuID4gcG9zKSBtYXggPSBtaWQNCiAgICAgIGVsc2UgbWlu
			ID0gbWlkICsgMQ0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHNlYXJjaFN0cmluZ0ZvcndhcmQo
			ZG9jLCBxdWVyeSwgc3RhcnQsIGNhc2VGb2xkKSB7DQogICAgLy8gRW1wdHkgc3RyaW5nIHdvdWxk
			IG1hdGNoIGFueXRoaW5nIGFuZCBuZXZlciBwcm9ncmVzcywgc28gd2UNCiAgICAvLyBkZWZpbmUg
			aXQgdG8gbWF0Y2ggbm90aGluZyBpbnN0ZWFkLg0KICAgIGlmICghcXVlcnkubGVuZ3RoKSByZXR1
			cm4gbnVsbA0KICAgIHZhciBmb2xkID0gY2FzZUZvbGQgPyBkb0ZvbGQgOiBub0ZvbGQNCiAgICB2
			YXIgbGluZXMgPSBmb2xkKHF1ZXJ5KS5zcGxpdCgvXHJ8XG5ccj8vKQ0KDQogICAgc2VhcmNoOiBm
			b3IgKHZhciBsaW5lID0gc3RhcnQubGluZSwgY2ggPSBzdGFydC5jaCwgbGFzdCA9IGRvYy5sYXN0
			TGluZSgpICsgMSAtIGxpbmVzLmxlbmd0aDsgbGluZSA8PSBsYXN0OyBsaW5lKyssIGNoID0gMCkg
			ew0KICAgICAgdmFyIG9yaWcgPSBkb2MuZ2V0TGluZShsaW5lKS5zbGljZShjaCksIHN0cmluZyA9
			IGZvbGQob3JpZykNCiAgICAgIGlmIChsaW5lcy5sZW5ndGggPT0gMSkgew0KICAgICAgICB2YXIg
			Zm91bmQgPSBzdHJpbmcuaW5kZXhPZihsaW5lc1swXSkNCiAgICAgICAgaWYgKGZvdW5kID09IC0x
			KSBjb250aW51ZSBzZWFyY2gNCiAgICAgICAgdmFyIHN0YXJ0ID0gYWRqdXN0UG9zKG9yaWcsIHN0
			cmluZywgZm91bmQsIGZvbGQpICsgY2gNCiAgICAgICAgcmV0dXJuIHtmcm9tOiBQb3MobGluZSwg
			YWRqdXN0UG9zKG9yaWcsIHN0cmluZywgZm91bmQsIGZvbGQpICsgY2gpLA0KICAgICAgICAgICAg
			ICAgIHRvOiBQb3MobGluZSwgYWRqdXN0UG9zKG9yaWcsIHN0cmluZywgZm91bmQgKyBsaW5lc1sw
			XS5sZW5ndGgsIGZvbGQpICsgY2gpfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdmFyIGN1dEZy
			b20gPSBzdHJpbmcubGVuZ3RoIC0gbGluZXNbMF0ubGVuZ3RoDQogICAgICAgIGlmIChzdHJpbmcu
			c2xpY2UoY3V0RnJvbSkgIT0gbGluZXNbMF0pIGNvbnRpbnVlIHNlYXJjaA0KICAgICAgICBmb3Ig
			KHZhciBpID0gMTsgaSA8IGxpbmVzLmxlbmd0aCAtIDE7IGkrKykNCiAgICAgICAgICBpZiAoZm9s
			ZChkb2MuZ2V0TGluZShsaW5lICsgaSkpICE9IGxpbmVzW2ldKSBjb250aW51ZSBzZWFyY2gNCiAg
			ICAgICAgdmFyIGVuZCA9IGRvYy5nZXRMaW5lKGxpbmUgKyBsaW5lcy5sZW5ndGggLSAxKSwgZW5k
			U3RyaW5nID0gZm9sZChlbmQpLCBsYXN0TGluZSA9IGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdDQog
			ICAgICAgIGlmIChlbmRTdHJpbmcuc2xpY2UoMCwgbGFzdExpbmUubGVuZ3RoKSAhPSBsYXN0TGlu
			ZSkgY29udGludWUgc2VhcmNoDQogICAgICAgIHJldHVybiB7ZnJvbTogUG9zKGxpbmUsIGFkanVz
			dFBvcyhvcmlnLCBzdHJpbmcsIGN1dEZyb20sIGZvbGQpICsgY2gpLA0KICAgICAgICAgICAgICAg
			IHRvOiBQb3MobGluZSArIGxpbmVzLmxlbmd0aCAtIDEsIGFkanVzdFBvcyhlbmQsIGVuZFN0cmlu
			ZywgbGFzdExpbmUubGVuZ3RoLCBmb2xkKSl9DQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgZnVu
			Y3Rpb24gc2VhcmNoU3RyaW5nQmFja3dhcmQoZG9jLCBxdWVyeSwgc3RhcnQsIGNhc2VGb2xkKSB7
			DQogICAgaWYgKCFxdWVyeS5sZW5ndGgpIHJldHVybiBudWxsDQogICAgdmFyIGZvbGQgPSBjYXNl
			Rm9sZCA/IGRvRm9sZCA6IG5vRm9sZA0KICAgIHZhciBsaW5lcyA9IGZvbGQocXVlcnkpLnNwbGl0
			KC9ccnxcblxyPy8pDQoNCiAgICBzZWFyY2g6IGZvciAodmFyIGxpbmUgPSBzdGFydC5saW5lLCBj
			aCA9IHN0YXJ0LmNoLCBmaXJzdCA9IGRvYy5maXJzdExpbmUoKSAtIDEgKyBsaW5lcy5sZW5ndGg7
			IGxpbmUgPj0gZmlyc3Q7IGxpbmUtLSwgY2ggPSAtMSkgew0KICAgICAgdmFyIG9yaWcgPSBkb2Mu
			Z2V0TGluZShsaW5lKQ0KICAgICAgaWYgKGNoID4gLTEpIG9yaWcgPSBvcmlnLnNsaWNlKDAsIGNo
			KQ0KICAgICAgdmFyIHN0cmluZyA9IGZvbGQob3JpZykNCiAgICAgIGlmIChsaW5lcy5sZW5ndGgg
			PT0gMSkgew0KICAgICAgICB2YXIgZm91bmQgPSBzdHJpbmcubGFzdEluZGV4T2YobGluZXNbMF0p
			DQogICAgICAgIGlmIChmb3VuZCA9PSAtMSkgY29udGludWUgc2VhcmNoDQogICAgICAgIHJldHVy
			biB7ZnJvbTogUG9zKGxpbmUsIGFkanVzdFBvcyhvcmlnLCBzdHJpbmcsIGZvdW5kLCBmb2xkKSks
			DQogICAgICAgICAgICAgICAgdG86IFBvcyhsaW5lLCBhZGp1c3RQb3Mob3JpZywgc3RyaW5nLCBm
			b3VuZCArIGxpbmVzWzBdLmxlbmd0aCwgZm9sZCkpfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAg
			dmFyIGxhc3RMaW5lID0gbGluZXNbbGluZXMubGVuZ3RoIC0gMV0NCiAgICAgICAgaWYgKHN0cmlu
			Zy5zbGljZSgwLCBsYXN0TGluZS5sZW5ndGgpICE9IGxhc3RMaW5lKSBjb250aW51ZSBzZWFyY2gN
			CiAgICAgICAgZm9yICh2YXIgaSA9IDEsIHN0YXJ0ID0gbGluZSAtIGxpbmVzLmxlbmd0aCArIDE7
			IGkgPCBsaW5lcy5sZW5ndGggLSAxOyBpKyspDQogICAgICAgICAgaWYgKGZvbGQoZG9jLmdldExp
			bmUoc3RhcnQgKyBpKSkgIT0gbGluZXNbaV0pIGNvbnRpbnVlIHNlYXJjaA0KICAgICAgICB2YXIg
			dG9wID0gZG9jLmdldExpbmUobGluZSArIDEgLSBsaW5lcy5sZW5ndGgpLCB0b3BTdHJpbmcgPSBm
			b2xkKHRvcCkNCiAgICAgICAgaWYgKHRvcFN0cmluZy5zbGljZSh0b3BTdHJpbmcubGVuZ3RoIC0g
			bGluZXNbMF0ubGVuZ3RoKSAhPSBsaW5lc1swXSkgY29udGludWUgc2VhcmNoDQogICAgICAgIHJl
			dHVybiB7ZnJvbTogUG9zKGxpbmUgKyAxIC0gbGluZXMubGVuZ3RoLCBhZGp1c3RQb3ModG9wLCB0
			b3BTdHJpbmcsIHRvcC5sZW5ndGggLSBsaW5lc1swXS5sZW5ndGgsIGZvbGQpKSwNCiAgICAgICAg
			ICAgICAgICB0bzogUG9zKGxpbmUsIGFkanVzdFBvcyhvcmlnLCBzdHJpbmcsIGxhc3RMaW5lLmxl
			bmd0aCwgZm9sZCkpfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIFNlYXJjaEN1
			cnNvcihkb2MsIHF1ZXJ5LCBwb3MsIG9wdGlvbnMpIHsNCiAgICB0aGlzLmF0T2NjdXJyZW5jZSA9
			IGZhbHNlDQogICAgdGhpcy5kb2MgPSBkb2MNCiAgICBwb3MgPSBwb3MgPyBkb2MuY2xpcFBvcyhw
			b3MpIDogUG9zKDAsIDApDQogICAgdGhpcy5wb3MgPSB7ZnJvbTogcG9zLCB0bzogcG9zfQ0KDQog
			ICAgdmFyIGNhc2VGb2xkDQogICAgaWYgKHR5cGVvZiBvcHRpb25zID09ICJvYmplY3QiKSB7DQog
			ICAgICBjYXNlRm9sZCA9IG9wdGlvbnMuY2FzZUZvbGQNCiAgICB9IGVsc2UgeyAvLyBCYWNrd2Fy
			ZHMgY29tcGF0IGZvciB3aGVuIGNhc2VGb2xkIHdhcyB0aGUgNHRoIGFyZ3VtZW50DQogICAgICBj
			YXNlRm9sZCA9IG9wdGlvbnMNCiAgICAgIG9wdGlvbnMgPSBudWxsDQogICAgfQ0KDQogICAgaWYg
			KHR5cGVvZiBxdWVyeSA9PSAic3RyaW5nIikgew0KICAgICAgaWYgKGNhc2VGb2xkID09IG51bGwp
			IGNhc2VGb2xkID0gZmFsc2UNCiAgICAgIHRoaXMubWF0Y2hlcyA9IGZ1bmN0aW9uKHJldmVyc2Us
			IHBvcykgew0KICAgICAgICByZXR1cm4gKHJldmVyc2UgPyBzZWFyY2hTdHJpbmdCYWNrd2FyZCA6
			IHNlYXJjaFN0cmluZ0ZvcndhcmQpKGRvYywgcXVlcnksIHBvcywgY2FzZUZvbGQpDQogICAgICB9
			DQogICAgfSBlbHNlIHsNCiAgICAgIHF1ZXJ5ID0gZW5zdXJlRmxhZ3MocXVlcnksICJnbSIpDQog
			ICAgICBpZiAoIW9wdGlvbnMgfHwgb3B0aW9ucy5tdWx0aWxpbmUgIT09IGZhbHNlKQ0KICAgICAg
			ICB0aGlzLm1hdGNoZXMgPSBmdW5jdGlvbihyZXZlcnNlLCBwb3MpIHsNCiAgICAgICAgICByZXR1
			cm4gKHJldmVyc2UgPyBzZWFyY2hSZWdleHBCYWNrd2FyZE11bHRpbGluZSA6IHNlYXJjaFJlZ2V4
			cEZvcndhcmRNdWx0aWxpbmUpKGRvYywgcXVlcnksIHBvcykNCiAgICAgICAgfQ0KICAgICAgZWxz
			ZQ0KICAgICAgICB0aGlzLm1hdGNoZXMgPSBmdW5jdGlvbihyZXZlcnNlLCBwb3MpIHsNCiAgICAg
			ICAgICByZXR1cm4gKHJldmVyc2UgPyBzZWFyY2hSZWdleHBCYWNrd2FyZCA6IHNlYXJjaFJlZ2V4
			cEZvcndhcmQpKGRvYywgcXVlcnksIHBvcykNCiAgICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIFNl
			YXJjaEN1cnNvci5wcm90b3R5cGUgPSB7DQogICAgZmluZE5leHQ6IGZ1bmN0aW9uKCkge3JldHVy
			biB0aGlzLmZpbmQoZmFsc2UpfSwNCiAgICBmaW5kUHJldmlvdXM6IGZ1bmN0aW9uKCkge3JldHVy
			biB0aGlzLmZpbmQodHJ1ZSl9LA0KDQogICAgZmluZDogZnVuY3Rpb24ocmV2ZXJzZSkgew0KICAg
			ICAgdmFyIHJlc3VsdCA9IHRoaXMubWF0Y2hlcyhyZXZlcnNlLCB0aGlzLmRvYy5jbGlwUG9zKHJl
			dmVyc2UgPyB0aGlzLnBvcy5mcm9tIDogdGhpcy5wb3MudG8pKQ0KDQogICAgICAvLyBJbXBsZW1l
			bnRzIHdlaXJkIGF1dG8tZ3Jvd2luZyBiZWhhdmlvciBvbiBudWxsLW1hdGNoZXMgZm9yDQogICAg
			ICAvLyBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSB3aXRoIHRoZSB2aW0gY29kZSAodW5mb3J0dW5h
			dGVseSkNCiAgICAgIHdoaWxlIChyZXN1bHQgJiYgQ29kZU1pcnJvci5jbXBQb3MocmVzdWx0LmZy
			b20sIHJlc3VsdC50bykgPT0gMCkgew0KICAgICAgICBpZiAocmV2ZXJzZSkgew0KICAgICAgICAg
			IGlmIChyZXN1bHQuZnJvbS5jaCkgcmVzdWx0LmZyb20gPSBQb3MocmVzdWx0LmZyb20ubGluZSwg
			cmVzdWx0LmZyb20uY2ggLSAxKQ0KICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5mcm9tLmxpbmUg
			PT0gdGhpcy5kb2MuZmlyc3RMaW5lKCkpIHJlc3VsdCA9IG51bGwNCiAgICAgICAgICBlbHNlIHJl
			c3VsdCA9IHRoaXMubWF0Y2hlcyhyZXZlcnNlLCB0aGlzLmRvYy5jbGlwUG9zKFBvcyhyZXN1bHQu
			ZnJvbS5saW5lIC0gMSkpKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChyZXN1bHQu
			dG8uY2ggPCB0aGlzLmRvYy5nZXRMaW5lKHJlc3VsdC50by5saW5lKS5sZW5ndGgpIHJlc3VsdC50
			byA9IFBvcyhyZXN1bHQudG8ubGluZSwgcmVzdWx0LnRvLmNoICsgMSkNCiAgICAgICAgICBlbHNl
			IGlmIChyZXN1bHQudG8ubGluZSA9PSB0aGlzLmRvYy5sYXN0TGluZSgpKSByZXN1bHQgPSBudWxs
			DQogICAgICAgICAgZWxzZSByZXN1bHQgPSB0aGlzLm1hdGNoZXMocmV2ZXJzZSwgUG9zKHJlc3Vs
			dC50by5saW5lICsgMSwgMCkpDQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgaWYgKHJlc3Vs
			dCkgew0KICAgICAgICB0aGlzLnBvcyA9IHJlc3VsdA0KICAgICAgICB0aGlzLmF0T2NjdXJyZW5j
			ZSA9IHRydWUNCiAgICAgICAgcmV0dXJuIHRoaXMucG9zLm1hdGNoIHx8IHRydWUNCiAgICAgIH0g
			ZWxzZSB7DQogICAgICAgIHZhciBlbmQgPSBQb3MocmV2ZXJzZSA/IHRoaXMuZG9jLmZpcnN0TGlu
			ZSgpIDogdGhpcy5kb2MubGFzdExpbmUoKSArIDEsIDApDQogICAgICAgIHRoaXMucG9zID0ge2Zy
			b206IGVuZCwgdG86IGVuZH0NCiAgICAgICAgcmV0dXJuIHRoaXMuYXRPY2N1cnJlbmNlID0gZmFs
			c2UNCiAgICAgIH0NCiAgICB9LA0KDQogICAgZnJvbTogZnVuY3Rpb24oKSB7aWYgKHRoaXMuYXRP
			Y2N1cnJlbmNlKSByZXR1cm4gdGhpcy5wb3MuZnJvbX0sDQogICAgdG86IGZ1bmN0aW9uKCkge2lm
			ICh0aGlzLmF0T2NjdXJyZW5jZSkgcmV0dXJuIHRoaXMucG9zLnRvfSwNCg0KICAgIHJlcGxhY2U6
			IGZ1bmN0aW9uKG5ld1RleHQsIG9yaWdpbikgew0KICAgICAgaWYgKCF0aGlzLmF0T2NjdXJyZW5j
			ZSkgcmV0dXJuDQogICAgICB2YXIgbGluZXMgPSBDb2RlTWlycm9yLnNwbGl0TGluZXMobmV3VGV4
			dCkNCiAgICAgIHRoaXMuZG9jLnJlcGxhY2VSYW5nZShsaW5lcywgdGhpcy5wb3MuZnJvbSwgdGhp
			cy5wb3MudG8sIG9yaWdpbikNCiAgICAgIHRoaXMucG9zLnRvID0gUG9zKHRoaXMucG9zLmZyb20u
			bGluZSArIGxpbmVzLmxlbmd0aCAtIDEsDQogICAgICAgICAgICAgICAgICAgICAgICBsaW5lc1ts
			aW5lcy5sZW5ndGggLSAxXS5sZW5ndGggKyAobGluZXMubGVuZ3RoID09IDEgPyB0aGlzLnBvcy5m
			cm9tLmNoIDogMCkpDQogICAgfQ0KICB9DQoNCiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24o
			ImdldFNlYXJjaEN1cnNvciIsIGZ1bmN0aW9uKHF1ZXJ5LCBwb3MsIGNhc2VGb2xkKSB7DQogICAg
			cmV0dXJuIG5ldyBTZWFyY2hDdXJzb3IodGhpcy5kb2MsIHF1ZXJ5LCBwb3MsIGNhc2VGb2xkKQ0K
			ICB9KQ0KICBDb2RlTWlycm9yLmRlZmluZURvY0V4dGVuc2lvbigiZ2V0U2VhcmNoQ3Vyc29yIiwg
			ZnVuY3Rpb24ocXVlcnksIHBvcywgY2FzZUZvbGQpIHsNCiAgICByZXR1cm4gbmV3IFNlYXJjaEN1
			cnNvcih0aGlzLCBxdWVyeSwgcG9zLCBjYXNlRm9sZCkNCiAgfSkNCg0KICBDb2RlTWlycm9yLmRl
			ZmluZUV4dGVuc2lvbigic2VsZWN0TWF0Y2hlcyIsIGZ1bmN0aW9uKHF1ZXJ5LCBjYXNlRm9sZCkg
			ew0KICAgIHZhciByYW5nZXMgPSBbXQ0KICAgIHZhciBjdXIgPSB0aGlzLmdldFNlYXJjaEN1cnNv
			cihxdWVyeSwgdGhpcy5nZXRDdXJzb3IoImZyb20iKSwgY2FzZUZvbGQpDQogICAgd2hpbGUgKGN1
			ci5maW5kTmV4dCgpKSB7DQogICAgICBpZiAoQ29kZU1pcnJvci5jbXBQb3MoY3VyLnRvKCksIHRo
			aXMuZ2V0Q3Vyc29yKCJ0byIpKSA+IDApIGJyZWFrDQogICAgICByYW5nZXMucHVzaCh7YW5jaG9y
			OiBjdXIuZnJvbSgpLCBoZWFkOiBjdXIudG8oKX0pDQogICAgfQ0KICAgIGlmIChyYW5nZXMubGVu
			Z3RoKQ0KICAgICAgdGhpcy5zZXRTZWxlY3Rpb25zKHJhbmdlcywgMCkNCiAgfSkNCn0pOw==
		</Resource>
		<Resource ID="064add91-8595-0f40-10ea-09d38022edee" Type="js" Name="codemirror">
			Ly8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhl
			cnMNCi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJy
			b3IubmV0L0xJQ0VOU0UNCg0KLy8gVGhpcyBpcyBDb2RlTWlycm9yIChodHRwczovL2NvZGVtaXJy
			b3IubmV0KSwgYSBjb2RlIGVkaXRvcg0KLy8gaW1wbGVtZW50ZWQgaW4gSmF2YVNjcmlwdCBvbiB0
			b3Agb2YgdGhlIGJyb3dzZXIncyBET00uDQovLw0KLy8gWW91IGNhbiBmaW5kIHNvbWUgdGVjaG5p
			Y2FsIGJhY2tncm91bmQgZm9yIHNvbWUgb2YgdGhlIGNvZGUgYmVsb3cNCi8vIGF0IGh0dHA6Ly9t
			YXJpam5oYXZlcmJla2UubmwvYmxvZy8jY20taW50ZXJuYWxzIC4NCg0KKGZ1bmN0aW9uIChnbG9i
			YWwsIGZhY3RvcnkpIHsNCiAgaWYgKGdsb2JhbC5oYXNPd25Qcm9wZXJ0eSgiQ29kZU1pcnJvciIp
			KSByZXR1cm47DQogIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxl
			ICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDoNCiAgdHlwZW9m
			IGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDoN
			CiAgKGdsb2JhbC5Db2RlTWlycm9yID0gZmFjdG9yeSgpKTsNCn0odGhpcywgKGZ1bmN0aW9uICgp
			IHsgJ3VzZSBzdHJpY3QnOw0KDQogIC8vIEtsdWRnZXMgZm9yIGJ1Z3MgYW5kIGJlaGF2aW9yIGRp
			ZmZlcmVuY2VzIHRoYXQgY2FuJ3QgYmUgZmVhdHVyZQ0KICAvLyBkZXRlY3RlZCBhcmUgZW5hYmxl
			ZCBiYXNlZCBvbiB1c2VyQWdlbnQgZXRjIHNuaWZmaW5nLg0KICB2YXIgdXNlckFnZW50ID0gbmF2
			aWdhdG9yLnVzZXJBZ2VudDsNCiAgdmFyIHBsYXRmb3JtID0gbmF2aWdhdG9yLnBsYXRmb3JtOw0K
			DQogIHZhciBnZWNrbyA9IC9nZWNrb1wvXGQvaS50ZXN0KHVzZXJBZ2VudCk7DQogIHZhciBpZV91
			cHRvMTAgPSAvTVNJRSBcZC8udGVzdCh1c2VyQWdlbnQpOw0KICB2YXIgaWVfMTF1cCA9IC9Ucmlk
			ZW50XC8oPzpbNy05XXxcZHsyLH0pXC4uKnJ2OihcZCspLy5leGVjKHVzZXJBZ2VudCk7DQogIHZh
			ciBlZGdlID0gL0VkZ2VcLyhcZCspLy5leGVjKHVzZXJBZ2VudCk7DQogIHZhciBpZSA9IGllX3Vw
			dG8xMCB8fCBpZV8xMXVwIHx8IGVkZ2U7DQogIHZhciBpZV92ZXJzaW9uID0gaWUgJiYgKGllX3Vw
			dG8xMCA/IGRvY3VtZW50LmRvY3VtZW50TW9kZSB8fCA2IDogKyhlZGdlIHx8IGllXzExdXApWzFd
			KTsNCiAgdmFyIHdlYmtpdCA9ICFlZGdlICYmIC9XZWJLaXRcLy8udGVzdCh1c2VyQWdlbnQpOw0K
			ICB2YXIgcXR3ZWJraXQgPSB3ZWJraXQgJiYgL1F0XC9cZCtcLlxkKy8udGVzdCh1c2VyQWdlbnQp
			Ow0KICB2YXIgY2hyb21lID0gIWVkZ2UgJiYgL0Nocm9tZVwvLy50ZXN0KHVzZXJBZ2VudCk7DQog
			IHZhciBwcmVzdG8gPSAvT3BlcmFcLy8udGVzdCh1c2VyQWdlbnQpOw0KICB2YXIgc2FmYXJpID0g
			L0FwcGxlIENvbXB1dGVyLy50ZXN0KG5hdmlnYXRvci52ZW5kb3IpOw0KICB2YXIgbWFjX2dlTW91
			bnRhaW5MaW9uID0gL01hYyBPUyBYIDFcZFxEKFs4LTldfFxkXGQpXEQvLnRlc3QodXNlckFnZW50
			KTsNCiAgdmFyIHBoYW50b20gPSAvUGhhbnRvbUpTLy50ZXN0KHVzZXJBZ2VudCk7DQoNCiAgdmFy
			IGlvcyA9ICFlZGdlICYmIC9BcHBsZVdlYktpdC8udGVzdCh1c2VyQWdlbnQpICYmIC9Nb2JpbGVc
			L1x3Ky8udGVzdCh1c2VyQWdlbnQpOw0KICB2YXIgYW5kcm9pZCA9IC9BbmRyb2lkLy50ZXN0KHVz
			ZXJBZ2VudCk7DQogIC8vIFRoaXMgaXMgd29lZnVsbHkgaW5jb21wbGV0ZS4gU3VnZ2VzdGlvbnMg
			Zm9yIGFsdGVybmF0aXZlIG1ldGhvZHMgd2VsY29tZS4NCiAgdmFyIG1vYmlsZSA9IGlvcyB8fCBh
			bmRyb2lkIHx8IC93ZWJPU3xCbGFja0JlcnJ5fE9wZXJhIE1pbml8T3BlcmEgTW9iaXxJRU1vYmls
			ZS9pLnRlc3QodXNlckFnZW50KTsNCiAgdmFyIG1hYyA9IGlvcyB8fCAvTWFjLy50ZXN0KHBsYXRm
			b3JtKTsNCiAgdmFyIGNocm9tZU9TID0gL1xiQ3JPU1xiLy50ZXN0KHVzZXJBZ2VudCk7DQogIHZh
			ciB3aW5kb3dzID0gL3dpbi9pLnRlc3QocGxhdGZvcm0pOw0KDQogIHZhciBwcmVzdG9fdmVyc2lv
			biA9IHByZXN0byAmJiB1c2VyQWdlbnQubWF0Y2goL1ZlcnNpb25cLyhcZCpcLlxkKikvKTsNCiAg
			aWYgKHByZXN0b192ZXJzaW9uKSB7IHByZXN0b192ZXJzaW9uID0gTnVtYmVyKHByZXN0b192ZXJz
			aW9uWzFdKTsgfQ0KICBpZiAocHJlc3RvX3ZlcnNpb24gJiYgcHJlc3RvX3ZlcnNpb24gPj0gMTUp
			IHsgcHJlc3RvID0gZmFsc2U7IHdlYmtpdCA9IHRydWU7IH0NCiAgLy8gU29tZSBicm93c2VycyB1
			c2UgdGhlIHdyb25nIGV2ZW50IHByb3BlcnRpZXMgdG8gc2lnbmFsIGNtZC9jdHJsIG9uIE9TIFgN
			CiAgdmFyIGZsaXBDdHJsQ21kID0gbWFjICYmIChxdHdlYmtpdCB8fCBwcmVzdG8gJiYgKHByZXN0
			b192ZXJzaW9uID09IG51bGwgfHwgcHJlc3RvX3ZlcnNpb24gPCAxMi4xMSkpOw0KICB2YXIgY2Fw
			dHVyZVJpZ2h0Q2xpY2sgPSBnZWNrbyB8fCAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KTsNCg0KICBm
			dW5jdGlvbiBjbGFzc1Rlc3QoY2xzKSB7IHJldHVybiBuZXcgUmVnRXhwKCIoXnxcXHMpIiArIGNs
			cyArICIoPzokfFxccylcXHMqIikgfQ0KDQogIHZhciBybUNsYXNzID0gZnVuY3Rpb24obm9kZSwg
			Y2xzKSB7DQogICAgdmFyIGN1cnJlbnQgPSBub2RlLmNsYXNzTmFtZTsNCiAgICB2YXIgbWF0Y2gg
			PSBjbGFzc1Rlc3QoY2xzKS5leGVjKGN1cnJlbnQpOw0KICAgIGlmIChtYXRjaCkgew0KICAgICAg
			dmFyIGFmdGVyID0gY3VycmVudC5zbGljZShtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCk7
			DQogICAgICBub2RlLmNsYXNzTmFtZSA9IGN1cnJlbnQuc2xpY2UoMCwgbWF0Y2guaW5kZXgpICsg
			KGFmdGVyID8gbWF0Y2hbMV0gKyBhZnRlciA6ICIiKTsNCiAgICB9DQogIH07DQoNCiAgZnVuY3Rp
			b24gcmVtb3ZlQ2hpbGRyZW4oZSkgew0KICAgIGZvciAodmFyIGNvdW50ID0gZS5jaGlsZE5vZGVz
			Lmxlbmd0aDsgY291bnQgPiAwOyAtLWNvdW50KQ0KICAgICAgeyBlLnJlbW92ZUNoaWxkKGUuZmly
			c3RDaGlsZCk7IH0NCiAgICByZXR1cm4gZQ0KICB9DQoNCiAgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRy
			ZW5BbmRBZGQocGFyZW50LCBlKSB7DQogICAgcmV0dXJuIHJlbW92ZUNoaWxkcmVuKHBhcmVudCku
			YXBwZW5kQ2hpbGQoZSkNCiAgfQ0KDQogIGZ1bmN0aW9uIGVsdCh0YWcsIGNvbnRlbnQsIGNsYXNz
			TmFtZSwgc3R5bGUpIHsNCiAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTsN
			CiAgICBpZiAoY2xhc3NOYW1lKSB7IGUuY2xhc3NOYW1lID0gY2xhc3NOYW1lOyB9DQogICAgaWYg
			KHN0eWxlKSB7IGUuc3R5bGUuY3NzVGV4dCA9IHN0eWxlOyB9DQogICAgaWYgKHR5cGVvZiBjb250
			ZW50ID09ICJzdHJpbmciKSB7IGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUo
			Y29udGVudCkpOyB9DQogICAgZWxzZSBpZiAoY29udGVudCkgeyBmb3IgKHZhciBpID0gMDsgaSA8
			IGNvbnRlbnQubGVuZ3RoOyArK2kpIHsgZS5hcHBlbmRDaGlsZChjb250ZW50W2ldKTsgfSB9DQog
			ICAgcmV0dXJuIGUNCiAgfQ0KICAvLyB3cmFwcGVyIGZvciBlbHQsIHdoaWNoIHJlbW92ZXMgdGhl
			IGVsdCBmcm9tIHRoZSBhY2Nlc3NpYmlsaXR5IHRyZWUNCiAgZnVuY3Rpb24gZWx0UCh0YWcsIGNv
			bnRlbnQsIGNsYXNzTmFtZSwgc3R5bGUpIHsNCiAgICB2YXIgZSA9IGVsdCh0YWcsIGNvbnRlbnQs
			IGNsYXNzTmFtZSwgc3R5bGUpOw0KICAgIGUuc2V0QXR0cmlidXRlKCJyb2xlIiwgInByZXNlbnRh
			dGlvbiIpOw0KICAgIHJldHVybiBlDQogIH0NCg0KICB2YXIgcmFuZ2U7DQogIGlmIChkb2N1bWVu
			dC5jcmVhdGVSYW5nZSkgeyByYW5nZSA9IGZ1bmN0aW9uKG5vZGUsIHN0YXJ0LCBlbmQsIGVuZE5v
			ZGUpIHsNCiAgICB2YXIgciA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7DQogICAgci5zZXRFbmQo
			ZW5kTm9kZSB8fCBub2RlLCBlbmQpOw0KICAgIHIuc2V0U3RhcnQobm9kZSwgc3RhcnQpOw0KICAg
			IHJldHVybiByDQogIH07IH0NCiAgZWxzZSB7IHJhbmdlID0gZnVuY3Rpb24obm9kZSwgc3RhcnQs
			IGVuZCkgew0KICAgIHZhciByID0gZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTsNCiAg
			ICB0cnkgeyByLm1vdmVUb0VsZW1lbnRUZXh0KG5vZGUucGFyZW50Tm9kZSk7IH0NCiAgICBjYXRj
			aChlKSB7IHJldHVybiByIH0NCiAgICByLmNvbGxhcHNlKHRydWUpOw0KICAgIHIubW92ZUVuZCgi
			Y2hhcmFjdGVyIiwgZW5kKTsNCiAgICByLm1vdmVTdGFydCgiY2hhcmFjdGVyIiwgc3RhcnQpOw0K
			ICAgIHJldHVybiByDQogIH07IH0NCg0KICBmdW5jdGlvbiBjb250YWlucyhwYXJlbnQsIGNoaWxk
			KSB7DQogICAgaWYgKGNoaWxkLm5vZGVUeXBlID09IDMpIC8vIEFuZHJvaWQgYnJvd3NlciBhbHdh
			eXMgcmV0dXJucyBmYWxzZSB3aGVuIGNoaWxkIGlzIGEgdGV4dG5vZGUNCiAgICAgIHsgY2hpbGQg
			PSBjaGlsZC5wYXJlbnROb2RlOyB9DQogICAgaWYgKHBhcmVudC5jb250YWlucykNCiAgICAgIHsg
			cmV0dXJuIHBhcmVudC5jb250YWlucyhjaGlsZCkgfQ0KICAgIGRvIHsNCiAgICAgIGlmIChjaGls
			ZC5ub2RlVHlwZSA9PSAxMSkgeyBjaGlsZCA9IGNoaWxkLmhvc3Q7IH0NCiAgICAgIGlmIChjaGls
			ZCA9PSBwYXJlbnQpIHsgcmV0dXJuIHRydWUgfQ0KICAgIH0gd2hpbGUgKGNoaWxkID0gY2hpbGQu
			cGFyZW50Tm9kZSkNCiAgfQ0KDQogIGZ1bmN0aW9uIGFjdGl2ZUVsdCgpIHsNCiAgICAvLyBJRSBh
			bmQgRWRnZSBtYXkgdGhyb3cgYW4gIlVuc3BlY2lmaWVkIEVycm9yIiB3aGVuIGFjY2Vzc2luZyBk
			b2N1bWVudC5hY3RpdmVFbGVtZW50Lg0KICAgIC8vIElFIDwgMTAgd2lsbCB0aHJvdyB3aGVuIGFj
			Y2Vzc2VkIHdoaWxlIHRoZSBwYWdlIGlzIGxvYWRpbmcgb3IgaW4gYW4gaWZyYW1lLg0KICAgIC8v
			IElFID4gOSBhbmQgRWRnZSB3aWxsIHRocm93IHdoZW4gYWNjZXNzZWQgaW4gYW4gaWZyYW1lIGlm
			IGRvY3VtZW50LmJvZHkgaXMgdW5hdmFpbGFibGUuDQogICAgdmFyIGFjdGl2ZUVsZW1lbnQ7DQog
			ICAgdHJ5IHsNCiAgICAgIGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50Ow0K
			ICAgIH0gY2F0Y2goZSkgew0KICAgICAgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmJvZHkgfHwg
			bnVsbDsNCiAgICB9DQogICAgd2hpbGUgKGFjdGl2ZUVsZW1lbnQgJiYgYWN0aXZlRWxlbWVudC5z
			aGFkb3dSb290ICYmIGFjdGl2ZUVsZW1lbnQuc2hhZG93Um9vdC5hY3RpdmVFbGVtZW50KQ0KICAg
			ICAgeyBhY3RpdmVFbGVtZW50ID0gYWN0aXZlRWxlbWVudC5zaGFkb3dSb290LmFjdGl2ZUVsZW1l
			bnQ7IH0NCiAgICByZXR1cm4gYWN0aXZlRWxlbWVudA0KICB9DQoNCiAgZnVuY3Rpb24gYWRkQ2xh
			c3Mobm9kZSwgY2xzKSB7DQogICAgdmFyIGN1cnJlbnQgPSBub2RlLmNsYXNzTmFtZTsNCiAgICBp
			ZiAoIWNsYXNzVGVzdChjbHMpLnRlc3QoY3VycmVudCkpIHsgbm9kZS5jbGFzc05hbWUgKz0gKGN1
			cnJlbnQgPyAiICIgOiAiIikgKyBjbHM7IH0NCiAgfQ0KICBmdW5jdGlvbiBqb2luQ2xhc3Nlcyhh
			LCBiKSB7DQogICAgdmFyIGFzID0gYS5zcGxpdCgiICIpOw0KICAgIGZvciAodmFyIGkgPSAwOyBp
			IDwgYXMubGVuZ3RoOyBpKyspDQogICAgICB7IGlmIChhc1tpXSAmJiAhY2xhc3NUZXN0KGFzW2ld
			KS50ZXN0KGIpKSB7IGIgKz0gIiAiICsgYXNbaV07IH0gfQ0KICAgIHJldHVybiBiDQogIH0NCg0K
			ICB2YXIgc2VsZWN0SW5wdXQgPSBmdW5jdGlvbihub2RlKSB7IG5vZGUuc2VsZWN0KCk7IH07DQog
			IGlmIChpb3MpIC8vIE1vYmlsZSBTYWZhcmkgYXBwYXJlbnRseSBoYXMgYSBidWcgd2hlcmUgc2Vs
			ZWN0KCkgaXMgYnJva2VuLg0KICAgIHsgc2VsZWN0SW5wdXQgPSBmdW5jdGlvbihub2RlKSB7IG5v
			ZGUuc2VsZWN0aW9uU3RhcnQgPSAwOyBub2RlLnNlbGVjdGlvbkVuZCA9IG5vZGUudmFsdWUubGVu
			Z3RoOyB9OyB9DQogIGVsc2UgaWYgKGllKSAvLyBTdXBwcmVzcyBteXN0ZXJpb3VzIElFMTAgZXJy
			b3JzDQogICAgeyBzZWxlY3RJbnB1dCA9IGZ1bmN0aW9uKG5vZGUpIHsgdHJ5IHsgbm9kZS5zZWxl
			Y3QoKTsgfSBjYXRjaChfZSkge30gfTsgfQ0KDQogIGZ1bmN0aW9uIGJpbmQoZikgew0KICAgIHZh
			ciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsNCiAgICBy
			ZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZi5hcHBseShudWxsLCBhcmdzKX0NCiAgfQ0KDQogIGZ1
			bmN0aW9uIGNvcHlPYmoob2JqLCB0YXJnZXQsIG92ZXJ3cml0ZSkgew0KICAgIGlmICghdGFyZ2V0
			KSB7IHRhcmdldCA9IHt9OyB9DQogICAgZm9yICh2YXIgcHJvcCBpbiBvYmopDQogICAgICB7IGlm
			IChvYmouaGFzT3duUHJvcGVydHkocHJvcCkgJiYgKG92ZXJ3cml0ZSAhPT0gZmFsc2UgfHwgIXRh
			cmdldC5oYXNPd25Qcm9wZXJ0eShwcm9wKSkpDQogICAgICAgIHsgdGFyZ2V0W3Byb3BdID0gb2Jq
			W3Byb3BdOyB9IH0NCiAgICByZXR1cm4gdGFyZ2V0DQogIH0NCg0KICAvLyBDb3VudHMgdGhlIGNv
			bHVtbiBvZmZzZXQgaW4gYSBzdHJpbmcsIHRha2luZyB0YWJzIGludG8gYWNjb3VudC4NCiAgLy8g
			VXNlZCBtb3N0bHkgdG8gZmluZCBpbmRlbnRhdGlvbi4NCiAgZnVuY3Rpb24gY291bnRDb2x1bW4o
			c3RyaW5nLCBlbmQsIHRhYlNpemUsIHN0YXJ0SW5kZXgsIHN0YXJ0VmFsdWUpIHsNCiAgICBpZiAo
			ZW5kID09IG51bGwpIHsNCiAgICAgIGVuZCA9IHN0cmluZy5zZWFyY2goL1teXHNcdTAwYTBdLyk7
			DQogICAgICBpZiAoZW5kID09IC0xKSB7IGVuZCA9IHN0cmluZy5sZW5ndGg7IH0NCiAgICB9DQog
			ICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXggfHwgMCwgbiA9IHN0YXJ0VmFsdWUgfHwgMDs7KSB7
			DQogICAgICB2YXIgbmV4dFRhYiA9IHN0cmluZy5pbmRleE9mKCJcdCIsIGkpOw0KICAgICAgaWYg
			KG5leHRUYWIgPCAwIHx8IG5leHRUYWIgPj0gZW5kKQ0KICAgICAgICB7IHJldHVybiBuICsgKGVu
			ZCAtIGkpIH0NCiAgICAgIG4gKz0gbmV4dFRhYiAtIGk7DQogICAgICBuICs9IHRhYlNpemUgLSAo
			biAlIHRhYlNpemUpOw0KICAgICAgaSA9IG5leHRUYWIgKyAxOw0KICAgIH0NCiAgfQ0KDQogIHZh
			ciBEZWxheWVkID0gZnVuY3Rpb24oKSB7DQogICAgdGhpcy5pZCA9IG51bGw7DQogICAgdGhpcy5m
			ID0gbnVsbDsNCiAgICB0aGlzLnRpbWUgPSAwOw0KICAgIHRoaXMuaGFuZGxlciA9IGJpbmQodGhp
			cy5vblRpbWVvdXQsIHRoaXMpOw0KICB9Ow0KICBEZWxheWVkLnByb3RvdHlwZS5vblRpbWVvdXQg
			PSBmdW5jdGlvbiAoc2VsZikgew0KICAgIHNlbGYuaWQgPSAwOw0KICAgIGlmIChzZWxmLnRpbWUg
			PD0gK25ldyBEYXRlKSB7DQogICAgICBzZWxmLmYoKTsNCiAgICB9IGVsc2Ugew0KICAgICAgc2V0
			VGltZW91dChzZWxmLmhhbmRsZXIsIHNlbGYudGltZSAtICtuZXcgRGF0ZSk7DQogICAgfQ0KICB9
			Ow0KICBEZWxheWVkLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAobXMsIGYpIHsNCiAgICB0aGlz
			LmYgPSBmOw0KICAgIHZhciB0aW1lID0gK25ldyBEYXRlICsgbXM7DQogICAgaWYgKCF0aGlzLmlk
			IHx8IHRpbWUgPCB0aGlzLnRpbWUpIHsNCiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmlkKTsNCiAg
			ICAgIHRoaXMuaWQgPSBzZXRUaW1lb3V0KHRoaXMuaGFuZGxlciwgbXMpOw0KICAgICAgdGhpcy50
			aW1lID0gdGltZTsNCiAgICB9DQogIH07DQoNCiAgZnVuY3Rpb24gaW5kZXhPZihhcnJheSwgZWx0
			KSB7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7ICsraSkNCiAgICAgIHsg
			aWYgKGFycmF5W2ldID09IGVsdCkgeyByZXR1cm4gaSB9IH0NCiAgICByZXR1cm4gLTENCiAgfQ0K
			DQogIC8vIE51bWJlciBvZiBwaXhlbHMgYWRkZWQgdG8gc2Nyb2xsZXIgYW5kIHNpemVyIHRvIGhp
			ZGUgc2Nyb2xsYmFyDQogIHZhciBzY3JvbGxlckdhcCA9IDMwOw0KDQogIC8vIFJldHVybmVkIG9y
			IHRocm93biBieSB2YXJpb3VzIHByb3RvY29scyB0byBzaWduYWwgJ0knbSBub3QNCiAgLy8gaGFu
			ZGxpbmcgdGhpcycuDQogIHZhciBQYXNzID0ge3RvU3RyaW5nOiBmdW5jdGlvbigpe3JldHVybiAi
			Q29kZU1pcnJvci5QYXNzIn19Ow0KDQogIC8vIFJldXNlZCBvcHRpb24gb2JqZWN0cyBmb3Igc2V0
			U2VsZWN0aW9uICYgZnJpZW5kcw0KICB2YXIgc2VsX2RvbnRTY3JvbGwgPSB7c2Nyb2xsOiBmYWxz
			ZX0sIHNlbF9tb3VzZSA9IHtvcmlnaW46ICIqbW91c2UifSwgc2VsX21vdmUgPSB7b3JpZ2luOiAi
			K21vdmUifTsNCg0KICAvLyBUaGUgaW52ZXJzZSBvZiBjb3VudENvbHVtbiAtLSBmaW5kIHRoZSBv
			ZmZzZXQgdGhhdCBjb3JyZXNwb25kcyB0bw0KICAvLyBhIHBhcnRpY3VsYXIgY29sdW1uLg0KICBm
			dW5jdGlvbiBmaW5kQ29sdW1uKHN0cmluZywgZ29hbCwgdGFiU2l6ZSkgew0KICAgIGZvciAodmFy
			IHBvcyA9IDAsIGNvbCA9IDA7Oykgew0KICAgICAgdmFyIG5leHRUYWIgPSBzdHJpbmcuaW5kZXhP
			ZigiXHQiLCBwb3MpOw0KICAgICAgaWYgKG5leHRUYWIgPT0gLTEpIHsgbmV4dFRhYiA9IHN0cmlu
			Zy5sZW5ndGg7IH0NCiAgICAgIHZhciBza2lwcGVkID0gbmV4dFRhYiAtIHBvczsNCiAgICAgIGlm
			IChuZXh0VGFiID09IHN0cmluZy5sZW5ndGggfHwgY29sICsgc2tpcHBlZCA+PSBnb2FsKQ0KICAg
			ICAgICB7IHJldHVybiBwb3MgKyBNYXRoLm1pbihza2lwcGVkLCBnb2FsIC0gY29sKSB9DQogICAg
			ICBjb2wgKz0gbmV4dFRhYiAtIHBvczsNCiAgICAgIGNvbCArPSB0YWJTaXplIC0gKGNvbCAlIHRh
			YlNpemUpOw0KICAgICAgcG9zID0gbmV4dFRhYiArIDE7DQogICAgICBpZiAoY29sID49IGdvYWwp
			IHsgcmV0dXJuIHBvcyB9DQogICAgfQ0KICB9DQoNCiAgdmFyIHNwYWNlU3RycyA9IFsiIl07DQog
			IGZ1bmN0aW9uIHNwYWNlU3RyKG4pIHsNCiAgICB3aGlsZSAoc3BhY2VTdHJzLmxlbmd0aCA8PSBu
			KQ0KICAgICAgeyBzcGFjZVN0cnMucHVzaChsc3Qoc3BhY2VTdHJzKSArICIgIik7IH0NCiAgICBy
			ZXR1cm4gc3BhY2VTdHJzW25dDQogIH0NCg0KICBmdW5jdGlvbiBsc3QoYXJyKSB7IHJldHVybiBh
			cnJbYXJyLmxlbmd0aC0xXSB9DQoNCiAgZnVuY3Rpb24gbWFwKGFycmF5LCBmKSB7DQogICAgdmFy
			IG91dCA9IFtdOw0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHsg
			b3V0W2ldID0gZihhcnJheVtpXSwgaSk7IH0NCiAgICByZXR1cm4gb3V0DQogIH0NCg0KICBmdW5j
			dGlvbiBpbnNlcnRTb3J0ZWQoYXJyYXksIHZhbHVlLCBzY29yZSkgew0KICAgIHZhciBwb3MgPSAw
			LCBwcmlvcml0eSA9IHNjb3JlKHZhbHVlKTsNCiAgICB3aGlsZSAocG9zIDwgYXJyYXkubGVuZ3Ro
			ICYmIHNjb3JlKGFycmF5W3Bvc10pIDw9IHByaW9yaXR5KSB7IHBvcysrOyB9DQogICAgYXJyYXku
			c3BsaWNlKHBvcywgMCwgdmFsdWUpOw0KICB9DQoNCiAgZnVuY3Rpb24gbm90aGluZygpIHt9DQoN
			CiAgZnVuY3Rpb24gY3JlYXRlT2JqKGJhc2UsIHByb3BzKSB7DQogICAgdmFyIGluc3Q7DQogICAg
			aWYgKE9iamVjdC5jcmVhdGUpIHsNCiAgICAgIGluc3QgPSBPYmplY3QuY3JlYXRlKGJhc2UpOw0K
			ICAgIH0gZWxzZSB7DQogICAgICBub3RoaW5nLnByb3RvdHlwZSA9IGJhc2U7DQogICAgICBpbnN0
			ID0gbmV3IG5vdGhpbmcoKTsNCiAgICB9DQogICAgaWYgKHByb3BzKSB7IGNvcHlPYmoocHJvcHMs
			IGluc3QpOyB9DQogICAgcmV0dXJuIGluc3QNCiAgfQ0KDQogIHZhciBub25BU0NJSVNpbmdsZUNh
			c2VXb3JkQ2hhciA9IC9bXHUwMGRmXHUwNTg3XHUwNTkwLVx1MDVmNFx1MDYwMC1cdTA2ZmZcdTMw
			NDAtXHUzMDlmXHUzMGEwLVx1MzBmZlx1MzQwMC1cdTRkYjVcdTRlMDAtXHU5ZmNjXHVhYzAwLVx1
			ZDdhZl0vOw0KICBmdW5jdGlvbiBpc1dvcmRDaGFyQmFzaWMoY2gpIHsNCiAgICByZXR1cm4gL1x3
			Ly50ZXN0KGNoKSB8fCBjaCA+ICJceDgwIiAmJg0KICAgICAgKGNoLnRvVXBwZXJDYXNlKCkgIT0g
			Y2gudG9Mb3dlckNhc2UoKSB8fCBub25BU0NJSVNpbmdsZUNhc2VXb3JkQ2hhci50ZXN0KGNoKSkN
			CiAgfQ0KICBmdW5jdGlvbiBpc1dvcmRDaGFyKGNoLCBoZWxwZXIpIHsNCiAgICBpZiAoIWhlbHBl
			cikgeyByZXR1cm4gaXNXb3JkQ2hhckJhc2ljKGNoKSB9DQogICAgaWYgKGhlbHBlci5zb3VyY2Uu
			aW5kZXhPZigiXFx3IikgPiAtMSAmJiBpc1dvcmRDaGFyQmFzaWMoY2gpKSB7IHJldHVybiB0cnVl
			IH0NCiAgICByZXR1cm4gaGVscGVyLnRlc3QoY2gpDQogIH0NCg0KICBmdW5jdGlvbiBpc0VtcHR5
			KG9iaikgew0KICAgIGZvciAodmFyIG4gaW4gb2JqKSB7IGlmIChvYmouaGFzT3duUHJvcGVydHko
			bikgJiYgb2JqW25dKSB7IHJldHVybiBmYWxzZSB9IH0NCiAgICByZXR1cm4gdHJ1ZQ0KICB9DQoN
			CiAgLy8gRXh0ZW5kaW5nIHVuaWNvZGUgY2hhcmFjdGVycy4gQSBzZXJpZXMgb2YgYSBub24tZXh0
			ZW5kaW5nIGNoYXIgKw0KICAvLyBhbnkgbnVtYmVyIG9mIGV4dGVuZGluZyBjaGFycyBpcyB0cmVh
			dGVkIGFzIGEgc2luZ2xlIHVuaXQgYXMgZmFyDQogIC8vIGFzIGVkaXRpbmcgYW5kIG1lYXN1cmlu
			ZyBpcyBjb25jZXJuZWQuIFRoaXMgaXMgbm90IGZ1bGx5IGNvcnJlY3QsDQogIC8vIHNpbmNlIHNv
			bWUgc2NyaXB0cy9mb250cy9icm93c2VycyBhbHNvIHRyZWF0IG90aGVyIGNvbmZpZ3VyYXRpb25z
			DQogIC8vIG9mIGNvZGUgcG9pbnRzIGFzIGEgZ3JvdXAuDQogIHZhciBleHRlbmRpbmdDaGFycyA9
			IC9bXHUwMzAwLVx1MDM2Zlx1MDQ4My1cdTA0ODlcdTA1OTEtXHUwNWJkXHUwNWJmXHUwNWMxXHUw
			NWMyXHUwNWM0XHUwNWM1XHUwNWM3XHUwNjEwLVx1MDYxYVx1MDY0Yi1cdTA2NWVcdTA2NzBcdTA2
			ZDYtXHUwNmRjXHUwNmRlLVx1MDZlNFx1MDZlN1x1MDZlOFx1MDZlYS1cdTA2ZWRcdTA3MTFcdTA3
			MzAtXHUwNzRhXHUwN2E2LVx1MDdiMFx1MDdlYi1cdTA3ZjNcdTA4MTYtXHUwODE5XHUwODFiLVx1
			MDgyM1x1MDgyNS1cdTA4MjdcdTA4MjktXHUwODJkXHUwOTAwLVx1MDkwMlx1MDkzY1x1MDk0MS1c
			dTA5NDhcdTA5NGRcdTA5NTEtXHUwOTU1XHUwOTYyXHUwOTYzXHUwOTgxXHUwOWJjXHUwOWJlXHUw
			OWMxLVx1MDljNFx1MDljZFx1MDlkN1x1MDllMlx1MDllM1x1MGEwMVx1MGEwMlx1MGEzY1x1MGE0
			MVx1MGE0Mlx1MGE0N1x1MGE0OFx1MGE0Yi1cdTBhNGRcdTBhNTFcdTBhNzBcdTBhNzFcdTBhNzVc
			dTBhODFcdTBhODJcdTBhYmNcdTBhYzEtXHUwYWM1XHUwYWM3XHUwYWM4XHUwYWNkXHUwYWUyXHUw
			YWUzXHUwYjAxXHUwYjNjXHUwYjNlXHUwYjNmXHUwYjQxLVx1MGI0NFx1MGI0ZFx1MGI1Nlx1MGI1
			N1x1MGI2Mlx1MGI2M1x1MGI4Mlx1MGJiZVx1MGJjMFx1MGJjZFx1MGJkN1x1MGMzZS1cdTBjNDBc
			dTBjNDYtXHUwYzQ4XHUwYzRhLVx1MGM0ZFx1MGM1NVx1MGM1Nlx1MGM2Mlx1MGM2M1x1MGNiY1x1
			MGNiZlx1MGNjMlx1MGNjNlx1MGNjY1x1MGNjZFx1MGNkNVx1MGNkNlx1MGNlMlx1MGNlM1x1MGQz
			ZVx1MGQ0MS1cdTBkNDRcdTBkNGRcdTBkNTdcdTBkNjJcdTBkNjNcdTBkY2FcdTBkY2ZcdTBkZDIt
			XHUwZGQ0XHUwZGQ2XHUwZGRmXHUwZTMxXHUwZTM0LVx1MGUzYVx1MGU0Ny1cdTBlNGVcdTBlYjFc
			dTBlYjQtXHUwZWI5XHUwZWJiXHUwZWJjXHUwZWM4LVx1MGVjZFx1MGYxOFx1MGYxOVx1MGYzNVx1
			MGYzN1x1MGYzOVx1MGY3MS1cdTBmN2VcdTBmODAtXHUwZjg0XHUwZjg2XHUwZjg3XHUwZjkwLVx1
			MGY5N1x1MGY5OS1cdTBmYmNcdTBmYzZcdTEwMmQtXHUxMDMwXHUxMDMyLVx1MTAzN1x1MTAzOVx1
			MTAzYVx1MTAzZFx1MTAzZVx1MTA1OFx1MTA1OVx1MTA1ZS1cdTEwNjBcdTEwNzEtXHUxMDc0XHUx
			MDgyXHUxMDg1XHUxMDg2XHUxMDhkXHUxMDlkXHUxMzVmXHUxNzEyLVx1MTcxNFx1MTczMi1cdTE3
			MzRcdTE3NTJcdTE3NTNcdTE3NzJcdTE3NzNcdTE3YjctXHUxN2JkXHUxN2M2XHUxN2M5LVx1MTdk
			M1x1MTdkZFx1MTgwYi1cdTE4MGRcdTE4YTlcdTE5MjAtXHUxOTIyXHUxOTI3XHUxOTI4XHUxOTMy
			XHUxOTM5LVx1MTkzYlx1MWExN1x1MWExOFx1MWE1Nlx1MWE1OC1cdTFhNWVcdTFhNjBcdTFhNjJc
			dTFhNjUtXHUxYTZjXHUxYTczLVx1MWE3Y1x1MWE3Zlx1MWIwMC1cdTFiMDNcdTFiMzRcdTFiMzYt
			XHUxYjNhXHUxYjNjXHUxYjQyXHUxYjZiLVx1MWI3M1x1MWI4MFx1MWI4MVx1MWJhMi1cdTFiYTVc
			dTFiYThcdTFiYTlcdTFjMmMtXHUxYzMzXHUxYzM2XHUxYzM3XHUxY2QwLVx1MWNkMlx1MWNkNC1c
			dTFjZTBcdTFjZTItXHUxY2U4XHUxY2VkXHUxZGMwLVx1MWRlNlx1MWRmZC1cdTFkZmZcdTIwMGNc
			dTIwMGRcdTIwZDAtXHUyMGYwXHUyY2VmLVx1MmNmMVx1MmRlMC1cdTJkZmZcdTMwMmEtXHUzMDJm
			XHUzMDk5XHUzMDlhXHVhNjZmLVx1YTY3Mlx1YTY3Y1x1YTY3ZFx1YTZmMFx1YTZmMVx1YTgwMlx1
			YTgwNlx1YTgwYlx1YTgyNVx1YTgyNlx1YThjNFx1YThlMC1cdWE4ZjFcdWE5MjYtXHVhOTJkXHVh
			OTQ3LVx1YTk1MVx1YTk4MC1cdWE5ODJcdWE5YjNcdWE5YjYtXHVhOWI5XHVhOWJjXHVhYTI5LVx1
			YWEyZVx1YWEzMVx1YWEzMlx1YWEzNVx1YWEzNlx1YWE0M1x1YWE0Y1x1YWFiMFx1YWFiMi1cdWFh
			YjRcdWFhYjdcdWFhYjhcdWFhYmVcdWFhYmZcdWFhYzFcdWFiZTVcdWFiZThcdWFiZWRcdWRjMDAt
			XHVkZmZmXHVmYjFlXHVmZTAwLVx1ZmUwZlx1ZmUyMC1cdWZlMjZcdWZmOWVcdWZmOWZdLzsNCiAg
			ZnVuY3Rpb24gaXNFeHRlbmRpbmdDaGFyKGNoKSB7IHJldHVybiBjaC5jaGFyQ29kZUF0KDApID49
			IDc2OCAmJiBleHRlbmRpbmdDaGFycy50ZXN0KGNoKSB9DQoNCiAgLy8gUmV0dXJucyBhIG51bWJl
			ciBmcm9tIHRoZSByYW5nZSBbYDBgOyBgc3RyLmxlbmd0aGBdIHVubGVzcyBgcG9zYCBpcyBvdXRz
			aWRlIHRoYXQgcmFuZ2UuDQogIGZ1bmN0aW9uIHNraXBFeHRlbmRpbmdDaGFycyhzdHIsIHBvcywg
			ZGlyKSB7DQogICAgd2hpbGUgKChkaXIgPCAwID8gcG9zID4gMCA6IHBvcyA8IHN0ci5sZW5ndGgp
			ICYmIGlzRXh0ZW5kaW5nQ2hhcihzdHIuY2hhckF0KHBvcykpKSB7IHBvcyArPSBkaXI7IH0NCiAg
			ICByZXR1cm4gcG9zDQogIH0NCg0KICAvLyBSZXR1cm5zIHRoZSB2YWx1ZSBmcm9tIHRoZSByYW5n
			ZSBbYGZyb21gOyBgdG9gXSB0aGF0IHNhdGlzZmllcw0KICAvLyBgcHJlZGAgYW5kIGlzIGNsb3Nl
			c3QgdG8gYGZyb21gLiBBc3N1bWVzIHRoYXQgYXQgbGVhc3QgYHRvYA0KICAvLyBzYXRpc2ZpZXMg
			YHByZWRgLiBTdXBwb3J0cyBgZnJvbWAgYmVpbmcgZ3JlYXRlciB0aGFuIGB0b2AuDQogIGZ1bmN0
			aW9uIGZpbmRGaXJzdChwcmVkLCBmcm9tLCB0bykgew0KICAgIC8vIEF0IGFueSBwb2ludCB3ZSBh
			cmUgY2VydGFpbiBgdG9gIHNhdGlzZmllcyBgcHJlZGAsIGRvbid0IGtub3cNCiAgICAvLyB3aGV0
			aGVyIGBmcm9tYCBkb2VzLg0KICAgIHZhciBkaXIgPSBmcm9tID4gdG8gPyAtMSA6IDE7DQogICAg
			Zm9yICg7Oykgew0KICAgICAgaWYgKGZyb20gPT0gdG8pIHsgcmV0dXJuIGZyb20gfQ0KICAgICAg
			dmFyIG1pZEYgPSAoZnJvbSArIHRvKSAvIDIsIG1pZCA9IGRpciA8IDAgPyBNYXRoLmNlaWwobWlk
			RikgOiBNYXRoLmZsb29yKG1pZEYpOw0KICAgICAgaWYgKG1pZCA9PSBmcm9tKSB7IHJldHVybiBw
			cmVkKG1pZCkgPyBmcm9tIDogdG8gfQ0KICAgICAgaWYgKHByZWQobWlkKSkgeyB0byA9IG1pZDsg
			fQ0KICAgICAgZWxzZSB7IGZyb20gPSBtaWQgKyBkaXI7IH0NCiAgICB9DQogIH0NCg0KICAvLyBC
			SURJIEhFTFBFUlMNCg0KICBmdW5jdGlvbiBpdGVyYXRlQmlkaVNlY3Rpb25zKG9yZGVyLCBmcm9t
			LCB0bywgZikgew0KICAgIGlmICghb3JkZXIpIHsgcmV0dXJuIGYoZnJvbSwgdG8sICJsdHIiLCAw
			KSB9DQogICAgdmFyIGZvdW5kID0gZmFsc2U7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcmRl
			ci5sZW5ndGg7ICsraSkgew0KICAgICAgdmFyIHBhcnQgPSBvcmRlcltpXTsNCiAgICAgIGlmIChw
			YXJ0LmZyb20gPCB0byAmJiBwYXJ0LnRvID4gZnJvbSB8fCBmcm9tID09IHRvICYmIHBhcnQudG8g
			PT0gZnJvbSkgew0KICAgICAgICBmKE1hdGgubWF4KHBhcnQuZnJvbSwgZnJvbSksIE1hdGgubWlu
			KHBhcnQudG8sIHRvKSwgcGFydC5sZXZlbCA9PSAxID8gInJ0bCIgOiAibHRyIiwgaSk7DQogICAg
			ICAgIGZvdW5kID0gdHJ1ZTsNCiAgICAgIH0NCiAgICB9DQogICAgaWYgKCFmb3VuZCkgeyBmKGZy
			b20sIHRvLCAibHRyIik7IH0NCiAgfQ0KDQogIHZhciBiaWRpT3RoZXIgPSBudWxsOw0KICBmdW5j
			dGlvbiBnZXRCaWRpUGFydEF0KG9yZGVyLCBjaCwgc3RpY2t5KSB7DQogICAgdmFyIGZvdW5kOw0K
			ICAgIGJpZGlPdGhlciA9IG51bGw7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcmRlci5sZW5n
			dGg7ICsraSkgew0KICAgICAgdmFyIGN1ciA9IG9yZGVyW2ldOw0KICAgICAgaWYgKGN1ci5mcm9t
			IDwgY2ggJiYgY3VyLnRvID4gY2gpIHsgcmV0dXJuIGkgfQ0KICAgICAgaWYgKGN1ci50byA9PSBj
			aCkgew0KICAgICAgICBpZiAoY3VyLmZyb20gIT0gY3VyLnRvICYmIHN0aWNreSA9PSAiYmVmb3Jl
			IikgeyBmb3VuZCA9IGk7IH0NCiAgICAgICAgZWxzZSB7IGJpZGlPdGhlciA9IGk7IH0NCiAgICAg
			IH0NCiAgICAgIGlmIChjdXIuZnJvbSA9PSBjaCkgew0KICAgICAgICBpZiAoY3VyLmZyb20gIT0g
			Y3VyLnRvICYmIHN0aWNreSAhPSAiYmVmb3JlIikgeyBmb3VuZCA9IGk7IH0NCiAgICAgICAgZWxz
			ZSB7IGJpZGlPdGhlciA9IGk7IH0NCiAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIGZvdW5kICE9
			IG51bGwgPyBmb3VuZCA6IGJpZGlPdGhlcg0KICB9DQoNCiAgLy8gQmlkaXJlY3Rpb25hbCBvcmRl
			cmluZyBhbGdvcml0aG0NCiAgLy8gU2VlIGh0dHA6Ly91bmljb2RlLm9yZy9yZXBvcnRzL3RyOS90
			cjktMTMuaHRtbCBmb3IgdGhlIGFsZ29yaXRobQ0KICAvLyB0aGF0IHRoaXMgKHBhcnRpYWxseSkg
			aW1wbGVtZW50cy4NCg0KICAvLyBPbmUtY2hhciBjb2RlcyB1c2VkIGZvciBjaGFyYWN0ZXIgdHlw
			ZXM6DQogIC8vIEwgKEwpOiAgIExlZnQtdG8tUmlnaHQNCiAgLy8gUiAoUik6ICAgUmlnaHQtdG8t
			TGVmdA0KICAvLyByIChBTCk6ICBSaWdodC10by1MZWZ0IEFyYWJpYw0KICAvLyAxIChFTik6ICBF
			dXJvcGVhbiBOdW1iZXINCiAgLy8gKyAoRVMpOiAgRXVyb3BlYW4gTnVtYmVyIFNlcGFyYXRvcg0K
			ICAvLyAlIChFVCk6ICBFdXJvcGVhbiBOdW1iZXIgVGVybWluYXRvcg0KICAvLyBuIChBTik6ICBB
			cmFiaWMgTnVtYmVyDQogIC8vICwgKENTKTogIENvbW1vbiBOdW1iZXIgU2VwYXJhdG9yDQogIC8v
			IG0gKE5TTSk6IE5vbi1TcGFjaW5nIE1hcmsNCiAgLy8gYiAoQk4pOiAgQm91bmRhcnkgTmV1dHJh
			bA0KICAvLyBzIChCKTogICBQYXJhZ3JhcGggU2VwYXJhdG9yDQogIC8vIHQgKFMpOiAgIFNlZ21l
			bnQgU2VwYXJhdG9yDQogIC8vIHcgKFdTKTogIFdoaXRlc3BhY2UNCiAgLy8gTiAoT04pOiAgT3Ro
			ZXIgTmV1dHJhbHMNCg0KICAvLyBSZXR1cm5zIG51bGwgaWYgY2hhcmFjdGVycyBhcmUgb3JkZXJl
			ZCBhcyB0aGV5IGFwcGVhcg0KICAvLyAobGVmdC10by1yaWdodCksIG9yIGFuIGFycmF5IG9mIHNl
			Y3Rpb25zICh7ZnJvbSwgdG8sIGxldmVsfQ0KICAvLyBvYmplY3RzKSBpbiB0aGUgb3JkZXIgaW4g
			d2hpY2ggdGhleSBvY2N1ciB2aXN1YWxseS4NCiAgdmFyIGJpZGlPcmRlcmluZyA9IChmdW5jdGlv
			bigpIHsNCiAgICAvLyBDaGFyYWN0ZXIgdHlwZXMgZm9yIGNvZGVwb2ludHMgMCB0byAweGZmDQog
			ICAgdmFyIGxvd1R5cGVzID0gImJiYmJiYmJiYnRzdHdzYmJiYmJiYmJiYmJiYmJzc3N0d05OJSUl
			Tk5OTk5OLE4sTjExMTExMTExMTFOTk5OTk5OTExMTExMTExMTExMTExMTExMTExMTExMTExOTk5O
			Tk5MTExMTExMTExMTExMTExMTExMTExMTExMTE5OTk5iYmJiYmJzYmJiYmJiYmJiYmJiYmJiYmJi
			YmJiYmJiYmIsTiUlJSVOTk5OTE5OTk5OJSUxMU5MTk5OMUxOTk5OTkxMTExMTExMTExMTExMTExM
			TExMTExMTkxMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExOIjsNCiAgICAvLyBDaGFyYWN0
			ZXIgdHlwZXMgZm9yIGNvZGVwb2ludHMgMHg2MDAgdG8gMHg2ZjkNCiAgICB2YXIgYXJhYmljVHlw
			ZXMgPSAibm5ubm5uTk5yJSVyLHJOTm1tbW1tbW1tbW1tcnJycnJycnJycnJycnJycnJycnJycnJy
			cnJycnJycnJycnJycnJycnJycnJycnJybW1tbW1tbW1tbW1tbW1tbW1tbW1tbm5ubm5ubm5ubiVu
			bnJycm1ycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJy
			cnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycm1tbW1tbW1u
			Tm1tbW1tbXJybW1ObW1tbXJyMTExMTExMTExMSI7DQogICAgZnVuY3Rpb24gY2hhclR5cGUoY29k
			ZSkgew0KICAgICAgaWYgKGNvZGUgPD0gMHhmNykgeyByZXR1cm4gbG93VHlwZXMuY2hhckF0KGNv
			ZGUpIH0NCiAgICAgIGVsc2UgaWYgKDB4NTkwIDw9IGNvZGUgJiYgY29kZSA8PSAweDVmNCkgeyBy
			ZXR1cm4gIlIiIH0NCiAgICAgIGVsc2UgaWYgKDB4NjAwIDw9IGNvZGUgJiYgY29kZSA8PSAweDZm
			OSkgeyByZXR1cm4gYXJhYmljVHlwZXMuY2hhckF0KGNvZGUgLSAweDYwMCkgfQ0KICAgICAgZWxz
			ZSBpZiAoMHg2ZWUgPD0gY29kZSAmJiBjb2RlIDw9IDB4OGFjKSB7IHJldHVybiAiciIgfQ0KICAg
			ICAgZWxzZSBpZiAoMHgyMDAwIDw9IGNvZGUgJiYgY29kZSA8PSAweDIwMGIpIHsgcmV0dXJuICJ3
			IiB9DQogICAgICBlbHNlIGlmIChjb2RlID09IDB4MjAwYykgeyByZXR1cm4gImIiIH0NCiAgICAg
			IGVsc2UgeyByZXR1cm4gIkwiIH0NCiAgICB9DQoNCiAgICB2YXIgYmlkaVJFID0gL1tcdTA1OTAt
			XHUwNWY0XHUwNjAwLVx1MDZmZlx1MDcwMC1cdTA4YWNdLzsNCiAgICB2YXIgaXNOZXV0cmFsID0g
			L1tzdHdOXS8sIGlzU3Ryb25nID0gL1tMUnJdLywgY291bnRzQXNMZWZ0ID0gL1tMYjFuXS8sIGNv
			dW50c0FzTnVtID0gL1sxbl0vOw0KDQogICAgZnVuY3Rpb24gQmlkaVNwYW4obGV2ZWwsIGZyb20s
			IHRvKSB7DQogICAgICB0aGlzLmxldmVsID0gbGV2ZWw7DQogICAgICB0aGlzLmZyb20gPSBmcm9t
			OyB0aGlzLnRvID0gdG87DQogICAgfQ0KDQogICAgcmV0dXJuIGZ1bmN0aW9uKHN0ciwgZGlyZWN0
			aW9uKSB7DQogICAgICB2YXIgb3V0ZXJUeXBlID0gZGlyZWN0aW9uID09ICJsdHIiID8gIkwiIDog
			IlIiOw0KDQogICAgICBpZiAoc3RyLmxlbmd0aCA9PSAwIHx8IGRpcmVjdGlvbiA9PSAibHRyIiAm
			JiAhYmlkaVJFLnRlc3Qoc3RyKSkgeyByZXR1cm4gZmFsc2UgfQ0KICAgICAgdmFyIGxlbiA9IHN0
			ci5sZW5ndGgsIHR5cGVzID0gW107DQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytp
			KQ0KICAgICAgICB7IHR5cGVzLnB1c2goY2hhclR5cGUoc3RyLmNoYXJDb2RlQXQoaSkpKTsgfQ0K
			DQogICAgICAvLyBXMS4gRXhhbWluZSBlYWNoIG5vbi1zcGFjaW5nIG1hcmsgKE5TTSkgaW4gdGhl
			IGxldmVsIHJ1biwgYW5kDQogICAgICAvLyBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIE5TTSB0byB0
			aGUgdHlwZSBvZiB0aGUgcHJldmlvdXMNCiAgICAgIC8vIGNoYXJhY3Rlci4gSWYgdGhlIE5TTSBp
			cyBhdCB0aGUgc3RhcnQgb2YgdGhlIGxldmVsIHJ1biwgaXQgd2lsbA0KICAgICAgLy8gZ2V0IHRo
			ZSB0eXBlIG9mIHNvci4NCiAgICAgIGZvciAodmFyIGkkMSA9IDAsIHByZXYgPSBvdXRlclR5cGU7
			IGkkMSA8IGxlbjsgKytpJDEpIHsNCiAgICAgICAgdmFyIHR5cGUgPSB0eXBlc1tpJDFdOw0KICAg
			ICAgICBpZiAodHlwZSA9PSAibSIpIHsgdHlwZXNbaSQxXSA9IHByZXY7IH0NCiAgICAgICAgZWxz
			ZSB7IHByZXYgPSB0eXBlOyB9DQogICAgICB9DQoNCiAgICAgIC8vIFcyLiBTZWFyY2ggYmFja3dh
			cmRzIGZyb20gZWFjaCBpbnN0YW5jZSBvZiBhIEV1cm9wZWFuIG51bWJlcg0KICAgICAgLy8gdW50
			aWwgdGhlIGZpcnN0IHN0cm9uZyB0eXBlIChSLCBMLCBBTCwgb3Igc29yKSBpcyBmb3VuZC4gSWYg
			YW4NCiAgICAgIC8vIEFMIGlzIGZvdW5kLCBjaGFuZ2UgdGhlIHR5cGUgb2YgdGhlIEV1cm9wZWFu
			IG51bWJlciB0byBBcmFiaWMNCiAgICAgIC8vIG51bWJlci4NCiAgICAgIC8vIFczLiBDaGFuZ2Ug
			YWxsIEFMcyB0byBSLg0KICAgICAgZm9yICh2YXIgaSQyID0gMCwgY3VyID0gb3V0ZXJUeXBlOyBp
			JDIgPCBsZW47ICsraSQyKSB7DQogICAgICAgIHZhciB0eXBlJDEgPSB0eXBlc1tpJDJdOw0KICAg
			ICAgICBpZiAodHlwZSQxID09ICIxIiAmJiBjdXIgPT0gInIiKSB7IHR5cGVzW2kkMl0gPSAibiI7
			IH0NCiAgICAgICAgZWxzZSBpZiAoaXNTdHJvbmcudGVzdCh0eXBlJDEpKSB7IGN1ciA9IHR5cGUk
			MTsgaWYgKHR5cGUkMSA9PSAiciIpIHsgdHlwZXNbaSQyXSA9ICJSIjsgfSB9DQogICAgICB9DQoN
			CiAgICAgIC8vIFc0LiBBIHNpbmdsZSBFdXJvcGVhbiBzZXBhcmF0b3IgYmV0d2VlbiB0d28gRXVy
			b3BlYW4gbnVtYmVycw0KICAgICAgLy8gY2hhbmdlcyB0byBhIEV1cm9wZWFuIG51bWJlci4gQSBz
			aW5nbGUgY29tbW9uIHNlcGFyYXRvciBiZXR3ZWVuDQogICAgICAvLyB0d28gbnVtYmVycyBvZiB0
			aGUgc2FtZSB0eXBlIGNoYW5nZXMgdG8gdGhhdCB0eXBlLg0KICAgICAgZm9yICh2YXIgaSQzID0g
			MSwgcHJldiQxID0gdHlwZXNbMF07IGkkMyA8IGxlbiAtIDE7ICsraSQzKSB7DQogICAgICAgIHZh
			ciB0eXBlJDIgPSB0eXBlc1tpJDNdOw0KICAgICAgICBpZiAodHlwZSQyID09ICIrIiAmJiBwcmV2
			JDEgPT0gIjEiICYmIHR5cGVzW2kkMysxXSA9PSAiMSIpIHsgdHlwZXNbaSQzXSA9ICIxIjsgfQ0K
			ICAgICAgICBlbHNlIGlmICh0eXBlJDIgPT0gIiwiICYmIHByZXYkMSA9PSB0eXBlc1tpJDMrMV0g
			JiYNCiAgICAgICAgICAgICAgICAgKHByZXYkMSA9PSAiMSIgfHwgcHJldiQxID09ICJuIikpIHsg
			dHlwZXNbaSQzXSA9IHByZXYkMTsgfQ0KICAgICAgICBwcmV2JDEgPSB0eXBlJDI7DQogICAgICB9
			DQoNCiAgICAgIC8vIFc1LiBBIHNlcXVlbmNlIG9mIEV1cm9wZWFuIHRlcm1pbmF0b3JzIGFkamFj
			ZW50IHRvIEV1cm9wZWFuDQogICAgICAvLyBudW1iZXJzIGNoYW5nZXMgdG8gYWxsIEV1cm9wZWFu
			IG51bWJlcnMuDQogICAgICAvLyBXNi4gT3RoZXJ3aXNlLCBzZXBhcmF0b3JzIGFuZCB0ZXJtaW5h
			dG9ycyBjaGFuZ2UgdG8gT3RoZXINCiAgICAgIC8vIE5ldXRyYWwuDQogICAgICBmb3IgKHZhciBp
			JDQgPSAwOyBpJDQgPCBsZW47ICsraSQ0KSB7DQogICAgICAgIHZhciB0eXBlJDMgPSB0eXBlc1tp
			JDRdOw0KICAgICAgICBpZiAodHlwZSQzID09ICIsIikgeyB0eXBlc1tpJDRdID0gIk4iOyB9DQog
			ICAgICAgIGVsc2UgaWYgKHR5cGUkMyA9PSAiJSIpIHsNCiAgICAgICAgICB2YXIgZW5kID0gKHZv
			aWQgMCk7DQogICAgICAgICAgZm9yIChlbmQgPSBpJDQgKyAxOyBlbmQgPCBsZW4gJiYgdHlwZXNb
			ZW5kXSA9PSAiJSI7ICsrZW5kKSB7fQ0KICAgICAgICAgIHZhciByZXBsYWNlID0gKGkkNCAmJiB0
			eXBlc1tpJDQtMV0gPT0gIiEiKSB8fCAoZW5kIDwgbGVuICYmIHR5cGVzW2VuZF0gPT0gIjEiKSA/
			ICIxIiA6ICJOIjsNCiAgICAgICAgICBmb3IgKHZhciBqID0gaSQ0OyBqIDwgZW5kOyArK2opIHsg
			dHlwZXNbal0gPSByZXBsYWNlOyB9DQogICAgICAgICAgaSQ0ID0gZW5kIC0gMTsNCiAgICAgICAg
			fQ0KICAgICAgfQ0KDQogICAgICAvLyBXNy4gU2VhcmNoIGJhY2t3YXJkcyBmcm9tIGVhY2ggaW5z
			dGFuY2Ugb2YgYSBFdXJvcGVhbiBudW1iZXINCiAgICAgIC8vIHVudGlsIHRoZSBmaXJzdCBzdHJv
			bmcgdHlwZSAoUiwgTCwgb3Igc29yKSBpcyBmb3VuZC4gSWYgYW4gTCBpcw0KICAgICAgLy8gZm91
			bmQsIHRoZW4gY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBFdXJvcGVhbiBudW1iZXIgdG8gTC4NCiAg
			ICAgIGZvciAodmFyIGkkNSA9IDAsIGN1ciQxID0gb3V0ZXJUeXBlOyBpJDUgPCBsZW47ICsraSQ1
			KSB7DQogICAgICAgIHZhciB0eXBlJDQgPSB0eXBlc1tpJDVdOw0KICAgICAgICBpZiAoY3VyJDEg
			PT0gIkwiICYmIHR5cGUkNCA9PSAiMSIpIHsgdHlwZXNbaSQ1XSA9ICJMIjsgfQ0KICAgICAgICBl
			bHNlIGlmIChpc1N0cm9uZy50ZXN0KHR5cGUkNCkpIHsgY3VyJDEgPSB0eXBlJDQ7IH0NCiAgICAg
			IH0NCg0KICAgICAgLy8gTjEuIEEgc2VxdWVuY2Ugb2YgbmV1dHJhbHMgdGFrZXMgdGhlIGRpcmVj
			dGlvbiBvZiB0aGUNCiAgICAgIC8vIHN1cnJvdW5kaW5nIHN0cm9uZyB0ZXh0IGlmIHRoZSB0ZXh0
			IG9uIGJvdGggc2lkZXMgaGFzIHRoZSBzYW1lDQogICAgICAvLyBkaXJlY3Rpb24uIEV1cm9wZWFu
			IGFuZCBBcmFiaWMgbnVtYmVycyBhY3QgYXMgaWYgdGhleSB3ZXJlIFIgaW4NCiAgICAgIC8vIHRl
			cm1zIG9mIHRoZWlyIGluZmx1ZW5jZSBvbiBuZXV0cmFscy4gU3RhcnQtb2YtbGV2ZWwtcnVuIChz
			b3IpDQogICAgICAvLyBhbmQgZW5kLW9mLWxldmVsLXJ1biAoZW9yKSBhcmUgdXNlZCBhdCBsZXZl
			bCBydW4gYm91bmRhcmllcy4NCiAgICAgIC8vIE4yLiBBbnkgcmVtYWluaW5nIG5ldXRyYWxzIHRh
			a2UgdGhlIGVtYmVkZGluZyBkaXJlY3Rpb24uDQogICAgICBmb3IgKHZhciBpJDYgPSAwOyBpJDYg
			PCBsZW47ICsraSQ2KSB7DQogICAgICAgIGlmIChpc05ldXRyYWwudGVzdCh0eXBlc1tpJDZdKSkg
			ew0KICAgICAgICAgIHZhciBlbmQkMSA9ICh2b2lkIDApOw0KICAgICAgICAgIGZvciAoZW5kJDEg
			PSBpJDYgKyAxOyBlbmQkMSA8IGxlbiAmJiBpc05ldXRyYWwudGVzdCh0eXBlc1tlbmQkMV0pOyAr
			K2VuZCQxKSB7fQ0KICAgICAgICAgIHZhciBiZWZvcmUgPSAoaSQ2ID8gdHlwZXNbaSQ2LTFdIDog
			b3V0ZXJUeXBlKSA9PSAiTCI7DQogICAgICAgICAgdmFyIGFmdGVyID0gKGVuZCQxIDwgbGVuID8g
			dHlwZXNbZW5kJDFdIDogb3V0ZXJUeXBlKSA9PSAiTCI7DQogICAgICAgICAgdmFyIHJlcGxhY2Uk
			MSA9IGJlZm9yZSA9PSBhZnRlciA/IChiZWZvcmUgPyAiTCIgOiAiUiIpIDogb3V0ZXJUeXBlOw0K
			ICAgICAgICAgIGZvciAodmFyIGokMSA9IGkkNjsgaiQxIDwgZW5kJDE7ICsraiQxKSB7IHR5cGVz
			W2okMV0gPSByZXBsYWNlJDE7IH0NCiAgICAgICAgICBpJDYgPSBlbmQkMSAtIDE7DQogICAgICAg
			IH0NCiAgICAgIH0NCg0KICAgICAgLy8gSGVyZSB3ZSBkZXBhcnQgZnJvbSB0aGUgZG9jdW1lbnRl
			ZCBhbGdvcml0aG0sIGluIG9yZGVyIHRvIGF2b2lkDQogICAgICAvLyBidWlsZGluZyB1cCBhbiBh
			Y3R1YWwgbGV2ZWxzIGFycmF5LiBTaW5jZSB0aGVyZSBhcmUgb25seSB0aHJlZQ0KICAgICAgLy8g
			bGV2ZWxzICgwLCAxLCAyKSBpbiBhbiBpbXBsZW1lbnRhdGlvbiB0aGF0IGRvZXNuJ3QgdGFrZQ0K
			ICAgICAgLy8gZXhwbGljaXQgZW1iZWRkaW5nIGludG8gYWNjb3VudCwgd2UgY2FuIGJ1aWxkIHVw
			IHRoZSBvcmRlciBvbg0KICAgICAgLy8gdGhlIGZseSwgd2l0aG91dCBmb2xsb3dpbmcgdGhlIGxl
			dmVsLWJhc2VkIGFsZ29yaXRobS4NCiAgICAgIHZhciBvcmRlciA9IFtdLCBtOw0KICAgICAgZm9y
			ICh2YXIgaSQ3ID0gMDsgaSQ3IDwgbGVuOykgew0KICAgICAgICBpZiAoY291bnRzQXNMZWZ0LnRl
			c3QodHlwZXNbaSQ3XSkpIHsNCiAgICAgICAgICB2YXIgc3RhcnQgPSBpJDc7DQogICAgICAgICAg
			Zm9yICgrK2kkNzsgaSQ3IDwgbGVuICYmIGNvdW50c0FzTGVmdC50ZXN0KHR5cGVzW2kkN10pOyAr
			K2kkNykge30NCiAgICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbigwLCBzdGFydCwgaSQ3
			KSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdmFyIHBvcyA9IGkkNywgYXQgPSBvcmRl
			ci5sZW5ndGgsIGlzUlRMID0gZGlyZWN0aW9uID09ICJydGwiID8gMSA6IDA7DQogICAgICAgICAg
			Zm9yICgrK2kkNzsgaSQ3IDwgbGVuICYmIHR5cGVzW2kkN10gIT0gIkwiOyArK2kkNykge30NCiAg
			ICAgICAgICBmb3IgKHZhciBqJDIgPSBwb3M7IGokMiA8IGkkNzspIHsNCiAgICAgICAgICAgIGlm
			IChjb3VudHNBc051bS50ZXN0KHR5cGVzW2okMl0pKSB7DQogICAgICAgICAgICAgIGlmIChwb3Mg
			PCBqJDIpIHsgb3JkZXIuc3BsaWNlKGF0LCAwLCBuZXcgQmlkaVNwYW4oMSwgcG9zLCBqJDIpKTsg
			YXQgKz0gaXNSVEw7IH0NCiAgICAgICAgICAgICAgdmFyIG5zdGFydCA9IGokMjsNCiAgICAgICAg
			ICAgICAgZm9yICgrK2okMjsgaiQyIDwgaSQ3ICYmIGNvdW50c0FzTnVtLnRlc3QodHlwZXNbaiQy
			XSk7ICsraiQyKSB7fQ0KICAgICAgICAgICAgICBvcmRlci5zcGxpY2UoYXQsIDAsIG5ldyBCaWRp
			U3BhbigyLCBuc3RhcnQsIGokMikpOw0KICAgICAgICAgICAgICBhdCArPSBpc1JUTDsNCiAgICAg
			ICAgICAgICAgcG9zID0gaiQyOw0KICAgICAgICAgICAgfSBlbHNlIHsgKytqJDI7IH0NCiAgICAg
			ICAgICB9DQogICAgICAgICAgaWYgKHBvcyA8IGkkNykgeyBvcmRlci5zcGxpY2UoYXQsIDAsIG5l
			dyBCaWRpU3BhbigxLCBwb3MsIGkkNykpOyB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlm
			IChkaXJlY3Rpb24gPT0gImx0ciIpIHsNCiAgICAgICAgaWYgKG9yZGVyWzBdLmxldmVsID09IDEg
			JiYgKG0gPSBzdHIubWF0Y2goL15ccysvKSkpIHsNCiAgICAgICAgICBvcmRlclswXS5mcm9tID0g
			bVswXS5sZW5ndGg7DQogICAgICAgICAgb3JkZXIudW5zaGlmdChuZXcgQmlkaVNwYW4oMCwgMCwg
			bVswXS5sZW5ndGgpKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobHN0KG9yZGVyKS5sZXZlbCA9
			PSAxICYmIChtID0gc3RyLm1hdGNoKC9ccyskLykpKSB7DQogICAgICAgICAgbHN0KG9yZGVyKS50
			byAtPSBtWzBdLmxlbmd0aDsNCiAgICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbigwLCBs
			ZW4gLSBtWzBdLmxlbmd0aCwgbGVuKSk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgcmV0
			dXJuIGRpcmVjdGlvbiA9PSAicnRsIiA/IG9yZGVyLnJldmVyc2UoKSA6IG9yZGVyDQogICAgfQ0K
			ICB9KSgpOw0KDQogIC8vIEdldCB0aGUgYmlkaSBvcmRlcmluZyBmb3IgdGhlIGdpdmVuIGxpbmUg
			KGFuZCBjYWNoZSBpdCkuIFJldHVybnMNCiAgLy8gZmFsc2UgZm9yIGxpbmVzIHRoYXQgYXJlIGZ1
			bGx5IGxlZnQtdG8tcmlnaHQsIGFuZCBhbiBhcnJheSBvZg0KICAvLyBCaWRpU3BhbiBvYmplY3Rz
			IG90aGVyd2lzZS4NCiAgZnVuY3Rpb24gZ2V0T3JkZXIobGluZSwgZGlyZWN0aW9uKSB7DQogICAg
			dmFyIG9yZGVyID0gbGluZS5vcmRlcjsNCiAgICBpZiAob3JkZXIgPT0gbnVsbCkgeyBvcmRlciA9
			IGxpbmUub3JkZXIgPSBiaWRpT3JkZXJpbmcobGluZS50ZXh0LCBkaXJlY3Rpb24pOyB9DQogICAg
			cmV0dXJuIG9yZGVyDQogIH0NCg0KICAvLyBFVkVOVCBIQU5ETElORw0KDQogIC8vIExpZ2h0d2Vp
			Z2h0IGV2ZW50IGZyYW1ld29yay4gb24vb2ZmIGFsc28gd29yayBvbiBET00gbm9kZXMsDQogIC8v
			IHJlZ2lzdGVyaW5nIG5hdGl2ZSBET00gaGFuZGxlcnMuDQoNCiAgdmFyIG5vSGFuZGxlcnMgPSBb
			XTsNCg0KICB2YXIgb24gPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlLCBmKSB7DQogICAgaWYgKGVt
			aXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcikgew0KICAgICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVy
			KHR5cGUsIGYsIGZhbHNlKTsNCiAgICB9IGVsc2UgaWYgKGVtaXR0ZXIuYXR0YWNoRXZlbnQpIHsN
			CiAgICAgIGVtaXR0ZXIuYXR0YWNoRXZlbnQoIm9uIiArIHR5cGUsIGYpOw0KICAgIH0gZWxzZSB7
			DQogICAgICB2YXIgbWFwJCQxID0gZW1pdHRlci5faGFuZGxlcnMgfHwgKGVtaXR0ZXIuX2hhbmRs
			ZXJzID0ge30pOw0KICAgICAgbWFwJCQxW3R5cGVdID0gKG1hcCQkMVt0eXBlXSB8fCBub0hhbmRs
			ZXJzKS5jb25jYXQoZik7DQogICAgfQ0KICB9Ow0KDQogIGZ1bmN0aW9uIGdldEhhbmRsZXJzKGVt
			aXR0ZXIsIHR5cGUpIHsNCiAgICByZXR1cm4gZW1pdHRlci5faGFuZGxlcnMgJiYgZW1pdHRlci5f
			aGFuZGxlcnNbdHlwZV0gfHwgbm9IYW5kbGVycw0KICB9DQoNCiAgZnVuY3Rpb24gb2ZmKGVtaXR0
			ZXIsIHR5cGUsIGYpIHsNCiAgICBpZiAoZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKSB7DQog
			ICAgICBlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZiwgZmFsc2UpOw0KICAgIH0g
			ZWxzZSBpZiAoZW1pdHRlci5kZXRhY2hFdmVudCkgew0KICAgICAgZW1pdHRlci5kZXRhY2hFdmVu
			dCgib24iICsgdHlwZSwgZik7DQogICAgfSBlbHNlIHsNCiAgICAgIHZhciBtYXAkJDEgPSBlbWl0
			dGVyLl9oYW5kbGVycywgYXJyID0gbWFwJCQxICYmIG1hcCQkMVt0eXBlXTsNCiAgICAgIGlmIChh
			cnIpIHsNCiAgICAgICAgdmFyIGluZGV4ID0gaW5kZXhPZihhcnIsIGYpOw0KICAgICAgICBpZiAo
			aW5kZXggPiAtMSkNCiAgICAgICAgICB7IG1hcCQkMVt0eXBlXSA9IGFyci5zbGljZSgwLCBpbmRl
			eCkuY29uY2F0KGFyci5zbGljZShpbmRleCArIDEpKTsgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0K
			DQogIGZ1bmN0aW9uIHNpZ25hbChlbWl0dGVyLCB0eXBlIC8qLCB2YWx1ZXMuLi4qLykgew0KICAg
			IHZhciBoYW5kbGVycyA9IGdldEhhbmRsZXJzKGVtaXR0ZXIsIHR5cGUpOw0KICAgIGlmICghaGFu
			ZGxlcnMubGVuZ3RoKSB7IHJldHVybiB9DQogICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUu
			c2xpY2UuY2FsbChhcmd1bWVudHMsIDIpOw0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGFuZGxl
			cnMubGVuZ3RoOyArK2kpIHsgaGFuZGxlcnNbaV0uYXBwbHkobnVsbCwgYXJncyk7IH0NCiAgfQ0K
			DQogIC8vIFRoZSBET00gZXZlbnRzIHRoYXQgQ29kZU1pcnJvciBoYW5kbGVzIGNhbiBiZSBvdmVy
			cmlkZGVuIGJ5DQogIC8vIHJlZ2lzdGVyaW5nIGEgKG5vbi1ET00pIGhhbmRsZXIgb24gdGhlIGVk
			aXRvciBmb3IgdGhlIGV2ZW50IG5hbWUsDQogIC8vIGFuZCBwcmV2ZW50RGVmYXVsdC1pbmcgdGhl
			IGV2ZW50IGluIHRoYXQgaGFuZGxlci4NCiAgZnVuY3Rpb24gc2lnbmFsRE9NRXZlbnQoY20sIGUs
			IG92ZXJyaWRlKSB7DQogICAgaWYgKHR5cGVvZiBlID09ICJzdHJpbmciKQ0KICAgICAgeyBlID0g
			e3R5cGU6IGUsIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHsgdGhpcy5kZWZhdWx0UHJldmVu
			dGVkID0gdHJ1ZTsgfX07IH0NCiAgICBzaWduYWwoY20sIG92ZXJyaWRlIHx8IGUudHlwZSwgY20s
			IGUpOw0KICAgIHJldHVybiBlX2RlZmF1bHRQcmV2ZW50ZWQoZSkgfHwgZS5jb2RlbWlycm9ySWdu
			b3JlDQogIH0NCg0KICBmdW5jdGlvbiBzaWduYWxDdXJzb3JBY3Rpdml0eShjbSkgew0KICAgIHZh
			ciBhcnIgPSBjbS5faGFuZGxlcnMgJiYgY20uX2hhbmRsZXJzLmN1cnNvckFjdGl2aXR5Ow0KICAg
			IGlmICghYXJyKSB7IHJldHVybiB9DQogICAgdmFyIHNldCA9IGNtLmN1ck9wLmN1cnNvckFjdGl2
			aXR5SGFuZGxlcnMgfHwgKGNtLmN1ck9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnMgPSBbXSk7DQog
			ICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHsgaWYgKGluZGV4T2Yoc2V0
			LCBhcnJbaV0pID09IC0xKQ0KICAgICAgeyBzZXQucHVzaChhcnJbaV0pOyB9IH0NCiAgfQ0KDQog
			IGZ1bmN0aW9uIGhhc0hhbmRsZXIoZW1pdHRlciwgdHlwZSkgew0KICAgIHJldHVybiBnZXRIYW5k
			bGVycyhlbWl0dGVyLCB0eXBlKS5sZW5ndGggPiAwDQogIH0NCg0KICAvLyBBZGQgb24gYW5kIG9m
			ZiBtZXRob2RzIHRvIGEgY29uc3RydWN0b3IncyBwcm90b3R5cGUsIHRvIG1ha2UNCiAgLy8gcmVn
			aXN0ZXJpbmcgZXZlbnRzIG9uIHN1Y2ggb2JqZWN0cyBtb3JlIGNvbnZlbmllbnQuDQogIGZ1bmN0
			aW9uIGV2ZW50TWl4aW4oY3Rvcikgew0KICAgIGN0b3IucHJvdG90eXBlLm9uID0gZnVuY3Rpb24o
			dHlwZSwgZikge29uKHRoaXMsIHR5cGUsIGYpO307DQogICAgY3Rvci5wcm90b3R5cGUub2ZmID0g
			ZnVuY3Rpb24odHlwZSwgZikge29mZih0aGlzLCB0eXBlLCBmKTt9Ow0KICB9DQoNCiAgLy8gRHVl
			IHRvIHRoZSBmYWN0IHRoYXQgd2Ugc3RpbGwgc3VwcG9ydCBqdXJhc3NpYyBJRSB2ZXJzaW9ucywg
			c29tZQ0KICAvLyBjb21wYXRpYmlsaXR5IHdyYXBwZXJzIGFyZSBuZWVkZWQuDQoNCiAgZnVuY3Rp
			b24gZV9wcmV2ZW50RGVmYXVsdChlKSB7DQogICAgaWYgKGUucHJldmVudERlZmF1bHQpIHsgZS5w
			cmV2ZW50RGVmYXVsdCgpOyB9DQogICAgZWxzZSB7IGUucmV0dXJuVmFsdWUgPSBmYWxzZTsgfQ0K
			ICB9DQogIGZ1bmN0aW9uIGVfc3RvcFByb3BhZ2F0aW9uKGUpIHsNCiAgICBpZiAoZS5zdG9wUHJv
			cGFnYXRpb24pIHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgfQ0KICAgIGVsc2UgeyBlLmNhbmNlbEJ1
			YmJsZSA9IHRydWU7IH0NCiAgfQ0KICBmdW5jdGlvbiBlX2RlZmF1bHRQcmV2ZW50ZWQoZSkgew0K
			ICAgIHJldHVybiBlLmRlZmF1bHRQcmV2ZW50ZWQgIT0gbnVsbCA/IGUuZGVmYXVsdFByZXZlbnRl
			ZCA6IGUucmV0dXJuVmFsdWUgPT0gZmFsc2UNCiAgfQ0KICBmdW5jdGlvbiBlX3N0b3AoZSkge2Vf
			cHJldmVudERlZmF1bHQoZSk7IGVfc3RvcFByb3BhZ2F0aW9uKGUpO30NCg0KICBmdW5jdGlvbiBl
			X3RhcmdldChlKSB7cmV0dXJuIGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudH0NCiAgZnVuY3Rpb24g
			ZV9idXR0b24oZSkgew0KICAgIHZhciBiID0gZS53aGljaDsNCiAgICBpZiAoYiA9PSBudWxsKSB7
			DQogICAgICBpZiAoZS5idXR0b24gJiAxKSB7IGIgPSAxOyB9DQogICAgICBlbHNlIGlmIChlLmJ1
			dHRvbiAmIDIpIHsgYiA9IDM7IH0NCiAgICAgIGVsc2UgaWYgKGUuYnV0dG9uICYgNCkgeyBiID0g
			MjsgfQ0KICAgIH0NCiAgICBpZiAobWFjICYmIGUuY3RybEtleSAmJiBiID09IDEpIHsgYiA9IDM7
			IH0NCiAgICByZXR1cm4gYg0KICB9DQoNCiAgLy8gRGV0ZWN0IGRyYWctYW5kLWRyb3ANCiAgdmFy
			IGRyYWdBbmREcm9wID0gZnVuY3Rpb24oKSB7DQogICAgLy8gVGhlcmUgaXMgKnNvbWUqIGtpbmQg
			b2YgZHJhZy1hbmQtZHJvcCBzdXBwb3J0IGluIElFNi04LCBidXQgSQ0KICAgIC8vIGNvdWxkbid0
			IGdldCBpdCB0byB3b3JrIHlldC4NCiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkpIHsgcmV0
			dXJuIGZhbHNlIH0NCiAgICB2YXIgZGl2ID0gZWx0KCdkaXYnKTsNCiAgICByZXR1cm4gImRyYWdn
			YWJsZSIgaW4gZGl2IHx8ICJkcmFnRHJvcCIgaW4gZGl2DQogIH0oKTsNCg0KICB2YXIgendzcFN1
			cHBvcnRlZDsNCiAgZnVuY3Rpb24gemVyb1dpZHRoRWxlbWVudChtZWFzdXJlKSB7DQogICAgaWYg
			KHp3c3BTdXBwb3J0ZWQgPT0gbnVsbCkgew0KICAgICAgdmFyIHRlc3QgPSBlbHQoInNwYW4iLCAi
			XHUyMDBiIik7DQogICAgICByZW1vdmVDaGlsZHJlbkFuZEFkZChtZWFzdXJlLCBlbHQoInNwYW4i
			LCBbdGVzdCwgZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIngiKV0pKTsNCiAgICAgIGlmIChtZWFz
			dXJlLmZpcnN0Q2hpbGQub2Zmc2V0SGVpZ2h0ICE9IDApDQogICAgICAgIHsgendzcFN1cHBvcnRl
			ZCA9IHRlc3Qub2Zmc2V0V2lkdGggPD0gMSAmJiB0ZXN0Lm9mZnNldEhlaWdodCA+IDIgJiYgIShp
			ZSAmJiBpZV92ZXJzaW9uIDwgOCk7IH0NCiAgICB9DQogICAgdmFyIG5vZGUgPSB6d3NwU3VwcG9y
			dGVkID8gZWx0KCJzcGFuIiwgIlx1MjAwYiIpIDoNCiAgICAgIGVsdCgic3BhbiIsICJcdTAwYTAi
			LCBudWxsLCAiZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aWR0aDogMXB4OyBtYXJnaW4tcmlnaHQ6
			IC0xcHgiKTsNCiAgICBub2RlLnNldEF0dHJpYnV0ZSgiY20tdGV4dCIsICIiKTsNCiAgICByZXR1
			cm4gbm9kZQ0KICB9DQoNCiAgLy8gRmVhdHVyZS1kZXRlY3QgSUUncyBjcnVtbXkgY2xpZW50IHJl
			Y3QgcmVwb3J0aW5nIGZvciBiaWRpIHRleHQNCiAgdmFyIGJhZEJpZGlSZWN0czsNCiAgZnVuY3Rp
			b24gaGFzQmFkQmlkaVJlY3RzKG1lYXN1cmUpIHsNCiAgICBpZiAoYmFkQmlkaVJlY3RzICE9IG51
			bGwpIHsgcmV0dXJuIGJhZEJpZGlSZWN0cyB9DQogICAgdmFyIHR4dCA9IHJlbW92ZUNoaWxkcmVu
			QW5kQWRkKG1lYXN1cmUsIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCJBXHUwNjJlQSIpKTsNCiAg
			ICB2YXIgcjAgPSByYW5nZSh0eHQsIDAsIDEpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOw0KICAg
			IHZhciByMSA9IHJhbmdlKHR4dCwgMSwgMikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7DQogICAg
			cmVtb3ZlQ2hpbGRyZW4obWVhc3VyZSk7DQogICAgaWYgKCFyMCB8fCByMC5sZWZ0ID09IHIwLnJp
			Z2h0KSB7IHJldHVybiBmYWxzZSB9IC8vIFNhZmFyaSByZXR1cm5zIG51bGwgaW4gc29tZSBjYXNl
			cyAoIzI3ODApDQogICAgcmV0dXJuIGJhZEJpZGlSZWN0cyA9IChyMS5yaWdodCAtIHIwLnJpZ2h0
			IDwgMykNCiAgfQ0KDQogIC8vIFNlZSBpZiAiIi5zcGxpdCBpcyB0aGUgYnJva2VuIElFIHZlcnNp
			b24sIGlmIHNvLCBwcm92aWRlIGFuDQogIC8vIGFsdGVybmF0aXZlIHdheSB0byBzcGxpdCBsaW5l
			cy4NCiAgdmFyIHNwbGl0TGluZXNBdXRvID0gIlxuXG5iIi5zcGxpdCgvXG4vKS5sZW5ndGggIT0g
			MyA/IGZ1bmN0aW9uIChzdHJpbmcpIHsNCiAgICB2YXIgcG9zID0gMCwgcmVzdWx0ID0gW10sIGwg
			PSBzdHJpbmcubGVuZ3RoOw0KICAgIHdoaWxlIChwb3MgPD0gbCkgew0KICAgICAgdmFyIG5sID0g
			c3RyaW5nLmluZGV4T2YoIlxuIiwgcG9zKTsNCiAgICAgIGlmIChubCA9PSAtMSkgeyBubCA9IHN0
			cmluZy5sZW5ndGg7IH0NCiAgICAgIHZhciBsaW5lID0gc3RyaW5nLnNsaWNlKHBvcywgc3RyaW5n
			LmNoYXJBdChubCAtIDEpID09ICJcciIgPyBubCAtIDEgOiBubCk7DQogICAgICB2YXIgcnQgPSBs
			aW5lLmluZGV4T2YoIlxyIik7DQogICAgICBpZiAocnQgIT0gLTEpIHsNCiAgICAgICAgcmVzdWx0
			LnB1c2gobGluZS5zbGljZSgwLCBydCkpOw0KICAgICAgICBwb3MgKz0gcnQgKyAxOw0KICAgICAg
			fSBlbHNlIHsNCiAgICAgICAgcmVzdWx0LnB1c2gobGluZSk7DQogICAgICAgIHBvcyA9IG5sICsg
			MTsNCiAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIHJlc3VsdA0KICB9IDogZnVuY3Rpb24gKHN0
			cmluZykgeyByZXR1cm4gc3RyaW5nLnNwbGl0KC9cclxuP3xcbi8pOyB9Ow0KDQogIHZhciBoYXNT
			ZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uID8gZnVuY3Rpb24gKHRlKSB7DQogICAgdHJ5
			IHsgcmV0dXJuIHRlLnNlbGVjdGlvblN0YXJ0ICE9IHRlLnNlbGVjdGlvbkVuZCB9DQogICAgY2F0
			Y2goZSkgeyByZXR1cm4gZmFsc2UgfQ0KICB9IDogZnVuY3Rpb24gKHRlKSB7DQogICAgdmFyIHJh
			bmdlJCQxOw0KICAgIHRyeSB7cmFuZ2UkJDEgPSB0ZS5vd25lckRvY3VtZW50LnNlbGVjdGlvbi5j
			cmVhdGVSYW5nZSgpO30NCiAgICBjYXRjaChlKSB7fQ0KICAgIGlmICghcmFuZ2UkJDEgfHwgcmFu
			Z2UkJDEucGFyZW50RWxlbWVudCgpICE9IHRlKSB7IHJldHVybiBmYWxzZSB9DQogICAgcmV0dXJu
			IHJhbmdlJCQxLmNvbXBhcmVFbmRQb2ludHMoIlN0YXJ0VG9FbmQiLCByYW5nZSQkMSkgIT0gMA0K
			ICB9Ow0KDQogIHZhciBoYXNDb3B5RXZlbnQgPSAoZnVuY3Rpb24gKCkgew0KICAgIHZhciBlID0g
			ZWx0KCJkaXYiKTsNCiAgICBpZiAoIm9uY29weSIgaW4gZSkgeyByZXR1cm4gdHJ1ZSB9DQogICAg
			ZS5zZXRBdHRyaWJ1dGUoIm9uY29weSIsICJyZXR1cm47Iik7DQogICAgcmV0dXJuIHR5cGVvZiBl
			Lm9uY29weSA9PSAiZnVuY3Rpb24iDQogIH0pKCk7DQoNCiAgdmFyIGJhZFpvb21lZFJlY3RzID0g
			bnVsbDsNCiAgZnVuY3Rpb24gaGFzQmFkWm9vbWVkUmVjdHMobWVhc3VyZSkgew0KICAgIGlmIChi
			YWRab29tZWRSZWN0cyAhPSBudWxsKSB7IHJldHVybiBiYWRab29tZWRSZWN0cyB9DQogICAgdmFy
			IG5vZGUgPSByZW1vdmVDaGlsZHJlbkFuZEFkZChtZWFzdXJlLCBlbHQoInNwYW4iLCAieCIpKTsN
			CiAgICB2YXIgbm9ybWFsID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsNCiAgICB2YXIg
			ZnJvbVJhbmdlID0gcmFuZ2Uobm9kZSwgMCwgMSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7DQog
			ICAgcmV0dXJuIGJhZFpvb21lZFJlY3RzID0gTWF0aC5hYnMobm9ybWFsLmxlZnQgLSBmcm9tUmFu
			Z2UubGVmdCkgPiAxDQogIH0NCg0KICAvLyBLbm93biBtb2RlcywgYnkgbmFtZSBhbmQgYnkgTUlN
			RQ0KICB2YXIgbW9kZXMgPSB7fSwgbWltZU1vZGVzID0ge307DQoNCiAgLy8gRXh0cmEgYXJndW1l
			bnRzIGFyZSBzdG9yZWQgYXMgdGhlIG1vZGUncyBkZXBlbmRlbmNpZXMsIHdoaWNoIGlzDQogIC8v
			IHVzZWQgYnkgKGxlZ2FjeSkgbWVjaGFuaXNtcyBsaWtlIGxvYWRtb2RlLmpzIHRvIGF1dG9tYXRp
			Y2FsbHkNCiAgLy8gbG9hZCBhIG1vZGUuIChQcmVmZXJyZWQgbWVjaGFuaXNtIGlzIHRoZSByZXF1
			aXJlL2RlZmluZSBjYWxscy4pDQogIGZ1bmN0aW9uIGRlZmluZU1vZGUobmFtZSwgbW9kZSkgew0K
			ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikNCiAgICAgIHsgbW9kZS5kZXBlbmRlbmNpZXMg
			PSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpOyB9DQogICAgbW9kZXNb
			bmFtZV0gPSBtb2RlOw0KICB9DQoNCiAgZnVuY3Rpb24gZGVmaW5lTUlNRShtaW1lLCBzcGVjKSB7
			DQogICAgbWltZU1vZGVzW21pbWVdID0gc3BlYzsNCiAgfQ0KDQogIC8vIEdpdmVuIGEgTUlNRSB0
			eXBlLCBhIHtuYW1lLCAuLi5vcHRpb25zfSBjb25maWcgb2JqZWN0LCBvciBhIG5hbWUNCiAgLy8g
			c3RyaW5nLCByZXR1cm4gYSBtb2RlIGNvbmZpZyBvYmplY3QuDQogIGZ1bmN0aW9uIHJlc29sdmVN
			b2RlKHNwZWMpIHsNCiAgICBpZiAodHlwZW9mIHNwZWMgPT0gInN0cmluZyIgJiYgbWltZU1vZGVz
			Lmhhc093blByb3BlcnR5KHNwZWMpKSB7DQogICAgICBzcGVjID0gbWltZU1vZGVzW3NwZWNdOw0K
			ICAgIH0gZWxzZSBpZiAoc3BlYyAmJiB0eXBlb2Ygc3BlYy5uYW1lID09ICJzdHJpbmciICYmIG1p
			bWVNb2Rlcy5oYXNPd25Qcm9wZXJ0eShzcGVjLm5hbWUpKSB7DQogICAgICB2YXIgZm91bmQgPSBt
			aW1lTW9kZXNbc3BlYy5uYW1lXTsNCiAgICAgIGlmICh0eXBlb2YgZm91bmQgPT0gInN0cmluZyIp
			IHsgZm91bmQgPSB7bmFtZTogZm91bmR9OyB9DQogICAgICBzcGVjID0gY3JlYXRlT2JqKGZvdW5k
			LCBzcGVjKTsNCiAgICAgIHNwZWMubmFtZSA9IGZvdW5kLm5hbWU7DQogICAgfSBlbHNlIGlmICh0
			eXBlb2Ygc3BlYyA9PSAic3RyaW5nIiAmJiAvXltcd1wtXStcL1tcd1wtXStcK3htbCQvLnRlc3Qo
			c3BlYykpIHsNCiAgICAgIHJldHVybiByZXNvbHZlTW9kZSgiYXBwbGljYXRpb24veG1sIikNCiAg
			ICB9IGVsc2UgaWYgKHR5cGVvZiBzcGVjID09ICJzdHJpbmciICYmIC9eW1x3XC1dK1wvW1x3XC1d
			K1wranNvbiQvLnRlc3Qoc3BlYykpIHsNCiAgICAgIHJldHVybiByZXNvbHZlTW9kZSgiYXBwbGlj
			YXRpb24vanNvbiIpDQogICAgfQ0KICAgIGlmICh0eXBlb2Ygc3BlYyA9PSAic3RyaW5nIikgeyBy
			ZXR1cm4ge25hbWU6IHNwZWN9IH0NCiAgICBlbHNlIHsgcmV0dXJuIHNwZWMgfHwge25hbWU6ICJu
			dWxsIn0gfQ0KICB9DQoNCiAgLy8gR2l2ZW4gYSBtb2RlIHNwZWMgKGFueXRoaW5nIHRoYXQgcmVz
			b2x2ZU1vZGUgYWNjZXB0cyksIGZpbmQgYW5kDQogIC8vIGluaXRpYWxpemUgYW4gYWN0dWFsIG1v
			ZGUgb2JqZWN0Lg0KICBmdW5jdGlvbiBnZXRNb2RlKG9wdGlvbnMsIHNwZWMpIHsNCiAgICBzcGVj
			ID0gcmVzb2x2ZU1vZGUoc3BlYyk7DQogICAgdmFyIG1mYWN0b3J5ID0gbW9kZXNbc3BlYy5uYW1l
			XTsNCiAgICBpZiAoIW1mYWN0b3J5KSB7IHJldHVybiBnZXRNb2RlKG9wdGlvbnMsICJ0ZXh0L3Bs
			YWluIikgfQ0KICAgIHZhciBtb2RlT2JqID0gbWZhY3Rvcnkob3B0aW9ucywgc3BlYyk7DQogICAg
			aWYgKG1vZGVFeHRlbnNpb25zLmhhc093blByb3BlcnR5KHNwZWMubmFtZSkpIHsNCiAgICAgIHZh
			ciBleHRzID0gbW9kZUV4dGVuc2lvbnNbc3BlYy5uYW1lXTsNCiAgICAgIGZvciAodmFyIHByb3Ag
			aW4gZXh0cykgew0KICAgICAgICBpZiAoIWV4dHMuaGFzT3duUHJvcGVydHkocHJvcCkpIHsgY29u
			dGludWUgfQ0KICAgICAgICBpZiAobW9kZU9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgeyBtb2Rl
			T2JqWyJfIiArIHByb3BdID0gbW9kZU9ialtwcm9wXTsgfQ0KICAgICAgICBtb2RlT2JqW3Byb3Bd
			ID0gZXh0c1twcm9wXTsNCiAgICAgIH0NCiAgICB9DQogICAgbW9kZU9iai5uYW1lID0gc3BlYy5u
			YW1lOw0KICAgIGlmIChzcGVjLmhlbHBlclR5cGUpIHsgbW9kZU9iai5oZWxwZXJUeXBlID0gc3Bl
			Yy5oZWxwZXJUeXBlOyB9DQogICAgaWYgKHNwZWMubW9kZVByb3BzKSB7IGZvciAodmFyIHByb3Ak
			MSBpbiBzcGVjLm1vZGVQcm9wcykNCiAgICAgIHsgbW9kZU9ialtwcm9wJDFdID0gc3BlYy5tb2Rl
			UHJvcHNbcHJvcCQxXTsgfSB9DQoNCiAgICByZXR1cm4gbW9kZU9iag0KICB9DQoNCiAgLy8gVGhp
			cyBjYW4gYmUgdXNlZCB0byBhdHRhY2ggcHJvcGVydGllcyB0byBtb2RlIG9iamVjdHMgZnJvbQ0K
			ICAvLyBvdXRzaWRlIHRoZSBhY3R1YWwgbW9kZSBkZWZpbml0aW9uLg0KICB2YXIgbW9kZUV4dGVu
			c2lvbnMgPSB7fTsNCiAgZnVuY3Rpb24gZXh0ZW5kTW9kZShtb2RlLCBwcm9wZXJ0aWVzKSB7DQog
			ICAgdmFyIGV4dHMgPSBtb2RlRXh0ZW5zaW9ucy5oYXNPd25Qcm9wZXJ0eShtb2RlKSA/IG1vZGVF
			eHRlbnNpb25zW21vZGVdIDogKG1vZGVFeHRlbnNpb25zW21vZGVdID0ge30pOw0KICAgIGNvcHlP
			YmoocHJvcGVydGllcywgZXh0cyk7DQogIH0NCg0KICBmdW5jdGlvbiBjb3B5U3RhdGUobW9kZSwg
			c3RhdGUpIHsNCiAgICBpZiAoc3RhdGUgPT09IHRydWUpIHsgcmV0dXJuIHN0YXRlIH0NCiAgICBp
			ZiAobW9kZS5jb3B5U3RhdGUpIHsgcmV0dXJuIG1vZGUuY29weVN0YXRlKHN0YXRlKSB9DQogICAg
			dmFyIG5zdGF0ZSA9IHt9Ow0KICAgIGZvciAodmFyIG4gaW4gc3RhdGUpIHsNCiAgICAgIHZhciB2
			YWwgPSBzdGF0ZVtuXTsNCiAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBBcnJheSkgeyB2YWwgPSB2
			YWwuY29uY2F0KFtdKTsgfQ0KICAgICAgbnN0YXRlW25dID0gdmFsOw0KICAgIH0NCiAgICByZXR1
			cm4gbnN0YXRlDQogIH0NCg0KICAvLyBHaXZlbiBhIG1vZGUgYW5kIGEgc3RhdGUgKGZvciB0aGF0
			IG1vZGUpLCBmaW5kIHRoZSBpbm5lciBtb2RlIGFuZA0KICAvLyBzdGF0ZSBhdCB0aGUgcG9zaXRp
			b24gdGhhdCB0aGUgc3RhdGUgcmVmZXJzIHRvLg0KICBmdW5jdGlvbiBpbm5lck1vZGUobW9kZSwg
			c3RhdGUpIHsNCiAgICB2YXIgaW5mbzsNCiAgICB3aGlsZSAobW9kZS5pbm5lck1vZGUpIHsNCiAg
			ICAgIGluZm8gPSBtb2RlLmlubmVyTW9kZShzdGF0ZSk7DQogICAgICBpZiAoIWluZm8gfHwgaW5m
			by5tb2RlID09IG1vZGUpIHsgYnJlYWsgfQ0KICAgICAgc3RhdGUgPSBpbmZvLnN0YXRlOw0KICAg
			ICAgbW9kZSA9IGluZm8ubW9kZTsNCiAgICB9DQogICAgcmV0dXJuIGluZm8gfHwge21vZGU6IG1v
			ZGUsIHN0YXRlOiBzdGF0ZX0NCiAgfQ0KDQogIGZ1bmN0aW9uIHN0YXJ0U3RhdGUobW9kZSwgYTEs
			IGEyKSB7DQogICAgcmV0dXJuIG1vZGUuc3RhcnRTdGF0ZSA/IG1vZGUuc3RhcnRTdGF0ZShhMSwg
			YTIpIDogdHJ1ZQ0KICB9DQoNCiAgLy8gU1RSSU5HIFNUUkVBTQ0KDQogIC8vIEZlZCB0byB0aGUg
			bW9kZSBwYXJzZXJzLCBwcm92aWRlcyBoZWxwZXIgZnVuY3Rpb25zIHRvIG1ha2UNCiAgLy8gcGFy
			c2VycyBtb3JlIHN1Y2NpbmN0Lg0KDQogIHZhciBTdHJpbmdTdHJlYW0gPSBmdW5jdGlvbihzdHJp
			bmcsIHRhYlNpemUsIGxpbmVPcmFjbGUpIHsNCiAgICB0aGlzLnBvcyA9IHRoaXMuc3RhcnQgPSAw
			Ow0KICAgIHRoaXMuc3RyaW5nID0gc3RyaW5nOw0KICAgIHRoaXMudGFiU2l6ZSA9IHRhYlNpemUg
			fHwgODsNCiAgICB0aGlzLmxhc3RDb2x1bW5Qb3MgPSB0aGlzLmxhc3RDb2x1bW5WYWx1ZSA9IDA7
			DQogICAgdGhpcy5saW5lU3RhcnQgPSAwOw0KICAgIHRoaXMubGluZU9yYWNsZSA9IGxpbmVPcmFj
			bGU7DQogIH07DQoNCiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5lb2wgPSBmdW5jdGlvbiAoKSB7
			cmV0dXJuIHRoaXMucG9zID49IHRoaXMuc3RyaW5nLmxlbmd0aH07DQogIFN0cmluZ1N0cmVhbS5w
			cm90b3R5cGUuc29sID0gZnVuY3Rpb24gKCkge3JldHVybiB0aGlzLnBvcyA9PSB0aGlzLmxpbmVT
			dGFydH07DQogIFN0cmluZ1N0cmVhbS5wcm90b3R5cGUucGVlayA9IGZ1bmN0aW9uICgpIHtyZXR1
			cm4gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKSB8fCB1bmRlZmluZWR9Ow0KICBTdHJpbmdT
			dHJlYW0ucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7DQogICAgaWYgKHRoaXMucG9zIDwg
			dGhpcy5zdHJpbmcubGVuZ3RoKQ0KICAgICAgeyByZXR1cm4gdGhpcy5zdHJpbmcuY2hhckF0KHRo
			aXMucG9zKyspIH0NCiAgfTsNCiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5lYXQgPSBmdW5jdGlv
			biAobWF0Y2gpIHsNCiAgICB2YXIgY2ggPSB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MpOw0K
			ICAgIHZhciBvazsNCiAgICBpZiAodHlwZW9mIG1hdGNoID09ICJzdHJpbmciKSB7IG9rID0gY2gg
			PT0gbWF0Y2g7IH0NCiAgICBlbHNlIHsgb2sgPSBjaCAmJiAobWF0Y2gudGVzdCA/IG1hdGNoLnRl
			c3QoY2gpIDogbWF0Y2goY2gpKTsgfQ0KICAgIGlmIChvaykgeysrdGhpcy5wb3M7IHJldHVybiBj
			aH0NCiAgfTsNCiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5lYXRXaGlsZSA9IGZ1bmN0aW9uICht
			YXRjaCkgew0KICAgIHZhciBzdGFydCA9IHRoaXMucG9zOw0KICAgIHdoaWxlICh0aGlzLmVhdCht
			YXRjaCkpe30NCiAgICByZXR1cm4gdGhpcy5wb3MgPiBzdGFydA0KICB9Ow0KICBTdHJpbmdTdHJl
			YW0ucHJvdG90eXBlLmVhdFNwYWNlID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHRoaXMkMSA9
			IHRoaXM7DQoNCiAgICB2YXIgc3RhcnQgPSB0aGlzLnBvczsNCiAgICB3aGlsZSAoL1tcc1x1MDBh
			MF0vLnRlc3QodGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKSkpIHsgKyt0aGlzJDEucG9zOyB9
			DQogICAgcmV0dXJuIHRoaXMucG9zID4gc3RhcnQNCiAgfTsNCiAgU3RyaW5nU3RyZWFtLnByb3Rv
			dHlwZS5za2lwVG9FbmQgPSBmdW5jdGlvbiAoKSB7dGhpcy5wb3MgPSB0aGlzLnN0cmluZy5sZW5n
			dGg7fTsNCiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5za2lwVG8gPSBmdW5jdGlvbiAoY2gpIHsN
			CiAgICB2YXIgZm91bmQgPSB0aGlzLnN0cmluZy5pbmRleE9mKGNoLCB0aGlzLnBvcyk7DQogICAg
			aWYgKGZvdW5kID4gLTEpIHt0aGlzLnBvcyA9IGZvdW5kOyByZXR1cm4gdHJ1ZX0NCiAgfTsNCiAg
			U3RyaW5nU3RyZWFtLnByb3RvdHlwZS5iYWNrVXAgPSBmdW5jdGlvbiAobikge3RoaXMucG9zIC09
			IG47fTsNCiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5jb2x1bW4gPSBmdW5jdGlvbiAoKSB7DQog
			ICAgaWYgKHRoaXMubGFzdENvbHVtblBvcyA8IHRoaXMuc3RhcnQpIHsNCiAgICAgIHRoaXMubGFz
			dENvbHVtblZhbHVlID0gY291bnRDb2x1bW4odGhpcy5zdHJpbmcsIHRoaXMuc3RhcnQsIHRoaXMu
			dGFiU2l6ZSwgdGhpcy5sYXN0Q29sdW1uUG9zLCB0aGlzLmxhc3RDb2x1bW5WYWx1ZSk7DQogICAg
			ICB0aGlzLmxhc3RDb2x1bW5Qb3MgPSB0aGlzLnN0YXJ0Ow0KICAgIH0NCiAgICByZXR1cm4gdGhp
			cy5sYXN0Q29sdW1uVmFsdWUgLSAodGhpcy5saW5lU3RhcnQgPyBjb3VudENvbHVtbih0aGlzLnN0
			cmluZywgdGhpcy5saW5lU3RhcnQsIHRoaXMudGFiU2l6ZSkgOiAwKQ0KICB9Ow0KICBTdHJpbmdT
			dHJlYW0ucHJvdG90eXBlLmluZGVudGF0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgIHJldHVybiBj
			b3VudENvbHVtbih0aGlzLnN0cmluZywgbnVsbCwgdGhpcy50YWJTaXplKSAtDQogICAgICAodGhp
			cy5saW5lU3RhcnQgPyBjb3VudENvbHVtbih0aGlzLnN0cmluZywgdGhpcy5saW5lU3RhcnQsIHRo
			aXMudGFiU2l6ZSkgOiAwKQ0KICB9Ow0KICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLm1hdGNoID0g
			ZnVuY3Rpb24gKHBhdHRlcm4sIGNvbnN1bWUsIGNhc2VJbnNlbnNpdGl2ZSkgew0KICAgIGlmICh0
			eXBlb2YgcGF0dGVybiA9PSAic3RyaW5nIikgew0KICAgICAgdmFyIGNhc2VkID0gZnVuY3Rpb24g
			KHN0cikgeyByZXR1cm4gY2FzZUluc2Vuc2l0aXZlID8gc3RyLnRvTG93ZXJDYXNlKCkgOiBzdHI7
			IH07DQogICAgICB2YXIgc3Vic3RyID0gdGhpcy5zdHJpbmcuc3Vic3RyKHRoaXMucG9zLCBwYXR0
			ZXJuLmxlbmd0aCk7DQogICAgICBpZiAoY2FzZWQoc3Vic3RyKSA9PSBjYXNlZChwYXR0ZXJuKSkg
			ew0KICAgICAgICBpZiAoY29uc3VtZSAhPT0gZmFsc2UpIHsgdGhpcy5wb3MgKz0gcGF0dGVybi5s
			ZW5ndGg7IH0NCiAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAg
			ICAgdmFyIG1hdGNoID0gdGhpcy5zdHJpbmcuc2xpY2UodGhpcy5wb3MpLm1hdGNoKHBhdHRlcm4p
			Ow0KICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmluZGV4ID4gMCkgeyByZXR1cm4gbnVsbCB9DQog
			ICAgICBpZiAobWF0Y2ggJiYgY29uc3VtZSAhPT0gZmFsc2UpIHsgdGhpcy5wb3MgKz0gbWF0Y2hb
			MF0ubGVuZ3RoOyB9DQogICAgICByZXR1cm4gbWF0Y2gNCiAgICB9DQogIH07DQogIFN0cmluZ1N0
			cmVhbS5wcm90b3R5cGUuY3VycmVudCA9IGZ1bmN0aW9uICgpe3JldHVybiB0aGlzLnN0cmluZy5z
			bGljZSh0aGlzLnN0YXJ0LCB0aGlzLnBvcyl9Ow0KICBTdHJpbmdTdHJlYW0ucHJvdG90eXBlLmhp
			ZGVGaXJzdENoYXJzID0gZnVuY3Rpb24gKG4sIGlubmVyKSB7DQogICAgdGhpcy5saW5lU3RhcnQg
			Kz0gbjsNCiAgICB0cnkgeyByZXR1cm4gaW5uZXIoKSB9DQogICAgZmluYWxseSB7IHRoaXMubGlu
			ZVN0YXJ0IC09IG47IH0NCiAgfTsNCiAgU3RyaW5nU3RyZWFtLnByb3RvdHlwZS5sb29rQWhlYWQg
			PSBmdW5jdGlvbiAobikgew0KICAgIHZhciBvcmFjbGUgPSB0aGlzLmxpbmVPcmFjbGU7DQogICAg
			cmV0dXJuIG9yYWNsZSAmJiBvcmFjbGUubG9va0FoZWFkKG4pDQogIH07DQogIFN0cmluZ1N0cmVh
			bS5wcm90b3R5cGUuYmFzZVRva2VuID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciBvcmFjbGUgPSB0
			aGlzLmxpbmVPcmFjbGU7DQogICAgcmV0dXJuIG9yYWNsZSAmJiBvcmFjbGUuYmFzZVRva2VuKHRo
			aXMucG9zKQ0KICB9Ow0KDQogIC8vIEZpbmQgdGhlIGxpbmUgb2JqZWN0IGNvcnJlc3BvbmRpbmcg
			dG8gdGhlIGdpdmVuIGxpbmUgbnVtYmVyLg0KICBmdW5jdGlvbiBnZXRMaW5lKGRvYywgbikgew0K
			ICAgIG4gLT0gZG9jLmZpcnN0Ow0KICAgIGlmIChuIDwgMCB8fCBuID49IGRvYy5zaXplKSB7IHRo
			cm93IG5ldyBFcnJvcigiVGhlcmUgaXMgbm8gbGluZSAiICsgKG4gKyBkb2MuZmlyc3QpICsgIiBp
			biB0aGUgZG9jdW1lbnQuIikgfQ0KICAgIHZhciBjaHVuayA9IGRvYzsNCiAgICB3aGlsZSAoIWNo
			dW5rLmxpbmVzKSB7DQogICAgICBmb3IgKHZhciBpID0gMDs7ICsraSkgew0KICAgICAgICB2YXIg
			Y2hpbGQgPSBjaHVuay5jaGlsZHJlbltpXSwgc3ogPSBjaGlsZC5jaHVua1NpemUoKTsNCiAgICAg
			ICAgaWYgKG4gPCBzeikgeyBjaHVuayA9IGNoaWxkOyBicmVhayB9DQogICAgICAgIG4gLT0gc3o7
			DQogICAgICB9DQogICAgfQ0KICAgIHJldHVybiBjaHVuay5saW5lc1tuXQ0KICB9DQoNCiAgLy8g
			R2V0IHRoZSBwYXJ0IG9mIGEgZG9jdW1lbnQgYmV0d2VlbiB0d28gcG9zaXRpb25zLCBhcyBhbiBh
			cnJheSBvZg0KICAvLyBzdHJpbmdzLg0KICBmdW5jdGlvbiBnZXRCZXR3ZWVuKGRvYywgc3RhcnQs
			IGVuZCkgew0KICAgIHZhciBvdXQgPSBbXSwgbiA9IHN0YXJ0LmxpbmU7DQogICAgZG9jLml0ZXIo
			c3RhcnQubGluZSwgZW5kLmxpbmUgKyAxLCBmdW5jdGlvbiAobGluZSkgew0KICAgICAgdmFyIHRl
			eHQgPSBsaW5lLnRleHQ7DQogICAgICBpZiAobiA9PSBlbmQubGluZSkgeyB0ZXh0ID0gdGV4dC5z
			bGljZSgwLCBlbmQuY2gpOyB9DQogICAgICBpZiAobiA9PSBzdGFydC5saW5lKSB7IHRleHQgPSB0
			ZXh0LnNsaWNlKHN0YXJ0LmNoKTsgfQ0KICAgICAgb3V0LnB1c2godGV4dCk7DQogICAgICArK247
			DQogICAgfSk7DQogICAgcmV0dXJuIG91dA0KICB9DQogIC8vIEdldCB0aGUgbGluZXMgYmV0d2Vl
			biBmcm9tIGFuZCB0bywgYXMgYXJyYXkgb2Ygc3RyaW5ncy4NCiAgZnVuY3Rpb24gZ2V0TGluZXMo
			ZG9jLCBmcm9tLCB0bykgew0KICAgIHZhciBvdXQgPSBbXTsNCiAgICBkb2MuaXRlcihmcm9tLCB0
			bywgZnVuY3Rpb24gKGxpbmUpIHsgb3V0LnB1c2gobGluZS50ZXh0KTsgfSk7IC8vIGl0ZXIgYWJv
			cnRzIHdoZW4gY2FsbGJhY2sgcmV0dXJucyB0cnV0aHkgdmFsdWUNCiAgICByZXR1cm4gb3V0DQog
			IH0NCg0KICAvLyBVcGRhdGUgdGhlIGhlaWdodCBvZiBhIGxpbmUsIHByb3BhZ2F0aW5nIHRoZSBo
			ZWlnaHQgY2hhbmdlDQogIC8vIHVwd2FyZHMgdG8gcGFyZW50IG5vZGVzLg0KICBmdW5jdGlvbiB1
			cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIGhlaWdodCkgew0KICAgIHZhciBkaWZmID0gaGVpZ2h0IC0g
			bGluZS5oZWlnaHQ7DQogICAgaWYgKGRpZmYpIHsgZm9yICh2YXIgbiA9IGxpbmU7IG47IG4gPSBu
			LnBhcmVudCkgeyBuLmhlaWdodCArPSBkaWZmOyB9IH0NCiAgfQ0KDQogIC8vIEdpdmVuIGEgbGlu
			ZSBvYmplY3QsIGZpbmQgaXRzIGxpbmUgbnVtYmVyIGJ5IHdhbGtpbmcgdXAgdGhyb3VnaA0KICAv
			LyBpdHMgcGFyZW50IGxpbmtzLg0KICBmdW5jdGlvbiBsaW5lTm8obGluZSkgew0KICAgIGlmIChs
			aW5lLnBhcmVudCA9PSBudWxsKSB7IHJldHVybiBudWxsIH0NCiAgICB2YXIgY3VyID0gbGluZS5w
			YXJlbnQsIG5vID0gaW5kZXhPZihjdXIubGluZXMsIGxpbmUpOw0KICAgIGZvciAodmFyIGNodW5r
			ID0gY3VyLnBhcmVudDsgY2h1bms7IGN1ciA9IGNodW5rLCBjaHVuayA9IGNodW5rLnBhcmVudCkg
			ew0KICAgICAgZm9yICh2YXIgaSA9IDA7OyArK2kpIHsNCiAgICAgICAgaWYgKGNodW5rLmNoaWxk
			cmVuW2ldID09IGN1cikgeyBicmVhayB9DQogICAgICAgIG5vICs9IGNodW5rLmNoaWxkcmVuW2ld
			LmNodW5rU2l6ZSgpOw0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gbm8gKyBjdXIuZmlyc3QN
			CiAgfQ0KDQogIC8vIEZpbmQgdGhlIGxpbmUgYXQgdGhlIGdpdmVuIHZlcnRpY2FsIHBvc2l0aW9u
			LCB1c2luZyB0aGUgaGVpZ2h0DQogIC8vIGluZm9ybWF0aW9uIGluIHRoZSBkb2N1bWVudCB0cmVl
			Lg0KICBmdW5jdGlvbiBsaW5lQXRIZWlnaHQoY2h1bmssIGgpIHsNCiAgICB2YXIgbiA9IGNodW5r
			LmZpcnN0Ow0KICAgIG91dGVyOiBkbyB7DQogICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBj
			aHVuay5jaGlsZHJlbi5sZW5ndGg7ICsraSQxKSB7DQogICAgICAgIHZhciBjaGlsZCA9IGNodW5r
			LmNoaWxkcmVuW2kkMV0sIGNoID0gY2hpbGQuaGVpZ2h0Ow0KICAgICAgICBpZiAoaCA8IGNoKSB7
			IGNodW5rID0gY2hpbGQ7IGNvbnRpbnVlIG91dGVyIH0NCiAgICAgICAgaCAtPSBjaDsNCiAgICAg
			ICAgbiArPSBjaGlsZC5jaHVua1NpemUoKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBuDQogICAg
			fSB3aGlsZSAoIWNodW5rLmxpbmVzKQ0KICAgIHZhciBpID0gMDsNCiAgICBmb3IgKDsgaSA8IGNo
			dW5rLmxpbmVzLmxlbmd0aDsgKytpKSB7DQogICAgICB2YXIgbGluZSA9IGNodW5rLmxpbmVzW2ld
			LCBsaCA9IGxpbmUuaGVpZ2h0Ow0KICAgICAgaWYgKGggPCBsaCkgeyBicmVhayB9DQogICAgICBo
			IC09IGxoOw0KICAgIH0NCiAgICByZXR1cm4gbiArIGkNCiAgfQ0KDQogIGZ1bmN0aW9uIGlzTGlu
			ZShkb2MsIGwpIHtyZXR1cm4gbCA+PSBkb2MuZmlyc3QgJiYgbCA8IGRvYy5maXJzdCArIGRvYy5z
			aXplfQ0KDQogIGZ1bmN0aW9uIGxpbmVOdW1iZXJGb3Iob3B0aW9ucywgaSkgew0KICAgIHJldHVy
			biBTdHJpbmcob3B0aW9ucy5saW5lTnVtYmVyRm9ybWF0dGVyKGkgKyBvcHRpb25zLmZpcnN0TGlu
			ZU51bWJlcikpDQogIH0NCg0KICAvLyBBIFBvcyBpbnN0YW5jZSByZXByZXNlbnRzIGEgcG9zaXRp
			b24gd2l0aGluIHRoZSB0ZXh0Lg0KICBmdW5jdGlvbiBQb3MobGluZSwgY2gsIHN0aWNreSkgew0K
			ICAgIGlmICggc3RpY2t5ID09PSB2b2lkIDAgKSBzdGlja3kgPSBudWxsOw0KDQogICAgaWYgKCEo
			dGhpcyBpbnN0YW5jZW9mIFBvcykpIHsgcmV0dXJuIG5ldyBQb3MobGluZSwgY2gsIHN0aWNreSkg
			fQ0KICAgIHRoaXMubGluZSA9IGxpbmU7DQogICAgdGhpcy5jaCA9IGNoOw0KICAgIHRoaXMuc3Rp
			Y2t5ID0gc3RpY2t5Ow0KICB9DQoNCiAgLy8gQ29tcGFyZSB0d28gcG9zaXRpb25zLCByZXR1cm4g
			MCBpZiB0aGV5IGFyZSB0aGUgc2FtZSwgYSBuZWdhdGl2ZQ0KICAvLyBudW1iZXIgd2hlbiBhIGlz
			IGxlc3MsIGFuZCBhIHBvc2l0aXZlIG51bWJlciBvdGhlcndpc2UuDQogIGZ1bmN0aW9uIGNtcChh
			LCBiKSB7IHJldHVybiBhLmxpbmUgLSBiLmxpbmUgfHwgYS5jaCAtIGIuY2ggfQ0KDQogIGZ1bmN0
			aW9uIGVxdWFsQ3Vyc29yUG9zKGEsIGIpIHsgcmV0dXJuIGEuc3RpY2t5ID09IGIuc3RpY2t5ICYm
			IGNtcChhLCBiKSA9PSAwIH0NCg0KICBmdW5jdGlvbiBjb3B5UG9zKHgpIHtyZXR1cm4gUG9zKHgu
			bGluZSwgeC5jaCl9DQogIGZ1bmN0aW9uIG1heFBvcyhhLCBiKSB7IHJldHVybiBjbXAoYSwgYikg
			PCAwID8gYiA6IGEgfQ0KICBmdW5jdGlvbiBtaW5Qb3MoYSwgYikgeyByZXR1cm4gY21wKGEsIGIp
			IDwgMCA/IGEgOiBiIH0NCg0KICAvLyBNb3N0IG9mIHRoZSBleHRlcm5hbCBBUEkgY2xpcHMgZ2l2
			ZW4gcG9zaXRpb25zIHRvIG1ha2Ugc3VyZSB0aGV5DQogIC8vIGFjdHVhbGx5IGV4aXN0IHdpdGhp
			biB0aGUgZG9jdW1lbnQuDQogIGZ1bmN0aW9uIGNsaXBMaW5lKGRvYywgbikge3JldHVybiBNYXRo
			Lm1heChkb2MuZmlyc3QsIE1hdGgubWluKG4sIGRvYy5maXJzdCArIGRvYy5zaXplIC0gMSkpfQ0K
			ICBmdW5jdGlvbiBjbGlwUG9zKGRvYywgcG9zKSB7DQogICAgaWYgKHBvcy5saW5lIDwgZG9jLmZp
			cnN0KSB7IHJldHVybiBQb3MoZG9jLmZpcnN0LCAwKSB9DQogICAgdmFyIGxhc3QgPSBkb2MuZmly
			c3QgKyBkb2Muc2l6ZSAtIDE7DQogICAgaWYgKHBvcy5saW5lID4gbGFzdCkgeyByZXR1cm4gUG9z
			KGxhc3QsIGdldExpbmUoZG9jLCBsYXN0KS50ZXh0Lmxlbmd0aCkgfQ0KICAgIHJldHVybiBjbGlw
			VG9MZW4ocG9zLCBnZXRMaW5lKGRvYywgcG9zLmxpbmUpLnRleHQubGVuZ3RoKQ0KICB9DQogIGZ1
			bmN0aW9uIGNsaXBUb0xlbihwb3MsIGxpbmVsZW4pIHsNCiAgICB2YXIgY2ggPSBwb3MuY2g7DQog
			ICAgaWYgKGNoID09IG51bGwgfHwgY2ggPiBsaW5lbGVuKSB7IHJldHVybiBQb3MocG9zLmxpbmUs
			IGxpbmVsZW4pIH0NCiAgICBlbHNlIGlmIChjaCA8IDApIHsgcmV0dXJuIFBvcyhwb3MubGluZSwg
			MCkgfQ0KICAgIGVsc2UgeyByZXR1cm4gcG9zIH0NCiAgfQ0KICBmdW5jdGlvbiBjbGlwUG9zQXJy
			YXkoZG9jLCBhcnJheSkgew0KICAgIHZhciBvdXQgPSBbXTsNCiAgICBmb3IgKHZhciBpID0gMDsg
			aSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7IG91dFtpXSA9IGNsaXBQb3MoZG9jLCBhcnJheVtpXSk7
			IH0NCiAgICByZXR1cm4gb3V0DQogIH0NCg0KICB2YXIgU2F2ZWRDb250ZXh0ID0gZnVuY3Rpb24o
			c3RhdGUsIGxvb2tBaGVhZCkgew0KICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTsNCiAgICB0aGlzLmxv
			b2tBaGVhZCA9IGxvb2tBaGVhZDsNCiAgfTsNCg0KICB2YXIgQ29udGV4dCA9IGZ1bmN0aW9uKGRv
			Yywgc3RhdGUsIGxpbmUsIGxvb2tBaGVhZCkgew0KICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTsNCiAg
			ICB0aGlzLmRvYyA9IGRvYzsNCiAgICB0aGlzLmxpbmUgPSBsaW5lOw0KICAgIHRoaXMubWF4TG9v
			a0FoZWFkID0gbG9va0FoZWFkIHx8IDA7DQogICAgdGhpcy5iYXNlVG9rZW5zID0gbnVsbDsNCiAg
			ICB0aGlzLmJhc2VUb2tlblBvcyA9IDE7DQogIH07DQoNCiAgQ29udGV4dC5wcm90b3R5cGUubG9v
			a0FoZWFkID0gZnVuY3Rpb24gKG4pIHsNCiAgICB2YXIgbGluZSA9IHRoaXMuZG9jLmdldExpbmUo
			dGhpcy5saW5lICsgbik7DQogICAgaWYgKGxpbmUgIT0gbnVsbCAmJiBuID4gdGhpcy5tYXhMb29r
			QWhlYWQpIHsgdGhpcy5tYXhMb29rQWhlYWQgPSBuOyB9DQogICAgcmV0dXJuIGxpbmUNCiAgfTsN
			Cg0KICBDb250ZXh0LnByb3RvdHlwZS5iYXNlVG9rZW4gPSBmdW5jdGlvbiAobikgew0KICAgICAg
			dmFyIHRoaXMkMSA9IHRoaXM7DQoNCiAgICBpZiAoIXRoaXMuYmFzZVRva2VucykgeyByZXR1cm4g
			bnVsbCB9DQogICAgd2hpbGUgKHRoaXMuYmFzZVRva2Vuc1t0aGlzLmJhc2VUb2tlblBvc10gPD0g
			bikNCiAgICAgIHsgdGhpcyQxLmJhc2VUb2tlblBvcyArPSAyOyB9DQogICAgdmFyIHR5cGUgPSB0
			aGlzLmJhc2VUb2tlbnNbdGhpcy5iYXNlVG9rZW5Qb3MgKyAxXTsNCiAgICByZXR1cm4ge3R5cGU6
			IHR5cGUgJiYgdHlwZS5yZXBsYWNlKC8oIHxeKW92ZXJsYXkgLiovLCAiIiksDQogICAgICAgICAg
			ICBzaXplOiB0aGlzLmJhc2VUb2tlbnNbdGhpcy5iYXNlVG9rZW5Qb3NdIC0gbn0NCiAgfTsNCg0K
			ICBDb250ZXh0LnByb3RvdHlwZS5uZXh0TGluZSA9IGZ1bmN0aW9uICgpIHsNCiAgICB0aGlzLmxp
			bmUrKzsNCiAgICBpZiAodGhpcy5tYXhMb29rQWhlYWQgPiAwKSB7IHRoaXMubWF4TG9va0FoZWFk
			LS07IH0NCiAgfTsNCg0KICBDb250ZXh0LmZyb21TYXZlZCA9IGZ1bmN0aW9uIChkb2MsIHNhdmVk
			LCBsaW5lKSB7DQogICAgaWYgKHNhdmVkIGluc3RhbmNlb2YgU2F2ZWRDb250ZXh0KQ0KICAgICAg
			eyByZXR1cm4gbmV3IENvbnRleHQoZG9jLCBjb3B5U3RhdGUoZG9jLm1vZGUsIHNhdmVkLnN0YXRl
			KSwgbGluZSwgc2F2ZWQubG9va0FoZWFkKSB9DQogICAgZWxzZQ0KICAgICAgeyByZXR1cm4gbmV3
			IENvbnRleHQoZG9jLCBjb3B5U3RhdGUoZG9jLm1vZGUsIHNhdmVkKSwgbGluZSkgfQ0KICB9Ow0K
			DQogIENvbnRleHQucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAoY29weSkgew0KICAgIHZhciBz
			dGF0ZSA9IGNvcHkgIT09IGZhbHNlID8gY29weVN0YXRlKHRoaXMuZG9jLm1vZGUsIHRoaXMuc3Rh
			dGUpIDogdGhpcy5zdGF0ZTsNCiAgICByZXR1cm4gdGhpcy5tYXhMb29rQWhlYWQgPiAwID8gbmV3
			IFNhdmVkQ29udGV4dChzdGF0ZSwgdGhpcy5tYXhMb29rQWhlYWQpIDogc3RhdGUNCiAgfTsNCg0K
			DQogIC8vIENvbXB1dGUgYSBzdHlsZSBhcnJheSAoYW4gYXJyYXkgc3RhcnRpbmcgd2l0aCBhIG1v
			ZGUgZ2VuZXJhdGlvbg0KICAvLyAtLSBmb3IgaW52YWxpZGF0aW9uIC0tIGZvbGxvd2VkIGJ5IHBh
			aXJzIG9mIGVuZCBwb3NpdGlvbnMgYW5kDQogIC8vIHN0eWxlIHN0cmluZ3MpLCB3aGljaCBpcyB1
			c2VkIHRvIGhpZ2hsaWdodCB0aGUgdG9rZW5zIG9uIHRoZQ0KICAvLyBsaW5lLg0KICBmdW5jdGlv
			biBoaWdobGlnaHRMaW5lKGNtLCBsaW5lLCBjb250ZXh0LCBmb3JjZVRvRW5kKSB7DQogICAgLy8g
			QSBzdHlsZXMgYXJyYXkgYWx3YXlzIHN0YXJ0cyB3aXRoIGEgbnVtYmVyIGlkZW50aWZ5aW5nIHRo
			ZQ0KICAgIC8vIG1vZGUvb3ZlcmxheXMgdGhhdCBpdCBpcyBiYXNlZCBvbiAoZm9yIGVhc3kgaW52
			YWxpZGF0aW9uKS4NCiAgICB2YXIgc3QgPSBbY20uc3RhdGUubW9kZUdlbl0sIGxpbmVDbGFzc2Vz
			ID0ge307DQogICAgLy8gQ29tcHV0ZSB0aGUgYmFzZSBhcnJheSBvZiBzdHlsZXMNCiAgICBydW5N
			b2RlKGNtLCBsaW5lLnRleHQsIGNtLmRvYy5tb2RlLCBjb250ZXh0LCBmdW5jdGlvbiAoZW5kLCBz
			dHlsZSkgeyByZXR1cm4gc3QucHVzaChlbmQsIHN0eWxlKTsgfSwNCiAgICAgICAgICAgIGxpbmVD
			bGFzc2VzLCBmb3JjZVRvRW5kKTsNCiAgICB2YXIgc3RhdGUgPSBjb250ZXh0LnN0YXRlOw0KDQog
			ICAgLy8gUnVuIG92ZXJsYXlzLCBhZGp1c3Qgc3R5bGUgYXJyYXkuDQogICAgdmFyIGxvb3AgPSBm
			dW5jdGlvbiAoIG8gKSB7DQogICAgICBjb250ZXh0LmJhc2VUb2tlbnMgPSBzdDsNCiAgICAgIHZh
			ciBvdmVybGF5ID0gY20uc3RhdGUub3ZlcmxheXNbb10sIGkgPSAxLCBhdCA9IDA7DQogICAgICBj
			b250ZXh0LnN0YXRlID0gdHJ1ZTsNCiAgICAgIHJ1bk1vZGUoY20sIGxpbmUudGV4dCwgb3Zlcmxh
			eS5tb2RlLCBjb250ZXh0LCBmdW5jdGlvbiAoZW5kLCBzdHlsZSkgew0KICAgICAgICB2YXIgc3Rh
			cnQgPSBpOw0KICAgICAgICAvLyBFbnN1cmUgdGhlcmUncyBhIHRva2VuIGVuZCBhdCB0aGUgY3Vy
			cmVudCBwb3NpdGlvbiwgYW5kIHRoYXQgaSBwb2ludHMgYXQgaXQNCiAgICAgICAgd2hpbGUgKGF0
			IDwgZW5kKSB7DQogICAgICAgICAgdmFyIGlfZW5kID0gc3RbaV07DQogICAgICAgICAgaWYgKGlf
			ZW5kID4gZW5kKQ0KICAgICAgICAgICAgeyBzdC5zcGxpY2UoaSwgMSwgZW5kLCBzdFtpKzFdLCBp
			X2VuZCk7IH0NCiAgICAgICAgICBpICs9IDI7DQogICAgICAgICAgYXQgPSBNYXRoLm1pbihlbmQs
			IGlfZW5kKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIXN0eWxlKSB7IHJldHVybiB9DQogICAg
			ICAgIGlmIChvdmVybGF5Lm9wYXF1ZSkgew0KICAgICAgICAgIHN0LnNwbGljZShzdGFydCwgaSAt
			IHN0YXJ0LCBlbmQsICJvdmVybGF5ICIgKyBzdHlsZSk7DQogICAgICAgICAgaSA9IHN0YXJ0ICsg
			MjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBmb3IgKDsgc3RhcnQgPCBpOyBzdGFydCAr
			PSAyKSB7DQogICAgICAgICAgICB2YXIgY3VyID0gc3Rbc3RhcnQrMV07DQogICAgICAgICAgICBz
			dFtzdGFydCsxXSA9IChjdXIgPyBjdXIgKyAiICIgOiAiIikgKyAib3ZlcmxheSAiICsgc3R5bGU7
			DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LCBsaW5lQ2xhc3Nlcyk7DQogICAgICBj
			b250ZXh0LnN0YXRlID0gc3RhdGU7DQogICAgICBjb250ZXh0LmJhc2VUb2tlbnMgPSBudWxsOw0K
			ICAgICAgY29udGV4dC5iYXNlVG9rZW5Qb3MgPSAxOw0KICAgIH07DQoNCiAgICBmb3IgKHZhciBv
			ID0gMDsgbyA8IGNtLnN0YXRlLm92ZXJsYXlzLmxlbmd0aDsgKytvKSBsb29wKCBvICk7DQoNCiAg
			ICByZXR1cm4ge3N0eWxlczogc3QsIGNsYXNzZXM6IGxpbmVDbGFzc2VzLmJnQ2xhc3MgfHwgbGlu
			ZUNsYXNzZXMudGV4dENsYXNzID8gbGluZUNsYXNzZXMgOiBudWxsfQ0KICB9DQoNCiAgZnVuY3Rp
			b24gZ2V0TGluZVN0eWxlcyhjbSwgbGluZSwgdXBkYXRlRnJvbnRpZXIpIHsNCiAgICBpZiAoIWxp
			bmUuc3R5bGVzIHx8IGxpbmUuc3R5bGVzWzBdICE9IGNtLnN0YXRlLm1vZGVHZW4pIHsNCiAgICAg
			IHZhciBjb250ZXh0ID0gZ2V0Q29udGV4dEJlZm9yZShjbSwgbGluZU5vKGxpbmUpKTsNCiAgICAg
			IHZhciByZXNldFN0YXRlID0gbGluZS50ZXh0Lmxlbmd0aCA+IGNtLm9wdGlvbnMubWF4SGlnaGxp
			Z2h0TGVuZ3RoICYmIGNvcHlTdGF0ZShjbS5kb2MubW9kZSwgY29udGV4dC5zdGF0ZSk7DQogICAg
			ICB2YXIgcmVzdWx0ID0gaGlnaGxpZ2h0TGluZShjbSwgbGluZSwgY29udGV4dCk7DQogICAgICBp
			ZiAocmVzZXRTdGF0ZSkgeyBjb250ZXh0LnN0YXRlID0gcmVzZXRTdGF0ZTsgfQ0KICAgICAgbGlu
			ZS5zdGF0ZUFmdGVyID0gY29udGV4dC5zYXZlKCFyZXNldFN0YXRlKTsNCiAgICAgIGxpbmUuc3R5
			bGVzID0gcmVzdWx0LnN0eWxlczsNCiAgICAgIGlmIChyZXN1bHQuY2xhc3NlcykgeyBsaW5lLnN0
			eWxlQ2xhc3NlcyA9IHJlc3VsdC5jbGFzc2VzOyB9DQogICAgICBlbHNlIGlmIChsaW5lLnN0eWxl
			Q2xhc3NlcykgeyBsaW5lLnN0eWxlQ2xhc3NlcyA9IG51bGw7IH0NCiAgICAgIGlmICh1cGRhdGVG
			cm9udGllciA9PT0gY20uZG9jLmhpZ2hsaWdodEZyb250aWVyKQ0KICAgICAgICB7IGNtLmRvYy5t
			b2RlRnJvbnRpZXIgPSBNYXRoLm1heChjbS5kb2MubW9kZUZyb250aWVyLCArK2NtLmRvYy5oaWdo
			bGlnaHRGcm9udGllcik7IH0NCiAgICB9DQogICAgcmV0dXJuIGxpbmUuc3R5bGVzDQogIH0NCg0K
			ICBmdW5jdGlvbiBnZXRDb250ZXh0QmVmb3JlKGNtLCBuLCBwcmVjaXNlKSB7DQogICAgdmFyIGRv
			YyA9IGNtLmRvYywgZGlzcGxheSA9IGNtLmRpc3BsYXk7DQogICAgaWYgKCFkb2MubW9kZS5zdGFy
			dFN0YXRlKSB7IHJldHVybiBuZXcgQ29udGV4dChkb2MsIHRydWUsIG4pIH0NCiAgICB2YXIgc3Rh
			cnQgPSBmaW5kU3RhcnRMaW5lKGNtLCBuLCBwcmVjaXNlKTsNCiAgICB2YXIgc2F2ZWQgPSBzdGFy
			dCA+IGRvYy5maXJzdCAmJiBnZXRMaW5lKGRvYywgc3RhcnQgLSAxKS5zdGF0ZUFmdGVyOw0KICAg
			IHZhciBjb250ZXh0ID0gc2F2ZWQgPyBDb250ZXh0LmZyb21TYXZlZChkb2MsIHNhdmVkLCBzdGFy
			dCkgOiBuZXcgQ29udGV4dChkb2MsIHN0YXJ0U3RhdGUoZG9jLm1vZGUpLCBzdGFydCk7DQoNCiAg
			ICBkb2MuaXRlcihzdGFydCwgbiwgZnVuY3Rpb24gKGxpbmUpIHsNCiAgICAgIHByb2Nlc3NMaW5l
			KGNtLCBsaW5lLnRleHQsIGNvbnRleHQpOw0KICAgICAgdmFyIHBvcyA9IGNvbnRleHQubGluZTsN
			CiAgICAgIGxpbmUuc3RhdGVBZnRlciA9IHBvcyA9PSBuIC0gMSB8fCBwb3MgJSA1ID09IDAgfHwg
			cG9zID49IGRpc3BsYXkudmlld0Zyb20gJiYgcG9zIDwgZGlzcGxheS52aWV3VG8gPyBjb250ZXh0
			LnNhdmUoKSA6IG51bGw7DQogICAgICBjb250ZXh0Lm5leHRMaW5lKCk7DQogICAgfSk7DQogICAg
			aWYgKHByZWNpc2UpIHsgZG9jLm1vZGVGcm9udGllciA9IGNvbnRleHQubGluZTsgfQ0KICAgIHJl
			dHVybiBjb250ZXh0DQogIH0NCg0KICAvLyBMaWdodHdlaWdodCBmb3JtIG9mIGhpZ2hsaWdodCAt
			LSBwcm9jZWVkIG92ZXIgdGhpcyBsaW5lIGFuZA0KICAvLyB1cGRhdGUgc3RhdGUsIGJ1dCBkb24n
			dCBzYXZlIGEgc3R5bGUgYXJyYXkuIFVzZWQgZm9yIGxpbmVzIHRoYXQNCiAgLy8gYXJlbid0IGN1
			cnJlbnRseSB2aXNpYmxlLg0KICBmdW5jdGlvbiBwcm9jZXNzTGluZShjbSwgdGV4dCwgY29udGV4
			dCwgc3RhcnRBdCkgew0KICAgIHZhciBtb2RlID0gY20uZG9jLm1vZGU7DQogICAgdmFyIHN0cmVh
			bSA9IG5ldyBTdHJpbmdTdHJlYW0odGV4dCwgY20ub3B0aW9ucy50YWJTaXplLCBjb250ZXh0KTsN
			CiAgICBzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zID0gc3RhcnRBdCB8fCAwOw0KICAgIGlmICh0
			ZXh0ID09ICIiKSB7IGNhbGxCbGFua0xpbmUobW9kZSwgY29udGV4dC5zdGF0ZSk7IH0NCiAgICB3
			aGlsZSAoIXN0cmVhbS5lb2woKSkgew0KICAgICAgcmVhZFRva2VuKG1vZGUsIHN0cmVhbSwgY29u
			dGV4dC5zdGF0ZSk7DQogICAgICBzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zOw0KICAgIH0NCiAg
			fQ0KDQogIGZ1bmN0aW9uIGNhbGxCbGFua0xpbmUobW9kZSwgc3RhdGUpIHsNCiAgICBpZiAobW9k
			ZS5ibGFua0xpbmUpIHsgcmV0dXJuIG1vZGUuYmxhbmtMaW5lKHN0YXRlKSB9DQogICAgaWYgKCFt
			b2RlLmlubmVyTW9kZSkgeyByZXR1cm4gfQ0KICAgIHZhciBpbm5lciA9IGlubmVyTW9kZShtb2Rl
			LCBzdGF0ZSk7DQogICAgaWYgKGlubmVyLm1vZGUuYmxhbmtMaW5lKSB7IHJldHVybiBpbm5lci5t
			b2RlLmJsYW5rTGluZShpbm5lci5zdGF0ZSkgfQ0KICB9DQoNCiAgZnVuY3Rpb24gcmVhZFRva2Vu
			KG1vZGUsIHN0cmVhbSwgc3RhdGUsIGlubmVyKSB7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCAx
			MDsgaSsrKSB7DQogICAgICBpZiAoaW5uZXIpIHsgaW5uZXJbMF0gPSBpbm5lck1vZGUobW9kZSwg
			c3RhdGUpLm1vZGU7IH0NCiAgICAgIHZhciBzdHlsZSA9IG1vZGUudG9rZW4oc3RyZWFtLCBzdGF0
			ZSk7DQogICAgICBpZiAoc3RyZWFtLnBvcyA+IHN0cmVhbS5zdGFydCkgeyByZXR1cm4gc3R5bGUg
			fQ0KICAgIH0NCiAgICB0aHJvdyBuZXcgRXJyb3IoIk1vZGUgIiArIG1vZGUubmFtZSArICIgZmFp
			bGVkIHRvIGFkdmFuY2Ugc3RyZWFtLiIpDQogIH0NCg0KICB2YXIgVG9rZW4gPSBmdW5jdGlvbihz
			dHJlYW0sIHR5cGUsIHN0YXRlKSB7DQogICAgdGhpcy5zdGFydCA9IHN0cmVhbS5zdGFydDsgdGhp
			cy5lbmQgPSBzdHJlYW0ucG9zOw0KICAgIHRoaXMuc3RyaW5nID0gc3RyZWFtLmN1cnJlbnQoKTsN
			CiAgICB0aGlzLnR5cGUgPSB0eXBlIHx8IG51bGw7DQogICAgdGhpcy5zdGF0ZSA9IHN0YXRlOw0K
			ICB9Ow0KDQogIC8vIFV0aWxpdHkgZm9yIGdldFRva2VuQXQgYW5kIGdldExpbmVUb2tlbnMNCiAg
			ZnVuY3Rpb24gdGFrZVRva2VuKGNtLCBwb3MsIHByZWNpc2UsIGFzQXJyYXkpIHsNCiAgICB2YXIg
			ZG9jID0gY20uZG9jLCBtb2RlID0gZG9jLm1vZGUsIHN0eWxlOw0KICAgIHBvcyA9IGNsaXBQb3Mo
			ZG9jLCBwb3MpOw0KICAgIHZhciBsaW5lID0gZ2V0TGluZShkb2MsIHBvcy5saW5lKSwgY29udGV4
			dCA9IGdldENvbnRleHRCZWZvcmUoY20sIHBvcy5saW5lLCBwcmVjaXNlKTsNCiAgICB2YXIgc3Ry
			ZWFtID0gbmV3IFN0cmluZ1N0cmVhbShsaW5lLnRleHQsIGNtLm9wdGlvbnMudGFiU2l6ZSwgY29u
			dGV4dCksIHRva2VuczsNCiAgICBpZiAoYXNBcnJheSkgeyB0b2tlbnMgPSBbXTsgfQ0KICAgIHdo
			aWxlICgoYXNBcnJheSB8fCBzdHJlYW0ucG9zIDwgcG9zLmNoKSAmJiAhc3RyZWFtLmVvbCgpKSB7
			DQogICAgICBzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zOw0KICAgICAgc3R5bGUgPSByZWFkVG9r
			ZW4obW9kZSwgc3RyZWFtLCBjb250ZXh0LnN0YXRlKTsNCiAgICAgIGlmIChhc0FycmF5KSB7IHRv
			a2Vucy5wdXNoKG5ldyBUb2tlbihzdHJlYW0sIHN0eWxlLCBjb3B5U3RhdGUoZG9jLm1vZGUsIGNv
			bnRleHQuc3RhdGUpKSk7IH0NCiAgICB9DQogICAgcmV0dXJuIGFzQXJyYXkgPyB0b2tlbnMgOiBu
			ZXcgVG9rZW4oc3RyZWFtLCBzdHlsZSwgY29udGV4dC5zdGF0ZSkNCiAgfQ0KDQogIGZ1bmN0aW9u
			IGV4dHJhY3RMaW5lQ2xhc3Nlcyh0eXBlLCBvdXRwdXQpIHsNCiAgICBpZiAodHlwZSkgeyBmb3Ig
			KDs7KSB7DQogICAgICB2YXIgbGluZUNsYXNzID0gdHlwZS5tYXRjaCgvKD86XnxccyspbGluZS0o
			YmFja2dyb3VuZC0pPyhcUyspLyk7DQogICAgICBpZiAoIWxpbmVDbGFzcykgeyBicmVhayB9DQog
			ICAgICB0eXBlID0gdHlwZS5zbGljZSgwLCBsaW5lQ2xhc3MuaW5kZXgpICsgdHlwZS5zbGljZShs
			aW5lQ2xhc3MuaW5kZXggKyBsaW5lQ2xhc3NbMF0ubGVuZ3RoKTsNCiAgICAgIHZhciBwcm9wID0g
			bGluZUNsYXNzWzFdID8gImJnQ2xhc3MiIDogInRleHRDbGFzcyI7DQogICAgICBpZiAob3V0cHV0
			W3Byb3BdID09IG51bGwpDQogICAgICAgIHsgb3V0cHV0W3Byb3BdID0gbGluZUNsYXNzWzJdOyB9
			DQogICAgICBlbHNlIGlmICghKG5ldyBSZWdFeHAoIig/Ol58XHMpIiArIGxpbmVDbGFzc1syXSAr
			ICIoPzokfFxzKSIpKS50ZXN0KG91dHB1dFtwcm9wXSkpDQogICAgICAgIHsgb3V0cHV0W3Byb3Bd
			ICs9ICIgIiArIGxpbmVDbGFzc1syXTsgfQ0KICAgIH0gfQ0KICAgIHJldHVybiB0eXBlDQogIH0N
			Cg0KICAvLyBSdW4gdGhlIGdpdmVuIG1vZGUncyBwYXJzZXIgb3ZlciBhIGxpbmUsIGNhbGxpbmcg
			ZiBmb3IgZWFjaCB0b2tlbi4NCiAgZnVuY3Rpb24gcnVuTW9kZShjbSwgdGV4dCwgbW9kZSwgY29u
			dGV4dCwgZiwgbGluZUNsYXNzZXMsIGZvcmNlVG9FbmQpIHsNCiAgICB2YXIgZmxhdHRlblNwYW5z
			ID0gbW9kZS5mbGF0dGVuU3BhbnM7DQogICAgaWYgKGZsYXR0ZW5TcGFucyA9PSBudWxsKSB7IGZs
			YXR0ZW5TcGFucyA9IGNtLm9wdGlvbnMuZmxhdHRlblNwYW5zOyB9DQogICAgdmFyIGN1clN0YXJ0
			ID0gMCwgY3VyU3R5bGUgPSBudWxsOw0KICAgIHZhciBzdHJlYW0gPSBuZXcgU3RyaW5nU3RyZWFt
			KHRleHQsIGNtLm9wdGlvbnMudGFiU2l6ZSwgY29udGV4dCksIHN0eWxlOw0KICAgIHZhciBpbm5l
			ciA9IGNtLm9wdGlvbnMuYWRkTW9kZUNsYXNzICYmIFtudWxsXTsNCiAgICBpZiAodGV4dCA9PSAi
			IikgeyBleHRyYWN0TGluZUNsYXNzZXMoY2FsbEJsYW5rTGluZShtb2RlLCBjb250ZXh0LnN0YXRl
			KSwgbGluZUNsYXNzZXMpOyB9DQogICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHsNCiAgICAgIGlm
			IChzdHJlYW0ucG9zID4gY20ub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGgpIHsNCiAgICAgICAg
			ZmxhdHRlblNwYW5zID0gZmFsc2U7DQogICAgICAgIGlmIChmb3JjZVRvRW5kKSB7IHByb2Nlc3NM
			aW5lKGNtLCB0ZXh0LCBjb250ZXh0LCBzdHJlYW0ucG9zKTsgfQ0KICAgICAgICBzdHJlYW0ucG9z
			ID0gdGV4dC5sZW5ndGg7DQogICAgICAgIHN0eWxlID0gbnVsbDsNCiAgICAgIH0gZWxzZSB7DQog
			ICAgICAgIHN0eWxlID0gZXh0cmFjdExpbmVDbGFzc2VzKHJlYWRUb2tlbihtb2RlLCBzdHJlYW0s
			IGNvbnRleHQuc3RhdGUsIGlubmVyKSwgbGluZUNsYXNzZXMpOw0KICAgICAgfQ0KICAgICAgaWYg
			KGlubmVyKSB7DQogICAgICAgIHZhciBtTmFtZSA9IGlubmVyWzBdLm5hbWU7DQogICAgICAgIGlm
			IChtTmFtZSkgeyBzdHlsZSA9ICJtLSIgKyAoc3R5bGUgPyBtTmFtZSArICIgIiArIHN0eWxlIDog
			bU5hbWUpOyB9DQogICAgICB9DQogICAgICBpZiAoIWZsYXR0ZW5TcGFucyB8fCBjdXJTdHlsZSAh
			PSBzdHlsZSkgew0KICAgICAgICB3aGlsZSAoY3VyU3RhcnQgPCBzdHJlYW0uc3RhcnQpIHsNCiAg
			ICAgICAgICBjdXJTdGFydCA9IE1hdGgubWluKHN0cmVhbS5zdGFydCwgY3VyU3RhcnQgKyA1MDAw
			KTsNCiAgICAgICAgICBmKGN1clN0YXJ0LCBjdXJTdHlsZSk7DQogICAgICAgIH0NCiAgICAgICAg
			Y3VyU3R5bGUgPSBzdHlsZTsNCiAgICAgIH0NCiAgICAgIHN0cmVhbS5zdGFydCA9IHN0cmVhbS5w
			b3M7DQogICAgfQ0KICAgIHdoaWxlIChjdXJTdGFydCA8IHN0cmVhbS5wb3MpIHsNCiAgICAgIC8v
			IFdlYmtpdCBzZWVtcyB0byByZWZ1c2UgdG8gcmVuZGVyIHRleHQgbm9kZXMgbG9uZ2VyIHRoYW4g
			NTc0NDQNCiAgICAgIC8vIGNoYXJhY3RlcnMsIGFuZCByZXR1cm5zIGluYWNjdXJhdGUgbWVhc3Vy
			ZW1lbnRzIGluIG5vZGVzDQogICAgICAvLyBzdGFydGluZyBhcm91bmQgNTAwMCBjaGFycy4NCiAg
			ICAgIHZhciBwb3MgPSBNYXRoLm1pbihzdHJlYW0ucG9zLCBjdXJTdGFydCArIDUwMDApOw0KICAg
			ICAgZihwb3MsIGN1clN0eWxlKTsNCiAgICAgIGN1clN0YXJ0ID0gcG9zOw0KICAgIH0NCiAgfQ0K
			DQogIC8vIEZpbmRzIHRoZSBsaW5lIHRvIHN0YXJ0IHdpdGggd2hlbiBzdGFydGluZyBhIHBhcnNl
			LiBUcmllcyB0bw0KICAvLyBmaW5kIGEgbGluZSB3aXRoIGEgc3RhdGVBZnRlciwgc28gdGhhdCBp
			dCBjYW4gc3RhcnQgd2l0aCBhDQogIC8vIHZhbGlkIHN0YXRlLiBJZiB0aGF0IGZhaWxzLCBpdCBy
			ZXR1cm5zIHRoZSBsaW5lIHdpdGggdGhlDQogIC8vIHNtYWxsZXN0IGluZGVudGF0aW9uLCB3aGlj
			aCB0ZW5kcyB0byBuZWVkIHRoZSBsZWFzdCBjb250ZXh0IHRvDQogIC8vIHBhcnNlIGNvcnJlY3Rs
			eS4NCiAgZnVuY3Rpb24gZmluZFN0YXJ0TGluZShjbSwgbiwgcHJlY2lzZSkgew0KICAgIHZhciBt
			aW5pbmRlbnQsIG1pbmxpbmUsIGRvYyA9IGNtLmRvYzsNCiAgICB2YXIgbGltID0gcHJlY2lzZSA/
			IC0xIDogbiAtIChjbS5kb2MubW9kZS5pbm5lck1vZGUgPyAxMDAwIDogMTAwKTsNCiAgICBmb3Ig
			KHZhciBzZWFyY2ggPSBuOyBzZWFyY2ggPiBsaW07IC0tc2VhcmNoKSB7DQogICAgICBpZiAoc2Vh
			cmNoIDw9IGRvYy5maXJzdCkgeyByZXR1cm4gZG9jLmZpcnN0IH0NCiAgICAgIHZhciBsaW5lID0g
			Z2V0TGluZShkb2MsIHNlYXJjaCAtIDEpLCBhZnRlciA9IGxpbmUuc3RhdGVBZnRlcjsNCiAgICAg
			IGlmIChhZnRlciAmJiAoIXByZWNpc2UgfHwgc2VhcmNoICsgKGFmdGVyIGluc3RhbmNlb2YgU2F2
			ZWRDb250ZXh0ID8gYWZ0ZXIubG9va0FoZWFkIDogMCkgPD0gZG9jLm1vZGVGcm9udGllcikpDQog
			ICAgICAgIHsgcmV0dXJuIHNlYXJjaCB9DQogICAgICB2YXIgaW5kZW50ZWQgPSBjb3VudENvbHVt
			bihsaW5lLnRleHQsIG51bGwsIGNtLm9wdGlvbnMudGFiU2l6ZSk7DQogICAgICBpZiAobWlubGlu
			ZSA9PSBudWxsIHx8IG1pbmluZGVudCA+IGluZGVudGVkKSB7DQogICAgICAgIG1pbmxpbmUgPSBz
			ZWFyY2ggLSAxOw0KICAgICAgICBtaW5pbmRlbnQgPSBpbmRlbnRlZDsNCiAgICAgIH0NCiAgICB9
			DQogICAgcmV0dXJuIG1pbmxpbmUNCiAgfQ0KDQogIGZ1bmN0aW9uIHJldHJlYXRGcm9udGllcihk
			b2MsIG4pIHsNCiAgICBkb2MubW9kZUZyb250aWVyID0gTWF0aC5taW4oZG9jLm1vZGVGcm9udGll
			ciwgbik7DQogICAgaWYgKGRvYy5oaWdobGlnaHRGcm9udGllciA8IG4gLSAxMCkgeyByZXR1cm4g
			fQ0KICAgIHZhciBzdGFydCA9IGRvYy5maXJzdDsNCiAgICBmb3IgKHZhciBsaW5lID0gbiAtIDE7
			IGxpbmUgPiBzdGFydDsgbGluZS0tKSB7DQogICAgICB2YXIgc2F2ZWQgPSBnZXRMaW5lKGRvYywg
			bGluZSkuc3RhdGVBZnRlcjsNCiAgICAgIC8vIGNoYW5nZSBpcyBvbiAzDQogICAgICAvLyBzdGF0
			ZSBvbiBsaW5lIDEgbG9va2VkIGFoZWFkIDIgLS0gc28gc2F3IDMNCiAgICAgIC8vIHRlc3QgMSAr
			IDIgPCAzIHNob3VsZCBjb3ZlciB0aGlzDQogICAgICBpZiAoc2F2ZWQgJiYgKCEoc2F2ZWQgaW5z
			dGFuY2VvZiBTYXZlZENvbnRleHQpIHx8IGxpbmUgKyBzYXZlZC5sb29rQWhlYWQgPCBuKSkgew0K
			ICAgICAgICBzdGFydCA9IGxpbmUgKyAxOw0KICAgICAgICBicmVhaw0KICAgICAgfQ0KICAgIH0N
			CiAgICBkb2MuaGlnaGxpZ2h0RnJvbnRpZXIgPSBNYXRoLm1pbihkb2MuaGlnaGxpZ2h0RnJvbnRp
			ZXIsIHN0YXJ0KTsNCiAgfQ0KDQogIC8vIE9wdGltaXplIHNvbWUgY29kZSB3aGVuIHRoZXNlIGZl
			YXR1cmVzIGFyZSBub3QgdXNlZC4NCiAgdmFyIHNhd1JlYWRPbmx5U3BhbnMgPSBmYWxzZSwgc2F3
			Q29sbGFwc2VkU3BhbnMgPSBmYWxzZTsNCg0KICBmdW5jdGlvbiBzZWVSZWFkT25seVNwYW5zKCkg
			ew0KICAgIHNhd1JlYWRPbmx5U3BhbnMgPSB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gc2VlQ29s
			bGFwc2VkU3BhbnMoKSB7DQogICAgc2F3Q29sbGFwc2VkU3BhbnMgPSB0cnVlOw0KICB9DQoNCiAg
			Ly8gVEVYVE1BUktFUiBTUEFOUw0KDQogIGZ1bmN0aW9uIE1hcmtlZFNwYW4obWFya2VyLCBmcm9t
			LCB0bykgew0KICAgIHRoaXMubWFya2VyID0gbWFya2VyOw0KICAgIHRoaXMuZnJvbSA9IGZyb207
			IHRoaXMudG8gPSB0bzsNCiAgfQ0KDQogIC8vIFNlYXJjaCBhbiBhcnJheSBvZiBzcGFucyBmb3Ig
			YSBzcGFuIG1hdGNoaW5nIHRoZSBnaXZlbiBtYXJrZXIuDQogIGZ1bmN0aW9uIGdldE1hcmtlZFNw
			YW5Gb3Ioc3BhbnMsIG1hcmtlcikgew0KICAgIGlmIChzcGFucykgeyBmb3IgKHZhciBpID0gMDsg
			aSA8IHNwYW5zLmxlbmd0aDsgKytpKSB7DQogICAgICB2YXIgc3BhbiA9IHNwYW5zW2ldOw0KICAg
			ICAgaWYgKHNwYW4ubWFya2VyID09IG1hcmtlcikgeyByZXR1cm4gc3BhbiB9DQogICAgfSB9DQog
			IH0NCiAgLy8gUmVtb3ZlIGEgc3BhbiBmcm9tIGFuIGFycmF5LCByZXR1cm5pbmcgdW5kZWZpbmVk
			IGlmIG5vIHNwYW5zIGFyZQ0KICAvLyBsZWZ0ICh3ZSBkb24ndCBzdG9yZSBhcnJheXMgZm9yIGxp
			bmVzIHdpdGhvdXQgc3BhbnMpLg0KICBmdW5jdGlvbiByZW1vdmVNYXJrZWRTcGFuKHNwYW5zLCBz
			cGFuKSB7DQogICAgdmFyIHI7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7
			ICsraSkNCiAgICAgIHsgaWYgKHNwYW5zW2ldICE9IHNwYW4pIHsgKHIgfHwgKHIgPSBbXSkpLnB1
			c2goc3BhbnNbaV0pOyB9IH0NCiAgICByZXR1cm4gcg0KICB9DQogIC8vIEFkZCBhIHNwYW4gdG8g
			YSBsaW5lLg0KICBmdW5jdGlvbiBhZGRNYXJrZWRTcGFuKGxpbmUsIHNwYW4pIHsNCiAgICBsaW5l
			Lm1hcmtlZFNwYW5zID0gbGluZS5tYXJrZWRTcGFucyA/IGxpbmUubWFya2VkU3BhbnMuY29uY2F0
			KFtzcGFuXSkgOiBbc3Bhbl07DQogICAgc3Bhbi5tYXJrZXIuYXR0YWNoTGluZShsaW5lKTsNCiAg
			fQ0KDQogIC8vIFVzZWQgZm9yIHRoZSBhbGdvcml0aG0gdGhhdCBhZGp1c3RzIG1hcmtlcnMgZm9y
			IGEgY2hhbmdlIGluIHRoZQ0KICAvLyBkb2N1bWVudC4gVGhlc2UgZnVuY3Rpb25zIGN1dCBhbiBh
			cnJheSBvZiBzcGFucyBhdCBhIGdpdmVuDQogIC8vIGNoYXJhY3RlciBwb3NpdGlvbiwgcmV0dXJu
			aW5nIGFuIGFycmF5IG9mIHJlbWFpbmluZyBjaHVua3MgKG9yDQogIC8vIHVuZGVmaW5lZCBpZiBu
			b3RoaW5nIHJlbWFpbnMpLg0KICBmdW5jdGlvbiBtYXJrZWRTcGFuc0JlZm9yZShvbGQsIHN0YXJ0
			Q2gsIGlzSW5zZXJ0KSB7DQogICAgdmFyIG53Ow0KICAgIGlmIChvbGQpIHsgZm9yICh2YXIgaSA9
			IDA7IGkgPCBvbGQubGVuZ3RoOyArK2kpIHsNCiAgICAgIHZhciBzcGFuID0gb2xkW2ldLCBtYXJr
			ZXIgPSBzcGFuLm1hcmtlcjsNCiAgICAgIHZhciBzdGFydHNCZWZvcmUgPSBzcGFuLmZyb20gPT0g
			bnVsbCB8fCAobWFya2VyLmluY2x1c2l2ZUxlZnQgPyBzcGFuLmZyb20gPD0gc3RhcnRDaCA6IHNw
			YW4uZnJvbSA8IHN0YXJ0Q2gpOw0KICAgICAgaWYgKHN0YXJ0c0JlZm9yZSB8fCBzcGFuLmZyb20g
			PT0gc3RhcnRDaCAmJiBtYXJrZXIudHlwZSA9PSAiYm9va21hcmsiICYmICghaXNJbnNlcnQgfHwg
			IXNwYW4ubWFya2VyLmluc2VydExlZnQpKSB7DQogICAgICAgIHZhciBlbmRzQWZ0ZXIgPSBzcGFu
			LnRvID09IG51bGwgfHwgKG1hcmtlci5pbmNsdXNpdmVSaWdodCA/IHNwYW4udG8gPj0gc3RhcnRD
			aCA6IHNwYW4udG8gPiBzdGFydENoKQ0KICAgICAgICA7KG53IHx8IChudyA9IFtdKSkucHVzaChu
			ZXcgTWFya2VkU3BhbihtYXJrZXIsIHNwYW4uZnJvbSwgZW5kc0FmdGVyID8gbnVsbCA6IHNwYW4u
			dG8pKTsNCiAgICAgIH0NCiAgICB9IH0NCiAgICByZXR1cm4gbncNCiAgfQ0KICBmdW5jdGlvbiBt
			YXJrZWRTcGFuc0FmdGVyKG9sZCwgZW5kQ2gsIGlzSW5zZXJ0KSB7DQogICAgdmFyIG53Ow0KICAg
			IGlmIChvbGQpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBvbGQubGVuZ3RoOyArK2kpIHsNCiAgICAg
			IHZhciBzcGFuID0gb2xkW2ldLCBtYXJrZXIgPSBzcGFuLm1hcmtlcjsNCiAgICAgIHZhciBlbmRz
			QWZ0ZXIgPSBzcGFuLnRvID09IG51bGwgfHwgKG1hcmtlci5pbmNsdXNpdmVSaWdodCA/IHNwYW4u
			dG8gPj0gZW5kQ2ggOiBzcGFuLnRvID4gZW5kQ2gpOw0KICAgICAgaWYgKGVuZHNBZnRlciB8fCBz
			cGFuLmZyb20gPT0gZW5kQ2ggJiYgbWFya2VyLnR5cGUgPT0gImJvb2ttYXJrIiAmJiAoIWlzSW5z
			ZXJ0IHx8IHNwYW4ubWFya2VyLmluc2VydExlZnQpKSB7DQogICAgICAgIHZhciBzdGFydHNCZWZv
			cmUgPSBzcGFuLmZyb20gPT0gbnVsbCB8fCAobWFya2VyLmluY2x1c2l2ZUxlZnQgPyBzcGFuLmZy
			b20gPD0gZW5kQ2ggOiBzcGFuLmZyb20gPCBlbmRDaCkNCiAgICAgICAgOyhudyB8fCAobncgPSBb
			XSkpLnB1c2gobmV3IE1hcmtlZFNwYW4obWFya2VyLCBzdGFydHNCZWZvcmUgPyBudWxsIDogc3Bh
			bi5mcm9tIC0gZW5kQ2gsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
			ICAgICAgc3Bhbi50byA9PSBudWxsID8gbnVsbCA6IHNwYW4udG8gLSBlbmRDaCkpOw0KICAgICAg
			fQ0KICAgIH0gfQ0KICAgIHJldHVybiBudw0KICB9DQoNCiAgLy8gR2l2ZW4gYSBjaGFuZ2Ugb2Jq
			ZWN0LCBjb21wdXRlIHRoZSBuZXcgc2V0IG9mIG1hcmtlciBzcGFucyB0aGF0DQogIC8vIGNvdmVy
			IHRoZSBsaW5lIGluIHdoaWNoIHRoZSBjaGFuZ2UgdG9vayBwbGFjZS4gUmVtb3ZlcyBzcGFucw0K
			ICAvLyBlbnRpcmVseSB3aXRoaW4gdGhlIGNoYW5nZSwgcmVjb25uZWN0cyBzcGFucyBiZWxvbmdp
			bmcgdG8gdGhlDQogIC8vIHNhbWUgbWFya2VyIHRoYXQgYXBwZWFyIG9uIGJvdGggc2lkZXMgb2Yg
			dGhlIGNoYW5nZSwgYW5kIGN1dHMgb2ZmDQogIC8vIHNwYW5zIHBhcnRpYWxseSB3aXRoaW4gdGhl
			IGNoYW5nZS4gUmV0dXJucyBhbiBhcnJheSBvZiBzcGFuDQogIC8vIGFycmF5cyB3aXRoIG9uZSBl
			bGVtZW50IGZvciBlYWNoIGxpbmUgaW4gKGFmdGVyKSB0aGUgY2hhbmdlLg0KICBmdW5jdGlvbiBz
			dHJldGNoU3BhbnNPdmVyQ2hhbmdlKGRvYywgY2hhbmdlKSB7DQogICAgaWYgKGNoYW5nZS5mdWxs
			KSB7IHJldHVybiBudWxsIH0NCiAgICB2YXIgb2xkRmlyc3QgPSBpc0xpbmUoZG9jLCBjaGFuZ2Uu
			ZnJvbS5saW5lKSAmJiBnZXRMaW5lKGRvYywgY2hhbmdlLmZyb20ubGluZSkubWFya2VkU3BhbnM7
			DQogICAgdmFyIG9sZExhc3QgPSBpc0xpbmUoZG9jLCBjaGFuZ2UudG8ubGluZSkgJiYgZ2V0TGlu
			ZShkb2MsIGNoYW5nZS50by5saW5lKS5tYXJrZWRTcGFuczsNCiAgICBpZiAoIW9sZEZpcnN0ICYm
			ICFvbGRMYXN0KSB7IHJldHVybiBudWxsIH0NCg0KICAgIHZhciBzdGFydENoID0gY2hhbmdlLmZy
			b20uY2gsIGVuZENoID0gY2hhbmdlLnRvLmNoLCBpc0luc2VydCA9IGNtcChjaGFuZ2UuZnJvbSwg
			Y2hhbmdlLnRvKSA9PSAwOw0KICAgIC8vIEdldCB0aGUgc3BhbnMgdGhhdCAnc3RpY2sgb3V0JyBv
			biBib3RoIHNpZGVzDQogICAgdmFyIGZpcnN0ID0gbWFya2VkU3BhbnNCZWZvcmUob2xkRmlyc3Qs
			IHN0YXJ0Q2gsIGlzSW5zZXJ0KTsNCiAgICB2YXIgbGFzdCA9IG1hcmtlZFNwYW5zQWZ0ZXIob2xk
			TGFzdCwgZW5kQ2gsIGlzSW5zZXJ0KTsNCg0KICAgIC8vIE5leHQsIG1lcmdlIHRob3NlIHR3byBl
			bmRzDQogICAgdmFyIHNhbWVMaW5lID0gY2hhbmdlLnRleHQubGVuZ3RoID09IDEsIG9mZnNldCA9
			IGxzdChjaGFuZ2UudGV4dCkubGVuZ3RoICsgKHNhbWVMaW5lID8gc3RhcnRDaCA6IDApOw0KICAg
			IGlmIChmaXJzdCkgew0KICAgICAgLy8gRml4IHVwIC50byBwcm9wZXJ0aWVzIG9mIGZpcnN0DQog
			ICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpcnN0Lmxlbmd0aDsgKytpKSB7DQogICAgICAgIHZh
			ciBzcGFuID0gZmlyc3RbaV07DQogICAgICAgIGlmIChzcGFuLnRvID09IG51bGwpIHsNCiAgICAg
			ICAgICB2YXIgZm91bmQgPSBnZXRNYXJrZWRTcGFuRm9yKGxhc3QsIHNwYW4ubWFya2VyKTsNCiAg
			ICAgICAgICBpZiAoIWZvdW5kKSB7IHNwYW4udG8gPSBzdGFydENoOyB9DQogICAgICAgICAgZWxz
			ZSBpZiAoc2FtZUxpbmUpIHsgc3Bhbi50byA9IGZvdW5kLnRvID09IG51bGwgPyBudWxsIDogZm91
			bmQudG8gKyBvZmZzZXQ7IH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBpZiAobGFz
			dCkgew0KICAgICAgLy8gRml4IHVwIC5mcm9tIGluIGxhc3QgKG9yIG1vdmUgdGhlbSBpbnRvIGZp
			cnN0IGluIGNhc2Ugb2Ygc2FtZUxpbmUpDQogICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBs
			YXN0Lmxlbmd0aDsgKytpJDEpIHsNCiAgICAgICAgdmFyIHNwYW4kMSA9IGxhc3RbaSQxXTsNCiAg
			ICAgICAgaWYgKHNwYW4kMS50byAhPSBudWxsKSB7IHNwYW4kMS50byArPSBvZmZzZXQ7IH0NCiAg
			ICAgICAgaWYgKHNwYW4kMS5mcm9tID09IG51bGwpIHsNCiAgICAgICAgICB2YXIgZm91bmQkMSA9
			IGdldE1hcmtlZFNwYW5Gb3IoZmlyc3QsIHNwYW4kMS5tYXJrZXIpOw0KICAgICAgICAgIGlmICgh
			Zm91bmQkMSkgew0KICAgICAgICAgICAgc3BhbiQxLmZyb20gPSBvZmZzZXQ7DQogICAgICAgICAg
			ICBpZiAoc2FtZUxpbmUpIHsgKGZpcnN0IHx8IChmaXJzdCA9IFtdKSkucHVzaChzcGFuJDEpOyB9
			DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHNwYW4kMS5mcm9tICs9
			IG9mZnNldDsNCiAgICAgICAgICBpZiAoc2FtZUxpbmUpIHsgKGZpcnN0IHx8IChmaXJzdCA9IFtd
			KSkucHVzaChzcGFuJDEpOyB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgLy8gTWFr
			ZSBzdXJlIHdlIGRpZG4ndCBjcmVhdGUgYW55IHplcm8tbGVuZ3RoIHNwYW5zDQogICAgaWYgKGZp
			cnN0KSB7IGZpcnN0ID0gY2xlYXJFbXB0eVNwYW5zKGZpcnN0KTsgfQ0KICAgIGlmIChsYXN0ICYm
			IGxhc3QgIT0gZmlyc3QpIHsgbGFzdCA9IGNsZWFyRW1wdHlTcGFucyhsYXN0KTsgfQ0KDQogICAg
			dmFyIG5ld01hcmtlcnMgPSBbZmlyc3RdOw0KICAgIGlmICghc2FtZUxpbmUpIHsNCiAgICAgIC8v
			IEZpbGwgZ2FwIHdpdGggd2hvbGUtbGluZS1zcGFucw0KICAgICAgdmFyIGdhcCA9IGNoYW5nZS50
			ZXh0Lmxlbmd0aCAtIDIsIGdhcE1hcmtlcnM7DQogICAgICBpZiAoZ2FwID4gMCAmJiBmaXJzdCkN
			CiAgICAgICAgeyBmb3IgKHZhciBpJDIgPSAwOyBpJDIgPCBmaXJzdC5sZW5ndGg7ICsraSQyKQ0K
			ICAgICAgICAgIHsgaWYgKGZpcnN0W2kkMl0udG8gPT0gbnVsbCkNCiAgICAgICAgICAgIHsgKGdh
			cE1hcmtlcnMgfHwgKGdhcE1hcmtlcnMgPSBbXSkpLnB1c2gobmV3IE1hcmtlZFNwYW4oZmlyc3Rb
			aSQyXS5tYXJrZXIsIG51bGwsIG51bGwpKTsgfSB9IH0NCiAgICAgIGZvciAodmFyIGkkMyA9IDA7
			IGkkMyA8IGdhcDsgKytpJDMpDQogICAgICAgIHsgbmV3TWFya2Vycy5wdXNoKGdhcE1hcmtlcnMp
			OyB9DQogICAgICBuZXdNYXJrZXJzLnB1c2gobGFzdCk7DQogICAgfQ0KICAgIHJldHVybiBuZXdN
			YXJrZXJzDQogIH0NCg0KICAvLyBSZW1vdmUgc3BhbnMgdGhhdCBhcmUgZW1wdHkgYW5kIGRvbid0
			IGhhdmUgYSBjbGVhcldoZW5FbXB0eQ0KICAvLyBvcHRpb24gb2YgZmFsc2UuDQogIGZ1bmN0aW9u
			IGNsZWFyRW1wdHlTcGFucyhzcGFucykgew0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMu
			bGVuZ3RoOyArK2kpIHsNCiAgICAgIHZhciBzcGFuID0gc3BhbnNbaV07DQogICAgICBpZiAoc3Bh
			bi5mcm9tICE9IG51bGwgJiYgc3Bhbi5mcm9tID09IHNwYW4udG8gJiYgc3Bhbi5tYXJrZXIuY2xl
			YXJXaGVuRW1wdHkgIT09IGZhbHNlKQ0KICAgICAgICB7IHNwYW5zLnNwbGljZShpLS0sIDEpOyB9
			DQogICAgfQ0KICAgIGlmICghc3BhbnMubGVuZ3RoKSB7IHJldHVybiBudWxsIH0NCiAgICByZXR1
			cm4gc3BhbnMNCiAgfQ0KDQogIC8vIFVzZWQgdG8gJ2NsaXAnIG91dCByZWFkT25seSByYW5nZXMg
			d2hlbiBtYWtpbmcgYSBjaGFuZ2UuDQogIGZ1bmN0aW9uIHJlbW92ZVJlYWRPbmx5UmFuZ2VzKGRv
			YywgZnJvbSwgdG8pIHsNCiAgICB2YXIgbWFya2VycyA9IG51bGw7DQogICAgZG9jLml0ZXIoZnJv
			bS5saW5lLCB0by5saW5lICsgMSwgZnVuY3Rpb24gKGxpbmUpIHsNCiAgICAgIGlmIChsaW5lLm1h
			cmtlZFNwYW5zKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS5tYXJrZWRTcGFucy5sZW5ndGg7
			ICsraSkgew0KICAgICAgICB2YXIgbWFyayA9IGxpbmUubWFya2VkU3BhbnNbaV0ubWFya2VyOw0K
			ICAgICAgICBpZiAobWFyay5yZWFkT25seSAmJiAoIW1hcmtlcnMgfHwgaW5kZXhPZihtYXJrZXJz
			LCBtYXJrKSA9PSAtMSkpDQogICAgICAgICAgeyAobWFya2VycyB8fCAobWFya2VycyA9IFtdKSku
			cHVzaChtYXJrKTsgfQ0KICAgICAgfSB9DQogICAgfSk7DQogICAgaWYgKCFtYXJrZXJzKSB7IHJl
			dHVybiBudWxsIH0NCiAgICB2YXIgcGFydHMgPSBbe2Zyb206IGZyb20sIHRvOiB0b31dOw0KICAg
			IGZvciAodmFyIGkgPSAwOyBpIDwgbWFya2Vycy5sZW5ndGg7ICsraSkgew0KICAgICAgdmFyIG1r
			ID0gbWFya2Vyc1tpXSwgbSA9IG1rLmZpbmQoMCk7DQogICAgICBmb3IgKHZhciBqID0gMDsgaiA8
			IHBhcnRzLmxlbmd0aDsgKytqKSB7DQogICAgICAgIHZhciBwID0gcGFydHNbal07DQogICAgICAg
			IGlmIChjbXAocC50bywgbS5mcm9tKSA8IDAgfHwgY21wKHAuZnJvbSwgbS50bykgPiAwKSB7IGNv
			bnRpbnVlIH0NCiAgICAgICAgdmFyIG5ld1BhcnRzID0gW2osIDFdLCBkZnJvbSA9IGNtcChwLmZy
			b20sIG0uZnJvbSksIGR0byA9IGNtcChwLnRvLCBtLnRvKTsNCiAgICAgICAgaWYgKGRmcm9tIDwg
			MCB8fCAhbWsuaW5jbHVzaXZlTGVmdCAmJiAhZGZyb20pDQogICAgICAgICAgeyBuZXdQYXJ0cy5w
			dXNoKHtmcm9tOiBwLmZyb20sIHRvOiBtLmZyb219KTsgfQ0KICAgICAgICBpZiAoZHRvID4gMCB8
			fCAhbWsuaW5jbHVzaXZlUmlnaHQgJiYgIWR0bykNCiAgICAgICAgICB7IG5ld1BhcnRzLnB1c2go
			e2Zyb206IG0udG8sIHRvOiBwLnRvfSk7IH0NCiAgICAgICAgcGFydHMuc3BsaWNlLmFwcGx5KHBh
			cnRzLCBuZXdQYXJ0cyk7DQogICAgICAgIGogKz0gbmV3UGFydHMubGVuZ3RoIC0gMzsNCiAgICAg
			IH0NCiAgICB9DQogICAgcmV0dXJuIHBhcnRzDQogIH0NCg0KICAvLyBDb25uZWN0IG9yIGRpc2Nv
			bm5lY3Qgc3BhbnMgZnJvbSBhIGxpbmUuDQogIGZ1bmN0aW9uIGRldGFjaE1hcmtlZFNwYW5zKGxp
			bmUpIHsNCiAgICB2YXIgc3BhbnMgPSBsaW5lLm1hcmtlZFNwYW5zOw0KICAgIGlmICghc3BhbnMp
			IHsgcmV0dXJuIH0NCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNwYW5zLmxlbmd0aDsgKytpKQ0K
			ICAgICAgeyBzcGFuc1tpXS5tYXJrZXIuZGV0YWNoTGluZShsaW5lKTsgfQ0KICAgIGxpbmUubWFy
			a2VkU3BhbnMgPSBudWxsOw0KICB9DQogIGZ1bmN0aW9uIGF0dGFjaE1hcmtlZFNwYW5zKGxpbmUs
			IHNwYW5zKSB7DQogICAgaWYgKCFzcGFucykgeyByZXR1cm4gfQ0KICAgIGZvciAodmFyIGkgPSAw
			OyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpDQogICAgICB7IHNwYW5zW2ldLm1hcmtlci5hdHRhY2hM
			aW5lKGxpbmUpOyB9DQogICAgbGluZS5tYXJrZWRTcGFucyA9IHNwYW5zOw0KICB9DQoNCiAgLy8g
			SGVscGVycyB1c2VkIHdoZW4gY29tcHV0aW5nIHdoaWNoIG92ZXJsYXBwaW5nIGNvbGxhcHNlZCBz
			cGFuDQogIC8vIGNvdW50cyBhcyB0aGUgbGFyZ2VyIG9uZS4NCiAgZnVuY3Rpb24gZXh0cmFMZWZ0
			KG1hcmtlcikgeyByZXR1cm4gbWFya2VyLmluY2x1c2l2ZUxlZnQgPyAtMSA6IDAgfQ0KICBmdW5j
			dGlvbiBleHRyYVJpZ2h0KG1hcmtlcikgeyByZXR1cm4gbWFya2VyLmluY2x1c2l2ZVJpZ2h0ID8g
			MSA6IDAgfQ0KDQogIC8vIFJldHVybnMgYSBudW1iZXIgaW5kaWNhdGluZyB3aGljaCBvZiB0d28g
			b3ZlcmxhcHBpbmcgY29sbGFwc2VkDQogIC8vIHNwYW5zIGlzIGxhcmdlciAoYW5kIHRodXMgaW5j
			bHVkZXMgdGhlIG90aGVyKS4gRmFsbHMgYmFjayB0bw0KICAvLyBjb21wYXJpbmcgaWRzIHdoZW4g
			dGhlIHNwYW5zIGNvdmVyIGV4YWN0bHkgdGhlIHNhbWUgcmFuZ2UuDQogIGZ1bmN0aW9uIGNvbXBh
			cmVDb2xsYXBzZWRNYXJrZXJzKGEsIGIpIHsNCiAgICB2YXIgbGVuRGlmZiA9IGEubGluZXMubGVu
			Z3RoIC0gYi5saW5lcy5sZW5ndGg7DQogICAgaWYgKGxlbkRpZmYgIT0gMCkgeyByZXR1cm4gbGVu
			RGlmZiB9DQogICAgdmFyIGFQb3MgPSBhLmZpbmQoKSwgYlBvcyA9IGIuZmluZCgpOw0KICAgIHZh
			ciBmcm9tQ21wID0gY21wKGFQb3MuZnJvbSwgYlBvcy5mcm9tKSB8fCBleHRyYUxlZnQoYSkgLSBl
			eHRyYUxlZnQoYik7DQogICAgaWYgKGZyb21DbXApIHsgcmV0dXJuIC1mcm9tQ21wIH0NCiAgICB2
			YXIgdG9DbXAgPSBjbXAoYVBvcy50bywgYlBvcy50bykgfHwgZXh0cmFSaWdodChhKSAtIGV4dHJh
			UmlnaHQoYik7DQogICAgaWYgKHRvQ21wKSB7IHJldHVybiB0b0NtcCB9DQogICAgcmV0dXJuIGIu
			aWQgLSBhLmlkDQogIH0NCg0KICAvLyBGaW5kIG91dCB3aGV0aGVyIGEgbGluZSBlbmRzIG9yIHN0
			YXJ0cyBpbiBhIGNvbGxhcHNlZCBzcGFuLiBJZg0KICAvLyBzbywgcmV0dXJuIHRoZSBtYXJrZXIg
			Zm9yIHRoYXQgc3Bhbi4NCiAgZnVuY3Rpb24gY29sbGFwc2VkU3BhbkF0U2lkZShsaW5lLCBzdGFy
			dCkgew0KICAgIHZhciBzcHMgPSBzYXdDb2xsYXBzZWRTcGFucyAmJiBsaW5lLm1hcmtlZFNwYW5z
			LCBmb3VuZDsNCiAgICBpZiAoc3BzKSB7IGZvciAodmFyIHNwID0gKHZvaWQgMCksIGkgPSAwOyBp
			IDwgc3BzLmxlbmd0aDsgKytpKSB7DQogICAgICBzcCA9IHNwc1tpXTsNCiAgICAgIGlmIChzcC5t
			YXJrZXIuY29sbGFwc2VkICYmIChzdGFydCA/IHNwLmZyb20gOiBzcC50bykgPT0gbnVsbCAmJg0K
			ICAgICAgICAgICghZm91bmQgfHwgY29tcGFyZUNvbGxhcHNlZE1hcmtlcnMoZm91bmQsIHNwLm1h
			cmtlcikgPCAwKSkNCiAgICAgICAgeyBmb3VuZCA9IHNwLm1hcmtlcjsgfQ0KICAgIH0gfQ0KICAg
			IHJldHVybiBmb3VuZA0KICB9DQogIGZ1bmN0aW9uIGNvbGxhcHNlZFNwYW5BdFN0YXJ0KGxpbmUp
			IHsgcmV0dXJuIGNvbGxhcHNlZFNwYW5BdFNpZGUobGluZSwgdHJ1ZSkgfQ0KICBmdW5jdGlvbiBj
			b2xsYXBzZWRTcGFuQXRFbmQobGluZSkgeyByZXR1cm4gY29sbGFwc2VkU3BhbkF0U2lkZShsaW5l
			LCBmYWxzZSkgfQ0KDQogIGZ1bmN0aW9uIGNvbGxhcHNlZFNwYW5Bcm91bmQobGluZSwgY2gpIHsN
			CiAgICB2YXIgc3BzID0gc2F3Q29sbGFwc2VkU3BhbnMgJiYgbGluZS5tYXJrZWRTcGFucywgZm91
			bmQ7DQogICAgaWYgKHNwcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHNwcy5sZW5ndGg7ICsraSkg
			ew0KICAgICAgdmFyIHNwID0gc3BzW2ldOw0KICAgICAgaWYgKHNwLm1hcmtlci5jb2xsYXBzZWQg
			JiYgKHNwLmZyb20gPT0gbnVsbCB8fCBzcC5mcm9tIDwgY2gpICYmIChzcC50byA9PSBudWxsIHx8
			IHNwLnRvID4gY2gpICYmDQogICAgICAgICAgKCFmb3VuZCB8fCBjb21wYXJlQ29sbGFwc2VkTWFy
			a2Vycyhmb3VuZCwgc3AubWFya2VyKSA8IDApKSB7IGZvdW5kID0gc3AubWFya2VyOyB9DQogICAg
			fSB9DQogICAgcmV0dXJuIGZvdW5kDQogIH0NCg0KICAvLyBUZXN0IHdoZXRoZXIgdGhlcmUgZXhp
			c3RzIGEgY29sbGFwc2VkIHNwYW4gdGhhdCBwYXJ0aWFsbHkNCiAgLy8gb3ZlcmxhcHMgKGNvdmVy
			cyB0aGUgc3RhcnQgb3IgZW5kLCBidXQgbm90IGJvdGgpIG9mIGEgbmV3IHNwYW4uDQogIC8vIFN1
			Y2ggb3ZlcmxhcCBpcyBub3QgYWxsb3dlZC4NCiAgZnVuY3Rpb24gY29uZmxpY3RpbmdDb2xsYXBz
			ZWRSYW5nZShkb2MsIGxpbmVObyQkMSwgZnJvbSwgdG8sIG1hcmtlcikgew0KICAgIHZhciBsaW5l
			ID0gZ2V0TGluZShkb2MsIGxpbmVObyQkMSk7DQogICAgdmFyIHNwcyA9IHNhd0NvbGxhcHNlZFNw
			YW5zICYmIGxpbmUubWFya2VkU3BhbnM7DQogICAgaWYgKHNwcykgeyBmb3IgKHZhciBpID0gMDsg
			aSA8IHNwcy5sZW5ndGg7ICsraSkgew0KICAgICAgdmFyIHNwID0gc3BzW2ldOw0KICAgICAgaWYg
			KCFzcC5tYXJrZXIuY29sbGFwc2VkKSB7IGNvbnRpbnVlIH0NCiAgICAgIHZhciBmb3VuZCA9IHNw
			Lm1hcmtlci5maW5kKDApOw0KICAgICAgdmFyIGZyb21DbXAgPSBjbXAoZm91bmQuZnJvbSwgZnJv
			bSkgfHwgZXh0cmFMZWZ0KHNwLm1hcmtlcikgLSBleHRyYUxlZnQobWFya2VyKTsNCiAgICAgIHZh
			ciB0b0NtcCA9IGNtcChmb3VuZC50bywgdG8pIHx8IGV4dHJhUmlnaHQoc3AubWFya2VyKSAtIGV4
			dHJhUmlnaHQobWFya2VyKTsNCiAgICAgIGlmIChmcm9tQ21wID49IDAgJiYgdG9DbXAgPD0gMCB8
			fCBmcm9tQ21wIDw9IDAgJiYgdG9DbXAgPj0gMCkgeyBjb250aW51ZSB9DQogICAgICBpZiAoZnJv
			bUNtcCA8PSAwICYmIChzcC5tYXJrZXIuaW5jbHVzaXZlUmlnaHQgJiYgbWFya2VyLmluY2x1c2l2
			ZUxlZnQgPyBjbXAoZm91bmQudG8sIGZyb20pID49IDAgOiBjbXAoZm91bmQudG8sIGZyb20pID4g
			MCkgfHwNCiAgICAgICAgICBmcm9tQ21wID49IDAgJiYgKHNwLm1hcmtlci5pbmNsdXNpdmVSaWdo
			dCAmJiBtYXJrZXIuaW5jbHVzaXZlTGVmdCA/IGNtcChmb3VuZC5mcm9tLCB0bykgPD0gMCA6IGNt
			cChmb3VuZC5mcm9tLCB0bykgPCAwKSkNCiAgICAgICAgeyByZXR1cm4gdHJ1ZSB9DQogICAgfSB9
			DQogIH0NCg0KICAvLyBBIHZpc3VhbCBsaW5lIGlzIGEgbGluZSBhcyBkcmF3biBvbiB0aGUgc2Ny
			ZWVuLiBGb2xkaW5nLCBmb3INCiAgLy8gZXhhbXBsZSwgY2FuIGNhdXNlIG11bHRpcGxlIGxvZ2lj
			YWwgbGluZXMgdG8gYXBwZWFyIG9uIHRoZSBzYW1lDQogIC8vIHZpc3VhbCBsaW5lLiBUaGlzIGZp
			bmRzIHRoZSBzdGFydCBvZiB0aGUgdmlzdWFsIGxpbmUgdGhhdCB0aGUNCiAgLy8gZ2l2ZW4gbGlu
			ZSBpcyBwYXJ0IG9mICh1c3VhbGx5IHRoYXQgaXMgdGhlIGxpbmUgaXRzZWxmKS4NCiAgZnVuY3Rp
			b24gdmlzdWFsTGluZShsaW5lKSB7DQogICAgdmFyIG1lcmdlZDsNCiAgICB3aGlsZSAobWVyZ2Vk
			ID0gY29sbGFwc2VkU3BhbkF0U3RhcnQobGluZSkpDQogICAgICB7IGxpbmUgPSBtZXJnZWQuZmlu
			ZCgtMSwgdHJ1ZSkubGluZTsgfQ0KICAgIHJldHVybiBsaW5lDQogIH0NCg0KICBmdW5jdGlvbiB2
			aXN1YWxMaW5lRW5kKGxpbmUpIHsNCiAgICB2YXIgbWVyZ2VkOw0KICAgIHdoaWxlIChtZXJnZWQg
			PSBjb2xsYXBzZWRTcGFuQXRFbmQobGluZSkpDQogICAgICB7IGxpbmUgPSBtZXJnZWQuZmluZCgx
			LCB0cnVlKS5saW5lOyB9DQogICAgcmV0dXJuIGxpbmUNCiAgfQ0KDQogIC8vIFJldHVybnMgYW4g
			YXJyYXkgb2YgbG9naWNhbCBsaW5lcyB0aGF0IGNvbnRpbnVlIHRoZSB2aXN1YWwgbGluZQ0KICAv
			LyBzdGFydGVkIGJ5IHRoZSBhcmd1bWVudCwgb3IgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSBubyBz
			dWNoIGxpbmVzLg0KICBmdW5jdGlvbiB2aXN1YWxMaW5lQ29udGludWVkKGxpbmUpIHsNCiAgICB2
			YXIgbWVyZ2VkLCBsaW5lczsNCiAgICB3aGlsZSAobWVyZ2VkID0gY29sbGFwc2VkU3BhbkF0RW5k
			KGxpbmUpKSB7DQogICAgICBsaW5lID0gbWVyZ2VkLmZpbmQoMSwgdHJ1ZSkubGluZQ0KICAgICAg
			OyhsaW5lcyB8fCAobGluZXMgPSBbXSkpLnB1c2gobGluZSk7DQogICAgfQ0KICAgIHJldHVybiBs
			aW5lcw0KICB9DQoNCiAgLy8gR2V0IHRoZSBsaW5lIG51bWJlciBvZiB0aGUgc3RhcnQgb2YgdGhl
			IHZpc3VhbCBsaW5lIHRoYXQgdGhlDQogIC8vIGdpdmVuIGxpbmUgbnVtYmVyIGlzIHBhcnQgb2Yu
			DQogIGZ1bmN0aW9uIHZpc3VhbExpbmVObyhkb2MsIGxpbmVOKSB7DQogICAgdmFyIGxpbmUgPSBn
			ZXRMaW5lKGRvYywgbGluZU4pLCB2aXMgPSB2aXN1YWxMaW5lKGxpbmUpOw0KICAgIGlmIChsaW5l
			ID09IHZpcykgeyByZXR1cm4gbGluZU4gfQ0KICAgIHJldHVybiBsaW5lTm8odmlzKQ0KICB9DQoN
			CiAgLy8gR2V0IHRoZSBsaW5lIG51bWJlciBvZiB0aGUgc3RhcnQgb2YgdGhlIG5leHQgdmlzdWFs
			IGxpbmUgYWZ0ZXINCiAgLy8gdGhlIGdpdmVuIGxpbmUuDQogIGZ1bmN0aW9uIHZpc3VhbExpbmVF
			bmRObyhkb2MsIGxpbmVOKSB7DQogICAgaWYgKGxpbmVOID4gZG9jLmxhc3RMaW5lKCkpIHsgcmV0
			dXJuIGxpbmVOIH0NCiAgICB2YXIgbGluZSA9IGdldExpbmUoZG9jLCBsaW5lTiksIG1lcmdlZDsN
			CiAgICBpZiAoIWxpbmVJc0hpZGRlbihkb2MsIGxpbmUpKSB7IHJldHVybiBsaW5lTiB9DQogICAg
			d2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdEVuZChsaW5lKSkNCiAgICAgIHsgbGluZSA9
			IG1lcmdlZC5maW5kKDEsIHRydWUpLmxpbmU7IH0NCiAgICByZXR1cm4gbGluZU5vKGxpbmUpICsg
			MQ0KICB9DQoNCiAgLy8gQ29tcHV0ZSB3aGV0aGVyIGEgbGluZSBpcyBoaWRkZW4uIExpbmVzIGNv
			dW50IGFzIGhpZGRlbiB3aGVuIHRoZXkNCiAgLy8gYXJlIHBhcnQgb2YgYSB2aXN1YWwgbGluZSB0
			aGF0IHN0YXJ0cyB3aXRoIGFub3RoZXIgbGluZSwgb3Igd2hlbg0KICAvLyB0aGV5IGFyZSBlbnRp
			cmVseSBjb3ZlcmVkIGJ5IGNvbGxhcHNlZCwgbm9uLXdpZGdldCBzcGFuLg0KICBmdW5jdGlvbiBs
			aW5lSXNIaWRkZW4oZG9jLCBsaW5lKSB7DQogICAgdmFyIHNwcyA9IHNhd0NvbGxhcHNlZFNwYW5z
			ICYmIGxpbmUubWFya2VkU3BhbnM7DQogICAgaWYgKHNwcykgeyBmb3IgKHZhciBzcCA9ICh2b2lk
			IDApLCBpID0gMDsgaSA8IHNwcy5sZW5ndGg7ICsraSkgew0KICAgICAgc3AgPSBzcHNbaV07DQog
			ICAgICBpZiAoIXNwLm1hcmtlci5jb2xsYXBzZWQpIHsgY29udGludWUgfQ0KICAgICAgaWYgKHNw
			LmZyb20gPT0gbnVsbCkgeyByZXR1cm4gdHJ1ZSB9DQogICAgICBpZiAoc3AubWFya2VyLndpZGdl
			dE5vZGUpIHsgY29udGludWUgfQ0KICAgICAgaWYgKHNwLmZyb20gPT0gMCAmJiBzcC5tYXJrZXIu
			aW5jbHVzaXZlTGVmdCAmJiBsaW5lSXNIaWRkZW5Jbm5lcihkb2MsIGxpbmUsIHNwKSkNCiAgICAg
			ICAgeyByZXR1cm4gdHJ1ZSB9DQogICAgfSB9DQogIH0NCiAgZnVuY3Rpb24gbGluZUlzSGlkZGVu
			SW5uZXIoZG9jLCBsaW5lLCBzcGFuKSB7DQogICAgaWYgKHNwYW4udG8gPT0gbnVsbCkgew0KICAg
			ICAgdmFyIGVuZCA9IHNwYW4ubWFya2VyLmZpbmQoMSwgdHJ1ZSk7DQogICAgICByZXR1cm4gbGlu
			ZUlzSGlkZGVuSW5uZXIoZG9jLCBlbmQubGluZSwgZ2V0TWFya2VkU3BhbkZvcihlbmQubGluZS5t
			YXJrZWRTcGFucywgc3Bhbi5tYXJrZXIpKQ0KICAgIH0NCiAgICBpZiAoc3Bhbi5tYXJrZXIuaW5j
			bHVzaXZlUmlnaHQgJiYgc3Bhbi50byA9PSBsaW5lLnRleHQubGVuZ3RoKQ0KICAgICAgeyByZXR1
			cm4gdHJ1ZSB9DQogICAgZm9yICh2YXIgc3AgPSAodm9pZCAwKSwgaSA9IDA7IGkgPCBsaW5lLm1h
			cmtlZFNwYW5zLmxlbmd0aDsgKytpKSB7DQogICAgICBzcCA9IGxpbmUubWFya2VkU3BhbnNbaV07
			DQogICAgICBpZiAoc3AubWFya2VyLmNvbGxhcHNlZCAmJiAhc3AubWFya2VyLndpZGdldE5vZGUg
			JiYgc3AuZnJvbSA9PSBzcGFuLnRvICYmDQogICAgICAgICAgKHNwLnRvID09IG51bGwgfHwgc3Au
			dG8gIT0gc3Bhbi5mcm9tKSAmJg0KICAgICAgICAgIChzcC5tYXJrZXIuaW5jbHVzaXZlTGVmdCB8
			fCBzcGFuLm1hcmtlci5pbmNsdXNpdmVSaWdodCkgJiYNCiAgICAgICAgICBsaW5lSXNIaWRkZW5J
			bm5lcihkb2MsIGxpbmUsIHNwKSkgeyByZXR1cm4gdHJ1ZSB9DQogICAgfQ0KICB9DQoNCiAgLy8g
			RmluZCB0aGUgaGVpZ2h0IGFib3ZlIHRoZSBnaXZlbiBsaW5lLg0KICBmdW5jdGlvbiBoZWlnaHRB
			dExpbmUobGluZU9iaikgew0KICAgIGxpbmVPYmogPSB2aXN1YWxMaW5lKGxpbmVPYmopOw0KDQog
			ICAgdmFyIGggPSAwLCBjaHVuayA9IGxpbmVPYmoucGFyZW50Ow0KICAgIGZvciAodmFyIGkgPSAw
			OyBpIDwgY2h1bmsubGluZXMubGVuZ3RoOyArK2kpIHsNCiAgICAgIHZhciBsaW5lID0gY2h1bmsu
			bGluZXNbaV07DQogICAgICBpZiAobGluZSA9PSBsaW5lT2JqKSB7IGJyZWFrIH0NCiAgICAgIGVs
			c2UgeyBoICs9IGxpbmUuaGVpZ2h0OyB9DQogICAgfQ0KICAgIGZvciAodmFyIHAgPSBjaHVuay5w
			YXJlbnQ7IHA7IGNodW5rID0gcCwgcCA9IGNodW5rLnBhcmVudCkgew0KICAgICAgZm9yICh2YXIg
			aSQxID0gMDsgaSQxIDwgcC5jaGlsZHJlbi5sZW5ndGg7ICsraSQxKSB7DQogICAgICAgIHZhciBj
			dXIgPSBwLmNoaWxkcmVuW2kkMV07DQogICAgICAgIGlmIChjdXIgPT0gY2h1bmspIHsgYnJlYWsg
			fQ0KICAgICAgICBlbHNlIHsgaCArPSBjdXIuaGVpZ2h0OyB9DQogICAgICB9DQogICAgfQ0KICAg
			IHJldHVybiBoDQogIH0NCg0KICAvLyBDb21wdXRlIHRoZSBjaGFyYWN0ZXIgbGVuZ3RoIG9mIGEg
			bGluZSwgdGFraW5nIGludG8gYWNjb3VudA0KICAvLyBjb2xsYXBzZWQgcmFuZ2VzIChzZWUgbWFy
			a1RleHQpIHRoYXQgbWlnaHQgaGlkZSBwYXJ0cywgYW5kIGpvaW4NCiAgLy8gb3RoZXIgbGluZXMg
			b250byBpdC4NCiAgZnVuY3Rpb24gbGluZUxlbmd0aChsaW5lKSB7DQogICAgaWYgKGxpbmUuaGVp
			Z2h0ID09IDApIHsgcmV0dXJuIDAgfQ0KICAgIHZhciBsZW4gPSBsaW5lLnRleHQubGVuZ3RoLCBt
			ZXJnZWQsIGN1ciA9IGxpbmU7DQogICAgd2hpbGUgKG1lcmdlZCA9IGNvbGxhcHNlZFNwYW5BdFN0
			YXJ0KGN1cikpIHsNCiAgICAgIHZhciBmb3VuZCA9IG1lcmdlZC5maW5kKDAsIHRydWUpOw0KICAg
			ICAgY3VyID0gZm91bmQuZnJvbS5saW5lOw0KICAgICAgbGVuICs9IGZvdW5kLmZyb20uY2ggLSBm
			b3VuZC50by5jaDsNCiAgICB9DQogICAgY3VyID0gbGluZTsNCiAgICB3aGlsZSAobWVyZ2VkID0g
			Y29sbGFwc2VkU3BhbkF0RW5kKGN1cikpIHsNCiAgICAgIHZhciBmb3VuZCQxID0gbWVyZ2VkLmZp
			bmQoMCwgdHJ1ZSk7DQogICAgICBsZW4gLT0gY3VyLnRleHQubGVuZ3RoIC0gZm91bmQkMS5mcm9t
			LmNoOw0KICAgICAgY3VyID0gZm91bmQkMS50by5saW5lOw0KICAgICAgbGVuICs9IGN1ci50ZXh0
			Lmxlbmd0aCAtIGZvdW5kJDEudG8uY2g7DQogICAgfQ0KICAgIHJldHVybiBsZW4NCiAgfQ0KDQog
			IC8vIEZpbmQgdGhlIGxvbmdlc3QgbGluZSBpbiB0aGUgZG9jdW1lbnQuDQogIGZ1bmN0aW9uIGZp
			bmRNYXhMaW5lKGNtKSB7DQogICAgdmFyIGQgPSBjbS5kaXNwbGF5LCBkb2MgPSBjbS5kb2M7DQog
			ICAgZC5tYXhMaW5lID0gZ2V0TGluZShkb2MsIGRvYy5maXJzdCk7DQogICAgZC5tYXhMaW5lTGVu
			Z3RoID0gbGluZUxlbmd0aChkLm1heExpbmUpOw0KICAgIGQubWF4TGluZUNoYW5nZWQgPSB0cnVl
			Ow0KICAgIGRvYy5pdGVyKGZ1bmN0aW9uIChsaW5lKSB7DQogICAgICB2YXIgbGVuID0gbGluZUxl
			bmd0aChsaW5lKTsNCiAgICAgIGlmIChsZW4gPiBkLm1heExpbmVMZW5ndGgpIHsNCiAgICAgICAg
			ZC5tYXhMaW5lTGVuZ3RoID0gbGVuOw0KICAgICAgICBkLm1heExpbmUgPSBsaW5lOw0KICAgICAg
			fQ0KICAgIH0pOw0KICB9DQoNCiAgLy8gTElORSBEQVRBIFNUUlVDVFVSRQ0KDQogIC8vIExpbmUg
			b2JqZWN0cy4gVGhlc2UgaG9sZCBzdGF0ZSByZWxhdGVkIHRvIGEgbGluZSwgaW5jbHVkaW5nDQog
			IC8vIGhpZ2hsaWdodGluZyBpbmZvICh0aGUgc3R5bGVzIGFycmF5KS4NCiAgdmFyIExpbmUgPSBm
			dW5jdGlvbih0ZXh0LCBtYXJrZWRTcGFucywgZXN0aW1hdGVIZWlnaHQpIHsNCiAgICB0aGlzLnRl
			eHQgPSB0ZXh0Ow0KICAgIGF0dGFjaE1hcmtlZFNwYW5zKHRoaXMsIG1hcmtlZFNwYW5zKTsNCiAg
			ICB0aGlzLmhlaWdodCA9IGVzdGltYXRlSGVpZ2h0ID8gZXN0aW1hdGVIZWlnaHQodGhpcykgOiAx
			Ow0KICB9Ow0KDQogIExpbmUucHJvdG90eXBlLmxpbmVObyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJu
			IGxpbmVObyh0aGlzKSB9Ow0KICBldmVudE1peGluKExpbmUpOw0KDQogIC8vIENoYW5nZSB0aGUg
			Y29udGVudCAodGV4dCwgbWFya2Vycykgb2YgYSBsaW5lLiBBdXRvbWF0aWNhbGx5DQogIC8vIGlu
			dmFsaWRhdGVzIGNhY2hlZCBpbmZvcm1hdGlvbiBhbmQgdHJpZXMgdG8gcmUtZXN0aW1hdGUgdGhl
			DQogIC8vIGxpbmUncyBoZWlnaHQuDQogIGZ1bmN0aW9uIHVwZGF0ZUxpbmUobGluZSwgdGV4dCwg
			bWFya2VkU3BhbnMsIGVzdGltYXRlSGVpZ2h0KSB7DQogICAgbGluZS50ZXh0ID0gdGV4dDsNCiAg
			ICBpZiAobGluZS5zdGF0ZUFmdGVyKSB7IGxpbmUuc3RhdGVBZnRlciA9IG51bGw7IH0NCiAgICBp
			ZiAobGluZS5zdHlsZXMpIHsgbGluZS5zdHlsZXMgPSBudWxsOyB9DQogICAgaWYgKGxpbmUub3Jk
			ZXIgIT0gbnVsbCkgeyBsaW5lLm9yZGVyID0gbnVsbDsgfQ0KICAgIGRldGFjaE1hcmtlZFNwYW5z
			KGxpbmUpOw0KICAgIGF0dGFjaE1hcmtlZFNwYW5zKGxpbmUsIG1hcmtlZFNwYW5zKTsNCiAgICB2
			YXIgZXN0SGVpZ2h0ID0gZXN0aW1hdGVIZWlnaHQgPyBlc3RpbWF0ZUhlaWdodChsaW5lKSA6IDE7
			DQogICAgaWYgKGVzdEhlaWdodCAhPSBsaW5lLmhlaWdodCkgeyB1cGRhdGVMaW5lSGVpZ2h0KGxp
			bmUsIGVzdEhlaWdodCk7IH0NCiAgfQ0KDQogIC8vIERldGFjaCBhIGxpbmUgZnJvbSB0aGUgZG9j
			dW1lbnQgdHJlZSBhbmQgaXRzIG1hcmtlcnMuDQogIGZ1bmN0aW9uIGNsZWFuVXBMaW5lKGxpbmUp
			IHsNCiAgICBsaW5lLnBhcmVudCA9IG51bGw7DQogICAgZGV0YWNoTWFya2VkU3BhbnMobGluZSk7
			DQogIH0NCg0KICAvLyBDb252ZXJ0IGEgc3R5bGUgYXMgcmV0dXJuZWQgYnkgYSBtb2RlIChlaXRo
			ZXIgbnVsbCwgb3IgYSBzdHJpbmcNCiAgLy8gY29udGFpbmluZyBvbmUgb3IgbW9yZSBzdHlsZXMp
			IHRvIGEgQ1NTIHN0eWxlLiBUaGlzIGlzIGNhY2hlZCwNCiAgLy8gYW5kIGFsc28gbG9va3MgZm9y
			IGxpbmUtd2lkZSBzdHlsZXMuDQogIHZhciBzdHlsZVRvQ2xhc3NDYWNoZSA9IHt9LCBzdHlsZVRv
			Q2xhc3NDYWNoZVdpdGhNb2RlID0ge307DQogIGZ1bmN0aW9uIGludGVycHJldFRva2VuU3R5bGUo
			c3R5bGUsIG9wdGlvbnMpIHsNCiAgICBpZiAoIXN0eWxlIHx8IC9eXHMqJC8udGVzdChzdHlsZSkp
			IHsgcmV0dXJuIG51bGwgfQ0KICAgIHZhciBjYWNoZSA9IG9wdGlvbnMuYWRkTW9kZUNsYXNzID8g
			c3R5bGVUb0NsYXNzQ2FjaGVXaXRoTW9kZSA6IHN0eWxlVG9DbGFzc0NhY2hlOw0KICAgIHJldHVy
			biBjYWNoZVtzdHlsZV0gfHwNCiAgICAgIChjYWNoZVtzdHlsZV0gPSBzdHlsZS5yZXBsYWNlKC9c
			UysvZywgImNtLSQmIikpDQogIH0NCg0KICAvLyBSZW5kZXIgdGhlIERPTSByZXByZXNlbnRhdGlv
			biBvZiB0aGUgdGV4dCBvZiBhIGxpbmUuIEFsc28gYnVpbGRzDQogIC8vIHVwIGEgJ2xpbmUgbWFw
			Jywgd2hpY2ggcG9pbnRzIGF0IHRoZSBET00gbm9kZXMgdGhhdCByZXByZXNlbnQNCiAgLy8gc3Bl
			Y2lmaWMgc3RyZXRjaGVzIG9mIHRleHQsIGFuZCBpcyB1c2VkIGJ5IHRoZSBtZWFzdXJpbmcgY29k
			ZS4NCiAgLy8gVGhlIHJldHVybmVkIG9iamVjdCBjb250YWlucyB0aGUgRE9NIG5vZGUsIHRoaXMg
			bWFwLCBhbmQNCiAgLy8gaW5mb3JtYXRpb24gYWJvdXQgbGluZS13aWRlIHN0eWxlcyB0aGF0IHdl
			cmUgc2V0IGJ5IHRoZSBtb2RlLg0KICBmdW5jdGlvbiBidWlsZExpbmVDb250ZW50KGNtLCBsaW5l
			Vmlldykgew0KICAgIC8vIFRoZSBwYWRkaW5nLXJpZ2h0IGZvcmNlcyB0aGUgZWxlbWVudCB0byBo
			YXZlIGEgJ2JvcmRlcicsIHdoaWNoDQogICAgLy8gaXMgbmVlZGVkIG9uIFdlYmtpdCB0byBiZSBh
			YmxlIHRvIGdldCBsaW5lLWxldmVsIGJvdW5kaW5nDQogICAgLy8gcmVjdGFuZ2xlcyBmb3IgaXQg
			KGluIG1lYXN1cmVDaGFyKS4NCiAgICB2YXIgY29udGVudCA9IGVsdFAoInNwYW4iLCBudWxsLCBu
			dWxsLCB3ZWJraXQgPyAicGFkZGluZy1yaWdodDogLjFweCIgOiBudWxsKTsNCiAgICB2YXIgYnVp
			bGRlciA9IHtwcmU6IGVsdFAoInByZSIsIFtjb250ZW50XSwgIkNvZGVNaXJyb3ItbGluZSIpLCBj
			b250ZW50OiBjb250ZW50LA0KICAgICAgICAgICAgICAgICAgIGNvbDogMCwgcG9zOiAwLCBjbTog
			Y20sDQogICAgICAgICAgICAgICAgICAgdHJhaWxpbmdTcGFjZTogZmFsc2UsDQogICAgICAgICAg
			ICAgICAgICAgc3BsaXRTcGFjZXM6IGNtLmdldE9wdGlvbigibGluZVdyYXBwaW5nIil9Ow0KICAg
			IGxpbmVWaWV3Lm1lYXN1cmUgPSB7fTsNCg0KICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgbG9naWNh
			bCBsaW5lcyB0aGF0IG1ha2UgdXAgdGhpcyB2aXN1YWwgbGluZS4NCiAgICBmb3IgKHZhciBpID0g
			MDsgaSA8PSAobGluZVZpZXcucmVzdCA/IGxpbmVWaWV3LnJlc3QubGVuZ3RoIDogMCk7IGkrKykg
			ew0KICAgICAgdmFyIGxpbmUgPSBpID8gbGluZVZpZXcucmVzdFtpIC0gMV0gOiBsaW5lVmlldy5s
			aW5lLCBvcmRlciA9ICh2b2lkIDApOw0KICAgICAgYnVpbGRlci5wb3MgPSAwOw0KICAgICAgYnVp
			bGRlci5hZGRUb2tlbiA9IGJ1aWxkVG9rZW47DQogICAgICAvLyBPcHRpb25hbGx5IHdpcmUgaW4g
			c29tZSBoYWNrcyBpbnRvIHRoZSB0b2tlbi1yZW5kZXJpbmcNCiAgICAgIC8vIGFsZ29yaXRobSwg
			dG8gZGVhbCB3aXRoIGJyb3dzZXIgcXVpcmtzLg0KICAgICAgaWYgKGhhc0JhZEJpZGlSZWN0cyhj
			bS5kaXNwbGF5Lm1lYXN1cmUpICYmIChvcmRlciA9IGdldE9yZGVyKGxpbmUsIGNtLmRvYy5kaXJl
			Y3Rpb24pKSkNCiAgICAgICAgeyBidWlsZGVyLmFkZFRva2VuID0gYnVpbGRUb2tlbkJhZEJpZGko
			YnVpbGRlci5hZGRUb2tlbiwgb3JkZXIpOyB9DQogICAgICBidWlsZGVyLm1hcCA9IFtdOw0KICAg
			ICAgdmFyIGFsbG93RnJvbnRpZXJVcGRhdGUgPSBsaW5lVmlldyAhPSBjbS5kaXNwbGF5LmV4dGVy
			bmFsTWVhc3VyZWQgJiYgbGluZU5vKGxpbmUpOw0KICAgICAgaW5zZXJ0TGluZUNvbnRlbnQobGlu
			ZSwgYnVpbGRlciwgZ2V0TGluZVN0eWxlcyhjbSwgbGluZSwgYWxsb3dGcm9udGllclVwZGF0ZSkp
			Ow0KICAgICAgaWYgKGxpbmUuc3R5bGVDbGFzc2VzKSB7DQogICAgICAgIGlmIChsaW5lLnN0eWxl
			Q2xhc3Nlcy5iZ0NsYXNzKQ0KICAgICAgICAgIHsgYnVpbGRlci5iZ0NsYXNzID0gam9pbkNsYXNz
			ZXMobGluZS5zdHlsZUNsYXNzZXMuYmdDbGFzcywgYnVpbGRlci5iZ0NsYXNzIHx8ICIiKTsgfQ0K
			ICAgICAgICBpZiAobGluZS5zdHlsZUNsYXNzZXMudGV4dENsYXNzKQ0KICAgICAgICAgIHsgYnVp
			bGRlci50ZXh0Q2xhc3MgPSBqb2luQ2xhc3NlcyhsaW5lLnN0eWxlQ2xhc3Nlcy50ZXh0Q2xhc3Ms
			IGJ1aWxkZXIudGV4dENsYXNzIHx8ICIiKTsgfQ0KICAgICAgfQ0KDQogICAgICAvLyBFbnN1cmUg
			YXQgbGVhc3QgYSBzaW5nbGUgbm9kZSBpcyBwcmVzZW50LCBmb3IgbWVhc3VyaW5nLg0KICAgICAg
			aWYgKGJ1aWxkZXIubWFwLmxlbmd0aCA9PSAwKQ0KICAgICAgICB7IGJ1aWxkZXIubWFwLnB1c2go
			MCwgMCwgYnVpbGRlci5jb250ZW50LmFwcGVuZENoaWxkKHplcm9XaWR0aEVsZW1lbnQoY20uZGlz
			cGxheS5tZWFzdXJlKSkpOyB9DQoNCiAgICAgIC8vIFN0b3JlIHRoZSBtYXAgYW5kIGEgY2FjaGUg
			b2JqZWN0IGZvciB0aGUgY3VycmVudCBsb2dpY2FsIGxpbmUNCiAgICAgIGlmIChpID09IDApIHsN
			CiAgICAgICAgbGluZVZpZXcubWVhc3VyZS5tYXAgPSBidWlsZGVyLm1hcDsNCiAgICAgICAgbGlu
			ZVZpZXcubWVhc3VyZS5jYWNoZSA9IHt9Ow0KICAgICAgfSBlbHNlIHsNCiAgKGxpbmVWaWV3Lm1l
			YXN1cmUubWFwcyB8fCAobGluZVZpZXcubWVhc3VyZS5tYXBzID0gW10pKS5wdXNoKGJ1aWxkZXIu
			bWFwKQ0KICAgICAgICA7KGxpbmVWaWV3Lm1lYXN1cmUuY2FjaGVzIHx8IChsaW5lVmlldy5tZWFz
			dXJlLmNhY2hlcyA9IFtdKSkucHVzaCh7fSk7DQogICAgICB9DQogICAgfQ0KDQogICAgLy8gU2Vl
			IGlzc3VlICMyOTAxDQogICAgaWYgKHdlYmtpdCkgew0KICAgICAgdmFyIGxhc3QgPSBidWlsZGVy
			LmNvbnRlbnQubGFzdENoaWxkOw0KICAgICAgaWYgKC9cYmNtLXRhYlxiLy50ZXN0KGxhc3QuY2xh
			c3NOYW1lKSB8fCAobGFzdC5xdWVyeVNlbGVjdG9yICYmIGxhc3QucXVlcnlTZWxlY3RvcigiLmNt
			LXRhYiIpKSkNCiAgICAgICAgeyBidWlsZGVyLmNvbnRlbnQuY2xhc3NOYW1lID0gImNtLXRhYi13
			cmFwLWhhY2siOyB9DQogICAgfQ0KDQogICAgc2lnbmFsKGNtLCAicmVuZGVyTGluZSIsIGNtLCBs
			aW5lVmlldy5saW5lLCBidWlsZGVyLnByZSk7DQogICAgaWYgKGJ1aWxkZXIucHJlLmNsYXNzTmFt
			ZSkNCiAgICAgIHsgYnVpbGRlci50ZXh0Q2xhc3MgPSBqb2luQ2xhc3NlcyhidWlsZGVyLnByZS5j
			bGFzc05hbWUsIGJ1aWxkZXIudGV4dENsYXNzIHx8ICIiKTsgfQ0KDQogICAgcmV0dXJuIGJ1aWxk
			ZXINCiAgfQ0KDQogIGZ1bmN0aW9uIGRlZmF1bHRTcGVjaWFsQ2hhclBsYWNlaG9sZGVyKGNoKSB7
			DQogICAgdmFyIHRva2VuID0gZWx0KCJzcGFuIiwgIlx1MjAyMiIsICJjbS1pbnZhbGlkY2hhciIp
			Ow0KICAgIHRva2VuLnRpdGxlID0gIlxcdSIgKyBjaC5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2
			KTsNCiAgICB0b2tlbi5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLCB0b2tlbi50aXRsZSk7DQog
			ICAgcmV0dXJuIHRva2VuDQogIH0NCg0KICAvLyBCdWlsZCB1cCB0aGUgRE9NIHJlcHJlc2VudGF0
			aW9uIGZvciBhIHNpbmdsZSB0b2tlbiwgYW5kIGFkZCBpdCB0bw0KICAvLyB0aGUgbGluZSBtYXAu
			IFRha2VzIGNhcmUgdG8gcmVuZGVyIHNwZWNpYWwgY2hhcmFjdGVycyBzZXBhcmF0ZWx5Lg0KICBm
			dW5jdGlvbiBidWlsZFRva2VuKGJ1aWxkZXIsIHRleHQsIHN0eWxlLCBzdGFydFN0eWxlLCBlbmRT
			dHlsZSwgY3NzLCBhdHRyaWJ1dGVzKSB7DQogICAgaWYgKCF0ZXh0KSB7IHJldHVybiB9DQogICAg
			dmFyIGRpc3BsYXlUZXh0ID0gYnVpbGRlci5zcGxpdFNwYWNlcyA/IHNwbGl0U3BhY2VzKHRleHQs
			IGJ1aWxkZXIudHJhaWxpbmdTcGFjZSkgOiB0ZXh0Ow0KICAgIHZhciBzcGVjaWFsID0gYnVpbGRl
			ci5jbS5zdGF0ZS5zcGVjaWFsQ2hhcnMsIG11c3RXcmFwID0gZmFsc2U7DQogICAgdmFyIGNvbnRl
			bnQ7DQogICAgaWYgKCFzcGVjaWFsLnRlc3QodGV4dCkpIHsNCiAgICAgIGJ1aWxkZXIuY29sICs9
			IHRleHQubGVuZ3RoOw0KICAgICAgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRp
			c3BsYXlUZXh0KTsNCiAgICAgIGJ1aWxkZXIubWFwLnB1c2goYnVpbGRlci5wb3MsIGJ1aWxkZXIu
			cG9zICsgdGV4dC5sZW5ndGgsIGNvbnRlbnQpOw0KICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24g
			PCA5KSB7IG11c3RXcmFwID0gdHJ1ZTsgfQ0KICAgICAgYnVpbGRlci5wb3MgKz0gdGV4dC5sZW5n
			dGg7DQogICAgfSBlbHNlIHsNCiAgICAgIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVu
			dEZyYWdtZW50KCk7DQogICAgICB2YXIgcG9zID0gMDsNCiAgICAgIHdoaWxlICh0cnVlKSB7DQog
			ICAgICAgIHNwZWNpYWwubGFzdEluZGV4ID0gcG9zOw0KICAgICAgICB2YXIgbSA9IHNwZWNpYWwu
			ZXhlYyh0ZXh0KTsNCiAgICAgICAgdmFyIHNraXBwZWQgPSBtID8gbS5pbmRleCAtIHBvcyA6IHRl
			eHQubGVuZ3RoIC0gcG9zOw0KICAgICAgICBpZiAoc2tpcHBlZCkgew0KICAgICAgICAgIHZhciB0
			eHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkaXNwbGF5VGV4dC5zbGljZShwb3MsIHBvcyAr
			IHNraXBwZWQpKTsNCiAgICAgICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8IDkpIHsgY29udGVu
			dC5hcHBlbmRDaGlsZChlbHQoInNwYW4iLCBbdHh0XSkpOyB9DQogICAgICAgICAgZWxzZSB7IGNv
			bnRlbnQuYXBwZW5kQ2hpbGQodHh0KTsgfQ0KICAgICAgICAgIGJ1aWxkZXIubWFwLnB1c2goYnVp
			bGRlci5wb3MsIGJ1aWxkZXIucG9zICsgc2tpcHBlZCwgdHh0KTsNCiAgICAgICAgICBidWlsZGVy
			LmNvbCArPSBza2lwcGVkOw0KICAgICAgICAgIGJ1aWxkZXIucG9zICs9IHNraXBwZWQ7DQogICAg
			ICAgIH0NCiAgICAgICAgaWYgKCFtKSB7IGJyZWFrIH0NCiAgICAgICAgcG9zICs9IHNraXBwZWQg
			KyAxOw0KICAgICAgICB2YXIgdHh0JDEgPSAodm9pZCAwKTsNCiAgICAgICAgaWYgKG1bMF0gPT0g
			Ilx0Iikgew0KICAgICAgICAgIHZhciB0YWJTaXplID0gYnVpbGRlci5jbS5vcHRpb25zLnRhYlNp
			emUsIHRhYldpZHRoID0gdGFiU2l6ZSAtIGJ1aWxkZXIuY29sICUgdGFiU2l6ZTsNCiAgICAgICAg
			ICB0eHQkMSA9IGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWx0KCJzcGFuIiwgc3BhY2VTdHIodGFiV2lk
			dGgpLCAiY20tdGFiIikpOw0KICAgICAgICAgIHR4dCQxLnNldEF0dHJpYnV0ZSgicm9sZSIsICJw
			cmVzZW50YXRpb24iKTsNCiAgICAgICAgICB0eHQkMS5zZXRBdHRyaWJ1dGUoImNtLXRleHQiLCAi
			XHQiKTsNCiAgICAgICAgICBidWlsZGVyLmNvbCArPSB0YWJXaWR0aDsNCiAgICAgICAgfSBlbHNl
			IGlmIChtWzBdID09ICJcciIgfHwgbVswXSA9PSAiXG4iKSB7DQogICAgICAgICAgdHh0JDEgPSBj
			b250ZW50LmFwcGVuZENoaWxkKGVsdCgic3BhbiIsIG1bMF0gPT0gIlxyIiA/ICJcdTI0MGQiIDog
			Ilx1MjQyNCIsICJjbS1pbnZhbGlkY2hhciIpKTsNCiAgICAgICAgICB0eHQkMS5zZXRBdHRyaWJ1
			dGUoImNtLXRleHQiLCBtWzBdKTsNCiAgICAgICAgICBidWlsZGVyLmNvbCArPSAxOw0KICAgICAg
			ICB9IGVsc2Ugew0KICAgICAgICAgIHR4dCQxID0gYnVpbGRlci5jbS5vcHRpb25zLnNwZWNpYWxD
			aGFyUGxhY2Vob2xkZXIobVswXSk7DQogICAgICAgICAgdHh0JDEuc2V0QXR0cmlidXRlKCJjbS10
			ZXh0IiwgbVswXSk7DQogICAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5KSB7IGNvbnRl
			bnQuYXBwZW5kQ2hpbGQoZWx0KCJzcGFuIiwgW3R4dCQxXSkpOyB9DQogICAgICAgICAgZWxzZSB7
			IGNvbnRlbnQuYXBwZW5kQ2hpbGQodHh0JDEpOyB9DQogICAgICAgICAgYnVpbGRlci5jb2wgKz0g
			MTsNCiAgICAgICAgfQ0KICAgICAgICBidWlsZGVyLm1hcC5wdXNoKGJ1aWxkZXIucG9zLCBidWls
			ZGVyLnBvcyArIDEsIHR4dCQxKTsNCiAgICAgICAgYnVpbGRlci5wb3MrKzsNCiAgICAgIH0NCiAg
			ICB9DQogICAgYnVpbGRlci50cmFpbGluZ1NwYWNlID0gZGlzcGxheVRleHQuY2hhckNvZGVBdCh0
			ZXh0Lmxlbmd0aCAtIDEpID09IDMyOw0KICAgIGlmIChzdHlsZSB8fCBzdGFydFN0eWxlIHx8IGVu
			ZFN0eWxlIHx8IG11c3RXcmFwIHx8IGNzcykgew0KICAgICAgdmFyIGZ1bGxTdHlsZSA9IHN0eWxl
			IHx8ICIiOw0KICAgICAgaWYgKHN0YXJ0U3R5bGUpIHsgZnVsbFN0eWxlICs9IHN0YXJ0U3R5bGU7
			IH0NCiAgICAgIGlmIChlbmRTdHlsZSkgeyBmdWxsU3R5bGUgKz0gZW5kU3R5bGU7IH0NCiAgICAg
			IHZhciB0b2tlbiA9IGVsdCgic3BhbiIsIFtjb250ZW50XSwgZnVsbFN0eWxlLCBjc3MpOw0KICAg
			ICAgaWYgKGF0dHJpYnV0ZXMpIHsNCiAgICAgICAgZm9yICh2YXIgYXR0ciBpbiBhdHRyaWJ1dGVz
			KSB7IGlmIChhdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGF0dHIpICYmIGF0dHIgIT0gInN0eWxl
			IiAmJiBhdHRyICE9ICJjbGFzcyIpDQogICAgICAgICAgeyB0b2tlbi5zZXRBdHRyaWJ1dGUoYXR0
			ciwgYXR0cmlidXRlc1thdHRyXSk7IH0gfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIGJ1aWxkZXIu
			Y29udGVudC5hcHBlbmRDaGlsZCh0b2tlbikNCiAgICB9DQogICAgYnVpbGRlci5jb250ZW50LmFw
			cGVuZENoaWxkKGNvbnRlbnQpOw0KICB9DQoNCiAgLy8gQ2hhbmdlIHNvbWUgc3BhY2VzIHRvIE5C
			U1AgdG8gcHJldmVudCB0aGUgYnJvd3NlciBmcm9tIGNvbGxhcHNpbmcNCiAgLy8gdHJhaWxpbmcg
			c3BhY2VzIGF0IHRoZSBlbmQgb2YgYSBsaW5lIHdoZW4gcmVuZGVyaW5nIHRleHQgKGlzc3VlICMx
			MzYyKS4NCiAgZnVuY3Rpb24gc3BsaXRTcGFjZXModGV4dCwgdHJhaWxpbmdCZWZvcmUpIHsNCiAg
			ICBpZiAodGV4dC5sZW5ndGggPiAxICYmICEvICAvLnRlc3QodGV4dCkpIHsgcmV0dXJuIHRleHQg
			fQ0KICAgIHZhciBzcGFjZUJlZm9yZSA9IHRyYWlsaW5nQmVmb3JlLCByZXN1bHQgPSAiIjsNCiAg
			ICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHsNCiAgICAgIHZhciBjaCA9
			IHRleHQuY2hhckF0KGkpOw0KICAgICAgaWYgKGNoID09ICIgIiAmJiBzcGFjZUJlZm9yZSAmJiAo
			aSA9PSB0ZXh0Lmxlbmd0aCAtIDEgfHwgdGV4dC5jaGFyQ29kZUF0KGkgKyAxKSA9PSAzMikpDQog
			ICAgICAgIHsgY2ggPSAiXHUwMGEwIjsgfQ0KICAgICAgcmVzdWx0ICs9IGNoOw0KICAgICAgc3Bh
			Y2VCZWZvcmUgPSBjaCA9PSAiICI7DQogICAgfQ0KICAgIHJldHVybiByZXN1bHQNCiAgfQ0KDQog
			IC8vIFdvcmsgYXJvdW5kIG5vbnNlbnNlIGRpbWVuc2lvbnMgYmVpbmcgcmVwb3J0ZWQgZm9yIHN0
			cmV0Y2hlcyBvZg0KICAvLyByaWdodC10by1sZWZ0IHRleHQuDQogIGZ1bmN0aW9uIGJ1aWxkVG9r
			ZW5CYWRCaWRpKGlubmVyLCBvcmRlcikgew0KICAgIHJldHVybiBmdW5jdGlvbiAoYnVpbGRlciwg
			dGV4dCwgc3R5bGUsIHN0YXJ0U3R5bGUsIGVuZFN0eWxlLCBjc3MsIGF0dHJpYnV0ZXMpIHsNCiAg
			ICAgIHN0eWxlID0gc3R5bGUgPyBzdHlsZSArICIgY20tZm9yY2UtYm9yZGVyIiA6ICJjbS1mb3Jj
			ZS1ib3JkZXIiOw0KICAgICAgdmFyIHN0YXJ0ID0gYnVpbGRlci5wb3MsIGVuZCA9IHN0YXJ0ICsg
			dGV4dC5sZW5ndGg7DQogICAgICBmb3IgKDs7KSB7DQogICAgICAgIC8vIEZpbmQgdGhlIHBhcnQg
			dGhhdCBvdmVybGFwcyB3aXRoIHRoZSBzdGFydCBvZiB0aGlzIHRleHQNCiAgICAgICAgdmFyIHBh
			cnQgPSAodm9pZCAwKTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcmRlci5sZW5ndGg7
			IGkrKykgew0KICAgICAgICAgIHBhcnQgPSBvcmRlcltpXTsNCiAgICAgICAgICBpZiAocGFydC50
			byA+IHN0YXJ0ICYmIHBhcnQuZnJvbSA8PSBzdGFydCkgeyBicmVhayB9DQogICAgICAgIH0NCiAg
			ICAgICAgaWYgKHBhcnQudG8gPj0gZW5kKSB7IHJldHVybiBpbm5lcihidWlsZGVyLCB0ZXh0LCBz
			dHlsZSwgc3RhcnRTdHlsZSwgZW5kU3R5bGUsIGNzcywgYXR0cmlidXRlcykgfQ0KICAgICAgICBp
			bm5lcihidWlsZGVyLCB0ZXh0LnNsaWNlKDAsIHBhcnQudG8gLSBzdGFydCksIHN0eWxlLCBzdGFy
			dFN0eWxlLCBudWxsLCBjc3MsIGF0dHJpYnV0ZXMpOw0KICAgICAgICBzdGFydFN0eWxlID0gbnVs
			bDsNCiAgICAgICAgdGV4dCA9IHRleHQuc2xpY2UocGFydC50byAtIHN0YXJ0KTsNCiAgICAgICAg
			c3RhcnQgPSBwYXJ0LnRvOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIGJ1aWxk
			Q29sbGFwc2VkU3BhbihidWlsZGVyLCBzaXplLCBtYXJrZXIsIGlnbm9yZVdpZGdldCkgew0KICAg
			IHZhciB3aWRnZXQgPSAhaWdub3JlV2lkZ2V0ICYmIG1hcmtlci53aWRnZXROb2RlOw0KICAgIGlm
			ICh3aWRnZXQpIHsgYnVpbGRlci5tYXAucHVzaChidWlsZGVyLnBvcywgYnVpbGRlci5wb3MgKyBz
			aXplLCB3aWRnZXQpOyB9DQogICAgaWYgKCFpZ25vcmVXaWRnZXQgJiYgYnVpbGRlci5jbS5kaXNw
			bGF5LmlucHV0Lm5lZWRzQ29udGVudEF0dHJpYnV0ZSkgew0KICAgICAgaWYgKCF3aWRnZXQpDQog
			ICAgICAgIHsgd2lkZ2V0ID0gYnVpbGRlci5jb250ZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNy
			ZWF0ZUVsZW1lbnQoInNwYW4iKSk7IH0NCiAgICAgIHdpZGdldC5zZXRBdHRyaWJ1dGUoImNtLW1h
			cmtlciIsIG1hcmtlci5pZCk7DQogICAgfQ0KICAgIGlmICh3aWRnZXQpIHsNCiAgICAgIGJ1aWxk
			ZXIuY20uZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKHdpZGdldCk7DQogICAgICBidWlsZGVy
			LmNvbnRlbnQuYXBwZW5kQ2hpbGQod2lkZ2V0KTsNCiAgICB9DQogICAgYnVpbGRlci5wb3MgKz0g
			c2l6ZTsNCiAgICBidWlsZGVyLnRyYWlsaW5nU3BhY2UgPSBmYWxzZTsNCiAgfQ0KDQogIC8vIE91
			dHB1dHMgYSBudW1iZXIgb2Ygc3BhbnMgdG8gbWFrZSB1cCBhIGxpbmUsIHRha2luZyBoaWdobGln
			aHRpbmcNCiAgLy8gYW5kIG1hcmtlZCB0ZXh0IGludG8gYWNjb3VudC4NCiAgZnVuY3Rpb24gaW5z
			ZXJ0TGluZUNvbnRlbnQobGluZSwgYnVpbGRlciwgc3R5bGVzKSB7DQogICAgdmFyIHNwYW5zID0g
			bGluZS5tYXJrZWRTcGFucywgYWxsVGV4dCA9IGxpbmUudGV4dCwgYXQgPSAwOw0KICAgIGlmICgh
			c3BhbnMpIHsNCiAgICAgIGZvciAodmFyIGkkMSA9IDE7IGkkMSA8IHN0eWxlcy5sZW5ndGg7IGkk
			MSs9MikNCiAgICAgICAgeyBidWlsZGVyLmFkZFRva2VuKGJ1aWxkZXIsIGFsbFRleHQuc2xpY2Uo
			YXQsIGF0ID0gc3R5bGVzW2kkMV0pLCBpbnRlcnByZXRUb2tlblN0eWxlKHN0eWxlc1tpJDErMV0s
			IGJ1aWxkZXIuY20ub3B0aW9ucykpOyB9DQogICAgICByZXR1cm4NCiAgICB9DQoNCiAgICB2YXIg
			bGVuID0gYWxsVGV4dC5sZW5ndGgsIHBvcyA9IDAsIGkgPSAxLCB0ZXh0ID0gIiIsIHN0eWxlLCBj
			c3M7DQogICAgdmFyIG5leHRDaGFuZ2UgPSAwLCBzcGFuU3R5bGUsIHNwYW5FbmRTdHlsZSwgc3Bh
			blN0YXJ0U3R5bGUsIGNvbGxhcHNlZCwgYXR0cmlidXRlczsNCiAgICBmb3IgKDs7KSB7DQogICAg
			ICBpZiAobmV4dENoYW5nZSA9PSBwb3MpIHsgLy8gVXBkYXRlIGN1cnJlbnQgbWFya2VyIHNldA0K
			ICAgICAgICBzcGFuU3R5bGUgPSBzcGFuRW5kU3R5bGUgPSBzcGFuU3RhcnRTdHlsZSA9IGNzcyA9
			ICIiOw0KICAgICAgICBhdHRyaWJ1dGVzID0gbnVsbDsNCiAgICAgICAgY29sbGFwc2VkID0gbnVs
			bDsgbmV4dENoYW5nZSA9IEluZmluaXR5Ow0KICAgICAgICB2YXIgZm91bmRCb29rbWFya3MgPSBb
			XSwgZW5kU3R5bGVzID0gKHZvaWQgMCk7DQogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3Bh
			bnMubGVuZ3RoOyArK2opIHsNCiAgICAgICAgICB2YXIgc3AgPSBzcGFuc1tqXSwgbSA9IHNwLm1h
			cmtlcjsNCiAgICAgICAgICBpZiAobS50eXBlID09ICJib29rbWFyayIgJiYgc3AuZnJvbSA9PSBw
			b3MgJiYgbS53aWRnZXROb2RlKSB7DQogICAgICAgICAgICBmb3VuZEJvb2ttYXJrcy5wdXNoKG0p
			Ow0KICAgICAgICAgIH0gZWxzZSBpZiAoc3AuZnJvbSA8PSBwb3MgJiYgKHNwLnRvID09IG51bGwg
			fHwgc3AudG8gPiBwb3MgfHwgbS5jb2xsYXBzZWQgJiYgc3AudG8gPT0gcG9zICYmIHNwLmZyb20g
			PT0gcG9zKSkgew0KICAgICAgICAgICAgaWYgKHNwLnRvICE9IG51bGwgJiYgc3AudG8gIT0gcG9z
			ICYmIG5leHRDaGFuZ2UgPiBzcC50bykgew0KICAgICAgICAgICAgICBuZXh0Q2hhbmdlID0gc3Au
			dG87DQogICAgICAgICAgICAgIHNwYW5FbmRTdHlsZSA9ICIiOw0KICAgICAgICAgICAgfQ0KICAg
			ICAgICAgICAgaWYgKG0uY2xhc3NOYW1lKSB7IHNwYW5TdHlsZSArPSAiICIgKyBtLmNsYXNzTmFt
			ZTsgfQ0KICAgICAgICAgICAgaWYgKG0uY3NzKSB7IGNzcyA9IChjc3MgPyBjc3MgKyAiOyIgOiAi
			IikgKyBtLmNzczsgfQ0KICAgICAgICAgICAgaWYgKG0uc3RhcnRTdHlsZSAmJiBzcC5mcm9tID09
			IHBvcykgeyBzcGFuU3RhcnRTdHlsZSArPSAiICIgKyBtLnN0YXJ0U3R5bGU7IH0NCiAgICAgICAg
			ICAgIGlmIChtLmVuZFN0eWxlICYmIHNwLnRvID09IG5leHRDaGFuZ2UpIHsgKGVuZFN0eWxlcyB8
			fCAoZW5kU3R5bGVzID0gW10pKS5wdXNoKG0uZW5kU3R5bGUsIHNwLnRvKTsgfQ0KICAgICAgICAg
			ICAgLy8gc3VwcG9ydCBmb3IgdGhlIG9sZCB0aXRsZSBwcm9wZXJ0eQ0KICAgICAgICAgICAgLy8g
			aHR0cHM6Ly9naXRodWIuY29tL2NvZGVtaXJyb3IvQ29kZU1pcnJvci9wdWxsLzU2NzMNCiAgICAg
			ICAgICAgIGlmIChtLnRpdGxlKSB7IChhdHRyaWJ1dGVzIHx8IChhdHRyaWJ1dGVzID0ge30pKS50
			aXRsZSA9IG0udGl0bGU7IH0NCiAgICAgICAgICAgIGlmIChtLmF0dHJpYnV0ZXMpIHsNCiAgICAg
			ICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiBtLmF0dHJpYnV0ZXMpDQogICAgICAgICAgICAgICAg
			eyAoYXR0cmlidXRlcyB8fCAoYXR0cmlidXRlcyA9IHt9KSlbYXR0cl0gPSBtLmF0dHJpYnV0ZXNb
			YXR0cl07IH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChtLmNvbGxhcHNlZCAmJiAo
			IWNvbGxhcHNlZCB8fCBjb21wYXJlQ29sbGFwc2VkTWFya2Vycyhjb2xsYXBzZWQubWFya2VyLCBt
			KSA8IDApKQ0KICAgICAgICAgICAgICB7IGNvbGxhcHNlZCA9IHNwOyB9DQogICAgICAgICAgfSBl
			bHNlIGlmIChzcC5mcm9tID4gcG9zICYmIG5leHRDaGFuZ2UgPiBzcC5mcm9tKSB7DQogICAgICAg
			ICAgICBuZXh0Q2hhbmdlID0gc3AuZnJvbTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAg
			ICAgaWYgKGVuZFN0eWxlcykgeyBmb3IgKHZhciBqJDEgPSAwOyBqJDEgPCBlbmRTdHlsZXMubGVu
			Z3RoOyBqJDEgKz0gMikNCiAgICAgICAgICB7IGlmIChlbmRTdHlsZXNbaiQxICsgMV0gPT0gbmV4
			dENoYW5nZSkgeyBzcGFuRW5kU3R5bGUgKz0gIiAiICsgZW5kU3R5bGVzW2okMV07IH0gfSB9DQoN
			CiAgICAgICAgaWYgKCFjb2xsYXBzZWQgfHwgY29sbGFwc2VkLmZyb20gPT0gcG9zKSB7IGZvciAo
			dmFyIGokMiA9IDA7IGokMiA8IGZvdW5kQm9va21hcmtzLmxlbmd0aDsgKytqJDIpDQogICAgICAg
			ICAgeyBidWlsZENvbGxhcHNlZFNwYW4oYnVpbGRlciwgMCwgZm91bmRCb29rbWFya3NbaiQyXSk7
			IH0gfQ0KICAgICAgICBpZiAoY29sbGFwc2VkICYmIChjb2xsYXBzZWQuZnJvbSB8fCAwKSA9PSBw
			b3MpIHsNCiAgICAgICAgICBidWlsZENvbGxhcHNlZFNwYW4oYnVpbGRlciwgKGNvbGxhcHNlZC50
			byA9PSBudWxsID8gbGVuICsgMSA6IGNvbGxhcHNlZC50bykgLSBwb3MsDQogICAgICAgICAgICAg
			ICAgICAgICAgICAgICAgIGNvbGxhcHNlZC5tYXJrZXIsIGNvbGxhcHNlZC5mcm9tID09IG51bGwp
			Ow0KICAgICAgICAgIGlmIChjb2xsYXBzZWQudG8gPT0gbnVsbCkgeyByZXR1cm4gfQ0KICAgICAg
			ICAgIGlmIChjb2xsYXBzZWQudG8gPT0gcG9zKSB7IGNvbGxhcHNlZCA9IGZhbHNlOyB9DQogICAg
			ICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChwb3MgPj0gbGVuKSB7IGJyZWFrIH0NCg0KICAgICAg
			dmFyIHVwdG8gPSBNYXRoLm1pbihsZW4sIG5leHRDaGFuZ2UpOw0KICAgICAgd2hpbGUgKHRydWUp
			IHsNCiAgICAgICAgaWYgKHRleHQpIHsNCiAgICAgICAgICB2YXIgZW5kID0gcG9zICsgdGV4dC5s
			ZW5ndGg7DQogICAgICAgICAgaWYgKCFjb2xsYXBzZWQpIHsNCiAgICAgICAgICAgIHZhciB0b2tl
			blRleHQgPSBlbmQgPiB1cHRvID8gdGV4dC5zbGljZSgwLCB1cHRvIC0gcG9zKSA6IHRleHQ7DQog
			ICAgICAgICAgICBidWlsZGVyLmFkZFRva2VuKGJ1aWxkZXIsIHRva2VuVGV4dCwgc3R5bGUgPyBz
			dHlsZSArIHNwYW5TdHlsZSA6IHNwYW5TdHlsZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAg
			ICAgc3BhblN0YXJ0U3R5bGUsIHBvcyArIHRva2VuVGV4dC5sZW5ndGggPT0gbmV4dENoYW5nZSA/
			IHNwYW5FbmRTdHlsZSA6ICIiLCBjc3MsIGF0dHJpYnV0ZXMpOw0KICAgICAgICAgIH0NCiAgICAg
			ICAgICBpZiAoZW5kID49IHVwdG8pIHt0ZXh0ID0gdGV4dC5zbGljZSh1cHRvIC0gcG9zKTsgcG9z
			ID0gdXB0bzsgYnJlYWt9DQogICAgICAgICAgcG9zID0gZW5kOw0KICAgICAgICAgIHNwYW5TdGFy
			dFN0eWxlID0gIiI7DQogICAgICAgIH0NCiAgICAgICAgdGV4dCA9IGFsbFRleHQuc2xpY2UoYXQs
			IGF0ID0gc3R5bGVzW2krK10pOw0KICAgICAgICBzdHlsZSA9IGludGVycHJldFRva2VuU3R5bGUo
			c3R5bGVzW2krK10sIGJ1aWxkZXIuY20ub3B0aW9ucyk7DQogICAgICB9DQogICAgfQ0KICB9DQoN
			Cg0KICAvLyBUaGVzZSBvYmplY3RzIGFyZSB1c2VkIHRvIHJlcHJlc2VudCB0aGUgdmlzaWJsZSAo
			Y3VycmVudGx5IGRyYXduKQ0KICAvLyBwYXJ0IG9mIHRoZSBkb2N1bWVudC4gQSBMaW5lVmlldyBt
			YXkgY29ycmVzcG9uZCB0byBtdWx0aXBsZQ0KICAvLyBsb2dpY2FsIGxpbmVzLCBpZiB0aG9zZSBh
			cmUgY29ubmVjdGVkIGJ5IGNvbGxhcHNlZCByYW5nZXMuDQogIGZ1bmN0aW9uIExpbmVWaWV3KGRv
			YywgbGluZSwgbGluZU4pIHsNCiAgICAvLyBUaGUgc3RhcnRpbmcgbGluZQ0KICAgIHRoaXMubGlu
			ZSA9IGxpbmU7DQogICAgLy8gQ29udGludWluZyBsaW5lcywgaWYgYW55DQogICAgdGhpcy5yZXN0
			ID0gdmlzdWFsTGluZUNvbnRpbnVlZChsaW5lKTsNCiAgICAvLyBOdW1iZXIgb2YgbG9naWNhbCBs
			aW5lcyBpbiB0aGlzIHZpc3VhbCBsaW5lDQogICAgdGhpcy5zaXplID0gdGhpcy5yZXN0ID8gbGlu
			ZU5vKGxzdCh0aGlzLnJlc3QpKSAtIGxpbmVOICsgMSA6IDE7DQogICAgdGhpcy5ub2RlID0gdGhp
			cy50ZXh0ID0gbnVsbDsNCiAgICB0aGlzLmhpZGRlbiA9IGxpbmVJc0hpZGRlbihkb2MsIGxpbmUp
			Ow0KICB9DQoNCiAgLy8gQ3JlYXRlIGEgcmFuZ2Ugb2YgTGluZVZpZXcgb2JqZWN0cyBmb3IgdGhl
			IGdpdmVuIGxpbmVzLg0KICBmdW5jdGlvbiBidWlsZFZpZXdBcnJheShjbSwgZnJvbSwgdG8pIHsN
			CiAgICB2YXIgYXJyYXkgPSBbXSwgbmV4dFBvczsNCiAgICBmb3IgKHZhciBwb3MgPSBmcm9tOyBw
			b3MgPCB0bzsgcG9zID0gbmV4dFBvcykgew0KICAgICAgdmFyIHZpZXcgPSBuZXcgTGluZVZpZXco
			Y20uZG9jLCBnZXRMaW5lKGNtLmRvYywgcG9zKSwgcG9zKTsNCiAgICAgIG5leHRQb3MgPSBwb3Mg
			KyB2aWV3LnNpemU7DQogICAgICBhcnJheS5wdXNoKHZpZXcpOw0KICAgIH0NCiAgICByZXR1cm4g
			YXJyYXkNCiAgfQ0KDQogIHZhciBvcGVyYXRpb25Hcm91cCA9IG51bGw7DQoNCiAgZnVuY3Rpb24g
			cHVzaE9wZXJhdGlvbihvcCkgew0KICAgIGlmIChvcGVyYXRpb25Hcm91cCkgew0KICAgICAgb3Bl
			cmF0aW9uR3JvdXAub3BzLnB1c2gob3ApOw0KICAgIH0gZWxzZSB7DQogICAgICBvcC5vd25zR3Jv
			dXAgPSBvcGVyYXRpb25Hcm91cCA9IHsNCiAgICAgICAgb3BzOiBbb3BdLA0KICAgICAgICBkZWxh
			eWVkQ2FsbGJhY2tzOiBbXQ0KICAgICAgfTsNCiAgICB9DQogIH0NCg0KICBmdW5jdGlvbiBmaXJl
			Q2FsbGJhY2tzRm9yT3BzKGdyb3VwKSB7DQogICAgLy8gQ2FsbHMgZGVsYXllZCBjYWxsYmFja3Mg
			YW5kIGN1cnNvckFjdGl2aXR5IGhhbmRsZXJzIHVudGlsIG5vDQogICAgLy8gbmV3IG9uZXMgYXBw
			ZWFyDQogICAgdmFyIGNhbGxiYWNrcyA9IGdyb3VwLmRlbGF5ZWRDYWxsYmFja3MsIGkgPSAwOw0K
			ICAgIGRvIHsNCiAgICAgIGZvciAoOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKQ0KICAgICAg
			ICB7IGNhbGxiYWNrc1tpXS5jYWxsKG51bGwpOyB9DQogICAgICBmb3IgKHZhciBqID0gMDsgaiA8
			IGdyb3VwLm9wcy5sZW5ndGg7IGorKykgew0KICAgICAgICB2YXIgb3AgPSBncm91cC5vcHNbal07
			DQogICAgICAgIGlmIChvcC5jdXJzb3JBY3Rpdml0eUhhbmRsZXJzKQ0KICAgICAgICAgIHsgd2hp
			bGUgKG9wLmN1cnNvckFjdGl2aXR5Q2FsbGVkIDwgb3AuY3Vyc29yQWN0aXZpdHlIYW5kbGVycy5s
			ZW5ndGgpDQogICAgICAgICAgICB7IG9wLmN1cnNvckFjdGl2aXR5SGFuZGxlcnNbb3AuY3Vyc29y
			QWN0aXZpdHlDYWxsZWQrK10uY2FsbChudWxsLCBvcC5jbSk7IH0gfQ0KICAgICAgfQ0KICAgIH0g
			d2hpbGUgKGkgPCBjYWxsYmFja3MubGVuZ3RoKQ0KICB9DQoNCiAgZnVuY3Rpb24gZmluaXNoT3Bl
			cmF0aW9uKG9wLCBlbmRDYikgew0KICAgIHZhciBncm91cCA9IG9wLm93bnNHcm91cDsNCiAgICBp
			ZiAoIWdyb3VwKSB7IHJldHVybiB9DQoNCiAgICB0cnkgeyBmaXJlQ2FsbGJhY2tzRm9yT3BzKGdy
			b3VwKTsgfQ0KICAgIGZpbmFsbHkgew0KICAgICAgb3BlcmF0aW9uR3JvdXAgPSBudWxsOw0KICAg
			ICAgZW5kQ2IoZ3JvdXApOw0KICAgIH0NCiAgfQ0KDQogIHZhciBvcnBoYW5EZWxheWVkQ2FsbGJh
			Y2tzID0gbnVsbDsNCg0KICAvLyBPZnRlbiwgd2Ugd2FudCB0byBzaWduYWwgZXZlbnRzIGF0IGEg
			cG9pbnQgd2hlcmUgd2UgYXJlIGluIHRoZQ0KICAvLyBtaWRkbGUgb2Ygc29tZSB3b3JrLCBidXQg
			ZG9uJ3Qgd2FudCB0aGUgaGFuZGxlciB0byBzdGFydCBjYWxsaW5nDQogIC8vIG90aGVyIG1ldGhv
			ZHMgb24gdGhlIGVkaXRvciwgd2hpY2ggbWlnaHQgYmUgaW4gYW4gaW5jb25zaXN0ZW50DQogIC8v
			IHN0YXRlIG9yIHNpbXBseSBub3QgZXhwZWN0IGFueSBvdGhlciBldmVudHMgdG8gaGFwcGVuLg0K
			ICAvLyBzaWduYWxMYXRlciBsb29rcyB3aGV0aGVyIHRoZXJlIGFyZSBhbnkgaGFuZGxlcnMsIGFu
			ZCBzY2hlZHVsZXMNCiAgLy8gdGhlbSB0byBiZSBleGVjdXRlZCB3aGVuIHRoZSBsYXN0IG9wZXJh
			dGlvbiBlbmRzLCBvciwgaWYgbm8NCiAgLy8gb3BlcmF0aW9uIGlzIGFjdGl2ZSwgd2hlbiBhIHRp
			bWVvdXQgZmlyZXMuDQogIGZ1bmN0aW9uIHNpZ25hbExhdGVyKGVtaXR0ZXIsIHR5cGUgLyosIHZh
			bHVlcy4uLiovKSB7DQogICAgdmFyIGFyciA9IGdldEhhbmRsZXJzKGVtaXR0ZXIsIHR5cGUpOw0K
			ICAgIGlmICghYXJyLmxlbmd0aCkgeyByZXR1cm4gfQ0KICAgIHZhciBhcmdzID0gQXJyYXkucHJv
			dG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSwgbGlzdDsNCiAgICBpZiAob3BlcmF0aW9u
			R3JvdXApIHsNCiAgICAgIGxpc3QgPSBvcGVyYXRpb25Hcm91cC5kZWxheWVkQ2FsbGJhY2tzOw0K
			ICAgIH0gZWxzZSBpZiAob3JwaGFuRGVsYXllZENhbGxiYWNrcykgew0KICAgICAgbGlzdCA9IG9y
			cGhhbkRlbGF5ZWRDYWxsYmFja3M7DQogICAgfSBlbHNlIHsNCiAgICAgIGxpc3QgPSBvcnBoYW5E
			ZWxheWVkQ2FsbGJhY2tzID0gW107DQogICAgICBzZXRUaW1lb3V0KGZpcmVPcnBoYW5EZWxheWVk
			LCAwKTsNCiAgICB9DQogICAgdmFyIGxvb3AgPSBmdW5jdGlvbiAoIGkgKSB7DQogICAgICBsaXN0
			LnB1c2goZnVuY3Rpb24gKCkgeyByZXR1cm4gYXJyW2ldLmFwcGx5KG51bGwsIGFyZ3MpOyB9KTsN
			CiAgICB9Ow0KDQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpDQogICAg
			ICBsb29wKCBpICk7DQogIH0NCg0KICBmdW5jdGlvbiBmaXJlT3JwaGFuRGVsYXllZCgpIHsNCiAg
			ICB2YXIgZGVsYXllZCA9IG9ycGhhbkRlbGF5ZWRDYWxsYmFja3M7DQogICAgb3JwaGFuRGVsYXll
			ZENhbGxiYWNrcyA9IG51bGw7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWxheWVkLmxlbmd0
			aDsgKytpKSB7IGRlbGF5ZWRbaV0oKTsgfQ0KICB9DQoNCiAgLy8gV2hlbiBhbiBhc3BlY3Qgb2Yg
			YSBsaW5lIGNoYW5nZXMsIGEgc3RyaW5nIGlzIGFkZGVkIHRvDQogIC8vIGxpbmVWaWV3LmNoYW5n
			ZXMuIFRoaXMgdXBkYXRlcyB0aGUgcmVsZXZhbnQgcGFydCBvZiB0aGUgbGluZSdzDQogIC8vIERP
			TSBzdHJ1Y3R1cmUuDQogIGZ1bmN0aW9uIHVwZGF0ZUxpbmVGb3JDaGFuZ2VzKGNtLCBsaW5lVmll
			dywgbGluZU4sIGRpbXMpIHsNCiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxpbmVWaWV3LmNoYW5n
			ZXMubGVuZ3RoOyBqKyspIHsNCiAgICAgIHZhciB0eXBlID0gbGluZVZpZXcuY2hhbmdlc1tqXTsN
			CiAgICAgIGlmICh0eXBlID09ICJ0ZXh0IikgeyB1cGRhdGVMaW5lVGV4dChjbSwgbGluZVZpZXcp
			OyB9DQogICAgICBlbHNlIGlmICh0eXBlID09ICJndXR0ZXIiKSB7IHVwZGF0ZUxpbmVHdXR0ZXIo
			Y20sIGxpbmVWaWV3LCBsaW5lTiwgZGltcyk7IH0NCiAgICAgIGVsc2UgaWYgKHR5cGUgPT0gImNs
			YXNzIikgeyB1cGRhdGVMaW5lQ2xhc3NlcyhjbSwgbGluZVZpZXcpOyB9DQogICAgICBlbHNlIGlm
			ICh0eXBlID09ICJ3aWRnZXQiKSB7IHVwZGF0ZUxpbmVXaWRnZXRzKGNtLCBsaW5lVmlldywgZGlt
			cyk7IH0NCiAgICB9DQogICAgbGluZVZpZXcuY2hhbmdlcyA9IG51bGw7DQogIH0NCg0KICAvLyBM
			aW5lcyB3aXRoIGd1dHRlciBlbGVtZW50cywgd2lkZ2V0cyBvciBhIGJhY2tncm91bmQgY2xhc3Mg
			bmVlZCB0bw0KICAvLyBiZSB3cmFwcGVkLCBhbmQgaGF2ZSB0aGUgZXh0cmEgZWxlbWVudHMgYWRk
			ZWQgdG8gdGhlIHdyYXBwZXIgZGl2DQogIGZ1bmN0aW9uIGVuc3VyZUxpbmVXcmFwcGVkKGxpbmVW
			aWV3KSB7DQogICAgaWYgKGxpbmVWaWV3Lm5vZGUgPT0gbGluZVZpZXcudGV4dCkgew0KICAgICAg
			bGluZVZpZXcubm9kZSA9IGVsdCgiZGl2IiwgbnVsbCwgbnVsbCwgInBvc2l0aW9uOiByZWxhdGl2
			ZSIpOw0KICAgICAgaWYgKGxpbmVWaWV3LnRleHQucGFyZW50Tm9kZSkNCiAgICAgICAgeyBsaW5l
			Vmlldy50ZXh0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGxpbmVWaWV3Lm5vZGUsIGxpbmVWaWV3
			LnRleHQpOyB9DQogICAgICBsaW5lVmlldy5ub2RlLmFwcGVuZENoaWxkKGxpbmVWaWV3LnRleHQp
			Ow0KICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSB7IGxpbmVWaWV3Lm5vZGUuc3R5bGUu
			ekluZGV4ID0gMjsgfQ0KICAgIH0NCiAgICByZXR1cm4gbGluZVZpZXcubm9kZQ0KICB9DQoNCiAg
			ZnVuY3Rpb24gdXBkYXRlTGluZUJhY2tncm91bmQoY20sIGxpbmVWaWV3KSB7DQogICAgdmFyIGNs
			cyA9IGxpbmVWaWV3LmJnQ2xhc3MgPyBsaW5lVmlldy5iZ0NsYXNzICsgIiAiICsgKGxpbmVWaWV3
			LmxpbmUuYmdDbGFzcyB8fCAiIikgOiBsaW5lVmlldy5saW5lLmJnQ2xhc3M7DQogICAgaWYgKGNs
			cykgeyBjbHMgKz0gIiBDb2RlTWlycm9yLWxpbmViYWNrZ3JvdW5kIjsgfQ0KICAgIGlmIChsaW5l
			Vmlldy5iYWNrZ3JvdW5kKSB7DQogICAgICBpZiAoY2xzKSB7IGxpbmVWaWV3LmJhY2tncm91bmQu
			Y2xhc3NOYW1lID0gY2xzOyB9DQogICAgICBlbHNlIHsgbGluZVZpZXcuYmFja2dyb3VuZC5wYXJl
			bnROb2RlLnJlbW92ZUNoaWxkKGxpbmVWaWV3LmJhY2tncm91bmQpOyBsaW5lVmlldy5iYWNrZ3Jv
			dW5kID0gbnVsbDsgfQ0KICAgIH0gZWxzZSBpZiAoY2xzKSB7DQogICAgICB2YXIgd3JhcCA9IGVu
			c3VyZUxpbmVXcmFwcGVkKGxpbmVWaWV3KTsNCiAgICAgIGxpbmVWaWV3LmJhY2tncm91bmQgPSB3
			cmFwLmluc2VydEJlZm9yZShlbHQoImRpdiIsIG51bGwsIGNscyksIHdyYXAuZmlyc3RDaGlsZCk7
			DQogICAgICBjbS5kaXNwbGF5LmlucHV0LnNldFVuZWRpdGFibGUobGluZVZpZXcuYmFja2dyb3Vu
			ZCk7DQogICAgfQ0KICB9DQoNCiAgLy8gV3JhcHBlciBhcm91bmQgYnVpbGRMaW5lQ29udGVudCB3
			aGljaCB3aWxsIHJldXNlIHRoZSBzdHJ1Y3R1cmUNCiAgLy8gaW4gZGlzcGxheS5leHRlcm5hbE1l
			YXN1cmVkIHdoZW4gcG9zc2libGUuDQogIGZ1bmN0aW9uIGdldExpbmVDb250ZW50KGNtLCBsaW5l
			Vmlldykgew0KICAgIHZhciBleHQgPSBjbS5kaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQ7DQogICAg
			aWYgKGV4dCAmJiBleHQubGluZSA9PSBsaW5lVmlldy5saW5lKSB7DQogICAgICBjbS5kaXNwbGF5
			LmV4dGVybmFsTWVhc3VyZWQgPSBudWxsOw0KICAgICAgbGluZVZpZXcubWVhc3VyZSA9IGV4dC5t
			ZWFzdXJlOw0KICAgICAgcmV0dXJuIGV4dC5idWlsdA0KICAgIH0NCiAgICByZXR1cm4gYnVpbGRM
			aW5lQ29udGVudChjbSwgbGluZVZpZXcpDQogIH0NCg0KICAvLyBSZWRyYXcgdGhlIGxpbmUncyB0
			ZXh0LiBJbnRlcmFjdHMgd2l0aCB0aGUgYmFja2dyb3VuZCBhbmQgdGV4dA0KICAvLyBjbGFzc2Vz
			IGJlY2F1c2UgdGhlIG1vZGUgbWF5IG91dHB1dCB0b2tlbnMgdGhhdCBpbmZsdWVuY2UgdGhlc2UN
			CiAgLy8gY2xhc3Nlcy4NCiAgZnVuY3Rpb24gdXBkYXRlTGluZVRleHQoY20sIGxpbmVWaWV3KSB7
			DQogICAgdmFyIGNscyA9IGxpbmVWaWV3LnRleHQuY2xhc3NOYW1lOw0KICAgIHZhciBidWlsdCA9
			IGdldExpbmVDb250ZW50KGNtLCBsaW5lVmlldyk7DQogICAgaWYgKGxpbmVWaWV3LnRleHQgPT0g
			bGluZVZpZXcubm9kZSkgeyBsaW5lVmlldy5ub2RlID0gYnVpbHQucHJlOyB9DQogICAgbGluZVZp
			ZXcudGV4dC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChidWlsdC5wcmUsIGxpbmVWaWV3LnRleHQp
			Ow0KICAgIGxpbmVWaWV3LnRleHQgPSBidWlsdC5wcmU7DQogICAgaWYgKGJ1aWx0LmJnQ2xhc3Mg
			IT0gbGluZVZpZXcuYmdDbGFzcyB8fCBidWlsdC50ZXh0Q2xhc3MgIT0gbGluZVZpZXcudGV4dENs
			YXNzKSB7DQogICAgICBsaW5lVmlldy5iZ0NsYXNzID0gYnVpbHQuYmdDbGFzczsNCiAgICAgIGxp
			bmVWaWV3LnRleHRDbGFzcyA9IGJ1aWx0LnRleHRDbGFzczsNCiAgICAgIHVwZGF0ZUxpbmVDbGFz
			c2VzKGNtLCBsaW5lVmlldyk7DQogICAgfSBlbHNlIGlmIChjbHMpIHsNCiAgICAgIGxpbmVWaWV3
			LnRleHQuY2xhc3NOYW1lID0gY2xzOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHVwZGF0ZUxp
			bmVDbGFzc2VzKGNtLCBsaW5lVmlldykgew0KICAgIHVwZGF0ZUxpbmVCYWNrZ3JvdW5kKGNtLCBs
			aW5lVmlldyk7DQogICAgaWYgKGxpbmVWaWV3LmxpbmUud3JhcENsYXNzKQ0KICAgICAgeyBlbnN1
			cmVMaW5lV3JhcHBlZChsaW5lVmlldykuY2xhc3NOYW1lID0gbGluZVZpZXcubGluZS53cmFwQ2xh
			c3M7IH0NCiAgICBlbHNlIGlmIChsaW5lVmlldy5ub2RlICE9IGxpbmVWaWV3LnRleHQpDQogICAg
			ICB7IGxpbmVWaWV3Lm5vZGUuY2xhc3NOYW1lID0gIiI7IH0NCiAgICB2YXIgdGV4dENsYXNzID0g
			bGluZVZpZXcudGV4dENsYXNzID8gbGluZVZpZXcudGV4dENsYXNzICsgIiAiICsgKGxpbmVWaWV3
			LmxpbmUudGV4dENsYXNzIHx8ICIiKSA6IGxpbmVWaWV3LmxpbmUudGV4dENsYXNzOw0KICAgIGxp
			bmVWaWV3LnRleHQuY2xhc3NOYW1lID0gdGV4dENsYXNzIHx8ICIiOw0KICB9DQoNCiAgZnVuY3Rp
			b24gdXBkYXRlTGluZUd1dHRlcihjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKSB7DQogICAgaWYg
			KGxpbmVWaWV3Lmd1dHRlcikgew0KICAgICAgbGluZVZpZXcubm9kZS5yZW1vdmVDaGlsZChsaW5l
			Vmlldy5ndXR0ZXIpOw0KICAgICAgbGluZVZpZXcuZ3V0dGVyID0gbnVsbDsNCiAgICB9DQogICAg
			aWYgKGxpbmVWaWV3Lmd1dHRlckJhY2tncm91bmQpIHsNCiAgICAgIGxpbmVWaWV3Lm5vZGUucmVt
			b3ZlQ2hpbGQobGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCk7DQogICAgICBsaW5lVmlldy5ndXR0
			ZXJCYWNrZ3JvdW5kID0gbnVsbDsNCiAgICB9DQogICAgaWYgKGxpbmVWaWV3LmxpbmUuZ3V0dGVy
			Q2xhc3MpIHsNCiAgICAgIHZhciB3cmFwID0gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpOw0K
			ICAgICAgbGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCA9IGVsdCgiZGl2IiwgbnVsbCwgIkNvZGVN
			aXJyb3ItZ3V0dGVyLWJhY2tncm91bmQgIiArIGxpbmVWaWV3LmxpbmUuZ3V0dGVyQ2xhc3MsDQog
			ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgibGVmdDogIiArIChjbS5vcHRp
			b25zLmZpeGVkR3V0dGVyID8gZGltcy5maXhlZFBvcyA6IC1kaW1zLmd1dHRlclRvdGFsV2lkdGgp
			ICsgInB4OyB3aWR0aDogIiArIChkaW1zLmd1dHRlclRvdGFsV2lkdGgpICsgInB4IikpOw0KICAg
			ICAgY20uZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKGxpbmVWaWV3Lmd1dHRlckJhY2tncm91
			bmQpOw0KICAgICAgd3JhcC5pbnNlcnRCZWZvcmUobGluZVZpZXcuZ3V0dGVyQmFja2dyb3VuZCwg
			bGluZVZpZXcudGV4dCk7DQogICAgfQ0KICAgIHZhciBtYXJrZXJzID0gbGluZVZpZXcubGluZS5n
			dXR0ZXJNYXJrZXJzOw0KICAgIGlmIChjbS5vcHRpb25zLmxpbmVOdW1iZXJzIHx8IG1hcmtlcnMp
			IHsNCiAgICAgIHZhciB3cmFwJDEgPSBlbnN1cmVMaW5lV3JhcHBlZChsaW5lVmlldyk7DQogICAg
			ICB2YXIgZ3V0dGVyV3JhcCA9IGxpbmVWaWV3Lmd1dHRlciA9IGVsdCgiZGl2IiwgbnVsbCwgIkNv
			ZGVNaXJyb3ItZ3V0dGVyLXdyYXBwZXIiLCAoImxlZnQ6ICIgKyAoY20ub3B0aW9ucy5maXhlZEd1
			dHRlciA/IGRpbXMuZml4ZWRQb3MgOiAtZGltcy5ndXR0ZXJUb3RhbFdpZHRoKSArICJweCIpKTsN
			CiAgICAgIGNtLmRpc3BsYXkuaW5wdXQuc2V0VW5lZGl0YWJsZShndXR0ZXJXcmFwKTsNCiAgICAg
			IHdyYXAkMS5pbnNlcnRCZWZvcmUoZ3V0dGVyV3JhcCwgbGluZVZpZXcudGV4dCk7DQogICAgICBp
			ZiAobGluZVZpZXcubGluZS5ndXR0ZXJDbGFzcykNCiAgICAgICAgeyBndXR0ZXJXcmFwLmNsYXNz
			TmFtZSArPSAiICIgKyBsaW5lVmlldy5saW5lLmd1dHRlckNsYXNzOyB9DQogICAgICBpZiAoY20u
			b3B0aW9ucy5saW5lTnVtYmVycyAmJiAoIW1hcmtlcnMgfHwgIW1hcmtlcnNbIkNvZGVNaXJyb3It
			bGluZW51bWJlcnMiXSkpDQogICAgICAgIHsgbGluZVZpZXcubGluZU51bWJlciA9IGd1dHRlcldy
			YXAuYXBwZW5kQ2hpbGQoDQogICAgICAgICAgZWx0KCJkaXYiLCBsaW5lTnVtYmVyRm9yKGNtLm9w
			dGlvbnMsIGxpbmVOKSwNCiAgICAgICAgICAgICAgIkNvZGVNaXJyb3ItbGluZW51bWJlciBDb2Rl
			TWlycm9yLWd1dHRlci1lbHQiLA0KICAgICAgICAgICAgICAoImxlZnQ6ICIgKyAoZGltcy5ndXR0
			ZXJMZWZ0WyJDb2RlTWlycm9yLWxpbmVudW1iZXJzIl0pICsgInB4OyB3aWR0aDogIiArIChjbS5k
			aXNwbGF5LmxpbmVOdW1Jbm5lcldpZHRoKSArICJweCIpKSk7IH0NCiAgICAgIGlmIChtYXJrZXJz
			KSB7IGZvciAodmFyIGsgPSAwOyBrIDwgY20uZGlzcGxheS5ndXR0ZXJTcGVjcy5sZW5ndGg7ICsr
			aykgew0KICAgICAgICB2YXIgaWQgPSBjbS5kaXNwbGF5Lmd1dHRlclNwZWNzW2tdLmNsYXNzTmFt
			ZSwgZm91bmQgPSBtYXJrZXJzLmhhc093blByb3BlcnR5KGlkKSAmJiBtYXJrZXJzW2lkXTsNCiAg
			ICAgICAgaWYgKGZvdW5kKQ0KICAgICAgICAgIHsgZ3V0dGVyV3JhcC5hcHBlbmRDaGlsZChlbHQo
			ImRpdiIsIFtmb3VuZF0sICJDb2RlTWlycm9yLWd1dHRlci1lbHQiLA0KICAgICAgICAgICAgICAg
			ICAgICAgICAgICAgICAgICAgICAgICgibGVmdDogIiArIChkaW1zLmd1dHRlckxlZnRbaWRdKSAr
			ICJweDsgd2lkdGg6ICIgKyAoZGltcy5ndXR0ZXJXaWR0aFtpZF0pICsgInB4IikpKTsgfQ0KICAg
			ICAgfSB9DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gdXBkYXRlTGluZVdpZGdldHMoY20sIGxp
			bmVWaWV3LCBkaW1zKSB7DQogICAgaWYgKGxpbmVWaWV3LmFsaWduYWJsZSkgeyBsaW5lVmlldy5h
			bGlnbmFibGUgPSBudWxsOyB9DQogICAgdmFyIGlzV2lkZ2V0ID0gY2xhc3NUZXN0KCJDb2RlTWly
			cm9yLWxpbmV3aWRnZXQiKTsNCiAgICBmb3IgKHZhciBub2RlID0gbGluZVZpZXcubm9kZS5maXJz
			dENoaWxkLCBuZXh0ID0gKHZvaWQgMCk7IG5vZGU7IG5vZGUgPSBuZXh0KSB7DQogICAgICBuZXh0
			ID0gbm9kZS5uZXh0U2libGluZzsNCiAgICAgIGlmIChpc1dpZGdldC50ZXN0KG5vZGUuY2xhc3NO
			YW1lKSkgeyBsaW5lVmlldy5ub2RlLnJlbW92ZUNoaWxkKG5vZGUpOyB9DQogICAgfQ0KICAgIGlu
			c2VydExpbmVXaWRnZXRzKGNtLCBsaW5lVmlldywgZGltcyk7DQogIH0NCg0KICAvLyBCdWlsZCBh
			IGxpbmUncyBET00gcmVwcmVzZW50YXRpb24gZnJvbSBzY3JhdGNoDQogIGZ1bmN0aW9uIGJ1aWxk
			TGluZUVsZW1lbnQoY20sIGxpbmVWaWV3LCBsaW5lTiwgZGltcykgew0KICAgIHZhciBidWlsdCA9
			IGdldExpbmVDb250ZW50KGNtLCBsaW5lVmlldyk7DQogICAgbGluZVZpZXcudGV4dCA9IGxpbmVW
			aWV3Lm5vZGUgPSBidWlsdC5wcmU7DQogICAgaWYgKGJ1aWx0LmJnQ2xhc3MpIHsgbGluZVZpZXcu
			YmdDbGFzcyA9IGJ1aWx0LmJnQ2xhc3M7IH0NCiAgICBpZiAoYnVpbHQudGV4dENsYXNzKSB7IGxp
			bmVWaWV3LnRleHRDbGFzcyA9IGJ1aWx0LnRleHRDbGFzczsgfQ0KDQogICAgdXBkYXRlTGluZUNs
			YXNzZXMoY20sIGxpbmVWaWV3KTsNCiAgICB1cGRhdGVMaW5lR3V0dGVyKGNtLCBsaW5lVmlldywg
			bGluZU4sIGRpbXMpOw0KICAgIGluc2VydExpbmVXaWRnZXRzKGNtLCBsaW5lVmlldywgZGltcyk7
			DQogICAgcmV0dXJuIGxpbmVWaWV3Lm5vZGUNCiAgfQ0KDQogIC8vIEEgbGluZVZpZXcgbWF5IGNv
			bnRhaW4gbXVsdGlwbGUgbG9naWNhbCBsaW5lcyAod2hlbiBtZXJnZWQgYnkNCiAgLy8gY29sbGFw
			c2VkIHNwYW5zKS4gVGhlIHdpZGdldHMgZm9yIGFsbCBvZiB0aGVtIG5lZWQgdG8gYmUgZHJhd24u
			DQogIGZ1bmN0aW9uIGluc2VydExpbmVXaWRnZXRzKGNtLCBsaW5lVmlldywgZGltcykgew0KICAg
			IGluc2VydExpbmVXaWRnZXRzRm9yKGNtLCBsaW5lVmlldy5saW5lLCBsaW5lVmlldywgZGltcywg
			dHJ1ZSk7DQogICAgaWYgKGxpbmVWaWV3LnJlc3QpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5l
			Vmlldy5yZXN0Lmxlbmd0aDsgaSsrKQ0KICAgICAgeyBpbnNlcnRMaW5lV2lkZ2V0c0ZvcihjbSwg
			bGluZVZpZXcucmVzdFtpXSwgbGluZVZpZXcsIGRpbXMsIGZhbHNlKTsgfSB9DQogIH0NCg0KICBm
			dW5jdGlvbiBpbnNlcnRMaW5lV2lkZ2V0c0ZvcihjbSwgbGluZSwgbGluZVZpZXcsIGRpbXMsIGFs
			bG93QWJvdmUpIHsNCiAgICBpZiAoIWxpbmUud2lkZ2V0cykgeyByZXR1cm4gfQ0KICAgIHZhciB3
			cmFwID0gZW5zdXJlTGluZVdyYXBwZWQobGluZVZpZXcpOw0KICAgIGZvciAodmFyIGkgPSAwLCB3
			cyA9IGxpbmUud2lkZ2V0czsgaSA8IHdzLmxlbmd0aDsgKytpKSB7DQogICAgICB2YXIgd2lkZ2V0
			ID0gd3NbaV0sIG5vZGUgPSBlbHQoImRpdiIsIFt3aWRnZXQubm9kZV0sICJDb2RlTWlycm9yLWxp
			bmV3aWRnZXQiICsgKHdpZGdldC5jbGFzc05hbWUgPyAiICIgKyB3aWRnZXQuY2xhc3NOYW1lIDog
			IiIpKTsNCiAgICAgIGlmICghd2lkZ2V0LmhhbmRsZU1vdXNlRXZlbnRzKSB7IG5vZGUuc2V0QXR0
			cmlidXRlKCJjbS1pZ25vcmUtZXZlbnRzIiwgInRydWUiKTsgfQ0KICAgICAgcG9zaXRpb25MaW5l
			V2lkZ2V0KHdpZGdldCwgbm9kZSwgbGluZVZpZXcsIGRpbXMpOw0KICAgICAgY20uZGlzcGxheS5p
			bnB1dC5zZXRVbmVkaXRhYmxlKG5vZGUpOw0KICAgICAgaWYgKGFsbG93QWJvdmUgJiYgd2lkZ2V0
			LmFib3ZlKQ0KICAgICAgICB7IHdyYXAuaW5zZXJ0QmVmb3JlKG5vZGUsIGxpbmVWaWV3Lmd1dHRl
			ciB8fCBsaW5lVmlldy50ZXh0KTsgfQ0KICAgICAgZWxzZQ0KICAgICAgICB7IHdyYXAuYXBwZW5k
			Q2hpbGQobm9kZSk7IH0NCiAgICAgIHNpZ25hbExhdGVyKHdpZGdldCwgInJlZHJhdyIpOw0KICAg
			IH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHBvc2l0aW9uTGluZVdpZGdldCh3aWRnZXQsIG5vZGUsIGxp
			bmVWaWV3LCBkaW1zKSB7DQogICAgaWYgKHdpZGdldC5ub0hTY3JvbGwpIHsNCiAgKGxpbmVWaWV3
			LmFsaWduYWJsZSB8fCAobGluZVZpZXcuYWxpZ25hYmxlID0gW10pKS5wdXNoKG5vZGUpOw0KICAg
			ICAgdmFyIHdpZHRoID0gZGltcy53cmFwcGVyV2lkdGg7DQogICAgICBub2RlLnN0eWxlLmxlZnQg
			PSBkaW1zLmZpeGVkUG9zICsgInB4IjsNCiAgICAgIGlmICghd2lkZ2V0LmNvdmVyR3V0dGVyKSB7
			DQogICAgICAgIHdpZHRoIC09IGRpbXMuZ3V0dGVyVG90YWxXaWR0aDsNCiAgICAgICAgbm9kZS5z
			dHlsZS5wYWRkaW5nTGVmdCA9IGRpbXMuZ3V0dGVyVG90YWxXaWR0aCArICJweCI7DQogICAgICB9
			DQogICAgICBub2RlLnN0eWxlLndpZHRoID0gd2lkdGggKyAicHgiOw0KICAgIH0NCiAgICBpZiAo
			d2lkZ2V0LmNvdmVyR3V0dGVyKSB7DQogICAgICBub2RlLnN0eWxlLnpJbmRleCA9IDU7DQogICAg
			ICBub2RlLnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIjsNCiAgICAgIGlmICghd2lkZ2V0Lm5v
			SFNjcm9sbCkgeyBub2RlLnN0eWxlLm1hcmdpbkxlZnQgPSAtZGltcy5ndXR0ZXJUb3RhbFdpZHRo
			ICsgInB4IjsgfQ0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHdpZGdldEhlaWdodCh3aWRnZXQp
			IHsNCiAgICBpZiAod2lkZ2V0LmhlaWdodCAhPSBudWxsKSB7IHJldHVybiB3aWRnZXQuaGVpZ2h0
			IH0NCiAgICB2YXIgY20gPSB3aWRnZXQuZG9jLmNtOw0KICAgIGlmICghY20pIHsgcmV0dXJuIDAg
			fQ0KICAgIGlmICghY29udGFpbnMoZG9jdW1lbnQuYm9keSwgd2lkZ2V0Lm5vZGUpKSB7DQogICAg
			ICB2YXIgcGFyZW50U3R5bGUgPSAicG9zaXRpb246IHJlbGF0aXZlOyI7DQogICAgICBpZiAod2lk
			Z2V0LmNvdmVyR3V0dGVyKQ0KICAgICAgICB7IHBhcmVudFN0eWxlICs9ICJtYXJnaW4tbGVmdDog
			LSIgKyBjbS5kaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGggKyAicHg7IjsgfQ0KICAgICAgaWYg
			KHdpZGdldC5ub0hTY3JvbGwpDQogICAgICAgIHsgcGFyZW50U3R5bGUgKz0gIndpZHRoOiAiICsg
			Y20uZGlzcGxheS53cmFwcGVyLmNsaWVudFdpZHRoICsgInB4OyI7IH0NCiAgICAgIHJlbW92ZUNo
			aWxkcmVuQW5kQWRkKGNtLmRpc3BsYXkubWVhc3VyZSwgZWx0KCJkaXYiLCBbd2lkZ2V0Lm5vZGVd
			LCBudWxsLCBwYXJlbnRTdHlsZSkpOw0KICAgIH0NCiAgICByZXR1cm4gd2lkZ2V0LmhlaWdodCA9
			IHdpZGdldC5ub2RlLnBhcmVudE5vZGUub2Zmc2V0SGVpZ2h0DQogIH0NCg0KICAvLyBSZXR1cm4g
			dHJ1ZSB3aGVuIHRoZSBnaXZlbiBtb3VzZSBldmVudCBoYXBwZW5lZCBpbiBhIHdpZGdldA0KICBm
			dW5jdGlvbiBldmVudEluV2lkZ2V0KGRpc3BsYXksIGUpIHsNCiAgICBmb3IgKHZhciBuID0gZV90
			YXJnZXQoZSk7IG4gIT0gZGlzcGxheS53cmFwcGVyOyBuID0gbi5wYXJlbnROb2RlKSB7DQogICAg
			ICBpZiAoIW4gfHwgKG4ubm9kZVR5cGUgPT0gMSAmJiBuLmdldEF0dHJpYnV0ZSgiY20taWdub3Jl
			LWV2ZW50cyIpID09ICJ0cnVlIikgfHwNCiAgICAgICAgICAobi5wYXJlbnROb2RlID09IGRpc3Bs
			YXkuc2l6ZXIgJiYgbiAhPSBkaXNwbGF5Lm1vdmVyKSkNCiAgICAgICAgeyByZXR1cm4gdHJ1ZSB9
			DQogICAgfQ0KICB9DQoNCiAgLy8gUE9TSVRJT04gTUVBU1VSRU1FTlQNCg0KICBmdW5jdGlvbiBw
			YWRkaW5nVG9wKGRpc3BsYXkpIHtyZXR1cm4gZGlzcGxheS5saW5lU3BhY2Uub2Zmc2V0VG9wfQ0K
			ICBmdW5jdGlvbiBwYWRkaW5nVmVydChkaXNwbGF5KSB7cmV0dXJuIGRpc3BsYXkubW92ZXIub2Zm
			c2V0SGVpZ2h0IC0gZGlzcGxheS5saW5lU3BhY2Uub2Zmc2V0SGVpZ2h0fQ0KICBmdW5jdGlvbiBw
			YWRkaW5nSChkaXNwbGF5KSB7DQogICAgaWYgKGRpc3BsYXkuY2FjaGVkUGFkZGluZ0gpIHsgcmV0
			dXJuIGRpc3BsYXkuY2FjaGVkUGFkZGluZ0ggfQ0KICAgIHZhciBlID0gcmVtb3ZlQ2hpbGRyZW5B
			bmRBZGQoZGlzcGxheS5tZWFzdXJlLCBlbHQoInByZSIsICJ4IiwgIkNvZGVNaXJyb3ItbGluZS1s
			aWtlIikpOw0KICAgIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlID8gd2luZG93
			LmdldENvbXB1dGVkU3R5bGUoZSkgOiBlLmN1cnJlbnRTdHlsZTsNCiAgICB2YXIgZGF0YSA9IHts
			ZWZ0OiBwYXJzZUludChzdHlsZS5wYWRkaW5nTGVmdCksIHJpZ2h0OiBwYXJzZUludChzdHlsZS5w
			YWRkaW5nUmlnaHQpfTsNCiAgICBpZiAoIWlzTmFOKGRhdGEubGVmdCkgJiYgIWlzTmFOKGRhdGEu
			cmlnaHQpKSB7IGRpc3BsYXkuY2FjaGVkUGFkZGluZ0ggPSBkYXRhOyB9DQogICAgcmV0dXJuIGRh
			dGENCiAgfQ0KDQogIGZ1bmN0aW9uIHNjcm9sbEdhcChjbSkgeyByZXR1cm4gc2Nyb2xsZXJHYXAg
			LSBjbS5kaXNwbGF5Lm5hdGl2ZUJhcldpZHRoIH0NCiAgZnVuY3Rpb24gZGlzcGxheVdpZHRoKGNt
			KSB7DQogICAgcmV0dXJuIGNtLmRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGggLSBzY3JvbGxH
			YXAoY20pIC0gY20uZGlzcGxheS5iYXJXaWR0aA0KICB9DQogIGZ1bmN0aW9uIGRpc3BsYXlIZWln
			aHQoY20pIHsNCiAgICByZXR1cm4gY20uZGlzcGxheS5zY3JvbGxlci5jbGllbnRIZWlnaHQgLSBz
			Y3JvbGxHYXAoY20pIC0gY20uZGlzcGxheS5iYXJIZWlnaHQNCiAgfQ0KDQogIC8vIEVuc3VyZSB0
			aGUgbGluZVZpZXcud3JhcHBpbmcuaGVpZ2h0cyBhcnJheSBpcyBwb3B1bGF0ZWQuIFRoaXMgaXMN
			CiAgLy8gYW4gYXJyYXkgb2YgYm90dG9tIG9mZnNldHMgZm9yIHRoZSBsaW5lcyB0aGF0IG1ha2Ug
			dXAgYSBkcmF3bg0KICAvLyBsaW5lLiBXaGVuIGxpbmVXcmFwcGluZyBpcyBvbiwgdGhlcmUgbWln
			aHQgYmUgbW9yZSB0aGFuIG9uZQ0KICAvLyBoZWlnaHQuDQogIGZ1bmN0aW9uIGVuc3VyZUxpbmVI
			ZWlnaHRzKGNtLCBsaW5lVmlldywgcmVjdCkgew0KICAgIHZhciB3cmFwcGluZyA9IGNtLm9wdGlv
			bnMubGluZVdyYXBwaW5nOw0KICAgIHZhciBjdXJXaWR0aCA9IHdyYXBwaW5nICYmIGRpc3BsYXlX
			aWR0aChjbSk7DQogICAgaWYgKCFsaW5lVmlldy5tZWFzdXJlLmhlaWdodHMgfHwgd3JhcHBpbmcg
			JiYgbGluZVZpZXcubWVhc3VyZS53aWR0aCAhPSBjdXJXaWR0aCkgew0KICAgICAgdmFyIGhlaWdo
			dHMgPSBsaW5lVmlldy5tZWFzdXJlLmhlaWdodHMgPSBbXTsNCiAgICAgIGlmICh3cmFwcGluZykg
			ew0KICAgICAgICBsaW5lVmlldy5tZWFzdXJlLndpZHRoID0gY3VyV2lkdGg7DQogICAgICAgIHZh
			ciByZWN0cyA9IGxpbmVWaWV3LnRleHQuZmlyc3RDaGlsZC5nZXRDbGllbnRSZWN0cygpOw0KICAg
			ICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlY3RzLmxlbmd0aCAtIDE7IGkrKykgew0KICAgICAg
			ICAgIHZhciBjdXIgPSByZWN0c1tpXSwgbmV4dCA9IHJlY3RzW2kgKyAxXTsNCiAgICAgICAgICBp
			ZiAoTWF0aC5hYnMoY3VyLmJvdHRvbSAtIG5leHQuYm90dG9tKSA+IDIpDQogICAgICAgICAgICB7
			IGhlaWdodHMucHVzaCgoY3VyLmJvdHRvbSArIG5leHQudG9wKSAvIDIgLSByZWN0LnRvcCk7IH0N
			CiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaGVpZ2h0cy5wdXNoKHJlY3QuYm90dG9tIC0gcmVj
			dC50b3ApOw0KICAgIH0NCiAgfQ0KDQogIC8vIEZpbmQgYSBsaW5lIG1hcCAobWFwcGluZyBjaGFy
			YWN0ZXIgb2Zmc2V0cyB0byB0ZXh0IG5vZGVzKSBhbmQgYQ0KICAvLyBtZWFzdXJlbWVudCBjYWNo
			ZSBmb3IgdGhlIGdpdmVuIGxpbmUgbnVtYmVyLiAoQSBsaW5lIHZpZXcgbWlnaHQNCiAgLy8gY29u
			dGFpbiBtdWx0aXBsZSBsaW5lcyB3aGVuIGNvbGxhcHNlZCByYW5nZXMgYXJlIHByZXNlbnQuKQ0K
			ICBmdW5jdGlvbiBtYXBGcm9tTGluZVZpZXcobGluZVZpZXcsIGxpbmUsIGxpbmVOKSB7DQogICAg
			aWYgKGxpbmVWaWV3LmxpbmUgPT0gbGluZSkNCiAgICAgIHsgcmV0dXJuIHttYXA6IGxpbmVWaWV3
			Lm1lYXN1cmUubWFwLCBjYWNoZTogbGluZVZpZXcubWVhc3VyZS5jYWNoZX0gfQ0KICAgIGZvciAo
			dmFyIGkgPSAwOyBpIDwgbGluZVZpZXcucmVzdC5sZW5ndGg7IGkrKykNCiAgICAgIHsgaWYgKGxp
			bmVWaWV3LnJlc3RbaV0gPT0gbGluZSkNCiAgICAgICAgeyByZXR1cm4ge21hcDogbGluZVZpZXcu
			bWVhc3VyZS5tYXBzW2ldLCBjYWNoZTogbGluZVZpZXcubWVhc3VyZS5jYWNoZXNbaV19IH0gfQ0K
			ICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGxpbmVWaWV3LnJlc3QubGVuZ3RoOyBpJDErKykN
			CiAgICAgIHsgaWYgKGxpbmVObyhsaW5lVmlldy5yZXN0W2kkMV0pID4gbGluZU4pDQogICAgICAg
			IHsgcmV0dXJuIHttYXA6IGxpbmVWaWV3Lm1lYXN1cmUubWFwc1tpJDFdLCBjYWNoZTogbGluZVZp
			ZXcubWVhc3VyZS5jYWNoZXNbaSQxXSwgYmVmb3JlOiB0cnVlfSB9IH0NCiAgfQ0KDQogIC8vIFJl
			bmRlciBhIGxpbmUgaW50byB0aGUgaGlkZGVuIG5vZGUgZGlzcGxheS5leHRlcm5hbE1lYXN1cmVk
			LiBVc2VkDQogIC8vIHdoZW4gbWVhc3VyZW1lbnQgaXMgbmVlZGVkIGZvciBhIGxpbmUgdGhhdCdz
			IG5vdCBpbiB0aGUgdmlld3BvcnQuDQogIGZ1bmN0aW9uIHVwZGF0ZUV4dGVybmFsTWVhc3VyZW1l
			bnQoY20sIGxpbmUpIHsNCiAgICBsaW5lID0gdmlzdWFsTGluZShsaW5lKTsNCiAgICB2YXIgbGlu
			ZU4gPSBsaW5lTm8obGluZSk7DQogICAgdmFyIHZpZXcgPSBjbS5kaXNwbGF5LmV4dGVybmFsTWVh
			c3VyZWQgPSBuZXcgTGluZVZpZXcoY20uZG9jLCBsaW5lLCBsaW5lTik7DQogICAgdmlldy5saW5l
			TiA9IGxpbmVOOw0KICAgIHZhciBidWlsdCA9IHZpZXcuYnVpbHQgPSBidWlsZExpbmVDb250ZW50
			KGNtLCB2aWV3KTsNCiAgICB2aWV3LnRleHQgPSBidWlsdC5wcmU7DQogICAgcmVtb3ZlQ2hpbGRy
			ZW5BbmRBZGQoY20uZGlzcGxheS5saW5lTWVhc3VyZSwgYnVpbHQucHJlKTsNCiAgICByZXR1cm4g
			dmlldw0KICB9DQoNCiAgLy8gR2V0IGEge3RvcCwgYm90dG9tLCBsZWZ0LCByaWdodH0gYm94IChp
			biBsaW5lLWxvY2FsIGNvb3JkaW5hdGVzKQ0KICAvLyBmb3IgYSBnaXZlbiBjaGFyYWN0ZXIuDQog
			IGZ1bmN0aW9uIG1lYXN1cmVDaGFyKGNtLCBsaW5lLCBjaCwgYmlhcykgew0KICAgIHJldHVybiBt
			ZWFzdXJlQ2hhclByZXBhcmVkKGNtLCBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmUpLCBj
			aCwgYmlhcykNCiAgfQ0KDQogIC8vIEZpbmQgYSBsaW5lIHZpZXcgdGhhdCBjb3JyZXNwb25kcyB0
			byB0aGUgZ2l2ZW4gbGluZSBudW1iZXIuDQogIGZ1bmN0aW9uIGZpbmRWaWV3Rm9yTGluZShjbSwg
			bGluZU4pIHsNCiAgICBpZiAobGluZU4gPj0gY20uZGlzcGxheS52aWV3RnJvbSAmJiBsaW5lTiA8
			IGNtLmRpc3BsYXkudmlld1RvKQ0KICAgICAgeyByZXR1cm4gY20uZGlzcGxheS52aWV3W2ZpbmRW
			aWV3SW5kZXgoY20sIGxpbmVOKV0gfQ0KICAgIHZhciBleHQgPSBjbS5kaXNwbGF5LmV4dGVybmFs
			TWVhc3VyZWQ7DQogICAgaWYgKGV4dCAmJiBsaW5lTiA+PSBleHQubGluZU4gJiYgbGluZU4gPCBl
			eHQubGluZU4gKyBleHQuc2l6ZSkNCiAgICAgIHsgcmV0dXJuIGV4dCB9DQogIH0NCg0KICAvLyBN
			ZWFzdXJlbWVudCBjYW4gYmUgc3BsaXQgaW4gdHdvIHN0ZXBzLCB0aGUgc2V0LXVwIHdvcmsgdGhh
			dA0KICAvLyBhcHBsaWVzIHRvIHRoZSB3aG9sZSBsaW5lLCBhbmQgdGhlIG1lYXN1cmVtZW50IG9m
			IHRoZSBhY3R1YWwNCiAgLy8gY2hhcmFjdGVyLiBGdW5jdGlvbnMgbGlrZSBjb29yZHNDaGFyLCB0
			aGF0IG5lZWQgdG8gZG8gYSBsb3Qgb2YNCiAgLy8gbWVhc3VyZW1lbnRzIGluIGEgcm93LCBjYW4g
			dGh1cyBlbnN1cmUgdGhhdCB0aGUgc2V0LXVwIHdvcmsgaXMNCiAgLy8gb25seSBkb25lIG9uY2Uu
			DQogIGZ1bmN0aW9uIHByZXBhcmVNZWFzdXJlRm9yTGluZShjbSwgbGluZSkgew0KICAgIHZhciBs
			aW5lTiA9IGxpbmVObyhsaW5lKTsNCiAgICB2YXIgdmlldyA9IGZpbmRWaWV3Rm9yTGluZShjbSwg
			bGluZU4pOw0KICAgIGlmICh2aWV3ICYmICF2aWV3LnRleHQpIHsNCiAgICAgIHZpZXcgPSBudWxs
			Ow0KICAgIH0gZWxzZSBpZiAodmlldyAmJiB2aWV3LmNoYW5nZXMpIHsNCiAgICAgIHVwZGF0ZUxp
			bmVGb3JDaGFuZ2VzKGNtLCB2aWV3LCBsaW5lTiwgZ2V0RGltZW5zaW9ucyhjbSkpOw0KICAgICAg
			Y20uY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlOw0KICAgIH0NCiAgICBpZiAoIXZpZXcpDQogICAg
			ICB7IHZpZXcgPSB1cGRhdGVFeHRlcm5hbE1lYXN1cmVtZW50KGNtLCBsaW5lKTsgfQ0KDQogICAg
			dmFyIGluZm8gPSBtYXBGcm9tTGluZVZpZXcodmlldywgbGluZSwgbGluZU4pOw0KICAgIHJldHVy
			biB7DQogICAgICBsaW5lOiBsaW5lLCB2aWV3OiB2aWV3LCByZWN0OiBudWxsLA0KICAgICAgbWFw
			OiBpbmZvLm1hcCwgY2FjaGU6IGluZm8uY2FjaGUsIGJlZm9yZTogaW5mby5iZWZvcmUsDQogICAg
			ICBoYXNIZWlnaHRzOiBmYWxzZQ0KICAgIH0NCiAgfQ0KDQogIC8vIEdpdmVuIGEgcHJlcGFyZWQg
			bWVhc3VyZW1lbnQgb2JqZWN0LCBtZWFzdXJlcyB0aGUgcG9zaXRpb24gb2YgYW4NCiAgLy8gYWN0
			dWFsIGNoYXJhY3RlciAob3IgZmV0Y2hlcyBpdCBmcm9tIHRoZSBjYWNoZSkuDQogIGZ1bmN0aW9u
			IG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXBhcmVkLCBjaCwgYmlhcywgdmFySGVpZ2h0KSB7
			DQogICAgaWYgKHByZXBhcmVkLmJlZm9yZSkgeyBjaCA9IC0xOyB9DQogICAgdmFyIGtleSA9IGNo
			ICsgKGJpYXMgfHwgIiIpLCBmb3VuZDsNCiAgICBpZiAocHJlcGFyZWQuY2FjaGUuaGFzT3duUHJv
			cGVydHkoa2V5KSkgew0KICAgICAgZm91bmQgPSBwcmVwYXJlZC5jYWNoZVtrZXldOw0KICAgIH0g
			ZWxzZSB7DQogICAgICBpZiAoIXByZXBhcmVkLnJlY3QpDQogICAgICAgIHsgcHJlcGFyZWQucmVj
			dCA9IHByZXBhcmVkLnZpZXcudGV4dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgfQ0KICAgICAg
			aWYgKCFwcmVwYXJlZC5oYXNIZWlnaHRzKSB7DQogICAgICAgIGVuc3VyZUxpbmVIZWlnaHRzKGNt
			LCBwcmVwYXJlZC52aWV3LCBwcmVwYXJlZC5yZWN0KTsNCiAgICAgICAgcHJlcGFyZWQuaGFzSGVp
			Z2h0cyA9IHRydWU7DQogICAgICB9DQogICAgICBmb3VuZCA9IG1lYXN1cmVDaGFySW5uZXIoY20s
			IHByZXBhcmVkLCBjaCwgYmlhcyk7DQogICAgICBpZiAoIWZvdW5kLmJvZ3VzKSB7IHByZXBhcmVk
			LmNhY2hlW2tleV0gPSBmb3VuZDsgfQ0KICAgIH0NCiAgICByZXR1cm4ge2xlZnQ6IGZvdW5kLmxl
			ZnQsIHJpZ2h0OiBmb3VuZC5yaWdodCwNCiAgICAgICAgICAgIHRvcDogdmFySGVpZ2h0ID8gZm91
			bmQucnRvcCA6IGZvdW5kLnRvcCwNCiAgICAgICAgICAgIGJvdHRvbTogdmFySGVpZ2h0ID8gZm91
			bmQucmJvdHRvbSA6IGZvdW5kLmJvdHRvbX0NCiAgfQ0KDQogIHZhciBudWxsUmVjdCA9IHtsZWZ0
			OiAwLCByaWdodDogMCwgdG9wOiAwLCBib3R0b206IDB9Ow0KDQogIGZ1bmN0aW9uIG5vZGVBbmRP
			ZmZzZXRJbkxpbmVNYXAobWFwJCQxLCBjaCwgYmlhcykgew0KICAgIHZhciBub2RlLCBzdGFydCwg
			ZW5kLCBjb2xsYXBzZSwgbVN0YXJ0LCBtRW5kOw0KICAgIC8vIEZpcnN0LCBzZWFyY2ggdGhlIGxp
			bmUgbWFwIGZvciB0aGUgdGV4dCBub2RlIGNvcnJlc3BvbmRpbmcgdG8sDQogICAgLy8gb3IgY2xv
			c2VzdCB0bywgdGhlIHRhcmdldCBjaGFyYWN0ZXIuDQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBt
			YXAkJDEubGVuZ3RoOyBpICs9IDMpIHsNCiAgICAgIG1TdGFydCA9IG1hcCQkMVtpXTsNCiAgICAg
			IG1FbmQgPSBtYXAkJDFbaSArIDFdOw0KICAgICAgaWYgKGNoIDwgbVN0YXJ0KSB7DQogICAgICAg
			IHN0YXJ0ID0gMDsgZW5kID0gMTsNCiAgICAgICAgY29sbGFwc2UgPSAibGVmdCI7DQogICAgICB9
			IGVsc2UgaWYgKGNoIDwgbUVuZCkgew0KICAgICAgICBzdGFydCA9IGNoIC0gbVN0YXJ0Ow0KICAg
			ICAgICBlbmQgPSBzdGFydCArIDE7DQogICAgICB9IGVsc2UgaWYgKGkgPT0gbWFwJCQxLmxlbmd0
			aCAtIDMgfHwgY2ggPT0gbUVuZCAmJiBtYXAkJDFbaSArIDNdID4gY2gpIHsNCiAgICAgICAgZW5k
			ID0gbUVuZCAtIG1TdGFydDsNCiAgICAgICAgc3RhcnQgPSBlbmQgLSAxOw0KICAgICAgICBpZiAo
			Y2ggPj0gbUVuZCkgeyBjb2xsYXBzZSA9ICJyaWdodCI7IH0NCiAgICAgIH0NCiAgICAgIGlmIChz
			dGFydCAhPSBudWxsKSB7DQogICAgICAgIG5vZGUgPSBtYXAkJDFbaSArIDJdOw0KICAgICAgICBp
			ZiAobVN0YXJ0ID09IG1FbmQgJiYgYmlhcyA9PSAobm9kZS5pbnNlcnRMZWZ0ID8gImxlZnQiIDog
			InJpZ2h0IikpDQogICAgICAgICAgeyBjb2xsYXBzZSA9IGJpYXM7IH0NCiAgICAgICAgaWYgKGJp
			YXMgPT0gImxlZnQiICYmIHN0YXJ0ID09IDApDQogICAgICAgICAgeyB3aGlsZSAoaSAmJiBtYXAk
			JDFbaSAtIDJdID09IG1hcCQkMVtpIC0gM10gJiYgbWFwJCQxW2kgLSAxXS5pbnNlcnRMZWZ0KSB7
			DQogICAgICAgICAgICBub2RlID0gbWFwJCQxWyhpIC09IDMpICsgMl07DQogICAgICAgICAgICBj
			b2xsYXBzZSA9ICJsZWZ0IjsNCiAgICAgICAgICB9IH0NCiAgICAgICAgaWYgKGJpYXMgPT0gInJp
			Z2h0IiAmJiBzdGFydCA9PSBtRW5kIC0gbVN0YXJ0KQ0KICAgICAgICAgIHsgd2hpbGUgKGkgPCBt
			YXAkJDEubGVuZ3RoIC0gMyAmJiBtYXAkJDFbaSArIDNdID09IG1hcCQkMVtpICsgNF0gJiYgIW1h
			cCQkMVtpICsgNV0uaW5zZXJ0TGVmdCkgew0KICAgICAgICAgICAgbm9kZSA9IG1hcCQkMVsoaSAr
			PSAzKSArIDJdOw0KICAgICAgICAgICAgY29sbGFwc2UgPSAicmlnaHQiOw0KICAgICAgICAgIH0g
			fQ0KICAgICAgICBicmVhaw0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4ge25vZGU6IG5vZGUs
			IHN0YXJ0OiBzdGFydCwgZW5kOiBlbmQsIGNvbGxhcHNlOiBjb2xsYXBzZSwgY292ZXJTdGFydDog
			bVN0YXJ0LCBjb3ZlckVuZDogbUVuZH0NCiAgfQ0KDQogIGZ1bmN0aW9uIGdldFVzZWZ1bFJlY3Qo
			cmVjdHMsIGJpYXMpIHsNCiAgICB2YXIgcmVjdCA9IG51bGxSZWN0Ow0KICAgIGlmIChiaWFzID09
			ICJsZWZ0IikgeyBmb3IgKHZhciBpID0gMDsgaSA8IHJlY3RzLmxlbmd0aDsgaSsrKSB7DQogICAg
			ICBpZiAoKHJlY3QgPSByZWN0c1tpXSkubGVmdCAhPSByZWN0LnJpZ2h0KSB7IGJyZWFrIH0NCiAg
			ICB9IH0gZWxzZSB7IGZvciAodmFyIGkkMSA9IHJlY3RzLmxlbmd0aCAtIDE7IGkkMSA+PSAwOyBp
			JDEtLSkgew0KICAgICAgaWYgKChyZWN0ID0gcmVjdHNbaSQxXSkubGVmdCAhPSByZWN0LnJpZ2h0
			KSB7IGJyZWFrIH0NCiAgICB9IH0NCiAgICByZXR1cm4gcmVjdA0KICB9DQoNCiAgZnVuY3Rpb24g
			bWVhc3VyZUNoYXJJbm5lcihjbSwgcHJlcGFyZWQsIGNoLCBiaWFzKSB7DQogICAgdmFyIHBsYWNl
			ID0gbm9kZUFuZE9mZnNldEluTGluZU1hcChwcmVwYXJlZC5tYXAsIGNoLCBiaWFzKTsNCiAgICB2
			YXIgbm9kZSA9IHBsYWNlLm5vZGUsIHN0YXJ0ID0gcGxhY2Uuc3RhcnQsIGVuZCA9IHBsYWNlLmVu
			ZCwgY29sbGFwc2UgPSBwbGFjZS5jb2xsYXBzZTsNCg0KICAgIHZhciByZWN0Ow0KICAgIGlmIChu
			b2RlLm5vZGVUeXBlID09IDMpIHsgLy8gSWYgaXQgaXMgYSB0ZXh0IG5vZGUsIHVzZSBhIHJhbmdl
			IHRvIHJldHJpZXZlIHRoZSBjb29yZGluYXRlcy4NCiAgICAgIGZvciAodmFyIGkkMSA9IDA7IGkk
			MSA8IDQ7IGkkMSsrKSB7IC8vIFJldHJ5IGEgbWF4aW11bSBvZiA0IHRpbWVzIHdoZW4gbm9uc2Vu
			c2UgcmVjdGFuZ2xlcyBhcmUgcmV0dXJuZWQNCiAgICAgICAgd2hpbGUgKHN0YXJ0ICYmIGlzRXh0
			ZW5kaW5nQ2hhcihwcmVwYXJlZC5saW5lLnRleHQuY2hhckF0KHBsYWNlLmNvdmVyU3RhcnQgKyBz
			dGFydCkpKSB7IC0tc3RhcnQ7IH0NCiAgICAgICAgd2hpbGUgKHBsYWNlLmNvdmVyU3RhcnQgKyBl
			bmQgPCBwbGFjZS5jb3ZlckVuZCAmJiBpc0V4dGVuZGluZ0NoYXIocHJlcGFyZWQubGluZS50ZXh0
			LmNoYXJBdChwbGFjZS5jb3ZlclN0YXJ0ICsgZW5kKSkpIHsgKytlbmQ7IH0NCiAgICAgICAgaWYg
			KGllICYmIGllX3ZlcnNpb24gPCA5ICYmIHN0YXJ0ID09IDAgJiYgZW5kID09IHBsYWNlLmNvdmVy
			RW5kIC0gcGxhY2UuY292ZXJTdGFydCkNCiAgICAgICAgICB7IHJlY3QgPSBub2RlLnBhcmVudE5v
			ZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7IH0NCiAgICAgICAgZWxzZQ0KICAgICAgICAgIHsg
			cmVjdCA9IGdldFVzZWZ1bFJlY3QocmFuZ2Uobm9kZSwgc3RhcnQsIGVuZCkuZ2V0Q2xpZW50UmVj
			dHMoKSwgYmlhcyk7IH0NCiAgICAgICAgaWYgKHJlY3QubGVmdCB8fCByZWN0LnJpZ2h0IHx8IHN0
			YXJ0ID09IDApIHsgYnJlYWsgfQ0KICAgICAgICBlbmQgPSBzdGFydDsNCiAgICAgICAgc3RhcnQg
			PSBzdGFydCAtIDE7DQogICAgICAgIGNvbGxhcHNlID0gInJpZ2h0IjsNCiAgICAgIH0NCiAgICAg
			IGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgMTEpIHsgcmVjdCA9IG1heWJlVXBkYXRlUmVjdEZvclpv
			b21pbmcoY20uZGlzcGxheS5tZWFzdXJlLCByZWN0KTsgfQ0KICAgIH0gZWxzZSB7IC8vIElmIGl0
			IGlzIGEgd2lkZ2V0LCBzaW1wbHkgZ2V0IHRoZSBib3ggZm9yIHRoZSB3aG9sZSB3aWRnZXQuDQog
			ICAgICBpZiAoc3RhcnQgPiAwKSB7IGNvbGxhcHNlID0gYmlhcyA9ICJyaWdodCI7IH0NCiAgICAg
			IHZhciByZWN0czsNCiAgICAgIGlmIChjbS5vcHRpb25zLmxpbmVXcmFwcGluZyAmJiAocmVjdHMg
			PSBub2RlLmdldENsaWVudFJlY3RzKCkpLmxlbmd0aCA+IDEpDQogICAgICAgIHsgcmVjdCA9IHJl
			Y3RzW2JpYXMgPT0gInJpZ2h0IiA/IHJlY3RzLmxlbmd0aCAtIDEgOiAwXTsgfQ0KICAgICAgZWxz
			ZQ0KICAgICAgICB7IHJlY3QgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyB9DQogICAg
			fQ0KICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOSAmJiAhc3RhcnQgJiYgKCFyZWN0IHx8ICFy
			ZWN0LmxlZnQgJiYgIXJlY3QucmlnaHQpKSB7DQogICAgICB2YXIgclNwYW4gPSBub2RlLnBhcmVu
			dE5vZGUuZ2V0Q2xpZW50UmVjdHMoKVswXTsNCiAgICAgIGlmIChyU3BhbikNCiAgICAgICAgeyBy
			ZWN0ID0ge2xlZnQ6IHJTcGFuLmxlZnQsIHJpZ2h0OiByU3Bhbi5sZWZ0ICsgY2hhcldpZHRoKGNt
			LmRpc3BsYXkpLCB0b3A6IHJTcGFuLnRvcCwgYm90dG9tOiByU3Bhbi5ib3R0b219OyB9DQogICAg
			ICBlbHNlDQogICAgICAgIHsgcmVjdCA9IG51bGxSZWN0OyB9DQogICAgfQ0KDQogICAgdmFyIHJ0
			b3AgPSByZWN0LnRvcCAtIHByZXBhcmVkLnJlY3QudG9wLCByYm90ID0gcmVjdC5ib3R0b20gLSBw
			cmVwYXJlZC5yZWN0LnRvcDsNCiAgICB2YXIgbWlkID0gKHJ0b3AgKyByYm90KSAvIDI7DQogICAg
			dmFyIGhlaWdodHMgPSBwcmVwYXJlZC52aWV3Lm1lYXN1cmUuaGVpZ2h0czsNCiAgICB2YXIgaSA9
			IDA7DQogICAgZm9yICg7IGkgPCBoZWlnaHRzLmxlbmd0aCAtIDE7IGkrKykNCiAgICAgIHsgaWYg
			KG1pZCA8IGhlaWdodHNbaV0pIHsgYnJlYWsgfSB9DQogICAgdmFyIHRvcCA9IGkgPyBoZWlnaHRz
			W2kgLSAxXSA6IDAsIGJvdCA9IGhlaWdodHNbaV07DQogICAgdmFyIHJlc3VsdCA9IHtsZWZ0OiAo
			Y29sbGFwc2UgPT0gInJpZ2h0IiA/IHJlY3QucmlnaHQgOiByZWN0LmxlZnQpIC0gcHJlcGFyZWQu
			cmVjdC5sZWZ0LA0KICAgICAgICAgICAgICAgICAgcmlnaHQ6IChjb2xsYXBzZSA9PSAibGVmdCIg
			PyByZWN0LmxlZnQgOiByZWN0LnJpZ2h0KSAtIHByZXBhcmVkLnJlY3QubGVmdCwNCiAgICAgICAg
			ICAgICAgICAgIHRvcDogdG9wLCBib3R0b206IGJvdH07DQogICAgaWYgKCFyZWN0LmxlZnQgJiYg
			IXJlY3QucmlnaHQpIHsgcmVzdWx0LmJvZ3VzID0gdHJ1ZTsgfQ0KICAgIGlmICghY20ub3B0aW9u
			cy5zaW5nbGVDdXJzb3JIZWlnaHRQZXJMaW5lKSB7IHJlc3VsdC5ydG9wID0gcnRvcDsgcmVzdWx0
			LnJib3R0b20gPSByYm90OyB9DQoNCiAgICByZXR1cm4gcmVzdWx0DQogIH0NCg0KICAvLyBXb3Jr
			IGFyb3VuZCBwcm9ibGVtIHdpdGggYm91bmRpbmcgY2xpZW50IHJlY3RzIG9uIHJhbmdlcyBiZWlu
			Zw0KICAvLyByZXR1cm5lZCBpbmNvcnJlY3RseSB3aGVuIHpvb21lZCBvbiBJRTEwIGFuZCBiZWxv
			dy4NCiAgZnVuY3Rpb24gbWF5YmVVcGRhdGVSZWN0Rm9yWm9vbWluZyhtZWFzdXJlLCByZWN0KSB7
			DQogICAgaWYgKCF3aW5kb3cuc2NyZWVuIHx8IHNjcmVlbi5sb2dpY2FsWERQSSA9PSBudWxsIHx8
			DQogICAgICAgIHNjcmVlbi5sb2dpY2FsWERQSSA9PSBzY3JlZW4uZGV2aWNlWERQSSB8fCAhaGFz
			QmFkWm9vbWVkUmVjdHMobWVhc3VyZSkpDQogICAgICB7IHJldHVybiByZWN0IH0NCiAgICB2YXIg
			c2NhbGVYID0gc2NyZWVuLmxvZ2ljYWxYRFBJIC8gc2NyZWVuLmRldmljZVhEUEk7DQogICAgdmFy
			IHNjYWxlWSA9IHNjcmVlbi5sb2dpY2FsWURQSSAvIHNjcmVlbi5kZXZpY2VZRFBJOw0KICAgIHJl
			dHVybiB7bGVmdDogcmVjdC5sZWZ0ICogc2NhbGVYLCByaWdodDogcmVjdC5yaWdodCAqIHNjYWxl
			WCwNCiAgICAgICAgICAgIHRvcDogcmVjdC50b3AgKiBzY2FsZVksIGJvdHRvbTogcmVjdC5ib3R0
			b20gKiBzY2FsZVl9DQogIH0NCg0KICBmdW5jdGlvbiBjbGVhckxpbmVNZWFzdXJlbWVudENhY2hl
			Rm9yKGxpbmVWaWV3KSB7DQogICAgaWYgKGxpbmVWaWV3Lm1lYXN1cmUpIHsNCiAgICAgIGxpbmVW
			aWV3Lm1lYXN1cmUuY2FjaGUgPSB7fTsNCiAgICAgIGxpbmVWaWV3Lm1lYXN1cmUuaGVpZ2h0cyA9
			IG51bGw7DQogICAgICBpZiAobGluZVZpZXcucmVzdCkgeyBmb3IgKHZhciBpID0gMDsgaSA8IGxp
			bmVWaWV3LnJlc3QubGVuZ3RoOyBpKyspDQogICAgICAgIHsgbGluZVZpZXcubWVhc3VyZS5jYWNo
			ZXNbaV0gPSB7fTsgfSB9DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gY2xlYXJMaW5lTWVhc3Vy
			ZW1lbnRDYWNoZShjbSkgew0KICAgIGNtLmRpc3BsYXkuZXh0ZXJuYWxNZWFzdXJlID0gbnVsbDsN
			CiAgICByZW1vdmVDaGlsZHJlbihjbS5kaXNwbGF5LmxpbmVNZWFzdXJlKTsNCiAgICBmb3IgKHZh
			ciBpID0gMDsgaSA8IGNtLmRpc3BsYXkudmlldy5sZW5ndGg7IGkrKykNCiAgICAgIHsgY2xlYXJM
			aW5lTWVhc3VyZW1lbnRDYWNoZUZvcihjbS5kaXNwbGF5LnZpZXdbaV0pOyB9DQogIH0NCg0KICBm
			dW5jdGlvbiBjbGVhckNhY2hlcyhjbSkgew0KICAgIGNsZWFyTGluZU1lYXN1cmVtZW50Q2FjaGUo
			Y20pOw0KICAgIGNtLmRpc3BsYXkuY2FjaGVkQ2hhcldpZHRoID0gY20uZGlzcGxheS5jYWNoZWRU
			ZXh0SGVpZ2h0ID0gY20uZGlzcGxheS5jYWNoZWRQYWRkaW5nSCA9IG51bGw7DQogICAgaWYgKCFj
			bS5vcHRpb25zLmxpbmVXcmFwcGluZykgeyBjbS5kaXNwbGF5Lm1heExpbmVDaGFuZ2VkID0gdHJ1
			ZTsgfQ0KICAgIGNtLmRpc3BsYXkubGluZU51bUNoYXJzID0gbnVsbDsNCiAgfQ0KDQogIGZ1bmN0
			aW9uIHBhZ2VTY3JvbGxYKCkgew0KICAgIC8vIFdvcmsgYXJvdW5kIGh0dHBzOi8vYnVncy5jaHJv
			bWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ4OTIwNg0KICAgIC8vIHdoaWNo
			IGNhdXNlcyBwYWdlX09mZnNldCBhbmQgYm91bmRpbmcgY2xpZW50IHJlY3RzIHRvIHVzZQ0KICAg
			IC8vIGRpZmZlcmVudCByZWZlcmVuY2Ugdmlld3BvcnRzIGFuZCBpbnZhbGlkYXRlIG91ciBjYWxj
			dWxhdGlvbnMuDQogICAgaWYgKGNocm9tZSAmJiBhbmRyb2lkKSB7IHJldHVybiAtKGRvY3VtZW50
			LmJvZHkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIHBhcnNlSW50KGdldENvbXB1dGVk
			U3R5bGUoZG9jdW1lbnQuYm9keSkubWFyZ2luTGVmdCkpIH0NCiAgICByZXR1cm4gd2luZG93LnBh
			Z2VYT2Zmc2V0IHx8IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keSku
			c2Nyb2xsTGVmdA0KICB9DQogIGZ1bmN0aW9uIHBhZ2VTY3JvbGxZKCkgew0KICAgIGlmIChjaHJv
			bWUgJiYgYW5kcm9pZCkgeyByZXR1cm4gLShkb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50
			UmVjdCgpLnRvcCAtIHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkubWFy
			Z2luVG9wKSkgfQ0KICAgIHJldHVybiB3aW5kb3cucGFnZVlPZmZzZXQgfHwgKGRvY3VtZW50LmRv
			Y3VtZW50RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5KS5zY3JvbGxUb3ANCiAgfQ0KDQogIGZ1bmN0
			aW9uIHdpZGdldFRvcEhlaWdodChsaW5lT2JqKSB7DQogICAgdmFyIGhlaWdodCA9IDA7DQogICAg
			aWYgKGxpbmVPYmoud2lkZ2V0cykgeyBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVPYmoud2lkZ2V0
			cy5sZW5ndGg7ICsraSkgeyBpZiAobGluZU9iai53aWRnZXRzW2ldLmFib3ZlKQ0KICAgICAgeyBo
			ZWlnaHQgKz0gd2lkZ2V0SGVpZ2h0KGxpbmVPYmoud2lkZ2V0c1tpXSk7IH0gfSB9DQogICAgcmV0
			dXJuIGhlaWdodA0KICB9DQoNCiAgLy8gQ29udmVydHMgYSB7dG9wLCBib3R0b20sIGxlZnQsIHJp
			Z2h0fSBib3ggZnJvbSBsaW5lLWxvY2FsDQogIC8vIGNvb3JkaW5hdGVzIGludG8gYW5vdGhlciBj
			b29yZGluYXRlIHN5c3RlbS4gQ29udGV4dCBtYXkgYmUgb25lIG9mDQogIC8vICJsaW5lIiwgImRp
			diIgKGRpc3BsYXkubGluZURpdiksICJsb2NhbCIuL251bGwgKGVkaXRvciksICJ3aW5kb3ciLA0K
			ICAvLyBvciAicGFnZSIuDQogIGZ1bmN0aW9uIGludG9Db29yZFN5c3RlbShjbSwgbGluZU9iaiwg
			cmVjdCwgY29udGV4dCwgaW5jbHVkZVdpZGdldHMpIHsNCiAgICBpZiAoIWluY2x1ZGVXaWRnZXRz
			KSB7DQogICAgICB2YXIgaGVpZ2h0ID0gd2lkZ2V0VG9wSGVpZ2h0KGxpbmVPYmopOw0KICAgICAg
			cmVjdC50b3AgKz0gaGVpZ2h0OyByZWN0LmJvdHRvbSArPSBoZWlnaHQ7DQogICAgfQ0KICAgIGlm
			IChjb250ZXh0ID09ICJsaW5lIikgeyByZXR1cm4gcmVjdCB9DQogICAgaWYgKCFjb250ZXh0KSB7
			IGNvbnRleHQgPSAibG9jYWwiOyB9DQogICAgdmFyIHlPZmYgPSBoZWlnaHRBdExpbmUobGluZU9i
			aik7DQogICAgaWYgKGNvbnRleHQgPT0gImxvY2FsIikgeyB5T2ZmICs9IHBhZGRpbmdUb3AoY20u
			ZGlzcGxheSk7IH0NCiAgICBlbHNlIHsgeU9mZiAtPSBjbS5kaXNwbGF5LnZpZXdPZmZzZXQ7IH0N
			CiAgICBpZiAoY29udGV4dCA9PSAicGFnZSIgfHwgY29udGV4dCA9PSAid2luZG93Iikgew0KICAg
			ICAgdmFyIGxPZmYgPSBjbS5kaXNwbGF5LmxpbmVTcGFjZS5nZXRCb3VuZGluZ0NsaWVudFJlY3Qo
			KTsNCiAgICAgIHlPZmYgKz0gbE9mZi50b3AgKyAoY29udGV4dCA9PSAid2luZG93IiA/IDAgOiBw
			YWdlU2Nyb2xsWSgpKTsNCiAgICAgIHZhciB4T2ZmID0gbE9mZi5sZWZ0ICsgKGNvbnRleHQgPT0g
			IndpbmRvdyIgPyAwIDogcGFnZVNjcm9sbFgoKSk7DQogICAgICByZWN0LmxlZnQgKz0geE9mZjsg
			cmVjdC5yaWdodCArPSB4T2ZmOw0KICAgIH0NCiAgICByZWN0LnRvcCArPSB5T2ZmOyByZWN0LmJv
			dHRvbSArPSB5T2ZmOw0KICAgIHJldHVybiByZWN0DQogIH0NCg0KICAvLyBDb3ZlcnRzIGEgYm94
			IGZyb20gImRpdiIgY29vcmRzIHRvIGFub3RoZXIgY29vcmRpbmF0ZSBzeXN0ZW0uDQogIC8vIENv
			bnRleHQgbWF5IGJlICJ3aW5kb3ciLCAicGFnZSIsICJkaXYiLCBvciAibG9jYWwiLi9udWxsLg0K
			ICBmdW5jdGlvbiBmcm9tQ29vcmRTeXN0ZW0oY20sIGNvb3JkcywgY29udGV4dCkgew0KICAgIGlm
			IChjb250ZXh0ID09ICJkaXYiKSB7IHJldHVybiBjb29yZHMgfQ0KICAgIHZhciBsZWZ0ID0gY29v
			cmRzLmxlZnQsIHRvcCA9IGNvb3Jkcy50b3A7DQogICAgLy8gRmlyc3QgbW92ZSBpbnRvICJwYWdl
			IiBjb29yZGluYXRlIHN5c3RlbQ0KICAgIGlmIChjb250ZXh0ID09ICJwYWdlIikgew0KICAgICAg
			bGVmdCAtPSBwYWdlU2Nyb2xsWCgpOw0KICAgICAgdG9wIC09IHBhZ2VTY3JvbGxZKCk7DQogICAg
			fSBlbHNlIGlmIChjb250ZXh0ID09ICJsb2NhbCIgfHwgIWNvbnRleHQpIHsNCiAgICAgIHZhciBs
			b2NhbEJveCA9IGNtLmRpc3BsYXkuc2l6ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7DQogICAg
			ICBsZWZ0ICs9IGxvY2FsQm94LmxlZnQ7DQogICAgICB0b3AgKz0gbG9jYWxCb3gudG9wOw0KICAg
			IH0NCg0KICAgIHZhciBsaW5lU3BhY2VCb3ggPSBjbS5kaXNwbGF5LmxpbmVTcGFjZS5nZXRCb3Vu
			ZGluZ0NsaWVudFJlY3QoKTsNCiAgICByZXR1cm4ge2xlZnQ6IGxlZnQgLSBsaW5lU3BhY2VCb3gu
			bGVmdCwgdG9wOiB0b3AgLSBsaW5lU3BhY2VCb3gudG9wfQ0KICB9DQoNCiAgZnVuY3Rpb24gY2hh
			ckNvb3JkcyhjbSwgcG9zLCBjb250ZXh0LCBsaW5lT2JqLCBiaWFzKSB7DQogICAgaWYgKCFsaW5l
			T2JqKSB7IGxpbmVPYmogPSBnZXRMaW5lKGNtLmRvYywgcG9zLmxpbmUpOyB9DQogICAgcmV0dXJu
			IGludG9Db29yZFN5c3RlbShjbSwgbGluZU9iaiwgbWVhc3VyZUNoYXIoY20sIGxpbmVPYmosIHBv
			cy5jaCwgYmlhcyksIGNvbnRleHQpDQogIH0NCg0KICAvLyBSZXR1cm5zIGEgYm94IGZvciBhIGdp
			dmVuIGN1cnNvciBwb3NpdGlvbiwgd2hpY2ggbWF5IGhhdmUgYW4NCiAgLy8gJ290aGVyJyBwcm9w
			ZXJ0eSBjb250YWluaW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgc2Vjb25kYXJ5IGN1cnNvcg0KICAv
			LyBvbiBhIGJpZGkgYm91bmRhcnkuDQogIC8vIEEgY3Vyc29yIFBvcyhsaW5lLCBjaGFyLCAiYmVm
			b3JlIikgaXMgb24gdGhlIHNhbWUgdmlzdWFsIGxpbmUgYXMgYGNoYXIgLSAxYA0KICAvLyBhbmQg
			YWZ0ZXIgYGNoYXIgLSAxYCBpbiB3cml0aW5nIG9yZGVyIG9mIGBjaGFyIC0gMWANCiAgLy8gQSBj
			dXJzb3IgUG9zKGxpbmUsIGNoYXIsICJhZnRlciIpIGlzIG9uIHRoZSBzYW1lIHZpc3VhbCBsaW5l
			IGFzIGBjaGFyYA0KICAvLyBhbmQgYmVmb3JlIGBjaGFyYCBpbiB3cml0aW5nIG9yZGVyIG9mIGBj
			aGFyYA0KICAvLyBFeGFtcGxlcyAodXBwZXItY2FzZSBsZXR0ZXJzIGFyZSBSVEwsIGxvd2VyLWNh
			c2UgYXJlIExUUik6DQogIC8vICAgICBQb3MoMCwgMSwgLi4uKQ0KICAvLyAgICAgYmVmb3JlICAg
			YWZ0ZXINCiAgLy8gYWIgICAgIGF8YiAgICAgYXxiDQogIC8vIGFCICAgICBhfEIgICAgIGFCfA0K
			ICAvLyBBYiAgICAgfEFiICAgICBBfGINCiAgLy8gQUIgICAgIEJ8QSAgICAgQnxBDQogIC8vIEV2
			ZXJ5IHBvc2l0aW9uIGFmdGVyIHRoZSBsYXN0IGNoYXJhY3RlciBvbiBhIGxpbmUgaXMgY29uc2lk
			ZXJlZCB0byBzdGljaw0KICAvLyB0byB0aGUgbGFzdCBjaGFyYWN0ZXIgb24gdGhlIGxpbmUuDQog
			IGZ1bmN0aW9uIGN1cnNvckNvb3JkcyhjbSwgcG9zLCBjb250ZXh0LCBsaW5lT2JqLCBwcmVwYXJl
			ZE1lYXN1cmUsIHZhckhlaWdodCkgew0KICAgIGxpbmVPYmogPSBsaW5lT2JqIHx8IGdldExpbmUo
			Y20uZG9jLCBwb3MubGluZSk7DQogICAgaWYgKCFwcmVwYXJlZE1lYXN1cmUpIHsgcHJlcGFyZWRN
			ZWFzdXJlID0gcHJlcGFyZU1lYXN1cmVGb3JMaW5lKGNtLCBsaW5lT2JqKTsgfQ0KICAgIGZ1bmN0
			aW9uIGdldChjaCwgcmlnaHQpIHsNCiAgICAgIHZhciBtID0gbWVhc3VyZUNoYXJQcmVwYXJlZChj
			bSwgcHJlcGFyZWRNZWFzdXJlLCBjaCwgcmlnaHQgPyAicmlnaHQiIDogImxlZnQiLCB2YXJIZWln
			aHQpOw0KICAgICAgaWYgKHJpZ2h0KSB7IG0ubGVmdCA9IG0ucmlnaHQ7IH0gZWxzZSB7IG0ucmln
			aHQgPSBtLmxlZnQ7IH0NCiAgICAgIHJldHVybiBpbnRvQ29vcmRTeXN0ZW0oY20sIGxpbmVPYmos
			IG0sIGNvbnRleHQpDQogICAgfQ0KICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmVPYmosIGNt
			LmRvYy5kaXJlY3Rpb24pLCBjaCA9IHBvcy5jaCwgc3RpY2t5ID0gcG9zLnN0aWNreTsNCiAgICBp
			ZiAoY2ggPj0gbGluZU9iai50ZXh0Lmxlbmd0aCkgew0KICAgICAgY2ggPSBsaW5lT2JqLnRleHQu
			bGVuZ3RoOw0KICAgICAgc3RpY2t5ID0gImJlZm9yZSI7DQogICAgfSBlbHNlIGlmIChjaCA8PSAw
			KSB7DQogICAgICBjaCA9IDA7DQogICAgICBzdGlja3kgPSAiYWZ0ZXIiOw0KICAgIH0NCiAgICBp
			ZiAoIW9yZGVyKSB7IHJldHVybiBnZXQoc3RpY2t5ID09ICJiZWZvcmUiID8gY2ggLSAxIDogY2gs
			IHN0aWNreSA9PSAiYmVmb3JlIikgfQ0KDQogICAgZnVuY3Rpb24gZ2V0QmlkaShjaCwgcGFydFBv
			cywgaW52ZXJ0KSB7DQogICAgICB2YXIgcGFydCA9IG9yZGVyW3BhcnRQb3NdLCByaWdodCA9IHBh
			cnQubGV2ZWwgPT0gMTsNCiAgICAgIHJldHVybiBnZXQoaW52ZXJ0ID8gY2ggLSAxIDogY2gsIHJp
			Z2h0ICE9IGludmVydCkNCiAgICB9DQogICAgdmFyIHBhcnRQb3MgPSBnZXRCaWRpUGFydEF0KG9y
			ZGVyLCBjaCwgc3RpY2t5KTsNCiAgICB2YXIgb3RoZXIgPSBiaWRpT3RoZXI7DQogICAgdmFyIHZh
			bCA9IGdldEJpZGkoY2gsIHBhcnRQb3MsIHN0aWNreSA9PSAiYmVmb3JlIik7DQogICAgaWYgKG90
			aGVyICE9IG51bGwpIHsgdmFsLm90aGVyID0gZ2V0QmlkaShjaCwgb3RoZXIsIHN0aWNreSAhPSAi
			YmVmb3JlIik7IH0NCiAgICByZXR1cm4gdmFsDQogIH0NCg0KICAvLyBVc2VkIHRvIGNoZWFwbHkg
			ZXN0aW1hdGUgdGhlIGNvb3JkaW5hdGVzIGZvciBhIHBvc2l0aW9uLiBVc2VkIGZvcg0KICAvLyBp
			bnRlcm1lZGlhdGUgc2Nyb2xsIHVwZGF0ZXMuDQogIGZ1bmN0aW9uIGVzdGltYXRlQ29vcmRzKGNt
			LCBwb3MpIHsNCiAgICB2YXIgbGVmdCA9IDA7DQogICAgcG9zID0gY2xpcFBvcyhjbS5kb2MsIHBv
			cyk7DQogICAgaWYgKCFjbS5vcHRpb25zLmxpbmVXcmFwcGluZykgeyBsZWZ0ID0gY2hhcldpZHRo
			KGNtLmRpc3BsYXkpICogcG9zLmNoOyB9DQogICAgdmFyIGxpbmVPYmogPSBnZXRMaW5lKGNtLmRv
			YywgcG9zLmxpbmUpOw0KICAgIHZhciB0b3AgPSBoZWlnaHRBdExpbmUobGluZU9iaikgKyBwYWRk
			aW5nVG9wKGNtLmRpc3BsYXkpOw0KICAgIHJldHVybiB7bGVmdDogbGVmdCwgcmlnaHQ6IGxlZnQs
			IHRvcDogdG9wLCBib3R0b206IHRvcCArIGxpbmVPYmouaGVpZ2h0fQ0KICB9DQoNCiAgLy8gUG9z
			aXRpb25zIHJldHVybmVkIGJ5IGNvb3Jkc0NoYXIgY29udGFpbiBzb21lIGV4dHJhIGluZm9ybWF0
			aW9uLg0KICAvLyB4UmVsIGlzIHRoZSByZWxhdGl2ZSB4IHBvc2l0aW9uIG9mIHRoZSBpbnB1dCBj
			b29yZGluYXRlcyBjb21wYXJlZA0KICAvLyB0byB0aGUgZm91bmQgcG9zaXRpb24gKHNvIHhSZWwg
			PiAwIG1lYW5zIHRoZSBjb29yZGluYXRlcyBhcmUgdG8NCiAgLy8gdGhlIHJpZ2h0IG9mIHRoZSBj
			aGFyYWN0ZXIgcG9zaXRpb24sIGZvciBleGFtcGxlKS4gV2hlbiBvdXRzaWRlDQogIC8vIGlzIHRy
			dWUsIHRoYXQgbWVhbnMgdGhlIGNvb3JkaW5hdGVzIGxpZSBvdXRzaWRlIHRoZSBsaW5lJ3MNCiAg
			Ly8gdmVydGljYWwgcmFuZ2UuDQogIGZ1bmN0aW9uIFBvc1dpdGhJbmZvKGxpbmUsIGNoLCBzdGlj
			a3ksIG91dHNpZGUsIHhSZWwpIHsNCiAgICB2YXIgcG9zID0gUG9zKGxpbmUsIGNoLCBzdGlja3kp
			Ow0KICAgIHBvcy54UmVsID0geFJlbDsNCiAgICBpZiAob3V0c2lkZSkgeyBwb3Mub3V0c2lkZSA9
			IG91dHNpZGU7IH0NCiAgICByZXR1cm4gcG9zDQogIH0NCg0KICAvLyBDb21wdXRlIHRoZSBjaGFy
			YWN0ZXIgcG9zaXRpb24gY2xvc2VzdCB0byB0aGUgZ2l2ZW4gY29vcmRpbmF0ZXMuDQogIC8vIElu
			cHV0IG11c3QgYmUgbGluZVNwYWNlLWxvY2FsICgiZGl2IiBjb29yZGluYXRlIHN5c3RlbSkuDQog
			IGZ1bmN0aW9uIGNvb3Jkc0NoYXIoY20sIHgsIHkpIHsNCiAgICB2YXIgZG9jID0gY20uZG9jOw0K
			ICAgIHkgKz0gY20uZGlzcGxheS52aWV3T2Zmc2V0Ow0KICAgIGlmICh5IDwgMCkgeyByZXR1cm4g
			UG9zV2l0aEluZm8oZG9jLmZpcnN0LCAwLCBudWxsLCAtMSwgLTEpIH0NCiAgICB2YXIgbGluZU4g
			PSBsaW5lQXRIZWlnaHQoZG9jLCB5KSwgbGFzdCA9IGRvYy5maXJzdCArIGRvYy5zaXplIC0gMTsN
			CiAgICBpZiAobGluZU4gPiBsYXN0KQ0KICAgICAgeyByZXR1cm4gUG9zV2l0aEluZm8oZG9jLmZp
			cnN0ICsgZG9jLnNpemUgLSAxLCBnZXRMaW5lKGRvYywgbGFzdCkudGV4dC5sZW5ndGgsIG51bGws
			IDEsIDEpIH0NCiAgICBpZiAoeCA8IDApIHsgeCA9IDA7IH0NCg0KICAgIHZhciBsaW5lT2JqID0g
			Z2V0TGluZShkb2MsIGxpbmVOKTsNCiAgICBmb3IgKDs7KSB7DQogICAgICB2YXIgZm91bmQgPSBj
			b29yZHNDaGFySW5uZXIoY20sIGxpbmVPYmosIGxpbmVOLCB4LCB5KTsNCiAgICAgIHZhciBjb2xs
			YXBzZWQgPSBjb2xsYXBzZWRTcGFuQXJvdW5kKGxpbmVPYmosIGZvdW5kLmNoICsgKGZvdW5kLnhS
			ZWwgPiAwIHx8IGZvdW5kLm91dHNpZGUgPiAwID8gMSA6IDApKTsNCiAgICAgIGlmICghY29sbGFw
			c2VkKSB7IHJldHVybiBmb3VuZCB9DQogICAgICB2YXIgcmFuZ2VFbmQgPSBjb2xsYXBzZWQuZmlu
			ZCgxKTsNCiAgICAgIGlmIChyYW5nZUVuZC5saW5lID09IGxpbmVOKSB7IHJldHVybiByYW5nZUVu
			ZCB9DQogICAgICBsaW5lT2JqID0gZ2V0TGluZShkb2MsIGxpbmVOID0gcmFuZ2VFbmQubGluZSk7
			DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gd3JhcHBlZExpbmVFeHRlbnQoY20sIGxpbmVPYmos
			IHByZXBhcmVkTWVhc3VyZSwgeSkgew0KICAgIHkgLT0gd2lkZ2V0VG9wSGVpZ2h0KGxpbmVPYmop
			Ow0KICAgIHZhciBlbmQgPSBsaW5lT2JqLnRleHQubGVuZ3RoOw0KICAgIHZhciBiZWdpbiA9IGZp
			bmRGaXJzdChmdW5jdGlvbiAoY2gpIHsgcmV0dXJuIG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHBy
			ZXBhcmVkTWVhc3VyZSwgY2ggLSAxKS5ib3R0b20gPD0geTsgfSwgZW5kLCAwKTsNCiAgICBlbmQg
			PSBmaW5kRmlyc3QoZnVuY3Rpb24gKGNoKSB7IHJldHVybiBtZWFzdXJlQ2hhclByZXBhcmVkKGNt
			LCBwcmVwYXJlZE1lYXN1cmUsIGNoKS50b3AgPiB5OyB9LCBiZWdpbiwgZW5kKTsNCiAgICByZXR1
			cm4ge2JlZ2luOiBiZWdpbiwgZW5kOiBlbmR9DQogIH0NCg0KICBmdW5jdGlvbiB3cmFwcGVkTGlu
			ZUV4dGVudENoYXIoY20sIGxpbmVPYmosIHByZXBhcmVkTWVhc3VyZSwgdGFyZ2V0KSB7DQogICAg
			aWYgKCFwcmVwYXJlZE1lYXN1cmUpIHsgcHJlcGFyZWRNZWFzdXJlID0gcHJlcGFyZU1lYXN1cmVG
			b3JMaW5lKGNtLCBsaW5lT2JqKTsgfQ0KICAgIHZhciB0YXJnZXRUb3AgPSBpbnRvQ29vcmRTeXN0
			ZW0oY20sIGxpbmVPYmosIG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXBhcmVkTWVhc3VyZSwg
			dGFyZ2V0KSwgImxpbmUiKS50b3A7DQogICAgcmV0dXJuIHdyYXBwZWRMaW5lRXh0ZW50KGNtLCBs
			aW5lT2JqLCBwcmVwYXJlZE1lYXN1cmUsIHRhcmdldFRvcCkNCiAgfQ0KDQogIC8vIFJldHVybnMg
			dHJ1ZSBpZiB0aGUgZ2l2ZW4gc2lkZSBvZiBhIGJveCBpcyBhZnRlciB0aGUgZ2l2ZW4NCiAgLy8g
			Y29vcmRpbmF0ZXMsIGluIHRvcC10by1ib3R0b20sIGxlZnQtdG8tcmlnaHQgb3JkZXIuDQogIGZ1
			bmN0aW9uIGJveElzQWZ0ZXIoYm94LCB4LCB5LCBsZWZ0KSB7DQogICAgcmV0dXJuIGJveC5ib3R0
			b20gPD0geSA/IGZhbHNlIDogYm94LnRvcCA+IHkgPyB0cnVlIDogKGxlZnQgPyBib3gubGVmdCA6
			IGJveC5yaWdodCkgPiB4DQogIH0NCg0KICBmdW5jdGlvbiBjb29yZHNDaGFySW5uZXIoY20sIGxp
			bmVPYmosIGxpbmVObyQkMSwgeCwgeSkgew0KICAgIC8vIE1vdmUgeSBpbnRvIGxpbmUtbG9jYWwg
			Y29vcmRpbmF0ZSBzcGFjZQ0KICAgIHkgLT0gaGVpZ2h0QXRMaW5lKGxpbmVPYmopOw0KICAgIHZh
			ciBwcmVwYXJlZE1lYXN1cmUgPSBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20sIGxpbmVPYmopOw0K
			ICAgIC8vIFdoZW4gZGlyZWN0bHkgY2FsbGluZyBgbWVhc3VyZUNoYXJQcmVwYXJlZGAsIHdlIGhh
			dmUgdG8gYWRqdXN0DQogICAgLy8gZm9yIHRoZSB3aWRnZXRzIGF0IHRoaXMgbGluZS4NCiAgICB2
			YXIgd2lkZ2V0SGVpZ2h0JCQxID0gd2lkZ2V0VG9wSGVpZ2h0KGxpbmVPYmopOw0KICAgIHZhciBi
			ZWdpbiA9IDAsIGVuZCA9IGxpbmVPYmoudGV4dC5sZW5ndGgsIGx0ciA9IHRydWU7DQoNCiAgICB2
			YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lT2JqLCBjbS5kb2MuZGlyZWN0aW9uKTsNCiAgICAvLyBJ
			ZiB0aGUgbGluZSBpc24ndCBwbGFpbiBsZWZ0LXRvLXJpZ2h0IHRleHQsIGZpcnN0IGZpZ3VyZSBv
			dXQNCiAgICAvLyB3aGljaCBiaWRpIHNlY3Rpb24gdGhlIGNvb3JkaW5hdGVzIGZhbGwgaW50by4N
			CiAgICBpZiAob3JkZXIpIHsNCiAgICAgIHZhciBwYXJ0ID0gKGNtLm9wdGlvbnMubGluZVdyYXBw
			aW5nID8gY29vcmRzQmlkaVBhcnRXcmFwcGVkIDogY29vcmRzQmlkaVBhcnQpDQogICAgICAgICAg
			ICAgICAgICAgKGNtLCBsaW5lT2JqLCBsaW5lTm8kJDEsIHByZXBhcmVkTWVhc3VyZSwgb3JkZXIs
			IHgsIHkpOw0KICAgICAgbHRyID0gcGFydC5sZXZlbCAhPSAxOw0KICAgICAgLy8gVGhlIGF3a3dh
			cmQgLTEgb2Zmc2V0cyBhcmUgbmVlZGVkIGJlY2F1c2UgZmluZEZpcnN0IChjYWxsZWQNCiAgICAg
			IC8vIG9uIHRoZXNlIGJlbG93KSB3aWxsIHRyZWF0IGl0cyBmaXJzdCBib3VuZCBhcyBpbmNsdXNp
			dmUsDQogICAgICAvLyBzZWNvbmQgYXMgZXhjbHVzaXZlLCBidXQgd2Ugd2FudCB0byBhY3R1YWxs
			eSBhZGRyZXNzIHRoZQ0KICAgICAgLy8gY2hhcmFjdGVycyBpbiB0aGUgcGFydCdzIHJhbmdlDQog
			ICAgICBiZWdpbiA9IGx0ciA/IHBhcnQuZnJvbSA6IHBhcnQudG8gLSAxOw0KICAgICAgZW5kID0g
			bHRyID8gcGFydC50byA6IHBhcnQuZnJvbSAtIDE7DQogICAgfQ0KDQogICAgLy8gQSBiaW5hcnkg
			c2VhcmNoIHRvIGZpbmQgdGhlIGZpcnN0IGNoYXJhY3RlciB3aG9zZSBib3VuZGluZyBib3gNCiAg
			ICAvLyBzdGFydHMgYWZ0ZXIgdGhlIGNvb3JkaW5hdGVzLiBJZiB3ZSBydW4gYWNyb3NzIGFueSB3
			aG9zZSBib3ggd3JhcA0KICAgIC8vIHRoZSBjb29yZGluYXRlcywgc3RvcmUgdGhhdC4NCiAgICB2
			YXIgY2hBcm91bmQgPSBudWxsLCBib3hBcm91bmQgPSBudWxsOw0KICAgIHZhciBjaCA9IGZpbmRG
			aXJzdChmdW5jdGlvbiAoY2gpIHsNCiAgICAgIHZhciBib3ggPSBtZWFzdXJlQ2hhclByZXBhcmVk
			KGNtLCBwcmVwYXJlZE1lYXN1cmUsIGNoKTsNCiAgICAgIGJveC50b3AgKz0gd2lkZ2V0SGVpZ2h0
			JCQxOyBib3guYm90dG9tICs9IHdpZGdldEhlaWdodCQkMTsNCiAgICAgIGlmICghYm94SXNBZnRl
			cihib3gsIHgsIHksIGZhbHNlKSkgeyByZXR1cm4gZmFsc2UgfQ0KICAgICAgaWYgKGJveC50b3Ag
			PD0geSAmJiBib3gubGVmdCA8PSB4KSB7DQogICAgICAgIGNoQXJvdW5kID0gY2g7DQogICAgICAg
			IGJveEFyb3VuZCA9IGJveDsNCiAgICAgIH0NCiAgICAgIHJldHVybiB0cnVlDQogICAgfSwgYmVn
			aW4sIGVuZCk7DQoNCiAgICB2YXIgYmFzZVgsIHN0aWNreSwgb3V0c2lkZSA9IGZhbHNlOw0KICAg
			IC8vIElmIGEgYm94IGFyb3VuZCB0aGUgY29vcmRpbmF0ZXMgd2FzIGZvdW5kLCB1c2UgdGhhdA0K
			ICAgIGlmIChib3hBcm91bmQpIHsNCiAgICAgIC8vIERpc3Rpbmd1aXNoIGNvb3JkaW5hdGVzIG5l
			YXJlciB0byB0aGUgbGVmdCBvciByaWdodCBzaWRlIG9mIHRoZSBib3gNCiAgICAgIHZhciBhdExl
			ZnQgPSB4IC0gYm94QXJvdW5kLmxlZnQgPCBib3hBcm91bmQucmlnaHQgLSB4LCBhdFN0YXJ0ID0g
			YXRMZWZ0ID09IGx0cjsNCiAgICAgIGNoID0gY2hBcm91bmQgKyAoYXRTdGFydCA/IDAgOiAxKTsN
			CiAgICAgIHN0aWNreSA9IGF0U3RhcnQgPyAiYWZ0ZXIiIDogImJlZm9yZSI7DQogICAgICBiYXNl
			WCA9IGF0TGVmdCA/IGJveEFyb3VuZC5sZWZ0IDogYm94QXJvdW5kLnJpZ2h0Ow0KICAgIH0gZWxz
			ZSB7DQogICAgICAvLyAoQWRqdXN0IGZvciBleHRlbmRlZCBib3VuZCwgaWYgbmVjZXNzYXJ5LikN
			CiAgICAgIGlmICghbHRyICYmIChjaCA9PSBlbmQgfHwgY2ggPT0gYmVnaW4pKSB7IGNoKys7IH0N
			CiAgICAgIC8vIFRvIGRldGVybWluZSB3aGljaCBzaWRlIHRvIGFzc29jaWF0ZSB3aXRoLCBnZXQg
			dGhlIGJveCB0byB0aGUNCiAgICAgIC8vIGxlZnQgb2YgdGhlIGNoYXJhY3RlciBhbmQgY29tcGFy
			ZSBpdCdzIHZlcnRpY2FsIHBvc2l0aW9uIHRvIHRoZQ0KICAgICAgLy8gY29vcmRpbmF0ZXMNCiAg
			ICAgIHN0aWNreSA9IGNoID09IDAgPyAiYWZ0ZXIiIDogY2ggPT0gbGluZU9iai50ZXh0Lmxlbmd0
			aCA/ICJiZWZvcmUiIDoNCiAgICAgICAgKG1lYXN1cmVDaGFyUHJlcGFyZWQoY20sIHByZXBhcmVk
			TWVhc3VyZSwgY2ggLSAobHRyID8gMSA6IDApKS5ib3R0b20gKyB3aWRnZXRIZWlnaHQkJDEgPD0g
			eSkgPT0gbHRyID8NCiAgICAgICAgImFmdGVyIiA6ICJiZWZvcmUiOw0KICAgICAgLy8gTm93IGdl
			dCBhY2N1cmF0ZSBjb29yZGluYXRlcyBmb3IgdGhpcyBwbGFjZSwgaW4gb3JkZXIgdG8gZ2V0IGEN
			CiAgICAgIC8vIGJhc2UgWCBwb3NpdGlvbg0KICAgICAgdmFyIGNvb3JkcyA9IGN1cnNvckNvb3Jk
			cyhjbSwgUG9zKGxpbmVObyQkMSwgY2gsIHN0aWNreSksICJsaW5lIiwgbGluZU9iaiwgcHJlcGFy
			ZWRNZWFzdXJlKTsNCiAgICAgIGJhc2VYID0gY29vcmRzLmxlZnQ7DQogICAgICBvdXRzaWRlID0g
			eSA8IGNvb3Jkcy50b3AgPyAtMSA6IHkgPj0gY29vcmRzLmJvdHRvbSA/IDEgOiAwOw0KICAgIH0N
			Cg0KICAgIGNoID0gc2tpcEV4dGVuZGluZ0NoYXJzKGxpbmVPYmoudGV4dCwgY2gsIDEpOw0KICAg
			IHJldHVybiBQb3NXaXRoSW5mbyhsaW5lTm8kJDEsIGNoLCBzdGlja3ksIG91dHNpZGUsIHggLSBi
			YXNlWCkNCiAgfQ0KDQogIGZ1bmN0aW9uIGNvb3Jkc0JpZGlQYXJ0KGNtLCBsaW5lT2JqLCBsaW5l
			Tm8kJDEsIHByZXBhcmVkTWVhc3VyZSwgb3JkZXIsIHgsIHkpIHsNCiAgICAvLyBCaWRpIHBhcnRz
			IGFyZSBzb3J0ZWQgbGVmdC10by1yaWdodCwgYW5kIGluIGEgbm9uLWxpbmUtd3JhcHBpbmcNCiAg
			ICAvLyBzaXR1YXRpb24sIHdlIGNhbiB0YWtlIHRoaXMgb3JkZXJpbmcgdG8gY29ycmVzcG9uZCB0
			byB0aGUgdmlzdWFsDQogICAgLy8gb3JkZXJpbmcuIFRoaXMgZmluZHMgdGhlIGZpcnN0IHBhcnQg
			d2hvc2UgZW5kIGlzIGFmdGVyIHRoZSBnaXZlbg0KICAgIC8vIGNvb3JkaW5hdGVzLg0KICAgIHZh
			ciBpbmRleCA9IGZpbmRGaXJzdChmdW5jdGlvbiAoaSkgew0KICAgICAgdmFyIHBhcnQgPSBvcmRl
			cltpXSwgbHRyID0gcGFydC5sZXZlbCAhPSAxOw0KICAgICAgcmV0dXJuIGJveElzQWZ0ZXIoY3Vy
			c29yQ29vcmRzKGNtLCBQb3MobGluZU5vJCQxLCBsdHIgPyBwYXJ0LnRvIDogcGFydC5mcm9tLCBs
			dHIgPyAiYmVmb3JlIiA6ICJhZnRlciIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
			ICAgICAgICJsaW5lIiwgbGluZU9iaiwgcHJlcGFyZWRNZWFzdXJlKSwgeCwgeSwgdHJ1ZSkNCiAg
			ICB9LCAwLCBvcmRlci5sZW5ndGggLSAxKTsNCiAgICB2YXIgcGFydCA9IG9yZGVyW2luZGV4XTsN
			CiAgICAvLyBJZiB0aGlzIGlzbid0IHRoZSBmaXJzdCBwYXJ0LCB0aGUgcGFydCdzIHN0YXJ0IGlz
			IGFsc28gYWZ0ZXINCiAgICAvLyB0aGUgY29vcmRpbmF0ZXMsIGFuZCB0aGUgY29vcmRpbmF0ZXMg
			YXJlbid0IG9uIHRoZSBzYW1lIGxpbmUgYXMNCiAgICAvLyB0aGF0IHN0YXJ0LCBtb3ZlIG9uZSBw
			YXJ0IGJhY2suDQogICAgaWYgKGluZGV4ID4gMCkgew0KICAgICAgdmFyIGx0ciA9IHBhcnQubGV2
			ZWwgIT0gMTsNCiAgICAgIHZhciBzdGFydCA9IGN1cnNvckNvb3JkcyhjbSwgUG9zKGxpbmVObyQk
			MSwgbHRyID8gcGFydC5mcm9tIDogcGFydC50bywgbHRyID8gImFmdGVyIiA6ICJiZWZvcmUiKSwN
			CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibGluZSIsIGxpbmVPYmosIHByZXBhcmVk
			TWVhc3VyZSk7DQogICAgICBpZiAoYm94SXNBZnRlcihzdGFydCwgeCwgeSwgdHJ1ZSkgJiYgc3Rh
			cnQudG9wID4geSkNCiAgICAgICAgeyBwYXJ0ID0gb3JkZXJbaW5kZXggLSAxXTsgfQ0KICAgIH0N
			CiAgICByZXR1cm4gcGFydA0KICB9DQoNCiAgZnVuY3Rpb24gY29vcmRzQmlkaVBhcnRXcmFwcGVk
			KGNtLCBsaW5lT2JqLCBfbGluZU5vLCBwcmVwYXJlZE1lYXN1cmUsIG9yZGVyLCB4LCB5KSB7DQog
			ICAgLy8gSW4gYSB3cmFwcGVkIGxpbmUsIHJ0bCB0ZXh0IG9uIHdyYXBwaW5nIGJvdW5kYXJpZXMg
			Y2FuIGRvIHRoaW5ncw0KICAgIC8vIHRoYXQgZG9uJ3QgY29ycmVzcG9uZCB0byB0aGUgb3JkZXJp
			bmcgaW4gb3VyIGBvcmRlcmAgYXJyYXkgYXQNCiAgICAvLyBhbGwsIHNvIGEgYmluYXJ5IHNlYXJj
			aCBkb2Vzbid0IHdvcmssIGFuZCB3ZSB3YW50IHRvIHJldHVybiBhDQogICAgLy8gcGFydCB0aGF0
			IG9ubHkgc3BhbnMgb25lIGxpbmUgc28gdGhhdCB0aGUgYmluYXJ5IHNlYXJjaCBpbg0KICAgIC8v
			IGNvb3Jkc0NoYXJJbm5lciBpcyBzYWZlLiBBcyBzdWNoLCB3ZSBmaXJzdCBmaW5kIHRoZSBleHRl
			bnQgb2YgdGhlDQogICAgLy8gd3JhcHBlZCBsaW5lLCBhbmQgdGhlbiBkbyBhIGZsYXQgc2VhcmNo
			IGluIHdoaWNoIHdlIGRpc2NhcmQgYW55DQogICAgLy8gc3BhbnMgdGhhdCBhcmVuJ3Qgb24gdGhl
			IGxpbmUuDQogICAgdmFyIHJlZiA9IHdyYXBwZWRMaW5lRXh0ZW50KGNtLCBsaW5lT2JqLCBwcmVw
			YXJlZE1lYXN1cmUsIHkpOw0KICAgIHZhciBiZWdpbiA9IHJlZi5iZWdpbjsNCiAgICB2YXIgZW5k
			ID0gcmVmLmVuZDsNCiAgICBpZiAoL1xzLy50ZXN0KGxpbmVPYmoudGV4dC5jaGFyQXQoZW5kIC0g
			MSkpKSB7IGVuZC0tOyB9DQogICAgdmFyIHBhcnQgPSBudWxsLCBjbG9zZXN0RGlzdCA9IG51bGw7
			DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcmRlci5sZW5ndGg7IGkrKykgew0KICAgICAgdmFy
			IHAgPSBvcmRlcltpXTsNCiAgICAgIGlmIChwLmZyb20gPj0gZW5kIHx8IHAudG8gPD0gYmVnaW4p
			IHsgY29udGludWUgfQ0KICAgICAgdmFyIGx0ciA9IHAubGV2ZWwgIT0gMTsNCiAgICAgIHZhciBl
			bmRYID0gbWVhc3VyZUNoYXJQcmVwYXJlZChjbSwgcHJlcGFyZWRNZWFzdXJlLCBsdHIgPyBNYXRo
			Lm1pbihlbmQsIHAudG8pIC0gMSA6IE1hdGgubWF4KGJlZ2luLCBwLmZyb20pKS5yaWdodDsNCiAg
			ICAgIC8vIFdlaWdoIGFnYWluc3Qgc3BhbnMgZW5kaW5nIGJlZm9yZSB0aGlzLCBzbyB0aGF0IHRo
			ZXkgYXJlIG9ubHkNCiAgICAgIC8vIHBpY2tlZCBpZiBub3RoaW5nIGVuZHMgYWZ0ZXINCiAgICAg
			IHZhciBkaXN0ID0gZW5kWCA8IHggPyB4IC0gZW5kWCArIDFlOSA6IGVuZFggLSB4Ow0KICAgICAg
			aWYgKCFwYXJ0IHx8IGNsb3Nlc3REaXN0ID4gZGlzdCkgew0KICAgICAgICBwYXJ0ID0gcDsNCiAg
			ICAgICAgY2xvc2VzdERpc3QgPSBkaXN0Ow0KICAgICAgfQ0KICAgIH0NCiAgICBpZiAoIXBhcnQp
			IHsgcGFydCA9IG9yZGVyW29yZGVyLmxlbmd0aCAtIDFdOyB9DQogICAgLy8gQ2xpcCB0aGUgcGFy
			dCB0byB0aGUgd3JhcHBlZCBsaW5lLg0KICAgIGlmIChwYXJ0LmZyb20gPCBiZWdpbikgeyBwYXJ0
			ID0ge2Zyb206IGJlZ2luLCB0bzogcGFydC50bywgbGV2ZWw6IHBhcnQubGV2ZWx9OyB9DQogICAg
			aWYgKHBhcnQudG8gPiBlbmQpIHsgcGFydCA9IHtmcm9tOiBwYXJ0LmZyb20sIHRvOiBlbmQsIGxl
			dmVsOiBwYXJ0LmxldmVsfTsgfQ0KICAgIHJldHVybiBwYXJ0DQogIH0NCg0KICB2YXIgbWVhc3Vy
			ZVRleHQ7DQogIC8vIENvbXB1dGUgdGhlIGRlZmF1bHQgdGV4dCBoZWlnaHQuDQogIGZ1bmN0aW9u
			IHRleHRIZWlnaHQoZGlzcGxheSkgew0KICAgIGlmIChkaXNwbGF5LmNhY2hlZFRleHRIZWlnaHQg
			IT0gbnVsbCkgeyByZXR1cm4gZGlzcGxheS5jYWNoZWRUZXh0SGVpZ2h0IH0NCiAgICBpZiAobWVh
			c3VyZVRleHQgPT0gbnVsbCkgew0KICAgICAgbWVhc3VyZVRleHQgPSBlbHQoInByZSIsIG51bGws
			ICJDb2RlTWlycm9yLWxpbmUtbGlrZSIpOw0KICAgICAgLy8gTWVhc3VyZSBhIGJ1bmNoIG9mIGxp
			bmVzLCBmb3IgYnJvd3NlcnMgdGhhdCBjb21wdXRlDQogICAgICAvLyBmcmFjdGlvbmFsIGhlaWdo
			dHMuDQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ5OyArK2kpIHsNCiAgICAgICAgbWVhc3Vy
			ZVRleHQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIngiKSk7DQogICAgICAg
			IG1lYXN1cmVUZXh0LmFwcGVuZENoaWxkKGVsdCgiYnIiKSk7DQogICAgICB9DQogICAgICBtZWFz
			dXJlVGV4dC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgieCIpKTsNCiAgICB9
			DQogICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoZGlzcGxheS5tZWFzdXJlLCBtZWFzdXJlVGV4dCk7
			DQogICAgdmFyIGhlaWdodCA9IG1lYXN1cmVUZXh0Lm9mZnNldEhlaWdodCAvIDUwOw0KICAgIGlm
			IChoZWlnaHQgPiAzKSB7IGRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodCA9IGhlaWdodDsgfQ0KICAg
			IHJlbW92ZUNoaWxkcmVuKGRpc3BsYXkubWVhc3VyZSk7DQogICAgcmV0dXJuIGhlaWdodCB8fCAx
			DQogIH0NCg0KICAvLyBDb21wdXRlIHRoZSBkZWZhdWx0IGNoYXJhY3RlciB3aWR0aC4NCiAgZnVu
			Y3Rpb24gY2hhcldpZHRoKGRpc3BsYXkpIHsNCiAgICBpZiAoZGlzcGxheS5jYWNoZWRDaGFyV2lk
			dGggIT0gbnVsbCkgeyByZXR1cm4gZGlzcGxheS5jYWNoZWRDaGFyV2lkdGggfQ0KICAgIHZhciBh
			bmNob3IgPSBlbHQoInNwYW4iLCAieHh4eHh4eHh4eCIpOw0KICAgIHZhciBwcmUgPSBlbHQoInBy
			ZSIsIFthbmNob3JdLCAiQ29kZU1pcnJvci1saW5lLWxpa2UiKTsNCiAgICByZW1vdmVDaGlsZHJl
			bkFuZEFkZChkaXNwbGF5Lm1lYXN1cmUsIHByZSk7DQogICAgdmFyIHJlY3QgPSBhbmNob3IuZ2V0
			Qm91bmRpbmdDbGllbnRSZWN0KCksIHdpZHRoID0gKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpIC8g
			MTA7DQogICAgaWYgKHdpZHRoID4gMikgeyBkaXNwbGF5LmNhY2hlZENoYXJXaWR0aCA9IHdpZHRo
			OyB9DQogICAgcmV0dXJuIHdpZHRoIHx8IDEwDQogIH0NCg0KICAvLyBEbyBhIGJ1bGstcmVhZCBv
			ZiB0aGUgRE9NIHBvc2l0aW9ucyBhbmQgc2l6ZXMgbmVlZGVkIHRvIGRyYXcgdGhlDQogIC8vIHZp
			ZXcsIHNvIHRoYXQgd2UgZG9uJ3QgaW50ZXJsZWF2ZSByZWFkaW5nIGFuZCB3cml0aW5nIHRvIHRo
			ZSBET00uDQogIGZ1bmN0aW9uIGdldERpbWVuc2lvbnMoY20pIHsNCiAgICB2YXIgZCA9IGNtLmRp
			c3BsYXksIGxlZnQgPSB7fSwgd2lkdGggPSB7fTsNCiAgICB2YXIgZ3V0dGVyTGVmdCA9IGQuZ3V0
			dGVycy5jbGllbnRMZWZ0Ow0KICAgIGZvciAodmFyIG4gPSBkLmd1dHRlcnMuZmlyc3RDaGlsZCwg
			aSA9IDA7IG47IG4gPSBuLm5leHRTaWJsaW5nLCArK2kpIHsNCiAgICAgIHZhciBpZCA9IGNtLmRp
			c3BsYXkuZ3V0dGVyU3BlY3NbaV0uY2xhc3NOYW1lOw0KICAgICAgbGVmdFtpZF0gPSBuLm9mZnNl
			dExlZnQgKyBuLmNsaWVudExlZnQgKyBndXR0ZXJMZWZ0Ow0KICAgICAgd2lkdGhbaWRdID0gbi5j
			bGllbnRXaWR0aDsNCiAgICB9DQogICAgcmV0dXJuIHtmaXhlZFBvczogY29tcGVuc2F0ZUZvckhT
			Y3JvbGwoZCksDQogICAgICAgICAgICBndXR0ZXJUb3RhbFdpZHRoOiBkLmd1dHRlcnMub2Zmc2V0
			V2lkdGgsDQogICAgICAgICAgICBndXR0ZXJMZWZ0OiBsZWZ0LA0KICAgICAgICAgICAgZ3V0dGVy
			V2lkdGg6IHdpZHRoLA0KICAgICAgICAgICAgd3JhcHBlcldpZHRoOiBkLndyYXBwZXIuY2xpZW50
			V2lkdGh9DQogIH0NCg0KICAvLyBDb21wdXRlcyBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbExlZnQg
			KyBkaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGgsDQogIC8vIGJ1dCB1c2luZyBnZXRCb3VuZGlu
			Z0NsaWVudFJlY3QgdG8gZ2V0IGEgc3ViLXBpeGVsLWFjY3VyYXRlDQogIC8vIHJlc3VsdC4NCiAg
			ZnVuY3Rpb24gY29tcGVuc2F0ZUZvckhTY3JvbGwoZGlzcGxheSkgew0KICAgIHJldHVybiBkaXNw
			bGF5LnNjcm9sbGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSBkaXNwbGF5LnNpemVy
			LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQNCiAgfQ0KDQogIC8vIFJldHVybnMgYSBmdW5j
			dGlvbiB0aGF0IGVzdGltYXRlcyB0aGUgaGVpZ2h0IG9mIGEgbGluZSwgdG8gdXNlIGFzDQogIC8v
			IGZpcnN0IGFwcHJveGltYXRpb24gdW50aWwgdGhlIGxpbmUgYmVjb21lcyB2aXNpYmxlIChhbmQg
			aXMgdGh1cw0KICAvLyBwcm9wZXJseSBtZWFzdXJhYmxlKS4NCiAgZnVuY3Rpb24gZXN0aW1hdGVI
			ZWlnaHQoY20pIHsNCiAgICB2YXIgdGggPSB0ZXh0SGVpZ2h0KGNtLmRpc3BsYXkpLCB3cmFwcGlu
			ZyA9IGNtLm9wdGlvbnMubGluZVdyYXBwaW5nOw0KICAgIHZhciBwZXJMaW5lID0gd3JhcHBpbmcg
			JiYgTWF0aC5tYXgoNSwgY20uZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aCAvIGNoYXJXaWR0
			aChjbS5kaXNwbGF5KSAtIDMpOw0KICAgIHJldHVybiBmdW5jdGlvbiAobGluZSkgew0KICAgICAg
			aWYgKGxpbmVJc0hpZGRlbihjbS5kb2MsIGxpbmUpKSB7IHJldHVybiAwIH0NCg0KICAgICAgdmFy
			IHdpZGdldHNIZWlnaHQgPSAwOw0KICAgICAgaWYgKGxpbmUud2lkZ2V0cykgeyBmb3IgKHZhciBp
			ID0gMDsgaSA8IGxpbmUud2lkZ2V0cy5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAobGluZS53
			aWRnZXRzW2ldLmhlaWdodCkgeyB3aWRnZXRzSGVpZ2h0ICs9IGxpbmUud2lkZ2V0c1tpXS5oZWln
			aHQ7IH0NCiAgICAgIH0gfQ0KDQogICAgICBpZiAod3JhcHBpbmcpDQogICAgICAgIHsgcmV0dXJu
			IHdpZGdldHNIZWlnaHQgKyAoTWF0aC5jZWlsKGxpbmUudGV4dC5sZW5ndGggLyBwZXJMaW5lKSB8
			fCAxKSAqIHRoIH0NCiAgICAgIGVsc2UNCiAgICAgICAgeyByZXR1cm4gd2lkZ2V0c0hlaWdodCAr
			IHRoIH0NCiAgICB9DQogIH0NCg0KICBmdW5jdGlvbiBlc3RpbWF0ZUxpbmVIZWlnaHRzKGNtKSB7
			DQogICAgdmFyIGRvYyA9IGNtLmRvYywgZXN0ID0gZXN0aW1hdGVIZWlnaHQoY20pOw0KICAgIGRv
			Yy5pdGVyKGZ1bmN0aW9uIChsaW5lKSB7DQogICAgICB2YXIgZXN0SGVpZ2h0ID0gZXN0KGxpbmUp
			Ow0KICAgICAgaWYgKGVzdEhlaWdodCAhPSBsaW5lLmhlaWdodCkgeyB1cGRhdGVMaW5lSGVpZ2h0
			KGxpbmUsIGVzdEhlaWdodCk7IH0NCiAgICB9KTsNCiAgfQ0KDQogIC8vIEdpdmVuIGEgbW91c2Ug
			ZXZlbnQsIGZpbmQgdGhlIGNvcnJlc3BvbmRpbmcgcG9zaXRpb24uIElmIGxpYmVyYWwNCiAgLy8g
			aXMgZmFsc2UsIGl0IGNoZWNrcyB3aGV0aGVyIGEgZ3V0dGVyIG9yIHNjcm9sbGJhciB3YXMgY2xp
			Y2tlZCwNCiAgLy8gYW5kIHJldHVybnMgbnVsbCBpZiBpdCB3YXMuIGZvclJlY3QgaXMgdXNlZCBi
			eSByZWN0YW5ndWxhcg0KICAvLyBzZWxlY3Rpb25zLCBhbmQgdHJpZXMgdG8gZXN0aW1hdGUgYSBj
			aGFyYWN0ZXIgcG9zaXRpb24gZXZlbiBmb3INCiAgLy8gY29vcmRpbmF0ZXMgYmV5b25kIHRoZSBy
			aWdodCBvZiB0aGUgdGV4dC4NCiAgZnVuY3Rpb24gcG9zRnJvbU1vdXNlKGNtLCBlLCBsaWJlcmFs
			LCBmb3JSZWN0KSB7DQogICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5Ow0KICAgIGlmICghbGli
			ZXJhbCAmJiBlX3RhcmdldChlKS5nZXRBdHRyaWJ1dGUoImNtLW5vdC1jb250ZW50IikgPT0gInRy
			dWUiKSB7IHJldHVybiBudWxsIH0NCg0KICAgIHZhciB4LCB5LCBzcGFjZSA9IGRpc3BsYXkubGlu
			ZVNwYWNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOw0KICAgIC8vIEZhaWxzIHVucHJlZGljdGFi
			bHkgb24gSUVbNjddIHdoZW4gbW91c2UgaXMgZHJhZ2dlZCBhcm91bmQgcXVpY2tseS4NCiAgICB0
			cnkgeyB4ID0gZS5jbGllbnRYIC0gc3BhY2UubGVmdDsgeSA9IGUuY2xpZW50WSAtIHNwYWNlLnRv
			cDsgfQ0KICAgIGNhdGNoIChlKSB7IHJldHVybiBudWxsIH0NCiAgICB2YXIgY29vcmRzID0gY29v
			cmRzQ2hhcihjbSwgeCwgeSksIGxpbmU7DQogICAgaWYgKGZvclJlY3QgJiYgY29vcmRzLnhSZWwg
			PiAwICYmIChsaW5lID0gZ2V0TGluZShjbS5kb2MsIGNvb3Jkcy5saW5lKS50ZXh0KS5sZW5ndGgg
			PT0gY29vcmRzLmNoKSB7DQogICAgICB2YXIgY29sRGlmZiA9IGNvdW50Q29sdW1uKGxpbmUsIGxp
			bmUubGVuZ3RoLCBjbS5vcHRpb25zLnRhYlNpemUpIC0gbGluZS5sZW5ndGg7DQogICAgICBjb29y
			ZHMgPSBQb3MoY29vcmRzLmxpbmUsIE1hdGgubWF4KDAsIE1hdGgucm91bmQoKHggLSBwYWRkaW5n
			SChjbS5kaXNwbGF5KS5sZWZ0KSAvIGNoYXJXaWR0aChjbS5kaXNwbGF5KSkgLSBjb2xEaWZmKSk7
			DQogICAgfQ0KICAgIHJldHVybiBjb29yZHMNCiAgfQ0KDQogIC8vIEZpbmQgdGhlIHZpZXcgZWxl
			bWVudCBjb3JyZXNwb25kaW5nIHRvIGEgZ2l2ZW4gbGluZS4gUmV0dXJuIG51bGwNCiAgLy8gd2hl
			biB0aGUgbGluZSBpc24ndCB2aXNpYmxlLg0KICBmdW5jdGlvbiBmaW5kVmlld0luZGV4KGNtLCBu
			KSB7DQogICAgaWYgKG4gPj0gY20uZGlzcGxheS52aWV3VG8pIHsgcmV0dXJuIG51bGwgfQ0KICAg
			IG4gLT0gY20uZGlzcGxheS52aWV3RnJvbTsNCiAgICBpZiAobiA8IDApIHsgcmV0dXJuIG51bGwg
			fQ0KICAgIHZhciB2aWV3ID0gY20uZGlzcGxheS52aWV3Ow0KICAgIGZvciAodmFyIGkgPSAwOyBp
			IDwgdmlldy5sZW5ndGg7IGkrKykgew0KICAgICAgbiAtPSB2aWV3W2ldLnNpemU7DQogICAgICBp
			ZiAobiA8IDApIHsgcmV0dXJuIGkgfQ0KICAgIH0NCiAgfQ0KDQogIC8vIFVwZGF0ZXMgdGhlIGRp
			c3BsYXkudmlldyBkYXRhIHN0cnVjdHVyZSBmb3IgYSBnaXZlbiBjaGFuZ2UgdG8gdGhlDQogIC8v
			IGRvY3VtZW50LiBGcm9tIGFuZCB0byBhcmUgaW4gcHJlLWNoYW5nZSBjb29yZGluYXRlcy4gTGVu
			ZGlmZiBpcw0KICAvLyB0aGUgYW1vdW50IG9mIGxpbmVzIGFkZGVkIG9yIHN1YnRyYWN0ZWQgYnkg
			dGhlIGNoYW5nZS4gVGhpcyBpcw0KICAvLyB1c2VkIGZvciBjaGFuZ2VzIHRoYXQgc3BhbiBtdWx0
			aXBsZSBsaW5lcywgb3IgY2hhbmdlIHRoZSB3YXkNCiAgLy8gbGluZXMgYXJlIGRpdmlkZWQgaW50
			byB2aXN1YWwgbGluZXMuIHJlZ0xpbmVDaGFuZ2UgKGJlbG93KQ0KICAvLyByZWdpc3RlcnMgc2lu
			Z2xlLWxpbmUgY2hhbmdlcy4NCiAgZnVuY3Rpb24gcmVnQ2hhbmdlKGNtLCBmcm9tLCB0bywgbGVu
			ZGlmZikgew0KICAgIGlmIChmcm9tID09IG51bGwpIHsgZnJvbSA9IGNtLmRvYy5maXJzdDsgfQ0K
			ICAgIGlmICh0byA9PSBudWxsKSB7IHRvID0gY20uZG9jLmZpcnN0ICsgY20uZG9jLnNpemU7IH0N
			CiAgICBpZiAoIWxlbmRpZmYpIHsgbGVuZGlmZiA9IDA7IH0NCg0KICAgIHZhciBkaXNwbGF5ID0g
			Y20uZGlzcGxheTsNCiAgICBpZiAobGVuZGlmZiAmJiB0byA8IGRpc3BsYXkudmlld1RvICYmDQog
			ICAgICAgIChkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJzID09IG51bGwgfHwgZGlzcGxheS51cGRh
			dGVMaW5lTnVtYmVycyA+IGZyb20pKQ0KICAgICAgeyBkaXNwbGF5LnVwZGF0ZUxpbmVOdW1iZXJz
			ID0gZnJvbTsgfQ0KDQogICAgY20uY3VyT3Audmlld0NoYW5nZWQgPSB0cnVlOw0KDQogICAgaWYg
			KGZyb20gPj0gZGlzcGxheS52aWV3VG8pIHsgLy8gQ2hhbmdlIGFmdGVyDQogICAgICBpZiAoc2F3
			Q29sbGFwc2VkU3BhbnMgJiYgdmlzdWFsTGluZU5vKGNtLmRvYywgZnJvbSkgPCBkaXNwbGF5LnZp
			ZXdUbykNCiAgICAgICAgeyByZXNldFZpZXcoY20pOyB9DQogICAgfSBlbHNlIGlmICh0byA8PSBk
			aXNwbGF5LnZpZXdGcm9tKSB7IC8vIENoYW5nZSBiZWZvcmUNCiAgICAgIGlmIChzYXdDb2xsYXBz
			ZWRTcGFucyAmJiB2aXN1YWxMaW5lRW5kTm8oY20uZG9jLCB0byArIGxlbmRpZmYpID4gZGlzcGxh
			eS52aWV3RnJvbSkgew0KICAgICAgICByZXNldFZpZXcoY20pOw0KICAgICAgfSBlbHNlIHsNCiAg
			ICAgICAgZGlzcGxheS52aWV3RnJvbSArPSBsZW5kaWZmOw0KICAgICAgICBkaXNwbGF5LnZpZXdU
			byArPSBsZW5kaWZmOw0KICAgICAgfQ0KICAgIH0gZWxzZSBpZiAoZnJvbSA8PSBkaXNwbGF5LnZp
			ZXdGcm9tICYmIHRvID49IGRpc3BsYXkudmlld1RvKSB7IC8vIEZ1bGwgb3ZlcmxhcA0KICAgICAg
			cmVzZXRWaWV3KGNtKTsNCiAgICB9IGVsc2UgaWYgKGZyb20gPD0gZGlzcGxheS52aWV3RnJvbSkg
			eyAvLyBUb3Agb3ZlcmxhcA0KICAgICAgdmFyIGN1dCA9IHZpZXdDdXR0aW5nUG9pbnQoY20sIHRv
			LCB0byArIGxlbmRpZmYsIDEpOw0KICAgICAgaWYgKGN1dCkgew0KICAgICAgICBkaXNwbGF5LnZp
			ZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoY3V0LmluZGV4KTsNCiAgICAgICAgZGlzcGxheS52aWV3
			RnJvbSA9IGN1dC5saW5lTjsNCiAgICAgICAgZGlzcGxheS52aWV3VG8gKz0gbGVuZGlmZjsNCiAg
			ICAgIH0gZWxzZSB7DQogICAgICAgIHJlc2V0VmlldyhjbSk7DQogICAgICB9DQogICAgfSBlbHNl
			IGlmICh0byA+PSBkaXNwbGF5LnZpZXdUbykgeyAvLyBCb3R0b20gb3ZlcmxhcA0KICAgICAgdmFy
			IGN1dCQxID0gdmlld0N1dHRpbmdQb2ludChjbSwgZnJvbSwgZnJvbSwgLTEpOw0KICAgICAgaWYg
			KGN1dCQxKSB7DQogICAgICAgIGRpc3BsYXkudmlldyA9IGRpc3BsYXkudmlldy5zbGljZSgwLCBj
			dXQkMS5pbmRleCk7DQogICAgICAgIGRpc3BsYXkudmlld1RvID0gY3V0JDEubGluZU47DQogICAg
			ICB9IGVsc2Ugew0KICAgICAgICByZXNldFZpZXcoY20pOw0KICAgICAgfQ0KICAgIH0gZWxzZSB7
			IC8vIEdhcCBpbiB0aGUgbWlkZGxlDQogICAgICB2YXIgY3V0VG9wID0gdmlld0N1dHRpbmdQb2lu
			dChjbSwgZnJvbSwgZnJvbSwgLTEpOw0KICAgICAgdmFyIGN1dEJvdCA9IHZpZXdDdXR0aW5nUG9p
			bnQoY20sIHRvLCB0byArIGxlbmRpZmYsIDEpOw0KICAgICAgaWYgKGN1dFRvcCAmJiBjdXRCb3Qp
			IHsNCiAgICAgICAgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LnNsaWNlKDAsIGN1dFRvcC5p
			bmRleCkNCiAgICAgICAgICAuY29uY2F0KGJ1aWxkVmlld0FycmF5KGNtLCBjdXRUb3AubGluZU4s
			IGN1dEJvdC5saW5lTikpDQogICAgICAgICAgLmNvbmNhdChkaXNwbGF5LnZpZXcuc2xpY2UoY3V0
			Qm90LmluZGV4KSk7DQogICAgICAgIGRpc3BsYXkudmlld1RvICs9IGxlbmRpZmY7DQogICAgICB9
			IGVsc2Ugew0KICAgICAgICByZXNldFZpZXcoY20pOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIHZh
			ciBleHQgPSBkaXNwbGF5LmV4dGVybmFsTWVhc3VyZWQ7DQogICAgaWYgKGV4dCkgew0KICAgICAg
			aWYgKHRvIDwgZXh0LmxpbmVOKQ0KICAgICAgICB7IGV4dC5saW5lTiArPSBsZW5kaWZmOyB9DQog
			ICAgICBlbHNlIGlmIChmcm9tIDwgZXh0LmxpbmVOICsgZXh0LnNpemUpDQogICAgICAgIHsgZGlz
			cGxheS5leHRlcm5hbE1lYXN1cmVkID0gbnVsbDsgfQ0KICAgIH0NCiAgfQ0KDQogIC8vIFJlZ2lz
			dGVyIGEgY2hhbmdlIHRvIGEgc2luZ2xlIGxpbmUuIFR5cGUgbXVzdCBiZSBvbmUgb2YgInRleHQi
			LA0KICAvLyAiZ3V0dGVyIiwgImNsYXNzIiwgIndpZGdldCINCiAgZnVuY3Rpb24gcmVnTGluZUNo
			YW5nZShjbSwgbGluZSwgdHlwZSkgew0KICAgIGNtLmN1ck9wLnZpZXdDaGFuZ2VkID0gdHJ1ZTsN
			CiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGV4dCA9IGNtLmRpc3BsYXkuZXh0ZXJuYWxN
			ZWFzdXJlZDsNCiAgICBpZiAoZXh0ICYmIGxpbmUgPj0gZXh0LmxpbmVOICYmIGxpbmUgPCBleHQu
			bGluZU4gKyBleHQuc2l6ZSkNCiAgICAgIHsgZGlzcGxheS5leHRlcm5hbE1lYXN1cmVkID0gbnVs
			bDsgfQ0KDQogICAgaWYgKGxpbmUgPCBkaXNwbGF5LnZpZXdGcm9tIHx8IGxpbmUgPj0gZGlzcGxh
			eS52aWV3VG8pIHsgcmV0dXJuIH0NCiAgICB2YXIgbGluZVZpZXcgPSBkaXNwbGF5LnZpZXdbZmlu
			ZFZpZXdJbmRleChjbSwgbGluZSldOw0KICAgIGlmIChsaW5lVmlldy5ub2RlID09IG51bGwpIHsg
			cmV0dXJuIH0NCiAgICB2YXIgYXJyID0gbGluZVZpZXcuY2hhbmdlcyB8fCAobGluZVZpZXcuY2hh
			bmdlcyA9IFtdKTsNCiAgICBpZiAoaW5kZXhPZihhcnIsIHR5cGUpID09IC0xKSB7IGFyci5wdXNo
			KHR5cGUpOyB9DQogIH0NCg0KICAvLyBDbGVhciB0aGUgdmlldy4NCiAgZnVuY3Rpb24gcmVzZXRW
			aWV3KGNtKSB7DQogICAgY20uZGlzcGxheS52aWV3RnJvbSA9IGNtLmRpc3BsYXkudmlld1RvID0g
			Y20uZG9jLmZpcnN0Ow0KICAgIGNtLmRpc3BsYXkudmlldyA9IFtdOw0KICAgIGNtLmRpc3BsYXku
			dmlld09mZnNldCA9IDA7DQogIH0NCg0KICBmdW5jdGlvbiB2aWV3Q3V0dGluZ1BvaW50KGNtLCBv
			bGROLCBuZXdOLCBkaXIpIHsNCiAgICB2YXIgaW5kZXggPSBmaW5kVmlld0luZGV4KGNtLCBvbGRO
			KSwgZGlmZiwgdmlldyA9IGNtLmRpc3BsYXkudmlldzsNCiAgICBpZiAoIXNhd0NvbGxhcHNlZFNw
			YW5zIHx8IG5ld04gPT0gY20uZG9jLmZpcnN0ICsgY20uZG9jLnNpemUpDQogICAgICB7IHJldHVy
			biB7aW5kZXg6IGluZGV4LCBsaW5lTjogbmV3Tn0gfQ0KICAgIHZhciBuID0gY20uZGlzcGxheS52
			aWV3RnJvbTsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZGV4OyBpKyspDQogICAgICB7IG4g
			Kz0gdmlld1tpXS5zaXplOyB9DQogICAgaWYgKG4gIT0gb2xkTikgew0KICAgICAgaWYgKGRpciA+
			IDApIHsNCiAgICAgICAgaWYgKGluZGV4ID09IHZpZXcubGVuZ3RoIC0gMSkgeyByZXR1cm4gbnVs
			bCB9DQogICAgICAgIGRpZmYgPSAobiArIHZpZXdbaW5kZXhdLnNpemUpIC0gb2xkTjsNCiAgICAg
			ICAgaW5kZXgrKzsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGRpZmYgPSBuIC0gb2xkTjsNCiAg
			ICAgIH0NCiAgICAgIG9sZE4gKz0gZGlmZjsgbmV3TiArPSBkaWZmOw0KICAgIH0NCiAgICB3aGls
			ZSAodmlzdWFsTGluZU5vKGNtLmRvYywgbmV3TikgIT0gbmV3Tikgew0KICAgICAgaWYgKGluZGV4
			ID09IChkaXIgPCAwID8gMCA6IHZpZXcubGVuZ3RoIC0gMSkpIHsgcmV0dXJuIG51bGwgfQ0KICAg
			ICAgbmV3TiArPSBkaXIgKiB2aWV3W2luZGV4IC0gKGRpciA8IDAgPyAxIDogMCldLnNpemU7DQog
			ICAgICBpbmRleCArPSBkaXI7DQogICAgfQ0KICAgIHJldHVybiB7aW5kZXg6IGluZGV4LCBsaW5l
			TjogbmV3Tn0NCiAgfQ0KDQogIC8vIEZvcmNlIHRoZSB2aWV3IHRvIGNvdmVyIGEgZ2l2ZW4gcmFu
			Z2UsIGFkZGluZyBlbXB0eSB2aWV3IGVsZW1lbnQNCiAgLy8gb3IgY2xpcHBpbmcgb2ZmIGV4aXN0
			aW5nIG9uZXMgYXMgbmVlZGVkLg0KICBmdW5jdGlvbiBhZGp1c3RWaWV3KGNtLCBmcm9tLCB0bykg
			ew0KICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgdmlldyA9IGRpc3BsYXkudmlldzsNCiAg
			ICBpZiAodmlldy5sZW5ndGggPT0gMCB8fCBmcm9tID49IGRpc3BsYXkudmlld1RvIHx8IHRvIDw9
			IGRpc3BsYXkudmlld0Zyb20pIHsNCiAgICAgIGRpc3BsYXkudmlldyA9IGJ1aWxkVmlld0FycmF5
			KGNtLCBmcm9tLCB0byk7DQogICAgICBkaXNwbGF5LnZpZXdGcm9tID0gZnJvbTsNCiAgICB9IGVs
			c2Ugew0KICAgICAgaWYgKGRpc3BsYXkudmlld0Zyb20gPiBmcm9tKQ0KICAgICAgICB7IGRpc3Bs
			YXkudmlldyA9IGJ1aWxkVmlld0FycmF5KGNtLCBmcm9tLCBkaXNwbGF5LnZpZXdGcm9tKS5jb25j
			YXQoZGlzcGxheS52aWV3KTsgfQ0KICAgICAgZWxzZSBpZiAoZGlzcGxheS52aWV3RnJvbSA8IGZy
			b20pDQogICAgICAgIHsgZGlzcGxheS52aWV3ID0gZGlzcGxheS52aWV3LnNsaWNlKGZpbmRWaWV3
			SW5kZXgoY20sIGZyb20pKTsgfQ0KICAgICAgZGlzcGxheS52aWV3RnJvbSA9IGZyb207DQogICAg
			ICBpZiAoZGlzcGxheS52aWV3VG8gPCB0bykNCiAgICAgICAgeyBkaXNwbGF5LnZpZXcgPSBkaXNw
			bGF5LnZpZXcuY29uY2F0KGJ1aWxkVmlld0FycmF5KGNtLCBkaXNwbGF5LnZpZXdUbywgdG8pKTsg
			fQ0KICAgICAgZWxzZSBpZiAoZGlzcGxheS52aWV3VG8gPiB0bykNCiAgICAgICAgeyBkaXNwbGF5
			LnZpZXcgPSBkaXNwbGF5LnZpZXcuc2xpY2UoMCwgZmluZFZpZXdJbmRleChjbSwgdG8pKTsgfQ0K
			ICAgIH0NCiAgICBkaXNwbGF5LnZpZXdUbyA9IHRvOw0KICB9DQoNCiAgLy8gQ291bnQgdGhlIG51
			bWJlciBvZiBsaW5lcyBpbiB0aGUgdmlldyB3aG9zZSBET00gcmVwcmVzZW50YXRpb24gaXMNCiAg
			Ly8gb3V0IG9mIGRhdGUgKG9yIG5vbmV4aXN0ZW50KS4NCiAgZnVuY3Rpb24gY291bnREaXJ0eVZp
			ZXcoY20pIHsNCiAgICB2YXIgdmlldyA9IGNtLmRpc3BsYXkudmlldywgZGlydHkgPSAwOw0KICAg
			IGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykgew0KICAgICAgdmFyIGxpbmVW
			aWV3ID0gdmlld1tpXTsNCiAgICAgIGlmICghbGluZVZpZXcuaGlkZGVuICYmICghbGluZVZpZXcu
			bm9kZSB8fCBsaW5lVmlldy5jaGFuZ2VzKSkgeyArK2RpcnR5OyB9DQogICAgfQ0KICAgIHJldHVy
			biBkaXJ0eQ0KICB9DQoNCiAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0aW9uKGNtKSB7DQogICAgY20u
			ZGlzcGxheS5pbnB1dC5zaG93U2VsZWN0aW9uKGNtLmRpc3BsYXkuaW5wdXQucHJlcGFyZVNlbGVj
			dGlvbigpKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHByZXBhcmVTZWxlY3Rpb24oY20sIHByaW1hcnkp
			IHsNCiAgICBpZiAoIHByaW1hcnkgPT09IHZvaWQgMCApIHByaW1hcnkgPSB0cnVlOw0KDQogICAg
			dmFyIGRvYyA9IGNtLmRvYywgcmVzdWx0ID0ge307DQogICAgdmFyIGN1ckZyYWdtZW50ID0gcmVz
			dWx0LmN1cnNvcnMgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7DQogICAgdmFy
			IHNlbEZyYWdtZW50ID0gcmVzdWx0LnNlbGVjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50
			RnJhZ21lbnQoKTsNCg0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jLnNlbC5yYW5nZXMubGVu
			Z3RoOyBpKyspIHsNCiAgICAgIGlmICghcHJpbWFyeSAmJiBpID09IGRvYy5zZWwucHJpbUluZGV4
			KSB7IGNvbnRpbnVlIH0NCiAgICAgIHZhciByYW5nZSQkMSA9IGRvYy5zZWwucmFuZ2VzW2ldOw0K
			ICAgICAgaWYgKHJhbmdlJCQxLmZyb20oKS5saW5lID49IGNtLmRpc3BsYXkudmlld1RvIHx8IHJh
			bmdlJCQxLnRvKCkubGluZSA8IGNtLmRpc3BsYXkudmlld0Zyb20pIHsgY29udGludWUgfQ0KICAg
			ICAgdmFyIGNvbGxhcHNlZCA9IHJhbmdlJCQxLmVtcHR5KCk7DQogICAgICBpZiAoY29sbGFwc2Vk
			IHx8IGNtLm9wdGlvbnMuc2hvd0N1cnNvcldoZW5TZWxlY3RpbmcpDQogICAgICAgIHsgZHJhd1Nl
			bGVjdGlvbkN1cnNvcihjbSwgcmFuZ2UkJDEuaGVhZCwgY3VyRnJhZ21lbnQpOyB9DQogICAgICBp
			ZiAoIWNvbGxhcHNlZCkNCiAgICAgICAgeyBkcmF3U2VsZWN0aW9uUmFuZ2UoY20sIHJhbmdlJCQx
			LCBzZWxGcmFnbWVudCk7IH0NCiAgICB9DQogICAgcmV0dXJuIHJlc3VsdA0KICB9DQoNCiAgLy8g
			RHJhd3MgYSBjdXJzb3IgZm9yIHRoZSBnaXZlbiByYW5nZQ0KICBmdW5jdGlvbiBkcmF3U2VsZWN0
			aW9uQ3Vyc29yKGNtLCBoZWFkLCBvdXRwdXQpIHsNCiAgICB2YXIgcG9zID0gY3Vyc29yQ29vcmRz
			KGNtLCBoZWFkLCAiZGl2IiwgbnVsbCwgbnVsbCwgIWNtLm9wdGlvbnMuc2luZ2xlQ3Vyc29ySGVp
			Z2h0UGVyTGluZSk7DQoNCiAgICB2YXIgY3Vyc29yID0gb3V0cHV0LmFwcGVuZENoaWxkKGVsdCgi
			ZGl2IiwgIlx1MDBhMCIsICJDb2RlTWlycm9yLWN1cnNvciIpKTsNCiAgICBjdXJzb3Iuc3R5bGUu
			bGVmdCA9IHBvcy5sZWZ0ICsgInB4IjsNCiAgICBjdXJzb3Iuc3R5bGUudG9wID0gcG9zLnRvcCAr
			ICJweCI7DQogICAgY3Vyc29yLnN0eWxlLmhlaWdodCA9IE1hdGgubWF4KDAsIHBvcy5ib3R0b20g
			LSBwb3MudG9wKSAqIGNtLm9wdGlvbnMuY3Vyc29ySGVpZ2h0ICsgInB4IjsNCg0KICAgIGlmIChw
			b3Mub3RoZXIpIHsNCiAgICAgIC8vIFNlY29uZGFyeSBjdXJzb3IsIHNob3duIHdoZW4gb24gYSAn
			anVtcCcgaW4gYmktZGlyZWN0aW9uYWwgdGV4dA0KICAgICAgdmFyIG90aGVyQ3Vyc29yID0gb3V0
			cHV0LmFwcGVuZENoaWxkKGVsdCgiZGl2IiwgIlx1MDBhMCIsICJDb2RlTWlycm9yLWN1cnNvciBD
			b2RlTWlycm9yLXNlY29uZGFyeWN1cnNvciIpKTsNCiAgICAgIG90aGVyQ3Vyc29yLnN0eWxlLmRp
			c3BsYXkgPSAiIjsNCiAgICAgIG90aGVyQ3Vyc29yLnN0eWxlLmxlZnQgPSBwb3Mub3RoZXIubGVm
			dCArICJweCI7DQogICAgICBvdGhlckN1cnNvci5zdHlsZS50b3AgPSBwb3Mub3RoZXIudG9wICsg
			InB4IjsNCiAgICAgIG90aGVyQ3Vyc29yLnN0eWxlLmhlaWdodCA9IChwb3Mub3RoZXIuYm90dG9t
			IC0gcG9zLm90aGVyLnRvcCkgKiAuODUgKyAicHgiOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9u
			IGNtcENvb3JkcyhhLCBiKSB7IHJldHVybiBhLnRvcCAtIGIudG9wIHx8IGEubGVmdCAtIGIubGVm
			dCB9DQoNCiAgLy8gRHJhd3MgdGhlIGdpdmVuIHJhbmdlIGFzIGEgaGlnaGxpZ2h0ZWQgc2VsZWN0
			aW9uDQogIGZ1bmN0aW9uIGRyYXdTZWxlY3Rpb25SYW5nZShjbSwgcmFuZ2UkJDEsIG91dHB1dCkg
			ew0KICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwgZG9jID0gY20uZG9jOw0KICAgIHZhciBm
			cmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsNCiAgICB2YXIgcGFk
			ZGluZyA9IHBhZGRpbmdIKGNtLmRpc3BsYXkpLCBsZWZ0U2lkZSA9IHBhZGRpbmcubGVmdDsNCiAg
			ICB2YXIgcmlnaHRTaWRlID0gTWF0aC5tYXgoZGlzcGxheS5zaXplcldpZHRoLCBkaXNwbGF5V2lk
			dGgoY20pIC0gZGlzcGxheS5zaXplci5vZmZzZXRMZWZ0KSAtIHBhZGRpbmcucmlnaHQ7DQogICAg
			dmFyIGRvY0xUUiA9IGRvYy5kaXJlY3Rpb24gPT0gImx0ciI7DQoNCiAgICBmdW5jdGlvbiBhZGQo
			bGVmdCwgdG9wLCB3aWR0aCwgYm90dG9tKSB7DQogICAgICBpZiAodG9wIDwgMCkgeyB0b3AgPSAw
			OyB9DQogICAgICB0b3AgPSBNYXRoLnJvdW5kKHRvcCk7DQogICAgICBib3R0b20gPSBNYXRoLnJv
			dW5kKGJvdHRvbSk7DQogICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChlbHQoImRpdiIsIG51bGws
			ICJDb2RlTWlycm9yLXNlbGVjdGVkIiwgKCJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6ICIgKyBs
			ZWZ0ICsgInB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICIgKyB0b3AgKyAi
			cHg7IHdpZHRoOiAiICsgKHdpZHRoID09IG51bGwgPyByaWdodFNpZGUgLSBsZWZ0IDogd2lkdGgp
			ICsgInB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICIgKyAoYm90dG9t
			IC0gdG9wKSArICJweCIpKSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZHJhd0ZvckxpbmUobGlu
			ZSwgZnJvbUFyZywgdG9BcmcpIHsNCiAgICAgIHZhciBsaW5lT2JqID0gZ2V0TGluZShkb2MsIGxp
			bmUpOw0KICAgICAgdmFyIGxpbmVMZW4gPSBsaW5lT2JqLnRleHQubGVuZ3RoOw0KICAgICAgdmFy
			IHN0YXJ0LCBlbmQ7DQogICAgICBmdW5jdGlvbiBjb29yZHMoY2gsIGJpYXMpIHsNCiAgICAgICAg
			cmV0dXJuIGNoYXJDb29yZHMoY20sIFBvcyhsaW5lLCBjaCksICJkaXYiLCBsaW5lT2JqLCBiaWFz
			KQ0KICAgICAgfQ0KDQogICAgICBmdW5jdGlvbiB3cmFwWChwb3MsIGRpciwgc2lkZSkgew0KICAg
			ICAgICB2YXIgZXh0ZW50ID0gd3JhcHBlZExpbmVFeHRlbnRDaGFyKGNtLCBsaW5lT2JqLCBudWxs
			LCBwb3MpOw0KICAgICAgICB2YXIgcHJvcCA9IChkaXIgPT0gImx0ciIpID09IChzaWRlID09ICJh
			ZnRlciIpID8gImxlZnQiIDogInJpZ2h0IjsNCiAgICAgICAgdmFyIGNoID0gc2lkZSA9PSAiYWZ0
			ZXIiID8gZXh0ZW50LmJlZ2luIDogZXh0ZW50LmVuZCAtICgvXHMvLnRlc3QobGluZU9iai50ZXh0
			LmNoYXJBdChleHRlbnQuZW5kIC0gMSkpID8gMiA6IDEpOw0KICAgICAgICByZXR1cm4gY29vcmRz
			KGNoLCBwcm9wKVtwcm9wXQ0KICAgICAgfQ0KDQogICAgICB2YXIgb3JkZXIgPSBnZXRPcmRlcihs
			aW5lT2JqLCBkb2MuZGlyZWN0aW9uKTsNCiAgICAgIGl0ZXJhdGVCaWRpU2VjdGlvbnMob3JkZXIs
			IGZyb21BcmcgfHwgMCwgdG9BcmcgPT0gbnVsbCA/IGxpbmVMZW4gOiB0b0FyZywgZnVuY3Rpb24g
			KGZyb20sIHRvLCBkaXIsIGkpIHsNCiAgICAgICAgdmFyIGx0ciA9IGRpciA9PSAibHRyIjsNCiAg
			ICAgICAgdmFyIGZyb21Qb3MgPSBjb29yZHMoZnJvbSwgbHRyID8gImxlZnQiIDogInJpZ2h0Iik7
			DQogICAgICAgIHZhciB0b1BvcyA9IGNvb3Jkcyh0byAtIDEsIGx0ciA/ICJyaWdodCIgOiAibGVm
			dCIpOw0KDQogICAgICAgIHZhciBvcGVuU3RhcnQgPSBmcm9tQXJnID09IG51bGwgJiYgZnJvbSA9
			PSAwLCBvcGVuRW5kID0gdG9BcmcgPT0gbnVsbCAmJiB0byA9PSBsaW5lTGVuOw0KICAgICAgICB2
			YXIgZmlyc3QgPSBpID09IDAsIGxhc3QgPSAhb3JkZXIgfHwgaSA9PSBvcmRlci5sZW5ndGggLSAx
			Ow0KICAgICAgICBpZiAodG9Qb3MudG9wIC0gZnJvbVBvcy50b3AgPD0gMykgeyAvLyBTaW5nbGUg
			bGluZQ0KICAgICAgICAgIHZhciBvcGVuTGVmdCA9IChkb2NMVFIgPyBvcGVuU3RhcnQgOiBvcGVu
			RW5kKSAmJiBmaXJzdDsNCiAgICAgICAgICB2YXIgb3BlblJpZ2h0ID0gKGRvY0xUUiA/IG9wZW5F
			bmQgOiBvcGVuU3RhcnQpICYmIGxhc3Q7DQogICAgICAgICAgdmFyIGxlZnQgPSBvcGVuTGVmdCA/
			IGxlZnRTaWRlIDogKGx0ciA/IGZyb21Qb3MgOiB0b1BvcykubGVmdDsNCiAgICAgICAgICB2YXIg
			cmlnaHQgPSBvcGVuUmlnaHQgPyByaWdodFNpZGUgOiAobHRyID8gdG9Qb3MgOiBmcm9tUG9zKS5y
			aWdodDsNCiAgICAgICAgICBhZGQobGVmdCwgZnJvbVBvcy50b3AsIHJpZ2h0IC0gbGVmdCwgZnJv
			bVBvcy5ib3R0b20pOw0KICAgICAgICB9IGVsc2UgeyAvLyBNdWx0aXBsZSBsaW5lcw0KICAgICAg
			ICAgIHZhciB0b3BMZWZ0LCB0b3BSaWdodCwgYm90TGVmdCwgYm90UmlnaHQ7DQogICAgICAgICAg
			aWYgKGx0cikgew0KICAgICAgICAgICAgdG9wTGVmdCA9IGRvY0xUUiAmJiBvcGVuU3RhcnQgJiYg
			Zmlyc3QgPyBsZWZ0U2lkZSA6IGZyb21Qb3MubGVmdDsNCiAgICAgICAgICAgIHRvcFJpZ2h0ID0g
			ZG9jTFRSID8gcmlnaHRTaWRlIDogd3JhcFgoZnJvbSwgZGlyLCAiYmVmb3JlIik7DQogICAgICAg
			ICAgICBib3RMZWZ0ID0gZG9jTFRSID8gbGVmdFNpZGUgOiB3cmFwWCh0bywgZGlyLCAiYWZ0ZXIi
			KTsNCiAgICAgICAgICAgIGJvdFJpZ2h0ID0gZG9jTFRSICYmIG9wZW5FbmQgJiYgbGFzdCA/IHJp
			Z2h0U2lkZSA6IHRvUG9zLnJpZ2h0Ow0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0
			b3BMZWZ0ID0gIWRvY0xUUiA/IGxlZnRTaWRlIDogd3JhcFgoZnJvbSwgZGlyLCAiYmVmb3JlIik7
			DQogICAgICAgICAgICB0b3BSaWdodCA9ICFkb2NMVFIgJiYgb3BlblN0YXJ0ICYmIGZpcnN0ID8g
			cmlnaHRTaWRlIDogZnJvbVBvcy5yaWdodDsNCiAgICAgICAgICAgIGJvdExlZnQgPSAhZG9jTFRS
			ICYmIG9wZW5FbmQgJiYgbGFzdCA/IGxlZnRTaWRlIDogdG9Qb3MubGVmdDsNCiAgICAgICAgICAg
			IGJvdFJpZ2h0ID0gIWRvY0xUUiA/IHJpZ2h0U2lkZSA6IHdyYXBYKHRvLCBkaXIsICJhZnRlciIp
			Ow0KICAgICAgICAgIH0NCiAgICAgICAgICBhZGQodG9wTGVmdCwgZnJvbVBvcy50b3AsIHRvcFJp
			Z2h0IC0gdG9wTGVmdCwgZnJvbVBvcy5ib3R0b20pOw0KICAgICAgICAgIGlmIChmcm9tUG9zLmJv
			dHRvbSA8IHRvUG9zLnRvcCkgeyBhZGQobGVmdFNpZGUsIGZyb21Qb3MuYm90dG9tLCBudWxsLCB0
			b1Bvcy50b3ApOyB9DQogICAgICAgICAgYWRkKGJvdExlZnQsIHRvUG9zLnRvcCwgYm90UmlnaHQg
			LSBib3RMZWZ0LCB0b1Bvcy5ib3R0b20pOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCFzdGFy
			dCB8fCBjbXBDb29yZHMoZnJvbVBvcywgc3RhcnQpIDwgMCkgeyBzdGFydCA9IGZyb21Qb3M7IH0N
			CiAgICAgICAgaWYgKGNtcENvb3Jkcyh0b1Bvcywgc3RhcnQpIDwgMCkgeyBzdGFydCA9IHRvUG9z
			OyB9DQogICAgICAgIGlmICghZW5kIHx8IGNtcENvb3Jkcyhmcm9tUG9zLCBlbmQpIDwgMCkgeyBl
			bmQgPSBmcm9tUG9zOyB9DQogICAgICAgIGlmIChjbXBDb29yZHModG9Qb3MsIGVuZCkgPCAwKSB7
			IGVuZCA9IHRvUG9zOyB9DQogICAgICB9KTsNCiAgICAgIHJldHVybiB7c3RhcnQ6IHN0YXJ0LCBl
			bmQ6IGVuZH0NCiAgICB9DQoNCiAgICB2YXIgc0Zyb20gPSByYW5nZSQkMS5mcm9tKCksIHNUbyA9
			IHJhbmdlJCQxLnRvKCk7DQogICAgaWYgKHNGcm9tLmxpbmUgPT0gc1RvLmxpbmUpIHsNCiAgICAg
			IGRyYXdGb3JMaW5lKHNGcm9tLmxpbmUsIHNGcm9tLmNoLCBzVG8uY2gpOw0KICAgIH0gZWxzZSB7
			DQogICAgICB2YXIgZnJvbUxpbmUgPSBnZXRMaW5lKGRvYywgc0Zyb20ubGluZSksIHRvTGluZSA9
			IGdldExpbmUoZG9jLCBzVG8ubGluZSk7DQogICAgICB2YXIgc2luZ2xlVkxpbmUgPSB2aXN1YWxM
			aW5lKGZyb21MaW5lKSA9PSB2aXN1YWxMaW5lKHRvTGluZSk7DQogICAgICB2YXIgbGVmdEVuZCA9
			IGRyYXdGb3JMaW5lKHNGcm9tLmxpbmUsIHNGcm9tLmNoLCBzaW5nbGVWTGluZSA/IGZyb21MaW5l
			LnRleHQubGVuZ3RoICsgMSA6IG51bGwpLmVuZDsNCiAgICAgIHZhciByaWdodFN0YXJ0ID0gZHJh
			d0ZvckxpbmUoc1RvLmxpbmUsIHNpbmdsZVZMaW5lID8gMCA6IG51bGwsIHNUby5jaCkuc3RhcnQ7
			DQogICAgICBpZiAoc2luZ2xlVkxpbmUpIHsNCiAgICAgICAgaWYgKGxlZnRFbmQudG9wIDwgcmln
			aHRTdGFydC50b3AgLSAyKSB7DQogICAgICAgICAgYWRkKGxlZnRFbmQucmlnaHQsIGxlZnRFbmQu
			dG9wLCBudWxsLCBsZWZ0RW5kLmJvdHRvbSk7DQogICAgICAgICAgYWRkKGxlZnRTaWRlLCByaWdo
			dFN0YXJ0LnRvcCwgcmlnaHRTdGFydC5sZWZ0LCByaWdodFN0YXJ0LmJvdHRvbSk7DQogICAgICAg
			IH0gZWxzZSB7DQogICAgICAgICAgYWRkKGxlZnRFbmQucmlnaHQsIGxlZnRFbmQudG9wLCByaWdo
			dFN0YXJ0LmxlZnQgLSBsZWZ0RW5kLnJpZ2h0LCBsZWZ0RW5kLmJvdHRvbSk7DQogICAgICAgIH0N
			CiAgICAgIH0NCiAgICAgIGlmIChsZWZ0RW5kLmJvdHRvbSA8IHJpZ2h0U3RhcnQudG9wKQ0KICAg
			ICAgICB7IGFkZChsZWZ0U2lkZSwgbGVmdEVuZC5ib3R0b20sIG51bGwsIHJpZ2h0U3RhcnQudG9w
			KTsgfQ0KICAgIH0NCg0KICAgIG91dHB1dC5hcHBlbmRDaGlsZChmcmFnbWVudCk7DQogIH0NCg0K
			ICAvLyBDdXJzb3ItYmxpbmtpbmcNCiAgZnVuY3Rpb24gcmVzdGFydEJsaW5rKGNtKSB7DQogICAg
			aWYgKCFjbS5zdGF0ZS5mb2N1c2VkKSB7IHJldHVybiB9DQogICAgdmFyIGRpc3BsYXkgPSBjbS5k
			aXNwbGF5Ow0KICAgIGNsZWFySW50ZXJ2YWwoZGlzcGxheS5ibGlua2VyKTsNCiAgICB2YXIgb24g
			PSB0cnVlOw0KICAgIGRpc3BsYXkuY3Vyc29yRGl2LnN0eWxlLnZpc2liaWxpdHkgPSAiIjsNCiAg
			ICBpZiAoY20ub3B0aW9ucy5jdXJzb3JCbGlua1JhdGUgPiAwKQ0KICAgICAgeyBkaXNwbGF5LmJs
			aW5rZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IHJldHVybiBkaXNwbGF5LmN1cnNvckRp
			di5zdHlsZS52aXNpYmlsaXR5ID0gKG9uID0gIW9uKSA/ICIiIDogImhpZGRlbiI7IH0sDQogICAg
			ICAgIGNtLm9wdGlvbnMuY3Vyc29yQmxpbmtSYXRlKTsgfQ0KICAgIGVsc2UgaWYgKGNtLm9wdGlv
			bnMuY3Vyc29yQmxpbmtSYXRlIDwgMCkNCiAgICAgIHsgZGlzcGxheS5jdXJzb3JEaXYuc3R5bGUu
			dmlzaWJpbGl0eSA9ICJoaWRkZW4iOyB9DQogIH0NCg0KICBmdW5jdGlvbiBlbnN1cmVGb2N1cyhj
			bSkgew0KICAgIGlmICghY20uc3RhdGUuZm9jdXNlZCkgeyBjbS5kaXNwbGF5LmlucHV0LmZvY3Vz
			KCk7IG9uRm9jdXMoY20pOyB9DQogIH0NCg0KICBmdW5jdGlvbiBkZWxheUJsdXJFdmVudChjbSkg
			ew0KICAgIGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50ID0gdHJ1ZTsNCiAgICBzZXRUaW1lb3V0
			KGZ1bmN0aW9uICgpIHsgaWYgKGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50KSB7DQogICAgICBj
			bS5zdGF0ZS5kZWxheWluZ0JsdXJFdmVudCA9IGZhbHNlOw0KICAgICAgb25CbHVyKGNtKTsNCiAg
			ICB9IH0sIDEwMCk7DQogIH0NCg0KICBmdW5jdGlvbiBvbkZvY3VzKGNtLCBlKSB7DQogICAgaWYg
			KGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50KSB7IGNtLnN0YXRlLmRlbGF5aW5nQmx1ckV2ZW50
			ID0gZmFsc2U7IH0NCg0KICAgIGlmIChjbS5vcHRpb25zLnJlYWRPbmx5ID09ICJub2N1cnNvciIp
			IHsgcmV0dXJuIH0NCiAgICBpZiAoIWNtLnN0YXRlLmZvY3VzZWQpIHsNCiAgICAgIHNpZ25hbChj
			bSwgImZvY3VzIiwgY20sIGUpOw0KICAgICAgY20uc3RhdGUuZm9jdXNlZCA9IHRydWU7DQogICAg
			ICBhZGRDbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsICJDb2RlTWlycm9yLWZvY3VzZWQiKTsNCiAg
			ICAgIC8vIFRoaXMgdGVzdCBwcmV2ZW50cyB0aGlzIGZyb20gZmlyaW5nIHdoZW4gYSBjb250ZXh0
			DQogICAgICAvLyBtZW51IGlzIGNsb3NlZCAoc2luY2UgdGhlIGlucHV0IHJlc2V0IHdvdWxkIGtp
			bGwgdGhlDQogICAgICAvLyBzZWxlY3QtYWxsIGRldGVjdGlvbiBoYWNrKQ0KICAgICAgaWYgKCFj
			bS5jdXJPcCAmJiBjbS5kaXNwbGF5LnNlbEZvckNvbnRleHRNZW51ICE9IGNtLmRvYy5zZWwpIHsN
			CiAgICAgICAgY20uZGlzcGxheS5pbnB1dC5yZXNldCgpOw0KICAgICAgICBpZiAod2Via2l0KSB7
			IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY20uZGlzcGxheS5pbnB1dC5yZXNldCh0
			cnVlKTsgfSwgMjApOyB9IC8vIElzc3VlICMxNzMwDQogICAgICB9DQogICAgICBjbS5kaXNwbGF5
			LmlucHV0LnJlY2VpdmVkRm9jdXMoKTsNCiAgICB9DQogICAgcmVzdGFydEJsaW5rKGNtKTsNCiAg
			fQ0KICBmdW5jdGlvbiBvbkJsdXIoY20sIGUpIHsNCiAgICBpZiAoY20uc3RhdGUuZGVsYXlpbmdC
			bHVyRXZlbnQpIHsgcmV0dXJuIH0NCg0KICAgIGlmIChjbS5zdGF0ZS5mb2N1c2VkKSB7DQogICAg
			ICBzaWduYWwoY20sICJibHVyIiwgY20sIGUpOw0KICAgICAgY20uc3RhdGUuZm9jdXNlZCA9IGZh
			bHNlOw0KICAgICAgcm1DbGFzcyhjbS5kaXNwbGF5LndyYXBwZXIsICJDb2RlTWlycm9yLWZvY3Vz
			ZWQiKTsNCiAgICB9DQogICAgY2xlYXJJbnRlcnZhbChjbS5kaXNwbGF5LmJsaW5rZXIpOw0KICAg
			IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBpZiAoIWNtLnN0YXRlLmZvY3VzZWQpIHsgY20uZGlz
			cGxheS5zaGlmdCA9IGZhbHNlOyB9IH0sIDE1MCk7DQogIH0NCg0KICAvLyBSZWFkIHRoZSBhY3R1
			YWwgaGVpZ2h0cyBvZiB0aGUgcmVuZGVyZWQgbGluZXMsIGFuZCB1cGRhdGUgdGhlaXINCiAgLy8g
			c3RvcmVkIGhlaWdodHMgdG8gbWF0Y2guDQogIGZ1bmN0aW9uIHVwZGF0ZUhlaWdodHNJblZpZXdw
			b3J0KGNtKSB7DQogICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5Ow0KICAgIHZhciBwcmV2Qm90
			dG9tID0gZGlzcGxheS5saW5lRGl2Lm9mZnNldFRvcDsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8
			IGRpc3BsYXkudmlldy5sZW5ndGg7IGkrKykgew0KICAgICAgdmFyIGN1ciA9IGRpc3BsYXkudmll
			d1tpXSwgd3JhcHBpbmcgPSBjbS5vcHRpb25zLmxpbmVXcmFwcGluZzsNCiAgICAgIHZhciBoZWln
			aHQgPSAodm9pZCAwKSwgd2lkdGggPSAwOw0KICAgICAgaWYgKGN1ci5oaWRkZW4pIHsgY29udGlu
			dWUgfQ0KICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA4KSB7DQogICAgICAgIHZhciBib3Qg
			PSBjdXIubm9kZS5vZmZzZXRUb3AgKyBjdXIubm9kZS5vZmZzZXRIZWlnaHQ7DQogICAgICAgIGhl
			aWdodCA9IGJvdCAtIHByZXZCb3R0b207DQogICAgICAgIHByZXZCb3R0b20gPSBib3Q7DQogICAg
			ICB9IGVsc2Ugew0KICAgICAgICB2YXIgYm94ID0gY3VyLm5vZGUuZ2V0Qm91bmRpbmdDbGllbnRS
			ZWN0KCk7DQogICAgICAgIGhlaWdodCA9IGJveC5ib3R0b20gLSBib3gudG9wOw0KICAgICAgICAv
			LyBDaGVjayB0aGF0IGxpbmVzIGRvbid0IGV4dGVuZCBwYXN0IHRoZSByaWdodCBvZiB0aGUgY3Vy
			cmVudA0KICAgICAgICAvLyBlZGl0b3Igd2lkdGgNCiAgICAgICAgaWYgKCF3cmFwcGluZyAmJiBj
			dXIudGV4dC5maXJzdENoaWxkKQ0KICAgICAgICAgIHsgd2lkdGggPSBjdXIudGV4dC5maXJzdENo
			aWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0IC0gYm94LmxlZnQgLSAxOyB9DQogICAg
			ICB9DQogICAgICB2YXIgZGlmZiA9IGN1ci5saW5lLmhlaWdodCAtIGhlaWdodDsNCiAgICAgIGlm
			IChkaWZmID4gLjAwNSB8fCBkaWZmIDwgLS4wMDUpIHsNCiAgICAgICAgdXBkYXRlTGluZUhlaWdo
			dChjdXIubGluZSwgaGVpZ2h0KTsNCiAgICAgICAgdXBkYXRlV2lkZ2V0SGVpZ2h0KGN1ci5saW5l
			KTsNCiAgICAgICAgaWYgKGN1ci5yZXN0KSB7IGZvciAodmFyIGogPSAwOyBqIDwgY3VyLnJlc3Qu
			bGVuZ3RoOyBqKyspDQogICAgICAgICAgeyB1cGRhdGVXaWRnZXRIZWlnaHQoY3VyLnJlc3Rbal0p
			OyB9IH0NCiAgICAgIH0NCiAgICAgIGlmICh3aWR0aCA+IGNtLmRpc3BsYXkuc2l6ZXJXaWR0aCkg
			ew0KICAgICAgICB2YXIgY2hXaWR0aCA9IE1hdGguY2VpbCh3aWR0aCAvIGNoYXJXaWR0aChjbS5k
			aXNwbGF5KSk7DQogICAgICAgIGlmIChjaFdpZHRoID4gY20uZGlzcGxheS5tYXhMaW5lTGVuZ3Ro
			KSB7DQogICAgICAgICAgY20uZGlzcGxheS5tYXhMaW5lTGVuZ3RoID0gY2hXaWR0aDsNCiAgICAg
			ICAgICBjbS5kaXNwbGF5Lm1heExpbmUgPSBjdXIubGluZTsNCiAgICAgICAgICBjbS5kaXNwbGF5
			Lm1heExpbmVDaGFuZ2VkID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0K
			DQogIC8vIFJlYWQgYW5kIHN0b3JlIHRoZSBoZWlnaHQgb2YgbGluZSB3aWRnZXRzIGFzc29jaWF0
			ZWQgd2l0aCB0aGUNCiAgLy8gZ2l2ZW4gbGluZS4NCiAgZnVuY3Rpb24gdXBkYXRlV2lkZ2V0SGVp
			Z2h0KGxpbmUpIHsNCiAgICBpZiAobGluZS53aWRnZXRzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwg
			bGluZS53aWRnZXRzLmxlbmd0aDsgKytpKSB7DQogICAgICB2YXIgdyA9IGxpbmUud2lkZ2V0c1tp
			XSwgcGFyZW50ID0gdy5ub2RlLnBhcmVudE5vZGU7DQogICAgICBpZiAocGFyZW50KSB7IHcuaGVp
			Z2h0ID0gcGFyZW50Lm9mZnNldEhlaWdodDsgfQ0KICAgIH0gfQ0KICB9DQoNCiAgLy8gQ29tcHV0
			ZSB0aGUgbGluZXMgdGhhdCBhcmUgdmlzaWJsZSBpbiBhIGdpdmVuIHZpZXdwb3J0IChkZWZhdWx0
			cw0KICAvLyB0aGUgdGhlIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uKS4gdmlld3BvcnQgbWF5IGNv
			bnRhaW4gdG9wLA0KICAvLyBoZWlnaHQsIGFuZCBlbnN1cmUgKHNlZSBvcC5zY3JvbGxUb1Bvcykg
			cHJvcGVydGllcy4NCiAgZnVuY3Rpb24gdmlzaWJsZUxpbmVzKGRpc3BsYXksIGRvYywgdmlld3Bv
			cnQpIHsNCiAgICB2YXIgdG9wID0gdmlld3BvcnQgJiYgdmlld3BvcnQudG9wICE9IG51bGwgPyBN
			YXRoLm1heCgwLCB2aWV3cG9ydC50b3ApIDogZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3A7DQog
			ICAgdG9wID0gTWF0aC5mbG9vcih0b3AgLSBwYWRkaW5nVG9wKGRpc3BsYXkpKTsNCiAgICB2YXIg
			Ym90dG9tID0gdmlld3BvcnQgJiYgdmlld3BvcnQuYm90dG9tICE9IG51bGwgPyB2aWV3cG9ydC5i
			b3R0b20gOiB0b3AgKyBkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0Ow0KDQogICAgdmFyIGZy
			b20gPSBsaW5lQXRIZWlnaHQoZG9jLCB0b3ApLCB0byA9IGxpbmVBdEhlaWdodChkb2MsIGJvdHRv
			bSk7DQogICAgLy8gRW5zdXJlIGlzIGEge2Zyb206IHtsaW5lLCBjaH0sIHRvOiB7bGluZSwgY2h9
			fSBvYmplY3QsIGFuZA0KICAgIC8vIGZvcmNlcyB0aG9zZSBsaW5lcyBpbnRvIHRoZSB2aWV3cG9y
			dCAoaWYgcG9zc2libGUpLg0KICAgIGlmICh2aWV3cG9ydCAmJiB2aWV3cG9ydC5lbnN1cmUpIHsN
			CiAgICAgIHZhciBlbnN1cmVGcm9tID0gdmlld3BvcnQuZW5zdXJlLmZyb20ubGluZSwgZW5zdXJl
			VG8gPSB2aWV3cG9ydC5lbnN1cmUudG8ubGluZTsNCiAgICAgIGlmIChlbnN1cmVGcm9tIDwgZnJv
			bSkgew0KICAgICAgICBmcm9tID0gZW5zdXJlRnJvbTsNCiAgICAgICAgdG8gPSBsaW5lQXRIZWln
			aHQoZG9jLCBoZWlnaHRBdExpbmUoZ2V0TGluZShkb2MsIGVuc3VyZUZyb20pKSArIGRpc3BsYXku
			d3JhcHBlci5jbGllbnRIZWlnaHQpOw0KICAgICAgfSBlbHNlIGlmIChNYXRoLm1pbihlbnN1cmVU
			bywgZG9jLmxhc3RMaW5lKCkpID49IHRvKSB7DQogICAgICAgIGZyb20gPSBsaW5lQXRIZWlnaHQo
			ZG9jLCBoZWlnaHRBdExpbmUoZ2V0TGluZShkb2MsIGVuc3VyZVRvKSkgLSBkaXNwbGF5LndyYXBw
			ZXIuY2xpZW50SGVpZ2h0KTsNCiAgICAgICAgdG8gPSBlbnN1cmVUbzsNCiAgICAgIH0NCiAgICB9
			DQogICAgcmV0dXJuIHtmcm9tOiBmcm9tLCB0bzogTWF0aC5tYXgodG8sIGZyb20gKyAxKX0NCiAg
			fQ0KDQogIC8vIFNDUk9MTElORyBUSElOR1MgSU5UTyBWSUVXDQoNCiAgLy8gSWYgYW4gZWRpdG9y
			IHNpdHMgb24gdGhlIHRvcCBvciBib3R0b20gb2YgdGhlIHdpbmRvdywgcGFydGlhbGx5DQogIC8v
			IHNjcm9sbGVkIG91dCBvZiB2aWV3LCB0aGlzIGVuc3VyZXMgdGhhdCB0aGUgY3Vyc29yIGlzIHZp
			c2libGUuDQogIGZ1bmN0aW9uIG1heWJlU2Nyb2xsV2luZG93KGNtLCByZWN0KSB7DQogICAgaWYg
			KHNpZ25hbERPTUV2ZW50KGNtLCAic2Nyb2xsQ3Vyc29ySW50b1ZpZXciKSkgeyByZXR1cm4gfQ0K
			DQogICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBib3ggPSBkaXNwbGF5LnNpemVyLmdldEJv
			dW5kaW5nQ2xpZW50UmVjdCgpLCBkb1Njcm9sbCA9IG51bGw7DQogICAgaWYgKHJlY3QudG9wICsg
			Ym94LnRvcCA8IDApIHsgZG9TY3JvbGwgPSB0cnVlOyB9DQogICAgZWxzZSBpZiAocmVjdC5ib3R0
			b20gKyBib3gudG9wID4gKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVs
			ZW1lbnQuY2xpZW50SGVpZ2h0KSkgeyBkb1Njcm9sbCA9IGZhbHNlOyB9DQogICAgaWYgKGRvU2Ny
			b2xsICE9IG51bGwgJiYgIXBoYW50b20pIHsNCiAgICAgIHZhciBzY3JvbGxOb2RlID0gZWx0KCJk
			aXYiLCAiXHUyMDBiIiwgbnVsbCwgKCJwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAg
			ICAgICAgICAgICAgdG9wOiAiICsgKHJlY3QudG9wIC0gZGlzcGxheS52aWV3T2Zmc2V0IC0gcGFk
			ZGluZ1RvcChjbS5kaXNwbGF5KSkgKyAicHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgaGVp
			Z2h0OiAiICsgKHJlY3QuYm90dG9tIC0gcmVjdC50b3AgKyBzY3JvbGxHYXAoY20pICsgZGlzcGxh
			eS5iYXJIZWlnaHQpICsgInB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICIgKyAo
			cmVjdC5sZWZ0KSArICJweDsgd2lkdGg6ICIgKyAoTWF0aC5tYXgoMiwgcmVjdC5yaWdodCAtIHJl
			Y3QubGVmdCkpICsgInB4OyIpKTsNCiAgICAgIGNtLmRpc3BsYXkubGluZVNwYWNlLmFwcGVuZENo
			aWxkKHNjcm9sbE5vZGUpOw0KICAgICAgc2Nyb2xsTm9kZS5zY3JvbGxJbnRvVmlldyhkb1Njcm9s
			bCk7DQogICAgICBjbS5kaXNwbGF5LmxpbmVTcGFjZS5yZW1vdmVDaGlsZChzY3JvbGxOb2RlKTsN
			CiAgICB9DQogIH0NCg0KICAvLyBTY3JvbGwgYSBnaXZlbiBwb3NpdGlvbiBpbnRvIHZpZXcgKGlt
			bWVkaWF0ZWx5KSwgdmVyaWZ5aW5nIHRoYXQNCiAgLy8gaXQgYWN0dWFsbHkgYmVjYW1lIHZpc2li
			bGUgKGFzIGxpbmUgaGVpZ2h0cyBhcmUgYWNjdXJhdGVseQ0KICAvLyBtZWFzdXJlZCwgdGhlIHBv
			c2l0aW9uIG9mIHNvbWV0aGluZyBtYXkgJ2RyaWZ0JyBkdXJpbmcgZHJhd2luZykuDQogIGZ1bmN0
			aW9uIHNjcm9sbFBvc0ludG9WaWV3KGNtLCBwb3MsIGVuZCwgbWFyZ2luKSB7DQogICAgaWYgKG1h
			cmdpbiA9PSBudWxsKSB7IG1hcmdpbiA9IDA7IH0NCiAgICB2YXIgcmVjdDsNCiAgICBpZiAoIWNt
			Lm9wdGlvbnMubGluZVdyYXBwaW5nICYmIHBvcyA9PSBlbmQpIHsNCiAgICAgIC8vIFNldCBwb3Mg
			YW5kIGVuZCB0byB0aGUgY3Vyc29yIHBvc2l0aW9ucyBhcm91bmQgdGhlIGNoYXJhY3RlciBwb3Mg
			c3RpY2tzIHRvDQogICAgICAvLyBJZiBwb3Muc3RpY2t5ID09ICJiZWZvcmUiLCB0aGF0IGlzIGFy
			b3VuZCBwb3MuY2ggLSAxLCBvdGhlcndpc2UgYXJvdW5kIHBvcy5jaA0KICAgICAgLy8gSWYgcG9z
			ID09IFBvcyhfLCAwLCAiYmVmb3JlIiksIHBvcyBhbmQgZW5kIGFyZSB1bmNoYW5nZWQNCiAgICAg
			IHBvcyA9IHBvcy5jaCA/IFBvcyhwb3MubGluZSwgcG9zLnN0aWNreSA9PSAiYmVmb3JlIiA/IHBv
			cy5jaCAtIDEgOiBwb3MuY2gsICJhZnRlciIpIDogcG9zOw0KICAgICAgZW5kID0gcG9zLnN0aWNr
			eSA9PSAiYmVmb3JlIiA/IFBvcyhwb3MubGluZSwgcG9zLmNoICsgMSwgImJlZm9yZSIpIDogcG9z
			Ow0KICAgIH0NCiAgICBmb3IgKHZhciBsaW1pdCA9IDA7IGxpbWl0IDwgNTsgbGltaXQrKykgew0K
			ICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTsNCiAgICAgIHZhciBjb29yZHMgPSBjdXJzb3JDb29y
			ZHMoY20sIHBvcyk7DQogICAgICB2YXIgZW5kQ29vcmRzID0gIWVuZCB8fCBlbmQgPT0gcG9zID8g
			Y29vcmRzIDogY3Vyc29yQ29vcmRzKGNtLCBlbmQpOw0KICAgICAgcmVjdCA9IHtsZWZ0OiBNYXRo
			Lm1pbihjb29yZHMubGVmdCwgZW5kQ29vcmRzLmxlZnQpLA0KICAgICAgICAgICAgICB0b3A6IE1h
			dGgubWluKGNvb3Jkcy50b3AsIGVuZENvb3Jkcy50b3ApIC0gbWFyZ2luLA0KICAgICAgICAgICAg
			ICByaWdodDogTWF0aC5tYXgoY29vcmRzLmxlZnQsIGVuZENvb3Jkcy5sZWZ0KSwNCiAgICAgICAg
			ICAgICAgYm90dG9tOiBNYXRoLm1heChjb29yZHMuYm90dG9tLCBlbmRDb29yZHMuYm90dG9tKSAr
			IG1hcmdpbn07DQogICAgICB2YXIgc2Nyb2xsUG9zID0gY2FsY3VsYXRlU2Nyb2xsUG9zKGNtLCBy
			ZWN0KTsNCiAgICAgIHZhciBzdGFydFRvcCA9IGNtLmRvYy5zY3JvbGxUb3AsIHN0YXJ0TGVmdCA9
			IGNtLmRvYy5zY3JvbGxMZWZ0Ow0KICAgICAgaWYgKHNjcm9sbFBvcy5zY3JvbGxUb3AgIT0gbnVs
			bCkgew0KICAgICAgICB1cGRhdGVTY3JvbGxUb3AoY20sIHNjcm9sbFBvcy5zY3JvbGxUb3ApOw0K
			ICAgICAgICBpZiAoTWF0aC5hYnMoY20uZG9jLnNjcm9sbFRvcCAtIHN0YXJ0VG9wKSA+IDEpIHsg
			Y2hhbmdlZCA9IHRydWU7IH0NCiAgICAgIH0NCiAgICAgIGlmIChzY3JvbGxQb3Muc2Nyb2xsTGVm
			dCAhPSBudWxsKSB7DQogICAgICAgIHNldFNjcm9sbExlZnQoY20sIHNjcm9sbFBvcy5zY3JvbGxM
			ZWZ0KTsNCiAgICAgICAgaWYgKE1hdGguYWJzKGNtLmRvYy5zY3JvbGxMZWZ0IC0gc3RhcnRMZWZ0
			KSA+IDEpIHsgY2hhbmdlZCA9IHRydWU7IH0NCiAgICAgIH0NCiAgICAgIGlmICghY2hhbmdlZCkg
			eyBicmVhayB9DQogICAgfQ0KICAgIHJldHVybiByZWN0DQogIH0NCg0KICAvLyBTY3JvbGwgYSBn
			aXZlbiBzZXQgb2YgY29vcmRpbmF0ZXMgaW50byB2aWV3IChpbW1lZGlhdGVseSkuDQogIGZ1bmN0
			aW9uIHNjcm9sbEludG9WaWV3KGNtLCByZWN0KSB7DQogICAgdmFyIHNjcm9sbFBvcyA9IGNhbGN1
			bGF0ZVNjcm9sbFBvcyhjbSwgcmVjdCk7DQogICAgaWYgKHNjcm9sbFBvcy5zY3JvbGxUb3AgIT0g
			bnVsbCkgeyB1cGRhdGVTY3JvbGxUb3AoY20sIHNjcm9sbFBvcy5zY3JvbGxUb3ApOyB9DQogICAg
			aWYgKHNjcm9sbFBvcy5zY3JvbGxMZWZ0ICE9IG51bGwpIHsgc2V0U2Nyb2xsTGVmdChjbSwgc2Ny
			b2xsUG9zLnNjcm9sbExlZnQpOyB9DQogIH0NCg0KICAvLyBDYWxjdWxhdGUgYSBuZXcgc2Nyb2xs
			IHBvc2l0aW9uIG5lZWRlZCB0byBzY3JvbGwgdGhlIGdpdmVuDQogIC8vIHJlY3RhbmdsZSBpbnRv
			IHZpZXcuIFJldHVybnMgYW4gb2JqZWN0IHdpdGggc2Nyb2xsVG9wIGFuZA0KICAvLyBzY3JvbGxM
			ZWZ0IHByb3BlcnRpZXMuIFdoZW4gdGhlc2UgYXJlIHVuZGVmaW5lZCwgdGhlDQogIC8vIHZlcnRp
			Y2FsL2hvcml6b250YWwgcG9zaXRpb24gZG9lcyBub3QgbmVlZCB0byBiZSBhZGp1c3RlZC4NCiAg
			ZnVuY3Rpb24gY2FsY3VsYXRlU2Nyb2xsUG9zKGNtLCByZWN0KSB7DQogICAgdmFyIGRpc3BsYXkg
			PSBjbS5kaXNwbGF5LCBzbmFwTWFyZ2luID0gdGV4dEhlaWdodChjbS5kaXNwbGF5KTsNCiAgICBp
			ZiAocmVjdC50b3AgPCAwKSB7IHJlY3QudG9wID0gMDsgfQ0KICAgIHZhciBzY3JlZW50b3AgPSBj
			bS5jdXJPcCAmJiBjbS5jdXJPcC5zY3JvbGxUb3AgIT0gbnVsbCA/IGNtLmN1ck9wLnNjcm9sbFRv
			cCA6IGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wOw0KICAgIHZhciBzY3JlZW4gPSBkaXNwbGF5
			SGVpZ2h0KGNtKSwgcmVzdWx0ID0ge307DQogICAgaWYgKHJlY3QuYm90dG9tIC0gcmVjdC50b3Ag
			PiBzY3JlZW4pIHsgcmVjdC5ib3R0b20gPSByZWN0LnRvcCArIHNjcmVlbjsgfQ0KICAgIHZhciBk
			b2NCb3R0b20gPSBjbS5kb2MuaGVpZ2h0ICsgcGFkZGluZ1ZlcnQoZGlzcGxheSk7DQogICAgdmFy
			IGF0VG9wID0gcmVjdC50b3AgPCBzbmFwTWFyZ2luLCBhdEJvdHRvbSA9IHJlY3QuYm90dG9tID4g
			ZG9jQm90dG9tIC0gc25hcE1hcmdpbjsNCiAgICBpZiAocmVjdC50b3AgPCBzY3JlZW50b3ApIHsN
			CiAgICAgIHJlc3VsdC5zY3JvbGxUb3AgPSBhdFRvcCA/IDAgOiByZWN0LnRvcDsNCiAgICB9IGVs
			c2UgaWYgKHJlY3QuYm90dG9tID4gc2NyZWVudG9wICsgc2NyZWVuKSB7DQogICAgICB2YXIgbmV3
			VG9wID0gTWF0aC5taW4ocmVjdC50b3AsIChhdEJvdHRvbSA/IGRvY0JvdHRvbSA6IHJlY3QuYm90
			dG9tKSAtIHNjcmVlbik7DQogICAgICBpZiAobmV3VG9wICE9IHNjcmVlbnRvcCkgeyByZXN1bHQu
			c2Nyb2xsVG9wID0gbmV3VG9wOyB9DQogICAgfQ0KDQogICAgdmFyIHNjcmVlbmxlZnQgPSBjbS5j
			dXJPcCAmJiBjbS5jdXJPcC5zY3JvbGxMZWZ0ICE9IG51bGwgPyBjbS5jdXJPcC5zY3JvbGxMZWZ0
			IDogZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0Ow0KICAgIHZhciBzY3JlZW53ID0gZGlzcGxh
			eVdpZHRoKGNtKSAtIChjbS5vcHRpb25zLmZpeGVkR3V0dGVyID8gZGlzcGxheS5ndXR0ZXJzLm9m
			ZnNldFdpZHRoIDogMCk7DQogICAgdmFyIHRvb1dpZGUgPSByZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0
			ID4gc2NyZWVudzsNCiAgICBpZiAodG9vV2lkZSkgeyByZWN0LnJpZ2h0ID0gcmVjdC5sZWZ0ICsg
			c2NyZWVudzsgfQ0KICAgIGlmIChyZWN0LmxlZnQgPCAxMCkNCiAgICAgIHsgcmVzdWx0LnNjcm9s
			bExlZnQgPSAwOyB9DQogICAgZWxzZSBpZiAocmVjdC5sZWZ0IDwgc2NyZWVubGVmdCkNCiAgICAg
			IHsgcmVzdWx0LnNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCByZWN0LmxlZnQgLSAodG9vV2lkZSA/
			IDAgOiAxMCkpOyB9DQogICAgZWxzZSBpZiAocmVjdC5yaWdodCA+IHNjcmVlbncgKyBzY3JlZW5s
			ZWZ0IC0gMykNCiAgICAgIHsgcmVzdWx0LnNjcm9sbExlZnQgPSByZWN0LnJpZ2h0ICsgKHRvb1dp
			ZGUgPyAwIDogMTApIC0gc2NyZWVudzsgfQ0KICAgIHJldHVybiByZXN1bHQNCiAgfQ0KDQogIC8v
			IFN0b3JlIGEgcmVsYXRpdmUgYWRqdXN0bWVudCB0byB0aGUgc2Nyb2xsIHBvc2l0aW9uIGluIHRo
			ZSBjdXJyZW50DQogIC8vIG9wZXJhdGlvbiAodG8gYmUgYXBwbGllZCB3aGVuIHRoZSBvcGVyYXRp
			b24gZmluaXNoZXMpLg0KICBmdW5jdGlvbiBhZGRUb1Njcm9sbFRvcChjbSwgdG9wKSB7DQogICAg
			aWYgKHRvcCA9PSBudWxsKSB7IHJldHVybiB9DQogICAgcmVzb2x2ZVNjcm9sbFRvUG9zKGNtKTsN
			CiAgICBjbS5jdXJPcC5zY3JvbGxUb3AgPSAoY20uY3VyT3Auc2Nyb2xsVG9wID09IG51bGwgPyBj
			bS5kb2Muc2Nyb2xsVG9wIDogY20uY3VyT3Auc2Nyb2xsVG9wKSArIHRvcDsNCiAgfQ0KDQogIC8v
			IE1ha2Ugc3VyZSB0aGF0IGF0IHRoZSBlbmQgb2YgdGhlIG9wZXJhdGlvbiB0aGUgY3VycmVudCBj
			dXJzb3IgaXMNCiAgLy8gc2hvd24uDQogIGZ1bmN0aW9uIGVuc3VyZUN1cnNvclZpc2libGUoY20p
			IHsNCiAgICByZXNvbHZlU2Nyb2xsVG9Qb3MoY20pOw0KICAgIHZhciBjdXIgPSBjbS5nZXRDdXJz
			b3IoKTsNCiAgICBjbS5jdXJPcC5zY3JvbGxUb1BvcyA9IHtmcm9tOiBjdXIsIHRvOiBjdXIsIG1h
			cmdpbjogY20ub3B0aW9ucy5jdXJzb3JTY3JvbGxNYXJnaW59Ow0KICB9DQoNCiAgZnVuY3Rpb24g
			c2Nyb2xsVG9Db29yZHMoY20sIHgsIHkpIHsNCiAgICBpZiAoeCAhPSBudWxsIHx8IHkgIT0gbnVs
			bCkgeyByZXNvbHZlU2Nyb2xsVG9Qb3MoY20pOyB9DQogICAgaWYgKHggIT0gbnVsbCkgeyBjbS5j
			dXJPcC5zY3JvbGxMZWZ0ID0geDsgfQ0KICAgIGlmICh5ICE9IG51bGwpIHsgY20uY3VyT3Auc2Ny
			b2xsVG9wID0geTsgfQ0KICB9DQoNCiAgZnVuY3Rpb24gc2Nyb2xsVG9SYW5nZShjbSwgcmFuZ2Uk
			JDEpIHsNCiAgICByZXNvbHZlU2Nyb2xsVG9Qb3MoY20pOw0KICAgIGNtLmN1ck9wLnNjcm9sbFRv
			UG9zID0gcmFuZ2UkJDE7DQogIH0NCg0KICAvLyBXaGVuIGFuIG9wZXJhdGlvbiBoYXMgaXRzIHNj
			cm9sbFRvUG9zIHByb3BlcnR5IHNldCwgYW5kIGFub3RoZXINCiAgLy8gc2Nyb2xsIGFjdGlvbiBp
			cyBhcHBsaWVkIGJlZm9yZSB0aGUgZW5kIG9mIHRoZSBvcGVyYXRpb24sIHRoaXMNCiAgLy8gJ3Np
			bXVsYXRlcycgc2Nyb2xsaW5nIHRoYXQgcG9zaXRpb24gaW50byB2aWV3IGluIGEgY2hlYXAgd2F5
			LCBzbw0KICAvLyB0aGF0IHRoZSBlZmZlY3Qgb2YgaW50ZXJtZWRpYXRlIHNjcm9sbCBjb21tYW5k
			cyBpcyBub3QgaWdub3JlZC4NCiAgZnVuY3Rpb24gcmVzb2x2ZVNjcm9sbFRvUG9zKGNtKSB7DQog
			ICAgdmFyIHJhbmdlJCQxID0gY20uY3VyT3Auc2Nyb2xsVG9Qb3M7DQogICAgaWYgKHJhbmdlJCQx
			KSB7DQogICAgICBjbS5jdXJPcC5zY3JvbGxUb1BvcyA9IG51bGw7DQogICAgICB2YXIgZnJvbSA9
			IGVzdGltYXRlQ29vcmRzKGNtLCByYW5nZSQkMS5mcm9tKSwgdG8gPSBlc3RpbWF0ZUNvb3Jkcyhj
			bSwgcmFuZ2UkJDEudG8pOw0KICAgICAgc2Nyb2xsVG9Db29yZHNSYW5nZShjbSwgZnJvbSwgdG8s
			IHJhbmdlJCQxLm1hcmdpbik7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gc2Nyb2xsVG9Db29y
			ZHNSYW5nZShjbSwgZnJvbSwgdG8sIG1hcmdpbikgew0KICAgIHZhciBzUG9zID0gY2FsY3VsYXRl
			U2Nyb2xsUG9zKGNtLCB7DQogICAgICBsZWZ0OiBNYXRoLm1pbihmcm9tLmxlZnQsIHRvLmxlZnQp
			LA0KICAgICAgdG9wOiBNYXRoLm1pbihmcm9tLnRvcCwgdG8udG9wKSAtIG1hcmdpbiwNCiAgICAg
			IHJpZ2h0OiBNYXRoLm1heChmcm9tLnJpZ2h0LCB0by5yaWdodCksDQogICAgICBib3R0b206IE1h
			dGgubWF4KGZyb20uYm90dG9tLCB0by5ib3R0b20pICsgbWFyZ2luDQogICAgfSk7DQogICAgc2Ny
			b2xsVG9Db29yZHMoY20sIHNQb3Muc2Nyb2xsTGVmdCwgc1Bvcy5zY3JvbGxUb3ApOw0KICB9DQoN
			CiAgLy8gU3luYyB0aGUgc2Nyb2xsYWJsZSBhcmVhIGFuZCBzY3JvbGxiYXJzLCBlbnN1cmUgdGhl
			IHZpZXdwb3J0DQogIC8vIGNvdmVycyB0aGUgdmlzaWJsZSBhcmVhLg0KICBmdW5jdGlvbiB1cGRh
			dGVTY3JvbGxUb3AoY20sIHZhbCkgew0KICAgIGlmIChNYXRoLmFicyhjbS5kb2Muc2Nyb2xsVG9w
			IC0gdmFsKSA8IDIpIHsgcmV0dXJuIH0NCiAgICBpZiAoIWdlY2tvKSB7IHVwZGF0ZURpc3BsYXlT
			aW1wbGUoY20sIHt0b3A6IHZhbH0pOyB9DQogICAgc2V0U2Nyb2xsVG9wKGNtLCB2YWwsIHRydWUp
			Ow0KICAgIGlmIChnZWNrbykgeyB1cGRhdGVEaXNwbGF5U2ltcGxlKGNtKTsgfQ0KICAgIHN0YXJ0
			V29ya2VyKGNtLCAxMDApOw0KICB9DQoNCiAgZnVuY3Rpb24gc2V0U2Nyb2xsVG9wKGNtLCB2YWws
			IGZvcmNlU2Nyb2xsKSB7DQogICAgdmFsID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oY20uZGlzcGxh
			eS5zY3JvbGxlci5zY3JvbGxIZWlnaHQgLSBjbS5kaXNwbGF5LnNjcm9sbGVyLmNsaWVudEhlaWdo
			dCwgdmFsKSk7DQogICAgaWYgKGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wID09IHZhbCAm
			JiAhZm9yY2VTY3JvbGwpIHsgcmV0dXJuIH0NCiAgICBjbS5kb2Muc2Nyb2xsVG9wID0gdmFsOw0K
			ICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxUb3AodmFsKTsNCiAgICBpZiAoY20u
			ZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3AgIT0gdmFsKSB7IGNtLmRpc3BsYXkuc2Nyb2xsZXIu
			c2Nyb2xsVG9wID0gdmFsOyB9DQogIH0NCg0KICAvLyBTeW5jIHNjcm9sbGVyIGFuZCBzY3JvbGxi
			YXIsIGVuc3VyZSB0aGUgZ3V0dGVyIGVsZW1lbnRzIGFyZQ0KICAvLyBhbGlnbmVkLg0KICBmdW5j
			dGlvbiBzZXRTY3JvbGxMZWZ0KGNtLCB2YWwsIGlzU2Nyb2xsZXIsIGZvcmNlU2Nyb2xsKSB7DQog
			ICAgdmFsID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odmFsLCBjbS5kaXNwbGF5LnNjcm9sbGVyLnNj
			cm9sbFdpZHRoIC0gY20uZGlzcGxheS5zY3JvbGxlci5jbGllbnRXaWR0aCkpOw0KICAgIGlmICgo
			aXNTY3JvbGxlciA/IHZhbCA9PSBjbS5kb2Muc2Nyb2xsTGVmdCA6IE1hdGguYWJzKGNtLmRvYy5z
			Y3JvbGxMZWZ0IC0gdmFsKSA8IDIpICYmICFmb3JjZVNjcm9sbCkgeyByZXR1cm4gfQ0KICAgIGNt
			LmRvYy5zY3JvbGxMZWZ0ID0gdmFsOw0KICAgIGFsaWduSG9yaXpvbnRhbGx5KGNtKTsNCiAgICBp
			ZiAoY20uZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ICE9IHZhbCkgeyBjbS5kaXNwbGF5LnNj
			cm9sbGVyLnNjcm9sbExlZnQgPSB2YWw7IH0NCiAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0
			U2Nyb2xsTGVmdCh2YWwpOw0KICB9DQoNCiAgLy8gU0NST0xMQkFSUw0KDQogIC8vIFByZXBhcmUg
			RE9NIHJlYWRzIG5lZWRlZCB0byB1cGRhdGUgdGhlIHNjcm9sbGJhcnMuIERvbmUgaW4gb25lDQog
			IC8vIHNob3QgdG8gbWluaW1pemUgdXBkYXRlL21lYXN1cmUgcm91bmR0cmlwcy4NCiAgZnVuY3Rp
			b24gbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pIHsNCiAgICB2YXIgZCA9IGNtLmRpc3BsYXksIGd1
			dHRlclcgPSBkLmd1dHRlcnMub2Zmc2V0V2lkdGg7DQogICAgdmFyIGRvY0ggPSBNYXRoLnJvdW5k
			KGNtLmRvYy5oZWlnaHQgKyBwYWRkaW5nVmVydChjbS5kaXNwbGF5KSk7DQogICAgcmV0dXJuIHsN
			CiAgICAgIGNsaWVudEhlaWdodDogZC5zY3JvbGxlci5jbGllbnRIZWlnaHQsDQogICAgICB2aWV3
			SGVpZ2h0OiBkLndyYXBwZXIuY2xpZW50SGVpZ2h0LA0KICAgICAgc2Nyb2xsV2lkdGg6IGQuc2Ny
			b2xsZXIuc2Nyb2xsV2lkdGgsIGNsaWVudFdpZHRoOiBkLnNjcm9sbGVyLmNsaWVudFdpZHRoLA0K
			ICAgICAgdmlld1dpZHRoOiBkLndyYXBwZXIuY2xpZW50V2lkdGgsDQogICAgICBiYXJMZWZ0OiBj
			bS5vcHRpb25zLmZpeGVkR3V0dGVyID8gZ3V0dGVyVyA6IDAsDQogICAgICBkb2NIZWlnaHQ6IGRv
			Y0gsDQogICAgICBzY3JvbGxIZWlnaHQ6IGRvY0ggKyBzY3JvbGxHYXAoY20pICsgZC5iYXJIZWln
			aHQsDQogICAgICBuYXRpdmVCYXJXaWR0aDogZC5uYXRpdmVCYXJXaWR0aCwNCiAgICAgIGd1dHRl
			cldpZHRoOiBndXR0ZXJXDQogICAgfQ0KICB9DQoNCiAgdmFyIE5hdGl2ZVNjcm9sbGJhcnMgPSBm
			dW5jdGlvbihwbGFjZSwgc2Nyb2xsLCBjbSkgew0KICAgIHRoaXMuY20gPSBjbTsNCiAgICB2YXIg
			dmVydCA9IHRoaXMudmVydCA9IGVsdCgiZGl2IiwgW2VsdCgiZGl2IiwgbnVsbCwgbnVsbCwgIm1p
			bi13aWR0aDogMXB4IildLCAiQ29kZU1pcnJvci12c2Nyb2xsYmFyIik7DQogICAgdmFyIGhvcml6
			ID0gdGhpcy5ob3JpeiA9IGVsdCgiZGl2IiwgW2VsdCgiZGl2IiwgbnVsbCwgbnVsbCwgImhlaWdo
			dDogMTAwJTsgbWluLWhlaWdodDogMXB4IildLCAiQ29kZU1pcnJvci1oc2Nyb2xsYmFyIik7DQog
			ICAgdmVydC50YWJJbmRleCA9IGhvcml6LnRhYkluZGV4ID0gLTE7DQogICAgcGxhY2UodmVydCk7
			IHBsYWNlKGhvcml6KTsNCg0KICAgIG9uKHZlcnQsICJzY3JvbGwiLCBmdW5jdGlvbiAoKSB7DQog
			ICAgICBpZiAodmVydC5jbGllbnRIZWlnaHQpIHsgc2Nyb2xsKHZlcnQuc2Nyb2xsVG9wLCAidmVy
			dGljYWwiKTsgfQ0KICAgIH0pOw0KICAgIG9uKGhvcml6LCAic2Nyb2xsIiwgZnVuY3Rpb24gKCkg
			ew0KICAgICAgaWYgKGhvcml6LmNsaWVudFdpZHRoKSB7IHNjcm9sbChob3Jpei5zY3JvbGxMZWZ0
			LCAiaG9yaXpvbnRhbCIpOyB9DQogICAgfSk7DQoNCiAgICB0aGlzLmNoZWNrZWRaZXJvV2lkdGgg
			PSBmYWxzZTsNCiAgICAvLyBOZWVkIHRvIHNldCBhIG1pbmltdW0gd2lkdGggdG8gc2VlIHRoZSBz
			Y3JvbGxiYXIgb24gSUU3IChidXQgbXVzdCBub3Qgc2V0IGl0IG9uIElFOCkuDQogICAgaWYgKGll
			ICYmIGllX3ZlcnNpb24gPCA4KSB7IHRoaXMuaG9yaXouc3R5bGUubWluSGVpZ2h0ID0gdGhpcy52
			ZXJ0LnN0eWxlLm1pbldpZHRoID0gIjE4cHgiOyB9DQogIH07DQoNCiAgTmF0aXZlU2Nyb2xsYmFy
			cy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKG1lYXN1cmUpIHsNCiAgICB2YXIgbmVlZHNI
			ID0gbWVhc3VyZS5zY3JvbGxXaWR0aCA+IG1lYXN1cmUuY2xpZW50V2lkdGggKyAxOw0KICAgIHZh
			ciBuZWVkc1YgPSBtZWFzdXJlLnNjcm9sbEhlaWdodCA+IG1lYXN1cmUuY2xpZW50SGVpZ2h0ICsg
			MTsNCiAgICB2YXIgc1dpZHRoID0gbWVhc3VyZS5uYXRpdmVCYXJXaWR0aDsNCg0KICAgIGlmIChu
			ZWVkc1YpIHsNCiAgICAgIHRoaXMudmVydC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAg
			IHRoaXMudmVydC5zdHlsZS5ib3R0b20gPSBuZWVkc0ggPyBzV2lkdGggKyAicHgiIDogIjAiOw0K
			ICAgICAgdmFyIHRvdGFsSGVpZ2h0ID0gbWVhc3VyZS52aWV3SGVpZ2h0IC0gKG5lZWRzSCA/IHNX
			aWR0aCA6IDApOw0KICAgICAgLy8gQSBidWcgaW4gSUU4IGNhbiBjYXVzZSB0aGlzIHZhbHVlIHRv
			IGJlIG5lZ2F0aXZlLCBzbyBndWFyZCBpdC4NCiAgICAgIHRoaXMudmVydC5maXJzdENoaWxkLnN0
			eWxlLmhlaWdodCA9DQogICAgICAgIE1hdGgubWF4KDAsIG1lYXN1cmUuc2Nyb2xsSGVpZ2h0IC0g
			bWVhc3VyZS5jbGllbnRIZWlnaHQgKyB0b3RhbEhlaWdodCkgKyAicHgiOw0KICAgIH0gZWxzZSB7
			DQogICAgICB0aGlzLnZlcnQuc3R5bGUuZGlzcGxheSA9ICIiOw0KICAgICAgdGhpcy52ZXJ0LmZp
			cnN0Q2hpbGQuc3R5bGUuaGVpZ2h0ID0gIjAiOw0KICAgIH0NCg0KICAgIGlmIChuZWVkc0gpIHsN
			CiAgICAgIHRoaXMuaG9yaXouc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICB0aGlzLmhv
			cml6LnN0eWxlLnJpZ2h0ID0gbmVlZHNWID8gc1dpZHRoICsgInB4IiA6ICIwIjsNCiAgICAgIHRo
			aXMuaG9yaXouc3R5bGUubGVmdCA9IG1lYXN1cmUuYmFyTGVmdCArICJweCI7DQogICAgICB2YXIg
			dG90YWxXaWR0aCA9IG1lYXN1cmUudmlld1dpZHRoIC0gbWVhc3VyZS5iYXJMZWZ0IC0gKG5lZWRz
			ViA/IHNXaWR0aCA6IDApOw0KICAgICAgdGhpcy5ob3Jpei5maXJzdENoaWxkLnN0eWxlLndpZHRo
			ID0NCiAgICAgICAgTWF0aC5tYXgoMCwgbWVhc3VyZS5zY3JvbGxXaWR0aCAtIG1lYXN1cmUuY2xp
			ZW50V2lkdGggKyB0b3RhbFdpZHRoKSArICJweCI7DQogICAgfSBlbHNlIHsNCiAgICAgIHRoaXMu
			aG9yaXouc3R5bGUuZGlzcGxheSA9ICIiOw0KICAgICAgdGhpcy5ob3Jpei5maXJzdENoaWxkLnN0
			eWxlLndpZHRoID0gIjAiOw0KICAgIH0NCg0KICAgIGlmICghdGhpcy5jaGVja2VkWmVyb1dpZHRo
			ICYmIG1lYXN1cmUuY2xpZW50SGVpZ2h0ID4gMCkgew0KICAgICAgaWYgKHNXaWR0aCA9PSAwKSB7
			IHRoaXMuemVyb1dpZHRoSGFjaygpOyB9DQogICAgICB0aGlzLmNoZWNrZWRaZXJvV2lkdGggPSB0
			cnVlOw0KICAgIH0NCg0KICAgIHJldHVybiB7cmlnaHQ6IG5lZWRzViA/IHNXaWR0aCA6IDAsIGJv
			dHRvbTogbmVlZHNIID8gc1dpZHRoIDogMH0NCiAgfTsNCg0KICBOYXRpdmVTY3JvbGxiYXJzLnBy
			b3RvdHlwZS5zZXRTY3JvbGxMZWZ0ID0gZnVuY3Rpb24gKHBvcykgew0KICAgIGlmICh0aGlzLmhv
			cml6LnNjcm9sbExlZnQgIT0gcG9zKSB7IHRoaXMuaG9yaXouc2Nyb2xsTGVmdCA9IHBvczsgfQ0K
			ICAgIGlmICh0aGlzLmRpc2FibGVIb3JpeikgeyB0aGlzLmVuYWJsZVplcm9XaWR0aEJhcih0aGlz
			Lmhvcml6LCB0aGlzLmRpc2FibGVIb3JpeiwgImhvcml6Iik7IH0NCiAgfTsNCg0KICBOYXRpdmVT
			Y3JvbGxiYXJzLnByb3RvdHlwZS5zZXRTY3JvbGxUb3AgPSBmdW5jdGlvbiAocG9zKSB7DQogICAg
			aWYgKHRoaXMudmVydC5zY3JvbGxUb3AgIT0gcG9zKSB7IHRoaXMudmVydC5zY3JvbGxUb3AgPSBw
			b3M7IH0NCiAgICBpZiAodGhpcy5kaXNhYmxlVmVydCkgeyB0aGlzLmVuYWJsZVplcm9XaWR0aEJh
			cih0aGlzLnZlcnQsIHRoaXMuZGlzYWJsZVZlcnQsICJ2ZXJ0Iik7IH0NCiAgfTsNCg0KICBOYXRp
			dmVTY3JvbGxiYXJzLnByb3RvdHlwZS56ZXJvV2lkdGhIYWNrID0gZnVuY3Rpb24gKCkgew0KICAg
			IHZhciB3ID0gbWFjICYmICFtYWNfZ2VNb3VudGFpbkxpb24gPyAiMTJweCIgOiAiMThweCI7DQog
			ICAgdGhpcy5ob3Jpei5zdHlsZS5oZWlnaHQgPSB0aGlzLnZlcnQuc3R5bGUud2lkdGggPSB3Ow0K
			ICAgIHRoaXMuaG9yaXouc3R5bGUucG9pbnRlckV2ZW50cyA9IHRoaXMudmVydC5zdHlsZS5wb2lu
			dGVyRXZlbnRzID0gIm5vbmUiOw0KICAgIHRoaXMuZGlzYWJsZUhvcml6ID0gbmV3IERlbGF5ZWQ7
			DQogICAgdGhpcy5kaXNhYmxlVmVydCA9IG5ldyBEZWxheWVkOw0KICB9Ow0KDQogIE5hdGl2ZVNj
			cm9sbGJhcnMucHJvdG90eXBlLmVuYWJsZVplcm9XaWR0aEJhciA9IGZ1bmN0aW9uIChiYXIsIGRl
			bGF5LCB0eXBlKSB7DQogICAgYmFyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAiYXV0byI7DQogICAg
			ZnVuY3Rpb24gbWF5YmVEaXNhYmxlKCkgew0KICAgICAgLy8gVG8gZmluZCBvdXQgd2hldGhlciB0
			aGUgc2Nyb2xsYmFyIGlzIHN0aWxsIHZpc2libGUsIHdlDQogICAgICAvLyBjaGVjayB3aGV0aGVy
			IHRoZSBlbGVtZW50IHVuZGVyIHRoZSBwaXhlbCBpbiB0aGUgYm90dG9tDQogICAgICAvLyByaWdo
			dCBjb3JuZXIgb2YgdGhlIHNjcm9sbGJhciBib3ggaXMgdGhlIHNjcm9sbGJhciBib3gNCiAgICAg
			IC8vIGl0c2VsZiAod2hlbiB0aGUgYmFyIGlzIHN0aWxsIHZpc2libGUpIG9yIGl0cyBmaWxsZXIg
			Y2hpbGQNCiAgICAgIC8vICh3aGVuIHRoZSBiYXIgaXMgaGlkZGVuKS4gSWYgaXQgaXMgc3RpbGwg
			dmlzaWJsZSwgd2Uga2VlcA0KICAgICAgLy8gaXQgZW5hYmxlZCwgaWYgaXQncyBoaWRkZW4sIHdl
			IGRpc2FibGUgcG9pbnRlciBldmVudHMuDQogICAgICB2YXIgYm94ID0gYmFyLmdldEJvdW5kaW5n
			Q2xpZW50UmVjdCgpOw0KICAgICAgdmFyIGVsdCQkMSA9IHR5cGUgPT0gInZlcnQiID8gZG9jdW1l
			bnQuZWxlbWVudEZyb21Qb2ludChib3gucmlnaHQgLSAxLCAoYm94LnRvcCArIGJveC5ib3R0b20p
			IC8gMikNCiAgICAgICAgICA6IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoKGJveC5yaWdodCAr
			IGJveC5sZWZ0KSAvIDIsIGJveC5ib3R0b20gLSAxKTsNCiAgICAgIGlmIChlbHQkJDEgIT0gYmFy
			KSB7IGJhci5zdHlsZS5wb2ludGVyRXZlbnRzID0gIm5vbmUiOyB9DQogICAgICBlbHNlIHsgZGVs
			YXkuc2V0KDEwMDAsIG1heWJlRGlzYWJsZSk7IH0NCiAgICB9DQogICAgZGVsYXkuc2V0KDEwMDAs
			IG1heWJlRGlzYWJsZSk7DQogIH07DQoNCiAgTmF0aXZlU2Nyb2xsYmFycy5wcm90b3R5cGUuY2xl
			YXIgPSBmdW5jdGlvbiAoKSB7DQogICAgdmFyIHBhcmVudCA9IHRoaXMuaG9yaXoucGFyZW50Tm9k
			ZTsNCiAgICBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5ob3Jpeik7DQogICAgcGFyZW50LnJlbW92
			ZUNoaWxkKHRoaXMudmVydCk7DQogIH07DQoNCiAgdmFyIE51bGxTY3JvbGxiYXJzID0gZnVuY3Rp
			b24gKCkge307DQoNCiAgTnVsbFNjcm9sbGJhcnMucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9u
			ICgpIHsgcmV0dXJuIHtib3R0b206IDAsIHJpZ2h0OiAwfSB9Ow0KICBOdWxsU2Nyb2xsYmFycy5w
			cm90b3R5cGUuc2V0U2Nyb2xsTGVmdCA9IGZ1bmN0aW9uICgpIHt9Ow0KICBOdWxsU2Nyb2xsYmFy
			cy5wcm90b3R5cGUuc2V0U2Nyb2xsVG9wID0gZnVuY3Rpb24gKCkge307DQogIE51bGxTY3JvbGxi
			YXJzLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHt9Ow0KDQogIGZ1bmN0aW9uIHVwZGF0
			ZVNjcm9sbGJhcnMoY20sIG1lYXN1cmUpIHsNCiAgICBpZiAoIW1lYXN1cmUpIHsgbWVhc3VyZSA9
			IG1lYXN1cmVGb3JTY3JvbGxiYXJzKGNtKTsgfQ0KICAgIHZhciBzdGFydFdpZHRoID0gY20uZGlz
			cGxheS5iYXJXaWR0aCwgc3RhcnRIZWlnaHQgPSBjbS5kaXNwbGF5LmJhckhlaWdodDsNCiAgICB1
			cGRhdGVTY3JvbGxiYXJzSW5uZXIoY20sIG1lYXN1cmUpOw0KICAgIGZvciAodmFyIGkgPSAwOyBp
			IDwgNCAmJiBzdGFydFdpZHRoICE9IGNtLmRpc3BsYXkuYmFyV2lkdGggfHwgc3RhcnRIZWlnaHQg
			IT0gY20uZGlzcGxheS5iYXJIZWlnaHQ7IGkrKykgew0KICAgICAgaWYgKHN0YXJ0V2lkdGggIT0g
			Y20uZGlzcGxheS5iYXJXaWR0aCAmJiBjbS5vcHRpb25zLmxpbmVXcmFwcGluZykNCiAgICAgICAg
			eyB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSk7IH0NCiAgICAgIHVwZGF0ZVNjcm9sbGJhcnNJ
			bm5lcihjbSwgbWVhc3VyZUZvclNjcm9sbGJhcnMoY20pKTsNCiAgICAgIHN0YXJ0V2lkdGggPSBj
			bS5kaXNwbGF5LmJhcldpZHRoOyBzdGFydEhlaWdodCA9IGNtLmRpc3BsYXkuYmFySGVpZ2h0Ow0K
			ICAgIH0NCiAgfQ0KDQogIC8vIFJlLXN5bmNocm9uaXplIHRoZSBmYWtlIHNjcm9sbGJhcnMgd2l0
			aCB0aGUgYWN0dWFsIHNpemUgb2YgdGhlDQogIC8vIGNvbnRlbnQuDQogIGZ1bmN0aW9uIHVwZGF0
			ZVNjcm9sbGJhcnNJbm5lcihjbSwgbWVhc3VyZSkgew0KICAgIHZhciBkID0gY20uZGlzcGxheTsN
			CiAgICB2YXIgc2l6ZXMgPSBkLnNjcm9sbGJhcnMudXBkYXRlKG1lYXN1cmUpOw0KDQogICAgZC5z
			aXplci5zdHlsZS5wYWRkaW5nUmlnaHQgPSAoZC5iYXJXaWR0aCA9IHNpemVzLnJpZ2h0KSArICJw
			eCI7DQogICAgZC5zaXplci5zdHlsZS5wYWRkaW5nQm90dG9tID0gKGQuYmFySGVpZ2h0ID0gc2l6
			ZXMuYm90dG9tKSArICJweCI7DQogICAgZC5oZWlnaHRGb3JjZXIuc3R5bGUuYm9yZGVyQm90dG9t
			ID0gc2l6ZXMuYm90dG9tICsgInB4IHNvbGlkIHRyYW5zcGFyZW50IjsNCg0KICAgIGlmIChzaXpl
			cy5yaWdodCAmJiBzaXplcy5ib3R0b20pIHsNCiAgICAgIGQuc2Nyb2xsYmFyRmlsbGVyLnN0eWxl
			LmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgZC5zY3JvbGxiYXJGaWxsZXIuc3R5bGUuaGVpZ2h0
			ID0gc2l6ZXMuYm90dG9tICsgInB4IjsNCiAgICAgIGQuc2Nyb2xsYmFyRmlsbGVyLnN0eWxlLndp
			ZHRoID0gc2l6ZXMucmlnaHQgKyAicHgiOw0KICAgIH0gZWxzZSB7IGQuc2Nyb2xsYmFyRmlsbGVy
			LnN0eWxlLmRpc3BsYXkgPSAiIjsgfQ0KICAgIGlmIChzaXplcy5ib3R0b20gJiYgY20ub3B0aW9u
			cy5jb3Zlckd1dHRlck5leHRUb1Njcm9sbGJhciAmJiBjbS5vcHRpb25zLmZpeGVkR3V0dGVyKSB7
			DQogICAgICBkLmd1dHRlckZpbGxlci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgIGQu
			Z3V0dGVyRmlsbGVyLnN0eWxlLmhlaWdodCA9IHNpemVzLmJvdHRvbSArICJweCI7DQogICAgICBk
			Lmd1dHRlckZpbGxlci5zdHlsZS53aWR0aCA9IG1lYXN1cmUuZ3V0dGVyV2lkdGggKyAicHgiOw0K
			ICAgIH0gZWxzZSB7IGQuZ3V0dGVyRmlsbGVyLnN0eWxlLmRpc3BsYXkgPSAiIjsgfQ0KICB9DQoN
			CiAgdmFyIHNjcm9sbGJhck1vZGVsID0geyJuYXRpdmUiOiBOYXRpdmVTY3JvbGxiYXJzLCAibnVs
			bCI6IE51bGxTY3JvbGxiYXJzfTsNCg0KICBmdW5jdGlvbiBpbml0U2Nyb2xsYmFycyhjbSkgew0K
			ICAgIGlmIChjbS5kaXNwbGF5LnNjcm9sbGJhcnMpIHsNCiAgICAgIGNtLmRpc3BsYXkuc2Nyb2xs
			YmFycy5jbGVhcigpOw0KICAgICAgaWYgKGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5hZGRDbGFzcykN
			CiAgICAgICAgeyBybUNsYXNzKGNtLmRpc3BsYXkud3JhcHBlciwgY20uZGlzcGxheS5zY3JvbGxi
			YXJzLmFkZENsYXNzKTsgfQ0KICAgIH0NCg0KICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycyA9IG5l
			dyBzY3JvbGxiYXJNb2RlbFtjbS5vcHRpb25zLnNjcm9sbGJhclN0eWxlXShmdW5jdGlvbiAobm9k
			ZSkgew0KICAgICAgY20uZGlzcGxheS53cmFwcGVyLmluc2VydEJlZm9yZShub2RlLCBjbS5kaXNw
			bGF5LnNjcm9sbGJhckZpbGxlcik7DQogICAgICAvLyBQcmV2ZW50IGNsaWNrcyBpbiB0aGUgc2Ny
			b2xsYmFycyBmcm9tIGtpbGxpbmcgZm9jdXMNCiAgICAgIG9uKG5vZGUsICJtb3VzZWRvd24iLCBm
			dW5jdGlvbiAoKSB7DQogICAgICAgIGlmIChjbS5zdGF0ZS5mb2N1c2VkKSB7IHNldFRpbWVvdXQo
			ZnVuY3Rpb24gKCkgeyByZXR1cm4gY20uZGlzcGxheS5pbnB1dC5mb2N1cygpOyB9LCAwKTsgfQ0K
			ICAgICAgfSk7DQogICAgICBub2RlLnNldEF0dHJpYnV0ZSgiY20tbm90LWNvbnRlbnQiLCAidHJ1
			ZSIpOw0KICAgIH0sIGZ1bmN0aW9uIChwb3MsIGF4aXMpIHsNCiAgICAgIGlmIChheGlzID09ICJo
			b3Jpem9udGFsIikgeyBzZXRTY3JvbGxMZWZ0KGNtLCBwb3MpOyB9DQogICAgICBlbHNlIHsgdXBk
			YXRlU2Nyb2xsVG9wKGNtLCBwb3MpOyB9DQogICAgfSwgY20pOw0KICAgIGlmIChjbS5kaXNwbGF5
			LnNjcm9sbGJhcnMuYWRkQ2xhc3MpDQogICAgICB7IGFkZENsYXNzKGNtLmRpc3BsYXkud3JhcHBl
			ciwgY20uZGlzcGxheS5zY3JvbGxiYXJzLmFkZENsYXNzKTsgfQ0KICB9DQoNCiAgLy8gT3BlcmF0
			aW9ucyBhcmUgdXNlZCB0byB3cmFwIGEgc2VyaWVzIG9mIGNoYW5nZXMgdG8gdGhlIGVkaXRvcg0K
			ICAvLyBzdGF0ZSBpbiBzdWNoIGEgd2F5IHRoYXQgZWFjaCBjaGFuZ2Ugd29uJ3QgaGF2ZSB0byB1
			cGRhdGUgdGhlDQogIC8vIGN1cnNvciBhbmQgZGlzcGxheSAod2hpY2ggd291bGQgYmUgYXdrd2Fy
			ZCwgc2xvdywgYW5kDQogIC8vIGVycm9yLXByb25lKS4gSW5zdGVhZCwgZGlzcGxheSB1cGRhdGVz
			IGFyZSBiYXRjaGVkIGFuZCB0aGVuIGFsbA0KICAvLyBjb21iaW5lZCBhbmQgZXhlY3V0ZWQgYXQg
			b25jZS4NCg0KICB2YXIgbmV4dE9wSWQgPSAwOw0KICAvLyBTdGFydCBhIG5ldyBvcGVyYXRpb24u
			DQogIGZ1bmN0aW9uIHN0YXJ0T3BlcmF0aW9uKGNtKSB7DQogICAgY20uY3VyT3AgPSB7DQogICAg
			ICBjbTogY20sDQogICAgICB2aWV3Q2hhbmdlZDogZmFsc2UsICAgICAgLy8gRmxhZyB0aGF0IGlu
			ZGljYXRlcyB0aGF0IGxpbmVzIG1pZ2h0IG5lZWQgdG8gYmUgcmVkcmF3bg0KICAgICAgc3RhcnRI
			ZWlnaHQ6IGNtLmRvYy5oZWlnaHQsIC8vIFVzZWQgdG8gZGV0ZWN0IG5lZWQgdG8gdXBkYXRlIHNj
			cm9sbGJhcg0KICAgICAgZm9yY2VVcGRhdGU6IGZhbHNlLCAgICAgIC8vIFVzZWQgdG8gZm9yY2Ug
			YSByZWRyYXcNCiAgICAgIHVwZGF0ZUlucHV0OiAwLCAgICAgICAvLyBXaGV0aGVyIHRvIHJlc2V0
			IHRoZSBpbnB1dCB0ZXh0YXJlYQ0KICAgICAgdHlwaW5nOiBmYWxzZSwgICAgICAgICAgIC8vIFdo
			ZXRoZXIgdGhpcyByZXNldCBzaG91bGQgYmUgY2FyZWZ1bCB0byBsZWF2ZSBleGlzdGluZyB0ZXh0
			IChmb3IgY29tcG9zaXRpbmcpDQogICAgICBjaGFuZ2VPYmpzOiBudWxsLCAgICAgICAgLy8gQWNj
			dW11bGF0ZWQgY2hhbmdlcywgZm9yIGZpcmluZyBjaGFuZ2UgZXZlbnRzDQogICAgICBjdXJzb3JB
			Y3Rpdml0eUhhbmRsZXJzOiBudWxsLCAvLyBTZXQgb2YgaGFuZGxlcnMgdG8gZmlyZSBjdXJzb3JB
			Y3Rpdml0eSBvbg0KICAgICAgY3Vyc29yQWN0aXZpdHlDYWxsZWQ6IDAsIC8vIFRyYWNrcyB3aGlj
			aCBjdXJzb3JBY3Rpdml0eSBoYW5kbGVycyBoYXZlIGJlZW4gY2FsbGVkIGFscmVhZHkNCiAgICAg
			IHNlbGVjdGlvbkNoYW5nZWQ6IGZhbHNlLCAvLyBXaGV0aGVyIHRoZSBzZWxlY3Rpb24gbmVlZHMg
			dG8gYmUgcmVkcmF3bg0KICAgICAgdXBkYXRlTWF4TGluZTogZmFsc2UsICAgIC8vIFNldCB3aGVu
			IHRoZSB3aWRlc3QgbGluZSBuZWVkcyB0byBiZSBkZXRlcm1pbmVkIGFuZXcNCiAgICAgIHNjcm9s
			bExlZnQ6IG51bGwsIHNjcm9sbFRvcDogbnVsbCwgLy8gSW50ZXJtZWRpYXRlIHNjcm9sbCBwb3Np
			dGlvbiwgbm90IHB1c2hlZCB0byBET00geWV0DQogICAgICBzY3JvbGxUb1BvczogbnVsbCwgICAg
			ICAgLy8gVXNlZCB0byBzY3JvbGwgdG8gYSBzcGVjaWZpYyBwb3NpdGlvbg0KICAgICAgZm9jdXM6
			IGZhbHNlLA0KICAgICAgaWQ6ICsrbmV4dE9wSWQgICAgICAgICAgIC8vIFVuaXF1ZSBJRA0KICAg
			IH07DQogICAgcHVzaE9wZXJhdGlvbihjbS5jdXJPcCk7DQogIH0NCg0KICAvLyBGaW5pc2ggYW4g
			b3BlcmF0aW9uLCB1cGRhdGluZyB0aGUgZGlzcGxheSBhbmQgc2lnbmFsbGluZyBkZWxheWVkIGV2
			ZW50cw0KICBmdW5jdGlvbiBlbmRPcGVyYXRpb24oY20pIHsNCiAgICB2YXIgb3AgPSBjbS5jdXJP
			cDsNCiAgICBpZiAob3ApIHsgZmluaXNoT3BlcmF0aW9uKG9wLCBmdW5jdGlvbiAoZ3JvdXApIHsN
			CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXAub3BzLmxlbmd0aDsgaSsrKQ0KICAgICAg
			ICB7IGdyb3VwLm9wc1tpXS5jbS5jdXJPcCA9IG51bGw7IH0NCiAgICAgIGVuZE9wZXJhdGlvbnMo
			Z3JvdXApOw0KICAgIH0pOyB9DQogIH0NCg0KICAvLyBUaGUgRE9NIHVwZGF0ZXMgZG9uZSB3aGVu
			IGFuIG9wZXJhdGlvbiBmaW5pc2hlcyBhcmUgYmF0Y2hlZCBzbw0KICAvLyB0aGF0IHRoZSBtaW5p
			bXVtIG51bWJlciBvZiByZWxheW91dHMgYXJlIHJlcXVpcmVkLg0KICBmdW5jdGlvbiBlbmRPcGVy
			YXRpb25zKGdyb3VwKSB7DQogICAgdmFyIG9wcyA9IGdyb3VwLm9wczsNCiAgICBmb3IgKHZhciBp
			ID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykgLy8gUmVhZCBET00NCiAgICAgIHsgZW5kT3BlcmF0
			aW9uX1IxKG9wc1tpXSk7IH0NCiAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBvcHMubGVuZ3Ro
			OyBpJDErKykgLy8gV3JpdGUgRE9NIChtYXliZSkNCiAgICAgIHsgZW5kT3BlcmF0aW9uX1cxKG9w
			c1tpJDFdKTsgfQ0KICAgIGZvciAodmFyIGkkMiA9IDA7IGkkMiA8IG9wcy5sZW5ndGg7IGkkMisr
			KSAvLyBSZWFkIERPTQ0KICAgICAgeyBlbmRPcGVyYXRpb25fUjIob3BzW2kkMl0pOyB9DQogICAg
			Zm9yICh2YXIgaSQzID0gMDsgaSQzIDwgb3BzLmxlbmd0aDsgaSQzKyspIC8vIFdyaXRlIERPTSAo
			bWF5YmUpDQogICAgICB7IGVuZE9wZXJhdGlvbl9XMihvcHNbaSQzXSk7IH0NCiAgICBmb3IgKHZh
			ciBpJDQgPSAwOyBpJDQgPCBvcHMubGVuZ3RoOyBpJDQrKykgLy8gUmVhZCBET00NCiAgICAgIHsg
			ZW5kT3BlcmF0aW9uX2ZpbmlzaChvcHNbaSQ0XSk7IH0NCiAgfQ0KDQogIGZ1bmN0aW9uIGVuZE9w
			ZXJhdGlvbl9SMShvcCkgew0KICAgIHZhciBjbSA9IG9wLmNtLCBkaXNwbGF5ID0gY20uZGlzcGxh
			eTsNCiAgICBtYXliZUNsaXBTY3JvbGxiYXJzKGNtKTsNCiAgICBpZiAob3AudXBkYXRlTWF4TGlu
			ZSkgeyBmaW5kTWF4TGluZShjbSk7IH0NCg0KICAgIG9wLm11c3RVcGRhdGUgPSBvcC52aWV3Q2hh
			bmdlZCB8fCBvcC5mb3JjZVVwZGF0ZSB8fCBvcC5zY3JvbGxUb3AgIT0gbnVsbCB8fA0KICAgICAg
			b3Auc2Nyb2xsVG9Qb3MgJiYgKG9wLnNjcm9sbFRvUG9zLmZyb20ubGluZSA8IGRpc3BsYXkudmll
			d0Zyb20gfHwNCiAgICAgICAgICAgICAgICAgICAgICAgICBvcC5zY3JvbGxUb1Bvcy50by5saW5l
			ID49IGRpc3BsYXkudmlld1RvKSB8fA0KICAgICAgZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCAmJiBj
			bS5vcHRpb25zLmxpbmVXcmFwcGluZzsNCiAgICBvcC51cGRhdGUgPSBvcC5tdXN0VXBkYXRlICYm
			DQogICAgICBuZXcgRGlzcGxheVVwZGF0ZShjbSwgb3AubXVzdFVwZGF0ZSAmJiB7dG9wOiBvcC5z
			Y3JvbGxUb3AsIGVuc3VyZTogb3Auc2Nyb2xsVG9Qb3N9LCBvcC5mb3JjZVVwZGF0ZSk7DQogIH0N
			Cg0KICBmdW5jdGlvbiBlbmRPcGVyYXRpb25fVzEob3ApIHsNCiAgICBvcC51cGRhdGVkRGlzcGxh
			eSA9IG9wLm11c3RVcGRhdGUgJiYgdXBkYXRlRGlzcGxheUlmTmVlZGVkKG9wLmNtLCBvcC51cGRh
			dGUpOw0KICB9DQoNCiAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uX1IyKG9wKSB7DQogICAgdmFyIGNt
			ID0gb3AuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5Ow0KICAgIGlmIChvcC51cGRhdGVkRGlzcGxh
			eSkgeyB1cGRhdGVIZWlnaHRzSW5WaWV3cG9ydChjbSk7IH0NCg0KICAgIG9wLmJhck1lYXN1cmUg
			PSBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSk7DQoNCiAgICAvLyBJZiB0aGUgbWF4IGxpbmUgY2hh
			bmdlZCBzaW5jZSBpdCB3YXMgbGFzdCBtZWFzdXJlZCwgbWVhc3VyZSBpdCwNCiAgICAvLyBhbmQg
			ZW5zdXJlIHRoZSBkb2N1bWVudCdzIHdpZHRoIG1hdGNoZXMgaXQuDQogICAgLy8gdXBkYXRlRGlz
			cGxheV9XMiB3aWxsIHVzZSB0aGVzZSBwcm9wZXJ0aWVzIHRvIGRvIHRoZSBhY3R1YWwgcmVzaXpp
			bmcNCiAgICBpZiAoZGlzcGxheS5tYXhMaW5lQ2hhbmdlZCAmJiAhY20ub3B0aW9ucy5saW5lV3Jh
			cHBpbmcpIHsNCiAgICAgIG9wLmFkanVzdFdpZHRoVG8gPSBtZWFzdXJlQ2hhcihjbSwgZGlzcGxh
			eS5tYXhMaW5lLCBkaXNwbGF5Lm1heExpbmUudGV4dC5sZW5ndGgpLmxlZnQgKyAzOw0KICAgICAg
			Y20uZGlzcGxheS5zaXplcldpZHRoID0gb3AuYWRqdXN0V2lkdGhUbzsNCiAgICAgIG9wLmJhck1l
			YXN1cmUuc2Nyb2xsV2lkdGggPQ0KICAgICAgICBNYXRoLm1heChkaXNwbGF5LnNjcm9sbGVyLmNs
			aWVudFdpZHRoLCBkaXNwbGF5LnNpemVyLm9mZnNldExlZnQgKyBvcC5hZGp1c3RXaWR0aFRvICsg
			c2Nyb2xsR2FwKGNtKSArIGNtLmRpc3BsYXkuYmFyV2lkdGgpOw0KICAgICAgb3AubWF4U2Nyb2xs
			TGVmdCA9IE1hdGgubWF4KDAsIGRpc3BsYXkuc2l6ZXIub2Zmc2V0TGVmdCArIG9wLmFkanVzdFdp
			ZHRoVG8gLSBkaXNwbGF5V2lkdGgoY20pKTsNCiAgICB9DQoNCiAgICBpZiAob3AudXBkYXRlZERp
			c3BsYXkgfHwgb3Auc2VsZWN0aW9uQ2hhbmdlZCkNCiAgICAgIHsgb3AucHJlcGFyZWRTZWxlY3Rp
			b24gPSBkaXNwbGF5LmlucHV0LnByZXBhcmVTZWxlY3Rpb24oKTsgfQ0KICB9DQoNCiAgZnVuY3Rp
			b24gZW5kT3BlcmF0aW9uX1cyKG9wKSB7DQogICAgdmFyIGNtID0gb3AuY207DQoNCiAgICBpZiAo
			b3AuYWRqdXN0V2lkdGhUbyAhPSBudWxsKSB7DQogICAgICBjbS5kaXNwbGF5LnNpemVyLnN0eWxl
			Lm1pbldpZHRoID0gb3AuYWRqdXN0V2lkdGhUbyArICJweCI7DQogICAgICBpZiAob3AubWF4U2Ny
			b2xsTGVmdCA8IGNtLmRvYy5zY3JvbGxMZWZ0KQ0KICAgICAgICB7IHNldFNjcm9sbExlZnQoY20s
			IE1hdGgubWluKGNtLmRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsTGVmdCwgb3AubWF4U2Nyb2xsTGVm
			dCksIHRydWUpOyB9DQogICAgICBjbS5kaXNwbGF5Lm1heExpbmVDaGFuZ2VkID0gZmFsc2U7DQog
			ICAgfQ0KDQogICAgdmFyIHRha2VGb2N1cyA9IG9wLmZvY3VzICYmIG9wLmZvY3VzID09IGFjdGl2
			ZUVsdCgpOw0KICAgIGlmIChvcC5wcmVwYXJlZFNlbGVjdGlvbikNCiAgICAgIHsgY20uZGlzcGxh
			eS5pbnB1dC5zaG93U2VsZWN0aW9uKG9wLnByZXBhcmVkU2VsZWN0aW9uLCB0YWtlRm9jdXMpOyB9
			DQogICAgaWYgKG9wLnVwZGF0ZWREaXNwbGF5IHx8IG9wLnN0YXJ0SGVpZ2h0ICE9IGNtLmRvYy5o
			ZWlnaHQpDQogICAgICB7IHVwZGF0ZVNjcm9sbGJhcnMoY20sIG9wLmJhck1lYXN1cmUpOyB9DQog
			ICAgaWYgKG9wLnVwZGF0ZWREaXNwbGF5KQ0KICAgICAgeyBzZXREb2N1bWVudEhlaWdodChjbSwg
			b3AuYmFyTWVhc3VyZSk7IH0NCg0KICAgIGlmIChvcC5zZWxlY3Rpb25DaGFuZ2VkKSB7IHJlc3Rh
			cnRCbGluayhjbSk7IH0NCg0KICAgIGlmIChjbS5zdGF0ZS5mb2N1c2VkICYmIG9wLnVwZGF0ZUlu
			cHV0KQ0KICAgICAgeyBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KG9wLnR5cGluZyk7IH0NCiAgICBp
			ZiAodGFrZUZvY3VzKSB7IGVuc3VyZUZvY3VzKG9wLmNtKTsgfQ0KICB9DQoNCiAgZnVuY3Rpb24g
			ZW5kT3BlcmF0aW9uX2ZpbmlzaChvcCkgew0KICAgIHZhciBjbSA9IG9wLmNtLCBkaXNwbGF5ID0g
			Y20uZGlzcGxheSwgZG9jID0gY20uZG9jOw0KDQogICAgaWYgKG9wLnVwZGF0ZWREaXNwbGF5KSB7
			IHBvc3RVcGRhdGVEaXNwbGF5KGNtLCBvcC51cGRhdGUpOyB9DQoNCiAgICAvLyBBYm9ydCBtb3Vz
			ZSB3aGVlbCBkZWx0YSBtZWFzdXJlbWVudCwgd2hlbiBzY3JvbGxpbmcgZXhwbGljaXRseQ0KICAg
			IGlmIChkaXNwbGF5LndoZWVsU3RhcnRYICE9IG51bGwgJiYgKG9wLnNjcm9sbFRvcCAhPSBudWxs
			IHx8IG9wLnNjcm9sbExlZnQgIT0gbnVsbCB8fCBvcC5zY3JvbGxUb1BvcykpDQogICAgICB7IGRp
			c3BsYXkud2hlZWxTdGFydFggPSBkaXNwbGF5LndoZWVsU3RhcnRZID0gbnVsbDsgfQ0KDQogICAg
			Ly8gUHJvcGFnYXRlIHRoZSBzY3JvbGwgcG9zaXRpb24gdG8gdGhlIGFjdHVhbCBET00gc2Nyb2xs
			ZXINCiAgICBpZiAob3Auc2Nyb2xsVG9wICE9IG51bGwpIHsgc2V0U2Nyb2xsVG9wKGNtLCBvcC5z
			Y3JvbGxUb3AsIG9wLmZvcmNlU2Nyb2xsKTsgfQ0KDQogICAgaWYgKG9wLnNjcm9sbExlZnQgIT0g
			bnVsbCkgeyBzZXRTY3JvbGxMZWZ0KGNtLCBvcC5zY3JvbGxMZWZ0LCB0cnVlLCB0cnVlKTsgfQ0K
			ICAgIC8vIElmIHdlIG5lZWQgdG8gc2Nyb2xsIGEgc3BlY2lmaWMgcG9zaXRpb24gaW50byB2aWV3
			LCBkbyBzby4NCiAgICBpZiAob3Auc2Nyb2xsVG9Qb3MpIHsNCiAgICAgIHZhciByZWN0ID0gc2Ny
			b2xsUG9zSW50b1ZpZXcoY20sIGNsaXBQb3MoZG9jLCBvcC5zY3JvbGxUb1Bvcy5mcm9tKSwNCiAg
			ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcFBvcyhkb2MsIG9wLnNjcm9sbFRv
			UG9zLnRvKSwgb3Auc2Nyb2xsVG9Qb3MubWFyZ2luKTsNCiAgICAgIG1heWJlU2Nyb2xsV2luZG93
			KGNtLCByZWN0KTsNCiAgICB9DQoNCiAgICAvLyBGaXJlIGV2ZW50cyBmb3IgbWFya2VycyB0aGF0
			IGFyZSBoaWRkZW4vdW5pZGRlbiBieSBlZGl0aW5nIG9yDQogICAgLy8gdW5kb2luZw0KICAgIHZh
			ciBoaWRkZW4gPSBvcC5tYXliZUhpZGRlbk1hcmtlcnMsIHVuaGlkZGVuID0gb3AubWF5YmVVbmhp
			ZGRlbk1hcmtlcnM7DQogICAgaWYgKGhpZGRlbikgeyBmb3IgKHZhciBpID0gMDsgaSA8IGhpZGRl
			bi5sZW5ndGg7ICsraSkNCiAgICAgIHsgaWYgKCFoaWRkZW5baV0ubGluZXMubGVuZ3RoKSB7IHNp
			Z25hbChoaWRkZW5baV0sICJoaWRlIik7IH0gfSB9DQogICAgaWYgKHVuaGlkZGVuKSB7IGZvciAo
			dmFyIGkkMSA9IDA7IGkkMSA8IHVuaGlkZGVuLmxlbmd0aDsgKytpJDEpDQogICAgICB7IGlmICh1
			bmhpZGRlbltpJDFdLmxpbmVzLmxlbmd0aCkgeyBzaWduYWwodW5oaWRkZW5baSQxXSwgInVuaGlk
			ZSIpOyB9IH0gfQ0KDQogICAgaWYgKGRpc3BsYXkud3JhcHBlci5vZmZzZXRIZWlnaHQpDQogICAg
			ICB7IGRvYy5zY3JvbGxUb3AgPSBjbS5kaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcDsgfQ0KDQog
			ICAgLy8gRmlyZSBjaGFuZ2UgZXZlbnRzLCBhbmQgZGVsYXllZCBldmVudCBoYW5kbGVycw0KICAg
			IGlmIChvcC5jaGFuZ2VPYmpzKQ0KICAgICAgeyBzaWduYWwoY20sICJjaGFuZ2VzIiwgY20sIG9w
			LmNoYW5nZU9ianMpOyB9DQogICAgaWYgKG9wLnVwZGF0ZSkNCiAgICAgIHsgb3AudXBkYXRlLmZp
			bmlzaCgpOyB9DQogIH0NCg0KICAvLyBSdW4gdGhlIGdpdmVuIGZ1bmN0aW9uIGluIGFuIG9wZXJh
			dGlvbg0KICBmdW5jdGlvbiBydW5Jbk9wKGNtLCBmKSB7DQogICAgaWYgKGNtLmN1ck9wKSB7IHJl
			dHVybiBmKCkgfQ0KICAgIHN0YXJ0T3BlcmF0aW9uKGNtKTsNCiAgICB0cnkgeyByZXR1cm4gZigp
			IH0NCiAgICBmaW5hbGx5IHsgZW5kT3BlcmF0aW9uKGNtKTsgfQ0KICB9DQogIC8vIFdyYXBzIGEg
			ZnVuY3Rpb24gaW4gYW4gb3BlcmF0aW9uLiBSZXR1cm5zIHRoZSB3cmFwcGVkIGZ1bmN0aW9uLg0K
			ICBmdW5jdGlvbiBvcGVyYXRpb24oY20sIGYpIHsNCiAgICByZXR1cm4gZnVuY3Rpb24oKSB7DQog
			ICAgICBpZiAoY20uY3VyT3ApIHsgcmV0dXJuIGYuYXBwbHkoY20sIGFyZ3VtZW50cykgfQ0KICAg
			ICAgc3RhcnRPcGVyYXRpb24oY20pOw0KICAgICAgdHJ5IHsgcmV0dXJuIGYuYXBwbHkoY20sIGFy
			Z3VtZW50cykgfQ0KICAgICAgZmluYWxseSB7IGVuZE9wZXJhdGlvbihjbSk7IH0NCiAgICB9DQog
			IH0NCiAgLy8gVXNlZCB0byBhZGQgbWV0aG9kcyB0byBlZGl0b3IgYW5kIGRvYyBpbnN0YW5jZXMs
			IHdyYXBwaW5nIHRoZW0gaW4NCiAgLy8gb3BlcmF0aW9ucy4NCiAgZnVuY3Rpb24gbWV0aG9kT3Ao
			Zikgew0KICAgIHJldHVybiBmdW5jdGlvbigpIHsNCiAgICAgIGlmICh0aGlzLmN1ck9wKSB7IHJl
			dHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfQ0KICAgICAgc3RhcnRPcGVyYXRpb24odGhp
			cyk7DQogICAgICB0cnkgeyByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIH0NCiAgICAg
			IGZpbmFsbHkgeyBlbmRPcGVyYXRpb24odGhpcyk7IH0NCiAgICB9DQogIH0NCiAgZnVuY3Rpb24g
			ZG9jTWV0aG9kT3AoZikgew0KICAgIHJldHVybiBmdW5jdGlvbigpIHsNCiAgICAgIHZhciBjbSA9
			IHRoaXMuY207DQogICAgICBpZiAoIWNtIHx8IGNtLmN1ck9wKSB7IHJldHVybiBmLmFwcGx5KHRo
			aXMsIGFyZ3VtZW50cykgfQ0KICAgICAgc3RhcnRPcGVyYXRpb24oY20pOw0KICAgICAgdHJ5IHsg
			cmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKSB9DQogICAgICBmaW5hbGx5IHsgZW5kT3Bl
			cmF0aW9uKGNtKTsgfQ0KICAgIH0NCiAgfQ0KDQogIC8vIEhJR0hMSUdIVCBXT1JLRVINCg0KICBm
			dW5jdGlvbiBzdGFydFdvcmtlcihjbSwgdGltZSkgew0KICAgIGlmIChjbS5kb2MuaGlnaGxpZ2h0
			RnJvbnRpZXIgPCBjbS5kaXNwbGF5LnZpZXdUbykNCiAgICAgIHsgY20uc3RhdGUuaGlnaGxpZ2h0
			LnNldCh0aW1lLCBiaW5kKGhpZ2hsaWdodFdvcmtlciwgY20pKTsgfQ0KICB9DQoNCiAgZnVuY3Rp
			b24gaGlnaGxpZ2h0V29ya2VyKGNtKSB7DQogICAgdmFyIGRvYyA9IGNtLmRvYzsNCiAgICBpZiAo
			ZG9jLmhpZ2hsaWdodEZyb250aWVyID49IGNtLmRpc3BsYXkudmlld1RvKSB7IHJldHVybiB9DQog
			ICAgdmFyIGVuZCA9ICtuZXcgRGF0ZSArIGNtLm9wdGlvbnMud29ya1RpbWU7DQogICAgdmFyIGNv
			bnRleHQgPSBnZXRDb250ZXh0QmVmb3JlKGNtLCBkb2MuaGlnaGxpZ2h0RnJvbnRpZXIpOw0KICAg
			IHZhciBjaGFuZ2VkTGluZXMgPSBbXTsNCg0KICAgIGRvYy5pdGVyKGNvbnRleHQubGluZSwgTWF0
			aC5taW4oZG9jLmZpcnN0ICsgZG9jLnNpemUsIGNtLmRpc3BsYXkudmlld1RvICsgNTAwKSwgZnVu
			Y3Rpb24gKGxpbmUpIHsNCiAgICAgIGlmIChjb250ZXh0LmxpbmUgPj0gY20uZGlzcGxheS52aWV3
			RnJvbSkgeyAvLyBWaXNpYmxlDQogICAgICAgIHZhciBvbGRTdHlsZXMgPSBsaW5lLnN0eWxlczsN
			CiAgICAgICAgdmFyIHJlc2V0U3RhdGUgPSBsaW5lLnRleHQubGVuZ3RoID4gY20ub3B0aW9ucy5t
			YXhIaWdobGlnaHRMZW5ndGggPyBjb3B5U3RhdGUoZG9jLm1vZGUsIGNvbnRleHQuc3RhdGUpIDog
			bnVsbDsNCiAgICAgICAgdmFyIGhpZ2hsaWdodGVkID0gaGlnaGxpZ2h0TGluZShjbSwgbGluZSwg
			Y29udGV4dCwgdHJ1ZSk7DQogICAgICAgIGlmIChyZXNldFN0YXRlKSB7IGNvbnRleHQuc3RhdGUg
			PSByZXNldFN0YXRlOyB9DQogICAgICAgIGxpbmUuc3R5bGVzID0gaGlnaGxpZ2h0ZWQuc3R5bGVz
			Ow0KICAgICAgICB2YXIgb2xkQ2xzID0gbGluZS5zdHlsZUNsYXNzZXMsIG5ld0NscyA9IGhpZ2hs
			aWdodGVkLmNsYXNzZXM7DQogICAgICAgIGlmIChuZXdDbHMpIHsgbGluZS5zdHlsZUNsYXNzZXMg
			PSBuZXdDbHM7IH0NCiAgICAgICAgZWxzZSBpZiAob2xkQ2xzKSB7IGxpbmUuc3R5bGVDbGFzc2Vz
			ID0gbnVsbDsgfQ0KICAgICAgICB2YXIgaXNjaGFuZ2UgPSAhb2xkU3R5bGVzIHx8IG9sZFN0eWxl
			cy5sZW5ndGggIT0gbGluZS5zdHlsZXMubGVuZ3RoIHx8DQogICAgICAgICAgb2xkQ2xzICE9IG5l
			d0NscyAmJiAoIW9sZENscyB8fCAhbmV3Q2xzIHx8IG9sZENscy5iZ0NsYXNzICE9IG5ld0Nscy5i
			Z0NsYXNzIHx8IG9sZENscy50ZXh0Q2xhc3MgIT0gbmV3Q2xzLnRleHRDbGFzcyk7DQogICAgICAg
			IGZvciAodmFyIGkgPSAwOyAhaXNjaGFuZ2UgJiYgaSA8IG9sZFN0eWxlcy5sZW5ndGg7ICsraSkg
			eyBpc2NoYW5nZSA9IG9sZFN0eWxlc1tpXSAhPSBsaW5lLnN0eWxlc1tpXTsgfQ0KICAgICAgICBp
			ZiAoaXNjaGFuZ2UpIHsgY2hhbmdlZExpbmVzLnB1c2goY29udGV4dC5saW5lKTsgfQ0KICAgICAg
			ICBsaW5lLnN0YXRlQWZ0ZXIgPSBjb250ZXh0LnNhdmUoKTsNCiAgICAgICAgY29udGV4dC5uZXh0
			TGluZSgpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKGxpbmUudGV4dC5sZW5ndGggPD0g
			Y20ub3B0aW9ucy5tYXhIaWdobGlnaHRMZW5ndGgpDQogICAgICAgICAgeyBwcm9jZXNzTGluZShj
			bSwgbGluZS50ZXh0LCBjb250ZXh0KTsgfQ0KICAgICAgICBsaW5lLnN0YXRlQWZ0ZXIgPSBjb250
			ZXh0LmxpbmUgJSA1ID09IDAgPyBjb250ZXh0LnNhdmUoKSA6IG51bGw7DQogICAgICAgIGNvbnRl
			eHQubmV4dExpbmUoKTsNCiAgICAgIH0NCiAgICAgIGlmICgrbmV3IERhdGUgPiBlbmQpIHsNCiAg
			ICAgICAgc3RhcnRXb3JrZXIoY20sIGNtLm9wdGlvbnMud29ya0RlbGF5KTsNCiAgICAgICAgcmV0
			dXJuIHRydWUNCiAgICAgIH0NCiAgICB9KTsNCiAgICBkb2MuaGlnaGxpZ2h0RnJvbnRpZXIgPSBj
			b250ZXh0LmxpbmU7DQogICAgZG9jLm1vZGVGcm9udGllciA9IE1hdGgubWF4KGRvYy5tb2RlRnJv
			bnRpZXIsIGNvbnRleHQubGluZSk7DQogICAgaWYgKGNoYW5nZWRMaW5lcy5sZW5ndGgpIHsgcnVu
			SW5PcChjbSwgZnVuY3Rpb24gKCkgew0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFuZ2Vk
			TGluZXMubGVuZ3RoOyBpKyspDQogICAgICAgIHsgcmVnTGluZUNoYW5nZShjbSwgY2hhbmdlZExp
			bmVzW2ldLCAidGV4dCIpOyB9DQogICAgfSk7IH0NCiAgfQ0KDQogIC8vIERJU1BMQVkgRFJBV0lO
			Rw0KDQogIHZhciBEaXNwbGF5VXBkYXRlID0gZnVuY3Rpb24oY20sIHZpZXdwb3J0LCBmb3JjZSkg
			ew0KICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheTsNCg0KICAgIHRoaXMudmlld3BvcnQgPSB2
			aWV3cG9ydDsNCiAgICAvLyBTdG9yZSBzb21lIHZhbHVlcyB0aGF0IHdlJ2xsIG5lZWQgbGF0ZXIg
			KGJ1dCBkb24ndCB3YW50IHRvIGZvcmNlIGEgcmVsYXlvdXQgZm9yKQ0KICAgIHRoaXMudmlzaWJs
			ZSA9IHZpc2libGVMaW5lcyhkaXNwbGF5LCBjbS5kb2MsIHZpZXdwb3J0KTsNCiAgICB0aGlzLmVk
			aXRvcklzSGlkZGVuID0gIWRpc3BsYXkud3JhcHBlci5vZmZzZXRXaWR0aDsNCiAgICB0aGlzLndy
			YXBwZXJIZWlnaHQgPSBkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0Ow0KICAgIHRoaXMud3Jh
			cHBlcldpZHRoID0gZGlzcGxheS53cmFwcGVyLmNsaWVudFdpZHRoOw0KICAgIHRoaXMub2xkRGlz
			cGxheVdpZHRoID0gZGlzcGxheVdpZHRoKGNtKTsNCiAgICB0aGlzLmZvcmNlID0gZm9yY2U7DQog
			ICAgdGhpcy5kaW1zID0gZ2V0RGltZW5zaW9ucyhjbSk7DQogICAgdGhpcy5ldmVudHMgPSBbXTsN
			CiAgfTsNCg0KICBEaXNwbGF5VXBkYXRlLnByb3RvdHlwZS5zaWduYWwgPSBmdW5jdGlvbiAoZW1p
			dHRlciwgdHlwZSkgew0KICAgIGlmIChoYXNIYW5kbGVyKGVtaXR0ZXIsIHR5cGUpKQ0KICAgICAg
			eyB0aGlzLmV2ZW50cy5wdXNoKGFyZ3VtZW50cyk7IH0NCiAgfTsNCiAgRGlzcGxheVVwZGF0ZS5w
			cm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7
			DQoNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZXZlbnRzLmxlbmd0aDsgaSsrKQ0KICAg
			ICAgeyBzaWduYWwuYXBwbHkobnVsbCwgdGhpcyQxLmV2ZW50c1tpXSk7IH0NCiAgfTsNCg0KICBm
			dW5jdGlvbiBtYXliZUNsaXBTY3JvbGxiYXJzKGNtKSB7DQogICAgdmFyIGRpc3BsYXkgPSBjbS5k
			aXNwbGF5Ow0KICAgIGlmICghZGlzcGxheS5zY3JvbGxiYXJzQ2xpcHBlZCAmJiBkaXNwbGF5LnNj
			cm9sbGVyLm9mZnNldFdpZHRoKSB7DQogICAgICBkaXNwbGF5Lm5hdGl2ZUJhcldpZHRoID0gZGlz
			cGxheS5zY3JvbGxlci5vZmZzZXRXaWR0aCAtIGRpc3BsYXkuc2Nyb2xsZXIuY2xpZW50V2lkdGg7
			DQogICAgICBkaXNwbGF5LmhlaWdodEZvcmNlci5zdHlsZS5oZWlnaHQgPSBzY3JvbGxHYXAoY20p
			ICsgInB4IjsNCiAgICAgIGRpc3BsYXkuc2l6ZXIuc3R5bGUubWFyZ2luQm90dG9tID0gLWRpc3Bs
			YXkubmF0aXZlQmFyV2lkdGggKyAicHgiOw0KICAgICAgZGlzcGxheS5zaXplci5zdHlsZS5ib3Jk
			ZXJSaWdodFdpZHRoID0gc2Nyb2xsR2FwKGNtKSArICJweCI7DQogICAgICBkaXNwbGF5LnNjcm9s
			bGJhcnNDbGlwcGVkID0gdHJ1ZTsNCiAgICB9DQogIH0NCg0KICBmdW5jdGlvbiBzZWxlY3Rpb25T
			bmFwc2hvdChjbSkgew0KICAgIGlmIChjbS5oYXNGb2N1cygpKSB7IHJldHVybiBudWxsIH0NCiAg
			ICB2YXIgYWN0aXZlID0gYWN0aXZlRWx0KCk7DQogICAgaWYgKCFhY3RpdmUgfHwgIWNvbnRhaW5z
			KGNtLmRpc3BsYXkubGluZURpdiwgYWN0aXZlKSkgeyByZXR1cm4gbnVsbCB9DQogICAgdmFyIHJl
			c3VsdCA9IHthY3RpdmVFbHQ6IGFjdGl2ZX07DQogICAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24p
			IHsNCiAgICAgIHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7DQogICAgICBpZiAoc2Vs
			LmFuY2hvck5vZGUgJiYgc2VsLmV4dGVuZCAmJiBjb250YWlucyhjbS5kaXNwbGF5LmxpbmVEaXYs
			IHNlbC5hbmNob3JOb2RlKSkgew0KICAgICAgICByZXN1bHQuYW5jaG9yTm9kZSA9IHNlbC5hbmNo
			b3JOb2RlOw0KICAgICAgICByZXN1bHQuYW5jaG9yT2Zmc2V0ID0gc2VsLmFuY2hvck9mZnNldDsN
			CiAgICAgICAgcmVzdWx0LmZvY3VzTm9kZSA9IHNlbC5mb2N1c05vZGU7DQogICAgICAgIHJlc3Vs
			dC5mb2N1c09mZnNldCA9IHNlbC5mb2N1c09mZnNldDsNCiAgICAgIH0NCiAgICB9DQogICAgcmV0
			dXJuIHJlc3VsdA0KICB9DQoNCiAgZnVuY3Rpb24gcmVzdG9yZVNlbGVjdGlvbihzbmFwc2hvdCkg
			ew0KICAgIGlmICghc25hcHNob3QgfHwgIXNuYXBzaG90LmFjdGl2ZUVsdCB8fCBzbmFwc2hvdC5h
			Y3RpdmVFbHQgPT0gYWN0aXZlRWx0KCkpIHsgcmV0dXJuIH0NCiAgICBzbmFwc2hvdC5hY3RpdmVF
			bHQuZm9jdXMoKTsNCiAgICBpZiAoc25hcHNob3QuYW5jaG9yTm9kZSAmJiBjb250YWlucyhkb2N1
			bWVudC5ib2R5LCBzbmFwc2hvdC5hbmNob3JOb2RlKSAmJiBjb250YWlucyhkb2N1bWVudC5ib2R5
			LCBzbmFwc2hvdC5mb2N1c05vZGUpKSB7DQogICAgICB2YXIgc2VsID0gd2luZG93LmdldFNlbGVj
			dGlvbigpLCByYW5nZSQkMSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7DQogICAgICByYW5nZSQk
			MS5zZXRFbmQoc25hcHNob3QuYW5jaG9yTm9kZSwgc25hcHNob3QuYW5jaG9yT2Zmc2V0KTsNCiAg
			ICAgIHJhbmdlJCQxLmNvbGxhcHNlKGZhbHNlKTsNCiAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMo
			KTsNCiAgICAgIHNlbC5hZGRSYW5nZShyYW5nZSQkMSk7DQogICAgICBzZWwuZXh0ZW5kKHNuYXBz
			aG90LmZvY3VzTm9kZSwgc25hcHNob3QuZm9jdXNPZmZzZXQpOw0KICAgIH0NCiAgfQ0KDQogIC8v
			IERvZXMgdGhlIGFjdHVhbCB1cGRhdGluZyBvZiB0aGUgbGluZSBkaXNwbGF5LiBCYWlscyBvdXQN
			CiAgLy8gKHJldHVybmluZyBmYWxzZSkgd2hlbiB0aGVyZSBpcyBub3RoaW5nIHRvIGJlIGRvbmUg
			YW5kIGZvcmNlZCBpcw0KICAvLyBmYWxzZS4NCiAgZnVuY3Rpb24gdXBkYXRlRGlzcGxheUlmTmVl
			ZGVkKGNtLCB1cGRhdGUpIHsNCiAgICB2YXIgZGlzcGxheSA9IGNtLmRpc3BsYXksIGRvYyA9IGNt
			LmRvYzsNCg0KICAgIGlmICh1cGRhdGUuZWRpdG9ySXNIaWRkZW4pIHsNCiAgICAgIHJlc2V0Vmll
			dyhjbSk7DQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQoNCiAgICAvLyBCYWlsIG91dCBpZiB0
			aGUgdmlzaWJsZSBhcmVhIGlzIGFscmVhZHkgcmVuZGVyZWQgYW5kIG5vdGhpbmcgY2hhbmdlZC4N
			CiAgICBpZiAoIXVwZGF0ZS5mb3JjZSAmJg0KICAgICAgICB1cGRhdGUudmlzaWJsZS5mcm9tID49
			IGRpc3BsYXkudmlld0Zyb20gJiYgdXBkYXRlLnZpc2libGUudG8gPD0gZGlzcGxheS52aWV3VG8g
			JiYNCiAgICAgICAgKGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMgPT0gbnVsbCB8fCBkaXNwbGF5
			LnVwZGF0ZUxpbmVOdW1iZXJzID49IGRpc3BsYXkudmlld1RvKSAmJg0KICAgICAgICBkaXNwbGF5
			LnJlbmRlcmVkVmlldyA9PSBkaXNwbGF5LnZpZXcgJiYgY291bnREaXJ0eVZpZXcoY20pID09IDAp
			DQogICAgICB7IHJldHVybiBmYWxzZSB9DQoNCiAgICBpZiAobWF5YmVVcGRhdGVMaW5lTnVtYmVy
			V2lkdGgoY20pKSB7DQogICAgICByZXNldFZpZXcoY20pOw0KICAgICAgdXBkYXRlLmRpbXMgPSBn
			ZXREaW1lbnNpb25zKGNtKTsNCiAgICB9DQoNCiAgICAvLyBDb21wdXRlIGEgc3VpdGFibGUgbmV3
			IHZpZXdwb3J0IChmcm9tICYgdG8pDQogICAgdmFyIGVuZCA9IGRvYy5maXJzdCArIGRvYy5zaXpl
			Ow0KICAgIHZhciBmcm9tID0gTWF0aC5tYXgodXBkYXRlLnZpc2libGUuZnJvbSAtIGNtLm9wdGlv
			bnMudmlld3BvcnRNYXJnaW4sIGRvYy5maXJzdCk7DQogICAgdmFyIHRvID0gTWF0aC5taW4oZW5k
			LCB1cGRhdGUudmlzaWJsZS50byArIGNtLm9wdGlvbnMudmlld3BvcnRNYXJnaW4pOw0KICAgIGlm
			IChkaXNwbGF5LnZpZXdGcm9tIDwgZnJvbSAmJiBmcm9tIC0gZGlzcGxheS52aWV3RnJvbSA8IDIw
			KSB7IGZyb20gPSBNYXRoLm1heChkb2MuZmlyc3QsIGRpc3BsYXkudmlld0Zyb20pOyB9DQogICAg
			aWYgKGRpc3BsYXkudmlld1RvID4gdG8gJiYgZGlzcGxheS52aWV3VG8gLSB0byA8IDIwKSB7IHRv
			ID0gTWF0aC5taW4oZW5kLCBkaXNwbGF5LnZpZXdUbyk7IH0NCiAgICBpZiAoc2F3Q29sbGFwc2Vk
			U3BhbnMpIHsNCiAgICAgIGZyb20gPSB2aXN1YWxMaW5lTm8oY20uZG9jLCBmcm9tKTsNCiAgICAg
			IHRvID0gdmlzdWFsTGluZUVuZE5vKGNtLmRvYywgdG8pOw0KICAgIH0NCg0KICAgIHZhciBkaWZm
			ZXJlbnQgPSBmcm9tICE9IGRpc3BsYXkudmlld0Zyb20gfHwgdG8gIT0gZGlzcGxheS52aWV3VG8g
			fHwNCiAgICAgIGRpc3BsYXkubGFzdFdyYXBIZWlnaHQgIT0gdXBkYXRlLndyYXBwZXJIZWlnaHQg
			fHwgZGlzcGxheS5sYXN0V3JhcFdpZHRoICE9IHVwZGF0ZS53cmFwcGVyV2lkdGg7DQogICAgYWRq
			dXN0VmlldyhjbSwgZnJvbSwgdG8pOw0KDQogICAgZGlzcGxheS52aWV3T2Zmc2V0ID0gaGVpZ2h0
			QXRMaW5lKGdldExpbmUoY20uZG9jLCBkaXNwbGF5LnZpZXdGcm9tKSk7DQogICAgLy8gUG9zaXRp
			b24gdGhlIG1vdmVyIGRpdiB0byBhbGlnbiB3aXRoIHRoZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlv
			bg0KICAgIGNtLmRpc3BsYXkubW92ZXIuc3R5bGUudG9wID0gZGlzcGxheS52aWV3T2Zmc2V0ICsg
			InB4IjsNCg0KICAgIHZhciB0b1VwZGF0ZSA9IGNvdW50RGlydHlWaWV3KGNtKTsNCiAgICBpZiAo
			IWRpZmZlcmVudCAmJiB0b1VwZGF0ZSA9PSAwICYmICF1cGRhdGUuZm9yY2UgJiYgZGlzcGxheS5y
			ZW5kZXJlZFZpZXcgPT0gZGlzcGxheS52aWV3ICYmDQogICAgICAgIChkaXNwbGF5LnVwZGF0ZUxp
			bmVOdW1iZXJzID09IG51bGwgfHwgZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA+PSBkaXNwbGF5
			LnZpZXdUbykpDQogICAgICB7IHJldHVybiBmYWxzZSB9DQoNCiAgICAvLyBGb3IgYmlnIGNoYW5n
			ZXMsIHdlIGhpZGUgdGhlIGVuY2xvc2luZyBlbGVtZW50IGR1cmluZyB0aGUNCiAgICAvLyB1cGRh
			dGUsIHNpbmNlIHRoYXQgc3BlZWRzIHVwIHRoZSBvcGVyYXRpb25zIG9uIG1vc3QgYnJvd3NlcnMu
			DQogICAgdmFyIHNlbFNuYXBzaG90ID0gc2VsZWN0aW9uU25hcHNob3QoY20pOw0KICAgIGlmICh0
			b1VwZGF0ZSA+IDQpIHsgZGlzcGxheS5saW5lRGl2LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7IH0N
			CiAgICBwYXRjaERpc3BsYXkoY20sIGRpc3BsYXkudXBkYXRlTGluZU51bWJlcnMsIHVwZGF0ZS5k
			aW1zKTsNCiAgICBpZiAodG9VcGRhdGUgPiA0KSB7IGRpc3BsYXkubGluZURpdi5zdHlsZS5kaXNw
			bGF5ID0gIiI7IH0NCiAgICBkaXNwbGF5LnJlbmRlcmVkVmlldyA9IGRpc3BsYXkudmlldzsNCiAg
			ICAvLyBUaGVyZSBtaWdodCBoYXZlIGJlZW4gYSB3aWRnZXQgd2l0aCBhIGZvY3VzZWQgZWxlbWVu
			dCB0aGF0IGdvdA0KICAgIC8vIGhpZGRlbiBvciB1cGRhdGVkLCBpZiBzbyByZS1mb2N1cyBpdC4N
			CiAgICByZXN0b3JlU2VsZWN0aW9uKHNlbFNuYXBzaG90KTsNCg0KICAgIC8vIFByZXZlbnQgc2Vs
			ZWN0aW9uIGFuZCBjdXJzb3JzIGZyb20gaW50ZXJmZXJpbmcgd2l0aCB0aGUgc2Nyb2xsDQogICAg
			Ly8gd2lkdGggYW5kIGhlaWdodC4NCiAgICByZW1vdmVDaGlsZHJlbihkaXNwbGF5LmN1cnNvckRp
			dik7DQogICAgcmVtb3ZlQ2hpbGRyZW4oZGlzcGxheS5zZWxlY3Rpb25EaXYpOw0KICAgIGRpc3Bs
			YXkuZ3V0dGVycy5zdHlsZS5oZWlnaHQgPSBkaXNwbGF5LnNpemVyLnN0eWxlLm1pbkhlaWdodCA9
			IDA7DQoNCiAgICBpZiAoZGlmZmVyZW50KSB7DQogICAgICBkaXNwbGF5Lmxhc3RXcmFwSGVpZ2h0
			ID0gdXBkYXRlLndyYXBwZXJIZWlnaHQ7DQogICAgICBkaXNwbGF5Lmxhc3RXcmFwV2lkdGggPSB1
			cGRhdGUud3JhcHBlcldpZHRoOw0KICAgICAgc3RhcnRXb3JrZXIoY20sIDQwMCk7DQogICAgfQ0K
			DQogICAgZGlzcGxheS51cGRhdGVMaW5lTnVtYmVycyA9IG51bGw7DQoNCiAgICByZXR1cm4gdHJ1
			ZQ0KICB9DQoNCiAgZnVuY3Rpb24gcG9zdFVwZGF0ZURpc3BsYXkoY20sIHVwZGF0ZSkgew0KICAg
			IHZhciB2aWV3cG9ydCA9IHVwZGF0ZS52aWV3cG9ydDsNCg0KICAgIGZvciAodmFyIGZpcnN0ID0g
			dHJ1ZTs7IGZpcnN0ID0gZmFsc2UpIHsNCiAgICAgIGlmICghZmlyc3QgfHwgIWNtLm9wdGlvbnMu
			bGluZVdyYXBwaW5nIHx8IHVwZGF0ZS5vbGREaXNwbGF5V2lkdGggPT0gZGlzcGxheVdpZHRoKGNt
			KSkgew0KICAgICAgICAvLyBDbGlwIGZvcmNlZCB2aWV3cG9ydCB0byBhY3R1YWwgc2Nyb2xsYWJs
			ZSBhcmVhLg0KICAgICAgICBpZiAodmlld3BvcnQgJiYgdmlld3BvcnQudG9wICE9IG51bGwpDQog
			ICAgICAgICAgeyB2aWV3cG9ydCA9IHt0b3A6IE1hdGgubWluKGNtLmRvYy5oZWlnaHQgKyBwYWRk
			aW5nVmVydChjbS5kaXNwbGF5KSAtIGRpc3BsYXlIZWlnaHQoY20pLCB2aWV3cG9ydC50b3ApfTsg
			fQ0KICAgICAgICAvLyBVcGRhdGVkIGxpbmUgaGVpZ2h0cyBtaWdodCByZXN1bHQgaW4gdGhlIGRy
			YXduIGFyZWEgbm90DQogICAgICAgIC8vIGFjdHVhbGx5IGNvdmVyaW5nIHRoZSB2aWV3cG9ydC4g
			S2VlcCBsb29waW5nIHVudGlsIGl0IGRvZXMuDQogICAgICAgIHVwZGF0ZS52aXNpYmxlID0gdmlz
			aWJsZUxpbmVzKGNtLmRpc3BsYXksIGNtLmRvYywgdmlld3BvcnQpOw0KICAgICAgICBpZiAodXBk
			YXRlLnZpc2libGUuZnJvbSA+PSBjbS5kaXNwbGF5LnZpZXdGcm9tICYmIHVwZGF0ZS52aXNpYmxl
			LnRvIDw9IGNtLmRpc3BsYXkudmlld1RvKQ0KICAgICAgICAgIHsgYnJlYWsgfQ0KICAgICAgfSBl
			bHNlIGlmIChmaXJzdCkgew0KICAgICAgICB1cGRhdGUudmlzaWJsZSA9IHZpc2libGVMaW5lcyhj
			bS5kaXNwbGF5LCBjbS5kb2MsIHZpZXdwb3J0KTsNCiAgICAgIH0NCiAgICAgIGlmICghdXBkYXRl
			RGlzcGxheUlmTmVlZGVkKGNtLCB1cGRhdGUpKSB7IGJyZWFrIH0NCiAgICAgIHVwZGF0ZUhlaWdo
			dHNJblZpZXdwb3J0KGNtKTsNCiAgICAgIHZhciBiYXJNZWFzdXJlID0gbWVhc3VyZUZvclNjcm9s
			bGJhcnMoY20pOw0KICAgICAgdXBkYXRlU2VsZWN0aW9uKGNtKTsNCiAgICAgIHVwZGF0ZVNjcm9s
			bGJhcnMoY20sIGJhck1lYXN1cmUpOw0KICAgICAgc2V0RG9jdW1lbnRIZWlnaHQoY20sIGJhck1l
			YXN1cmUpOw0KICAgICAgdXBkYXRlLmZvcmNlID0gZmFsc2U7DQogICAgfQ0KDQogICAgdXBkYXRl
			LnNpZ25hbChjbSwgInVwZGF0ZSIsIGNtKTsNCiAgICBpZiAoY20uZGlzcGxheS52aWV3RnJvbSAh
			PSBjbS5kaXNwbGF5LnJlcG9ydGVkVmlld0Zyb20gfHwgY20uZGlzcGxheS52aWV3VG8gIT0gY20u
			ZGlzcGxheS5yZXBvcnRlZFZpZXdUbykgew0KICAgICAgdXBkYXRlLnNpZ25hbChjbSwgInZpZXdw
			b3J0Q2hhbmdlIiwgY20sIGNtLmRpc3BsYXkudmlld0Zyb20sIGNtLmRpc3BsYXkudmlld1RvKTsN
			CiAgICAgIGNtLmRpc3BsYXkucmVwb3J0ZWRWaWV3RnJvbSA9IGNtLmRpc3BsYXkudmlld0Zyb207
			IGNtLmRpc3BsYXkucmVwb3J0ZWRWaWV3VG8gPSBjbS5kaXNwbGF5LnZpZXdUbzsNCiAgICB9DQog
			IH0NCg0KICBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5U2ltcGxlKGNtLCB2aWV3cG9ydCkgew0KICAg
			IHZhciB1cGRhdGUgPSBuZXcgRGlzcGxheVVwZGF0ZShjbSwgdmlld3BvcnQpOw0KICAgIGlmICh1
			cGRhdGVEaXNwbGF5SWZOZWVkZWQoY20sIHVwZGF0ZSkpIHsNCiAgICAgIHVwZGF0ZUhlaWdodHNJ
			blZpZXdwb3J0KGNtKTsNCiAgICAgIHBvc3RVcGRhdGVEaXNwbGF5KGNtLCB1cGRhdGUpOw0KICAg
			ICAgdmFyIGJhck1lYXN1cmUgPSBtZWFzdXJlRm9yU2Nyb2xsYmFycyhjbSk7DQogICAgICB1cGRh
			dGVTZWxlY3Rpb24oY20pOw0KICAgICAgdXBkYXRlU2Nyb2xsYmFycyhjbSwgYmFyTWVhc3VyZSk7
			DQogICAgICBzZXREb2N1bWVudEhlaWdodChjbSwgYmFyTWVhc3VyZSk7DQogICAgICB1cGRhdGUu
			ZmluaXNoKCk7DQogICAgfQ0KICB9DQoNCiAgLy8gU3luYyB0aGUgYWN0dWFsIGRpc3BsYXkgRE9N
			IHN0cnVjdHVyZSB3aXRoIGRpc3BsYXkudmlldywgcmVtb3ZpbmcNCiAgLy8gbm9kZXMgZm9yIGxp
			bmVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB2aWV3LCBhbmQgY3JlYXRpbmcgdGhlIG9uZXMNCiAg
			Ly8gdGhhdCBhcmUgbm90IHRoZXJlIHlldCwgYW5kIHVwZGF0aW5nIHRoZSBvbmVzIHRoYXQgYXJl
			IG91dCBvZg0KICAvLyBkYXRlLg0KICBmdW5jdGlvbiBwYXRjaERpc3BsYXkoY20sIHVwZGF0ZU51
			bWJlcnNGcm9tLCBkaW1zKSB7DQogICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBsaW5lTnVt
			YmVycyA9IGNtLm9wdGlvbnMubGluZU51bWJlcnM7DQogICAgdmFyIGNvbnRhaW5lciA9IGRpc3Bs
			YXkubGluZURpdiwgY3VyID0gY29udGFpbmVyLmZpcnN0Q2hpbGQ7DQoNCiAgICBmdW5jdGlvbiBy
			bShub2RlKSB7DQogICAgICB2YXIgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7DQogICAgICAvLyBX
			b3JrcyBhcm91bmQgYSB0aHJvdy1zY3JvbGwgYnVnIGluIE9TIFggV2Via2l0DQogICAgICBpZiAo
			d2Via2l0ICYmIG1hYyAmJiBjbS5kaXNwbGF5LmN1cnJlbnRXaGVlbFRhcmdldCA9PSBub2RlKQ0K
			ICAgICAgICB7IG5vZGUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsgfQ0KICAgICAgZWxzZQ0KICAg
			ICAgICB7IG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTsgfQ0KICAgICAgcmV0dXJu
			IG5leHQNCiAgICB9DQoNCiAgICB2YXIgdmlldyA9IGRpc3BsYXkudmlldywgbGluZU4gPSBkaXNw
			bGF5LnZpZXdGcm9tOw0KICAgIC8vIExvb3Agb3ZlciB0aGUgZWxlbWVudHMgaW4gdGhlIHZpZXcs
			IHN5bmNpbmcgY3VyICh0aGUgRE9NIG5vZGVzDQogICAgLy8gaW4gZGlzcGxheS5saW5lRGl2KSB3
			aXRoIHRoZSB2aWV3IGFzIHdlIGdvLg0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5n
			dGg7IGkrKykgew0KICAgICAgdmFyIGxpbmVWaWV3ID0gdmlld1tpXTsNCiAgICAgIGlmIChsaW5l
			Vmlldy5oaWRkZW4pIDsgZWxzZSBpZiAoIWxpbmVWaWV3Lm5vZGUgfHwgbGluZVZpZXcubm9kZS5w
			YXJlbnROb2RlICE9IGNvbnRhaW5lcikgeyAvLyBOb3QgZHJhd24geWV0DQogICAgICAgIHZhciBu
			b2RlID0gYnVpbGRMaW5lRWxlbWVudChjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTsNCiAgICAg
			ICAgY29udGFpbmVyLmluc2VydEJlZm9yZShub2RlLCBjdXIpOw0KICAgICAgfSBlbHNlIHsgLy8g
			QWxyZWFkeSBkcmF3bg0KICAgICAgICB3aGlsZSAoY3VyICE9IGxpbmVWaWV3Lm5vZGUpIHsgY3Vy
			ID0gcm0oY3VyKTsgfQ0KICAgICAgICB2YXIgdXBkYXRlTnVtYmVyID0gbGluZU51bWJlcnMgJiYg
			dXBkYXRlTnVtYmVyc0Zyb20gIT0gbnVsbCAmJg0KICAgICAgICAgIHVwZGF0ZU51bWJlcnNGcm9t
			IDw9IGxpbmVOICYmIGxpbmVWaWV3LmxpbmVOdW1iZXI7DQogICAgICAgIGlmIChsaW5lVmlldy5j
			aGFuZ2VzKSB7DQogICAgICAgICAgaWYgKGluZGV4T2YobGluZVZpZXcuY2hhbmdlcywgImd1dHRl
			ciIpID4gLTEpIHsgdXBkYXRlTnVtYmVyID0gZmFsc2U7IH0NCiAgICAgICAgICB1cGRhdGVMaW5l
			Rm9yQ2hhbmdlcyhjbSwgbGluZVZpZXcsIGxpbmVOLCBkaW1zKTsNCiAgICAgICAgfQ0KICAgICAg
			ICBpZiAodXBkYXRlTnVtYmVyKSB7DQogICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4obGluZVZpZXcu
			bGluZU51bWJlcik7DQogICAgICAgICAgbGluZVZpZXcubGluZU51bWJlci5hcHBlbmRDaGlsZChk
			b2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsaW5lTnVtYmVyRm9yKGNtLm9wdGlvbnMsIGxpbmVOKSkp
			Ow0KICAgICAgICB9DQogICAgICAgIGN1ciA9IGxpbmVWaWV3Lm5vZGUubmV4dFNpYmxpbmc7DQog
			ICAgICB9DQogICAgICBsaW5lTiArPSBsaW5lVmlldy5zaXplOw0KICAgIH0NCiAgICB3aGlsZSAo
			Y3VyKSB7IGN1ciA9IHJtKGN1cik7IH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHVwZGF0ZUd1dHRlclNw
			YWNlKGRpc3BsYXkpIHsNCiAgICB2YXIgd2lkdGggPSBkaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lk
			dGg7DQogICAgZGlzcGxheS5zaXplci5zdHlsZS5tYXJnaW5MZWZ0ID0gd2lkdGggKyAicHgiOw0K
			ICB9DQoNCiAgZnVuY3Rpb24gc2V0RG9jdW1lbnRIZWlnaHQoY20sIG1lYXN1cmUpIHsNCiAgICBj
			bS5kaXNwbGF5LnNpemVyLnN0eWxlLm1pbkhlaWdodCA9IG1lYXN1cmUuZG9jSGVpZ2h0ICsgInB4
			IjsNCiAgICBjbS5kaXNwbGF5LmhlaWdodEZvcmNlci5zdHlsZS50b3AgPSBtZWFzdXJlLmRvY0hl
			aWdodCArICJweCI7DQogICAgY20uZGlzcGxheS5ndXR0ZXJzLnN0eWxlLmhlaWdodCA9IChtZWFz
			dXJlLmRvY0hlaWdodCArIGNtLmRpc3BsYXkuYmFySGVpZ2h0ICsgc2Nyb2xsR2FwKGNtKSkgKyAi
			cHgiOw0KICB9DQoNCiAgLy8gUmUtYWxpZ24gbGluZSBudW1iZXJzIGFuZCBndXR0ZXIgbWFya3Mg
			dG8gY29tcGVuc2F0ZSBmb3INCiAgLy8gaG9yaXpvbnRhbCBzY3JvbGxpbmcuDQogIGZ1bmN0aW9u
			IGFsaWduSG9yaXpvbnRhbGx5KGNtKSB7DQogICAgdmFyIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCB2
			aWV3ID0gZGlzcGxheS52aWV3Ow0KICAgIGlmICghZGlzcGxheS5hbGlnbldpZGdldHMgJiYgKCFk
			aXNwbGF5Lmd1dHRlcnMuZmlyc3RDaGlsZCB8fCAhY20ub3B0aW9ucy5maXhlZEd1dHRlcikpIHsg
			cmV0dXJuIH0NCiAgICB2YXIgY29tcCA9IGNvbXBlbnNhdGVGb3JIU2Nyb2xsKGRpc3BsYXkpIC0g
			ZGlzcGxheS5zY3JvbGxlci5zY3JvbGxMZWZ0ICsgY20uZG9jLnNjcm9sbExlZnQ7DQogICAgdmFy
			IGd1dHRlclcgPSBkaXNwbGF5Lmd1dHRlcnMub2Zmc2V0V2lkdGgsIGxlZnQgPSBjb21wICsgInB4
			IjsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHsgaWYgKCF2aWV3
			W2ldLmhpZGRlbikgew0KICAgICAgaWYgKGNtLm9wdGlvbnMuZml4ZWRHdXR0ZXIpIHsNCiAgICAg
			ICAgaWYgKHZpZXdbaV0uZ3V0dGVyKQ0KICAgICAgICAgIHsgdmlld1tpXS5ndXR0ZXIuc3R5bGUu
			bGVmdCA9IGxlZnQ7IH0NCiAgICAgICAgaWYgKHZpZXdbaV0uZ3V0dGVyQmFja2dyb3VuZCkNCiAg
			ICAgICAgICB7IHZpZXdbaV0uZ3V0dGVyQmFja2dyb3VuZC5zdHlsZS5sZWZ0ID0gbGVmdDsgfQ0K
			ICAgICAgfQ0KICAgICAgdmFyIGFsaWduID0gdmlld1tpXS5hbGlnbmFibGU7DQogICAgICBpZiAo
			YWxpZ24pIHsgZm9yICh2YXIgaiA9IDA7IGogPCBhbGlnbi5sZW5ndGg7IGorKykNCiAgICAgICAg
			eyBhbGlnbltqXS5zdHlsZS5sZWZ0ID0gbGVmdDsgfSB9DQogICAgfSB9DQogICAgaWYgKGNtLm9w
			dGlvbnMuZml4ZWRHdXR0ZXIpDQogICAgICB7IGRpc3BsYXkuZ3V0dGVycy5zdHlsZS5sZWZ0ID0g
			KGNvbXAgKyBndXR0ZXJXKSArICJweCI7IH0NCiAgfQ0KDQogIC8vIFVzZWQgdG8gZW5zdXJlIHRo
			YXQgdGhlIGxpbmUgbnVtYmVyIGd1dHRlciBpcyBzdGlsbCB0aGUgcmlnaHQNCiAgLy8gc2l6ZSBm
			b3IgdGhlIGN1cnJlbnQgZG9jdW1lbnQgc2l6ZS4gUmV0dXJucyB0cnVlIHdoZW4gYW4gdXBkYXRl
			DQogIC8vIGlzIG5lZWRlZC4NCiAgZnVuY3Rpb24gbWF5YmVVcGRhdGVMaW5lTnVtYmVyV2lkdGgo
			Y20pIHsNCiAgICBpZiAoIWNtLm9wdGlvbnMubGluZU51bWJlcnMpIHsgcmV0dXJuIGZhbHNlIH0N
			CiAgICB2YXIgZG9jID0gY20uZG9jLCBsYXN0ID0gbGluZU51bWJlckZvcihjbS5vcHRpb25zLCBk
			b2MuZmlyc3QgKyBkb2Muc2l6ZSAtIDEpLCBkaXNwbGF5ID0gY20uZGlzcGxheTsNCiAgICBpZiAo
			bGFzdC5sZW5ndGggIT0gZGlzcGxheS5saW5lTnVtQ2hhcnMpIHsNCiAgICAgIHZhciB0ZXN0ID0g
			ZGlzcGxheS5tZWFzdXJlLmFwcGVuZENoaWxkKGVsdCgiZGl2IiwgW2VsdCgiZGl2IiwgbGFzdCld
			LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb2Rl
			TWlycm9yLWxpbmVudW1iZXIgQ29kZU1pcnJvci1ndXR0ZXItZWx0IikpOw0KICAgICAgdmFyIGlu
			bmVyVyA9IHRlc3QuZmlyc3RDaGlsZC5vZmZzZXRXaWR0aCwgcGFkZGluZyA9IHRlc3Qub2Zmc2V0
			V2lkdGggLSBpbm5lclc7DQogICAgICBkaXNwbGF5LmxpbmVHdXR0ZXIuc3R5bGUud2lkdGggPSAi
			IjsNCiAgICAgIGRpc3BsYXkubGluZU51bUlubmVyV2lkdGggPSBNYXRoLm1heChpbm5lclcsIGRp
			c3BsYXkubGluZUd1dHRlci5vZmZzZXRXaWR0aCAtIHBhZGRpbmcpICsgMTsNCiAgICAgIGRpc3Bs
			YXkubGluZU51bVdpZHRoID0gZGlzcGxheS5saW5lTnVtSW5uZXJXaWR0aCArIHBhZGRpbmc7DQog
			ICAgICBkaXNwbGF5LmxpbmVOdW1DaGFycyA9IGRpc3BsYXkubGluZU51bUlubmVyV2lkdGggPyBs
			YXN0Lmxlbmd0aCA6IC0xOw0KICAgICAgZGlzcGxheS5saW5lR3V0dGVyLnN0eWxlLndpZHRoID0g
			ZGlzcGxheS5saW5lTnVtV2lkdGggKyAicHgiOw0KICAgICAgdXBkYXRlR3V0dGVyU3BhY2UoY20u
			ZGlzcGxheSk7DQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIH0NCiAgICByZXR1cm4gZmFsc2UNCiAg
			fQ0KDQogIGZ1bmN0aW9uIGdldEd1dHRlcnMoZ3V0dGVycywgbGluZU51bWJlcnMpIHsNCiAgICB2
			YXIgcmVzdWx0ID0gW10sIHNhd0xpbmVOdW1iZXJzID0gZmFsc2U7DQogICAgZm9yICh2YXIgaSA9
			IDA7IGkgPCBndXR0ZXJzLmxlbmd0aDsgaSsrKSB7DQogICAgICB2YXIgbmFtZSA9IGd1dHRlcnNb
			aV0sIHN0eWxlID0gbnVsbDsNCiAgICAgIGlmICh0eXBlb2YgbmFtZSAhPSAic3RyaW5nIikgeyBz
			dHlsZSA9IG5hbWUuc3R5bGU7IG5hbWUgPSBuYW1lLmNsYXNzTmFtZTsgfQ0KICAgICAgaWYgKG5h
			bWUgPT0gIkNvZGVNaXJyb3ItbGluZW51bWJlcnMiKSB7DQogICAgICAgIGlmICghbGluZU51bWJl
			cnMpIHsgY29udGludWUgfQ0KICAgICAgICBlbHNlIHsgc2F3TGluZU51bWJlcnMgPSB0cnVlOyB9
			DQogICAgICB9DQogICAgICByZXN1bHQucHVzaCh7Y2xhc3NOYW1lOiBuYW1lLCBzdHlsZTogc3R5
			bGV9KTsNCiAgICB9DQogICAgaWYgKGxpbmVOdW1iZXJzICYmICFzYXdMaW5lTnVtYmVycykgeyBy
			ZXN1bHQucHVzaCh7Y2xhc3NOYW1lOiAiQ29kZU1pcnJvci1saW5lbnVtYmVycyIsIHN0eWxlOiBu
			dWxsfSk7IH0NCiAgICByZXR1cm4gcmVzdWx0DQogIH0NCg0KICAvLyBSZWJ1aWxkIHRoZSBndXR0
			ZXIgZWxlbWVudHMsIGVuc3VyZSB0aGUgbWFyZ2luIHRvIHRoZSBsZWZ0IG9mIHRoZQ0KICAvLyBj
			b2RlIG1hdGNoZXMgdGhlaXIgd2lkdGguDQogIGZ1bmN0aW9uIHJlbmRlckd1dHRlcnMoZGlzcGxh
			eSkgew0KICAgIHZhciBndXR0ZXJzID0gZGlzcGxheS5ndXR0ZXJzLCBzcGVjcyA9IGRpc3BsYXku
			Z3V0dGVyU3BlY3M7DQogICAgcmVtb3ZlQ2hpbGRyZW4oZ3V0dGVycyk7DQogICAgZGlzcGxheS5s
			aW5lR3V0dGVyID0gbnVsbDsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNwZWNzLmxlbmd0aDsg
			KytpKSB7DQogICAgICB2YXIgcmVmID0gc3BlY3NbaV07DQogICAgICB2YXIgY2xhc3NOYW1lID0g
			cmVmLmNsYXNzTmFtZTsNCiAgICAgIHZhciBzdHlsZSA9IHJlZi5zdHlsZTsNCiAgICAgIHZhciBn
			RWx0ID0gZ3V0dGVycy5hcHBlbmRDaGlsZChlbHQoImRpdiIsIG51bGwsICJDb2RlTWlycm9yLWd1
			dHRlciAiICsgY2xhc3NOYW1lKSk7DQogICAgICBpZiAoc3R5bGUpIHsgZ0VsdC5zdHlsZS5jc3NU
			ZXh0ID0gc3R5bGU7IH0NCiAgICAgIGlmIChjbGFzc05hbWUgPT0gIkNvZGVNaXJyb3ItbGluZW51
			bWJlcnMiKSB7DQogICAgICAgIGRpc3BsYXkubGluZUd1dHRlciA9IGdFbHQ7DQogICAgICAgIGdF
			bHQuc3R5bGUud2lkdGggPSAoZGlzcGxheS5saW5lTnVtV2lkdGggfHwgMSkgKyAicHgiOw0KICAg
			ICAgfQ0KICAgIH0NCiAgICBndXR0ZXJzLnN0eWxlLmRpc3BsYXkgPSBzcGVjcy5sZW5ndGggPyAi
			IiA6ICJub25lIjsNCiAgICB1cGRhdGVHdXR0ZXJTcGFjZShkaXNwbGF5KTsNCiAgfQ0KDQogIGZ1
			bmN0aW9uIHVwZGF0ZUd1dHRlcnMoY20pIHsNCiAgICByZW5kZXJHdXR0ZXJzKGNtLmRpc3BsYXkp
			Ow0KICAgIHJlZ0NoYW5nZShjbSk7DQogICAgYWxpZ25Ib3Jpem9udGFsbHkoY20pOw0KICB9DQoN
			CiAgLy8gVGhlIGRpc3BsYXkgaGFuZGxlcyB0aGUgRE9NIGludGVncmF0aW9uLCBib3RoIGZvciBp
			bnB1dCByZWFkaW5nDQogIC8vIGFuZCBjb250ZW50IGRyYXdpbmcuIEl0IGhvbGRzIHJlZmVyZW5j
			ZXMgdG8gRE9NIG5vZGVzIGFuZA0KICAvLyBkaXNwbGF5LXJlbGF0ZWQgc3RhdGUuDQoNCiAgZnVu
			Y3Rpb24gRGlzcGxheShwbGFjZSwgZG9jLCBpbnB1dCwgb3B0aW9ucykgew0KICAgIHZhciBkID0g
			dGhpczsNCiAgICB0aGlzLmlucHV0ID0gaW5wdXQ7DQoNCiAgICAvLyBDb3ZlcnMgYm90dG9tLXJp
			Z2h0IHNxdWFyZSB3aGVuIGJvdGggc2Nyb2xsYmFycyBhcmUgcHJlc2VudC4NCiAgICBkLnNjcm9s
			bGJhckZpbGxlciA9IGVsdCgiZGl2IiwgbnVsbCwgIkNvZGVNaXJyb3Itc2Nyb2xsYmFyLWZpbGxl
			ciIpOw0KICAgIGQuc2Nyb2xsYmFyRmlsbGVyLnNldEF0dHJpYnV0ZSgiY20tbm90LWNvbnRlbnQi
			LCAidHJ1ZSIpOw0KICAgIC8vIENvdmVycyBib3R0b20gb2YgZ3V0dGVyIHdoZW4gY292ZXJHdXR0
			ZXJOZXh0VG9TY3JvbGxiYXIgaXMgb24NCiAgICAvLyBhbmQgaCBzY3JvbGxiYXIgaXMgcHJlc2Vu
			dC4NCiAgICBkLmd1dHRlckZpbGxlciA9IGVsdCgiZGl2IiwgbnVsbCwgIkNvZGVNaXJyb3ItZ3V0
			dGVyLWZpbGxlciIpOw0KICAgIGQuZ3V0dGVyRmlsbGVyLnNldEF0dHJpYnV0ZSgiY20tbm90LWNv
			bnRlbnQiLCAidHJ1ZSIpOw0KICAgIC8vIFdpbGwgY29udGFpbiB0aGUgYWN0dWFsIGNvZGUsIHBv
			c2l0aW9uZWQgdG8gY292ZXIgdGhlIHZpZXdwb3J0Lg0KICAgIGQubGluZURpdiA9IGVsdFAoImRp
			diIsIG51bGwsICJDb2RlTWlycm9yLWNvZGUiKTsNCiAgICAvLyBFbGVtZW50cyBhcmUgYWRkZWQg
			dG8gdGhlc2UgdG8gcmVwcmVzZW50IHNlbGVjdGlvbiBhbmQgY3Vyc29ycy4NCiAgICBkLnNlbGVj
			dGlvbkRpdiA9IGVsdCgiZGl2IiwgbnVsbCwgbnVsbCwgInBvc2l0aW9uOiByZWxhdGl2ZTsgei1p
			bmRleDogMSIpOw0KICAgIGQuY3Vyc29yRGl2ID0gZWx0KCJkaXYiLCBudWxsLCAiQ29kZU1pcnJv
			ci1jdXJzb3JzIik7DQogICAgLy8gQSB2aXNpYmlsaXR5OiBoaWRkZW4gZWxlbWVudCB1c2VkIHRv
			IGZpbmQgdGhlIHNpemUgb2YgdGhpbmdzLg0KICAgIGQubWVhc3VyZSA9IGVsdCgiZGl2IiwgbnVs
			bCwgIkNvZGVNaXJyb3ItbWVhc3VyZSIpOw0KICAgIC8vIFdoZW4gbGluZXMgb3V0c2lkZSBvZiB0
			aGUgdmlld3BvcnQgYXJlIG1lYXN1cmVkLCB0aGV5IGFyZSBkcmF3biBpbiB0aGlzLg0KICAgIGQu
			bGluZU1lYXN1cmUgPSBlbHQoImRpdiIsIG51bGwsICJDb2RlTWlycm9yLW1lYXN1cmUiKTsNCiAg
			ICAvLyBXcmFwcyBldmVyeXRoaW5nIHRoYXQgbmVlZHMgdG8gZXhpc3QgaW5zaWRlIHRoZSB2ZXJ0
			aWNhbGx5LXBhZGRlZCBjb29yZGluYXRlIHN5c3RlbQ0KICAgIGQubGluZVNwYWNlID0gZWx0UCgi
			ZGl2IiwgW2QubWVhc3VyZSwgZC5saW5lTWVhc3VyZSwgZC5zZWxlY3Rpb25EaXYsIGQuY3Vyc29y
			RGl2LCBkLmxpbmVEaXZdLA0KICAgICAgICAgICAgICAgICAgICAgIG51bGwsICJwb3NpdGlvbjog
			cmVsYXRpdmU7IG91dGxpbmU6IG5vbmUiKTsNCiAgICB2YXIgbGluZXMgPSBlbHRQKCJkaXYiLCBb
			ZC5saW5lU3BhY2VdLCAiQ29kZU1pcnJvci1saW5lcyIpOw0KICAgIC8vIE1vdmVkIGFyb3VuZCBp
			dHMgcGFyZW50IHRvIGNvdmVyIHZpc2libGUgdmlldy4NCiAgICBkLm1vdmVyID0gZWx0KCJkaXYi
			LCBbbGluZXNdLCBudWxsLCAicG9zaXRpb246IHJlbGF0aXZlIik7DQogICAgLy8gU2V0IHRvIHRo
			ZSBoZWlnaHQgb2YgdGhlIGRvY3VtZW50LCBhbGxvd2luZyBzY3JvbGxpbmcuDQogICAgZC5zaXpl
			ciA9IGVsdCgiZGl2IiwgW2QubW92ZXJdLCAiQ29kZU1pcnJvci1zaXplciIpOw0KICAgIGQuc2l6
			ZXJXaWR0aCA9IG51bGw7DQogICAgLy8gQmVoYXZpb3Igb2YgZWx0cyB3aXRoIG92ZXJmbG93OiBh
			dXRvIGFuZCBwYWRkaW5nIGlzDQogICAgLy8gaW5jb25zaXN0ZW50IGFjcm9zcyBicm93c2Vycy4g
			VGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGUNCiAgICAvLyBzY3JvbGxhYmxlIGFyZWEgaXMgYmln
			IGVub3VnaC4NCiAgICBkLmhlaWdodEZvcmNlciA9IGVsdCgiZGl2IiwgbnVsbCwgbnVsbCwgInBv
			c2l0aW9uOiBhYnNvbHV0ZTsgaGVpZ2h0OiAiICsgc2Nyb2xsZXJHYXAgKyAicHg7IHdpZHRoOiAx
			cHg7Iik7DQogICAgLy8gV2lsbCBjb250YWluIHRoZSBndXR0ZXJzLCBpZiBhbnkuDQogICAgZC5n
			dXR0ZXJzID0gZWx0KCJkaXYiLCBudWxsLCAiQ29kZU1pcnJvci1ndXR0ZXJzIik7DQogICAgZC5s
			aW5lR3V0dGVyID0gbnVsbDsNCiAgICAvLyBBY3R1YWwgc2Nyb2xsYWJsZSBlbGVtZW50Lg0KICAg
			IGQuc2Nyb2xsZXIgPSBlbHQoImRpdiIsIFtkLnNpemVyLCBkLmhlaWdodEZvcmNlciwgZC5ndXR0
			ZXJzXSwgIkNvZGVNaXJyb3Itc2Nyb2xsIik7DQogICAgZC5zY3JvbGxlci5zZXRBdHRyaWJ1dGUo
			InRhYkluZGV4IiwgIi0xIik7DQogICAgLy8gVGhlIGVsZW1lbnQgaW4gd2hpY2ggdGhlIGVkaXRv
			ciBsaXZlcy4NCiAgICBkLndyYXBwZXIgPSBlbHQoImRpdiIsIFtkLnNjcm9sbGJhckZpbGxlciwg
			ZC5ndXR0ZXJGaWxsZXIsIGQuc2Nyb2xsZXJdLCAiQ29kZU1pcnJvciIpOw0KDQogICAgLy8gV29y
			ayBhcm91bmQgSUU3IHotaW5kZXggYnVnIChub3QgcGVyZmVjdCwgaGVuY2UgSUU3IG5vdCByZWFs
			bHkgYmVpbmcgc3VwcG9ydGVkKQ0KICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgOCkgeyBkLmd1
			dHRlcnMuc3R5bGUuekluZGV4ID0gLTE7IGQuc2Nyb2xsZXIuc3R5bGUucGFkZGluZ1JpZ2h0ID0g
			MDsgfQ0KICAgIGlmICghd2Via2l0ICYmICEoZ2Vja28gJiYgbW9iaWxlKSkgeyBkLnNjcm9sbGVy
			LmRyYWdnYWJsZSA9IHRydWU7IH0NCg0KICAgIGlmIChwbGFjZSkgew0KICAgICAgaWYgKHBsYWNl
			LmFwcGVuZENoaWxkKSB7IHBsYWNlLmFwcGVuZENoaWxkKGQud3JhcHBlcik7IH0NCiAgICAgIGVs
			c2UgeyBwbGFjZShkLndyYXBwZXIpOyB9DQogICAgfQ0KDQogICAgLy8gQ3VycmVudCByZW5kZXJl
			ZCByYW5nZSAobWF5IGJlIGJpZ2dlciB0aGFuIHRoZSB2aWV3IHdpbmRvdykuDQogICAgZC52aWV3
			RnJvbSA9IGQudmlld1RvID0gZG9jLmZpcnN0Ow0KICAgIGQucmVwb3J0ZWRWaWV3RnJvbSA9IGQu
			cmVwb3J0ZWRWaWV3VG8gPSBkb2MuZmlyc3Q7DQogICAgLy8gSW5mb3JtYXRpb24gYWJvdXQgdGhl
			IHJlbmRlcmVkIGxpbmVzLg0KICAgIGQudmlldyA9IFtdOw0KICAgIGQucmVuZGVyZWRWaWV3ID0g
			bnVsbDsNCiAgICAvLyBIb2xkcyBpbmZvIGFib3V0IGEgc2luZ2xlIHJlbmRlcmVkIGxpbmUgd2hl
			biBpdCB3YXMgcmVuZGVyZWQNCiAgICAvLyBmb3IgbWVhc3VyZW1lbnQsIHdoaWxlIG5vdCBpbiB2
			aWV3Lg0KICAgIGQuZXh0ZXJuYWxNZWFzdXJlZCA9IG51bGw7DQogICAgLy8gRW1wdHkgc3BhY2Ug
			KGluIHBpeGVscykgYWJvdmUgdGhlIHZpZXcNCiAgICBkLnZpZXdPZmZzZXQgPSAwOw0KICAgIGQu
			bGFzdFdyYXBIZWlnaHQgPSBkLmxhc3RXcmFwV2lkdGggPSAwOw0KICAgIGQudXBkYXRlTGluZU51
			bWJlcnMgPSBudWxsOw0KDQogICAgZC5uYXRpdmVCYXJXaWR0aCA9IGQuYmFySGVpZ2h0ID0gZC5i
			YXJXaWR0aCA9IDA7DQogICAgZC5zY3JvbGxiYXJzQ2xpcHBlZCA9IGZhbHNlOw0KDQogICAgLy8g
			VXNlZCB0byBvbmx5IHJlc2l6ZSB0aGUgbGluZSBudW1iZXIgZ3V0dGVyIHdoZW4gbmVjZXNzYXJ5
			ICh3aGVuDQogICAgLy8gdGhlIGFtb3VudCBvZiBsaW5lcyBjcm9zc2VzIGEgYm91bmRhcnkgdGhh
			dCBtYWtlcyBpdHMgd2lkdGggY2hhbmdlKQ0KICAgIGQubGluZU51bVdpZHRoID0gZC5saW5lTnVt
			SW5uZXJXaWR0aCA9IGQubGluZU51bUNoYXJzID0gbnVsbDsNCiAgICAvLyBTZXQgdG8gdHJ1ZSB3
			aGVuIGEgbm9uLWhvcml6b250YWwtc2Nyb2xsaW5nIGxpbmUgd2lkZ2V0IGlzDQogICAgLy8gYWRk
			ZWQuIEFzIGFuIG9wdGltaXphdGlvbiwgbGluZSB3aWRnZXQgYWxpZ25pbmcgaXMgc2tpcHBlZCB3
			aGVuDQogICAgLy8gdGhpcyBpcyBmYWxzZS4NCiAgICBkLmFsaWduV2lkZ2V0cyA9IGZhbHNlOw0K
			DQogICAgZC5jYWNoZWRDaGFyV2lkdGggPSBkLmNhY2hlZFRleHRIZWlnaHQgPSBkLmNhY2hlZFBh
			ZGRpbmdIID0gbnVsbDsNCg0KICAgIC8vIFRyYWNrcyB0aGUgbWF4aW11bSBsaW5lIGxlbmd0aCBz
			byB0aGF0IHRoZSBob3Jpem9udGFsIHNjcm9sbGJhcg0KICAgIC8vIGNhbiBiZSBrZXB0IHN0YXRp
			YyB3aGVuIHNjcm9sbGluZy4NCiAgICBkLm1heExpbmUgPSBudWxsOw0KICAgIGQubWF4TGluZUxl
			bmd0aCA9IDA7DQogICAgZC5tYXhMaW5lQ2hhbmdlZCA9IGZhbHNlOw0KDQogICAgLy8gVXNlZCBm
			b3IgbWVhc3VyaW5nIHdoZWVsIHNjcm9sbGluZyBncmFudWxhcml0eQ0KICAgIGQud2hlZWxEWCA9
			IGQud2hlZWxEWSA9IGQud2hlZWxTdGFydFggPSBkLndoZWVsU3RhcnRZID0gbnVsbDsNCg0KICAg
			IC8vIFRydWUgd2hlbiBzaGlmdCBpcyBoZWxkIGRvd24uDQogICAgZC5zaGlmdCA9IGZhbHNlOw0K
			DQogICAgLy8gVXNlZCB0byB0cmFjayB3aGV0aGVyIGFueXRoaW5nIGhhcHBlbmVkIHNpbmNlIHRo
			ZSBjb250ZXh0IG1lbnUNCiAgICAvLyB3YXMgb3BlbmVkLg0KICAgIGQuc2VsRm9yQ29udGV4dE1l
			bnUgPSBudWxsOw0KDQogICAgZC5hY3RpdmVUb3VjaCA9IG51bGw7DQoNCiAgICBkLmd1dHRlclNw
			ZWNzID0gZ2V0R3V0dGVycyhvcHRpb25zLmd1dHRlcnMsIG9wdGlvbnMubGluZU51bWJlcnMpOw0K
			ICAgIHJlbmRlckd1dHRlcnMoZCk7DQoNCiAgICBpbnB1dC5pbml0KGQpOw0KICB9DQoNCiAgLy8g
			U2luY2UgdGhlIGRlbHRhIHZhbHVlcyByZXBvcnRlZCBvbiBtb3VzZSB3aGVlbCBldmVudHMgYXJl
			DQogIC8vIHVuc3RhbmRhcmRpemVkIGJldHdlZW4gYnJvd3NlcnMgYW5kIGV2ZW4gYnJvd3NlciB2
			ZXJzaW9ucywgYW5kDQogIC8vIGdlbmVyYWxseSBob3JyaWJseSB1bnByZWRpY3RhYmxlLCB0aGlz
			IGNvZGUgc3RhcnRzIGJ5IG1lYXN1cmluZw0KICAvLyB0aGUgc2Nyb2xsIGVmZmVjdCB0aGF0IHRo
			ZSBmaXJzdCBmZXcgbW91c2Ugd2hlZWwgZXZlbnRzIGhhdmUsDQogIC8vIGFuZCwgZnJvbSB0aGF0
			LCBkZXRlY3RzIHRoZSB3YXkgaXQgY2FuIGNvbnZlcnQgZGVsdGFzIHRvIHBpeGVsDQogIC8vIG9m
			ZnNldHMgYWZ0ZXJ3YXJkcy4NCiAgLy8NCiAgLy8gVGhlIHJlYXNvbiB3ZSB3YW50IHRvIGtub3cg
			dGhlIGFtb3VudCBhIHdoZWVsIGV2ZW50IHdpbGwgc2Nyb2xsDQogIC8vIGlzIHRoYXQgaXQgZ2l2
			ZXMgdXMgYSBjaGFuY2UgdG8gdXBkYXRlIHRoZSBkaXNwbGF5IGJlZm9yZSB0aGUNCiAgLy8gYWN0
			dWFsIHNjcm9sbGluZyBoYXBwZW5zLCByZWR1Y2luZyBmbGlja2VyaW5nLg0KDQogIHZhciB3aGVl
			bFNhbXBsZXMgPSAwLCB3aGVlbFBpeGVsc1BlclVuaXQgPSBudWxsOw0KICAvLyBGaWxsIGluIGEg
			YnJvd3Nlci1kZXRlY3RlZCBzdGFydGluZyB2YWx1ZSBvbiBicm93c2VycyB3aGVyZSB3ZQ0KICAv
			LyBrbm93IG9uZS4gVGhlc2UgZG9uJ3QgaGF2ZSB0byBiZSBhY2N1cmF0ZSAtLSB0aGUgcmVzdWx0
			IG9mIHRoZW0NCiAgLy8gYmVpbmcgd3Jvbmcgd291bGQganVzdCBiZSBhIHNsaWdodCBmbGlja2Vy
			IG9uIHRoZSBmaXJzdCB3aGVlbA0KICAvLyBzY3JvbGwgKGlmIGl0IGlzIGxhcmdlIGVub3VnaCku
			DQogIGlmIChpZSkgeyB3aGVlbFBpeGVsc1BlclVuaXQgPSAtLjUzOyB9DQogIGVsc2UgaWYgKGdl
			Y2tvKSB7IHdoZWVsUGl4ZWxzUGVyVW5pdCA9IDE1OyB9DQogIGVsc2UgaWYgKGNocm9tZSkgeyB3
			aGVlbFBpeGVsc1BlclVuaXQgPSAtLjc7IH0NCiAgZWxzZSBpZiAoc2FmYXJpKSB7IHdoZWVsUGl4
			ZWxzUGVyVW5pdCA9IC0xLzM7IH0NCg0KICBmdW5jdGlvbiB3aGVlbEV2ZW50RGVsdGEoZSkgew0K
			ICAgIHZhciBkeCA9IGUud2hlZWxEZWx0YVgsIGR5ID0gZS53aGVlbERlbHRhWTsNCiAgICBpZiAo
			ZHggPT0gbnVsbCAmJiBlLmRldGFpbCAmJiBlLmF4aXMgPT0gZS5IT1JJWk9OVEFMX0FYSVMpIHsg
			ZHggPSBlLmRldGFpbDsgfQ0KICAgIGlmIChkeSA9PSBudWxsICYmIGUuZGV0YWlsICYmIGUuYXhp
			cyA9PSBlLlZFUlRJQ0FMX0FYSVMpIHsgZHkgPSBlLmRldGFpbDsgfQ0KICAgIGVsc2UgaWYgKGR5
			ID09IG51bGwpIHsgZHkgPSBlLndoZWVsRGVsdGE7IH0NCiAgICByZXR1cm4ge3g6IGR4LCB5OiBk
			eX0NCiAgfQ0KICBmdW5jdGlvbiB3aGVlbEV2ZW50UGl4ZWxzKGUpIHsNCiAgICB2YXIgZGVsdGEg
			PSB3aGVlbEV2ZW50RGVsdGEoZSk7DQogICAgZGVsdGEueCAqPSB3aGVlbFBpeGVsc1BlclVuaXQ7
			DQogICAgZGVsdGEueSAqPSB3aGVlbFBpeGVsc1BlclVuaXQ7DQogICAgcmV0dXJuIGRlbHRhDQog
			IH0NCg0KICBmdW5jdGlvbiBvblNjcm9sbFdoZWVsKGNtLCBlKSB7DQogICAgdmFyIGRlbHRhID0g
			d2hlZWxFdmVudERlbHRhKGUpLCBkeCA9IGRlbHRhLngsIGR5ID0gZGVsdGEueTsNCg0KICAgIHZh
			ciBkaXNwbGF5ID0gY20uZGlzcGxheSwgc2Nyb2xsID0gZGlzcGxheS5zY3JvbGxlcjsNCiAgICAv
			LyBRdWl0IGlmIHRoZXJlJ3Mgbm90aGluZyB0byBzY3JvbGwgaGVyZQ0KICAgIHZhciBjYW5TY3Jv
			bGxYID0gc2Nyb2xsLnNjcm9sbFdpZHRoID4gc2Nyb2xsLmNsaWVudFdpZHRoOw0KICAgIHZhciBj
			YW5TY3JvbGxZID0gc2Nyb2xsLnNjcm9sbEhlaWdodCA+IHNjcm9sbC5jbGllbnRIZWlnaHQ7DQog
			ICAgaWYgKCEoZHggJiYgY2FuU2Nyb2xsWCB8fCBkeSAmJiBjYW5TY3JvbGxZKSkgeyByZXR1cm4g
			fQ0KDQogICAgLy8gV2Via2l0IGJyb3dzZXJzIG9uIE9TIFggYWJvcnQgbW9tZW50dW0gc2Nyb2xs
			cyB3aGVuIHRoZSB0YXJnZXQNCiAgICAvLyBvZiB0aGUgc2Nyb2xsIGV2ZW50IGlzIHJlbW92ZWQg
			ZnJvbSB0aGUgc2Nyb2xsYWJsZSBlbGVtZW50Lg0KICAgIC8vIFRoaXMgaGFjayAoc2VlIHJlbGF0
			ZWQgY29kZSBpbiBwYXRjaERpc3BsYXkpIG1ha2VzIHN1cmUgdGhlDQogICAgLy8gZWxlbWVudCBp
			cyBrZXB0IGFyb3VuZC4NCiAgICBpZiAoZHkgJiYgbWFjICYmIHdlYmtpdCkgew0KICAgICAgb3V0
			ZXI6IGZvciAodmFyIGN1ciA9IGUudGFyZ2V0LCB2aWV3ID0gZGlzcGxheS52aWV3OyBjdXIgIT0g
			c2Nyb2xsOyBjdXIgPSBjdXIucGFyZW50Tm9kZSkgew0KICAgICAgICBmb3IgKHZhciBpID0gMDsg
			aSA8IHZpZXcubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBpZiAodmlld1tpXS5ub2RlID09IGN1
			cikgew0KICAgICAgICAgICAgY20uZGlzcGxheS5jdXJyZW50V2hlZWxUYXJnZXQgPSBjdXI7DQog
			ICAgICAgICAgICBicmVhayBvdXRlcg0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0K
			ICAgIH0NCg0KICAgIC8vIE9uIHNvbWUgYnJvd3NlcnMsIGhvcml6b250YWwgc2Nyb2xsaW5nIHdp
			bGwgY2F1c2UgcmVkcmF3cyB0bw0KICAgIC8vIGhhcHBlbiBiZWZvcmUgdGhlIGd1dHRlciBoYXMg
			YmVlbiByZWFsaWduZWQsIGNhdXNpbmcgaXQgdG8NCiAgICAvLyB3cmlnZ2xlIGFyb3VuZCBpbiBh
			IG1vc3QgdW5zZWVtbHkgd2F5LiBXaGVuIHdlIGhhdmUgYW4NCiAgICAvLyBlc3RpbWF0ZWQgcGl4
			ZWxzL2RlbHRhIHZhbHVlLCB3ZSBqdXN0IGhhbmRsZSBob3Jpem9udGFsDQogICAgLy8gc2Nyb2xs
			aW5nIGVudGlyZWx5IGhlcmUuIEl0J2xsIGJlIHNsaWdodGx5IG9mZiBmcm9tIG5hdGl2ZSwgYnV0
			DQogICAgLy8gYmV0dGVyIHRoYW4gZ2xpdGNoaW5nIG91dC4NCiAgICBpZiAoZHggJiYgIWdlY2tv
			ICYmICFwcmVzdG8gJiYgd2hlZWxQaXhlbHNQZXJVbml0ICE9IG51bGwpIHsNCiAgICAgIGlmIChk
			eSAmJiBjYW5TY3JvbGxZKQ0KICAgICAgICB7IHVwZGF0ZVNjcm9sbFRvcChjbSwgTWF0aC5tYXgo
			MCwgc2Nyb2xsLnNjcm9sbFRvcCArIGR5ICogd2hlZWxQaXhlbHNQZXJVbml0KSk7IH0NCiAgICAg
			IHNldFNjcm9sbExlZnQoY20sIE1hdGgubWF4KDAsIHNjcm9sbC5zY3JvbGxMZWZ0ICsgZHggKiB3
			aGVlbFBpeGVsc1BlclVuaXQpKTsNCiAgICAgIC8vIE9ubHkgcHJldmVudCBkZWZhdWx0IHNjcm9s
			bGluZyBpZiB2ZXJ0aWNhbCBzY3JvbGxpbmcgaXMNCiAgICAgIC8vIGFjdHVhbGx5IHBvc3NpYmxl
			LiBPdGhlcndpc2UsIGl0IGNhdXNlcyB2ZXJ0aWNhbCBzY3JvbGwNCiAgICAgIC8vIGppdHRlciBv
			biBPU1ggdHJhY2twYWRzIHdoZW4gZGVsdGFYIGlzIHNtYWxsIGFuZCBkZWx0YVkNCiAgICAgIC8v
			IGlzIGxhcmdlIChpc3N1ZSAjMzU3OSkNCiAgICAgIGlmICghZHkgfHwgKGR5ICYmIGNhblNjcm9s
			bFkpKQ0KICAgICAgICB7IGVfcHJldmVudERlZmF1bHQoZSk7IH0NCiAgICAgIGRpc3BsYXkud2hl
			ZWxTdGFydFggPSBudWxsOyAvLyBBYm9ydCBtZWFzdXJlbWVudCwgaWYgaW4gcHJvZ3Jlc3MNCiAg
			ICAgIHJldHVybg0KICAgIH0NCg0KICAgIC8vICdQcm9qZWN0JyB0aGUgdmlzaWJsZSB2aWV3cG9y
			dCB0byBjb3ZlciB0aGUgYXJlYSB0aGF0IGlzIGJlaW5nDQogICAgLy8gc2Nyb2xsZWQgaW50byB2
			aWV3IChpZiB3ZSBrbm93IGVub3VnaCB0byBlc3RpbWF0ZSBpdCkuDQogICAgaWYgKGR5ICYmIHdo
			ZWVsUGl4ZWxzUGVyVW5pdCAhPSBudWxsKSB7DQogICAgICB2YXIgcGl4ZWxzID0gZHkgKiB3aGVl
			bFBpeGVsc1BlclVuaXQ7DQogICAgICB2YXIgdG9wID0gY20uZG9jLnNjcm9sbFRvcCwgYm90ID0g
			dG9wICsgZGlzcGxheS53cmFwcGVyLmNsaWVudEhlaWdodDsNCiAgICAgIGlmIChwaXhlbHMgPCAw
			KSB7IHRvcCA9IE1hdGgubWF4KDAsIHRvcCArIHBpeGVscyAtIDUwKTsgfQ0KICAgICAgZWxzZSB7
			IGJvdCA9IE1hdGgubWluKGNtLmRvYy5oZWlnaHQsIGJvdCArIHBpeGVscyArIDUwKTsgfQ0KICAg
			ICAgdXBkYXRlRGlzcGxheVNpbXBsZShjbSwge3RvcDogdG9wLCBib3R0b206IGJvdH0pOw0KICAg
			IH0NCg0KICAgIGlmICh3aGVlbFNhbXBsZXMgPCAyMCkgew0KICAgICAgaWYgKGRpc3BsYXkud2hl
			ZWxTdGFydFggPT0gbnVsbCkgew0KICAgICAgICBkaXNwbGF5LndoZWVsU3RhcnRYID0gc2Nyb2xs
			LnNjcm9sbExlZnQ7IGRpc3BsYXkud2hlZWxTdGFydFkgPSBzY3JvbGwuc2Nyb2xsVG9wOw0KICAg
			ICAgICBkaXNwbGF5LndoZWVsRFggPSBkeDsgZGlzcGxheS53aGVlbERZID0gZHk7DQogICAgICAg
			IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgIGlmIChkaXNwbGF5LndoZWVsU3Rh
			cnRYID09IG51bGwpIHsgcmV0dXJuIH0NCiAgICAgICAgICB2YXIgbW92ZWRYID0gc2Nyb2xsLnNj
			cm9sbExlZnQgLSBkaXNwbGF5LndoZWVsU3RhcnRYOw0KICAgICAgICAgIHZhciBtb3ZlZFkgPSBz
			Y3JvbGwuc2Nyb2xsVG9wIC0gZGlzcGxheS53aGVlbFN0YXJ0WTsNCiAgICAgICAgICB2YXIgc2Ft
			cGxlID0gKG1vdmVkWSAmJiBkaXNwbGF5LndoZWVsRFkgJiYgbW92ZWRZIC8gZGlzcGxheS53aGVl
			bERZKSB8fA0KICAgICAgICAgICAgKG1vdmVkWCAmJiBkaXNwbGF5LndoZWVsRFggJiYgbW92ZWRY
			IC8gZGlzcGxheS53aGVlbERYKTsNCiAgICAgICAgICBkaXNwbGF5LndoZWVsU3RhcnRYID0gZGlz
			cGxheS53aGVlbFN0YXJ0WSA9IG51bGw7DQogICAgICAgICAgaWYgKCFzYW1wbGUpIHsgcmV0dXJu
			IH0NCiAgICAgICAgICB3aGVlbFBpeGVsc1BlclVuaXQgPSAod2hlZWxQaXhlbHNQZXJVbml0ICog
			d2hlZWxTYW1wbGVzICsgc2FtcGxlKSAvICh3aGVlbFNhbXBsZXMgKyAxKTsNCiAgICAgICAgICAr
			K3doZWVsU2FtcGxlczsNCiAgICAgICAgfSwgMjAwKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAg
			IGRpc3BsYXkud2hlZWxEWCArPSBkeDsgZGlzcGxheS53aGVlbERZICs9IGR5Ow0KICAgICAgfQ0K
			ICAgIH0NCiAgfQ0KDQogIC8vIFNlbGVjdGlvbiBvYmplY3RzIGFyZSBpbW11dGFibGUuIEEgbmV3
			IG9uZSBpcyBjcmVhdGVkIGV2ZXJ5IHRpbWUNCiAgLy8gdGhlIHNlbGVjdGlvbiBjaGFuZ2VzLiBB
			IHNlbGVjdGlvbiBpcyBvbmUgb3IgbW9yZSBub24tb3ZlcmxhcHBpbmcNCiAgLy8gKGFuZCBub24t
			dG91Y2hpbmcpIHJhbmdlcywgc29ydGVkLCBhbmQgYW4gaW50ZWdlciB0aGF0IGluZGljYXRlcw0K
			ICAvLyB3aGljaCBvbmUgaXMgdGhlIHByaW1hcnkgc2VsZWN0aW9uICh0aGUgb25lIHRoYXQncyBz
			Y3JvbGxlZCBpbnRvDQogIC8vIHZpZXcsIHRoYXQgZ2V0Q3Vyc29yIHJldHVybnMsIGV0YykuDQog
			IHZhciBTZWxlY3Rpb24gPSBmdW5jdGlvbihyYW5nZXMsIHByaW1JbmRleCkgew0KICAgIHRoaXMu
			cmFuZ2VzID0gcmFuZ2VzOw0KICAgIHRoaXMucHJpbUluZGV4ID0gcHJpbUluZGV4Ow0KICB9Ow0K
			DQogIFNlbGVjdGlvbi5wcm90b3R5cGUucHJpbWFyeSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRo
			aXMucmFuZ2VzW3RoaXMucHJpbUluZGV4XSB9Ow0KDQogIFNlbGVjdGlvbi5wcm90b3R5cGUuZXF1
			YWxzID0gZnVuY3Rpb24gKG90aGVyKSB7DQogICAgICB2YXIgdGhpcyQxID0gdGhpczsNCg0KICAg
			IGlmIChvdGhlciA9PSB0aGlzKSB7IHJldHVybiB0cnVlIH0NCiAgICBpZiAob3RoZXIucHJpbUlu
			ZGV4ICE9IHRoaXMucHJpbUluZGV4IHx8IG90aGVyLnJhbmdlcy5sZW5ndGggIT0gdGhpcy5yYW5n
			ZXMubGVuZ3RoKSB7IHJldHVybiBmYWxzZSB9DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlz
			LnJhbmdlcy5sZW5ndGg7IGkrKykgew0KICAgICAgdmFyIGhlcmUgPSB0aGlzJDEucmFuZ2VzW2ld
			LCB0aGVyZSA9IG90aGVyLnJhbmdlc1tpXTsNCiAgICAgIGlmICghZXF1YWxDdXJzb3JQb3MoaGVy
			ZS5hbmNob3IsIHRoZXJlLmFuY2hvcikgfHwgIWVxdWFsQ3Vyc29yUG9zKGhlcmUuaGVhZCwgdGhl
			cmUuaGVhZCkpIHsgcmV0dXJuIGZhbHNlIH0NCiAgICB9DQogICAgcmV0dXJuIHRydWUNCiAgfTsN
			Cg0KICBTZWxlY3Rpb24ucHJvdG90eXBlLmRlZXBDb3B5ID0gZnVuY3Rpb24gKCkgew0KICAgICAg
			dmFyIHRoaXMkMSA9IHRoaXM7DQoNCiAgICB2YXIgb3V0ID0gW107DQogICAgZm9yICh2YXIgaSA9
			IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKykNCiAgICAgIHsgb3V0W2ldID0gbmV3IFJh
			bmdlKGNvcHlQb3ModGhpcyQxLnJhbmdlc1tpXS5hbmNob3IpLCBjb3B5UG9zKHRoaXMkMS5yYW5n
			ZXNbaV0uaGVhZCkpOyB9DQogICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24ob3V0LCB0aGlzLnByaW1J
			bmRleCkNCiAgfTsNCg0KICBTZWxlY3Rpb24ucHJvdG90eXBlLnNvbWV0aGluZ1NlbGVjdGVkID0g
			ZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7DQoNCiAgICBmb3IgKHZhciBp
			ID0gMDsgaSA8IHRoaXMucmFuZ2VzLmxlbmd0aDsgaSsrKQ0KICAgICAgeyBpZiAoIXRoaXMkMS5y
			YW5nZXNbaV0uZW1wdHkoKSkgeyByZXR1cm4gdHJ1ZSB9IH0NCiAgICByZXR1cm4gZmFsc2UNCiAg
			fTsNCg0KICBTZWxlY3Rpb24ucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKHBvcywgZW5k
			KSB7DQogICAgICB2YXIgdGhpcyQxID0gdGhpczsNCg0KICAgIGlmICghZW5kKSB7IGVuZCA9IHBv
			czsgfQ0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspIHsN
			CiAgICAgIHZhciByYW5nZSA9IHRoaXMkMS5yYW5nZXNbaV07DQogICAgICBpZiAoY21wKGVuZCwg
			cmFuZ2UuZnJvbSgpKSA+PSAwICYmIGNtcChwb3MsIHJhbmdlLnRvKCkpIDw9IDApDQogICAgICAg
			IHsgcmV0dXJuIGkgfQ0KICAgIH0NCiAgICByZXR1cm4gLTENCiAgfTsNCg0KICB2YXIgUmFuZ2Ug
			PSBmdW5jdGlvbihhbmNob3IsIGhlYWQpIHsNCiAgICB0aGlzLmFuY2hvciA9IGFuY2hvcjsgdGhp
			cy5oZWFkID0gaGVhZDsNCiAgfTsNCg0KICBSYW5nZS5wcm90b3R5cGUuZnJvbSA9IGZ1bmN0aW9u
			ICgpIHsgcmV0dXJuIG1pblBvcyh0aGlzLmFuY2hvciwgdGhpcy5oZWFkKSB9Ow0KICBSYW5nZS5w
			cm90b3R5cGUudG8gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBtYXhQb3ModGhpcy5hbmNob3IsIHRo
			aXMuaGVhZCkgfTsNCiAgUmFuZ2UucHJvdG90eXBlLmVtcHR5ID0gZnVuY3Rpb24gKCkgeyByZXR1
			cm4gdGhpcy5oZWFkLmxpbmUgPT0gdGhpcy5hbmNob3IubGluZSAmJiB0aGlzLmhlYWQuY2ggPT0g
			dGhpcy5hbmNob3IuY2ggfTsNCg0KICAvLyBUYWtlIGFuIHVuc29ydGVkLCBwb3RlbnRpYWxseSBv
			dmVybGFwcGluZyBzZXQgb2YgcmFuZ2VzLCBhbmQNCiAgLy8gYnVpbGQgYSBzZWxlY3Rpb24gb3V0
			IG9mIGl0LiAnQ29uc3VtZXMnIHJhbmdlcyBhcnJheSAobW9kaWZ5aW5nDQogIC8vIGl0KS4NCiAg
			ZnVuY3Rpb24gbm9ybWFsaXplU2VsZWN0aW9uKGNtLCByYW5nZXMsIHByaW1JbmRleCkgew0KICAg
			IHZhciBtYXlUb3VjaCA9IGNtICYmIGNtLm9wdGlvbnMuc2VsZWN0aW9uc01heVRvdWNoOw0KICAg
			IHZhciBwcmltID0gcmFuZ2VzW3ByaW1JbmRleF07DQogICAgcmFuZ2VzLnNvcnQoZnVuY3Rpb24g
			KGEsIGIpIHsgcmV0dXJuIGNtcChhLmZyb20oKSwgYi5mcm9tKCkpOyB9KTsNCiAgICBwcmltSW5k
			ZXggPSBpbmRleE9mKHJhbmdlcywgcHJpbSk7DQogICAgZm9yICh2YXIgaSA9IDE7IGkgPCByYW5n
			ZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgIHZhciBjdXIgPSByYW5nZXNbaV0sIHByZXYgPSByYW5n
			ZXNbaSAtIDFdOw0KICAgICAgdmFyIGRpZmYgPSBjbXAocHJldi50bygpLCBjdXIuZnJvbSgpKTsN
			CiAgICAgIGlmIChtYXlUb3VjaCAmJiAhY3VyLmVtcHR5KCkgPyBkaWZmID4gMCA6IGRpZmYgPj0g
			MCkgew0KICAgICAgICB2YXIgZnJvbSA9IG1pblBvcyhwcmV2LmZyb20oKSwgY3VyLmZyb20oKSks
			IHRvID0gbWF4UG9zKHByZXYudG8oKSwgY3VyLnRvKCkpOw0KICAgICAgICB2YXIgaW52ID0gcHJl
			di5lbXB0eSgpID8gY3VyLmZyb20oKSA9PSBjdXIuaGVhZCA6IHByZXYuZnJvbSgpID09IHByZXYu
			aGVhZDsNCiAgICAgICAgaWYgKGkgPD0gcHJpbUluZGV4KSB7IC0tcHJpbUluZGV4OyB9DQogICAg
			ICAgIHJhbmdlcy5zcGxpY2UoLS1pLCAyLCBuZXcgUmFuZ2UoaW52ID8gdG8gOiBmcm9tLCBpbnYg
			PyBmcm9tIDogdG8pKTsNCiAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24o
			cmFuZ2VzLCBwcmltSW5kZXgpDQogIH0NCg0KICBmdW5jdGlvbiBzaW1wbGVTZWxlY3Rpb24oYW5j
			aG9yLCBoZWFkKSB7DQogICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oW25ldyBSYW5nZShhbmNob3Is
			IGhlYWQgfHwgYW5jaG9yKV0sIDApDQogIH0NCg0KICAvLyBDb21wdXRlIHRoZSBwb3NpdGlvbiBv
			ZiB0aGUgZW5kIG9mIGEgY2hhbmdlIChpdHMgJ3RvJyBwcm9wZXJ0eQ0KICAvLyByZWZlcnMgdG8g
			dGhlIHByZS1jaGFuZ2UgZW5kKS4NCiAgZnVuY3Rpb24gY2hhbmdlRW5kKGNoYW5nZSkgew0KICAg
			IGlmICghY2hhbmdlLnRleHQpIHsgcmV0dXJuIGNoYW5nZS50byB9DQogICAgcmV0dXJuIFBvcyhj
			aGFuZ2UuZnJvbS5saW5lICsgY2hhbmdlLnRleHQubGVuZ3RoIC0gMSwNCiAgICAgICAgICAgICAg
			IGxzdChjaGFuZ2UudGV4dCkubGVuZ3RoICsgKGNoYW5nZS50ZXh0Lmxlbmd0aCA9PSAxID8gY2hh
			bmdlLmZyb20uY2ggOiAwKSkNCiAgfQ0KDQogIC8vIEFkanVzdCBhIHBvc2l0aW9uIHRvIHJlZmVy
			IHRvIHRoZSBwb3N0LWNoYW5nZSBwb3NpdGlvbiBvZiB0aGUNCiAgLy8gc2FtZSB0ZXh0LCBvciB0
			aGUgZW5kIG9mIHRoZSBjaGFuZ2UgaWYgdGhlIGNoYW5nZSBjb3ZlcnMgaXQuDQogIGZ1bmN0aW9u
			IGFkanVzdEZvckNoYW5nZShwb3MsIGNoYW5nZSkgew0KICAgIGlmIChjbXAocG9zLCBjaGFuZ2Uu
			ZnJvbSkgPCAwKSB7IHJldHVybiBwb3MgfQ0KICAgIGlmIChjbXAocG9zLCBjaGFuZ2UudG8pIDw9
			IDApIHsgcmV0dXJuIGNoYW5nZUVuZChjaGFuZ2UpIH0NCg0KICAgIHZhciBsaW5lID0gcG9zLmxp
			bmUgKyBjaGFuZ2UudGV4dC5sZW5ndGggLSAoY2hhbmdlLnRvLmxpbmUgLSBjaGFuZ2UuZnJvbS5s
			aW5lKSAtIDEsIGNoID0gcG9zLmNoOw0KICAgIGlmIChwb3MubGluZSA9PSBjaGFuZ2UudG8ubGlu
			ZSkgeyBjaCArPSBjaGFuZ2VFbmQoY2hhbmdlKS5jaCAtIGNoYW5nZS50by5jaDsgfQ0KICAgIHJl
			dHVybiBQb3MobGluZSwgY2gpDQogIH0NCg0KICBmdW5jdGlvbiBjb21wdXRlU2VsQWZ0ZXJDaGFu
			Z2UoZG9jLCBjaGFuZ2UpIHsNCiAgICB2YXIgb3V0ID0gW107DQogICAgZm9yICh2YXIgaSA9IDA7
			IGkgPCBkb2Muc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykgew0KICAgICAgdmFyIHJhbmdlID0gZG9j
			LnNlbC5yYW5nZXNbaV07DQogICAgICBvdXQucHVzaChuZXcgUmFuZ2UoYWRqdXN0Rm9yQ2hhbmdl
			KHJhbmdlLmFuY2hvciwgY2hhbmdlKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICBhZGp1c3RG
			b3JDaGFuZ2UocmFuZ2UuaGVhZCwgY2hhbmdlKSkpOw0KICAgIH0NCiAgICByZXR1cm4gbm9ybWFs
			aXplU2VsZWN0aW9uKGRvYy5jbSwgb3V0LCBkb2Muc2VsLnByaW1JbmRleCkNCiAgfQ0KDQogIGZ1
			bmN0aW9uIG9mZnNldFBvcyhwb3MsIG9sZCwgbncpIHsNCiAgICBpZiAocG9zLmxpbmUgPT0gb2xk
			LmxpbmUpDQogICAgICB7IHJldHVybiBQb3MobncubGluZSwgcG9zLmNoIC0gb2xkLmNoICsgbncu
			Y2gpIH0NCiAgICBlbHNlDQogICAgICB7IHJldHVybiBQb3MobncubGluZSArIChwb3MubGluZSAt
			IG9sZC5saW5lKSwgcG9zLmNoKSB9DQogIH0NCg0KICAvLyBVc2VkIGJ5IHJlcGxhY2VTZWxlY3Rp
			b25zIHRvIGFsbG93IG1vdmluZyB0aGUgc2VsZWN0aW9uIHRvIHRoZQ0KICAvLyBzdGFydCBvciBh
			cm91bmQgdGhlIHJlcGxhY2VkIHRlc3QuIEhpbnQgbWF5IGJlICJzdGFydCIgb3IgImFyb3VuZCIu
			DQogIGZ1bmN0aW9uIGNvbXB1dGVSZXBsYWNlZFNlbChkb2MsIGNoYW5nZXMsIGhpbnQpIHsNCiAg
			ICB2YXIgb3V0ID0gW107DQogICAgdmFyIG9sZFByZXYgPSBQb3MoZG9jLmZpcnN0LCAwKSwgbmV3
			UHJldiA9IG9sZFByZXY7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFuZ2VzLmxlbmd0aDsg
			aSsrKSB7DQogICAgICB2YXIgY2hhbmdlID0gY2hhbmdlc1tpXTsNCiAgICAgIHZhciBmcm9tID0g
			b2Zmc2V0UG9zKGNoYW5nZS5mcm9tLCBvbGRQcmV2LCBuZXdQcmV2KTsNCiAgICAgIHZhciB0byA9
			IG9mZnNldFBvcyhjaGFuZ2VFbmQoY2hhbmdlKSwgb2xkUHJldiwgbmV3UHJldik7DQogICAgICBv
			bGRQcmV2ID0gY2hhbmdlLnRvOw0KICAgICAgbmV3UHJldiA9IHRvOw0KICAgICAgaWYgKGhpbnQg
			PT0gImFyb3VuZCIpIHsNCiAgICAgICAgdmFyIHJhbmdlID0gZG9jLnNlbC5yYW5nZXNbaV0sIGlu
			diA9IGNtcChyYW5nZS5oZWFkLCByYW5nZS5hbmNob3IpIDwgMDsNCiAgICAgICAgb3V0W2ldID0g
			bmV3IFJhbmdlKGludiA/IHRvIDogZnJvbSwgaW52ID8gZnJvbSA6IHRvKTsNCiAgICAgIH0gZWxz
			ZSB7DQogICAgICAgIG91dFtpXSA9IG5ldyBSYW5nZShmcm9tLCBmcm9tKTsNCiAgICAgIH0NCiAg
			ICB9DQogICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24ob3V0LCBkb2Muc2VsLnByaW1JbmRleCkNCiAg
			fQ0KDQogIC8vIFVzZWQgdG8gZ2V0IHRoZSBlZGl0b3IgaW50byBhIGNvbnNpc3RlbnQgc3RhdGUg
			YWdhaW4gd2hlbiBvcHRpb25zIGNoYW5nZS4NCg0KICBmdW5jdGlvbiBsb2FkTW9kZShjbSkgew0K
			ICAgIGNtLmRvYy5tb2RlID0gZ2V0TW9kZShjbS5vcHRpb25zLCBjbS5kb2MubW9kZU9wdGlvbik7
			DQogICAgcmVzZXRNb2RlU3RhdGUoY20pOw0KICB9DQoNCiAgZnVuY3Rpb24gcmVzZXRNb2RlU3Rh
			dGUoY20pIHsNCiAgICBjbS5kb2MuaXRlcihmdW5jdGlvbiAobGluZSkgew0KICAgICAgaWYgKGxp
			bmUuc3RhdGVBZnRlcikgeyBsaW5lLnN0YXRlQWZ0ZXIgPSBudWxsOyB9DQogICAgICBpZiAobGlu
			ZS5zdHlsZXMpIHsgbGluZS5zdHlsZXMgPSBudWxsOyB9DQogICAgfSk7DQogICAgY20uZG9jLm1v
			ZGVGcm9udGllciA9IGNtLmRvYy5oaWdobGlnaHRGcm9udGllciA9IGNtLmRvYy5maXJzdDsNCiAg
			ICBzdGFydFdvcmtlcihjbSwgMTAwKTsNCiAgICBjbS5zdGF0ZS5tb2RlR2VuKys7DQogICAgaWYg
			KGNtLmN1ck9wKSB7IHJlZ0NoYW5nZShjbSk7IH0NCiAgfQ0KDQogIC8vIERPQ1VNRU5UIERBVEEg
			U1RSVUNUVVJFDQoNCiAgLy8gQnkgZGVmYXVsdCwgdXBkYXRlcyB0aGF0IHN0YXJ0IGFuZCBlbmQg
			YXQgdGhlIGJlZ2lubmluZyBvZiBhIGxpbmUNCiAgLy8gYXJlIHRyZWF0ZWQgc3BlY2lhbGx5LCBp
			biBvcmRlciB0byBtYWtlIHRoZSBhc3NvY2lhdGlvbiBvZiBsaW5lDQogIC8vIHdpZGdldHMgYW5k
			IG1hcmtlciBlbGVtZW50cyB3aXRoIHRoZSB0ZXh0IGJlaGF2ZSBtb3JlIGludHVpdGl2ZS4NCiAg
			ZnVuY3Rpb24gaXNXaG9sZUxpbmVVcGRhdGUoZG9jLCBjaGFuZ2UpIHsNCiAgICByZXR1cm4gY2hh
			bmdlLmZyb20uY2ggPT0gMCAmJiBjaGFuZ2UudG8uY2ggPT0gMCAmJiBsc3QoY2hhbmdlLnRleHQp
			ID09ICIiICYmDQogICAgICAoIWRvYy5jbSB8fCBkb2MuY20ub3B0aW9ucy53aG9sZUxpbmVVcGRh
			dGVCZWZvcmUpDQogIH0NCg0KICAvLyBQZXJmb3JtIGEgY2hhbmdlIG9uIHRoZSBkb2N1bWVudCBk
			YXRhIHN0cnVjdHVyZS4NCiAgZnVuY3Rpb24gdXBkYXRlRG9jKGRvYywgY2hhbmdlLCBtYXJrZWRT
			cGFucywgZXN0aW1hdGVIZWlnaHQkJDEpIHsNCiAgICBmdW5jdGlvbiBzcGFuc0ZvcihuKSB7cmV0
			dXJuIG1hcmtlZFNwYW5zID8gbWFya2VkU3BhbnNbbl0gOiBudWxsfQ0KICAgIGZ1bmN0aW9uIHVw
			ZGF0ZShsaW5lLCB0ZXh0LCBzcGFucykgew0KICAgICAgdXBkYXRlTGluZShsaW5lLCB0ZXh0LCBz
			cGFucywgZXN0aW1hdGVIZWlnaHQkJDEpOw0KICAgICAgc2lnbmFsTGF0ZXIobGluZSwgImNoYW5n
			ZSIsIGxpbmUsIGNoYW5nZSk7DQogICAgfQ0KICAgIGZ1bmN0aW9uIGxpbmVzRm9yKHN0YXJ0LCBl
			bmQpIHsNCiAgICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICAgIGZvciAodmFyIGkgPSBzdGFydDsg
			aSA8IGVuZDsgKytpKQ0KICAgICAgICB7IHJlc3VsdC5wdXNoKG5ldyBMaW5lKHRleHRbaV0sIHNw
			YW5zRm9yKGkpLCBlc3RpbWF0ZUhlaWdodCQkMSkpOyB9DQogICAgICByZXR1cm4gcmVzdWx0DQog
			ICAgfQ0KDQogICAgdmFyIGZyb20gPSBjaGFuZ2UuZnJvbSwgdG8gPSBjaGFuZ2UudG8sIHRleHQg
			PSBjaGFuZ2UudGV4dDsNCiAgICB2YXIgZmlyc3RMaW5lID0gZ2V0TGluZShkb2MsIGZyb20ubGlu
			ZSksIGxhc3RMaW5lID0gZ2V0TGluZShkb2MsIHRvLmxpbmUpOw0KICAgIHZhciBsYXN0VGV4dCA9
			IGxzdCh0ZXh0KSwgbGFzdFNwYW5zID0gc3BhbnNGb3IodGV4dC5sZW5ndGggLSAxKSwgbmxpbmVz
			ID0gdG8ubGluZSAtIGZyb20ubGluZTsNCg0KICAgIC8vIEFkanVzdCB0aGUgbGluZSBzdHJ1Y3R1
			cmUNCiAgICBpZiAoY2hhbmdlLmZ1bGwpIHsNCiAgICAgIGRvYy5pbnNlcnQoMCwgbGluZXNGb3Io
			MCwgdGV4dC5sZW5ndGgpKTsNCiAgICAgIGRvYy5yZW1vdmUodGV4dC5sZW5ndGgsIGRvYy5zaXpl
			IC0gdGV4dC5sZW5ndGgpOw0KICAgIH0gZWxzZSBpZiAoaXNXaG9sZUxpbmVVcGRhdGUoZG9jLCBj
			aGFuZ2UpKSB7DQogICAgICAvLyBUaGlzIGlzIGEgd2hvbGUtbGluZSByZXBsYWNlLiBUcmVhdGVk
			IHNwZWNpYWxseSB0byBtYWtlDQogICAgICAvLyBzdXJlIGxpbmUgb2JqZWN0cyBtb3ZlIHRoZSB3
			YXkgdGhleSBhcmUgc3VwcG9zZWQgdG8uDQogICAgICB2YXIgYWRkZWQgPSBsaW5lc0ZvcigwLCB0
			ZXh0Lmxlbmd0aCAtIDEpOw0KICAgICAgdXBkYXRlKGxhc3RMaW5lLCBsYXN0TGluZS50ZXh0LCBs
			YXN0U3BhbnMpOw0KICAgICAgaWYgKG5saW5lcykgeyBkb2MucmVtb3ZlKGZyb20ubGluZSwgbmxp
			bmVzKTsgfQ0KICAgICAgaWYgKGFkZGVkLmxlbmd0aCkgeyBkb2MuaW5zZXJ0KGZyb20ubGluZSwg
			YWRkZWQpOyB9DQogICAgfSBlbHNlIGlmIChmaXJzdExpbmUgPT0gbGFzdExpbmUpIHsNCiAgICAg
			IGlmICh0ZXh0Lmxlbmd0aCA9PSAxKSB7DQogICAgICAgIHVwZGF0ZShmaXJzdExpbmUsIGZpcnN0
			TGluZS50ZXh0LnNsaWNlKDAsIGZyb20uY2gpICsgbGFzdFRleHQgKyBmaXJzdExpbmUudGV4dC5z
			bGljZSh0by5jaCksIGxhc3RTcGFucyk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB2YXIgYWRk
			ZWQkMSA9IGxpbmVzRm9yKDEsIHRleHQubGVuZ3RoIC0gMSk7DQogICAgICAgIGFkZGVkJDEucHVz
			aChuZXcgTGluZShsYXN0VGV4dCArIGZpcnN0TGluZS50ZXh0LnNsaWNlKHRvLmNoKSwgbGFzdFNw
			YW5zLCBlc3RpbWF0ZUhlaWdodCQkMSkpOw0KICAgICAgICB1cGRhdGUoZmlyc3RMaW5lLCBmaXJz
			dExpbmUudGV4dC5zbGljZSgwLCBmcm9tLmNoKSArIHRleHRbMF0sIHNwYW5zRm9yKDApKTsNCiAg
			ICAgICAgZG9jLmluc2VydChmcm9tLmxpbmUgKyAxLCBhZGRlZCQxKTsNCiAgICAgIH0NCiAgICB9
			IGVsc2UgaWYgKHRleHQubGVuZ3RoID09IDEpIHsNCiAgICAgIHVwZGF0ZShmaXJzdExpbmUsIGZp
			cnN0TGluZS50ZXh0LnNsaWNlKDAsIGZyb20uY2gpICsgdGV4dFswXSArIGxhc3RMaW5lLnRleHQu
			c2xpY2UodG8uY2gpLCBzcGFuc0ZvcigwKSk7DQogICAgICBkb2MucmVtb3ZlKGZyb20ubGluZSAr
			IDEsIG5saW5lcyk7DQogICAgfSBlbHNlIHsNCiAgICAgIHVwZGF0ZShmaXJzdExpbmUsIGZpcnN0
			TGluZS50ZXh0LnNsaWNlKDAsIGZyb20uY2gpICsgdGV4dFswXSwgc3BhbnNGb3IoMCkpOw0KICAg
			ICAgdXBkYXRlKGxhc3RMaW5lLCBsYXN0VGV4dCArIGxhc3RMaW5lLnRleHQuc2xpY2UodG8uY2gp
			LCBsYXN0U3BhbnMpOw0KICAgICAgdmFyIGFkZGVkJDIgPSBsaW5lc0ZvcigxLCB0ZXh0Lmxlbmd0
			aCAtIDEpOw0KICAgICAgaWYgKG5saW5lcyA+IDEpIHsgZG9jLnJlbW92ZShmcm9tLmxpbmUgKyAx
			LCBubGluZXMgLSAxKTsgfQ0KICAgICAgZG9jLmluc2VydChmcm9tLmxpbmUgKyAxLCBhZGRlZCQy
			KTsNCiAgICB9DQoNCiAgICBzaWduYWxMYXRlcihkb2MsICJjaGFuZ2UiLCBkb2MsIGNoYW5nZSk7
			DQogIH0NCg0KICAvLyBDYWxsIGYgZm9yIGFsbCBsaW5rZWQgZG9jdW1lbnRzLg0KICBmdW5jdGlv
			biBsaW5rZWREb2NzKGRvYywgZiwgc2hhcmVkSGlzdE9ubHkpIHsNCiAgICBmdW5jdGlvbiBwcm9w
			YWdhdGUoZG9jLCBza2lwLCBzaGFyZWRIaXN0KSB7DQogICAgICBpZiAoZG9jLmxpbmtlZCkgeyBm
			b3IgKHZhciBpID0gMDsgaSA8IGRvYy5saW5rZWQubGVuZ3RoOyArK2kpIHsNCiAgICAgICAgdmFy
			IHJlbCA9IGRvYy5saW5rZWRbaV07DQogICAgICAgIGlmIChyZWwuZG9jID09IHNraXApIHsgY29u
			dGludWUgfQ0KICAgICAgICB2YXIgc2hhcmVkID0gc2hhcmVkSGlzdCAmJiByZWwuc2hhcmVkSGlz
			dDsNCiAgICAgICAgaWYgKHNoYXJlZEhpc3RPbmx5ICYmICFzaGFyZWQpIHsgY29udGludWUgfQ0K
			ICAgICAgICBmKHJlbC5kb2MsIHNoYXJlZCk7DQogICAgICAgIHByb3BhZ2F0ZShyZWwuZG9jLCBk
			b2MsIHNoYXJlZCk7DQogICAgICB9IH0NCiAgICB9DQogICAgcHJvcGFnYXRlKGRvYywgbnVsbCwg
			dHJ1ZSk7DQogIH0NCg0KICAvLyBBdHRhY2ggYSBkb2N1bWVudCB0byBhbiBlZGl0b3IuDQogIGZ1
			bmN0aW9uIGF0dGFjaERvYyhjbSwgZG9jKSB7DQogICAgaWYgKGRvYy5jbSkgeyB0aHJvdyBuZXcg
			RXJyb3IoIlRoaXMgZG9jdW1lbnQgaXMgYWxyZWFkeSBpbiB1c2UuIikgfQ0KICAgIGNtLmRvYyA9
			IGRvYzsNCiAgICBkb2MuY20gPSBjbTsNCiAgICBlc3RpbWF0ZUxpbmVIZWlnaHRzKGNtKTsNCiAg
			ICBsb2FkTW9kZShjbSk7DQogICAgc2V0RGlyZWN0aW9uQ2xhc3MoY20pOw0KICAgIGlmICghY20u
			b3B0aW9ucy5saW5lV3JhcHBpbmcpIHsgZmluZE1heExpbmUoY20pOyB9DQogICAgY20ub3B0aW9u
			cy5tb2RlID0gZG9jLm1vZGVPcHRpb247DQogICAgcmVnQ2hhbmdlKGNtKTsNCiAgfQ0KDQogIGZ1
			bmN0aW9uIHNldERpcmVjdGlvbkNsYXNzKGNtKSB7DQogIChjbS5kb2MuZGlyZWN0aW9uID09ICJy
			dGwiID8gYWRkQ2xhc3MgOiBybUNsYXNzKShjbS5kaXNwbGF5LmxpbmVEaXYsICJDb2RlTWlycm9y
			LXJ0bCIpOw0KICB9DQoNCiAgZnVuY3Rpb24gZGlyZWN0aW9uQ2hhbmdlZChjbSkgew0KICAgIHJ1
			bkluT3AoY20sIGZ1bmN0aW9uICgpIHsNCiAgICAgIHNldERpcmVjdGlvbkNsYXNzKGNtKTsNCiAg
			ICAgIHJlZ0NoYW5nZShjbSk7DQogICAgfSk7DQogIH0NCg0KICBmdW5jdGlvbiBIaXN0b3J5KHN0
			YXJ0R2VuKSB7DQogICAgLy8gQXJyYXlzIG9mIGNoYW5nZSBldmVudHMgYW5kIHNlbGVjdGlvbnMu
			IERvaW5nIHNvbWV0aGluZyBhZGRzIGFuDQogICAgLy8gZXZlbnQgdG8gZG9uZSBhbmQgY2xlYXJz
			IHVuZG8uIFVuZG9pbmcgbW92ZXMgZXZlbnRzIGZyb20gZG9uZQ0KICAgIC8vIHRvIHVuZG9uZSwg
			cmVkb2luZyBtb3ZlcyB0aGVtIGluIHRoZSBvdGhlciBkaXJlY3Rpb24uDQogICAgdGhpcy5kb25l
			ID0gW107IHRoaXMudW5kb25lID0gW107DQogICAgdGhpcy51bmRvRGVwdGggPSBJbmZpbml0eTsN
			CiAgICAvLyBVc2VkIHRvIHRyYWNrIHdoZW4gY2hhbmdlcyBjYW4gYmUgbWVyZ2VkIGludG8gYSBz
			aW5nbGUgdW5kbw0KICAgIC8vIGV2ZW50DQogICAgdGhpcy5sYXN0TW9kVGltZSA9IHRoaXMubGFz
			dFNlbFRpbWUgPSAwOw0KICAgIHRoaXMubGFzdE9wID0gdGhpcy5sYXN0U2VsT3AgPSBudWxsOw0K
			ICAgIHRoaXMubGFzdE9yaWdpbiA9IHRoaXMubGFzdFNlbE9yaWdpbiA9IG51bGw7DQogICAgLy8g
			VXNlZCBieSB0aGUgaXNDbGVhbigpIG1ldGhvZA0KICAgIHRoaXMuZ2VuZXJhdGlvbiA9IHRoaXMu
			bWF4R2VuZXJhdGlvbiA9IHN0YXJ0R2VuIHx8IDE7DQogIH0NCg0KICAvLyBDcmVhdGUgYSBoaXN0
			b3J5IGNoYW5nZSBldmVudCBmcm9tIGFuIHVwZGF0ZURvYy1zdHlsZSBjaGFuZ2UNCiAgLy8gb2Jq
			ZWN0Lg0KICBmdW5jdGlvbiBoaXN0b3J5Q2hhbmdlRnJvbUNoYW5nZShkb2MsIGNoYW5nZSkgew0K
			ICAgIHZhciBoaXN0Q2hhbmdlID0ge2Zyb206IGNvcHlQb3MoY2hhbmdlLmZyb20pLCB0bzogY2hh
			bmdlRW5kKGNoYW5nZSksIHRleHQ6IGdldEJldHdlZW4oZG9jLCBjaGFuZ2UuZnJvbSwgY2hhbmdl
			LnRvKX07DQogICAgYXR0YWNoTG9jYWxTcGFucyhkb2MsIGhpc3RDaGFuZ2UsIGNoYW5nZS5mcm9t
			LmxpbmUsIGNoYW5nZS50by5saW5lICsgMSk7DQogICAgbGlua2VkRG9jcyhkb2MsIGZ1bmN0aW9u
			IChkb2MpIHsgcmV0dXJuIGF0dGFjaExvY2FsU3BhbnMoZG9jLCBoaXN0Q2hhbmdlLCBjaGFuZ2Uu
			ZnJvbS5saW5lLCBjaGFuZ2UudG8ubGluZSArIDEpOyB9LCB0cnVlKTsNCiAgICByZXR1cm4gaGlz
			dENoYW5nZQ0KICB9DQoNCiAgLy8gUG9wIGFsbCBzZWxlY3Rpb24gZXZlbnRzIG9mZiB0aGUgZW5k
			IG9mIGEgaGlzdG9yeSBhcnJheS4gU3RvcCBhdA0KICAvLyBhIGNoYW5nZSBldmVudC4NCiAgZnVu
			Y3Rpb24gY2xlYXJTZWxlY3Rpb25FdmVudHMoYXJyYXkpIHsNCiAgICB3aGlsZSAoYXJyYXkubGVu
			Z3RoKSB7DQogICAgICB2YXIgbGFzdCA9IGxzdChhcnJheSk7DQogICAgICBpZiAobGFzdC5yYW5n
			ZXMpIHsgYXJyYXkucG9wKCk7IH0NCiAgICAgIGVsc2UgeyBicmVhayB9DQogICAgfQ0KICB9DQoN
			CiAgLy8gRmluZCB0aGUgdG9wIGNoYW5nZSBldmVudCBpbiB0aGUgaGlzdG9yeS4gUG9wIG9mZiBz
			ZWxlY3Rpb24NCiAgLy8gZXZlbnRzIHRoYXQgYXJlIGluIHRoZSB3YXkuDQogIGZ1bmN0aW9uIGxh
			c3RDaGFuZ2VFdmVudChoaXN0LCBmb3JjZSkgew0KICAgIGlmIChmb3JjZSkgew0KICAgICAgY2xl
			YXJTZWxlY3Rpb25FdmVudHMoaGlzdC5kb25lKTsNCiAgICAgIHJldHVybiBsc3QoaGlzdC5kb25l
			KQ0KICAgIH0gZWxzZSBpZiAoaGlzdC5kb25lLmxlbmd0aCAmJiAhbHN0KGhpc3QuZG9uZSkucmFu
			Z2VzKSB7DQogICAgICByZXR1cm4gbHN0KGhpc3QuZG9uZSkNCiAgICB9IGVsc2UgaWYgKGhpc3Qu
			ZG9uZS5sZW5ndGggPiAxICYmICFoaXN0LmRvbmVbaGlzdC5kb25lLmxlbmd0aCAtIDJdLnJhbmdl
			cykgew0KICAgICAgaGlzdC5kb25lLnBvcCgpOw0KICAgICAgcmV0dXJuIGxzdChoaXN0LmRvbmUp
			DQogICAgfQ0KICB9DQoNCiAgLy8gUmVnaXN0ZXIgYSBjaGFuZ2UgaW4gdGhlIGhpc3RvcnkuIE1l
			cmdlcyBjaGFuZ2VzIHRoYXQgYXJlIHdpdGhpbg0KICAvLyBhIHNpbmdsZSBvcGVyYXRpb24sIG9y
			IGFyZSBjbG9zZSB0b2dldGhlciB3aXRoIGFuIG9yaWdpbiB0aGF0DQogIC8vIGFsbG93cyBtZXJn
			aW5nIChzdGFydGluZyB3aXRoICIrIikgaW50byBhIHNpbmdsZSBldmVudC4NCiAgZnVuY3Rpb24g
			YWRkQ2hhbmdlVG9IaXN0b3J5KGRvYywgY2hhbmdlLCBzZWxBZnRlciwgb3BJZCkgew0KICAgIHZh
			ciBoaXN0ID0gZG9jLmhpc3Rvcnk7DQogICAgaGlzdC51bmRvbmUubGVuZ3RoID0gMDsNCiAgICB2
			YXIgdGltZSA9ICtuZXcgRGF0ZSwgY3VyOw0KICAgIHZhciBsYXN0Ow0KDQogICAgaWYgKChoaXN0
			Lmxhc3RPcCA9PSBvcElkIHx8DQogICAgICAgICBoaXN0Lmxhc3RPcmlnaW4gPT0gY2hhbmdlLm9y
			aWdpbiAmJiBjaGFuZ2Uub3JpZ2luICYmDQogICAgICAgICAoKGNoYW5nZS5vcmlnaW4uY2hhckF0
			KDApID09ICIrIiAmJiBoaXN0Lmxhc3RNb2RUaW1lID4gdGltZSAtIChkb2MuY20gPyBkb2MuY20u
			b3B0aW9ucy5oaXN0b3J5RXZlbnREZWxheSA6IDUwMCkpIHx8DQogICAgICAgICAgY2hhbmdlLm9y
			aWdpbi5jaGFyQXQoMCkgPT0gIioiKSkgJiYNCiAgICAgICAgKGN1ciA9IGxhc3RDaGFuZ2VFdmVu
			dChoaXN0LCBoaXN0Lmxhc3RPcCA9PSBvcElkKSkpIHsNCiAgICAgIC8vIE1lcmdlIHRoaXMgY2hh
			bmdlIGludG8gdGhlIGxhc3QgZXZlbnQNCiAgICAgIGxhc3QgPSBsc3QoY3VyLmNoYW5nZXMpOw0K
			ICAgICAgaWYgKGNtcChjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKSA9PSAwICYmIGNtcChjaGFuZ2Uu
			ZnJvbSwgbGFzdC50bykgPT0gMCkgew0KICAgICAgICAvLyBPcHRpbWl6ZWQgY2FzZSBmb3Igc2lt
			cGxlIGluc2VydGlvbiAtLSBkb24ndCB3YW50IHRvIGFkZA0KICAgICAgICAvLyBuZXcgY2hhbmdl
			c2V0cyBmb3IgZXZlcnkgY2hhcmFjdGVyIHR5cGVkDQogICAgICAgIGxhc3QudG8gPSBjaGFuZ2VF
			bmQoY2hhbmdlKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8vIEFkZCBuZXcgc3ViLWV2ZW50
			DQogICAgICAgIGN1ci5jaGFuZ2VzLnB1c2goaGlzdG9yeUNoYW5nZUZyb21DaGFuZ2UoZG9jLCBj
			aGFuZ2UpKTsNCiAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgLy8gQ2FuIG5vdCBiZSBtZXJn
			ZWQsIHN0YXJ0IGEgbmV3IGV2ZW50Lg0KICAgICAgdmFyIGJlZm9yZSA9IGxzdChoaXN0LmRvbmUp
			Ow0KICAgICAgaWYgKCFiZWZvcmUgfHwgIWJlZm9yZS5yYW5nZXMpDQogICAgICAgIHsgcHVzaFNl
			bGVjdGlvblRvSGlzdG9yeShkb2Muc2VsLCBoaXN0LmRvbmUpOyB9DQogICAgICBjdXIgPSB7Y2hh
			bmdlczogW2hpc3RvcnlDaGFuZ2VGcm9tQ2hhbmdlKGRvYywgY2hhbmdlKV0sDQogICAgICAgICAg
			ICAgZ2VuZXJhdGlvbjogaGlzdC5nZW5lcmF0aW9ufTsNCiAgICAgIGhpc3QuZG9uZS5wdXNoKGN1
			cik7DQogICAgICB3aGlsZSAoaGlzdC5kb25lLmxlbmd0aCA+IGhpc3QudW5kb0RlcHRoKSB7DQog
			ICAgICAgIGhpc3QuZG9uZS5zaGlmdCgpOw0KICAgICAgICBpZiAoIWhpc3QuZG9uZVswXS5yYW5n
			ZXMpIHsgaGlzdC5kb25lLnNoaWZ0KCk7IH0NCiAgICAgIH0NCiAgICB9DQogICAgaGlzdC5kb25l
			LnB1c2goc2VsQWZ0ZXIpOw0KICAgIGhpc3QuZ2VuZXJhdGlvbiA9ICsraGlzdC5tYXhHZW5lcmF0
			aW9uOw0KICAgIGhpc3QubGFzdE1vZFRpbWUgPSBoaXN0Lmxhc3RTZWxUaW1lID0gdGltZTsNCiAg
			ICBoaXN0Lmxhc3RPcCA9IGhpc3QubGFzdFNlbE9wID0gb3BJZDsNCiAgICBoaXN0Lmxhc3RPcmln
			aW4gPSBoaXN0Lmxhc3RTZWxPcmlnaW4gPSBjaGFuZ2Uub3JpZ2luOw0KDQogICAgaWYgKCFsYXN0
			KSB7IHNpZ25hbChkb2MsICJoaXN0b3J5QWRkZWQiKTsgfQ0KICB9DQoNCiAgZnVuY3Rpb24gc2Vs
			ZWN0aW9uRXZlbnRDYW5CZU1lcmdlZChkb2MsIG9yaWdpbiwgcHJldiwgc2VsKSB7DQogICAgdmFy
			IGNoID0gb3JpZ2luLmNoYXJBdCgwKTsNCiAgICByZXR1cm4gY2ggPT0gIioiIHx8DQogICAgICBj
			aCA9PSAiKyIgJiYNCiAgICAgIHByZXYucmFuZ2VzLmxlbmd0aCA9PSBzZWwucmFuZ2VzLmxlbmd0
			aCAmJg0KICAgICAgcHJldi5zb21ldGhpbmdTZWxlY3RlZCgpID09IHNlbC5zb21ldGhpbmdTZWxl
			Y3RlZCgpICYmDQogICAgICBuZXcgRGF0ZSAtIGRvYy5oaXN0b3J5Lmxhc3RTZWxUaW1lIDw9IChk
			b2MuY20gPyBkb2MuY20ub3B0aW9ucy5oaXN0b3J5RXZlbnREZWxheSA6IDUwMCkNCiAgfQ0KDQog
			IC8vIENhbGxlZCB3aGVuZXZlciB0aGUgc2VsZWN0aW9uIGNoYW5nZXMsIHNldHMgdGhlIG5ldyBz
			ZWxlY3Rpb24gYXMNCiAgLy8gdGhlIHBlbmRpbmcgc2VsZWN0aW9uIGluIHRoZSBoaXN0b3J5LCBh
			bmQgcHVzaGVzIHRoZSBvbGQgcGVuZGluZw0KICAvLyBzZWxlY3Rpb24gaW50byB0aGUgJ2RvbmUn
			IGFycmF5IHdoZW4gaXQgd2FzIHNpZ25pZmljYW50bHkNCiAgLy8gZGlmZmVyZW50IChpbiBudW1i
			ZXIgb2Ygc2VsZWN0ZWQgcmFuZ2VzLCBlbXB0aW5lc3MsIG9yIHRpbWUpLg0KICBmdW5jdGlvbiBh
			ZGRTZWxlY3Rpb25Ub0hpc3RvcnkoZG9jLCBzZWwsIG9wSWQsIG9wdGlvbnMpIHsNCiAgICB2YXIg
			aGlzdCA9IGRvYy5oaXN0b3J5LCBvcmlnaW4gPSBvcHRpb25zICYmIG9wdGlvbnMub3JpZ2luOw0K
			DQogICAgLy8gQSBuZXcgZXZlbnQgaXMgc3RhcnRlZCB3aGVuIHRoZSBwcmV2aW91cyBvcmlnaW4g
			ZG9lcyBub3QgbWF0Y2gNCiAgICAvLyB0aGUgY3VycmVudCwgb3IgdGhlIG9yaWdpbnMgZG9uJ3Qg
			YWxsb3cgbWF0Y2hpbmcuIE9yaWdpbnMNCiAgICAvLyBzdGFydGluZyB3aXRoICogYXJlIGFsd2F5
			cyBtZXJnZWQsIHRob3NlIHN0YXJ0aW5nIHdpdGggKyBhcmUNCiAgICAvLyBtZXJnZWQgd2hlbiBz
			aW1pbGFyIGFuZCBjbG9zZSB0b2dldGhlciBpbiB0aW1lLg0KICAgIGlmIChvcElkID09IGhpc3Qu
			bGFzdFNlbE9wIHx8DQogICAgICAgIChvcmlnaW4gJiYgaGlzdC5sYXN0U2VsT3JpZ2luID09IG9y
			aWdpbiAmJg0KICAgICAgICAgKGhpc3QubGFzdE1vZFRpbWUgPT0gaGlzdC5sYXN0U2VsVGltZSAm
			JiBoaXN0Lmxhc3RPcmlnaW4gPT0gb3JpZ2luIHx8DQogICAgICAgICAgc2VsZWN0aW9uRXZlbnRD
			YW5CZU1lcmdlZChkb2MsIG9yaWdpbiwgbHN0KGhpc3QuZG9uZSksIHNlbCkpKSkNCiAgICAgIHsg
			aGlzdC5kb25lW2hpc3QuZG9uZS5sZW5ndGggLSAxXSA9IHNlbDsgfQ0KICAgIGVsc2UNCiAgICAg
			IHsgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShzZWwsIGhpc3QuZG9uZSk7IH0NCg0KICAgIGhpc3Qu
			bGFzdFNlbFRpbWUgPSArbmV3IERhdGU7DQogICAgaGlzdC5sYXN0U2VsT3JpZ2luID0gb3JpZ2lu
			Ow0KICAgIGhpc3QubGFzdFNlbE9wID0gb3BJZDsNCiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25z
			LmNsZWFyUmVkbyAhPT0gZmFsc2UpDQogICAgICB7IGNsZWFyU2VsZWN0aW9uRXZlbnRzKGhpc3Qu
			dW5kb25lKTsgfQ0KICB9DQoNCiAgZnVuY3Rpb24gcHVzaFNlbGVjdGlvblRvSGlzdG9yeShzZWws
			IGRlc3QpIHsNCiAgICB2YXIgdG9wID0gbHN0KGRlc3QpOw0KICAgIGlmICghKHRvcCAmJiB0b3Au
			cmFuZ2VzICYmIHRvcC5lcXVhbHMoc2VsKSkpDQogICAgICB7IGRlc3QucHVzaChzZWwpOyB9DQog
			IH0NCg0KICAvLyBVc2VkIHRvIHN0b3JlIG1hcmtlZCBzcGFuIGluZm9ybWF0aW9uIGluIHRoZSBo
			aXN0b3J5Lg0KICBmdW5jdGlvbiBhdHRhY2hMb2NhbFNwYW5zKGRvYywgY2hhbmdlLCBmcm9tLCB0
			bykgew0KICAgIHZhciBleGlzdGluZyA9IGNoYW5nZVsic3BhbnNfIiArIGRvYy5pZF0sIG4gPSAw
			Ow0KICAgIGRvYy5pdGVyKE1hdGgubWF4KGRvYy5maXJzdCwgZnJvbSksIE1hdGgubWluKGRvYy5m
			aXJzdCArIGRvYy5zaXplLCB0byksIGZ1bmN0aW9uIChsaW5lKSB7DQogICAgICBpZiAobGluZS5t
			YXJrZWRTcGFucykNCiAgICAgICAgeyAoZXhpc3RpbmcgfHwgKGV4aXN0aW5nID0gY2hhbmdlWyJz
			cGFuc18iICsgZG9jLmlkXSA9IHt9KSlbbl0gPSBsaW5lLm1hcmtlZFNwYW5zOyB9DQogICAgICAr
			K247DQogICAgfSk7DQogIH0NCg0KICAvLyBXaGVuIHVuL3JlLWRvaW5nIHJlc3RvcmVzIHRleHQg
			Y29udGFpbmluZyBtYXJrZWQgc3BhbnMsIHRob3NlDQogIC8vIHRoYXQgaGF2ZSBiZWVuIGV4cGxp
			Y2l0bHkgY2xlYXJlZCBzaG91bGQgbm90IGJlIHJlc3RvcmVkLg0KICBmdW5jdGlvbiByZW1vdmVD
			bGVhcmVkU3BhbnMoc3BhbnMpIHsNCiAgICBpZiAoIXNwYW5zKSB7IHJldHVybiBudWxsIH0NCiAg
			ICB2YXIgb3V0Ow0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyArK2kpIHsN
			CiAgICAgIGlmIChzcGFuc1tpXS5tYXJrZXIuZXhwbGljaXRseUNsZWFyZWQpIHsgaWYgKCFvdXQp
			IHsgb3V0ID0gc3BhbnMuc2xpY2UoMCwgaSk7IH0gfQ0KICAgICAgZWxzZSBpZiAob3V0KSB7IG91
			dC5wdXNoKHNwYW5zW2ldKTsgfQ0KICAgIH0NCiAgICByZXR1cm4gIW91dCA/IHNwYW5zIDogb3V0
			Lmxlbmd0aCA/IG91dCA6IG51bGwNCiAgfQ0KDQogIC8vIFJldHJpZXZlIGFuZCBmaWx0ZXIgdGhl
			IG9sZCBtYXJrZWQgc3BhbnMgc3RvcmVkIGluIGEgY2hhbmdlIGV2ZW50Lg0KICBmdW5jdGlvbiBn
			ZXRPbGRTcGFucyhkb2MsIGNoYW5nZSkgew0KICAgIHZhciBmb3VuZCA9IGNoYW5nZVsic3BhbnNf
			IiArIGRvYy5pZF07DQogICAgaWYgKCFmb3VuZCkgeyByZXR1cm4gbnVsbCB9DQogICAgdmFyIG53
			ID0gW107DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFuZ2UudGV4dC5sZW5ndGg7ICsraSkN
			CiAgICAgIHsgbncucHVzaChyZW1vdmVDbGVhcmVkU3BhbnMoZm91bmRbaV0pKTsgfQ0KICAgIHJl
			dHVybiBudw0KICB9DQoNCiAgLy8gVXNlZCBmb3IgdW4vcmUtZG9pbmcgY2hhbmdlcyBmcm9tIHRo
			ZSBoaXN0b3J5LiBDb21iaW5lcyB0aGUNCiAgLy8gcmVzdWx0IG9mIGNvbXB1dGluZyB0aGUgZXhp
			c3Rpbmcgc3BhbnMgd2l0aCB0aGUgc2V0IG9mIHNwYW5zIHRoYXQNCiAgLy8gZXhpc3RlZCBpbiB0
			aGUgaGlzdG9yeSAoc28gdGhhdCBkZWxldGluZyBhcm91bmQgYSBzcGFuIGFuZCB0aGVuDQogIC8v
			IHVuZG9pbmcgYnJpbmdzIGJhY2sgdGhlIHNwYW4pLg0KICBmdW5jdGlvbiBtZXJnZU9sZFNwYW5z
			KGRvYywgY2hhbmdlKSB7DQogICAgdmFyIG9sZCA9IGdldE9sZFNwYW5zKGRvYywgY2hhbmdlKTsN
			CiAgICB2YXIgc3RyZXRjaGVkID0gc3RyZXRjaFNwYW5zT3ZlckNoYW5nZShkb2MsIGNoYW5nZSk7
			DQogICAgaWYgKCFvbGQpIHsgcmV0dXJuIHN0cmV0Y2hlZCB9DQogICAgaWYgKCFzdHJldGNoZWQp
			IHsgcmV0dXJuIG9sZCB9DQoNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9sZC5sZW5ndGg7ICsr
			aSkgew0KICAgICAgdmFyIG9sZEN1ciA9IG9sZFtpXSwgc3RyZXRjaEN1ciA9IHN0cmV0Y2hlZFtp
			XTsNCiAgICAgIGlmIChvbGRDdXIgJiYgc3RyZXRjaEN1cikgew0KICAgICAgICBzcGFuczogZm9y
			ICh2YXIgaiA9IDA7IGogPCBzdHJldGNoQ3VyLmxlbmd0aDsgKytqKSB7DQogICAgICAgICAgdmFy
			IHNwYW4gPSBzdHJldGNoQ3VyW2pdOw0KICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb2xk
			Q3VyLmxlbmd0aDsgKytrKQ0KICAgICAgICAgICAgeyBpZiAob2xkQ3VyW2tdLm1hcmtlciA9PSBz
			cGFuLm1hcmtlcikgeyBjb250aW51ZSBzcGFucyB9IH0NCiAgICAgICAgICBvbGRDdXIucHVzaChz
			cGFuKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmIChzdHJldGNoQ3VyKSB7DQogICAgICAg
			IG9sZFtpXSA9IHN0cmV0Y2hDdXI7DQogICAgICB9DQogICAgfQ0KICAgIHJldHVybiBvbGQNCiAg
			fQ0KDQogIC8vIFVzZWQgYm90aCB0byBwcm92aWRlIGEgSlNPTi1zYWZlIG9iamVjdCBpbiAuZ2V0
			SGlzdG9yeSwgYW5kLCB3aGVuDQogIC8vIGRldGFjaGluZyBhIGRvY3VtZW50LCB0byBzcGxpdCB0
			aGUgaGlzdG9yeSBpbiB0d28NCiAgZnVuY3Rpb24gY29weUhpc3RvcnlBcnJheShldmVudHMsIG5l
			d0dyb3VwLCBpbnN0YW50aWF0ZVNlbCkgew0KICAgIHZhciBjb3B5ID0gW107DQogICAgZm9yICh2
			YXIgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyArK2kpIHsNCiAgICAgIHZhciBldmVudCA9IGV2
			ZW50c1tpXTsNCiAgICAgIGlmIChldmVudC5yYW5nZXMpIHsNCiAgICAgICAgY29weS5wdXNoKGlu
			c3RhbnRpYXRlU2VsID8gU2VsZWN0aW9uLnByb3RvdHlwZS5kZWVwQ29weS5jYWxsKGV2ZW50KSA6
			IGV2ZW50KTsNCiAgICAgICAgY29udGludWUNCiAgICAgIH0NCiAgICAgIHZhciBjaGFuZ2VzID0g
			ZXZlbnQuY2hhbmdlcywgbmV3Q2hhbmdlcyA9IFtdOw0KICAgICAgY29weS5wdXNoKHtjaGFuZ2Vz
			OiBuZXdDaGFuZ2VzfSk7DQogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoYW5nZXMubGVuZ3Ro
			OyArK2opIHsNCiAgICAgICAgdmFyIGNoYW5nZSA9IGNoYW5nZXNbal0sIG0gPSAodm9pZCAwKTsN
			CiAgICAgICAgbmV3Q2hhbmdlcy5wdXNoKHtmcm9tOiBjaGFuZ2UuZnJvbSwgdG86IGNoYW5nZS50
			bywgdGV4dDogY2hhbmdlLnRleHR9KTsNCiAgICAgICAgaWYgKG5ld0dyb3VwKSB7IGZvciAodmFy
			IHByb3AgaW4gY2hhbmdlKSB7IGlmIChtID0gcHJvcC5tYXRjaCgvXnNwYW5zXyhcZCspJC8pKSB7
			DQogICAgICAgICAgaWYgKGluZGV4T2YobmV3R3JvdXAsIE51bWJlcihtWzFdKSkgPiAtMSkgew0K
			ICAgICAgICAgICAgbHN0KG5ld0NoYW5nZXMpW3Byb3BdID0gY2hhbmdlW3Byb3BdOw0KICAgICAg
			ICAgICAgZGVsZXRlIGNoYW5nZVtwcm9wXTsNCiAgICAgICAgICB9DQogICAgICAgIH0gfSB9DQog
			ICAgICB9DQogICAgfQ0KICAgIHJldHVybiBjb3B5DQogIH0NCg0KICAvLyBUaGUgJ3Njcm9sbCcg
			cGFyYW1ldGVyIGdpdmVuIHRvIG1hbnkgb2YgdGhlc2UgaW5kaWNhdGVkIHdoZXRoZXINCiAgLy8g
			dGhlIG5ldyBjdXJzb3IgcG9zaXRpb24gc2hvdWxkIGJlIHNjcm9sbGVkIGludG8gdmlldyBhZnRl
			cg0KICAvLyBtb2RpZnlpbmcgdGhlIHNlbGVjdGlvbi4NCg0KICAvLyBJZiBzaGlmdCBpcyBoZWxk
			IG9yIHRoZSBleHRlbmQgZmxhZyBpcyBzZXQsIGV4dGVuZHMgYSByYW5nZSB0bw0KICAvLyBpbmNs
			dWRlIGEgZ2l2ZW4gcG9zaXRpb24gKGFuZCBvcHRpb25hbGx5IGEgc2Vjb25kIHBvc2l0aW9uKS4N
			CiAgLy8gT3RoZXJ3aXNlLCBzaW1wbHkgcmV0dXJucyB0aGUgcmFuZ2UgYmV0d2VlbiB0aGUgZ2l2
			ZW4gcG9zaXRpb25zLg0KICAvLyBVc2VkIGZvciBjdXJzb3IgbW90aW9uIGFuZCBzdWNoLg0KICBm
			dW5jdGlvbiBleHRlbmRSYW5nZShyYW5nZSwgaGVhZCwgb3RoZXIsIGV4dGVuZCkgew0KICAgIGlm
			IChleHRlbmQpIHsNCiAgICAgIHZhciBhbmNob3IgPSByYW5nZS5hbmNob3I7DQogICAgICBpZiAo
			b3RoZXIpIHsNCiAgICAgICAgdmFyIHBvc0JlZm9yZSA9IGNtcChoZWFkLCBhbmNob3IpIDwgMDsN
			CiAgICAgICAgaWYgKHBvc0JlZm9yZSAhPSAoY21wKG90aGVyLCBhbmNob3IpIDwgMCkpIHsNCiAg
			ICAgICAgICBhbmNob3IgPSBoZWFkOw0KICAgICAgICAgIGhlYWQgPSBvdGhlcjsNCiAgICAgICAg
			fSBlbHNlIGlmIChwb3NCZWZvcmUgIT0gKGNtcChoZWFkLCBvdGhlcikgPCAwKSkgew0KICAgICAg
			ICAgIGhlYWQgPSBvdGhlcjsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIG5ldyBS
			YW5nZShhbmNob3IsIGhlYWQpDQogICAgfSBlbHNlIHsNCiAgICAgIHJldHVybiBuZXcgUmFuZ2Uo
			b3RoZXIgfHwgaGVhZCwgaGVhZCkNCiAgICB9DQogIH0NCg0KICAvLyBFeHRlbmQgdGhlIHByaW1h
			cnkgc2VsZWN0aW9uIHJhbmdlLCBkaXNjYXJkIHRoZSByZXN0Lg0KICBmdW5jdGlvbiBleHRlbmRT
			ZWxlY3Rpb24oZG9jLCBoZWFkLCBvdGhlciwgb3B0aW9ucywgZXh0ZW5kKSB7DQogICAgaWYgKGV4
			dGVuZCA9PSBudWxsKSB7IGV4dGVuZCA9IGRvYy5jbSAmJiAoZG9jLmNtLmRpc3BsYXkuc2hpZnQg
			fHwgZG9jLmV4dGVuZCk7IH0NCiAgICBzZXRTZWxlY3Rpb24oZG9jLCBuZXcgU2VsZWN0aW9uKFtl
			eHRlbmRSYW5nZShkb2Muc2VsLnByaW1hcnkoKSwgaGVhZCwgb3RoZXIsIGV4dGVuZCldLCAwKSwg
			b3B0aW9ucyk7DQogIH0NCg0KICAvLyBFeHRlbmQgYWxsIHNlbGVjdGlvbnMgKHBvcyBpcyBhbiBh
			cnJheSBvZiBzZWxlY3Rpb25zIHdpdGggbGVuZ3RoDQogIC8vIGVxdWFsIHRoZSBudW1iZXIgb2Yg
			c2VsZWN0aW9ucykNCiAgZnVuY3Rpb24gZXh0ZW5kU2VsZWN0aW9ucyhkb2MsIGhlYWRzLCBvcHRp
			b25zKSB7DQogICAgdmFyIG91dCA9IFtdOw0KICAgIHZhciBleHRlbmQgPSBkb2MuY20gJiYgKGRv
			Yy5jbS5kaXNwbGF5LnNoaWZ0IHx8IGRvYy5leHRlbmQpOw0KICAgIGZvciAodmFyIGkgPSAwOyBp
			IDwgZG9jLnNlbC5yYW5nZXMubGVuZ3RoOyBpKyspDQogICAgICB7IG91dFtpXSA9IGV4dGVuZFJh
			bmdlKGRvYy5zZWwucmFuZ2VzW2ldLCBoZWFkc1tpXSwgbnVsbCwgZXh0ZW5kKTsgfQ0KICAgIHZh
			ciBuZXdTZWwgPSBub3JtYWxpemVTZWxlY3Rpb24oZG9jLmNtLCBvdXQsIGRvYy5zZWwucHJpbUlu
			ZGV4KTsNCiAgICBzZXRTZWxlY3Rpb24oZG9jLCBuZXdTZWwsIG9wdGlvbnMpOw0KICB9DQoNCiAg
			Ly8gVXBkYXRlcyBhIHNpbmdsZSByYW5nZSBpbiB0aGUgc2VsZWN0aW9uLg0KICBmdW5jdGlvbiBy
			ZXBsYWNlT25lU2VsZWN0aW9uKGRvYywgaSwgcmFuZ2UsIG9wdGlvbnMpIHsNCiAgICB2YXIgcmFu
			Z2VzID0gZG9jLnNlbC5yYW5nZXMuc2xpY2UoMCk7DQogICAgcmFuZ2VzW2ldID0gcmFuZ2U7DQog
			ICAgc2V0U2VsZWN0aW9uKGRvYywgbm9ybWFsaXplU2VsZWN0aW9uKGRvYy5jbSwgcmFuZ2VzLCBk
			b2Muc2VsLnByaW1JbmRleCksIG9wdGlvbnMpOw0KICB9DQoNCiAgLy8gUmVzZXQgdGhlIHNlbGVj
			dGlvbiB0byBhIHNpbmdsZSByYW5nZS4NCiAgZnVuY3Rpb24gc2V0U2ltcGxlU2VsZWN0aW9uKGRv
			YywgYW5jaG9yLCBoZWFkLCBvcHRpb25zKSB7DQogICAgc2V0U2VsZWN0aW9uKGRvYywgc2ltcGxl
			U2VsZWN0aW9uKGFuY2hvciwgaGVhZCksIG9wdGlvbnMpOw0KICB9DQoNCiAgLy8gR2l2ZSBiZWZv
			cmVTZWxlY3Rpb25DaGFuZ2UgaGFuZGxlcnMgYSBjaGFuZ2UgdG8gaW5mbHVlbmNlIGENCiAgLy8g
			c2VsZWN0aW9uIHVwZGF0ZS4NCiAgZnVuY3Rpb24gZmlsdGVyU2VsZWN0aW9uQ2hhbmdlKGRvYywg
			c2VsLCBvcHRpb25zKSB7DQogICAgdmFyIG9iaiA9IHsNCiAgICAgIHJhbmdlczogc2VsLnJhbmdl
			cywNCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24ocmFuZ2VzKSB7DQogICAgICAgIHZhciB0aGlzJDEg
			PSB0aGlzOw0KDQogICAgICAgIHRoaXMucmFuZ2VzID0gW107DQogICAgICAgIGZvciAodmFyIGkg
			PSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKQ0KICAgICAgICAgIHsgdGhpcyQxLnJhbmdlc1tp
			XSA9IG5ldyBSYW5nZShjbGlwUG9zKGRvYywgcmFuZ2VzW2ldLmFuY2hvciksDQogICAgICAgICAg
			ICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcFBvcyhkb2MsIHJhbmdlc1tpXS5oZWFkKSk7
			IH0NCiAgICAgIH0sDQogICAgICBvcmlnaW46IG9wdGlvbnMgJiYgb3B0aW9ucy5vcmlnaW4NCiAg
			ICB9Ow0KICAgIHNpZ25hbChkb2MsICJiZWZvcmVTZWxlY3Rpb25DaGFuZ2UiLCBkb2MsIG9iaik7
			DQogICAgaWYgKGRvYy5jbSkgeyBzaWduYWwoZG9jLmNtLCAiYmVmb3JlU2VsZWN0aW9uQ2hhbmdl
			IiwgZG9jLmNtLCBvYmopOyB9DQogICAgaWYgKG9iai5yYW5nZXMgIT0gc2VsLnJhbmdlcykgeyBy
			ZXR1cm4gbm9ybWFsaXplU2VsZWN0aW9uKGRvYy5jbSwgb2JqLnJhbmdlcywgb2JqLnJhbmdlcy5s
			ZW5ndGggLSAxKSB9DQogICAgZWxzZSB7IHJldHVybiBzZWwgfQ0KICB9DQoNCiAgZnVuY3Rpb24g
			c2V0U2VsZWN0aW9uUmVwbGFjZUhpc3RvcnkoZG9jLCBzZWwsIG9wdGlvbnMpIHsNCiAgICB2YXIg
			ZG9uZSA9IGRvYy5oaXN0b3J5LmRvbmUsIGxhc3QgPSBsc3QoZG9uZSk7DQogICAgaWYgKGxhc3Qg
			JiYgbGFzdC5yYW5nZXMpIHsNCiAgICAgIGRvbmVbZG9uZS5sZW5ndGggLSAxXSA9IHNlbDsNCiAg
			ICAgIHNldFNlbGVjdGlvbk5vVW5kbyhkb2MsIHNlbCwgb3B0aW9ucyk7DQogICAgfSBlbHNlIHsN
			CiAgICAgIHNldFNlbGVjdGlvbihkb2MsIHNlbCwgb3B0aW9ucyk7DQogICAgfQ0KICB9DQoNCiAg
			Ly8gU2V0IGEgbmV3IHNlbGVjdGlvbi4NCiAgZnVuY3Rpb24gc2V0U2VsZWN0aW9uKGRvYywgc2Vs
			LCBvcHRpb25zKSB7DQogICAgc2V0U2VsZWN0aW9uTm9VbmRvKGRvYywgc2VsLCBvcHRpb25zKTsN
			CiAgICBhZGRTZWxlY3Rpb25Ub0hpc3RvcnkoZG9jLCBkb2Muc2VsLCBkb2MuY20gPyBkb2MuY20u
			Y3VyT3AuaWQgOiBOYU4sIG9wdGlvbnMpOw0KICB9DQoNCiAgZnVuY3Rpb24gc2V0U2VsZWN0aW9u
			Tm9VbmRvKGRvYywgc2VsLCBvcHRpb25zKSB7DQogICAgaWYgKGhhc0hhbmRsZXIoZG9jLCAiYmVm
			b3JlU2VsZWN0aW9uQ2hhbmdlIikgfHwgZG9jLmNtICYmIGhhc0hhbmRsZXIoZG9jLmNtLCAiYmVm
			b3JlU2VsZWN0aW9uQ2hhbmdlIikpDQogICAgICB7IHNlbCA9IGZpbHRlclNlbGVjdGlvbkNoYW5n
			ZShkb2MsIHNlbCwgb3B0aW9ucyk7IH0NCg0KICAgIHZhciBiaWFzID0gb3B0aW9ucyAmJiBvcHRp
			b25zLmJpYXMgfHwNCiAgICAgIChjbXAoc2VsLnByaW1hcnkoKS5oZWFkLCBkb2Muc2VsLnByaW1h
			cnkoKS5oZWFkKSA8IDAgPyAtMSA6IDEpOw0KICAgIHNldFNlbGVjdGlvbklubmVyKGRvYywgc2tp
			cEF0b21pY0luU2VsZWN0aW9uKGRvYywgc2VsLCBiaWFzLCB0cnVlKSk7DQoNCiAgICBpZiAoIShv
			cHRpb25zICYmIG9wdGlvbnMuc2Nyb2xsID09PSBmYWxzZSkgJiYgZG9jLmNtKQ0KICAgICAgeyBl
			bnN1cmVDdXJzb3JWaXNpYmxlKGRvYy5jbSk7IH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHNldFNlbGVj
			dGlvbklubmVyKGRvYywgc2VsKSB7DQogICAgaWYgKHNlbC5lcXVhbHMoZG9jLnNlbCkpIHsgcmV0
			dXJuIH0NCg0KICAgIGRvYy5zZWwgPSBzZWw7DQoNCiAgICBpZiAoZG9jLmNtKSB7DQogICAgICBk
			b2MuY20uY3VyT3AudXBkYXRlSW5wdXQgPSAxOw0KICAgICAgZG9jLmNtLmN1ck9wLnNlbGVjdGlv
			bkNoYW5nZWQgPSB0cnVlOw0KICAgICAgc2lnbmFsQ3Vyc29yQWN0aXZpdHkoZG9jLmNtKTsNCiAg
			ICB9DQogICAgc2lnbmFsTGF0ZXIoZG9jLCAiY3Vyc29yQWN0aXZpdHkiLCBkb2MpOw0KICB9DQoN
			CiAgLy8gVmVyaWZ5IHRoYXQgdGhlIHNlbGVjdGlvbiBkb2VzIG5vdCBwYXJ0aWFsbHkgc2VsZWN0
			IGFueSBhdG9taWMNCiAgLy8gbWFya2VkIHJhbmdlcy4NCiAgZnVuY3Rpb24gcmVDaGVja1NlbGVj
			dGlvbihkb2MpIHsNCiAgICBzZXRTZWxlY3Rpb25Jbm5lcihkb2MsIHNraXBBdG9taWNJblNlbGVj
			dGlvbihkb2MsIGRvYy5zZWwsIG51bGwsIGZhbHNlKSk7DQogIH0NCg0KICAvLyBSZXR1cm4gYSBz
			ZWxlY3Rpb24gdGhhdCBkb2VzIG5vdCBwYXJ0aWFsbHkgc2VsZWN0IGFueSBhdG9taWMNCiAgLy8g
			cmFuZ2VzLg0KICBmdW5jdGlvbiBza2lwQXRvbWljSW5TZWxlY3Rpb24oZG9jLCBzZWwsIGJpYXMs
			IG1heUNsZWFyKSB7DQogICAgdmFyIG91dDsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbC5y
			YW5nZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgIHZhciByYW5nZSA9IHNlbC5yYW5nZXNbaV07DQog
			ICAgICB2YXIgb2xkID0gc2VsLnJhbmdlcy5sZW5ndGggPT0gZG9jLnNlbC5yYW5nZXMubGVuZ3Ro
			ICYmIGRvYy5zZWwucmFuZ2VzW2ldOw0KICAgICAgdmFyIG5ld0FuY2hvciA9IHNraXBBdG9taWMo
			ZG9jLCByYW5nZS5hbmNob3IsIG9sZCAmJiBvbGQuYW5jaG9yLCBiaWFzLCBtYXlDbGVhcik7DQog
			ICAgICB2YXIgbmV3SGVhZCA9IHNraXBBdG9taWMoZG9jLCByYW5nZS5oZWFkLCBvbGQgJiYgb2xk
			LmhlYWQsIGJpYXMsIG1heUNsZWFyKTsNCiAgICAgIGlmIChvdXQgfHwgbmV3QW5jaG9yICE9IHJh
			bmdlLmFuY2hvciB8fCBuZXdIZWFkICE9IHJhbmdlLmhlYWQpIHsNCiAgICAgICAgaWYgKCFvdXQp
			IHsgb3V0ID0gc2VsLnJhbmdlcy5zbGljZSgwLCBpKTsgfQ0KICAgICAgICBvdXRbaV0gPSBuZXcg
			UmFuZ2UobmV3QW5jaG9yLCBuZXdIZWFkKTsNCiAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIG91
			dCA/IG5vcm1hbGl6ZVNlbGVjdGlvbihkb2MuY20sIG91dCwgc2VsLnByaW1JbmRleCkgOiBzZWwN
			CiAgfQ0KDQogIGZ1bmN0aW9uIHNraXBBdG9taWNJbm5lcihkb2MsIHBvcywgb2xkUG9zLCBkaXIs
			IG1heUNsZWFyKSB7DQogICAgdmFyIGxpbmUgPSBnZXRMaW5lKGRvYywgcG9zLmxpbmUpOw0KICAg
			IGlmIChsaW5lLm1hcmtlZFNwYW5zKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgbGluZS5tYXJrZWRT
			cGFucy5sZW5ndGg7ICsraSkgew0KICAgICAgdmFyIHNwID0gbGluZS5tYXJrZWRTcGFuc1tpXSwg
			bSA9IHNwLm1hcmtlcjsNCg0KICAgICAgLy8gRGV0ZXJtaW5lIGlmIHdlIHNob3VsZCBwcmV2ZW50
			IHRoZSBjdXJzb3IgYmVpbmcgcGxhY2VkIHRvIHRoZSBsZWZ0L3JpZ2h0IG9mIGFuIGF0b21pYyBt
			YXJrZXINCiAgICAgIC8vIEhpc3RvcmljYWxseSB0aGlzIHdhcyBkZXRlcm1pbmVkIHVzaW5nIHRo
			ZSBpbmNsdXNpdmVMZWZ0L1JpZ2h0IG9wdGlvbiwgYnV0IHRoZSBuZXcgd2F5IHRvIGNvbnRyb2wg
			aXQNCiAgICAgIC8vIGlzIHdpdGggc2VsZWN0TGVmdC9SaWdodA0KICAgICAgdmFyIHByZXZlbnRD
			dXJzb3JMZWZ0ID0gKCJzZWxlY3RMZWZ0IiBpbiBtKSA/ICFtLnNlbGVjdExlZnQgOiBtLmluY2x1
			c2l2ZUxlZnQ7DQogICAgICB2YXIgcHJldmVudEN1cnNvclJpZ2h0ID0gKCJzZWxlY3RSaWdodCIg
			aW4gbSkgPyAhbS5zZWxlY3RSaWdodCA6IG0uaW5jbHVzaXZlUmlnaHQ7DQoNCiAgICAgIGlmICgo
			c3AuZnJvbSA9PSBudWxsIHx8IChwcmV2ZW50Q3Vyc29yTGVmdCA/IHNwLmZyb20gPD0gcG9zLmNo
			IDogc3AuZnJvbSA8IHBvcy5jaCkpICYmDQogICAgICAgICAgKHNwLnRvID09IG51bGwgfHwgKHBy
			ZXZlbnRDdXJzb3JSaWdodCA/IHNwLnRvID49IHBvcy5jaCA6IHNwLnRvID4gcG9zLmNoKSkpIHsN
			CiAgICAgICAgaWYgKG1heUNsZWFyKSB7DQogICAgICAgICAgc2lnbmFsKG0sICJiZWZvcmVDdXJz
			b3JFbnRlciIpOw0KICAgICAgICAgIGlmIChtLmV4cGxpY2l0bHlDbGVhcmVkKSB7DQogICAgICAg
			ICAgICBpZiAoIWxpbmUubWFya2VkU3BhbnMpIHsgYnJlYWsgfQ0KICAgICAgICAgICAgZWxzZSB7
			LS1pOyBjb250aW51ZX0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFtLmF0
			b21pYykgeyBjb250aW51ZSB9DQoNCiAgICAgICAgaWYgKG9sZFBvcykgew0KICAgICAgICAgIHZh
			ciBuZWFyID0gbS5maW5kKGRpciA8IDAgPyAxIDogLTEpLCBkaWZmID0gKHZvaWQgMCk7DQogICAg
			ICAgICAgaWYgKGRpciA8IDAgPyBwcmV2ZW50Q3Vyc29yUmlnaHQgOiBwcmV2ZW50Q3Vyc29yTGVm
			dCkNCiAgICAgICAgICAgIHsgbmVhciA9IG1vdmVQb3MoZG9jLCBuZWFyLCAtZGlyLCBuZWFyICYm
			IG5lYXIubGluZSA9PSBwb3MubGluZSA/IGxpbmUgOiBudWxsKTsgfQ0KICAgICAgICAgIGlmIChu
			ZWFyICYmIG5lYXIubGluZSA9PSBwb3MubGluZSAmJiAoZGlmZiA9IGNtcChuZWFyLCBvbGRQb3Mp
			KSAmJiAoZGlyIDwgMCA/IGRpZmYgPCAwIDogZGlmZiA+IDApKQ0KICAgICAgICAgICAgeyByZXR1
			cm4gc2tpcEF0b21pY0lubmVyKGRvYywgbmVhciwgcG9zLCBkaXIsIG1heUNsZWFyKSB9DQogICAg
			ICAgIH0NCg0KICAgICAgICB2YXIgZmFyID0gbS5maW5kKGRpciA8IDAgPyAtMSA6IDEpOw0KICAg
			ICAgICBpZiAoZGlyIDwgMCA/IHByZXZlbnRDdXJzb3JMZWZ0IDogcHJldmVudEN1cnNvclJpZ2h0
			KQ0KICAgICAgICAgIHsgZmFyID0gbW92ZVBvcyhkb2MsIGZhciwgZGlyLCBmYXIubGluZSA9PSBw
			b3MubGluZSA/IGxpbmUgOiBudWxsKTsgfQ0KICAgICAgICByZXR1cm4gZmFyID8gc2tpcEF0b21p
			Y0lubmVyKGRvYywgZmFyLCBwb3MsIGRpciwgbWF5Q2xlYXIpIDogbnVsbA0KICAgICAgfQ0KICAg
			IH0gfQ0KICAgIHJldHVybiBwb3MNCiAgfQ0KDQogIC8vIEVuc3VyZSBhIGdpdmVuIHBvc2l0aW9u
			IGlzIG5vdCBpbnNpZGUgYW4gYXRvbWljIHJhbmdlLg0KICBmdW5jdGlvbiBza2lwQXRvbWljKGRv
			YywgcG9zLCBvbGRQb3MsIGJpYXMsIG1heUNsZWFyKSB7DQogICAgdmFyIGRpciA9IGJpYXMgfHwg
			MTsNCiAgICB2YXIgZm91bmQgPSBza2lwQXRvbWljSW5uZXIoZG9jLCBwb3MsIG9sZFBvcywgZGly
			LCBtYXlDbGVhcikgfHwNCiAgICAgICAgKCFtYXlDbGVhciAmJiBza2lwQXRvbWljSW5uZXIoZG9j
			LCBwb3MsIG9sZFBvcywgZGlyLCB0cnVlKSkgfHwNCiAgICAgICAgc2tpcEF0b21pY0lubmVyKGRv
			YywgcG9zLCBvbGRQb3MsIC1kaXIsIG1heUNsZWFyKSB8fA0KICAgICAgICAoIW1heUNsZWFyICYm
			IHNraXBBdG9taWNJbm5lcihkb2MsIHBvcywgb2xkUG9zLCAtZGlyLCB0cnVlKSk7DQogICAgaWYg
			KCFmb3VuZCkgew0KICAgICAgZG9jLmNhbnRFZGl0ID0gdHJ1ZTsNCiAgICAgIHJldHVybiBQb3Mo
			ZG9jLmZpcnN0LCAwKQ0KICAgIH0NCiAgICByZXR1cm4gZm91bmQNCiAgfQ0KDQogIGZ1bmN0aW9u
			IG1vdmVQb3MoZG9jLCBwb3MsIGRpciwgbGluZSkgew0KICAgIGlmIChkaXIgPCAwICYmIHBvcy5j
			aCA9PSAwKSB7DQogICAgICBpZiAocG9zLmxpbmUgPiBkb2MuZmlyc3QpIHsgcmV0dXJuIGNsaXBQ
			b3MoZG9jLCBQb3MocG9zLmxpbmUgLSAxKSkgfQ0KICAgICAgZWxzZSB7IHJldHVybiBudWxsIH0N
			CiAgICB9IGVsc2UgaWYgKGRpciA+IDAgJiYgcG9zLmNoID09IChsaW5lIHx8IGdldExpbmUoZG9j
			LCBwb3MubGluZSkpLnRleHQubGVuZ3RoKSB7DQogICAgICBpZiAocG9zLmxpbmUgPCBkb2MuZmly
			c3QgKyBkb2Muc2l6ZSAtIDEpIHsgcmV0dXJuIFBvcyhwb3MubGluZSArIDEsIDApIH0NCiAgICAg
			IGVsc2UgeyByZXR1cm4gbnVsbCB9DQogICAgfSBlbHNlIHsNCiAgICAgIHJldHVybiBuZXcgUG9z
			KHBvcy5saW5lLCBwb3MuY2ggKyBkaXIpDQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gc2VsZWN0
			QWxsKGNtKSB7DQogICAgY20uc2V0U2VsZWN0aW9uKFBvcyhjbS5maXJzdExpbmUoKSwgMCksIFBv
			cyhjbS5sYXN0TGluZSgpKSwgc2VsX2RvbnRTY3JvbGwpOw0KICB9DQoNCiAgLy8gVVBEQVRJTkcN
			Cg0KICAvLyBBbGxvdyAiYmVmb3JlQ2hhbmdlIiBldmVudCBoYW5kbGVycyB0byBpbmZsdWVuY2Ug
			YSBjaGFuZ2UNCiAgZnVuY3Rpb24gZmlsdGVyQ2hhbmdlKGRvYywgY2hhbmdlLCB1cGRhdGUpIHsN
			CiAgICB2YXIgb2JqID0gew0KICAgICAgY2FuY2VsZWQ6IGZhbHNlLA0KICAgICAgZnJvbTogY2hh
			bmdlLmZyb20sDQogICAgICB0bzogY2hhbmdlLnRvLA0KICAgICAgdGV4dDogY2hhbmdlLnRleHQs
			DQogICAgICBvcmlnaW46IGNoYW5nZS5vcmlnaW4sDQogICAgICBjYW5jZWw6IGZ1bmN0aW9uICgp
			IHsgcmV0dXJuIG9iai5jYW5jZWxlZCA9IHRydWU7IH0NCiAgICB9Ow0KICAgIGlmICh1cGRhdGUp
			IHsgb2JqLnVwZGF0ZSA9IGZ1bmN0aW9uIChmcm9tLCB0bywgdGV4dCwgb3JpZ2luKSB7DQogICAg
			ICBpZiAoZnJvbSkgeyBvYmouZnJvbSA9IGNsaXBQb3MoZG9jLCBmcm9tKTsgfQ0KICAgICAgaWYg
			KHRvKSB7IG9iai50byA9IGNsaXBQb3MoZG9jLCB0byk7IH0NCiAgICAgIGlmICh0ZXh0KSB7IG9i
			ai50ZXh0ID0gdGV4dDsgfQ0KICAgICAgaWYgKG9yaWdpbiAhPT0gdW5kZWZpbmVkKSB7IG9iai5v
			cmlnaW4gPSBvcmlnaW47IH0NCiAgICB9OyB9DQogICAgc2lnbmFsKGRvYywgImJlZm9yZUNoYW5n
			ZSIsIGRvYywgb2JqKTsNCiAgICBpZiAoZG9jLmNtKSB7IHNpZ25hbChkb2MuY20sICJiZWZvcmVD
			aGFuZ2UiLCBkb2MuY20sIG9iaik7IH0NCg0KICAgIGlmIChvYmouY2FuY2VsZWQpIHsNCiAgICAg
			IGlmIChkb2MuY20pIHsgZG9jLmNtLmN1ck9wLnVwZGF0ZUlucHV0ID0gMjsgfQ0KICAgICAgcmV0
			dXJuIG51bGwNCiAgICB9DQogICAgcmV0dXJuIHtmcm9tOiBvYmouZnJvbSwgdG86IG9iai50bywg
			dGV4dDogb2JqLnRleHQsIG9yaWdpbjogb2JqLm9yaWdpbn0NCiAgfQ0KDQogIC8vIEFwcGx5IGEg
			Y2hhbmdlIHRvIGEgZG9jdW1lbnQsIGFuZCBhZGQgaXQgdG8gdGhlIGRvY3VtZW50J3MNCiAgLy8g
			aGlzdG9yeSwgYW5kIHByb3BhZ2F0aW5nIGl0IHRvIGFsbCBsaW5rZWQgZG9jdW1lbnRzLg0KICBm
			dW5jdGlvbiBtYWtlQ2hhbmdlKGRvYywgY2hhbmdlLCBpZ25vcmVSZWFkT25seSkgew0KICAgIGlm
			IChkb2MuY20pIHsNCiAgICAgIGlmICghZG9jLmNtLmN1ck9wKSB7IHJldHVybiBvcGVyYXRpb24o
			ZG9jLmNtLCBtYWtlQ2hhbmdlKShkb2MsIGNoYW5nZSwgaWdub3JlUmVhZE9ubHkpIH0NCiAgICAg
			IGlmIChkb2MuY20uc3RhdGUuc3VwcHJlc3NFZGl0cykgeyByZXR1cm4gfQ0KICAgIH0NCg0KICAg
			IGlmIChoYXNIYW5kbGVyKGRvYywgImJlZm9yZUNoYW5nZSIpIHx8IGRvYy5jbSAmJiBoYXNIYW5k
			bGVyKGRvYy5jbSwgImJlZm9yZUNoYW5nZSIpKSB7DQogICAgICBjaGFuZ2UgPSBmaWx0ZXJDaGFu
			Z2UoZG9jLCBjaGFuZ2UsIHRydWUpOw0KICAgICAgaWYgKCFjaGFuZ2UpIHsgcmV0dXJuIH0NCiAg
			ICB9DQoNCiAgICAvLyBQb3NzaWJseSBzcGxpdCBvciBzdXBwcmVzcyB0aGUgdXBkYXRlIGJhc2Vk
			IG9uIHRoZSBwcmVzZW5jZQ0KICAgIC8vIG9mIHJlYWQtb25seSBzcGFucyBpbiBpdHMgcmFuZ2Uu
			DQogICAgdmFyIHNwbGl0ID0gc2F3UmVhZE9ubHlTcGFucyAmJiAhaWdub3JlUmVhZE9ubHkgJiYg
			cmVtb3ZlUmVhZE9ubHlSYW5nZXMoZG9jLCBjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKTsNCiAgICBp
			ZiAoc3BsaXQpIHsNCiAgICAgIGZvciAodmFyIGkgPSBzcGxpdC5sZW5ndGggLSAxOyBpID49IDA7
			IC0taSkNCiAgICAgICAgeyBtYWtlQ2hhbmdlSW5uZXIoZG9jLCB7ZnJvbTogc3BsaXRbaV0uZnJv
			bSwgdG86IHNwbGl0W2ldLnRvLCB0ZXh0OiBpID8gWyIiXSA6IGNoYW5nZS50ZXh0LCBvcmlnaW46
			IGNoYW5nZS5vcmlnaW59KTsgfQ0KICAgIH0gZWxzZSB7DQogICAgICBtYWtlQ2hhbmdlSW5uZXIo
			ZG9jLCBjaGFuZ2UpOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIG1ha2VDaGFuZ2VJbm5lcihk
			b2MsIGNoYW5nZSkgew0KICAgIGlmIChjaGFuZ2UudGV4dC5sZW5ndGggPT0gMSAmJiBjaGFuZ2Uu
			dGV4dFswXSA9PSAiIiAmJiBjbXAoY2hhbmdlLmZyb20sIGNoYW5nZS50bykgPT0gMCkgeyByZXR1
			cm4gfQ0KICAgIHZhciBzZWxBZnRlciA9IGNvbXB1dGVTZWxBZnRlckNoYW5nZShkb2MsIGNoYW5n
			ZSk7DQogICAgYWRkQ2hhbmdlVG9IaXN0b3J5KGRvYywgY2hhbmdlLCBzZWxBZnRlciwgZG9jLmNt
			ID8gZG9jLmNtLmN1ck9wLmlkIDogTmFOKTsNCg0KICAgIG1ha2VDaGFuZ2VTaW5nbGVEb2MoZG9j
			LCBjaGFuZ2UsIHNlbEFmdGVyLCBzdHJldGNoU3BhbnNPdmVyQ2hhbmdlKGRvYywgY2hhbmdlKSk7
			DQogICAgdmFyIHJlYmFzZWQgPSBbXTsNCg0KICAgIGxpbmtlZERvY3MoZG9jLCBmdW5jdGlvbiAo
			ZG9jLCBzaGFyZWRIaXN0KSB7DQogICAgICBpZiAoIXNoYXJlZEhpc3QgJiYgaW5kZXhPZihyZWJh
			c2VkLCBkb2MuaGlzdG9yeSkgPT0gLTEpIHsNCiAgICAgICAgcmViYXNlSGlzdChkb2MuaGlzdG9y
			eSwgY2hhbmdlKTsNCiAgICAgICAgcmViYXNlZC5wdXNoKGRvYy5oaXN0b3J5KTsNCiAgICAgIH0N
			CiAgICAgIG1ha2VDaGFuZ2VTaW5nbGVEb2MoZG9jLCBjaGFuZ2UsIG51bGwsIHN0cmV0Y2hTcGFu
			c092ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpKTsNCiAgICB9KTsNCiAgfQ0KDQogIC8vIFJldmVydCBh
			IGNoYW5nZSBzdG9yZWQgaW4gYSBkb2N1bWVudCdzIGhpc3RvcnkuDQogIGZ1bmN0aW9uIG1ha2VD
			aGFuZ2VGcm9tSGlzdG9yeShkb2MsIHR5cGUsIGFsbG93U2VsZWN0aW9uT25seSkgew0KICAgIHZh
			ciBzdXBwcmVzcyA9IGRvYy5jbSAmJiBkb2MuY20uc3RhdGUuc3VwcHJlc3NFZGl0czsNCiAgICBp
			ZiAoc3VwcHJlc3MgJiYgIWFsbG93U2VsZWN0aW9uT25seSkgeyByZXR1cm4gfQ0KDQogICAgdmFy
			IGhpc3QgPSBkb2MuaGlzdG9yeSwgZXZlbnQsIHNlbEFmdGVyID0gZG9jLnNlbDsNCiAgICB2YXIg
			c291cmNlID0gdHlwZSA9PSAidW5kbyIgPyBoaXN0LmRvbmUgOiBoaXN0LnVuZG9uZSwgZGVzdCA9
			IHR5cGUgPT0gInVuZG8iID8gaGlzdC51bmRvbmUgOiBoaXN0LmRvbmU7DQoNCiAgICAvLyBWZXJp
			ZnkgdGhhdCB0aGVyZSBpcyBhIHVzZWFibGUgZXZlbnQgKHNvIHRoYXQgY3RybC16IHdvbid0DQog
			ICAgLy8gbmVlZGxlc3NseSBjbGVhciBzZWxlY3Rpb24gZXZlbnRzKQ0KICAgIHZhciBpID0gMDsN
			CiAgICBmb3IgKDsgaSA8IHNvdXJjZS5sZW5ndGg7IGkrKykgew0KICAgICAgZXZlbnQgPSBzb3Vy
			Y2VbaV07DQogICAgICBpZiAoYWxsb3dTZWxlY3Rpb25Pbmx5ID8gZXZlbnQucmFuZ2VzICYmICFl
			dmVudC5lcXVhbHMoZG9jLnNlbCkgOiAhZXZlbnQucmFuZ2VzKQ0KICAgICAgICB7IGJyZWFrIH0N
			CiAgICB9DQogICAgaWYgKGkgPT0gc291cmNlLmxlbmd0aCkgeyByZXR1cm4gfQ0KICAgIGhpc3Qu
			bGFzdE9yaWdpbiA9IGhpc3QubGFzdFNlbE9yaWdpbiA9IG51bGw7DQoNCiAgICBmb3IgKDs7KSB7
			DQogICAgICBldmVudCA9IHNvdXJjZS5wb3AoKTsNCiAgICAgIGlmIChldmVudC5yYW5nZXMpIHsN
			CiAgICAgICAgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShldmVudCwgZGVzdCk7DQogICAgICAgIGlm
			IChhbGxvd1NlbGVjdGlvbk9ubHkgJiYgIWV2ZW50LmVxdWFscyhkb2Muc2VsKSkgew0KICAgICAg
			ICAgIHNldFNlbGVjdGlvbihkb2MsIGV2ZW50LCB7Y2xlYXJSZWRvOiBmYWxzZX0pOw0KICAgICAg
			ICAgIHJldHVybg0KICAgICAgICB9DQogICAgICAgIHNlbEFmdGVyID0gZXZlbnQ7DQogICAgICB9
			IGVsc2UgaWYgKHN1cHByZXNzKSB7DQogICAgICAgIHNvdXJjZS5wdXNoKGV2ZW50KTsNCiAgICAg
			ICAgcmV0dXJuDQogICAgICB9IGVsc2UgeyBicmVhayB9DQogICAgfQ0KDQogICAgLy8gQnVpbGQg
			dXAgYSByZXZlcnNlIGNoYW5nZSBvYmplY3QgdG8gYWRkIHRvIHRoZSBvcHBvc2l0ZSBoaXN0b3J5
			DQogICAgLy8gc3RhY2sgKHJlZG8gd2hlbiB1bmRvaW5nLCBhbmQgdmljZSB2ZXJzYSkuDQogICAg
			dmFyIGFudGlDaGFuZ2VzID0gW107DQogICAgcHVzaFNlbGVjdGlvblRvSGlzdG9yeShzZWxBZnRl
			ciwgZGVzdCk7DQogICAgZGVzdC5wdXNoKHtjaGFuZ2VzOiBhbnRpQ2hhbmdlcywgZ2VuZXJhdGlv
			bjogaGlzdC5nZW5lcmF0aW9ufSk7DQogICAgaGlzdC5nZW5lcmF0aW9uID0gZXZlbnQuZ2VuZXJh
			dGlvbiB8fCArK2hpc3QubWF4R2VuZXJhdGlvbjsNCg0KICAgIHZhciBmaWx0ZXIgPSBoYXNIYW5k
			bGVyKGRvYywgImJlZm9yZUNoYW5nZSIpIHx8IGRvYy5jbSAmJiBoYXNIYW5kbGVyKGRvYy5jbSwg
			ImJlZm9yZUNoYW5nZSIpOw0KDQogICAgdmFyIGxvb3AgPSBmdW5jdGlvbiAoIGkgKSB7DQogICAg
			ICB2YXIgY2hhbmdlID0gZXZlbnQuY2hhbmdlc1tpXTsNCiAgICAgIGNoYW5nZS5vcmlnaW4gPSB0
			eXBlOw0KICAgICAgaWYgKGZpbHRlciAmJiAhZmlsdGVyQ2hhbmdlKGRvYywgY2hhbmdlLCBmYWxz
			ZSkpIHsNCiAgICAgICAgc291cmNlLmxlbmd0aCA9IDA7DQogICAgICAgIHJldHVybiB7fQ0KICAg
			ICAgfQ0KDQogICAgICBhbnRpQ2hhbmdlcy5wdXNoKGhpc3RvcnlDaGFuZ2VGcm9tQ2hhbmdlKGRv
			YywgY2hhbmdlKSk7DQoNCiAgICAgIHZhciBhZnRlciA9IGkgPyBjb21wdXRlU2VsQWZ0ZXJDaGFu
			Z2UoZG9jLCBjaGFuZ2UpIDogbHN0KHNvdXJjZSk7DQogICAgICBtYWtlQ2hhbmdlU2luZ2xlRG9j
			KGRvYywgY2hhbmdlLCBhZnRlciwgbWVyZ2VPbGRTcGFucyhkb2MsIGNoYW5nZSkpOw0KICAgICAg
			aWYgKCFpICYmIGRvYy5jbSkgeyBkb2MuY20uc2Nyb2xsSW50b1ZpZXcoe2Zyb206IGNoYW5nZS5m
			cm9tLCB0bzogY2hhbmdlRW5kKGNoYW5nZSl9KTsgfQ0KICAgICAgdmFyIHJlYmFzZWQgPSBbXTsN
			Cg0KICAgICAgLy8gUHJvcGFnYXRlIHRvIHRoZSBsaW5rZWQgZG9jdW1lbnRzDQogICAgICBsaW5r
			ZWREb2NzKGRvYywgZnVuY3Rpb24gKGRvYywgc2hhcmVkSGlzdCkgew0KICAgICAgICBpZiAoIXNo
			YXJlZEhpc3QgJiYgaW5kZXhPZihyZWJhc2VkLCBkb2MuaGlzdG9yeSkgPT0gLTEpIHsNCiAgICAg
			ICAgICByZWJhc2VIaXN0KGRvYy5oaXN0b3J5LCBjaGFuZ2UpOw0KICAgICAgICAgIHJlYmFzZWQu
			cHVzaChkb2MuaGlzdG9yeSk7DQogICAgICAgIH0NCiAgICAgICAgbWFrZUNoYW5nZVNpbmdsZURv
			Yyhkb2MsIGNoYW5nZSwgbnVsbCwgbWVyZ2VPbGRTcGFucyhkb2MsIGNoYW5nZSkpOw0KICAgICAg
			fSk7DQogICAgfTsNCg0KICAgIGZvciAodmFyIGkkMSA9IGV2ZW50LmNoYW5nZXMubGVuZ3RoIC0g
			MTsgaSQxID49IDA7IC0taSQxKSB7DQogICAgICB2YXIgcmV0dXJuZWQgPSBsb29wKCBpJDEgKTsN
			Cg0KICAgICAgaWYgKCByZXR1cm5lZCApIHJldHVybiByZXR1cm5lZC52Ow0KICAgIH0NCiAgfQ0K
			DQogIC8vIFN1Yi12aWV3cyBuZWVkIHRoZWlyIGxpbmUgbnVtYmVycyBzaGlmdGVkIHdoZW4gdGV4
			dCBpcyBhZGRlZA0KICAvLyBhYm92ZSBvciBiZWxvdyB0aGVtIGluIHRoZSBwYXJlbnQgZG9jdW1l
			bnQuDQogIGZ1bmN0aW9uIHNoaWZ0RG9jKGRvYywgZGlzdGFuY2UpIHsNCiAgICBpZiAoZGlzdGFu
			Y2UgPT0gMCkgeyByZXR1cm4gfQ0KICAgIGRvYy5maXJzdCArPSBkaXN0YW5jZTsNCiAgICBkb2Mu
			c2VsID0gbmV3IFNlbGVjdGlvbihtYXAoZG9jLnNlbC5yYW5nZXMsIGZ1bmN0aW9uIChyYW5nZSkg
			eyByZXR1cm4gbmV3IFJhbmdlKA0KICAgICAgUG9zKHJhbmdlLmFuY2hvci5saW5lICsgZGlzdGFu
			Y2UsIHJhbmdlLmFuY2hvci5jaCksDQogICAgICBQb3MocmFuZ2UuaGVhZC5saW5lICsgZGlzdGFu
			Y2UsIHJhbmdlLmhlYWQuY2gpDQogICAgKTsgfSksIGRvYy5zZWwucHJpbUluZGV4KTsNCiAgICBp
			ZiAoZG9jLmNtKSB7DQogICAgICByZWdDaGFuZ2UoZG9jLmNtLCBkb2MuZmlyc3QsIGRvYy5maXJz
			dCAtIGRpc3RhbmNlLCBkaXN0YW5jZSk7DQogICAgICBmb3IgKHZhciBkID0gZG9jLmNtLmRpc3Bs
			YXksIGwgPSBkLnZpZXdGcm9tOyBsIDwgZC52aWV3VG87IGwrKykNCiAgICAgICAgeyByZWdMaW5l
			Q2hhbmdlKGRvYy5jbSwgbCwgImd1dHRlciIpOyB9DQogICAgfQ0KICB9DQoNCiAgLy8gTW9yZSBs
			b3dlci1sZXZlbCBjaGFuZ2UgZnVuY3Rpb24sIGhhbmRsaW5nIG9ubHkgYSBzaW5nbGUgZG9jdW1l
			bnQNCiAgLy8gKG5vdCBsaW5rZWQgb25lcykuDQogIGZ1bmN0aW9uIG1ha2VDaGFuZ2VTaW5nbGVE
			b2MoZG9jLCBjaGFuZ2UsIHNlbEFmdGVyLCBzcGFucykgew0KICAgIGlmIChkb2MuY20gJiYgIWRv
			Yy5jbS5jdXJPcCkNCiAgICAgIHsgcmV0dXJuIG9wZXJhdGlvbihkb2MuY20sIG1ha2VDaGFuZ2VT
			aW5nbGVEb2MpKGRvYywgY2hhbmdlLCBzZWxBZnRlciwgc3BhbnMpIH0NCg0KICAgIGlmIChjaGFu
			Z2UudG8ubGluZSA8IGRvYy5maXJzdCkgew0KICAgICAgc2hpZnREb2MoZG9jLCBjaGFuZ2UudGV4
			dC5sZW5ndGggLSAxIC0gKGNoYW5nZS50by5saW5lIC0gY2hhbmdlLmZyb20ubGluZSkpOw0KICAg
			ICAgcmV0dXJuDQogICAgfQ0KICAgIGlmIChjaGFuZ2UuZnJvbS5saW5lID4gZG9jLmxhc3RMaW5l
			KCkpIHsgcmV0dXJuIH0NCg0KICAgIC8vIENsaXAgdGhlIGNoYW5nZSB0byB0aGUgc2l6ZSBvZiB0
			aGlzIGRvYw0KICAgIGlmIChjaGFuZ2UuZnJvbS5saW5lIDwgZG9jLmZpcnN0KSB7DQogICAgICB2
			YXIgc2hpZnQgPSBjaGFuZ2UudGV4dC5sZW5ndGggLSAxIC0gKGRvYy5maXJzdCAtIGNoYW5nZS5m
			cm9tLmxpbmUpOw0KICAgICAgc2hpZnREb2MoZG9jLCBzaGlmdCk7DQogICAgICBjaGFuZ2UgPSB7
			ZnJvbTogUG9zKGRvYy5maXJzdCwgMCksIHRvOiBQb3MoY2hhbmdlLnRvLmxpbmUgKyBzaGlmdCwg
			Y2hhbmdlLnRvLmNoKSwNCiAgICAgICAgICAgICAgICB0ZXh0OiBbbHN0KGNoYW5nZS50ZXh0KV0s
			IG9yaWdpbjogY2hhbmdlLm9yaWdpbn07DQogICAgfQ0KICAgIHZhciBsYXN0ID0gZG9jLmxhc3RM
			aW5lKCk7DQogICAgaWYgKGNoYW5nZS50by5saW5lID4gbGFzdCkgew0KICAgICAgY2hhbmdlID0g
			e2Zyb206IGNoYW5nZS5mcm9tLCB0bzogUG9zKGxhc3QsIGdldExpbmUoZG9jLCBsYXN0KS50ZXh0
			Lmxlbmd0aCksDQogICAgICAgICAgICAgICAgdGV4dDogW2NoYW5nZS50ZXh0WzBdXSwgb3JpZ2lu
			OiBjaGFuZ2Uub3JpZ2lufTsNCiAgICB9DQoNCiAgICBjaGFuZ2UucmVtb3ZlZCA9IGdldEJldHdl
			ZW4oZG9jLCBjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvKTsNCg0KICAgIGlmICghc2VsQWZ0ZXIpIHsg
			c2VsQWZ0ZXIgPSBjb21wdXRlU2VsQWZ0ZXJDaGFuZ2UoZG9jLCBjaGFuZ2UpOyB9DQogICAgaWYg
			KGRvYy5jbSkgeyBtYWtlQ2hhbmdlU2luZ2xlRG9jSW5FZGl0b3IoZG9jLmNtLCBjaGFuZ2UsIHNw
			YW5zKTsgfQ0KICAgIGVsc2UgeyB1cGRhdGVEb2MoZG9jLCBjaGFuZ2UsIHNwYW5zKTsgfQ0KICAg
			IHNldFNlbGVjdGlvbk5vVW5kbyhkb2MsIHNlbEFmdGVyLCBzZWxfZG9udFNjcm9sbCk7DQoNCiAg
			ICBpZiAoZG9jLmNhbnRFZGl0ICYmIHNraXBBdG9taWMoZG9jLCBQb3MoZG9jLmZpcnN0TGluZSgp
			LCAwKSkpDQogICAgICB7IGRvYy5jYW50RWRpdCA9IGZhbHNlOyB9DQogIH0NCg0KICAvLyBIYW5k
			bGUgdGhlIGludGVyYWN0aW9uIG9mIGEgY2hhbmdlIHRvIGEgZG9jdW1lbnQgd2l0aCB0aGUgZWRp
			dG9yDQogIC8vIHRoYXQgdGhpcyBkb2N1bWVudCBpcyBwYXJ0IG9mLg0KICBmdW5jdGlvbiBtYWtl
			Q2hhbmdlU2luZ2xlRG9jSW5FZGl0b3IoY20sIGNoYW5nZSwgc3BhbnMpIHsNCiAgICB2YXIgZG9j
			ID0gY20uZG9jLCBkaXNwbGF5ID0gY20uZGlzcGxheSwgZnJvbSA9IGNoYW5nZS5mcm9tLCB0byA9
			IGNoYW5nZS50bzsNCg0KICAgIHZhciByZWNvbXB1dGVNYXhMZW5ndGggPSBmYWxzZSwgY2hlY2tX
			aWR0aFN0YXJ0ID0gZnJvbS5saW5lOw0KICAgIGlmICghY20ub3B0aW9ucy5saW5lV3JhcHBpbmcp
			IHsNCiAgICAgIGNoZWNrV2lkdGhTdGFydCA9IGxpbmVObyh2aXN1YWxMaW5lKGdldExpbmUoZG9j
			LCBmcm9tLmxpbmUpKSk7DQogICAgICBkb2MuaXRlcihjaGVja1dpZHRoU3RhcnQsIHRvLmxpbmUg
			KyAxLCBmdW5jdGlvbiAobGluZSkgew0KICAgICAgICBpZiAobGluZSA9PSBkaXNwbGF5Lm1heExp
			bmUpIHsNCiAgICAgICAgICByZWNvbXB1dGVNYXhMZW5ndGggPSB0cnVlOw0KICAgICAgICAgIHJl
			dHVybiB0cnVlDQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIGlmIChkb2Muc2Vs
			LmNvbnRhaW5zKGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pID4gLTEpDQogICAgICB7IHNpZ25hbEN1
			cnNvckFjdGl2aXR5KGNtKTsgfQ0KDQogICAgdXBkYXRlRG9jKGRvYywgY2hhbmdlLCBzcGFucywg
			ZXN0aW1hdGVIZWlnaHQoY20pKTsNCg0KICAgIGlmICghY20ub3B0aW9ucy5saW5lV3JhcHBpbmcp
			IHsNCiAgICAgIGRvYy5pdGVyKGNoZWNrV2lkdGhTdGFydCwgZnJvbS5saW5lICsgY2hhbmdlLnRl
			eHQubGVuZ3RoLCBmdW5jdGlvbiAobGluZSkgew0KICAgICAgICB2YXIgbGVuID0gbGluZUxlbmd0
			aChsaW5lKTsNCiAgICAgICAgaWYgKGxlbiA+IGRpc3BsYXkubWF4TGluZUxlbmd0aCkgew0KICAg
			ICAgICAgIGRpc3BsYXkubWF4TGluZSA9IGxpbmU7DQogICAgICAgICAgZGlzcGxheS5tYXhMaW5l
			TGVuZ3RoID0gbGVuOw0KICAgICAgICAgIGRpc3BsYXkubWF4TGluZUNoYW5nZWQgPSB0cnVlOw0K
			ICAgICAgICAgIHJlY29tcHV0ZU1heExlbmd0aCA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICB9
			KTsNCiAgICAgIGlmIChyZWNvbXB1dGVNYXhMZW5ndGgpIHsgY20uY3VyT3AudXBkYXRlTWF4TGlu
			ZSA9IHRydWU7IH0NCiAgICB9DQoNCiAgICByZXRyZWF0RnJvbnRpZXIoZG9jLCBmcm9tLmxpbmUp
			Ow0KICAgIHN0YXJ0V29ya2VyKGNtLCA0MDApOw0KDQogICAgdmFyIGxlbmRpZmYgPSBjaGFuZ2Uu
			dGV4dC5sZW5ndGggLSAodG8ubGluZSAtIGZyb20ubGluZSkgLSAxOw0KICAgIC8vIFJlbWVtYmVy
			IHRoYXQgdGhlc2UgbGluZXMgY2hhbmdlZCwgZm9yIHVwZGF0aW5nIHRoZSBkaXNwbGF5DQogICAg
			aWYgKGNoYW5nZS5mdWxsKQ0KICAgICAgeyByZWdDaGFuZ2UoY20pOyB9DQogICAgZWxzZSBpZiAo
			ZnJvbS5saW5lID09IHRvLmxpbmUgJiYgY2hhbmdlLnRleHQubGVuZ3RoID09IDEgJiYgIWlzV2hv
			bGVMaW5lVXBkYXRlKGNtLmRvYywgY2hhbmdlKSkNCiAgICAgIHsgcmVnTGluZUNoYW5nZShjbSwg
			ZnJvbS5saW5lLCAidGV4dCIpOyB9DQogICAgZWxzZQ0KICAgICAgeyByZWdDaGFuZ2UoY20sIGZy
			b20ubGluZSwgdG8ubGluZSArIDEsIGxlbmRpZmYpOyB9DQoNCiAgICB2YXIgY2hhbmdlc0hhbmRs
			ZXIgPSBoYXNIYW5kbGVyKGNtLCAiY2hhbmdlcyIpLCBjaGFuZ2VIYW5kbGVyID0gaGFzSGFuZGxl
			cihjbSwgImNoYW5nZSIpOw0KICAgIGlmIChjaGFuZ2VIYW5kbGVyIHx8IGNoYW5nZXNIYW5kbGVy
			KSB7DQogICAgICB2YXIgb2JqID0gew0KICAgICAgICBmcm9tOiBmcm9tLCB0bzogdG8sDQogICAg
			ICAgIHRleHQ6IGNoYW5nZS50ZXh0LA0KICAgICAgICByZW1vdmVkOiBjaGFuZ2UucmVtb3ZlZCwN
			CiAgICAgICAgb3JpZ2luOiBjaGFuZ2Uub3JpZ2luDQogICAgICB9Ow0KICAgICAgaWYgKGNoYW5n
			ZUhhbmRsZXIpIHsgc2lnbmFsTGF0ZXIoY20sICJjaGFuZ2UiLCBjbSwgb2JqKTsgfQ0KICAgICAg
			aWYgKGNoYW5nZXNIYW5kbGVyKSB7IChjbS5jdXJPcC5jaGFuZ2VPYmpzIHx8IChjbS5jdXJPcC5j
			aGFuZ2VPYmpzID0gW10pKS5wdXNoKG9iaik7IH0NCiAgICB9DQogICAgY20uZGlzcGxheS5zZWxG
			b3JDb250ZXh0TWVudSA9IG51bGw7DQogIH0NCg0KICBmdW5jdGlvbiByZXBsYWNlUmFuZ2UoZG9j
			LCBjb2RlLCBmcm9tLCB0bywgb3JpZ2luKSB7DQogICAgdmFyIGFzc2lnbjsNCg0KICAgIGlmICgh
			dG8pIHsgdG8gPSBmcm9tOyB9DQogICAgaWYgKGNtcCh0bywgZnJvbSkgPCAwKSB7IChhc3NpZ24g
			PSBbdG8sIGZyb21dLCBmcm9tID0gYXNzaWduWzBdLCB0byA9IGFzc2lnblsxXSk7IH0NCiAgICBp
			ZiAodHlwZW9mIGNvZGUgPT0gInN0cmluZyIpIHsgY29kZSA9IGRvYy5zcGxpdExpbmVzKGNvZGUp
			OyB9DQogICAgbWFrZUNoYW5nZShkb2MsIHtmcm9tOiBmcm9tLCB0bzogdG8sIHRleHQ6IGNvZGUs
			IG9yaWdpbjogb3JpZ2lufSk7DQogIH0NCg0KICAvLyBSZWJhc2luZy9yZXNldHRpbmcgaGlzdG9y
			eSB0byBkZWFsIHdpdGggZXh0ZXJuYWxseS1zb3VyY2VkIGNoYW5nZXMNCg0KICBmdW5jdGlvbiBy
			ZWJhc2VIaXN0U2VsU2luZ2xlKHBvcywgZnJvbSwgdG8sIGRpZmYpIHsNCiAgICBpZiAodG8gPCBw
			b3MubGluZSkgew0KICAgICAgcG9zLmxpbmUgKz0gZGlmZjsNCiAgICB9IGVsc2UgaWYgKGZyb20g
			PCBwb3MubGluZSkgew0KICAgICAgcG9zLmxpbmUgPSBmcm9tOw0KICAgICAgcG9zLmNoID0gMDsN
			CiAgICB9DQogIH0NCg0KICAvLyBUcmllcyB0byByZWJhc2UgYW4gYXJyYXkgb2YgaGlzdG9yeSBl
			dmVudHMgZ2l2ZW4gYSBjaGFuZ2UgaW4gdGhlDQogIC8vIGRvY3VtZW50LiBJZiB0aGUgY2hhbmdl
			IHRvdWNoZXMgdGhlIHNhbWUgbGluZXMgYXMgdGhlIGV2ZW50LCB0aGUNCiAgLy8gZXZlbnQsIGFu
			ZCBldmVyeXRoaW5nICdiZWhpbmQnIGl0LCBpcyBkaXNjYXJkZWQuIElmIHRoZSBjaGFuZ2UgaXMN
			CiAgLy8gYmVmb3JlIHRoZSBldmVudCwgdGhlIGV2ZW50J3MgcG9zaXRpb25zIGFyZSB1cGRhdGVk
			LiBVc2VzIGENCiAgLy8gY29weS1vbi13cml0ZSBzY2hlbWUgZm9yIHRoZSBwb3NpdGlvbnMsIHRv
			IGF2b2lkIGhhdmluZyB0bw0KICAvLyByZWFsbG9jYXRlIHRoZW0gYWxsIG9uIGV2ZXJ5IHJlYmFz
			ZSwgYnV0IGFsc28gYXZvaWQgcHJvYmxlbXMgd2l0aA0KICAvLyBzaGFyZWQgcG9zaXRpb24gb2Jq
			ZWN0cyBiZWluZyB1bnNhZmVseSB1cGRhdGVkLg0KICBmdW5jdGlvbiByZWJhc2VIaXN0QXJyYXko
			YXJyYXksIGZyb20sIHRvLCBkaWZmKSB7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5s
			ZW5ndGg7ICsraSkgew0KICAgICAgdmFyIHN1YiA9IGFycmF5W2ldLCBvayA9IHRydWU7DQogICAg
			ICBpZiAoc3ViLnJhbmdlcykgew0KICAgICAgICBpZiAoIXN1Yi5jb3BpZWQpIHsgc3ViID0gYXJy
			YXlbaV0gPSBzdWIuZGVlcENvcHkoKTsgc3ViLmNvcGllZCA9IHRydWU7IH0NCiAgICAgICAgZm9y
			ICh2YXIgaiA9IDA7IGogPCBzdWIucmFuZ2VzLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgcmVi
			YXNlSGlzdFNlbFNpbmdsZShzdWIucmFuZ2VzW2pdLmFuY2hvciwgZnJvbSwgdG8sIGRpZmYpOw0K
			ICAgICAgICAgIHJlYmFzZUhpc3RTZWxTaW5nbGUoc3ViLnJhbmdlc1tqXS5oZWFkLCBmcm9tLCB0
			bywgZGlmZik7DQogICAgICAgIH0NCiAgICAgICAgY29udGludWUNCiAgICAgIH0NCiAgICAgIGZv
			ciAodmFyIGokMSA9IDA7IGokMSA8IHN1Yi5jaGFuZ2VzLmxlbmd0aDsgKytqJDEpIHsNCiAgICAg
			ICAgdmFyIGN1ciA9IHN1Yi5jaGFuZ2VzW2okMV07DQogICAgICAgIGlmICh0byA8IGN1ci5mcm9t
			LmxpbmUpIHsNCiAgICAgICAgICBjdXIuZnJvbSA9IFBvcyhjdXIuZnJvbS5saW5lICsgZGlmZiwg
			Y3VyLmZyb20uY2gpOw0KICAgICAgICAgIGN1ci50byA9IFBvcyhjdXIudG8ubGluZSArIGRpZmYs
			IGN1ci50by5jaCk7DQogICAgICAgIH0gZWxzZSBpZiAoZnJvbSA8PSBjdXIudG8ubGluZSkgew0K
			ICAgICAgICAgIG9rID0gZmFsc2U7DQogICAgICAgICAgYnJlYWsNCiAgICAgICAgfQ0KICAgICAg
			fQ0KICAgICAgaWYgKCFvaykgew0KICAgICAgICBhcnJheS5zcGxpY2UoMCwgaSArIDEpOw0KICAg
			ICAgICBpID0gMDsNCiAgICAgIH0NCiAgICB9DQogIH0NCg0KICBmdW5jdGlvbiByZWJhc2VIaXN0
			KGhpc3QsIGNoYW5nZSkgew0KICAgIHZhciBmcm9tID0gY2hhbmdlLmZyb20ubGluZSwgdG8gPSBj
			aGFuZ2UudG8ubGluZSwgZGlmZiA9IGNoYW5nZS50ZXh0Lmxlbmd0aCAtICh0byAtIGZyb20pIC0g
			MTsNCiAgICByZWJhc2VIaXN0QXJyYXkoaGlzdC5kb25lLCBmcm9tLCB0bywgZGlmZik7DQogICAg
			cmViYXNlSGlzdEFycmF5KGhpc3QudW5kb25lLCBmcm9tLCB0bywgZGlmZik7DQogIH0NCg0KICAv
			LyBVdGlsaXR5IGZvciBhcHBseWluZyBhIGNoYW5nZSB0byBhIGxpbmUgYnkgaGFuZGxlIG9yIG51
			bWJlciwNCiAgLy8gcmV0dXJuaW5nIHRoZSBudW1iZXIgYW5kIG9wdGlvbmFsbHkgcmVnaXN0ZXJp
			bmcgdGhlIGxpbmUgYXMNCiAgLy8gY2hhbmdlZC4NCiAgZnVuY3Rpb24gY2hhbmdlTGluZShkb2Ms
			IGhhbmRsZSwgY2hhbmdlVHlwZSwgb3ApIHsNCiAgICB2YXIgbm8gPSBoYW5kbGUsIGxpbmUgPSBo
			YW5kbGU7DQogICAgaWYgKHR5cGVvZiBoYW5kbGUgPT0gIm51bWJlciIpIHsgbGluZSA9IGdldExp
			bmUoZG9jLCBjbGlwTGluZShkb2MsIGhhbmRsZSkpOyB9DQogICAgZWxzZSB7IG5vID0gbGluZU5v
			KGhhbmRsZSk7IH0NCiAgICBpZiAobm8gPT0gbnVsbCkgeyByZXR1cm4gbnVsbCB9DQogICAgaWYg
			KG9wKGxpbmUsIG5vKSAmJiBkb2MuY20pIHsgcmVnTGluZUNoYW5nZShkb2MuY20sIG5vLCBjaGFu
			Z2VUeXBlKTsgfQ0KICAgIHJldHVybiBsaW5lDQogIH0NCg0KICAvLyBUaGUgZG9jdW1lbnQgaXMg
			cmVwcmVzZW50ZWQgYXMgYSBCVHJlZSBjb25zaXN0aW5nIG9mIGxlYXZlcywgd2l0aA0KICAvLyBj
			aHVuayBvZiBsaW5lcyBpbiB0aGVtLCBhbmQgYnJhbmNoZXMsIHdpdGggdXAgdG8gdGVuIGxlYXZl
			cyBvcg0KICAvLyBvdGhlciBicmFuY2ggbm9kZXMgYmVsb3cgdGhlbS4gVGhlIHRvcCBub2RlIGlz
			IGFsd2F5cyBhIGJyYW5jaA0KICAvLyBub2RlLCBhbmQgaXMgdGhlIGRvY3VtZW50IG9iamVjdCBp
			dHNlbGYgKG1lYW5pbmcgaXQgaGFzDQogIC8vIGFkZGl0aW9uYWwgbWV0aG9kcyBhbmQgcHJvcGVy
			dGllcykuDQogIC8vDQogIC8vIEFsbCBub2RlcyBoYXZlIHBhcmVudCBsaW5rcy4gVGhlIHRyZWUg
			aXMgdXNlZCBib3RoIHRvIGdvIGZyb20NCiAgLy8gbGluZSBudW1iZXJzIHRvIGxpbmUgb2JqZWN0
			cywgYW5kIHRvIGdvIGZyb20gb2JqZWN0cyB0byBudW1iZXJzLg0KICAvLyBJdCBhbHNvIGluZGV4
			ZXMgYnkgaGVpZ2h0LCBhbmQgaXMgdXNlZCB0byBjb252ZXJ0IGJldHdlZW4gaGVpZ2h0DQogIC8v
			IGFuZCBsaW5lIG9iamVjdCwgYW5kIHRvIGZpbmQgdGhlIHRvdGFsIGhlaWdodCBvZiB0aGUgZG9j
			dW1lbnQuDQogIC8vDQogIC8vIFNlZSBhbHNvIGh0dHA6Ly9tYXJpam5oYXZlcmJla2UubmwvYmxv
			Zy9jb2RlbWlycm9yLWxpbmUtdHJlZS5odG1sDQoNCiAgZnVuY3Rpb24gTGVhZkNodW5rKGxpbmVz
			KSB7DQogICAgdmFyIHRoaXMkMSA9IHRoaXM7DQoNCiAgICB0aGlzLmxpbmVzID0gbGluZXM7DQog
			ICAgdGhpcy5wYXJlbnQgPSBudWxsOw0KICAgIHZhciBoZWlnaHQgPSAwOw0KICAgIGZvciAodmFy
			IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyArK2kpIHsNCiAgICAgIGxpbmVzW2ldLnBhcmVudCA9
			IHRoaXMkMTsNCiAgICAgIGhlaWdodCArPSBsaW5lc1tpXS5oZWlnaHQ7DQogICAgfQ0KICAgIHRo
			aXMuaGVpZ2h0ID0gaGVpZ2h0Ow0KICB9DQoNCiAgTGVhZkNodW5rLnByb3RvdHlwZSA9IHsNCiAg
			ICBjaHVua1NpemU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5saW5lcy5sZW5ndGggfSwNCg0K
			ICAgIC8vIFJlbW92ZSB0aGUgbiBsaW5lcyBhdCBvZmZzZXQgJ2F0Jy4NCiAgICByZW1vdmVJbm5l
			cjogZnVuY3Rpb24oYXQsIG4pIHsNCiAgICAgIHZhciB0aGlzJDEgPSB0aGlzOw0KDQogICAgICBm
			b3IgKHZhciBpID0gYXQsIGUgPSBhdCArIG47IGkgPCBlOyArK2kpIHsNCiAgICAgICAgdmFyIGxp
			bmUgPSB0aGlzJDEubGluZXNbaV07DQogICAgICAgIHRoaXMkMS5oZWlnaHQgLT0gbGluZS5oZWln
			aHQ7DQogICAgICAgIGNsZWFuVXBMaW5lKGxpbmUpOw0KICAgICAgICBzaWduYWxMYXRlcihsaW5l
			LCAiZGVsZXRlIik7DQogICAgICB9DQogICAgICB0aGlzLmxpbmVzLnNwbGljZShhdCwgbik7DQog
			ICAgfSwNCg0KICAgIC8vIEhlbHBlciB1c2VkIHRvIGNvbGxhcHNlIGEgc21hbGwgYnJhbmNoIGlu
			dG8gYSBzaW5nbGUgbGVhZi4NCiAgICBjb2xsYXBzZTogZnVuY3Rpb24obGluZXMpIHsNCiAgICAg
			IGxpbmVzLnB1c2guYXBwbHkobGluZXMsIHRoaXMubGluZXMpOw0KICAgIH0sDQoNCiAgICAvLyBJ
			bnNlcnQgdGhlIGdpdmVuIGFycmF5IG9mIGxpbmVzIGF0IG9mZnNldCAnYXQnLCBjb3VudCB0aGVt
			IGFzDQogICAgLy8gaGF2aW5nIHRoZSBnaXZlbiBoZWlnaHQuDQogICAgaW5zZXJ0SW5uZXI6IGZ1
			bmN0aW9uKGF0LCBsaW5lcywgaGVpZ2h0KSB7DQogICAgICB2YXIgdGhpcyQxID0gdGhpczsNCg0K
			ICAgICAgdGhpcy5oZWlnaHQgKz0gaGVpZ2h0Ow0KICAgICAgdGhpcy5saW5lcyA9IHRoaXMubGlu
			ZXMuc2xpY2UoMCwgYXQpLmNvbmNhdChsaW5lcykuY29uY2F0KHRoaXMubGluZXMuc2xpY2UoYXQp
			KTsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyArK2kpIHsgbGluZXNb
			aV0ucGFyZW50ID0gdGhpcyQxOyB9DQogICAgfSwNCg0KICAgIC8vIFVzZWQgdG8gaXRlcmF0ZSBv
			dmVyIGEgcGFydCBvZiB0aGUgdHJlZS4NCiAgICBpdGVyTjogZnVuY3Rpb24oYXQsIG4sIG9wKSB7
			DQogICAgICB2YXIgdGhpcyQxID0gdGhpczsNCg0KICAgICAgZm9yICh2YXIgZSA9IGF0ICsgbjsg
			YXQgPCBlOyArK2F0KQ0KICAgICAgICB7IGlmIChvcCh0aGlzJDEubGluZXNbYXRdKSkgeyByZXR1
			cm4gdHJ1ZSB9IH0NCiAgICB9DQogIH07DQoNCiAgZnVuY3Rpb24gQnJhbmNoQ2h1bmsoY2hpbGRy
			ZW4pIHsNCiAgICB2YXIgdGhpcyQxID0gdGhpczsNCg0KICAgIHRoaXMuY2hpbGRyZW4gPSBjaGls
			ZHJlbjsNCiAgICB2YXIgc2l6ZSA9IDAsIGhlaWdodCA9IDA7DQogICAgZm9yICh2YXIgaSA9IDA7
			IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkgew0KICAgICAgdmFyIGNoID0gY2hpbGRyZW5baV07
			DQogICAgICBzaXplICs9IGNoLmNodW5rU2l6ZSgpOyBoZWlnaHQgKz0gY2guaGVpZ2h0Ow0KICAg
			ICAgY2gucGFyZW50ID0gdGhpcyQxOw0KICAgIH0NCiAgICB0aGlzLnNpemUgPSBzaXplOw0KICAg
			IHRoaXMuaGVpZ2h0ID0gaGVpZ2h0Ow0KICAgIHRoaXMucGFyZW50ID0gbnVsbDsNCiAgfQ0KDQog
			IEJyYW5jaENodW5rLnByb3RvdHlwZSA9IHsNCiAgICBjaHVua1NpemU6IGZ1bmN0aW9uKCkgeyBy
			ZXR1cm4gdGhpcy5zaXplIH0sDQoNCiAgICByZW1vdmVJbm5lcjogZnVuY3Rpb24oYXQsIG4pIHsN
			CiAgICAgIHZhciB0aGlzJDEgPSB0aGlzOw0KDQogICAgICB0aGlzLnNpemUgLT0gbjsNCiAgICAg
			IGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsraSkgew0KICAgICAg
			ICB2YXIgY2hpbGQgPSB0aGlzJDEuY2hpbGRyZW5baV0sIHN6ID0gY2hpbGQuY2h1bmtTaXplKCk7
			DQogICAgICAgIGlmIChhdCA8IHN6KSB7DQogICAgICAgICAgdmFyIHJtID0gTWF0aC5taW4obiwg
			c3ogLSBhdCksIG9sZEhlaWdodCA9IGNoaWxkLmhlaWdodDsNCiAgICAgICAgICBjaGlsZC5yZW1v
			dmVJbm5lcihhdCwgcm0pOw0KICAgICAgICAgIHRoaXMkMS5oZWlnaHQgLT0gb2xkSGVpZ2h0IC0g
			Y2hpbGQuaGVpZ2h0Ow0KICAgICAgICAgIGlmIChzeiA9PSBybSkgeyB0aGlzJDEuY2hpbGRyZW4u
			c3BsaWNlKGktLSwgMSk7IGNoaWxkLnBhcmVudCA9IG51bGw7IH0NCiAgICAgICAgICBpZiAoKG4g
			LT0gcm0pID09IDApIHsgYnJlYWsgfQ0KICAgICAgICAgIGF0ID0gMDsNCiAgICAgICAgfSBlbHNl
			IHsgYXQgLT0gc3o7IH0NCiAgICAgIH0NCiAgICAgIC8vIElmIHRoZSByZXN1bHQgaXMgc21hbGxl
			ciB0aGFuIDI1IGxpbmVzLCBlbnN1cmUgdGhhdCBpdCBpcyBhDQogICAgICAvLyBzaW5nbGUgbGVh
			ZiBub2RlLg0KICAgICAgaWYgKHRoaXMuc2l6ZSAtIG4gPCAyNSAmJg0KICAgICAgICAgICh0aGlz
			LmNoaWxkcmVuLmxlbmd0aCA+IDEgfHwgISh0aGlzLmNoaWxkcmVuWzBdIGluc3RhbmNlb2YgTGVh
			ZkNodW5rKSkpIHsNCiAgICAgICAgdmFyIGxpbmVzID0gW107DQogICAgICAgIHRoaXMuY29sbGFw
			c2UobGluZXMpOw0KICAgICAgICB0aGlzLmNoaWxkcmVuID0gW25ldyBMZWFmQ2h1bmsobGluZXMp
			XTsNCiAgICAgICAgdGhpcy5jaGlsZHJlblswXS5wYXJlbnQgPSB0aGlzOw0KICAgICAgfQ0KICAg
			IH0sDQoNCiAgICBjb2xsYXBzZTogZnVuY3Rpb24obGluZXMpIHsNCiAgICAgIHZhciB0aGlzJDEg
			PSB0aGlzOw0KDQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3Ro
			OyArK2kpIHsgdGhpcyQxLmNoaWxkcmVuW2ldLmNvbGxhcHNlKGxpbmVzKTsgfQ0KICAgIH0sDQoN
			CiAgICBpbnNlcnRJbm5lcjogZnVuY3Rpb24oYXQsIGxpbmVzLCBoZWlnaHQpIHsNCiAgICAgIHZh
			ciB0aGlzJDEgPSB0aGlzOw0KDQogICAgICB0aGlzLnNpemUgKz0gbGluZXMubGVuZ3RoOw0KICAg
			ICAgdGhpcy5oZWlnaHQgKz0gaGVpZ2h0Ow0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlz
			LmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7DQogICAgICAgIHZhciBjaGlsZCA9IHRoaXMkMS5jaGls
			ZHJlbltpXSwgc3ogPSBjaGlsZC5jaHVua1NpemUoKTsNCiAgICAgICAgaWYgKGF0IDw9IHN6KSB7
			DQogICAgICAgICAgY2hpbGQuaW5zZXJ0SW5uZXIoYXQsIGxpbmVzLCBoZWlnaHQpOw0KICAgICAg
			ICAgIGlmIChjaGlsZC5saW5lcyAmJiBjaGlsZC5saW5lcy5sZW5ndGggPiA1MCkgew0KICAgICAg
			ICAgICAgLy8gVG8gYXZvaWQgbWVtb3J5IHRocmFzaGluZyB3aGVuIGNoaWxkLmxpbmVzIGlzIGh1
			Z2UgKGUuZy4gZmlyc3QgdmlldyBvZiBhIGxhcmdlIGZpbGUpLCBpdCdzIG5ldmVyIHNwbGljZWQu
			DQogICAgICAgICAgICAvLyBJbnN0ZWFkLCBzbWFsbCBzbGljZXMgYXJlIHRha2VuLiBUaGV5J3Jl
			IHRha2VuIGluIG9yZGVyIGJlY2F1c2Ugc2VxdWVudGlhbCBtZW1vcnkgYWNjZXNzZXMgYXJlIGZh
			c3Rlc3QuDQogICAgICAgICAgICB2YXIgcmVtYWluaW5nID0gY2hpbGQubGluZXMubGVuZ3RoICUg
			MjUgKyAyNTsNCiAgICAgICAgICAgIGZvciAodmFyIHBvcyA9IHJlbWFpbmluZzsgcG9zIDwgY2hp
			bGQubGluZXMubGVuZ3RoOykgew0KICAgICAgICAgICAgICB2YXIgbGVhZiA9IG5ldyBMZWFmQ2h1
			bmsoY2hpbGQubGluZXMuc2xpY2UocG9zLCBwb3MgKz0gMjUpKTsNCiAgICAgICAgICAgICAgY2hp
			bGQuaGVpZ2h0IC09IGxlYWYuaGVpZ2h0Ow0KICAgICAgICAgICAgICB0aGlzJDEuY2hpbGRyZW4u
			c3BsaWNlKCsraSwgMCwgbGVhZik7DQogICAgICAgICAgICAgIGxlYWYucGFyZW50ID0gdGhpcyQx
			Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2hpbGQubGluZXMgPSBjaGlsZC5saW5lcy5z
			bGljZSgwLCByZW1haW5pbmcpOw0KICAgICAgICAgICAgdGhpcyQxLm1heWJlU3BpbGwoKTsNCiAg
			ICAgICAgICB9DQogICAgICAgICAgYnJlYWsNCiAgICAgICAgfQ0KICAgICAgICBhdCAtPSBzejsN
			CiAgICAgIH0NCiAgICB9LA0KDQogICAgLy8gV2hlbiBhIG5vZGUgaGFzIGdyb3duLCBjaGVjayB3
			aGV0aGVyIGl0IHNob3VsZCBiZSBzcGxpdC4NCiAgICBtYXliZVNwaWxsOiBmdW5jdGlvbigpIHsN
			CiAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmxlbmd0aCA8PSAxMCkgeyByZXR1cm4gfQ0KICAgICAg
			dmFyIG1lID0gdGhpczsNCiAgICAgIGRvIHsNCiAgICAgICAgdmFyIHNwaWxsZWQgPSBtZS5jaGls
			ZHJlbi5zcGxpY2UobWUuY2hpbGRyZW4ubGVuZ3RoIC0gNSwgNSk7DQogICAgICAgIHZhciBzaWJs
			aW5nID0gbmV3IEJyYW5jaENodW5rKHNwaWxsZWQpOw0KICAgICAgICBpZiAoIW1lLnBhcmVudCkg
			eyAvLyBCZWNvbWUgdGhlIHBhcmVudCBub2RlDQogICAgICAgICAgdmFyIGNvcHkgPSBuZXcgQnJh
			bmNoQ2h1bmsobWUuY2hpbGRyZW4pOw0KICAgICAgICAgIGNvcHkucGFyZW50ID0gbWU7DQogICAg
			ICAgICAgbWUuY2hpbGRyZW4gPSBbY29weSwgc2libGluZ107DQogICAgICAgICAgbWUgPSBjb3B5
			Ow0KICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgbWUuc2l6ZSAtPSBzaWJsaW5nLnNpemU7DQog
			ICAgICAgICAgbWUuaGVpZ2h0IC09IHNpYmxpbmcuaGVpZ2h0Ow0KICAgICAgICAgIHZhciBteUlu
			ZGV4ID0gaW5kZXhPZihtZS5wYXJlbnQuY2hpbGRyZW4sIG1lKTsNCiAgICAgICAgICBtZS5wYXJl
			bnQuY2hpbGRyZW4uc3BsaWNlKG15SW5kZXggKyAxLCAwLCBzaWJsaW5nKTsNCiAgICAgICAgfQ0K
			ICAgICAgICBzaWJsaW5nLnBhcmVudCA9IG1lLnBhcmVudDsNCiAgICAgIH0gd2hpbGUgKG1lLmNo
			aWxkcmVuLmxlbmd0aCA+IDEwKQ0KICAgICAgbWUucGFyZW50Lm1heWJlU3BpbGwoKTsNCiAgICB9
			LA0KDQogICAgaXRlck46IGZ1bmN0aW9uKGF0LCBuLCBvcCkgew0KICAgICAgdmFyIHRoaXMkMSA9
			IHRoaXM7DQoNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7
			ICsraSkgew0KICAgICAgICB2YXIgY2hpbGQgPSB0aGlzJDEuY2hpbGRyZW5baV0sIHN6ID0gY2hp
			bGQuY2h1bmtTaXplKCk7DQogICAgICAgIGlmIChhdCA8IHN6KSB7DQogICAgICAgICAgdmFyIHVz
			ZWQgPSBNYXRoLm1pbihuLCBzeiAtIGF0KTsNCiAgICAgICAgICBpZiAoY2hpbGQuaXRlck4oYXQs
			IHVzZWQsIG9wKSkgeyByZXR1cm4gdHJ1ZSB9DQogICAgICAgICAgaWYgKChuIC09IHVzZWQpID09
			IDApIHsgYnJlYWsgfQ0KICAgICAgICAgIGF0ID0gMDsNCiAgICAgICAgfSBlbHNlIHsgYXQgLT0g
			c3o7IH0NCiAgICAgIH0NCiAgICB9DQogIH07DQoNCiAgLy8gTGluZSB3aWRnZXRzIGFyZSBibG9j
			ayBlbGVtZW50cyBkaXNwbGF5ZWQgYWJvdmUgb3IgYmVsb3cgYSBsaW5lLg0KDQogIHZhciBMaW5l
			V2lkZ2V0ID0gZnVuY3Rpb24oZG9jLCBub2RlLCBvcHRpb25zKSB7DQogICAgdmFyIHRoaXMkMSA9
			IHRoaXM7DQoNCiAgICBpZiAob3B0aW9ucykgeyBmb3IgKHZhciBvcHQgaW4gb3B0aW9ucykgeyBp
			ZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShvcHQpKQ0KICAgICAgeyB0aGlzJDFbb3B0XSA9IG9w
			dGlvbnNbb3B0XTsgfSB9IH0NCiAgICB0aGlzLmRvYyA9IGRvYzsNCiAgICB0aGlzLm5vZGUgPSBu
			b2RlOw0KICB9Ow0KDQogIExpbmVXaWRnZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkg
			ew0KICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7DQoNCiAgICB2YXIgY20gPSB0aGlzLmRvYy5jbSwg
			d3MgPSB0aGlzLmxpbmUud2lkZ2V0cywgbGluZSA9IHRoaXMubGluZSwgbm8gPSBsaW5lTm8obGlu
			ZSk7DQogICAgaWYgKG5vID09IG51bGwgfHwgIXdzKSB7IHJldHVybiB9DQogICAgZm9yICh2YXIg
			aSA9IDA7IGkgPCB3cy5sZW5ndGg7ICsraSkgeyBpZiAod3NbaV0gPT0gdGhpcyQxKSB7IHdzLnNw
			bGljZShpLS0sIDEpOyB9IH0NCiAgICBpZiAoIXdzLmxlbmd0aCkgeyBsaW5lLndpZGdldHMgPSBu
			dWxsOyB9DQogICAgdmFyIGhlaWdodCA9IHdpZGdldEhlaWdodCh0aGlzKTsNCiAgICB1cGRhdGVM
			aW5lSGVpZ2h0KGxpbmUsIE1hdGgubWF4KDAsIGxpbmUuaGVpZ2h0IC0gaGVpZ2h0KSk7DQogICAg
			aWYgKGNtKSB7DQogICAgICBydW5Jbk9wKGNtLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIGFkanVz
			dFNjcm9sbFdoZW5BYm92ZVZpc2libGUoY20sIGxpbmUsIC1oZWlnaHQpOw0KICAgICAgICByZWdM
			aW5lQ2hhbmdlKGNtLCBubywgIndpZGdldCIpOw0KICAgICAgfSk7DQogICAgICBzaWduYWxMYXRl
			cihjbSwgImxpbmVXaWRnZXRDbGVhcmVkIiwgY20sIHRoaXMsIG5vKTsNCiAgICB9DQogIH07DQoN
			CiAgTGluZVdpZGdldC5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZh
			ciB0aGlzJDEgPSB0aGlzOw0KDQogICAgdmFyIG9sZEggPSB0aGlzLmhlaWdodCwgY20gPSB0aGlz
			LmRvYy5jbSwgbGluZSA9IHRoaXMubGluZTsNCiAgICB0aGlzLmhlaWdodCA9IG51bGw7DQogICAg
			dmFyIGRpZmYgPSB3aWRnZXRIZWlnaHQodGhpcykgLSBvbGRIOw0KICAgIGlmICghZGlmZikgeyBy
			ZXR1cm4gfQ0KICAgIGlmICghbGluZUlzSGlkZGVuKHRoaXMuZG9jLCBsaW5lKSkgeyB1cGRhdGVM
			aW5lSGVpZ2h0KGxpbmUsIGxpbmUuaGVpZ2h0ICsgZGlmZik7IH0NCiAgICBpZiAoY20pIHsNCiAg
			ICAgIHJ1bkluT3AoY20sIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgY20uY3VyT3AuZm9yY2VVcGRh
			dGUgPSB0cnVlOw0KICAgICAgICBhZGp1c3RTY3JvbGxXaGVuQWJvdmVWaXNpYmxlKGNtLCBsaW5l
			LCBkaWZmKTsNCiAgICAgICAgc2lnbmFsTGF0ZXIoY20sICJsaW5lV2lkZ2V0Q2hhbmdlZCIsIGNt
			LCB0aGlzJDEsIGxpbmVObyhsaW5lKSk7DQogICAgICB9KTsNCiAgICB9DQogIH07DQogIGV2ZW50
			TWl4aW4oTGluZVdpZGdldCk7DQoNCiAgZnVuY3Rpb24gYWRqdXN0U2Nyb2xsV2hlbkFib3ZlVmlz
			aWJsZShjbSwgbGluZSwgZGlmZikgew0KICAgIGlmIChoZWlnaHRBdExpbmUobGluZSkgPCAoKGNt
			LmN1ck9wICYmIGNtLmN1ck9wLnNjcm9sbFRvcCkgfHwgY20uZG9jLnNjcm9sbFRvcCkpDQogICAg
			ICB7IGFkZFRvU2Nyb2xsVG9wKGNtLCBkaWZmKTsgfQ0KICB9DQoNCiAgZnVuY3Rpb24gYWRkTGlu
			ZVdpZGdldChkb2MsIGhhbmRsZSwgbm9kZSwgb3B0aW9ucykgew0KICAgIHZhciB3aWRnZXQgPSBu
			ZXcgTGluZVdpZGdldChkb2MsIG5vZGUsIG9wdGlvbnMpOw0KICAgIHZhciBjbSA9IGRvYy5jbTsN
			CiAgICBpZiAoY20gJiYgd2lkZ2V0Lm5vSFNjcm9sbCkgeyBjbS5kaXNwbGF5LmFsaWduV2lkZ2V0
			cyA9IHRydWU7IH0NCiAgICBjaGFuZ2VMaW5lKGRvYywgaGFuZGxlLCAid2lkZ2V0IiwgZnVuY3Rp
			b24gKGxpbmUpIHsNCiAgICAgIHZhciB3aWRnZXRzID0gbGluZS53aWRnZXRzIHx8IChsaW5lLndp
			ZGdldHMgPSBbXSk7DQogICAgICBpZiAod2lkZ2V0Lmluc2VydEF0ID09IG51bGwpIHsgd2lkZ2V0
			cy5wdXNoKHdpZGdldCk7IH0NCiAgICAgIGVsc2UgeyB3aWRnZXRzLnNwbGljZShNYXRoLm1pbih3
			aWRnZXRzLmxlbmd0aCAtIDEsIE1hdGgubWF4KDAsIHdpZGdldC5pbnNlcnRBdCkpLCAwLCB3aWRn
			ZXQpOyB9DQogICAgICB3aWRnZXQubGluZSA9IGxpbmU7DQogICAgICBpZiAoY20gJiYgIWxpbmVJ
			c0hpZGRlbihkb2MsIGxpbmUpKSB7DQogICAgICAgIHZhciBhYm92ZVZpc2libGUgPSBoZWlnaHRB
			dExpbmUobGluZSkgPCBkb2Muc2Nyb2xsVG9wOw0KICAgICAgICB1cGRhdGVMaW5lSGVpZ2h0KGxp
			bmUsIGxpbmUuaGVpZ2h0ICsgd2lkZ2V0SGVpZ2h0KHdpZGdldCkpOw0KICAgICAgICBpZiAoYWJv
			dmVWaXNpYmxlKSB7IGFkZFRvU2Nyb2xsVG9wKGNtLCB3aWRnZXQuaGVpZ2h0KTsgfQ0KICAgICAg
			ICBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7DQogICAgICB9DQogICAgICByZXR1cm4gdHJ1
			ZQ0KICAgIH0pOw0KICAgIGlmIChjbSkgeyBzaWduYWxMYXRlcihjbSwgImxpbmVXaWRnZXRBZGRl
			ZCIsIGNtLCB3aWRnZXQsIHR5cGVvZiBoYW5kbGUgPT0gIm51bWJlciIgPyBoYW5kbGUgOiBsaW5l
			Tm8oaGFuZGxlKSk7IH0NCiAgICByZXR1cm4gd2lkZ2V0DQogIH0NCg0KICAvLyBURVhUTUFSS0VS
			Uw0KDQogIC8vIENyZWF0ZWQgd2l0aCBtYXJrVGV4dCBhbmQgc2V0Qm9va21hcmsgbWV0aG9kcy4g
			QSBUZXh0TWFya2VyIGlzIGENCiAgLy8gaGFuZGxlIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2xlYXIg
			b3IgZmluZCBhIG1hcmtlZCBwb3NpdGlvbiBpbiB0aGUNCiAgLy8gZG9jdW1lbnQuIExpbmUgb2Jq
			ZWN0cyBob2xkIGFycmF5cyAobWFya2VkU3BhbnMpIGNvbnRhaW5pbmcNCiAgLy8ge2Zyb20sIHRv
			LCBtYXJrZXJ9IG9iamVjdCBwb2ludGluZyB0byBzdWNoIG1hcmtlciBvYmplY3RzLCBhbmQNCiAg
			Ly8gaW5kaWNhdGluZyB0aGF0IHN1Y2ggYSBtYXJrZXIgaXMgcHJlc2VudCBvbiB0aGF0IGxpbmUu
			IE11bHRpcGxlDQogIC8vIGxpbmVzIG1heSBwb2ludCB0byB0aGUgc2FtZSBtYXJrZXIgd2hlbiBp
			dCBzcGFucyBhY3Jvc3MgbGluZXMuDQogIC8vIFRoZSBzcGFucyB3aWxsIGhhdmUgbnVsbCBmb3Ig
			dGhlaXIgZnJvbS90byBwcm9wZXJ0aWVzIHdoZW4gdGhlDQogIC8vIG1hcmtlciBjb250aW51ZXMg
			YmV5b25kIHRoZSBzdGFydC9lbmQgb2YgdGhlIGxpbmUuIE1hcmtlcnMgaGF2ZQ0KICAvLyBsaW5r
			cyBiYWNrIHRvIHRoZSBsaW5lcyB0aGV5IGN1cnJlbnRseSB0b3VjaC4NCg0KICAvLyBDb2xsYXBz
			ZWQgbWFya2VycyBoYXZlIHVuaXF1ZSBpZHMsIGluIG9yZGVyIHRvIGJlIGFibGUgdG8gb3JkZXIN
			CiAgLy8gdGhlbSwgd2hpY2ggaXMgbmVlZGVkIGZvciB1bmlxdWVseSBkZXRlcm1pbmluZyBhbiBv
			dXRlciBtYXJrZXINCiAgLy8gd2hlbiB0aGV5IG92ZXJsYXAgKHRoZXkgbWF5IG5lc3QsIGJ1dCBu
			b3QgcGFydGlhbGx5IG92ZXJsYXApLg0KICB2YXIgbmV4dE1hcmtlcklkID0gMDsNCg0KICB2YXIg
			VGV4dE1hcmtlciA9IGZ1bmN0aW9uKGRvYywgdHlwZSkgew0KICAgIHRoaXMubGluZXMgPSBbXTsN
			CiAgICB0aGlzLnR5cGUgPSB0eXBlOw0KICAgIHRoaXMuZG9jID0gZG9jOw0KICAgIHRoaXMuaWQg
			PSArK25leHRNYXJrZXJJZDsNCiAgfTsNCg0KICAvLyBDbGVhciB0aGUgbWFya2VyLg0KICBUZXh0
			TWFya2VyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciB0aGlzJDEg
			PSB0aGlzOw0KDQogICAgaWYgKHRoaXMuZXhwbGljaXRseUNsZWFyZWQpIHsgcmV0dXJuIH0NCiAg
			ICB2YXIgY20gPSB0aGlzLmRvYy5jbSwgd2l0aE9wID0gY20gJiYgIWNtLmN1ck9wOw0KICAgIGlm
			ICh3aXRoT3ApIHsgc3RhcnRPcGVyYXRpb24oY20pOyB9DQogICAgaWYgKGhhc0hhbmRsZXIodGhp
			cywgImNsZWFyIikpIHsNCiAgICAgIHZhciBmb3VuZCA9IHRoaXMuZmluZCgpOw0KICAgICAgaWYg
			KGZvdW5kKSB7IHNpZ25hbExhdGVyKHRoaXMsICJjbGVhciIsIGZvdW5kLmZyb20sIGZvdW5kLnRv
			KTsgfQ0KICAgIH0NCiAgICB2YXIgbWluID0gbnVsbCwgbWF4ID0gbnVsbDsNCiAgICBmb3IgKHZh
			ciBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyArK2kpIHsNCiAgICAgIHZhciBsaW5lID0g
			dGhpcyQxLmxpbmVzW2ldOw0KICAgICAgdmFyIHNwYW4gPSBnZXRNYXJrZWRTcGFuRm9yKGxpbmUu
			bWFya2VkU3BhbnMsIHRoaXMkMSk7DQogICAgICBpZiAoY20gJiYgIXRoaXMkMS5jb2xsYXBzZWQp
			IHsgcmVnTGluZUNoYW5nZShjbSwgbGluZU5vKGxpbmUpLCAidGV4dCIpOyB9DQogICAgICBlbHNl
			IGlmIChjbSkgew0KICAgICAgICBpZiAoc3Bhbi50byAhPSBudWxsKSB7IG1heCA9IGxpbmVObyhs
			aW5lKTsgfQ0KICAgICAgICBpZiAoc3Bhbi5mcm9tICE9IG51bGwpIHsgbWluID0gbGluZU5vKGxp
			bmUpOyB9DQogICAgICB9DQogICAgICBsaW5lLm1hcmtlZFNwYW5zID0gcmVtb3ZlTWFya2VkU3Bh
			bihsaW5lLm1hcmtlZFNwYW5zLCBzcGFuKTsNCiAgICAgIGlmIChzcGFuLmZyb20gPT0gbnVsbCAm
			JiB0aGlzJDEuY29sbGFwc2VkICYmICFsaW5lSXNIaWRkZW4odGhpcyQxLmRvYywgbGluZSkgJiYg
			Y20pDQogICAgICAgIHsgdXBkYXRlTGluZUhlaWdodChsaW5lLCB0ZXh0SGVpZ2h0KGNtLmRpc3Bs
			YXkpKTsgfQ0KICAgIH0NCiAgICBpZiAoY20gJiYgdGhpcy5jb2xsYXBzZWQgJiYgIWNtLm9wdGlv
			bnMubGluZVdyYXBwaW5nKSB7IGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IHRoaXMubGluZXMubGVu
			Z3RoOyArK2kkMSkgew0KICAgICAgdmFyIHZpc3VhbCA9IHZpc3VhbExpbmUodGhpcyQxLmxpbmVz
			W2kkMV0pLCBsZW4gPSBsaW5lTGVuZ3RoKHZpc3VhbCk7DQogICAgICBpZiAobGVuID4gY20uZGlz
			cGxheS5tYXhMaW5lTGVuZ3RoKSB7DQogICAgICAgIGNtLmRpc3BsYXkubWF4TGluZSA9IHZpc3Vh
			bDsNCiAgICAgICAgY20uZGlzcGxheS5tYXhMaW5lTGVuZ3RoID0gbGVuOw0KICAgICAgICBjbS5k
			aXNwbGF5Lm1heExpbmVDaGFuZ2VkID0gdHJ1ZTsNCiAgICAgIH0NCiAgICB9IH0NCg0KICAgIGlm
			IChtaW4gIT0gbnVsbCAmJiBjbSAmJiB0aGlzLmNvbGxhcHNlZCkgeyByZWdDaGFuZ2UoY20sIG1p
			biwgbWF4ICsgMSk7IH0NCiAgICB0aGlzLmxpbmVzLmxlbmd0aCA9IDA7DQogICAgdGhpcy5leHBs
			aWNpdGx5Q2xlYXJlZCA9IHRydWU7DQogICAgaWYgKHRoaXMuYXRvbWljICYmIHRoaXMuZG9jLmNh
			bnRFZGl0KSB7DQogICAgICB0aGlzLmRvYy5jYW50RWRpdCA9IGZhbHNlOw0KICAgICAgaWYgKGNt
			KSB7IHJlQ2hlY2tTZWxlY3Rpb24oY20uZG9jKTsgfQ0KICAgIH0NCiAgICBpZiAoY20pIHsgc2ln
			bmFsTGF0ZXIoY20sICJtYXJrZXJDbGVhcmVkIiwgY20sIHRoaXMsIG1pbiwgbWF4KTsgfQ0KICAg
			IGlmICh3aXRoT3ApIHsgZW5kT3BlcmF0aW9uKGNtKTsgfQ0KICAgIGlmICh0aGlzLnBhcmVudCkg
			eyB0aGlzLnBhcmVudC5jbGVhcigpOyB9DQogIH07DQoNCiAgLy8gRmluZCB0aGUgcG9zaXRpb24g
			b2YgdGhlIG1hcmtlciBpbiB0aGUgZG9jdW1lbnQuIFJldHVybnMgYSB7ZnJvbSwNCiAgLy8gdG99
			IG9iamVjdCBieSBkZWZhdWx0LiBTaWRlIGNhbiBiZSBwYXNzZWQgdG8gZ2V0IGEgc3BlY2lmaWMg
			c2lkZQ0KICAvLyAtLSAwIChib3RoKSwgLTEgKGxlZnQpLCBvciAxIChyaWdodCkuIFdoZW4gbGlu
			ZU9iaiBpcyB0cnVlLCB0aGUNCiAgLy8gUG9zIG9iamVjdHMgcmV0dXJuZWQgY29udGFpbiBhIGxp
			bmUgb2JqZWN0LCByYXRoZXIgdGhhbiBhIGxpbmUNCiAgLy8gbnVtYmVyICh1c2VkIHRvIHByZXZl
			bnQgbG9va2luZyB1cCB0aGUgc2FtZSBsaW5lIHR3aWNlKS4NCiAgVGV4dE1hcmtlci5wcm90b3R5
			cGUuZmluZCA9IGZ1bmN0aW9uIChzaWRlLCBsaW5lT2JqKSB7DQogICAgICB2YXIgdGhpcyQxID0g
			dGhpczsNCg0KICAgIGlmIChzaWRlID09IG51bGwgJiYgdGhpcy50eXBlID09ICJib29rbWFyayIp
			IHsgc2lkZSA9IDE7IH0NCiAgICB2YXIgZnJvbSwgdG87DQogICAgZm9yICh2YXIgaSA9IDA7IGkg
			PCB0aGlzLmxpbmVzLmxlbmd0aDsgKytpKSB7DQogICAgICB2YXIgbGluZSA9IHRoaXMkMS5saW5l
			c1tpXTsNCiAgICAgIHZhciBzcGFuID0gZ2V0TWFya2VkU3BhbkZvcihsaW5lLm1hcmtlZFNwYW5z
			LCB0aGlzJDEpOw0KICAgICAgaWYgKHNwYW4uZnJvbSAhPSBudWxsKSB7DQogICAgICAgIGZyb20g
			PSBQb3MobGluZU9iaiA/IGxpbmUgOiBsaW5lTm8obGluZSksIHNwYW4uZnJvbSk7DQogICAgICAg
			IGlmIChzaWRlID09IC0xKSB7IHJldHVybiBmcm9tIH0NCiAgICAgIH0NCiAgICAgIGlmIChzcGFu
			LnRvICE9IG51bGwpIHsNCiAgICAgICAgdG8gPSBQb3MobGluZU9iaiA/IGxpbmUgOiBsaW5lTm8o
			bGluZSksIHNwYW4udG8pOw0KICAgICAgICBpZiAoc2lkZSA9PSAxKSB7IHJldHVybiB0byB9DQog
			ICAgICB9DQogICAgfQ0KICAgIHJldHVybiBmcm9tICYmIHtmcm9tOiBmcm9tLCB0bzogdG99DQog
			IH07DQoNCiAgLy8gU2lnbmFscyB0aGF0IHRoZSBtYXJrZXIncyB3aWRnZXQgY2hhbmdlZCwgYW5k
			IHN1cnJvdW5kaW5nIGxheW91dA0KICAvLyBzaG91bGQgYmUgcmVjb21wdXRlZC4NCiAgVGV4dE1h
			cmtlci5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciB0aGlzJDEg
			PSB0aGlzOw0KDQogICAgdmFyIHBvcyA9IHRoaXMuZmluZCgtMSwgdHJ1ZSksIHdpZGdldCA9IHRo
			aXMsIGNtID0gdGhpcy5kb2MuY207DQogICAgaWYgKCFwb3MgfHwgIWNtKSB7IHJldHVybiB9DQog
			ICAgcnVuSW5PcChjbSwgZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIGxpbmUgPSBwb3MubGluZSwg
			bGluZU4gPSBsaW5lTm8ocG9zLmxpbmUpOw0KICAgICAgdmFyIHZpZXcgPSBmaW5kVmlld0Zvckxp
			bmUoY20sIGxpbmVOKTsNCiAgICAgIGlmICh2aWV3KSB7DQogICAgICAgIGNsZWFyTGluZU1lYXN1
			cmVtZW50Q2FjaGVGb3Iodmlldyk7DQogICAgICAgIGNtLmN1ck9wLnNlbGVjdGlvbkNoYW5nZWQg
			PSBjbS5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7DQogICAgICB9DQogICAgICBjbS5jdXJPcC51
			cGRhdGVNYXhMaW5lID0gdHJ1ZTsNCiAgICAgIGlmICghbGluZUlzSGlkZGVuKHdpZGdldC5kb2Ms
			IGxpbmUpICYmIHdpZGdldC5oZWlnaHQgIT0gbnVsbCkgew0KICAgICAgICB2YXIgb2xkSGVpZ2h0
			ID0gd2lkZ2V0LmhlaWdodDsNCiAgICAgICAgd2lkZ2V0LmhlaWdodCA9IG51bGw7DQogICAgICAg
			IHZhciBkSGVpZ2h0ID0gd2lkZ2V0SGVpZ2h0KHdpZGdldCkgLSBvbGRIZWlnaHQ7DQogICAgICAg
			IGlmIChkSGVpZ2h0KQ0KICAgICAgICAgIHsgdXBkYXRlTGluZUhlaWdodChsaW5lLCBsaW5lLmhl
			aWdodCArIGRIZWlnaHQpOyB9DQogICAgICB9DQogICAgICBzaWduYWxMYXRlcihjbSwgIm1hcmtl
			ckNoYW5nZWQiLCBjbSwgdGhpcyQxKTsNCiAgICB9KTsNCiAgfTsNCg0KICBUZXh0TWFya2VyLnBy
			b3RvdHlwZS5hdHRhY2hMaW5lID0gZnVuY3Rpb24gKGxpbmUpIHsNCiAgICBpZiAoIXRoaXMubGlu
			ZXMubGVuZ3RoICYmIHRoaXMuZG9jLmNtKSB7DQogICAgICB2YXIgb3AgPSB0aGlzLmRvYy5jbS5j
			dXJPcDsNCiAgICAgIGlmICghb3AubWF5YmVIaWRkZW5NYXJrZXJzIHx8IGluZGV4T2Yob3AubWF5
			YmVIaWRkZW5NYXJrZXJzLCB0aGlzKSA9PSAtMSkNCiAgICAgICAgeyAob3AubWF5YmVVbmhpZGRl
			bk1hcmtlcnMgfHwgKG9wLm1heWJlVW5oaWRkZW5NYXJrZXJzID0gW10pKS5wdXNoKHRoaXMpOyB9
			DQogICAgfQ0KICAgIHRoaXMubGluZXMucHVzaChsaW5lKTsNCiAgfTsNCg0KICBUZXh0TWFya2Vy
			LnByb3RvdHlwZS5kZXRhY2hMaW5lID0gZnVuY3Rpb24gKGxpbmUpIHsNCiAgICB0aGlzLmxpbmVz
			LnNwbGljZShpbmRleE9mKHRoaXMubGluZXMsIGxpbmUpLCAxKTsNCiAgICBpZiAoIXRoaXMubGlu
			ZXMubGVuZ3RoICYmIHRoaXMuZG9jLmNtKSB7DQogICAgICB2YXIgb3AgPSB0aGlzLmRvYy5jbS5j
			dXJPcA0KICAgICAgOyhvcC5tYXliZUhpZGRlbk1hcmtlcnMgfHwgKG9wLm1heWJlSGlkZGVuTWFy
			a2VycyA9IFtdKSkucHVzaCh0aGlzKTsNCiAgICB9DQogIH07DQogIGV2ZW50TWl4aW4oVGV4dE1h
			cmtlcik7DQoNCiAgLy8gQ3JlYXRlIGEgbWFya2VyLCB3aXJlIGl0IHVwIHRvIHRoZSByaWdodCBs
			aW5lcywgYW5kDQogIGZ1bmN0aW9uIG1hcmtUZXh0KGRvYywgZnJvbSwgdG8sIG9wdGlvbnMsIHR5
			cGUpIHsNCiAgICAvLyBTaGFyZWQgbWFya2VycyAoYWNyb3NzIGxpbmtlZCBkb2N1bWVudHMpIGFy
			ZSBoYW5kbGVkIHNlcGFyYXRlbHkNCiAgICAvLyAobWFya1RleHRTaGFyZWQgd2lsbCBjYWxsIG91
			dCB0byB0aGlzIGFnYWluLCBvbmNlIHBlcg0KICAgIC8vIGRvY3VtZW50KS4NCiAgICBpZiAob3B0
			aW9ucyAmJiBvcHRpb25zLnNoYXJlZCkgeyByZXR1cm4gbWFya1RleHRTaGFyZWQoZG9jLCBmcm9t
			LCB0bywgb3B0aW9ucywgdHlwZSkgfQ0KICAgIC8vIEVuc3VyZSB3ZSBhcmUgaW4gYW4gb3BlcmF0
			aW9uLg0KICAgIGlmIChkb2MuY20gJiYgIWRvYy5jbS5jdXJPcCkgeyByZXR1cm4gb3BlcmF0aW9u
			KGRvYy5jbSwgbWFya1RleHQpKGRvYywgZnJvbSwgdG8sIG9wdGlvbnMsIHR5cGUpIH0NCg0KICAg
			IHZhciBtYXJrZXIgPSBuZXcgVGV4dE1hcmtlcihkb2MsIHR5cGUpLCBkaWZmID0gY21wKGZyb20s
			IHRvKTsNCiAgICBpZiAob3B0aW9ucykgeyBjb3B5T2JqKG9wdGlvbnMsIG1hcmtlciwgZmFsc2Up
			OyB9DQogICAgLy8gRG9uJ3QgY29ubmVjdCBlbXB0eSBtYXJrZXJzIHVubGVzcyBjbGVhcldoZW5F
			bXB0eSBpcyBmYWxzZQ0KICAgIGlmIChkaWZmID4gMCB8fCBkaWZmID09IDAgJiYgbWFya2VyLmNs
			ZWFyV2hlbkVtcHR5ICE9PSBmYWxzZSkNCiAgICAgIHsgcmV0dXJuIG1hcmtlciB9DQogICAgaWYg
			KG1hcmtlci5yZXBsYWNlZFdpdGgpIHsNCiAgICAgIC8vIFNob3dpbmcgdXAgYXMgYSB3aWRnZXQg
			aW1wbGllcyBjb2xsYXBzZWQgKHdpZGdldCByZXBsYWNlcyB0ZXh0KQ0KICAgICAgbWFya2VyLmNv
			bGxhcHNlZCA9IHRydWU7DQogICAgICBtYXJrZXIud2lkZ2V0Tm9kZSA9IGVsdFAoInNwYW4iLCBb
			bWFya2VyLnJlcGxhY2VkV2l0aF0sICJDb2RlTWlycm9yLXdpZGdldCIpOw0KICAgICAgaWYgKCFv
			cHRpb25zLmhhbmRsZU1vdXNlRXZlbnRzKSB7IG1hcmtlci53aWRnZXROb2RlLnNldEF0dHJpYnV0
			ZSgiY20taWdub3JlLWV2ZW50cyIsICJ0cnVlIik7IH0NCiAgICAgIGlmIChvcHRpb25zLmluc2Vy
			dExlZnQpIHsgbWFya2VyLndpZGdldE5vZGUuaW5zZXJ0TGVmdCA9IHRydWU7IH0NCiAgICB9DQog
			ICAgaWYgKG1hcmtlci5jb2xsYXBzZWQpIHsNCiAgICAgIGlmIChjb25mbGljdGluZ0NvbGxhcHNl
			ZFJhbmdlKGRvYywgZnJvbS5saW5lLCBmcm9tLCB0bywgbWFya2VyKSB8fA0KICAgICAgICAgIGZy
			b20ubGluZSAhPSB0by5saW5lICYmIGNvbmZsaWN0aW5nQ29sbGFwc2VkUmFuZ2UoZG9jLCB0by5s
			aW5lLCBmcm9tLCB0bywgbWFya2VyKSkNCiAgICAgICAgeyB0aHJvdyBuZXcgRXJyb3IoIkluc2Vy
			dGluZyBjb2xsYXBzZWQgbWFya2VyIHBhcnRpYWxseSBvdmVybGFwcGluZyBhbiBleGlzdGluZyBv
			bmUiKSB9DQogICAgICBzZWVDb2xsYXBzZWRTcGFucygpOw0KICAgIH0NCg0KICAgIGlmIChtYXJr
			ZXIuYWRkVG9IaXN0b3J5KQ0KICAgICAgeyBhZGRDaGFuZ2VUb0hpc3RvcnkoZG9jLCB7ZnJvbTog
			ZnJvbSwgdG86IHRvLCBvcmlnaW46ICJtYXJrVGV4dCJ9LCBkb2Muc2VsLCBOYU4pOyB9DQoNCiAg
			ICB2YXIgY3VyTGluZSA9IGZyb20ubGluZSwgY20gPSBkb2MuY20sIHVwZGF0ZU1heExpbmU7DQog
			ICAgZG9jLml0ZXIoY3VyTGluZSwgdG8ubGluZSArIDEsIGZ1bmN0aW9uIChsaW5lKSB7DQogICAg
			ICBpZiAoY20gJiYgbWFya2VyLmNvbGxhcHNlZCAmJiAhY20ub3B0aW9ucy5saW5lV3JhcHBpbmcg
			JiYgdmlzdWFsTGluZShsaW5lKSA9PSBjbS5kaXNwbGF5Lm1heExpbmUpDQogICAgICAgIHsgdXBk
			YXRlTWF4TGluZSA9IHRydWU7IH0NCiAgICAgIGlmIChtYXJrZXIuY29sbGFwc2VkICYmIGN1ckxp
			bmUgIT0gZnJvbS5saW5lKSB7IHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgMCk7IH0NCiAgICAgIGFk
			ZE1hcmtlZFNwYW4obGluZSwgbmV3IE1hcmtlZFNwYW4obWFya2VyLA0KICAgICAgICAgICAgICAg
			ICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJMaW5lID09IGZyb20ubGluZSA/IGZyb20uY2gg
			OiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJMaW5l
			ID09IHRvLmxpbmUgPyB0by5jaCA6IG51bGwpKTsNCiAgICAgICsrY3VyTGluZTsNCiAgICB9KTsN
			CiAgICAvLyBsaW5lSXNIaWRkZW4gZGVwZW5kcyBvbiB0aGUgcHJlc2VuY2Ugb2YgdGhlIHNwYW5z
			LCBzbyBuZWVkcyBhIHNlY29uZCBwYXNzDQogICAgaWYgKG1hcmtlci5jb2xsYXBzZWQpIHsgZG9j
			Lml0ZXIoZnJvbS5saW5lLCB0by5saW5lICsgMSwgZnVuY3Rpb24gKGxpbmUpIHsNCiAgICAgIGlm
			IChsaW5lSXNIaWRkZW4oZG9jLCBsaW5lKSkgeyB1cGRhdGVMaW5lSGVpZ2h0KGxpbmUsIDApOyB9
			DQogICAgfSk7IH0NCg0KICAgIGlmIChtYXJrZXIuY2xlYXJPbkVudGVyKSB7IG9uKG1hcmtlciwg
			ImJlZm9yZUN1cnNvckVudGVyIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gbWFya2VyLmNsZWFyKCk7
			IH0pOyB9DQoNCiAgICBpZiAobWFya2VyLnJlYWRPbmx5KSB7DQogICAgICBzZWVSZWFkT25seVNw
			YW5zKCk7DQogICAgICBpZiAoZG9jLmhpc3RvcnkuZG9uZS5sZW5ndGggfHwgZG9jLmhpc3Rvcnku
			dW5kb25lLmxlbmd0aCkNCiAgICAgICAgeyBkb2MuY2xlYXJIaXN0b3J5KCk7IH0NCiAgICB9DQog
			ICAgaWYgKG1hcmtlci5jb2xsYXBzZWQpIHsNCiAgICAgIG1hcmtlci5pZCA9ICsrbmV4dE1hcmtl
			cklkOw0KICAgICAgbWFya2VyLmF0b21pYyA9IHRydWU7DQogICAgfQ0KICAgIGlmIChjbSkgew0K
			ICAgICAgLy8gU3luYyBlZGl0b3Igc3RhdGUNCiAgICAgIGlmICh1cGRhdGVNYXhMaW5lKSB7IGNt
			LmN1ck9wLnVwZGF0ZU1heExpbmUgPSB0cnVlOyB9DQogICAgICBpZiAobWFya2VyLmNvbGxhcHNl
			ZCkNCiAgICAgICAgeyByZWdDaGFuZ2UoY20sIGZyb20ubGluZSwgdG8ubGluZSArIDEpOyB9DQog
			ICAgICBlbHNlIGlmIChtYXJrZXIuY2xhc3NOYW1lIHx8IG1hcmtlci5zdGFydFN0eWxlIHx8IG1h
			cmtlci5lbmRTdHlsZSB8fCBtYXJrZXIuY3NzIHx8DQogICAgICAgICAgICAgICBtYXJrZXIuYXR0
			cmlidXRlcyB8fCBtYXJrZXIudGl0bGUpDQogICAgICAgIHsgZm9yICh2YXIgaSA9IGZyb20ubGlu
			ZTsgaSA8PSB0by5saW5lOyBpKyspIHsgcmVnTGluZUNoYW5nZShjbSwgaSwgInRleHQiKTsgfSB9
			DQogICAgICBpZiAobWFya2VyLmF0b21pYykgeyByZUNoZWNrU2VsZWN0aW9uKGNtLmRvYyk7IH0N
			CiAgICAgIHNpZ25hbExhdGVyKGNtLCAibWFya2VyQWRkZWQiLCBjbSwgbWFya2VyKTsNCiAgICB9
			DQogICAgcmV0dXJuIG1hcmtlcg0KICB9DQoNCiAgLy8gU0hBUkVEIFRFWFRNQVJLRVJTDQoNCiAg
			Ly8gQSBzaGFyZWQgbWFya2VyIHNwYW5zIG11bHRpcGxlIGxpbmtlZCBkb2N1bWVudHMuIEl0IGlz
			DQogIC8vIGltcGxlbWVudGVkIGFzIGEgbWV0YS1tYXJrZXItb2JqZWN0IGNvbnRyb2xsaW5nIG11
			bHRpcGxlIG5vcm1hbA0KICAvLyBtYXJrZXJzLg0KICB2YXIgU2hhcmVkVGV4dE1hcmtlciA9IGZ1
			bmN0aW9uKG1hcmtlcnMsIHByaW1hcnkpIHsNCiAgICB2YXIgdGhpcyQxID0gdGhpczsNCg0KICAg
			IHRoaXMubWFya2VycyA9IG1hcmtlcnM7DQogICAgdGhpcy5wcmltYXJ5ID0gcHJpbWFyeTsNCiAg
			ICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnMubGVuZ3RoOyArK2kpDQogICAgICB7IG1hcmtl
			cnNbaV0ucGFyZW50ID0gdGhpcyQxOyB9DQogIH07DQoNCiAgU2hhcmVkVGV4dE1hcmtlci5wcm90
			b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgdGhpcyQxID0gdGhpczsNCg0K
			ICAgIGlmICh0aGlzLmV4cGxpY2l0bHlDbGVhcmVkKSB7IHJldHVybiB9DQogICAgdGhpcy5leHBs
			aWNpdGx5Q2xlYXJlZCA9IHRydWU7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1hcmtl
			cnMubGVuZ3RoOyArK2kpDQogICAgICB7IHRoaXMkMS5tYXJrZXJzW2ldLmNsZWFyKCk7IH0NCiAg
			ICBzaWduYWxMYXRlcih0aGlzLCAiY2xlYXIiKTsNCiAgfTsNCg0KICBTaGFyZWRUZXh0TWFya2Vy
			LnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKHNpZGUsIGxpbmVPYmopIHsNCiAgICByZXR1cm4g
			dGhpcy5wcmltYXJ5LmZpbmQoc2lkZSwgbGluZU9iaikNCiAgfTsNCiAgZXZlbnRNaXhpbihTaGFy
			ZWRUZXh0TWFya2VyKTsNCg0KICBmdW5jdGlvbiBtYXJrVGV4dFNoYXJlZChkb2MsIGZyb20sIHRv
			LCBvcHRpb25zLCB0eXBlKSB7DQogICAgb3B0aW9ucyA9IGNvcHlPYmoob3B0aW9ucyk7DQogICAg
			b3B0aW9ucy5zaGFyZWQgPSBmYWxzZTsNCiAgICB2YXIgbWFya2VycyA9IFttYXJrVGV4dChkb2Ms
			IGZyb20sIHRvLCBvcHRpb25zLCB0eXBlKV0sIHByaW1hcnkgPSBtYXJrZXJzWzBdOw0KICAgIHZh
			ciB3aWRnZXQgPSBvcHRpb25zLndpZGdldE5vZGU7DQogICAgbGlua2VkRG9jcyhkb2MsIGZ1bmN0
			aW9uIChkb2MpIHsNCiAgICAgIGlmICh3aWRnZXQpIHsgb3B0aW9ucy53aWRnZXROb2RlID0gd2lk
			Z2V0LmNsb25lTm9kZSh0cnVlKTsgfQ0KICAgICAgbWFya2Vycy5wdXNoKG1hcmtUZXh0KGRvYywg
			Y2xpcFBvcyhkb2MsIGZyb20pLCBjbGlwUG9zKGRvYywgdG8pLCBvcHRpb25zLCB0eXBlKSk7DQog
			ICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvYy5saW5rZWQubGVuZ3RoOyArK2kpDQogICAgICAg
			IHsgaWYgKGRvYy5saW5rZWRbaV0uaXNQYXJlbnQpIHsgcmV0dXJuIH0gfQ0KICAgICAgcHJpbWFy
			eSA9IGxzdChtYXJrZXJzKTsNCiAgICB9KTsNCiAgICByZXR1cm4gbmV3IFNoYXJlZFRleHRNYXJr
			ZXIobWFya2VycywgcHJpbWFyeSkNCiAgfQ0KDQogIGZ1bmN0aW9uIGZpbmRTaGFyZWRNYXJrZXJz
			KGRvYykgew0KICAgIHJldHVybiBkb2MuZmluZE1hcmtzKFBvcyhkb2MuZmlyc3QsIDApLCBkb2Mu
			Y2xpcFBvcyhQb3MoZG9jLmxhc3RMaW5lKCkpKSwgZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0ucGFy
			ZW50OyB9KQ0KICB9DQoNCiAgZnVuY3Rpb24gY29weVNoYXJlZE1hcmtlcnMoZG9jLCBtYXJrZXJz
			KSB7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgaSsrKSB7DQogICAg
			ICB2YXIgbWFya2VyID0gbWFya2Vyc1tpXSwgcG9zID0gbWFya2VyLmZpbmQoKTsNCiAgICAgIHZh
			ciBtRnJvbSA9IGRvYy5jbGlwUG9zKHBvcy5mcm9tKSwgbVRvID0gZG9jLmNsaXBQb3MocG9zLnRv
			KTsNCiAgICAgIGlmIChjbXAobUZyb20sIG1UbykpIHsNCiAgICAgICAgdmFyIHN1Yk1hcmsgPSBt
			YXJrVGV4dChkb2MsIG1Gcm9tLCBtVG8sIG1hcmtlci5wcmltYXJ5LCBtYXJrZXIucHJpbWFyeS50
			eXBlKTsNCiAgICAgICAgbWFya2VyLm1hcmtlcnMucHVzaChzdWJNYXJrKTsNCiAgICAgICAgc3Vi
			TWFyay5wYXJlbnQgPSBtYXJrZXI7DQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24g
			ZGV0YWNoU2hhcmVkTWFya2VycyhtYXJrZXJzKSB7DQogICAgdmFyIGxvb3AgPSBmdW5jdGlvbiAo
			IGkgKSB7DQogICAgICB2YXIgbWFya2VyID0gbWFya2Vyc1tpXSwgbGlua2VkID0gW21hcmtlci5w
			cmltYXJ5LmRvY107DQogICAgICBsaW5rZWREb2NzKG1hcmtlci5wcmltYXJ5LmRvYywgZnVuY3Rp
			b24gKGQpIHsgcmV0dXJuIGxpbmtlZC5wdXNoKGQpOyB9KTsNCiAgICAgIGZvciAodmFyIGogPSAw
			OyBqIDwgbWFya2VyLm1hcmtlcnMubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgdmFyIHN1Yk1hcmtl
			ciA9IG1hcmtlci5tYXJrZXJzW2pdOw0KICAgICAgICBpZiAoaW5kZXhPZihsaW5rZWQsIHN1Yk1h
			cmtlci5kb2MpID09IC0xKSB7DQogICAgICAgICAgc3ViTWFya2VyLnBhcmVudCA9IG51bGw7DQog
			ICAgICAgICAgbWFya2VyLm1hcmtlcnMuc3BsaWNlKGotLSwgMSk7DQogICAgICAgIH0NCiAgICAg
			IH0NCiAgICB9Ow0KDQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgaSsr
			KSBsb29wKCBpICk7DQogIH0NCg0KICB2YXIgbmV4dERvY0lkID0gMDsNCiAgdmFyIERvYyA9IGZ1
			bmN0aW9uKHRleHQsIG1vZGUsIGZpcnN0TGluZSwgbGluZVNlcCwgZGlyZWN0aW9uKSB7DQogICAg
			aWYgKCEodGhpcyBpbnN0YW5jZW9mIERvYykpIHsgcmV0dXJuIG5ldyBEb2ModGV4dCwgbW9kZSwg
			Zmlyc3RMaW5lLCBsaW5lU2VwLCBkaXJlY3Rpb24pIH0NCiAgICBpZiAoZmlyc3RMaW5lID09IG51
			bGwpIHsgZmlyc3RMaW5lID0gMDsgfQ0KDQogICAgQnJhbmNoQ2h1bmsuY2FsbCh0aGlzLCBbbmV3
			IExlYWZDaHVuayhbbmV3IExpbmUoIiIsIG51bGwpXSldKTsNCiAgICB0aGlzLmZpcnN0ID0gZmly
			c3RMaW5lOw0KICAgIHRoaXMuc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxMZWZ0ID0gMDsNCiAgICB0
			aGlzLmNhbnRFZGl0ID0gZmFsc2U7DQogICAgdGhpcy5jbGVhbkdlbmVyYXRpb24gPSAxOw0KICAg
			IHRoaXMubW9kZUZyb250aWVyID0gdGhpcy5oaWdobGlnaHRGcm9udGllciA9IGZpcnN0TGluZTsN
			CiAgICB2YXIgc3RhcnQgPSBQb3MoZmlyc3RMaW5lLCAwKTsNCiAgICB0aGlzLnNlbCA9IHNpbXBs
			ZVNlbGVjdGlvbihzdGFydCk7DQogICAgdGhpcy5oaXN0b3J5ID0gbmV3IEhpc3RvcnkobnVsbCk7
			DQogICAgdGhpcy5pZCA9ICsrbmV4dERvY0lkOw0KICAgIHRoaXMubW9kZU9wdGlvbiA9IG1vZGU7
			DQogICAgdGhpcy5saW5lU2VwID0gbGluZVNlcDsNCiAgICB0aGlzLmRpcmVjdGlvbiA9IChkaXJl
			Y3Rpb24gPT0gInJ0bCIpID8gInJ0bCIgOiAibHRyIjsNCiAgICB0aGlzLmV4dGVuZCA9IGZhbHNl
			Ow0KDQogICAgaWYgKHR5cGVvZiB0ZXh0ID09ICJzdHJpbmciKSB7IHRleHQgPSB0aGlzLnNwbGl0
			TGluZXModGV4dCk7IH0NCiAgICB1cGRhdGVEb2ModGhpcywge2Zyb206IHN0YXJ0LCB0bzogc3Rh
			cnQsIHRleHQ6IHRleHR9KTsNCiAgICBzZXRTZWxlY3Rpb24odGhpcywgc2ltcGxlU2VsZWN0aW9u
			KHN0YXJ0KSwgc2VsX2RvbnRTY3JvbGwpOw0KICB9Ow0KDQogIERvYy5wcm90b3R5cGUgPSBjcmVh
			dGVPYmooQnJhbmNoQ2h1bmsucHJvdG90eXBlLCB7DQogICAgY29uc3RydWN0b3I6IERvYywNCiAg
			ICAvLyBJdGVyYXRlIG92ZXIgdGhlIGRvY3VtZW50LiBTdXBwb3J0cyB0d28gZm9ybXMgLS0gd2l0
			aCBvbmx5IG9uZQ0KICAgIC8vIGFyZ3VtZW50LCBpdCBjYWxscyB0aGF0IGZvciBlYWNoIGxpbmUg
			aW4gdGhlIGRvY3VtZW50LiBXaXRoDQogICAgLy8gdGhyZWUsIGl0IGl0ZXJhdGVzIG92ZXIgdGhl
			IHJhbmdlIGdpdmVuIGJ5IHRoZSBmaXJzdCB0d28gKHdpdGgNCiAgICAvLyB0aGUgc2Vjb25kIGJl
			aW5nIG5vbi1pbmNsdXNpdmUpLg0KICAgIGl0ZXI6IGZ1bmN0aW9uKGZyb20sIHRvLCBvcCkgew0K
			ICAgICAgaWYgKG9wKSB7IHRoaXMuaXRlck4oZnJvbSAtIHRoaXMuZmlyc3QsIHRvIC0gZnJvbSwg
			b3ApOyB9DQogICAgICBlbHNlIHsgdGhpcy5pdGVyTih0aGlzLmZpcnN0LCB0aGlzLmZpcnN0ICsg
			dGhpcy5zaXplLCBmcm9tKTsgfQ0KICAgIH0sDQoNCiAgICAvLyBOb24tcHVibGljIGludGVyZmFj
			ZSBmb3IgYWRkaW5nIGFuZCByZW1vdmluZyBsaW5lcy4NCiAgICBpbnNlcnQ6IGZ1bmN0aW9uKGF0
			LCBsaW5lcykgew0KICAgICAgdmFyIGhlaWdodCA9IDA7DQogICAgICBmb3IgKHZhciBpID0gMDsg
			aSA8IGxpbmVzLmxlbmd0aDsgKytpKSB7IGhlaWdodCArPSBsaW5lc1tpXS5oZWlnaHQ7IH0NCiAg
			ICAgIHRoaXMuaW5zZXJ0SW5uZXIoYXQgLSB0aGlzLmZpcnN0LCBsaW5lcywgaGVpZ2h0KTsNCiAg
			ICB9LA0KICAgIHJlbW92ZTogZnVuY3Rpb24oYXQsIG4pIHsgdGhpcy5yZW1vdmVJbm5lcihhdCAt
			IHRoaXMuZmlyc3QsIG4pOyB9LA0KDQogICAgLy8gRnJvbSBoZXJlLCB0aGUgbWV0aG9kcyBhcmUg
			cGFydCBvZiB0aGUgcHVibGljIGludGVyZmFjZS4gTW9zdA0KICAgIC8vIGFyZSBhbHNvIGF2YWls
			YWJsZSBmcm9tIENvZGVNaXJyb3IgKGVkaXRvcikgaW5zdGFuY2VzLg0KDQogICAgZ2V0VmFsdWU6
			IGZ1bmN0aW9uKGxpbmVTZXApIHsNCiAgICAgIHZhciBsaW5lcyA9IGdldExpbmVzKHRoaXMsIHRo
			aXMuZmlyc3QsIHRoaXMuZmlyc3QgKyB0aGlzLnNpemUpOw0KICAgICAgaWYgKGxpbmVTZXAgPT09
			IGZhbHNlKSB7IHJldHVybiBsaW5lcyB9DQogICAgICByZXR1cm4gbGluZXMuam9pbihsaW5lU2Vw
			IHx8IHRoaXMubGluZVNlcGFyYXRvcigpKQ0KICAgIH0sDQogICAgc2V0VmFsdWU6IGRvY01ldGhv
			ZE9wKGZ1bmN0aW9uKGNvZGUpIHsNCiAgICAgIHZhciB0b3AgPSBQb3ModGhpcy5maXJzdCwgMCks
			IGxhc3QgPSB0aGlzLmZpcnN0ICsgdGhpcy5zaXplIC0gMTsNCiAgICAgIG1ha2VDaGFuZ2UodGhp
			cywge2Zyb206IHRvcCwgdG86IFBvcyhsYXN0LCBnZXRMaW5lKHRoaXMsIGxhc3QpLnRleHQubGVu
			Z3RoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuc3BsaXRMaW5lcyhjb2Rl
			KSwgb3JpZ2luOiAic2V0VmFsdWUiLCBmdWxsOiB0cnVlfSwgdHJ1ZSk7DQogICAgICBpZiAodGhp
			cy5jbSkgeyBzY3JvbGxUb0Nvb3Jkcyh0aGlzLmNtLCAwLCAwKTsgfQ0KICAgICAgc2V0U2VsZWN0
			aW9uKHRoaXMsIHNpbXBsZVNlbGVjdGlvbih0b3ApLCBzZWxfZG9udFNjcm9sbCk7DQogICAgfSks
			DQogICAgcmVwbGFjZVJhbmdlOiBmdW5jdGlvbihjb2RlLCBmcm9tLCB0bywgb3JpZ2luKSB7DQog
			ICAgICBmcm9tID0gY2xpcFBvcyh0aGlzLCBmcm9tKTsNCiAgICAgIHRvID0gdG8gPyBjbGlwUG9z
			KHRoaXMsIHRvKSA6IGZyb207DQogICAgICByZXBsYWNlUmFuZ2UodGhpcywgY29kZSwgZnJvbSwg
			dG8sIG9yaWdpbik7DQogICAgfSwNCiAgICBnZXRSYW5nZTogZnVuY3Rpb24oZnJvbSwgdG8sIGxp
			bmVTZXApIHsNCiAgICAgIHZhciBsaW5lcyA9IGdldEJldHdlZW4odGhpcywgY2xpcFBvcyh0aGlz
			LCBmcm9tKSwgY2xpcFBvcyh0aGlzLCB0bykpOw0KICAgICAgaWYgKGxpbmVTZXAgPT09IGZhbHNl
			KSB7IHJldHVybiBsaW5lcyB9DQogICAgICByZXR1cm4gbGluZXMuam9pbihsaW5lU2VwIHx8IHRo
			aXMubGluZVNlcGFyYXRvcigpKQ0KICAgIH0sDQoNCiAgICBnZXRMaW5lOiBmdW5jdGlvbihsaW5l
			KSB7dmFyIGwgPSB0aGlzLmdldExpbmVIYW5kbGUobGluZSk7IHJldHVybiBsICYmIGwudGV4dH0s
			DQoNCiAgICBnZXRMaW5lSGFuZGxlOiBmdW5jdGlvbihsaW5lKSB7aWYgKGlzTGluZSh0aGlzLCBs
			aW5lKSkgeyByZXR1cm4gZ2V0TGluZSh0aGlzLCBsaW5lKSB9fSwNCiAgICBnZXRMaW5lTnVtYmVy
			OiBmdW5jdGlvbihsaW5lKSB7cmV0dXJuIGxpbmVObyhsaW5lKX0sDQoNCiAgICBnZXRMaW5lSGFu
			ZGxlVmlzdWFsU3RhcnQ6IGZ1bmN0aW9uKGxpbmUpIHsNCiAgICAgIGlmICh0eXBlb2YgbGluZSA9
			PSAibnVtYmVyIikgeyBsaW5lID0gZ2V0TGluZSh0aGlzLCBsaW5lKTsgfQ0KICAgICAgcmV0dXJu
			IHZpc3VhbExpbmUobGluZSkNCiAgICB9LA0KDQogICAgbGluZUNvdW50OiBmdW5jdGlvbigpIHty
			ZXR1cm4gdGhpcy5zaXplfSwNCiAgICBmaXJzdExpbmU6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlz
			LmZpcnN0fSwNCiAgICBsYXN0TGluZTogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZmlyc3QgKyB0
			aGlzLnNpemUgLSAxfSwNCg0KICAgIGNsaXBQb3M6IGZ1bmN0aW9uKHBvcykge3JldHVybiBjbGlw
			UG9zKHRoaXMsIHBvcyl9LA0KDQogICAgZ2V0Q3Vyc29yOiBmdW5jdGlvbihzdGFydCkgew0KICAg
			ICAgdmFyIHJhbmdlJCQxID0gdGhpcy5zZWwucHJpbWFyeSgpLCBwb3M7DQogICAgICBpZiAoc3Rh
			cnQgPT0gbnVsbCB8fCBzdGFydCA9PSAiaGVhZCIpIHsgcG9zID0gcmFuZ2UkJDEuaGVhZDsgfQ0K
			ICAgICAgZWxzZSBpZiAoc3RhcnQgPT0gImFuY2hvciIpIHsgcG9zID0gcmFuZ2UkJDEuYW5jaG9y
			OyB9DQogICAgICBlbHNlIGlmIChzdGFydCA9PSAiZW5kIiB8fCBzdGFydCA9PSAidG8iIHx8IHN0
			YXJ0ID09PSBmYWxzZSkgeyBwb3MgPSByYW5nZSQkMS50bygpOyB9DQogICAgICBlbHNlIHsgcG9z
			ID0gcmFuZ2UkJDEuZnJvbSgpOyB9DQogICAgICByZXR1cm4gcG9zDQogICAgfSwNCiAgICBsaXN0
			U2VsZWN0aW9uczogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnNlbC5yYW5nZXMgfSwNCiAgICBz
			b21ldGhpbmdTZWxlY3RlZDogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuc2VsLnNvbWV0aGluZ1Nl
			bGVjdGVkKCl9LA0KDQogICAgc2V0Q3Vyc29yOiBkb2NNZXRob2RPcChmdW5jdGlvbihsaW5lLCBj
			aCwgb3B0aW9ucykgew0KICAgICAgc2V0U2ltcGxlU2VsZWN0aW9uKHRoaXMsIGNsaXBQb3ModGhp
			cywgdHlwZW9mIGxpbmUgPT0gIm51bWJlciIgPyBQb3MobGluZSwgY2ggfHwgMCkgOiBsaW5lKSwg
			bnVsbCwgb3B0aW9ucyk7DQogICAgfSksDQogICAgc2V0U2VsZWN0aW9uOiBkb2NNZXRob2RPcChm
			dW5jdGlvbihhbmNob3IsIGhlYWQsIG9wdGlvbnMpIHsNCiAgICAgIHNldFNpbXBsZVNlbGVjdGlv
			bih0aGlzLCBjbGlwUG9zKHRoaXMsIGFuY2hvciksIGNsaXBQb3ModGhpcywgaGVhZCB8fCBhbmNo
			b3IpLCBvcHRpb25zKTsNCiAgICB9KSwNCiAgICBleHRlbmRTZWxlY3Rpb246IGRvY01ldGhvZE9w
			KGZ1bmN0aW9uKGhlYWQsIG90aGVyLCBvcHRpb25zKSB7DQogICAgICBleHRlbmRTZWxlY3Rpb24o
			dGhpcywgY2xpcFBvcyh0aGlzLCBoZWFkKSwgb3RoZXIgJiYgY2xpcFBvcyh0aGlzLCBvdGhlciks
			IG9wdGlvbnMpOw0KICAgIH0pLA0KICAgIGV4dGVuZFNlbGVjdGlvbnM6IGRvY01ldGhvZE9wKGZ1
			bmN0aW9uKGhlYWRzLCBvcHRpb25zKSB7DQogICAgICBleHRlbmRTZWxlY3Rpb25zKHRoaXMsIGNs
			aXBQb3NBcnJheSh0aGlzLCBoZWFkcyksIG9wdGlvbnMpOw0KICAgIH0pLA0KICAgIGV4dGVuZFNl
			bGVjdGlvbnNCeTogZG9jTWV0aG9kT3AoZnVuY3Rpb24oZiwgb3B0aW9ucykgew0KICAgICAgdmFy
			IGhlYWRzID0gbWFwKHRoaXMuc2VsLnJhbmdlcywgZik7DQogICAgICBleHRlbmRTZWxlY3Rpb25z
			KHRoaXMsIGNsaXBQb3NBcnJheSh0aGlzLCBoZWFkcyksIG9wdGlvbnMpOw0KICAgIH0pLA0KICAg
			IHNldFNlbGVjdGlvbnM6IGRvY01ldGhvZE9wKGZ1bmN0aW9uKHJhbmdlcywgcHJpbWFyeSwgb3B0
			aW9ucykgew0KICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7DQoNCiAgICAgIGlmICghcmFuZ2VzLmxl
			bmd0aCkgeyByZXR1cm4gfQ0KICAgICAgdmFyIG91dCA9IFtdOw0KICAgICAgZm9yICh2YXIgaSA9
			IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspDQogICAgICAgIHsgb3V0W2ldID0gbmV3IFJhbmdl
			KGNsaXBQb3ModGhpcyQxLCByYW5nZXNbaV0uYW5jaG9yKSwNCiAgICAgICAgICAgICAgICAgICAg
			ICAgICAgIGNsaXBQb3ModGhpcyQxLCByYW5nZXNbaV0uaGVhZCkpOyB9DQogICAgICBpZiAocHJp
			bWFyeSA9PSBudWxsKSB7IHByaW1hcnkgPSBNYXRoLm1pbihyYW5nZXMubGVuZ3RoIC0gMSwgdGhp
			cy5zZWwucHJpbUluZGV4KTsgfQ0KICAgICAgc2V0U2VsZWN0aW9uKHRoaXMsIG5vcm1hbGl6ZVNl
			bGVjdGlvbih0aGlzLmNtLCBvdXQsIHByaW1hcnkpLCBvcHRpb25zKTsNCiAgICB9KSwNCiAgICBh
			ZGRTZWxlY3Rpb246IGRvY01ldGhvZE9wKGZ1bmN0aW9uKGFuY2hvciwgaGVhZCwgb3B0aW9ucykg
			ew0KICAgICAgdmFyIHJhbmdlcyA9IHRoaXMuc2VsLnJhbmdlcy5zbGljZSgwKTsNCiAgICAgIHJh
			bmdlcy5wdXNoKG5ldyBSYW5nZShjbGlwUG9zKHRoaXMsIGFuY2hvciksIGNsaXBQb3ModGhpcywg
			aGVhZCB8fCBhbmNob3IpKSk7DQogICAgICBzZXRTZWxlY3Rpb24odGhpcywgbm9ybWFsaXplU2Vs
			ZWN0aW9uKHRoaXMuY20sIHJhbmdlcywgcmFuZ2VzLmxlbmd0aCAtIDEpLCBvcHRpb25zKTsNCiAg
			ICB9KSwNCg0KICAgIGdldFNlbGVjdGlvbjogZnVuY3Rpb24obGluZVNlcCkgew0KICAgICAgdmFy
			IHRoaXMkMSA9IHRoaXM7DQoNCiAgICAgIHZhciByYW5nZXMgPSB0aGlzLnNlbC5yYW5nZXMsIGxp
			bmVzOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHsNCiAg
			ICAgICAgdmFyIHNlbCA9IGdldEJldHdlZW4odGhpcyQxLCByYW5nZXNbaV0uZnJvbSgpLCByYW5n
			ZXNbaV0udG8oKSk7DQogICAgICAgIGxpbmVzID0gbGluZXMgPyBsaW5lcy5jb25jYXQoc2VsKSA6
			IHNlbDsNCiAgICAgIH0NCiAgICAgIGlmIChsaW5lU2VwID09PSBmYWxzZSkgeyByZXR1cm4gbGlu
			ZXMgfQ0KICAgICAgZWxzZSB7IHJldHVybiBsaW5lcy5qb2luKGxpbmVTZXAgfHwgdGhpcy5saW5l
			U2VwYXJhdG9yKCkpIH0NCiAgICB9LA0KICAgIGdldFNlbGVjdGlvbnM6IGZ1bmN0aW9uKGxpbmVT
			ZXApIHsNCiAgICAgIHZhciB0aGlzJDEgPSB0aGlzOw0KDQogICAgICB2YXIgcGFydHMgPSBbXSwg
			cmFuZ2VzID0gdGhpcy5zZWwucmFuZ2VzOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5n
			ZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgdmFyIHNlbCA9IGdldEJldHdlZW4odGhpcyQxLCBy
			YW5nZXNbaV0uZnJvbSgpLCByYW5nZXNbaV0udG8oKSk7DQogICAgICAgIGlmIChsaW5lU2VwICE9
			PSBmYWxzZSkgeyBzZWwgPSBzZWwuam9pbihsaW5lU2VwIHx8IHRoaXMkMS5saW5lU2VwYXJhdG9y
			KCkpOyB9DQogICAgICAgIHBhcnRzW2ldID0gc2VsOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHBh
			cnRzDQogICAgfSwNCiAgICByZXBsYWNlU2VsZWN0aW9uOiBmdW5jdGlvbihjb2RlLCBjb2xsYXBz
			ZSwgb3JpZ2luKSB7DQogICAgICB2YXIgZHVwID0gW107DQogICAgICBmb3IgKHZhciBpID0gMDsg
			aSA8IHRoaXMuc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykNCiAgICAgICAgeyBkdXBbaV0gPSBjb2Rl
			OyB9DQogICAgICB0aGlzLnJlcGxhY2VTZWxlY3Rpb25zKGR1cCwgY29sbGFwc2UsIG9yaWdpbiB8
			fCAiK2lucHV0Iik7DQogICAgfSwNCiAgICByZXBsYWNlU2VsZWN0aW9uczogZG9jTWV0aG9kT3Ao
			ZnVuY3Rpb24oY29kZSwgY29sbGFwc2UsIG9yaWdpbikgew0KICAgICAgdmFyIHRoaXMkMSA9IHRo
			aXM7DQoNCiAgICAgIHZhciBjaGFuZ2VzID0gW10sIHNlbCA9IHRoaXMuc2VsOw0KICAgICAgZm9y
			ICh2YXIgaSA9IDA7IGkgPCBzZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHZhciBy
			YW5nZSQkMSA9IHNlbC5yYW5nZXNbaV07DQogICAgICAgIGNoYW5nZXNbaV0gPSB7ZnJvbTogcmFu
			Z2UkJDEuZnJvbSgpLCB0bzogcmFuZ2UkJDEudG8oKSwgdGV4dDogdGhpcyQxLnNwbGl0TGluZXMo
			Y29kZVtpXSksIG9yaWdpbjogb3JpZ2lufTsNCiAgICAgIH0NCiAgICAgIHZhciBuZXdTZWwgPSBj
			b2xsYXBzZSAmJiBjb2xsYXBzZSAhPSAiZW5kIiAmJiBjb21wdXRlUmVwbGFjZWRTZWwodGhpcywg
			Y2hhbmdlcywgY29sbGFwc2UpOw0KICAgICAgZm9yICh2YXIgaSQxID0gY2hhbmdlcy5sZW5ndGgg
			LSAxOyBpJDEgPj0gMDsgaSQxLS0pDQogICAgICAgIHsgbWFrZUNoYW5nZSh0aGlzJDEsIGNoYW5n
			ZXNbaSQxXSk7IH0NCiAgICAgIGlmIChuZXdTZWwpIHsgc2V0U2VsZWN0aW9uUmVwbGFjZUhpc3Rv
			cnkodGhpcywgbmV3U2VsKTsgfQ0KICAgICAgZWxzZSBpZiAodGhpcy5jbSkgeyBlbnN1cmVDdXJz
			b3JWaXNpYmxlKHRoaXMuY20pOyB9DQogICAgfSksDQogICAgdW5kbzogZG9jTWV0aG9kT3AoZnVu
			Y3Rpb24oKSB7bWFrZUNoYW5nZUZyb21IaXN0b3J5KHRoaXMsICJ1bmRvIik7fSksDQogICAgcmVk
			bzogZG9jTWV0aG9kT3AoZnVuY3Rpb24oKSB7bWFrZUNoYW5nZUZyb21IaXN0b3J5KHRoaXMsICJy
			ZWRvIik7fSksDQogICAgdW5kb1NlbGVjdGlvbjogZG9jTWV0aG9kT3AoZnVuY3Rpb24oKSB7bWFr
			ZUNoYW5nZUZyb21IaXN0b3J5KHRoaXMsICJ1bmRvIiwgdHJ1ZSk7fSksDQogICAgcmVkb1NlbGVj
			dGlvbjogZG9jTWV0aG9kT3AoZnVuY3Rpb24oKSB7bWFrZUNoYW5nZUZyb21IaXN0b3J5KHRoaXMs
			ICJyZWRvIiwgdHJ1ZSk7fSksDQoNCiAgICBzZXRFeHRlbmRpbmc6IGZ1bmN0aW9uKHZhbCkge3Ro
			aXMuZXh0ZW5kID0gdmFsO30sDQogICAgZ2V0RXh0ZW5kaW5nOiBmdW5jdGlvbigpIHtyZXR1cm4g
			dGhpcy5leHRlbmR9LA0KDQogICAgaGlzdG9yeVNpemU6IGZ1bmN0aW9uKCkgew0KICAgICAgdmFy
			IGhpc3QgPSB0aGlzLmhpc3RvcnksIGRvbmUgPSAwLCB1bmRvbmUgPSAwOw0KICAgICAgZm9yICh2
			YXIgaSA9IDA7IGkgPCBoaXN0LmRvbmUubGVuZ3RoOyBpKyspIHsgaWYgKCFoaXN0LmRvbmVbaV0u
			cmFuZ2VzKSB7ICsrZG9uZTsgfSB9DQogICAgICBmb3IgKHZhciBpJDEgPSAwOyBpJDEgPCBoaXN0
			LnVuZG9uZS5sZW5ndGg7IGkkMSsrKSB7IGlmICghaGlzdC51bmRvbmVbaSQxXS5yYW5nZXMpIHsg
			Kyt1bmRvbmU7IH0gfQ0KICAgICAgcmV0dXJuIHt1bmRvOiBkb25lLCByZWRvOiB1bmRvbmV9DQog
			ICAgfSwNCiAgICBjbGVhckhpc3Rvcnk6IGZ1bmN0aW9uKCkgew0KICAgICAgdmFyIHRoaXMkMSA9
			IHRoaXM7DQoNCiAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHRoaXMuaGlzdG9yeS5t
			YXhHZW5lcmF0aW9uKTsNCiAgICAgIGxpbmtlZERvY3ModGhpcywgZnVuY3Rpb24gKGRvYykgeyBy
			ZXR1cm4gZG9jLmhpc3RvcnkgPSB0aGlzJDEuaGlzdG9yeTsgfSwgdHJ1ZSk7DQogICAgfSwNCg0K
			ICAgIG1hcmtDbGVhbjogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLmNsZWFuR2VuZXJhdGlvbiA9
			IHRoaXMuY2hhbmdlR2VuZXJhdGlvbih0cnVlKTsNCiAgICB9LA0KICAgIGNoYW5nZUdlbmVyYXRp
			b246IGZ1bmN0aW9uKGZvcmNlU3BsaXQpIHsNCiAgICAgIGlmIChmb3JjZVNwbGl0KQ0KICAgICAg
			ICB7IHRoaXMuaGlzdG9yeS5sYXN0T3AgPSB0aGlzLmhpc3RvcnkubGFzdFNlbE9wID0gdGhpcy5o
			aXN0b3J5Lmxhc3RPcmlnaW4gPSBudWxsOyB9DQogICAgICByZXR1cm4gdGhpcy5oaXN0b3J5Lmdl
			bmVyYXRpb24NCiAgICB9LA0KICAgIGlzQ2xlYW46IGZ1bmN0aW9uIChnZW4pIHsNCiAgICAgIHJl
			dHVybiB0aGlzLmhpc3RvcnkuZ2VuZXJhdGlvbiA9PSAoZ2VuIHx8IHRoaXMuY2xlYW5HZW5lcmF0
			aW9uKQ0KICAgIH0sDQoNCiAgICBnZXRIaXN0b3J5OiBmdW5jdGlvbigpIHsNCiAgICAgIHJldHVy
			biB7ZG9uZTogY29weUhpc3RvcnlBcnJheSh0aGlzLmhpc3RvcnkuZG9uZSksDQogICAgICAgICAg
			ICAgIHVuZG9uZTogY29weUhpc3RvcnlBcnJheSh0aGlzLmhpc3RvcnkudW5kb25lKX0NCiAgICB9
			LA0KICAgIHNldEhpc3Rvcnk6IGZ1bmN0aW9uKGhpc3REYXRhKSB7DQogICAgICB2YXIgaGlzdCA9
			IHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHRoaXMuaGlzdG9yeS5tYXhHZW5lcmF0aW9uKTsN
			CiAgICAgIGhpc3QuZG9uZSA9IGNvcHlIaXN0b3J5QXJyYXkoaGlzdERhdGEuZG9uZS5zbGljZSgw
			KSwgbnVsbCwgdHJ1ZSk7DQogICAgICBoaXN0LnVuZG9uZSA9IGNvcHlIaXN0b3J5QXJyYXkoaGlz
			dERhdGEudW5kb25lLnNsaWNlKDApLCBudWxsLCB0cnVlKTsNCiAgICB9LA0KDQogICAgc2V0R3V0
			dGVyTWFya2VyOiBkb2NNZXRob2RPcChmdW5jdGlvbihsaW5lLCBndXR0ZXJJRCwgdmFsdWUpIHsN
			CiAgICAgIHJldHVybiBjaGFuZ2VMaW5lKHRoaXMsIGxpbmUsICJndXR0ZXIiLCBmdW5jdGlvbiAo
			bGluZSkgew0KICAgICAgICB2YXIgbWFya2VycyA9IGxpbmUuZ3V0dGVyTWFya2VycyB8fCAobGlu
			ZS5ndXR0ZXJNYXJrZXJzID0ge30pOw0KICAgICAgICBtYXJrZXJzW2d1dHRlcklEXSA9IHZhbHVl
			Ow0KICAgICAgICBpZiAoIXZhbHVlICYmIGlzRW1wdHkobWFya2VycykpIHsgbGluZS5ndXR0ZXJN
			YXJrZXJzID0gbnVsbDsgfQ0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgfSkNCiAgICB9KSwN
			Cg0KICAgIGNsZWFyR3V0dGVyOiBkb2NNZXRob2RPcChmdW5jdGlvbihndXR0ZXJJRCkgew0KICAg
			ICAgdmFyIHRoaXMkMSA9IHRoaXM7DQoNCiAgICAgIHRoaXMuaXRlcihmdW5jdGlvbiAobGluZSkg
			ew0KICAgICAgICBpZiAobGluZS5ndXR0ZXJNYXJrZXJzICYmIGxpbmUuZ3V0dGVyTWFya2Vyc1tn
			dXR0ZXJJRF0pIHsNCiAgICAgICAgICBjaGFuZ2VMaW5lKHRoaXMkMSwgbGluZSwgImd1dHRlciIs
			IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIGxpbmUuZ3V0dGVyTWFya2Vyc1tndXR0ZXJJRF0g
			PSBudWxsOw0KICAgICAgICAgICAgaWYgKGlzRW1wdHkobGluZS5ndXR0ZXJNYXJrZXJzKSkgeyBs
			aW5lLmd1dHRlck1hcmtlcnMgPSBudWxsOyB9DQogICAgICAgICAgICByZXR1cm4gdHJ1ZQ0KICAg
			ICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9KSwNCg0KICAgIGxpbmVJbmZv
			OiBmdW5jdGlvbihsaW5lKSB7DQogICAgICB2YXIgbjsNCiAgICAgIGlmICh0eXBlb2YgbGluZSA9
			PSAibnVtYmVyIikgew0KICAgICAgICBpZiAoIWlzTGluZSh0aGlzLCBsaW5lKSkgeyByZXR1cm4g
			bnVsbCB9DQogICAgICAgIG4gPSBsaW5lOw0KICAgICAgICBsaW5lID0gZ2V0TGluZSh0aGlzLCBs
			aW5lKTsNCiAgICAgICAgaWYgKCFsaW5lKSB7IHJldHVybiBudWxsIH0NCiAgICAgIH0gZWxzZSB7
			DQogICAgICAgIG4gPSBsaW5lTm8obGluZSk7DQogICAgICAgIGlmIChuID09IG51bGwpIHsgcmV0
			dXJuIG51bGwgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHtsaW5lOiBuLCBoYW5kbGU6IGxpbmUs
			IHRleHQ6IGxpbmUudGV4dCwgZ3V0dGVyTWFya2VyczogbGluZS5ndXR0ZXJNYXJrZXJzLA0KICAg
			ICAgICAgICAgICB0ZXh0Q2xhc3M6IGxpbmUudGV4dENsYXNzLCBiZ0NsYXNzOiBsaW5lLmJnQ2xh
			c3MsIHdyYXBDbGFzczogbGluZS53cmFwQ2xhc3MsDQogICAgICAgICAgICAgIHdpZGdldHM6IGxp
			bmUud2lkZ2V0c30NCiAgICB9LA0KDQogICAgYWRkTGluZUNsYXNzOiBkb2NNZXRob2RPcChmdW5j
			dGlvbihoYW5kbGUsIHdoZXJlLCBjbHMpIHsNCiAgICAgIHJldHVybiBjaGFuZ2VMaW5lKHRoaXMs
			IGhhbmRsZSwgd2hlcmUgPT0gImd1dHRlciIgPyAiZ3V0dGVyIiA6ICJjbGFzcyIsIGZ1bmN0aW9u
			IChsaW5lKSB7DQogICAgICAgIHZhciBwcm9wID0gd2hlcmUgPT0gInRleHQiID8gInRleHRDbGFz
			cyINCiAgICAgICAgICAgICAgICAgOiB3aGVyZSA9PSAiYmFja2dyb3VuZCIgPyAiYmdDbGFzcyIN
			CiAgICAgICAgICAgICAgICAgOiB3aGVyZSA9PSAiZ3V0dGVyIiA/ICJndXR0ZXJDbGFzcyIgOiAi
			d3JhcENsYXNzIjsNCiAgICAgICAgaWYgKCFsaW5lW3Byb3BdKSB7IGxpbmVbcHJvcF0gPSBjbHM7
			IH0NCiAgICAgICAgZWxzZSBpZiAoY2xhc3NUZXN0KGNscykudGVzdChsaW5lW3Byb3BdKSkgeyBy
			ZXR1cm4gZmFsc2UgfQ0KICAgICAgICBlbHNlIHsgbGluZVtwcm9wXSArPSAiICIgKyBjbHM7IH0N
			CiAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgIH0pDQogICAgfSksDQogICAgcmVtb3ZlTGluZUNs
			YXNzOiBkb2NNZXRob2RPcChmdW5jdGlvbihoYW5kbGUsIHdoZXJlLCBjbHMpIHsNCiAgICAgIHJl
			dHVybiBjaGFuZ2VMaW5lKHRoaXMsIGhhbmRsZSwgd2hlcmUgPT0gImd1dHRlciIgPyAiZ3V0dGVy
			IiA6ICJjbGFzcyIsIGZ1bmN0aW9uIChsaW5lKSB7DQogICAgICAgIHZhciBwcm9wID0gd2hlcmUg
			PT0gInRleHQiID8gInRleHRDbGFzcyINCiAgICAgICAgICAgICAgICAgOiB3aGVyZSA9PSAiYmFj
			a2dyb3VuZCIgPyAiYmdDbGFzcyINCiAgICAgICAgICAgICAgICAgOiB3aGVyZSA9PSAiZ3V0dGVy
			IiA/ICJndXR0ZXJDbGFzcyIgOiAid3JhcENsYXNzIjsNCiAgICAgICAgdmFyIGN1ciA9IGxpbmVb
			cHJvcF07DQogICAgICAgIGlmICghY3VyKSB7IHJldHVybiBmYWxzZSB9DQogICAgICAgIGVsc2Ug
			aWYgKGNscyA9PSBudWxsKSB7IGxpbmVbcHJvcF0gPSBudWxsOyB9DQogICAgICAgIGVsc2Ugew0K
			ICAgICAgICAgIHZhciBmb3VuZCA9IGN1ci5tYXRjaChjbGFzc1Rlc3QoY2xzKSk7DQogICAgICAg
			ICAgaWYgKCFmb3VuZCkgeyByZXR1cm4gZmFsc2UgfQ0KICAgICAgICAgIHZhciBlbmQgPSBmb3Vu
			ZC5pbmRleCArIGZvdW5kWzBdLmxlbmd0aDsNCiAgICAgICAgICBsaW5lW3Byb3BdID0gY3VyLnNs
			aWNlKDAsIGZvdW5kLmluZGV4KSArICghZm91bmQuaW5kZXggfHwgZW5kID09IGN1ci5sZW5ndGgg
			PyAiIiA6ICIgIikgKyBjdXIuc2xpY2UoZW5kKSB8fCBudWxsOw0KICAgICAgICB9DQogICAgICAg
			IHJldHVybiB0cnVlDQogICAgICB9KQ0KICAgIH0pLA0KDQogICAgYWRkTGluZVdpZGdldDogZG9j
			TWV0aG9kT3AoZnVuY3Rpb24oaGFuZGxlLCBub2RlLCBvcHRpb25zKSB7DQogICAgICByZXR1cm4g
			YWRkTGluZVdpZGdldCh0aGlzLCBoYW5kbGUsIG5vZGUsIG9wdGlvbnMpDQogICAgfSksDQogICAg
			cmVtb3ZlTGluZVdpZGdldDogZnVuY3Rpb24od2lkZ2V0KSB7IHdpZGdldC5jbGVhcigpOyB9LA0K
			DQogICAgbWFya1RleHQ6IGZ1bmN0aW9uKGZyb20sIHRvLCBvcHRpb25zKSB7DQogICAgICByZXR1
			cm4gbWFya1RleHQodGhpcywgY2xpcFBvcyh0aGlzLCBmcm9tKSwgY2xpcFBvcyh0aGlzLCB0byks
			IG9wdGlvbnMsIG9wdGlvbnMgJiYgb3B0aW9ucy50eXBlIHx8ICJyYW5nZSIpDQogICAgfSwNCiAg
			ICBzZXRCb29rbWFyazogZnVuY3Rpb24ocG9zLCBvcHRpb25zKSB7DQogICAgICB2YXIgcmVhbE9w
			dHMgPSB7cmVwbGFjZWRXaXRoOiBvcHRpb25zICYmIChvcHRpb25zLm5vZGVUeXBlID09IG51bGwg
			PyBvcHRpb25zLndpZGdldCA6IG9wdGlvbnMpLA0KICAgICAgICAgICAgICAgICAgICAgIGluc2Vy
			dExlZnQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5pbnNlcnRMZWZ0LA0KICAgICAgICAgICAgICAgICAg
			ICAgIGNsZWFyV2hlbkVtcHR5OiBmYWxzZSwgc2hhcmVkOiBvcHRpb25zICYmIG9wdGlvbnMuc2hh
			cmVkLA0KICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZU1vdXNlRXZlbnRzOiBvcHRpb25zICYm
			IG9wdGlvbnMuaGFuZGxlTW91c2VFdmVudHN9Ow0KICAgICAgcG9zID0gY2xpcFBvcyh0aGlzLCBw
			b3MpOw0KICAgICAgcmV0dXJuIG1hcmtUZXh0KHRoaXMsIHBvcywgcG9zLCByZWFsT3B0cywgImJv
			b2ttYXJrIikNCiAgICB9LA0KICAgIGZpbmRNYXJrc0F0OiBmdW5jdGlvbihwb3MpIHsNCiAgICAg
			IHBvcyA9IGNsaXBQb3ModGhpcywgcG9zKTsNCiAgICAgIHZhciBtYXJrZXJzID0gW10sIHNwYW5z
			ID0gZ2V0TGluZSh0aGlzLCBwb3MubGluZSkubWFya2VkU3BhbnM7DQogICAgICBpZiAoc3BhbnMp
			IHsgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7ICsraSkgew0KICAgICAgICB2YXIg
			c3BhbiA9IHNwYW5zW2ldOw0KICAgICAgICBpZiAoKHNwYW4uZnJvbSA9PSBudWxsIHx8IHNwYW4u
			ZnJvbSA8PSBwb3MuY2gpICYmDQogICAgICAgICAgICAoc3Bhbi50byA9PSBudWxsIHx8IHNwYW4u
			dG8gPj0gcG9zLmNoKSkNCiAgICAgICAgICB7IG1hcmtlcnMucHVzaChzcGFuLm1hcmtlci5wYXJl
			bnQgfHwgc3Bhbi5tYXJrZXIpOyB9DQogICAgICB9IH0NCiAgICAgIHJldHVybiBtYXJrZXJzDQog
			ICAgfSwNCiAgICBmaW5kTWFya3M6IGZ1bmN0aW9uKGZyb20sIHRvLCBmaWx0ZXIpIHsNCiAgICAg
			IGZyb20gPSBjbGlwUG9zKHRoaXMsIGZyb20pOyB0byA9IGNsaXBQb3ModGhpcywgdG8pOw0KICAg
			ICAgdmFyIGZvdW5kID0gW10sIGxpbmVObyQkMSA9IGZyb20ubGluZTsNCiAgICAgIHRoaXMuaXRl
			cihmcm9tLmxpbmUsIHRvLmxpbmUgKyAxLCBmdW5jdGlvbiAobGluZSkgew0KICAgICAgICB2YXIg
			c3BhbnMgPSBsaW5lLm1hcmtlZFNwYW5zOw0KICAgICAgICBpZiAoc3BhbnMpIHsgZm9yICh2YXIg
			aSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIHZhciBzcGFuID0gc3Bh
			bnNbaV07DQogICAgICAgICAgaWYgKCEoc3Bhbi50byAhPSBudWxsICYmIGxpbmVObyQkMSA9PSBm
			cm9tLmxpbmUgJiYgZnJvbS5jaCA+PSBzcGFuLnRvIHx8DQogICAgICAgICAgICAgICAgc3Bhbi5m
			cm9tID09IG51bGwgJiYgbGluZU5vJCQxICE9IGZyb20ubGluZSB8fA0KICAgICAgICAgICAgICAg
			IHNwYW4uZnJvbSAhPSBudWxsICYmIGxpbmVObyQkMSA9PSB0by5saW5lICYmIHNwYW4uZnJvbSA+
			PSB0by5jaCkgJiYNCiAgICAgICAgICAgICAgKCFmaWx0ZXIgfHwgZmlsdGVyKHNwYW4ubWFya2Vy
			KSkpDQogICAgICAgICAgICB7IGZvdW5kLnB1c2goc3Bhbi5tYXJrZXIucGFyZW50IHx8IHNwYW4u
			bWFya2VyKTsgfQ0KICAgICAgICB9IH0NCiAgICAgICAgKytsaW5lTm8kJDE7DQogICAgICB9KTsN
			CiAgICAgIHJldHVybiBmb3VuZA0KICAgIH0sDQogICAgZ2V0QWxsTWFya3M6IGZ1bmN0aW9uKCkg
			ew0KICAgICAgdmFyIG1hcmtlcnMgPSBbXTsNCiAgICAgIHRoaXMuaXRlcihmdW5jdGlvbiAobGlu
			ZSkgew0KICAgICAgICB2YXIgc3BzID0gbGluZS5tYXJrZWRTcGFuczsNCiAgICAgICAgaWYgKHNw
			cykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHNwcy5sZW5ndGg7ICsraSkNCiAgICAgICAgICB7IGlm
			IChzcHNbaV0uZnJvbSAhPSBudWxsKSB7IG1hcmtlcnMucHVzaChzcHNbaV0ubWFya2VyKTsgfSB9
			IH0NCiAgICAgIH0pOw0KICAgICAgcmV0dXJuIG1hcmtlcnMNCiAgICB9LA0KDQogICAgcG9zRnJv
			bUluZGV4OiBmdW5jdGlvbihvZmYpIHsNCiAgICAgIHZhciBjaCwgbGluZU5vJCQxID0gdGhpcy5m
			aXJzdCwgc2VwU2l6ZSA9IHRoaXMubGluZVNlcGFyYXRvcigpLmxlbmd0aDsNCiAgICAgIHRoaXMu
			aXRlcihmdW5jdGlvbiAobGluZSkgew0KICAgICAgICB2YXIgc3ogPSBsaW5lLnRleHQubGVuZ3Ro
			ICsgc2VwU2l6ZTsNCiAgICAgICAgaWYgKHN6ID4gb2ZmKSB7IGNoID0gb2ZmOyByZXR1cm4gdHJ1
			ZSB9DQogICAgICAgIG9mZiAtPSBzejsNCiAgICAgICAgKytsaW5lTm8kJDE7DQogICAgICB9KTsN
			CiAgICAgIHJldHVybiBjbGlwUG9zKHRoaXMsIFBvcyhsaW5lTm8kJDEsIGNoKSkNCiAgICB9LA0K
			ICAgIGluZGV4RnJvbVBvczogZnVuY3Rpb24gKGNvb3Jkcykgew0KICAgICAgY29vcmRzID0gY2xp
			cFBvcyh0aGlzLCBjb29yZHMpOw0KICAgICAgdmFyIGluZGV4ID0gY29vcmRzLmNoOw0KICAgICAg
			aWYgKGNvb3Jkcy5saW5lIDwgdGhpcy5maXJzdCB8fCBjb29yZHMuY2ggPCAwKSB7IHJldHVybiAw
			IH0NCiAgICAgIHZhciBzZXBTaXplID0gdGhpcy5saW5lU2VwYXJhdG9yKCkubGVuZ3RoOw0KICAg
			ICAgdGhpcy5pdGVyKHRoaXMuZmlyc3QsIGNvb3Jkcy5saW5lLCBmdW5jdGlvbiAobGluZSkgeyAv
			LyBpdGVyIGFib3J0cyB3aGVuIGNhbGxiYWNrIHJldHVybnMgYSB0cnV0aHkgdmFsdWUNCiAgICAg
			ICAgaW5kZXggKz0gbGluZS50ZXh0Lmxlbmd0aCArIHNlcFNpemU7DQogICAgICB9KTsNCiAgICAg
			IHJldHVybiBpbmRleA0KICAgIH0sDQoNCiAgICBjb3B5OiBmdW5jdGlvbihjb3B5SGlzdG9yeSkg
			ew0KICAgICAgdmFyIGRvYyA9IG5ldyBEb2MoZ2V0TGluZXModGhpcywgdGhpcy5maXJzdCwgdGhp
			cy5maXJzdCArIHRoaXMuc2l6ZSksDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVP
			cHRpb24sIHRoaXMuZmlyc3QsIHRoaXMubGluZVNlcCwgdGhpcy5kaXJlY3Rpb24pOw0KICAgICAg
			ZG9jLnNjcm9sbFRvcCA9IHRoaXMuc2Nyb2xsVG9wOyBkb2Muc2Nyb2xsTGVmdCA9IHRoaXMuc2Ny
			b2xsTGVmdDsNCiAgICAgIGRvYy5zZWwgPSB0aGlzLnNlbDsNCiAgICAgIGRvYy5leHRlbmQgPSBm
			YWxzZTsNCiAgICAgIGlmIChjb3B5SGlzdG9yeSkgew0KICAgICAgICBkb2MuaGlzdG9yeS51bmRv
			RGVwdGggPSB0aGlzLmhpc3RvcnkudW5kb0RlcHRoOw0KICAgICAgICBkb2Muc2V0SGlzdG9yeSh0
			aGlzLmdldEhpc3RvcnkoKSk7DQogICAgICB9DQogICAgICByZXR1cm4gZG9jDQogICAgfSwNCg0K
			ICAgIGxpbmtlZERvYzogZnVuY3Rpb24ob3B0aW9ucykgew0KICAgICAgaWYgKCFvcHRpb25zKSB7
			IG9wdGlvbnMgPSB7fTsgfQ0KICAgICAgdmFyIGZyb20gPSB0aGlzLmZpcnN0LCB0byA9IHRoaXMu
			Zmlyc3QgKyB0aGlzLnNpemU7DQogICAgICBpZiAob3B0aW9ucy5mcm9tICE9IG51bGwgJiYgb3B0
			aW9ucy5mcm9tID4gZnJvbSkgeyBmcm9tID0gb3B0aW9ucy5mcm9tOyB9DQogICAgICBpZiAob3B0
			aW9ucy50byAhPSBudWxsICYmIG9wdGlvbnMudG8gPCB0bykgeyB0byA9IG9wdGlvbnMudG87IH0N
			CiAgICAgIHZhciBjb3B5ID0gbmV3IERvYyhnZXRMaW5lcyh0aGlzLCBmcm9tLCB0byksIG9wdGlv
			bnMubW9kZSB8fCB0aGlzLm1vZGVPcHRpb24sIGZyb20sIHRoaXMubGluZVNlcCwgdGhpcy5kaXJl
			Y3Rpb24pOw0KICAgICAgaWYgKG9wdGlvbnMuc2hhcmVkSGlzdCkgeyBjb3B5Lmhpc3RvcnkgPSB0
			aGlzLmhpc3RvcnkNCiAgICAgIDsgfSh0aGlzLmxpbmtlZCB8fCAodGhpcy5saW5rZWQgPSBbXSkp
			LnB1c2goe2RvYzogY29weSwgc2hhcmVkSGlzdDogb3B0aW9ucy5zaGFyZWRIaXN0fSk7DQogICAg
			ICBjb3B5LmxpbmtlZCA9IFt7ZG9jOiB0aGlzLCBpc1BhcmVudDogdHJ1ZSwgc2hhcmVkSGlzdDog
			b3B0aW9ucy5zaGFyZWRIaXN0fV07DQogICAgICBjb3B5U2hhcmVkTWFya2Vycyhjb3B5LCBmaW5k
			U2hhcmVkTWFya2Vycyh0aGlzKSk7DQogICAgICByZXR1cm4gY29weQ0KICAgIH0sDQogICAgdW5s
			aW5rRG9jOiBmdW5jdGlvbihvdGhlcikgew0KICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7DQoNCiAg
			ICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIENvZGVNaXJyb3IpIHsgb3RoZXIgPSBvdGhlci5kb2M7
			IH0NCiAgICAgIGlmICh0aGlzLmxpbmtlZCkgeyBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGlu
			a2VkLmxlbmd0aDsgKytpKSB7DQogICAgICAgIHZhciBsaW5rID0gdGhpcyQxLmxpbmtlZFtpXTsN
			CiAgICAgICAgaWYgKGxpbmsuZG9jICE9IG90aGVyKSB7IGNvbnRpbnVlIH0NCiAgICAgICAgdGhp
			cyQxLmxpbmtlZC5zcGxpY2UoaSwgMSk7DQogICAgICAgIG90aGVyLnVubGlua0RvYyh0aGlzJDEp
			Ow0KICAgICAgICBkZXRhY2hTaGFyZWRNYXJrZXJzKGZpbmRTaGFyZWRNYXJrZXJzKHRoaXMkMSkp
			Ow0KICAgICAgICBicmVhaw0KICAgICAgfSB9DQogICAgICAvLyBJZiB0aGUgaGlzdG9yaWVzIHdl
			cmUgc2hhcmVkLCBzcGxpdCB0aGVtIGFnYWluDQogICAgICBpZiAob3RoZXIuaGlzdG9yeSA9PSB0
			aGlzLmhpc3RvcnkpIHsNCiAgICAgICAgdmFyIHNwbGl0SWRzID0gW290aGVyLmlkXTsNCiAgICAg
			ICAgbGlua2VkRG9jcyhvdGhlciwgZnVuY3Rpb24gKGRvYykgeyByZXR1cm4gc3BsaXRJZHMucHVz
			aChkb2MuaWQpOyB9LCB0cnVlKTsNCiAgICAgICAgb3RoZXIuaGlzdG9yeSA9IG5ldyBIaXN0b3J5
			KG51bGwpOw0KICAgICAgICBvdGhlci5oaXN0b3J5LmRvbmUgPSBjb3B5SGlzdG9yeUFycmF5KHRo
			aXMuaGlzdG9yeS5kb25lLCBzcGxpdElkcyk7DQogICAgICAgIG90aGVyLmhpc3RvcnkudW5kb25l
			ID0gY29weUhpc3RvcnlBcnJheSh0aGlzLmhpc3RvcnkudW5kb25lLCBzcGxpdElkcyk7DQogICAg
			ICB9DQogICAgfSwNCiAgICBpdGVyTGlua2VkRG9jczogZnVuY3Rpb24oZikge2xpbmtlZERvY3Mo
			dGhpcywgZik7fSwNCg0KICAgIGdldE1vZGU6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLm1vZGV9
			LA0KICAgIGdldEVkaXRvcjogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuY219LA0KDQogICAgc3Bs
			aXRMaW5lczogZnVuY3Rpb24oc3RyKSB7DQogICAgICBpZiAodGhpcy5saW5lU2VwKSB7IHJldHVy
			biBzdHIuc3BsaXQodGhpcy5saW5lU2VwKSB9DQogICAgICByZXR1cm4gc3BsaXRMaW5lc0F1dG8o
			c3RyKQ0KICAgIH0sDQogICAgbGluZVNlcGFyYXRvcjogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlz
			LmxpbmVTZXAgfHwgIlxuIiB9LA0KDQogICAgc2V0RGlyZWN0aW9uOiBkb2NNZXRob2RPcChmdW5j
			dGlvbiAoZGlyKSB7DQogICAgICBpZiAoZGlyICE9ICJydGwiKSB7IGRpciA9ICJsdHIiOyB9DQog
			ICAgICBpZiAoZGlyID09IHRoaXMuZGlyZWN0aW9uKSB7IHJldHVybiB9DQogICAgICB0aGlzLmRp
			cmVjdGlvbiA9IGRpcjsNCiAgICAgIHRoaXMuaXRlcihmdW5jdGlvbiAobGluZSkgeyByZXR1cm4g
			bGluZS5vcmRlciA9IG51bGw7IH0pOw0KICAgICAgaWYgKHRoaXMuY20pIHsgZGlyZWN0aW9uQ2hh
			bmdlZCh0aGlzLmNtKTsgfQ0KICAgIH0pDQogIH0pOw0KDQogIC8vIFB1YmxpYyBhbGlhcy4NCiAg
			RG9jLnByb3RvdHlwZS5lYWNoTGluZSA9IERvYy5wcm90b3R5cGUuaXRlcjsNCg0KICAvLyBLbHVk
			Z2UgdG8gd29yayBhcm91bmQgc3RyYW5nZSBJRSBiZWhhdmlvciB3aGVyZSBpdCdsbCBzb21ldGlt
			ZXMNCiAgLy8gcmUtZmlyZSBhIHNlcmllcyBvZiBkcmFnLXJlbGF0ZWQgZXZlbnRzIHJpZ2h0IGFm
			dGVyIHRoZSBkcm9wICgjMTU1MSkNCiAgdmFyIGxhc3REcm9wID0gMDsNCg0KICBmdW5jdGlvbiBv
			bkRyb3AoZSkgew0KICAgIHZhciBjbSA9IHRoaXM7DQogICAgY2xlYXJEcmFnQ3Vyc29yKGNtKTsN
			CiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGV2ZW50SW5XaWRnZXQoY20uZGlzcGxh
			eSwgZSkpDQogICAgICB7IHJldHVybiB9DQogICAgZV9wcmV2ZW50RGVmYXVsdChlKTsNCiAgICBp
			ZiAoaWUpIHsgbGFzdERyb3AgPSArbmV3IERhdGU7IH0NCiAgICB2YXIgcG9zID0gcG9zRnJvbU1v
			dXNlKGNtLCBlLCB0cnVlKSwgZmlsZXMgPSBlLmRhdGFUcmFuc2Zlci5maWxlczsNCiAgICBpZiAo
			IXBvcyB8fCBjbS5pc1JlYWRPbmx5KCkpIHsgcmV0dXJuIH0NCiAgICAvLyBNaWdodCBiZSBhIGZp
			bGUgZHJvcCwgaW4gd2hpY2ggY2FzZSB3ZSBzaW1wbHkgZXh0cmFjdCB0aGUgdGV4dA0KICAgIC8v
			IGFuZCBpbnNlcnQgaXQuDQogICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCAmJiB3aW5kb3cu
			RmlsZVJlYWRlciAmJiB3aW5kb3cuRmlsZSkgew0KICAgICAgdmFyIG4gPSBmaWxlcy5sZW5ndGgs
			IHRleHQgPSBBcnJheShuKSwgcmVhZCA9IDA7DQogICAgICB2YXIgbWFya0FzUmVhZEFuZFBhc3Rl
			SWZBbGxGaWxlc0FyZVJlYWQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmICgrK3JlYWQgPT0g
			bikgew0KICAgICAgICAgIG9wZXJhdGlvbihjbSwgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAg
			cG9zID0gY2xpcFBvcyhjbS5kb2MsIHBvcyk7DQogICAgICAgICAgICB2YXIgY2hhbmdlID0ge2Zy
			b206IHBvcywgdG86IHBvcywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogY20uZG9j
			LnNwbGl0TGluZXMoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LmZpbHRlcihm
			dW5jdGlvbiAodCkgeyByZXR1cm4gdCAhPSBudWxsOyB9KS5qb2luKGNtLmRvYy5saW5lU2VwYXJh
			dG9yKCkpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiAicGFzdGUifTsNCiAg
			ICAgICAgICAgIG1ha2VDaGFuZ2UoY20uZG9jLCBjaGFuZ2UpOw0KICAgICAgICAgICAgc2V0U2Vs
			ZWN0aW9uUmVwbGFjZUhpc3RvcnkoY20uZG9jLCBzaW1wbGVTZWxlY3Rpb24oY2xpcFBvcyhjbS5k
			b2MsIHBvcyksIGNsaXBQb3MoY20uZG9jLCBjaGFuZ2VFbmQoY2hhbmdlKSkpKTsNCiAgICAgICAg
			ICB9KSgpOw0KICAgICAgICB9DQogICAgICB9Ow0KICAgICAgdmFyIHJlYWRUZXh0RnJvbUZpbGUg
			PSBmdW5jdGlvbiAoZmlsZSwgaSkgew0KICAgICAgICBpZiAoY20ub3B0aW9ucy5hbGxvd0Ryb3BG
			aWxlVHlwZXMgJiYNCiAgICAgICAgICAgIGluZGV4T2YoY20ub3B0aW9ucy5hbGxvd0Ryb3BGaWxl
			VHlwZXMsIGZpbGUudHlwZSkgPT0gLTEpIHsNCiAgICAgICAgICBtYXJrQXNSZWFkQW5kUGFzdGVJ
			ZkFsbEZpbGVzQXJlUmVhZCgpOw0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICAg
			IHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcjsNCiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSBm
			dW5jdGlvbiAoKSB7IHJldHVybiBtYXJrQXNSZWFkQW5kUGFzdGVJZkFsbEZpbGVzQXJlUmVhZCgp
			OyB9Ow0KICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHZh
			ciBjb250ZW50ID0gcmVhZGVyLnJlc3VsdDsNCiAgICAgICAgICBpZiAoL1tceDAwLVx4MDhceDBl
			LVx4MWZdezJ9Ly50ZXN0KGNvbnRlbnQpKSB7DQogICAgICAgICAgICBtYXJrQXNSZWFkQW5kUGFz
			dGVJZkFsbEZpbGVzQXJlUmVhZCgpOw0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgfQ0K
			ICAgICAgICAgIHRleHRbaV0gPSBjb250ZW50Ow0KICAgICAgICAgIG1hcmtBc1JlYWRBbmRQYXN0
			ZUlmQWxsRmlsZXNBcmVSZWFkKCk7DQogICAgICAgIH07DQogICAgICAgIHJlYWRlci5yZWFkQXNU
			ZXh0KGZpbGUpOw0KICAgICAgfTsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVu
			Z3RoOyBpKyspIHsgcmVhZFRleHRGcm9tRmlsZShmaWxlc1tpXSwgaSk7IH0NCiAgICB9IGVsc2Ug
			eyAvLyBOb3JtYWwgZHJvcA0KICAgICAgLy8gRG9uJ3QgZG8gYSByZXBsYWNlIGlmIHRoZSBkcm9w
			IGhhcHBlbmVkIGluc2lkZSBvZiB0aGUgc2VsZWN0ZWQgdGV4dC4NCiAgICAgIGlmIChjbS5zdGF0
			ZS5kcmFnZ2luZ1RleHQgJiYgY20uZG9jLnNlbC5jb250YWlucyhwb3MpID4gLTEpIHsNCiAgICAg
			ICAgY20uc3RhdGUuZHJhZ2dpbmdUZXh0KGUpOw0KICAgICAgICAvLyBFbnN1cmUgdGhlIGVkaXRv
			ciBpcyByZS1mb2N1c2VkDQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4g
			Y20uZGlzcGxheS5pbnB1dC5mb2N1cygpOyB9LCAyMCk7DQogICAgICAgIHJldHVybg0KICAgICAg
			fQ0KICAgICAgdHJ5IHsNCiAgICAgICAgdmFyIHRleHQkMSA9IGUuZGF0YVRyYW5zZmVyLmdldERh
			dGEoIlRleHQiKTsNCiAgICAgICAgaWYgKHRleHQkMSkgew0KICAgICAgICAgIHZhciBzZWxlY3Rl
			ZDsNCiAgICAgICAgICBpZiAoY20uc3RhdGUuZHJhZ2dpbmdUZXh0ICYmICFjbS5zdGF0ZS5kcmFn
			Z2luZ1RleHQuY29weSkNCiAgICAgICAgICAgIHsgc2VsZWN0ZWQgPSBjbS5saXN0U2VsZWN0aW9u
			cygpOyB9DQogICAgICAgICAgc2V0U2VsZWN0aW9uTm9VbmRvKGNtLmRvYywgc2ltcGxlU2VsZWN0
			aW9uKHBvcywgcG9zKSk7DQogICAgICAgICAgaWYgKHNlbGVjdGVkKSB7IGZvciAodmFyIGkkMSA9
			IDA7IGkkMSA8IHNlbGVjdGVkLmxlbmd0aDsgKytpJDEpDQogICAgICAgICAgICB7IHJlcGxhY2VS
			YW5nZShjbS5kb2MsICIiLCBzZWxlY3RlZFtpJDFdLmFuY2hvciwgc2VsZWN0ZWRbaSQxXS5oZWFk
			LCAiZHJhZyIpOyB9IH0NCiAgICAgICAgICBjbS5yZXBsYWNlU2VsZWN0aW9uKHRleHQkMSwgImFy
			b3VuZCIsICJwYXN0ZSIpOw0KICAgICAgICAgIGNtLmRpc3BsYXkuaW5wdXQuZm9jdXMoKTsNCiAg
			ICAgICAgfQ0KICAgICAgfQ0KICAgICAgY2F0Y2goZSl7fQ0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0
			aW9uIG9uRHJhZ1N0YXJ0KGNtLCBlKSB7DQogICAgaWYgKGllICYmICghY20uc3RhdGUuZHJhZ2dp
			bmdUZXh0IHx8ICtuZXcgRGF0ZSAtIGxhc3REcm9wIDwgMTAwKSkgeyBlX3N0b3AoZSk7IHJldHVy
			biB9DQogICAgaWYgKHNpZ25hbERPTUV2ZW50KGNtLCBlKSB8fCBldmVudEluV2lkZ2V0KGNtLmRp
			c3BsYXksIGUpKSB7IHJldHVybiB9DQoNCiAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCJUZXh0
			IiwgY20uZ2V0U2VsZWN0aW9uKCkpOw0KICAgIGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQg
			PSAiY29weU1vdmUiOw0KDQogICAgLy8gVXNlIGR1bW15IGltYWdlIGluc3RlYWQgb2YgZGVmYXVs
			dCBicm93c2VycyBpbWFnZS4NCiAgICAvLyBSZWNlbnQgU2FmYXJpICh+Ni4wLjIpIGhhdmUgYSB0
			ZW5kZW5jeSB0byBzZWdmYXVsdCB3aGVuIHRoaXMgaGFwcGVucywgc28gd2UgZG9uJ3QgZG8gaXQg
			dGhlcmUuDQogICAgaWYgKGUuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZSAmJiAhc2FmYXJpKSB7
			DQogICAgICB2YXIgaW1nID0gZWx0KCJpbWciLCBudWxsLCBudWxsLCAicG9zaXRpb246IGZpeGVk
			OyBsZWZ0OiAwOyB0b3A6IDA7Iik7DQogICAgICBpbWcuc3JjID0gImRhdGE6aW1hZ2UvZ2lmO2Jh
			c2U2NCxSMGxHT0RsaEFRQUJBQUFBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09
			IjsNCiAgICAgIGlmIChwcmVzdG8pIHsNCiAgICAgICAgaW1nLndpZHRoID0gaW1nLmhlaWdodCA9
			IDE7DQogICAgICAgIGNtLmRpc3BsYXkud3JhcHBlci5hcHBlbmRDaGlsZChpbWcpOw0KICAgICAg
			ICAvLyBGb3JjZSBhIHJlbGF5b3V0LCBvciBPcGVyYSB3b24ndCB1c2Ugb3VyIGltYWdlIGZvciBz
			b21lIG9ic2N1cmUgcmVhc29uDQogICAgICAgIGltZy5fdG9wID0gaW1nLm9mZnNldFRvcDsNCiAg
			ICAgIH0NCiAgICAgIGUuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShpbWcsIDAsIDApOw0KICAg
			ICAgaWYgKHByZXN0bykgeyBpbWcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpbWcpOyB9DQogICAg
			fQ0KICB9DQoNCiAgZnVuY3Rpb24gb25EcmFnT3ZlcihjbSwgZSkgew0KICAgIHZhciBwb3MgPSBw
			b3NGcm9tTW91c2UoY20sIGUpOw0KICAgIGlmICghcG9zKSB7IHJldHVybiB9DQogICAgdmFyIGZy
			YWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7DQogICAgZHJhd1NlbGVjdGlv
			bkN1cnNvcihjbSwgcG9zLCBmcmFnKTsNCiAgICBpZiAoIWNtLmRpc3BsYXkuZHJhZ0N1cnNvcikg
			ew0KICAgICAgY20uZGlzcGxheS5kcmFnQ3Vyc29yID0gZWx0KCJkaXYiLCBudWxsLCAiQ29kZU1p
			cnJvci1jdXJzb3JzIENvZGVNaXJyb3ItZHJhZ2N1cnNvcnMiKTsNCiAgICAgIGNtLmRpc3BsYXku
			bGluZVNwYWNlLmluc2VydEJlZm9yZShjbS5kaXNwbGF5LmRyYWdDdXJzb3IsIGNtLmRpc3BsYXku
			Y3Vyc29yRGl2KTsNCiAgICB9DQogICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQoY20uZGlzcGxheS5k
			cmFnQ3Vyc29yLCBmcmFnKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGNsZWFyRHJhZ0N1cnNvcihjbSkg
			ew0KICAgIGlmIChjbS5kaXNwbGF5LmRyYWdDdXJzb3IpIHsNCiAgICAgIGNtLmRpc3BsYXkubGlu
			ZVNwYWNlLnJlbW92ZUNoaWxkKGNtLmRpc3BsYXkuZHJhZ0N1cnNvcik7DQogICAgICBjbS5kaXNw
			bGF5LmRyYWdDdXJzb3IgPSBudWxsOw0KICAgIH0NCiAgfQ0KDQogIC8vIFRoZXNlIG11c3QgYmUg
			aGFuZGxlZCBjYXJlZnVsbHksIGJlY2F1c2UgbmFpdmVseSByZWdpc3RlcmluZyBhDQogIC8vIGhh
			bmRsZXIgZm9yIGVhY2ggZWRpdG9yIHdpbGwgY2F1c2UgdGhlIGVkaXRvcnMgdG8gbmV2ZXIgYmUN
			CiAgLy8gZ2FyYmFnZSBjb2xsZWN0ZWQuDQoNCiAgZnVuY3Rpb24gZm9yRWFjaENvZGVNaXJyb3Io
			Zikgew0KICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSkgeyByZXR1cm4g
			fQ0KICAgIHZhciBieUNsYXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiQ29k
			ZU1pcnJvciIpLCBlZGl0b3JzID0gW107DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBieUNsYXNz
			Lmxlbmd0aDsgaSsrKSB7DQogICAgICB2YXIgY20gPSBieUNsYXNzW2ldLkNvZGVNaXJyb3I7DQog
			ICAgICBpZiAoY20pIHsgZWRpdG9ycy5wdXNoKGNtKTsgfQ0KICAgIH0NCiAgICBpZiAoZWRpdG9y
			cy5sZW5ndGgpIHsgZWRpdG9yc1swXS5vcGVyYXRpb24oZnVuY3Rpb24gKCkgew0KICAgICAgZm9y
			ICh2YXIgaSA9IDA7IGkgPCBlZGl0b3JzLmxlbmd0aDsgaSsrKSB7IGYoZWRpdG9yc1tpXSk7IH0N
			CiAgICB9KTsgfQ0KICB9DQoNCiAgdmFyIGdsb2JhbHNSZWdpc3RlcmVkID0gZmFsc2U7DQogIGZ1
			bmN0aW9uIGVuc3VyZUdsb2JhbEhhbmRsZXJzKCkgew0KICAgIGlmIChnbG9iYWxzUmVnaXN0ZXJl
			ZCkgeyByZXR1cm4gfQ0KICAgIHJlZ2lzdGVyR2xvYmFsSGFuZGxlcnMoKTsNCiAgICBnbG9iYWxz
			UmVnaXN0ZXJlZCA9IHRydWU7DQogIH0NCiAgZnVuY3Rpb24gcmVnaXN0ZXJHbG9iYWxIYW5kbGVy
			cygpIHsNCiAgICAvLyBXaGVuIHRoZSB3aW5kb3cgcmVzaXplcywgd2UgbmVlZCB0byByZWZyZXNo
			IGFjdGl2ZSBlZGl0b3JzLg0KICAgIHZhciByZXNpemVUaW1lcjsNCiAgICBvbih3aW5kb3csICJy
			ZXNpemUiLCBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAocmVzaXplVGltZXIgPT0gbnVsbCkgeyBy
			ZXNpemVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICByZXNpemVUaW1l
			ciA9IG51bGw7DQogICAgICAgIGZvckVhY2hDb2RlTWlycm9yKG9uUmVzaXplKTsNCiAgICAgIH0s
			IDEwMCk7IH0NCiAgICB9KTsNCiAgICAvLyBXaGVuIHRoZSB3aW5kb3cgbG9zZXMgZm9jdXMsIHdl
			IHdhbnQgdG8gc2hvdyB0aGUgZWRpdG9yIGFzIGJsdXJyZWQNCiAgICBvbih3aW5kb3csICJibHVy
			IiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gZm9yRWFjaENvZGVNaXJyb3Iob25CbHVyKTsgfSk7DQog
			IH0NCiAgLy8gQ2FsbGVkIHdoZW4gdGhlIHdpbmRvdyByZXNpemVzDQogIGZ1bmN0aW9uIG9uUmVz
			aXplKGNtKSB7DQogICAgdmFyIGQgPSBjbS5kaXNwbGF5Ow0KICAgIC8vIE1pZ2h0IGJlIGEgdGV4
			dCBzY2FsaW5nIG9wZXJhdGlvbiwgY2xlYXIgc2l6ZSBjYWNoZXMuDQogICAgZC5jYWNoZWRDaGFy
			V2lkdGggPSBkLmNhY2hlZFRleHRIZWlnaHQgPSBkLmNhY2hlZFBhZGRpbmdIID0gbnVsbDsNCiAg
			ICBkLnNjcm9sbGJhcnNDbGlwcGVkID0gZmFsc2U7DQogICAgY20uc2V0U2l6ZSgpOw0KICB9DQoN
			CiAgdmFyIGtleU5hbWVzID0gew0KICAgIDM6ICJQYXVzZSIsIDg6ICJCYWNrc3BhY2UiLCA5OiAi
			VGFiIiwgMTM6ICJFbnRlciIsIDE2OiAiU2hpZnQiLCAxNzogIkN0cmwiLCAxODogIkFsdCIsDQog
			ICAgMTk6ICJQYXVzZSIsIDIwOiAiQ2Fwc0xvY2siLCAyNzogIkVzYyIsIDMyOiAiU3BhY2UiLCAz
			MzogIlBhZ2VVcCIsIDM0OiAiUGFnZURvd24iLCAzNTogIkVuZCIsDQogICAgMzY6ICJIb21lIiwg
			Mzc6ICJMZWZ0IiwgMzg6ICJVcCIsIDM5OiAiUmlnaHQiLCA0MDogIkRvd24iLCA0NDogIlByaW50
			U2NybiIsIDQ1OiAiSW5zZXJ0IiwNCiAgICA0NjogIkRlbGV0ZSIsIDU5OiAiOyIsIDYxOiAiPSIs
			IDkxOiAiTW9kIiwgOTI6ICJNb2QiLCA5MzogIk1vZCIsDQogICAgMTA2OiAiKiIsIDEwNzogIj0i
			LCAxMDk6ICItIiwgMTEwOiAiLiIsIDExMTogIi8iLCAxNDU6ICJTY3JvbGxMb2NrIiwNCiAgICAx
			NzM6ICItIiwgMTg2OiAiOyIsIDE4NzogIj0iLCAxODg6ICIsIiwgMTg5OiAiLSIsIDE5MDogIi4i
			LCAxOTE6ICIvIiwgMTkyOiAiYCIsIDIxOTogIlsiLCAyMjA6ICJcXCIsDQogICAgMjIxOiAiXSIs
			IDIyMjogIiciLCA2MzIzMjogIlVwIiwgNjMyMzM6ICJEb3duIiwgNjMyMzQ6ICJMZWZ0IiwgNjMy
			MzU6ICJSaWdodCIsIDYzMjcyOiAiRGVsZXRlIiwNCiAgICA2MzI3MzogIkhvbWUiLCA2MzI3NTog
			IkVuZCIsIDYzMjc2OiAiUGFnZVVwIiwgNjMyNzc6ICJQYWdlRG93biIsIDYzMzAyOiAiSW5zZXJ0
			Ig0KICB9Ow0KDQogIC8vIE51bWJlciBrZXlzDQogIGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkr
			KykgeyBrZXlOYW1lc1tpICsgNDhdID0ga2V5TmFtZXNbaSArIDk2XSA9IFN0cmluZyhpKTsgfQ0K
			ICAvLyBBbHBoYWJldGljIGtleXMNCiAgZm9yICh2YXIgaSQxID0gNjU7IGkkMSA8PSA5MDsgaSQx
			KyspIHsga2V5TmFtZXNbaSQxXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaSQxKTsgfQ0KICAvLyBG
			dW5jdGlvbiBrZXlzDQogIGZvciAodmFyIGkkMiA9IDE7IGkkMiA8PSAxMjsgaSQyKyspIHsga2V5
			TmFtZXNbaSQyICsgMTExXSA9IGtleU5hbWVzW2kkMiArIDYzMjM1XSA9ICJGIiArIGkkMjsgfQ0K
			DQogIHZhciBrZXlNYXAgPSB7fTsNCg0KICBrZXlNYXAuYmFzaWMgPSB7DQogICAgIkxlZnQiOiAi
			Z29DaGFyTGVmdCIsICJSaWdodCI6ICJnb0NoYXJSaWdodCIsICJVcCI6ICJnb0xpbmVVcCIsICJE
			b3duIjogImdvTGluZURvd24iLA0KICAgICJFbmQiOiAiZ29MaW5lRW5kIiwgIkhvbWUiOiAiZ29M
			aW5lU3RhcnRTbWFydCIsICJQYWdlVXAiOiAiZ29QYWdlVXAiLCAiUGFnZURvd24iOiAiZ29QYWdl
			RG93biIsDQogICAgIkRlbGV0ZSI6ICJkZWxDaGFyQWZ0ZXIiLCAiQmFja3NwYWNlIjogImRlbENo
			YXJCZWZvcmUiLCAiU2hpZnQtQmFja3NwYWNlIjogImRlbENoYXJCZWZvcmUiLA0KICAgICJUYWIi
			OiAiZGVmYXVsdFRhYiIsICJTaGlmdC1UYWIiOiAiaW5kZW50QXV0byIsDQogICAgIkVudGVyIjog
			Im5ld2xpbmVBbmRJbmRlbnQiLCAiSW5zZXJ0IjogInRvZ2dsZU92ZXJ3cml0ZSIsDQogICAgIkVz
			YyI6ICJzaW5nbGVTZWxlY3Rpb24iDQogIH07DQogIC8vIE5vdGUgdGhhdCB0aGUgc2F2ZSBhbmQg
			ZmluZC1yZWxhdGVkIGNvbW1hbmRzIGFyZW4ndCBkZWZpbmVkIGJ5DQogIC8vIGRlZmF1bHQuIFVz
			ZXIgY29kZSBvciBhZGRvbnMgY2FuIGRlZmluZSB0aGVtLiBVbmtub3duIGNvbW1hbmRzDQogIC8v
			IGFyZSBzaW1wbHkgaWdub3JlZC4NCiAga2V5TWFwLnBjRGVmYXVsdCA9IHsNCiAgICAiQ3RybC1B
			IjogInNlbGVjdEFsbCIsICJDdHJsLUQiOiAiZGVsZXRlTGluZSIsICJDdHJsLVoiOiAidW5kbyIs
			ICJTaGlmdC1DdHJsLVoiOiAicmVkbyIsICJDdHJsLVkiOiAicmVkbyIsDQogICAgIkN0cmwtSG9t
			ZSI6ICJnb0RvY1N0YXJ0IiwgIkN0cmwtRW5kIjogImdvRG9jRW5kIiwgIkN0cmwtVXAiOiAiZ29M
			aW5lVXAiLCAiQ3RybC1Eb3duIjogImdvTGluZURvd24iLA0KICAgICJDdHJsLUxlZnQiOiAiZ29H
			cm91cExlZnQiLCAiQ3RybC1SaWdodCI6ICJnb0dyb3VwUmlnaHQiLCAiQWx0LUxlZnQiOiAiZ29M
			aW5lU3RhcnQiLCAiQWx0LVJpZ2h0IjogImdvTGluZUVuZCIsDQogICAgIkN0cmwtQmFja3NwYWNl
			IjogImRlbEdyb3VwQmVmb3JlIiwgIkN0cmwtRGVsZXRlIjogImRlbEdyb3VwQWZ0ZXIiLCAiQ3Ry
			bC1TIjogInNhdmUiLCAiQ3RybC1GIjogImZpbmQiLA0KICAgICJDdHJsLUciOiAiZmluZE5leHQi
			LCAiU2hpZnQtQ3RybC1HIjogImZpbmRQcmV2IiwgIlNoaWZ0LUN0cmwtRiI6ICJyZXBsYWNlIiwg
			IlNoaWZ0LUN0cmwtUiI6ICJyZXBsYWNlQWxsIiwNCiAgICAiQ3RybC1bIjogImluZGVudExlc3Mi
			LCAiQ3RybC1dIjogImluZGVudE1vcmUiLA0KICAgICJDdHJsLVUiOiAidW5kb1NlbGVjdGlvbiIs
			ICJTaGlmdC1DdHJsLVUiOiAicmVkb1NlbGVjdGlvbiIsICJBbHQtVSI6ICJyZWRvU2VsZWN0aW9u
			IiwNCiAgICAiZmFsbHRocm91Z2giOiAiYmFzaWMiDQogIH07DQogIC8vIFZlcnkgYmFzaWMgcmVh
			ZGxpbmUvZW1hY3Mtc3R5bGUgYmluZGluZ3MsIHdoaWNoIGFyZSBzdGFuZGFyZCBvbiBNYWMuDQog
			IGtleU1hcC5lbWFjc3kgPSB7DQogICAgIkN0cmwtRiI6ICJnb0NoYXJSaWdodCIsICJDdHJsLUIi
			OiAiZ29DaGFyTGVmdCIsICJDdHJsLVAiOiAiZ29MaW5lVXAiLCAiQ3RybC1OIjogImdvTGluZURv
			d24iLA0KICAgICJBbHQtRiI6ICJnb1dvcmRSaWdodCIsICJBbHQtQiI6ICJnb1dvcmRMZWZ0Iiwg
			IkN0cmwtQSI6ICJnb0xpbmVTdGFydCIsICJDdHJsLUUiOiAiZ29MaW5lRW5kIiwNCiAgICAiQ3Ry
			bC1WIjogImdvUGFnZURvd24iLCAiU2hpZnQtQ3RybC1WIjogImdvUGFnZVVwIiwgIkN0cmwtRCI6
			ICJkZWxDaGFyQWZ0ZXIiLCAiQ3RybC1IIjogImRlbENoYXJCZWZvcmUiLA0KICAgICJBbHQtRCI6
			ICJkZWxXb3JkQWZ0ZXIiLCAiQWx0LUJhY2tzcGFjZSI6ICJkZWxXb3JkQmVmb3JlIiwgIkN0cmwt
			SyI6ICJraWxsTGluZSIsICJDdHJsLVQiOiAidHJhbnNwb3NlQ2hhcnMiLA0KICAgICJDdHJsLU8i
			OiAib3BlbkxpbmUiDQogIH07DQogIGtleU1hcC5tYWNEZWZhdWx0ID0gew0KICAgICJDbWQtQSI6
			ICJzZWxlY3RBbGwiLCAiQ21kLUQiOiAiZGVsZXRlTGluZSIsICJDbWQtWiI6ICJ1bmRvIiwgIlNo
			aWZ0LUNtZC1aIjogInJlZG8iLCAiQ21kLVkiOiAicmVkbyIsDQogICAgIkNtZC1Ib21lIjogImdv
			RG9jU3RhcnQiLCAiQ21kLVVwIjogImdvRG9jU3RhcnQiLCAiQ21kLUVuZCI6ICJnb0RvY0VuZCIs
			ICJDbWQtRG93biI6ICJnb0RvY0VuZCIsICJBbHQtTGVmdCI6ICJnb0dyb3VwTGVmdCIsDQogICAg
			IkFsdC1SaWdodCI6ICJnb0dyb3VwUmlnaHQiLCAiQ21kLUxlZnQiOiAiZ29MaW5lTGVmdCIsICJD
			bWQtUmlnaHQiOiAiZ29MaW5lUmlnaHQiLCAiQWx0LUJhY2tzcGFjZSI6ICJkZWxHcm91cEJlZm9y
			ZSIsDQogICAgIkN0cmwtQWx0LUJhY2tzcGFjZSI6ICJkZWxHcm91cEFmdGVyIiwgIkFsdC1EZWxl
			dGUiOiAiZGVsR3JvdXBBZnRlciIsICJDbWQtUyI6ICJzYXZlIiwgIkNtZC1GIjogImZpbmQiLA0K
			ICAgICJDbWQtRyI6ICJmaW5kTmV4dCIsICJTaGlmdC1DbWQtRyI6ICJmaW5kUHJldiIsICJDbWQt
			QWx0LUYiOiAicmVwbGFjZSIsICJTaGlmdC1DbWQtQWx0LUYiOiAicmVwbGFjZUFsbCIsDQogICAg
			IkNtZC1bIjogImluZGVudExlc3MiLCAiQ21kLV0iOiAiaW5kZW50TW9yZSIsICJDbWQtQmFja3Nw
			YWNlIjogImRlbFdyYXBwZWRMaW5lTGVmdCIsICJDbWQtRGVsZXRlIjogImRlbFdyYXBwZWRMaW5l
			UmlnaHQiLA0KICAgICJDbWQtVSI6ICJ1bmRvU2VsZWN0aW9uIiwgIlNoaWZ0LUNtZC1VIjogInJl
			ZG9TZWxlY3Rpb24iLCAiQ3RybC1VcCI6ICJnb0RvY1N0YXJ0IiwgIkN0cmwtRG93biI6ICJnb0Rv
			Y0VuZCIsDQogICAgImZhbGx0aHJvdWdoIjogWyJiYXNpYyIsICJlbWFjc3kiXQ0KICB9Ow0KICBr
			ZXlNYXBbImRlZmF1bHQiXSA9IG1hYyA/IGtleU1hcC5tYWNEZWZhdWx0IDoga2V5TWFwLnBjRGVm
			YXVsdDsNCg0KICAvLyBLRVlNQVAgRElTUEFUQ0gNCg0KICBmdW5jdGlvbiBub3JtYWxpemVLZXlO
			YW1lKG5hbWUpIHsNCiAgICB2YXIgcGFydHMgPSBuYW1lLnNwbGl0KC8tKD8hJCkvKTsNCiAgICBu
			YW1lID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07DQogICAgdmFyIGFsdCwgY3RybCwgc2hpZnQs
			IGNtZDsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKykgew0K
			ICAgICAgdmFyIG1vZCA9IHBhcnRzW2ldOw0KICAgICAgaWYgKC9eKGNtZHxtZXRhfG0pJC9pLnRl
			c3QobW9kKSkgeyBjbWQgPSB0cnVlOyB9DQogICAgICBlbHNlIGlmICgvXmEobHQpPyQvaS50ZXN0
			KG1vZCkpIHsgYWx0ID0gdHJ1ZTsgfQ0KICAgICAgZWxzZSBpZiAoL14oY3xjdHJsfGNvbnRyb2wp
			JC9pLnRlc3QobW9kKSkgeyBjdHJsID0gdHJ1ZTsgfQ0KICAgICAgZWxzZSBpZiAoL15zKGhpZnQp
			PyQvaS50ZXN0KG1vZCkpIHsgc2hpZnQgPSB0cnVlOyB9DQogICAgICBlbHNlIHsgdGhyb3cgbmV3
			IEVycm9yKCJVbnJlY29nbml6ZWQgbW9kaWZpZXIgbmFtZTogIiArIG1vZCkgfQ0KICAgIH0NCiAg
			ICBpZiAoYWx0KSB7IG5hbWUgPSAiQWx0LSIgKyBuYW1lOyB9DQogICAgaWYgKGN0cmwpIHsgbmFt
			ZSA9ICJDdHJsLSIgKyBuYW1lOyB9DQogICAgaWYgKGNtZCkgeyBuYW1lID0gIkNtZC0iICsgbmFt
			ZTsgfQ0KICAgIGlmIChzaGlmdCkgeyBuYW1lID0gIlNoaWZ0LSIgKyBuYW1lOyB9DQogICAgcmV0
			dXJuIG5hbWUNCiAgfQ0KDQogIC8vIFRoaXMgaXMgYSBrbHVkZ2UgdG8ga2VlcCBrZXltYXBzIG1v
			c3RseSB3b3JraW5nIGFzIHJhdyBvYmplY3RzDQogIC8vIChiYWNrd2FyZHMgY29tcGF0aWJpbGl0
			eSkgd2hpbGUgYXQgdGhlIHNhbWUgdGltZSBzdXBwb3J0IGZlYXR1cmVzDQogIC8vIGxpa2Ugbm9y
			bWFsaXphdGlvbiBhbmQgbXVsdGktc3Ryb2tlIGtleSBiaW5kaW5ncy4gSXQgY29tcGlsZXMgYQ0K
			ICAvLyBuZXcgbm9ybWFsaXplZCBrZXltYXAsIGFuZCB0aGVuIHVwZGF0ZXMgdGhlIG9sZCBvYmpl
			Y3QgdG8gcmVmbGVjdA0KICAvLyB0aGlzLg0KICBmdW5jdGlvbiBub3JtYWxpemVLZXlNYXAoa2V5
			bWFwKSB7DQogICAgdmFyIGNvcHkgPSB7fTsNCiAgICBmb3IgKHZhciBrZXluYW1lIGluIGtleW1h
			cCkgeyBpZiAoa2V5bWFwLmhhc093blByb3BlcnR5KGtleW5hbWUpKSB7DQogICAgICB2YXIgdmFs
			dWUgPSBrZXltYXBba2V5bmFtZV07DQogICAgICBpZiAoL14obmFtZXxmYWxsdGhyb3VnaHwoZGV8
			YXQpdGFjaCkkLy50ZXN0KGtleW5hbWUpKSB7IGNvbnRpbnVlIH0NCiAgICAgIGlmICh2YWx1ZSA9
			PSAiLi4uIikgeyBkZWxldGUga2V5bWFwW2tleW5hbWVdOyBjb250aW51ZSB9DQoNCiAgICAgIHZh
			ciBrZXlzID0gbWFwKGtleW5hbWUuc3BsaXQoIiAiKSwgbm9ybWFsaXplS2V5TmFtZSk7DQogICAg
			ICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgdmFyIHZh
			bCA9ICh2b2lkIDApLCBuYW1lID0gKHZvaWQgMCk7DQogICAgICAgIGlmIChpID09IGtleXMubGVu
			Z3RoIC0gMSkgew0KICAgICAgICAgIG5hbWUgPSBrZXlzLmpvaW4oIiAiKTsNCiAgICAgICAgICB2
			YWwgPSB2YWx1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBuYW1lID0ga2V5cy5zbGlj
			ZSgwLCBpICsgMSkuam9pbigiICIpOw0KICAgICAgICAgIHZhbCA9ICIuLi4iOw0KICAgICAgICB9
			DQogICAgICAgIHZhciBwcmV2ID0gY29weVtuYW1lXTsNCiAgICAgICAgaWYgKCFwcmV2KSB7IGNv
			cHlbbmFtZV0gPSB2YWw7IH0NCiAgICAgICAgZWxzZSBpZiAocHJldiAhPSB2YWwpIHsgdGhyb3cg
			bmV3IEVycm9yKCJJbmNvbnNpc3RlbnQgYmluZGluZ3MgZm9yICIgKyBuYW1lKSB9DQogICAgICB9
			DQogICAgICBkZWxldGUga2V5bWFwW2tleW5hbWVdOw0KICAgIH0gfQ0KICAgIGZvciAodmFyIHBy
			b3AgaW4gY29weSkgeyBrZXltYXBbcHJvcF0gPSBjb3B5W3Byb3BdOyB9DQogICAgcmV0dXJuIGtl
			eW1hcA0KICB9DQoNCiAgZnVuY3Rpb24gbG9va3VwS2V5KGtleSwgbWFwJCQxLCBoYW5kbGUsIGNv
			bnRleHQpIHsNCiAgICBtYXAkJDEgPSBnZXRLZXlNYXAobWFwJCQxKTsNCiAgICB2YXIgZm91bmQg
			PSBtYXAkJDEuY2FsbCA/IG1hcCQkMS5jYWxsKGtleSwgY29udGV4dCkgOiBtYXAkJDFba2V5XTsN
			CiAgICBpZiAoZm91bmQgPT09IGZhbHNlKSB7IHJldHVybiAibm90aGluZyIgfQ0KICAgIGlmIChm
			b3VuZCA9PT0gIi4uLiIpIHsgcmV0dXJuICJtdWx0aSIgfQ0KICAgIGlmIChmb3VuZCAhPSBudWxs
			ICYmIGhhbmRsZShmb3VuZCkpIHsgcmV0dXJuICJoYW5kbGVkIiB9DQoNCiAgICBpZiAobWFwJCQx
			LmZhbGx0aHJvdWdoKSB7DQogICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxs
			KG1hcCQkMS5mYWxsdGhyb3VnaCkgIT0gIltvYmplY3QgQXJyYXldIikNCiAgICAgICAgeyByZXR1
			cm4gbG9va3VwS2V5KGtleSwgbWFwJCQxLmZhbGx0aHJvdWdoLCBoYW5kbGUsIGNvbnRleHQpIH0N
			CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFwJCQxLmZhbGx0aHJvdWdoLmxlbmd0aDsgaSsr
			KSB7DQogICAgICAgIHZhciByZXN1bHQgPSBsb29rdXBLZXkoa2V5LCBtYXAkJDEuZmFsbHRocm91
			Z2hbaV0sIGhhbmRsZSwgY29udGV4dCk7DQogICAgICAgIGlmIChyZXN1bHQpIHsgcmV0dXJuIHJl
			c3VsdCB9DQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgLy8gTW9kaWZpZXIga2V5IHByZXNzZXMg
			ZG9uJ3QgY291bnQgYXMgJ3JlYWwnIGtleSBwcmVzc2VzIGZvciB0aGUNCiAgLy8gcHVycG9zZSBv
			ZiBrZXltYXAgZmFsbHRocm91Z2guDQogIGZ1bmN0aW9uIGlzTW9kaWZpZXJLZXkodmFsdWUpIHsN
			CiAgICB2YXIgbmFtZSA9IHR5cGVvZiB2YWx1ZSA9PSAic3RyaW5nIiA/IHZhbHVlIDoga2V5TmFt
			ZXNbdmFsdWUua2V5Q29kZV07DQogICAgcmV0dXJuIG5hbWUgPT0gIkN0cmwiIHx8IG5hbWUgPT0g
			IkFsdCIgfHwgbmFtZSA9PSAiU2hpZnQiIHx8IG5hbWUgPT0gIk1vZCINCiAgfQ0KDQogIGZ1bmN0
			aW9uIGFkZE1vZGlmaWVyTmFtZXMobmFtZSwgZXZlbnQsIG5vU2hpZnQpIHsNCiAgICB2YXIgYmFz
			ZSA9IG5hbWU7DQogICAgaWYgKGV2ZW50LmFsdEtleSAmJiBiYXNlICE9ICJBbHQiKSB7IG5hbWUg
			PSAiQWx0LSIgKyBuYW1lOyB9DQogICAgaWYgKChmbGlwQ3RybENtZCA/IGV2ZW50Lm1ldGFLZXkg
			OiBldmVudC5jdHJsS2V5KSAmJiBiYXNlICE9ICJDdHJsIikgeyBuYW1lID0gIkN0cmwtIiArIG5h
			bWU7IH0NCiAgICBpZiAoKGZsaXBDdHJsQ21kID8gZXZlbnQuY3RybEtleSA6IGV2ZW50Lm1ldGFL
			ZXkpICYmIGJhc2UgIT0gIkNtZCIpIHsgbmFtZSA9ICJDbWQtIiArIG5hbWU7IH0NCiAgICBpZiAo
			IW5vU2hpZnQgJiYgZXZlbnQuc2hpZnRLZXkgJiYgYmFzZSAhPSAiU2hpZnQiKSB7IG5hbWUgPSAi
			U2hpZnQtIiArIG5hbWU7IH0NCiAgICByZXR1cm4gbmFtZQ0KICB9DQoNCiAgLy8gTG9vayB1cCB0
			aGUgbmFtZSBvZiBhIGtleSBhcyBpbmRpY2F0ZWQgYnkgYW4gZXZlbnQgb2JqZWN0Lg0KICBmdW5j
			dGlvbiBrZXlOYW1lKGV2ZW50LCBub1NoaWZ0KSB7DQogICAgaWYgKHByZXN0byAmJiBldmVudC5r
			ZXlDb2RlID09IDM0ICYmIGV2ZW50WyJjaGFyIl0pIHsgcmV0dXJuIGZhbHNlIH0NCiAgICB2YXIg
			bmFtZSA9IGtleU5hbWVzW2V2ZW50LmtleUNvZGVdOw0KICAgIGlmIChuYW1lID09IG51bGwgfHwg
			ZXZlbnQuYWx0R3JhcGhLZXkpIHsgcmV0dXJuIGZhbHNlIH0NCiAgICAvLyBDdHJsLVNjcm9sbExv
			Y2sgaGFzIGtleUNvZGUgMywgc2FtZSBhcyBDdHJsLVBhdXNlLA0KICAgIC8vIHNvIHdlJ2xsIHVz
			ZSBldmVudC5jb2RlIHdoZW4gYXZhaWxhYmxlIChDaHJvbWUgNDgrLCBGRiAzOCssIFNhZmFyaSAx
			MC4xKykNCiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAzICYmIGV2ZW50LmNvZGUpIHsgbmFtZSA9
			IGV2ZW50LmNvZGU7IH0NCiAgICByZXR1cm4gYWRkTW9kaWZpZXJOYW1lcyhuYW1lLCBldmVudCwg
			bm9TaGlmdCkNCiAgfQ0KDQogIGZ1bmN0aW9uIGdldEtleU1hcCh2YWwpIHsNCiAgICByZXR1cm4g
			dHlwZW9mIHZhbCA9PSAic3RyaW5nIiA/IGtleU1hcFt2YWxdIDogdmFsDQogIH0NCg0KICAvLyBI
			ZWxwZXIgZm9yIGRlbGV0aW5nIHRleHQgbmVhciB0aGUgc2VsZWN0aW9uKHMpLCB1c2VkIHRvIGlt
			cGxlbWVudA0KICAvLyBiYWNrc3BhY2UsIGRlbGV0ZSwgYW5kIHNpbWlsYXIgZnVuY3Rpb25hbGl0
			eS4NCiAgZnVuY3Rpb24gZGVsZXRlTmVhclNlbGVjdGlvbihjbSwgY29tcHV0ZSkgew0KICAgIHZh
			ciByYW5nZXMgPSBjbS5kb2Muc2VsLnJhbmdlcywga2lsbCA9IFtdOw0KICAgIC8vIEJ1aWxkIHVw
			IGEgc2V0IG9mIHJhbmdlcyB0byBraWxsIGZpcnN0LCBtZXJnaW5nIG92ZXJsYXBwaW5nDQogICAg
			Ly8gcmFuZ2VzLg0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7
			DQogICAgICB2YXIgdG9LaWxsID0gY29tcHV0ZShyYW5nZXNbaV0pOw0KICAgICAgd2hpbGUgKGtp
			bGwubGVuZ3RoICYmIGNtcCh0b0tpbGwuZnJvbSwgbHN0KGtpbGwpLnRvKSA8PSAwKSB7DQogICAg
			ICAgIHZhciByZXBsYWNlZCA9IGtpbGwucG9wKCk7DQogICAgICAgIGlmIChjbXAocmVwbGFjZWQu
			ZnJvbSwgdG9LaWxsLmZyb20pIDwgMCkgew0KICAgICAgICAgIHRvS2lsbC5mcm9tID0gcmVwbGFj
			ZWQuZnJvbTsNCiAgICAgICAgICBicmVhaw0KICAgICAgICB9DQogICAgICB9DQogICAgICBraWxs
			LnB1c2godG9LaWxsKTsNCiAgICB9DQogICAgLy8gTmV4dCwgcmVtb3ZlIHRob3NlIGFjdHVhbCBy
			YW5nZXMuDQogICAgcnVuSW5PcChjbSwgZnVuY3Rpb24gKCkgew0KICAgICAgZm9yICh2YXIgaSA9
			IGtpbGwubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pDQogICAgICAgIHsgcmVwbGFjZVJhbmdlKGNt
			LmRvYywgIiIsIGtpbGxbaV0uZnJvbSwga2lsbFtpXS50bywgIitkZWxldGUiKTsgfQ0KICAgICAg
			ZW5zdXJlQ3Vyc29yVmlzaWJsZShjbSk7DQogICAgfSk7DQogIH0NCg0KICBmdW5jdGlvbiBtb3Zl
			Q2hhckxvZ2ljYWxseShsaW5lLCBjaCwgZGlyKSB7DQogICAgdmFyIHRhcmdldCA9IHNraXBFeHRl
			bmRpbmdDaGFycyhsaW5lLnRleHQsIGNoICsgZGlyLCBkaXIpOw0KICAgIHJldHVybiB0YXJnZXQg
			PCAwIHx8IHRhcmdldCA+IGxpbmUudGV4dC5sZW5ndGggPyBudWxsIDogdGFyZ2V0DQogIH0NCg0K
			ICBmdW5jdGlvbiBtb3ZlTG9naWNhbGx5KGxpbmUsIHN0YXJ0LCBkaXIpIHsNCiAgICB2YXIgY2gg
			PSBtb3ZlQ2hhckxvZ2ljYWxseShsaW5lLCBzdGFydC5jaCwgZGlyKTsNCiAgICByZXR1cm4gY2gg
			PT0gbnVsbCA/IG51bGwgOiBuZXcgUG9zKHN0YXJ0LmxpbmUsIGNoLCBkaXIgPCAwID8gImFmdGVy
			IiA6ICJiZWZvcmUiKQ0KICB9DQoNCiAgZnVuY3Rpb24gZW5kT2ZMaW5lKHZpc3VhbGx5LCBjbSwg
			bGluZU9iaiwgbGluZU5vLCBkaXIpIHsNCiAgICBpZiAodmlzdWFsbHkpIHsNCiAgICAgIGlmIChj
			bS5kb2MuZGlyZWN0aW9uID09ICJydGwiKSB7IGRpciA9IC1kaXI7IH0NCiAgICAgIHZhciBvcmRl
			ciA9IGdldE9yZGVyKGxpbmVPYmosIGNtLmRvYy5kaXJlY3Rpb24pOw0KICAgICAgaWYgKG9yZGVy
			KSB7DQogICAgICAgIHZhciBwYXJ0ID0gZGlyIDwgMCA/IGxzdChvcmRlcikgOiBvcmRlclswXTsN
			CiAgICAgICAgdmFyIG1vdmVJblN0b3JhZ2VPcmRlciA9IChkaXIgPCAwKSA9PSAocGFydC5sZXZl
			bCA9PSAxKTsNCiAgICAgICAgdmFyIHN0aWNreSA9IG1vdmVJblN0b3JhZ2VPcmRlciA/ICJhZnRl
			ciIgOiAiYmVmb3JlIjsNCiAgICAgICAgdmFyIGNoOw0KICAgICAgICAvLyBXaXRoIGEgd3JhcHBl
			ZCBydGwgY2h1bmsgKHBvc3NpYmx5IHNwYW5uaW5nIG11bHRpcGxlIGJpZGkgcGFydHMpLA0KICAg
			ICAgICAvLyBpdCBjb3VsZCBiZSB0aGF0IHRoZSBsYXN0IGJpZGkgcGFydCBpcyBub3Qgb24gdGhl
			IGxhc3QgdmlzdWFsIGxpbmUsDQogICAgICAgIC8vIHNpbmNlIHZpc3VhbCBsaW5lcyBjb250YWlu
			IGNvbnRlbnQgb3JkZXItY29uc2VjdXRpdmUgY2h1bmtzLg0KICAgICAgICAvLyBUaHVzLCBpbiBy
			dGwsIHdlIGFyZSBsb29raW5nIGZvciB0aGUgZmlyc3QgKGNvbnRlbnQtb3JkZXIpIGNoYXJhY3Rl
			cg0KICAgICAgICAvLyBpbiB0aGUgcnRsIGNodW5rIHRoYXQgaXMgb24gdGhlIGxhc3QgbGluZSAo
			dGhhdCBpcywgdGhlIHNhbWUgbGluZQ0KICAgICAgICAvLyBhcyB0aGUgbGFzdCAoY29udGVudC1v
			cmRlcikgY2hhcmFjdGVyKS4NCiAgICAgICAgaWYgKHBhcnQubGV2ZWwgPiAwIHx8IGNtLmRvYy5k
			aXJlY3Rpb24gPT0gInJ0bCIpIHsNCiAgICAgICAgICB2YXIgcHJlcCA9IHByZXBhcmVNZWFzdXJl
			Rm9yTGluZShjbSwgbGluZU9iaik7DQogICAgICAgICAgY2ggPSBkaXIgPCAwID8gbGluZU9iai50
			ZXh0Lmxlbmd0aCAtIDEgOiAwOw0KICAgICAgICAgIHZhciB0YXJnZXRUb3AgPSBtZWFzdXJlQ2hh
			clByZXBhcmVkKGNtLCBwcmVwLCBjaCkudG9wOw0KICAgICAgICAgIGNoID0gZmluZEZpcnN0KGZ1
			bmN0aW9uIChjaCkgeyByZXR1cm4gbWVhc3VyZUNoYXJQcmVwYXJlZChjbSwgcHJlcCwgY2gpLnRv
			cCA9PSB0YXJnZXRUb3A7IH0sIChkaXIgPCAwKSA9PSAocGFydC5sZXZlbCA9PSAxKSA/IHBhcnQu
			ZnJvbSA6IHBhcnQudG8gLSAxLCBjaCk7DQogICAgICAgICAgaWYgKHN0aWNreSA9PSAiYmVmb3Jl
			IikgeyBjaCA9IG1vdmVDaGFyTG9naWNhbGx5KGxpbmVPYmosIGNoLCAxKTsgfQ0KICAgICAgICB9
			IGVsc2UgeyBjaCA9IGRpciA8IDAgPyBwYXJ0LnRvIDogcGFydC5mcm9tOyB9DQogICAgICAgIHJl
			dHVybiBuZXcgUG9zKGxpbmVObywgY2gsIHN0aWNreSkNCiAgICAgIH0NCiAgICB9DQogICAgcmV0
			dXJuIG5ldyBQb3MobGluZU5vLCBkaXIgPCAwID8gbGluZU9iai50ZXh0Lmxlbmd0aCA6IDAsIGRp
			ciA8IDAgPyAiYmVmb3JlIiA6ICJhZnRlciIpDQogIH0NCg0KICBmdW5jdGlvbiBtb3ZlVmlzdWFs
			bHkoY20sIGxpbmUsIHN0YXJ0LCBkaXIpIHsNCiAgICB2YXIgYmlkaSA9IGdldE9yZGVyKGxpbmUs
			IGNtLmRvYy5kaXJlY3Rpb24pOw0KICAgIGlmICghYmlkaSkgeyByZXR1cm4gbW92ZUxvZ2ljYWxs
			eShsaW5lLCBzdGFydCwgZGlyKSB9DQogICAgaWYgKHN0YXJ0LmNoID49IGxpbmUudGV4dC5sZW5n
			dGgpIHsNCiAgICAgIHN0YXJ0LmNoID0gbGluZS50ZXh0Lmxlbmd0aDsNCiAgICAgIHN0YXJ0LnN0
			aWNreSA9ICJiZWZvcmUiOw0KICAgIH0gZWxzZSBpZiAoc3RhcnQuY2ggPD0gMCkgew0KICAgICAg
			c3RhcnQuY2ggPSAwOw0KICAgICAgc3RhcnQuc3RpY2t5ID0gImFmdGVyIjsNCiAgICB9DQogICAg
			dmFyIHBhcnRQb3MgPSBnZXRCaWRpUGFydEF0KGJpZGksIHN0YXJ0LmNoLCBzdGFydC5zdGlja3kp
			LCBwYXJ0ID0gYmlkaVtwYXJ0UG9zXTsNCiAgICBpZiAoY20uZG9jLmRpcmVjdGlvbiA9PSAibHRy
			IiAmJiBwYXJ0LmxldmVsICUgMiA9PSAwICYmIChkaXIgPiAwID8gcGFydC50byA+IHN0YXJ0LmNo
			IDogcGFydC5mcm9tIDwgc3RhcnQuY2gpKSB7DQogICAgICAvLyBDYXNlIDE6IFdlIG1vdmUgd2l0
			aGluIGFuIGx0ciBwYXJ0IGluIGFuIGx0ciBlZGl0b3IuIEV2ZW4gd2l0aCB3cmFwcGVkIGxpbmVz
			LA0KICAgICAgLy8gbm90aGluZyBpbnRlcmVzdGluZyBoYXBwZW5zLg0KICAgICAgcmV0dXJuIG1v
			dmVMb2dpY2FsbHkobGluZSwgc3RhcnQsIGRpcikNCiAgICB9DQoNCiAgICB2YXIgbXYgPSBmdW5j
			dGlvbiAocG9zLCBkaXIpIHsgcmV0dXJuIG1vdmVDaGFyTG9naWNhbGx5KGxpbmUsIHBvcyBpbnN0
			YW5jZW9mIFBvcyA/IHBvcy5jaCA6IHBvcywgZGlyKTsgfTsNCiAgICB2YXIgcHJlcDsNCiAgICB2
			YXIgZ2V0V3JhcHBlZExpbmVFeHRlbnQgPSBmdW5jdGlvbiAoY2gpIHsNCiAgICAgIGlmICghY20u
			b3B0aW9ucy5saW5lV3JhcHBpbmcpIHsgcmV0dXJuIHtiZWdpbjogMCwgZW5kOiBsaW5lLnRleHQu
			bGVuZ3RofSB9DQogICAgICBwcmVwID0gcHJlcCB8fCBwcmVwYXJlTWVhc3VyZUZvckxpbmUoY20s
			IGxpbmUpOw0KICAgICAgcmV0dXJuIHdyYXBwZWRMaW5lRXh0ZW50Q2hhcihjbSwgbGluZSwgcHJl
			cCwgY2gpDQogICAgfTsNCiAgICB2YXIgd3JhcHBlZExpbmVFeHRlbnQgPSBnZXRXcmFwcGVkTGlu
			ZUV4dGVudChzdGFydC5zdGlja3kgPT0gImJlZm9yZSIgPyBtdihzdGFydCwgLTEpIDogc3RhcnQu
			Y2gpOw0KDQogICAgaWYgKGNtLmRvYy5kaXJlY3Rpb24gPT0gInJ0bCIgfHwgcGFydC5sZXZlbCA9
			PSAxKSB7DQogICAgICB2YXIgbW92ZUluU3RvcmFnZU9yZGVyID0gKHBhcnQubGV2ZWwgPT0gMSkg
			PT0gKGRpciA8IDApOw0KICAgICAgdmFyIGNoID0gbXYoc3RhcnQsIG1vdmVJblN0b3JhZ2VPcmRl
			ciA/IDEgOiAtMSk7DQogICAgICBpZiAoY2ggIT0gbnVsbCAmJiAoIW1vdmVJblN0b3JhZ2VPcmRl
			ciA/IGNoID49IHBhcnQuZnJvbSAmJiBjaCA+PSB3cmFwcGVkTGluZUV4dGVudC5iZWdpbiA6IGNo
			IDw9IHBhcnQudG8gJiYgY2ggPD0gd3JhcHBlZExpbmVFeHRlbnQuZW5kKSkgew0KICAgICAgICAv
			LyBDYXNlIDI6IFdlIG1vdmUgd2l0aGluIGFuIHJ0bCBwYXJ0IG9yIGluIGFuIHJ0bCBlZGl0b3Ig
			b24gdGhlIHNhbWUgdmlzdWFsIGxpbmUNCiAgICAgICAgdmFyIHN0aWNreSA9IG1vdmVJblN0b3Jh
			Z2VPcmRlciA/ICJiZWZvcmUiIDogImFmdGVyIjsNCiAgICAgICAgcmV0dXJuIG5ldyBQb3Moc3Rh
			cnQubGluZSwgY2gsIHN0aWNreSkNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvLyBDYXNlIDM6IENv
			dWxkIG5vdCBtb3ZlIHdpdGhpbiB0aGlzIGJpZGkgcGFydCBpbiB0aGlzIHZpc3VhbCBsaW5lLCBz
			byBsZWF2ZQ0KICAgIC8vIHRoZSBjdXJyZW50IGJpZGkgcGFydA0KDQogICAgdmFyIHNlYXJjaElu
			VmlzdWFsTGluZSA9IGZ1bmN0aW9uIChwYXJ0UG9zLCBkaXIsIHdyYXBwZWRMaW5lRXh0ZW50KSB7
			DQogICAgICB2YXIgZ2V0UmVzID0gZnVuY3Rpb24gKGNoLCBtb3ZlSW5TdG9yYWdlT3JkZXIpIHsg
			cmV0dXJuIG1vdmVJblN0b3JhZ2VPcmRlcg0KICAgICAgICA/IG5ldyBQb3Moc3RhcnQubGluZSwg
			bXYoY2gsIDEpLCAiYmVmb3JlIikNCiAgICAgICAgOiBuZXcgUG9zKHN0YXJ0LmxpbmUsIGNoLCAi
			YWZ0ZXIiKTsgfTsNCg0KICAgICAgZm9yICg7IHBhcnRQb3MgPj0gMCAmJiBwYXJ0UG9zIDwgYmlk
			aS5sZW5ndGg7IHBhcnRQb3MgKz0gZGlyKSB7DQogICAgICAgIHZhciBwYXJ0ID0gYmlkaVtwYXJ0
			UG9zXTsNCiAgICAgICAgdmFyIG1vdmVJblN0b3JhZ2VPcmRlciA9IChkaXIgPiAwKSA9PSAocGFy
			dC5sZXZlbCAhPSAxKTsNCiAgICAgICAgdmFyIGNoID0gbW92ZUluU3RvcmFnZU9yZGVyID8gd3Jh
			cHBlZExpbmVFeHRlbnQuYmVnaW4gOiBtdih3cmFwcGVkTGluZUV4dGVudC5lbmQsIC0xKTsNCiAg
			ICAgICAgaWYgKHBhcnQuZnJvbSA8PSBjaCAmJiBjaCA8IHBhcnQudG8pIHsgcmV0dXJuIGdldFJl
			cyhjaCwgbW92ZUluU3RvcmFnZU9yZGVyKSB9DQogICAgICAgIGNoID0gbW92ZUluU3RvcmFnZU9y
			ZGVyID8gcGFydC5mcm9tIDogbXYocGFydC50bywgLTEpOw0KICAgICAgICBpZiAod3JhcHBlZExp
			bmVFeHRlbnQuYmVnaW4gPD0gY2ggJiYgY2ggPCB3cmFwcGVkTGluZUV4dGVudC5lbmQpIHsgcmV0
			dXJuIGdldFJlcyhjaCwgbW92ZUluU3RvcmFnZU9yZGVyKSB9DQogICAgICB9DQogICAgfTsNCg0K
			ICAgIC8vIENhc2UgM2E6IExvb2sgZm9yIG90aGVyIGJpZGkgcGFydHMgb24gdGhlIHNhbWUgdmlz
			dWFsIGxpbmUNCiAgICB2YXIgcmVzID0gc2VhcmNoSW5WaXN1YWxMaW5lKHBhcnRQb3MgKyBkaXIs
			IGRpciwgd3JhcHBlZExpbmVFeHRlbnQpOw0KICAgIGlmIChyZXMpIHsgcmV0dXJuIHJlcyB9DQoN
			CiAgICAvLyBDYXNlIDNiOiBMb29rIGZvciBvdGhlciBiaWRpIHBhcnRzIG9uIHRoZSBuZXh0IHZp
			c3VhbCBsaW5lDQogICAgdmFyIG5leHRDaCA9IGRpciA+IDAgPyB3cmFwcGVkTGluZUV4dGVudC5l
			bmQgOiBtdih3cmFwcGVkTGluZUV4dGVudC5iZWdpbiwgLTEpOw0KICAgIGlmIChuZXh0Q2ggIT0g
			bnVsbCAmJiAhKGRpciA+IDAgJiYgbmV4dENoID09IGxpbmUudGV4dC5sZW5ndGgpKSB7DQogICAg
			ICByZXMgPSBzZWFyY2hJblZpc3VhbExpbmUoZGlyID4gMCA/IDAgOiBiaWRpLmxlbmd0aCAtIDEs
			IGRpciwgZ2V0V3JhcHBlZExpbmVFeHRlbnQobmV4dENoKSk7DQogICAgICBpZiAocmVzKSB7IHJl
			dHVybiByZXMgfQ0KICAgIH0NCg0KICAgIC8vIENhc2UgNDogTm93aGVyZSB0byBtb3ZlDQogICAg
			cmV0dXJuIG51bGwNCiAgfQ0KDQogIC8vIENvbW1hbmRzIGFyZSBwYXJhbWV0ZXItbGVzcyBhY3Rp
			b25zIHRoYXQgY2FuIGJlIHBlcmZvcm1lZCBvbiBhbg0KICAvLyBlZGl0b3IsIG1vc3RseSB1c2Vk
			IGZvciBrZXliaW5kaW5ncy4NCiAgdmFyIGNvbW1hbmRzID0gew0KICAgIHNlbGVjdEFsbDogc2Vs
			ZWN0QWxsLA0KICAgIHNpbmdsZVNlbGVjdGlvbjogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5z
			ZXRTZWxlY3Rpb24oY20uZ2V0Q3Vyc29yKCJhbmNob3IiKSwgY20uZ2V0Q3Vyc29yKCJoZWFkIiks
			IHNlbF9kb250U2Nyb2xsKTsgfSwNCiAgICBraWxsTGluZTogZnVuY3Rpb24gKGNtKSB7IHJldHVy
			biBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbiAocmFuZ2UpIHsNCiAgICAgIGlmIChy
			YW5nZS5lbXB0eSgpKSB7DQogICAgICAgIHZhciBsZW4gPSBnZXRMaW5lKGNtLmRvYywgcmFuZ2Uu
			aGVhZC5saW5lKS50ZXh0Lmxlbmd0aDsNCiAgICAgICAgaWYgKHJhbmdlLmhlYWQuY2ggPT0gbGVu
			ICYmIHJhbmdlLmhlYWQubGluZSA8IGNtLmxhc3RMaW5lKCkpDQogICAgICAgICAgeyByZXR1cm4g
			e2Zyb206IHJhbmdlLmhlYWQsIHRvOiBQb3MocmFuZ2UuaGVhZC5saW5lICsgMSwgMCl9IH0NCiAg
			ICAgICAgZWxzZQ0KICAgICAgICAgIHsgcmV0dXJuIHtmcm9tOiByYW5nZS5oZWFkLCB0bzogUG9z
			KHJhbmdlLmhlYWQubGluZSwgbGVuKX0gfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJu
			IHtmcm9tOiByYW5nZS5mcm9tKCksIHRvOiByYW5nZS50bygpfQ0KICAgICAgfQ0KICAgIH0pOyB9
			LA0KICAgIGRlbGV0ZUxpbmU6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gZGVsZXRlTmVhclNlbGVj
			dGlvbihjbSwgZnVuY3Rpb24gKHJhbmdlKSB7IHJldHVybiAoew0KICAgICAgZnJvbTogUG9zKHJh
			bmdlLmZyb20oKS5saW5lLCAwKSwNCiAgICAgIHRvOiBjbGlwUG9zKGNtLmRvYywgUG9zKHJhbmdl
			LnRvKCkubGluZSArIDEsIDApKQ0KICAgIH0pOyB9KTsgfSwNCiAgICBkZWxMaW5lTGVmdDogZnVu
			Y3Rpb24gKGNtKSB7IHJldHVybiBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbiAocmFu
			Z2UpIHsgcmV0dXJuICh7DQogICAgICBmcm9tOiBQb3MocmFuZ2UuZnJvbSgpLmxpbmUsIDApLCB0
			bzogcmFuZ2UuZnJvbSgpDQogICAgfSk7IH0pOyB9LA0KICAgIGRlbFdyYXBwZWRMaW5lTGVmdDog
			ZnVuY3Rpb24gKGNtKSB7IHJldHVybiBkZWxldGVOZWFyU2VsZWN0aW9uKGNtLCBmdW5jdGlvbiAo
			cmFuZ2UpIHsNCiAgICAgIHZhciB0b3AgPSBjbS5jaGFyQ29vcmRzKHJhbmdlLmhlYWQsICJkaXYi
			KS50b3AgKyA1Ow0KICAgICAgdmFyIGxlZnRQb3MgPSBjbS5jb29yZHNDaGFyKHtsZWZ0OiAwLCB0
			b3A6IHRvcH0sICJkaXYiKTsNCiAgICAgIHJldHVybiB7ZnJvbTogbGVmdFBvcywgdG86IHJhbmdl
			LmZyb20oKX0NCiAgICB9KTsgfSwNCiAgICBkZWxXcmFwcGVkTGluZVJpZ2h0OiBmdW5jdGlvbiAo
			Y20pIHsgcmV0dXJuIGRlbGV0ZU5lYXJTZWxlY3Rpb24oY20sIGZ1bmN0aW9uIChyYW5nZSkgew0K
			ICAgICAgdmFyIHRvcCA9IGNtLmNoYXJDb29yZHMocmFuZ2UuaGVhZCwgImRpdiIpLnRvcCArIDU7
			DQogICAgICB2YXIgcmlnaHRQb3MgPSBjbS5jb29yZHNDaGFyKHtsZWZ0OiBjbS5kaXNwbGF5Lmxp
			bmVEaXYub2Zmc2V0V2lkdGggKyAxMDAsIHRvcDogdG9wfSwgImRpdiIpOw0KICAgICAgcmV0dXJu
			IHtmcm9tOiByYW5nZS5mcm9tKCksIHRvOiByaWdodFBvcyB9DQogICAgfSk7IH0sDQogICAgdW5k
			bzogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS51bmRvKCk7IH0sDQogICAgcmVkbzogZnVuY3Rp
			b24gKGNtKSB7IHJldHVybiBjbS5yZWRvKCk7IH0sDQogICAgdW5kb1NlbGVjdGlvbjogZnVuY3Rp
			b24gKGNtKSB7IHJldHVybiBjbS51bmRvU2VsZWN0aW9uKCk7IH0sDQogICAgcmVkb1NlbGVjdGlv
			bjogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5yZWRvU2VsZWN0aW9uKCk7IH0sDQogICAgZ29E
			b2NTdGFydDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5leHRlbmRTZWxlY3Rpb24oUG9zKGNt
			LmZpcnN0TGluZSgpLCAwKSk7IH0sDQogICAgZ29Eb2NFbmQ6IGZ1bmN0aW9uIChjbSkgeyByZXR1
			cm4gY20uZXh0ZW5kU2VsZWN0aW9uKFBvcyhjbS5sYXN0TGluZSgpKSk7IH0sDQogICAgZ29MaW5l
			U3RhcnQ6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1bmN0
			aW9uIChyYW5nZSkgeyByZXR1cm4gbGluZVN0YXJ0KGNtLCByYW5nZS5oZWFkLmxpbmUpOyB9LA0K
			ICAgICAge29yaWdpbjogIittb3ZlIiwgYmlhczogMX0NCiAgICApOyB9LA0KICAgIGdvTGluZVN0
			YXJ0U21hcnQ6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uZXh0ZW5kU2VsZWN0aW9uc0J5KGZ1
			bmN0aW9uIChyYW5nZSkgeyByZXR1cm4gbGluZVN0YXJ0U21hcnQoY20sIHJhbmdlLmhlYWQpOyB9
			LA0KICAgICAge29yaWdpbjogIittb3ZlIiwgYmlhczogMX0NCiAgICApOyB9LA0KICAgIGdvTGlu
			ZUVuZDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rp
			b24gKHJhbmdlKSB7IHJldHVybiBsaW5lRW5kKGNtLCByYW5nZS5oZWFkLmxpbmUpOyB9LA0KICAg
			ICAge29yaWdpbjogIittb3ZlIiwgYmlhczogLTF9DQogICAgKTsgfSwNCiAgICBnb0xpbmVSaWdo
			dDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24g
			KHJhbmdlKSB7DQogICAgICB2YXIgdG9wID0gY20uY3Vyc29yQ29vcmRzKHJhbmdlLmhlYWQsICJk
			aXYiKS50b3AgKyA1Ow0KICAgICAgcmV0dXJuIGNtLmNvb3Jkc0NoYXIoe2xlZnQ6IGNtLmRpc3Bs
			YXkubGluZURpdi5vZmZzZXRXaWR0aCArIDEwMCwgdG9wOiB0b3B9LCAiZGl2IikNCiAgICB9LCBz
			ZWxfbW92ZSk7IH0sDQogICAgZ29MaW5lTGVmdDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5l
			eHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24gKHJhbmdlKSB7DQogICAgICB2YXIgdG9wID0gY20u
			Y3Vyc29yQ29vcmRzKHJhbmdlLmhlYWQsICJkaXYiKS50b3AgKyA1Ow0KICAgICAgcmV0dXJuIGNt
			LmNvb3Jkc0NoYXIoe2xlZnQ6IDAsIHRvcDogdG9wfSwgImRpdiIpDQogICAgfSwgc2VsX21vdmUp
			OyB9LA0KICAgIGdvTGluZUxlZnRTbWFydDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5leHRl
			bmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24gKHJhbmdlKSB7DQogICAgICB2YXIgdG9wID0gY20uY3Vy
			c29yQ29vcmRzKHJhbmdlLmhlYWQsICJkaXYiKS50b3AgKyA1Ow0KICAgICAgdmFyIHBvcyA9IGNt
			LmNvb3Jkc0NoYXIoe2xlZnQ6IDAsIHRvcDogdG9wfSwgImRpdiIpOw0KICAgICAgaWYgKHBvcy5j
			aCA8IGNtLmdldExpbmUocG9zLmxpbmUpLnNlYXJjaCgvXFMvKSkgeyByZXR1cm4gbGluZVN0YXJ0
			U21hcnQoY20sIHJhbmdlLmhlYWQpIH0NCiAgICAgIHJldHVybiBwb3MNCiAgICB9LCBzZWxfbW92
			ZSk7IH0sDQogICAgZ29MaW5lVXA6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20ubW92ZVYoLTEs
			ICJsaW5lIik7IH0sDQogICAgZ29MaW5lRG93bjogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5t
			b3ZlVigxLCAibGluZSIpOyB9LA0KICAgIGdvUGFnZVVwOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJu
			IGNtLm1vdmVWKC0xLCAicGFnZSIpOyB9LA0KICAgIGdvUGFnZURvd246IGZ1bmN0aW9uIChjbSkg
			eyByZXR1cm4gY20ubW92ZVYoMSwgInBhZ2UiKTsgfSwNCiAgICBnb0NoYXJMZWZ0OiBmdW5jdGlv
			biAoY20pIHsgcmV0dXJuIGNtLm1vdmVIKC0xLCAiY2hhciIpOyB9LA0KICAgIGdvQ2hhclJpZ2h0
			OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLm1vdmVIKDEsICJjaGFyIik7IH0sDQogICAgZ29D
			b2x1bW5MZWZ0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLm1vdmVIKC0xLCAiY29sdW1uIik7
			IH0sDQogICAgZ29Db2x1bW5SaWdodDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5tb3ZlSCgx
			LCAiY29sdW1uIik7IH0sDQogICAgZ29Xb3JkTGVmdDogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBj
			bS5tb3ZlSCgtMSwgIndvcmQiKTsgfSwNCiAgICBnb0dyb3VwUmlnaHQ6IGZ1bmN0aW9uIChjbSkg
			eyByZXR1cm4gY20ubW92ZUgoMSwgImdyb3VwIik7IH0sDQogICAgZ29Hcm91cExlZnQ6IGZ1bmN0
			aW9uIChjbSkgeyByZXR1cm4gY20ubW92ZUgoLTEsICJncm91cCIpOyB9LA0KICAgIGdvV29yZFJp
			Z2h0OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLm1vdmVIKDEsICJ3b3JkIik7IH0sDQogICAg
			ZGVsQ2hhckJlZm9yZTogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5kZWxldGVIKC0xLCAiY2hh
			ciIpOyB9LA0KICAgIGRlbENoYXJBZnRlcjogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5kZWxl
			dGVIKDEsICJjaGFyIik7IH0sDQogICAgZGVsV29yZEJlZm9yZTogZnVuY3Rpb24gKGNtKSB7IHJl
			dHVybiBjbS5kZWxldGVIKC0xLCAid29yZCIpOyB9LA0KICAgIGRlbFdvcmRBZnRlcjogZnVuY3Rp
			b24gKGNtKSB7IHJldHVybiBjbS5kZWxldGVIKDEsICJ3b3JkIik7IH0sDQogICAgZGVsR3JvdXBC
			ZWZvcmU6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20uZGVsZXRlSCgtMSwgImdyb3VwIik7IH0s
			DQogICAgZGVsR3JvdXBBZnRlcjogZnVuY3Rpb24gKGNtKSB7IHJldHVybiBjbS5kZWxldGVIKDEs
			ICJncm91cCIpOyB9LA0KICAgIGluZGVudEF1dG86IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20u
			aW5kZW50U2VsZWN0aW9uKCJzbWFydCIpOyB9LA0KICAgIGluZGVudE1vcmU6IGZ1bmN0aW9uIChj
			bSkgeyByZXR1cm4gY20uaW5kZW50U2VsZWN0aW9uKCJhZGQiKTsgfSwNCiAgICBpbmRlbnRMZXNz
			OiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLmluZGVudFNlbGVjdGlvbigic3VidHJhY3QiKTsg
			fSwNCiAgICBpbnNlcnRUYWI6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20ucmVwbGFjZVNlbGVj
			dGlvbigiXHQiKTsgfSwNCiAgICBpbnNlcnRTb2Z0VGFiOiBmdW5jdGlvbiAoY20pIHsNCiAgICAg
			IHZhciBzcGFjZXMgPSBbXSwgcmFuZ2VzID0gY20ubGlzdFNlbGVjdGlvbnMoKSwgdGFiU2l6ZSA9
			IGNtLm9wdGlvbnMudGFiU2l6ZTsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxl
			bmd0aDsgaSsrKSB7DQogICAgICAgIHZhciBwb3MgPSByYW5nZXNbaV0uZnJvbSgpOw0KICAgICAg
			ICB2YXIgY29sID0gY291bnRDb2x1bW4oY20uZ2V0TGluZShwb3MubGluZSksIHBvcy5jaCwgdGFi
			U2l6ZSk7DQogICAgICAgIHNwYWNlcy5wdXNoKHNwYWNlU3RyKHRhYlNpemUgLSBjb2wgJSB0YWJT
			aXplKSk7DQogICAgICB9DQogICAgICBjbS5yZXBsYWNlU2VsZWN0aW9ucyhzcGFjZXMpOw0KICAg
			IH0sDQogICAgZGVmYXVsdFRhYjogZnVuY3Rpb24gKGNtKSB7DQogICAgICBpZiAoY20uc29tZXRo
			aW5nU2VsZWN0ZWQoKSkgeyBjbS5pbmRlbnRTZWxlY3Rpb24oImFkZCIpOyB9DQogICAgICBlbHNl
			IHsgY20uZXhlY0NvbW1hbmQoImluc2VydFRhYiIpOyB9DQogICAgfSwNCiAgICAvLyBTd2FwIHRo
			ZSB0d28gY2hhcnMgbGVmdCBhbmQgcmlnaHQgb2YgZWFjaCBzZWxlY3Rpb24ncyBoZWFkLg0KICAg
			IC8vIE1vdmUgY3Vyc29yIGJlaGluZCB0aGUgdHdvIHN3YXBwZWQgY2hhcmFjdGVycyBhZnRlcndh
			cmRzLg0KICAgIC8vDQogICAgLy8gRG9lc24ndCBjb25zaWRlciBsaW5lIGZlZWRzIGEgY2hhcmFj
			dGVyLg0KICAgIC8vIERvZXNuJ3Qgc2NhbiBtb3JlIHRoYW4gb25lIGxpbmUgYWJvdmUgdG8gZmlu
			ZCBhIGNoYXJhY3Rlci4NCiAgICAvLyBEb2Vzbid0IGRvIGFueXRoaW5nIG9uIGFuIGVtcHR5IGxp
			bmUuDQogICAgLy8gRG9lc24ndCBkbyBhbnl0aGluZyB3aXRoIG5vbi1lbXB0eSBzZWxlY3Rpb25z
			Lg0KICAgIHRyYW5zcG9zZUNoYXJzOiBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIHJ1bkluT3AoY20s
			IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciByYW5nZXMgPSBjbS5saXN0U2VsZWN0aW9ucygpLCBu
			ZXdTZWwgPSBbXTsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsr
			KSB7DQogICAgICAgIGlmICghcmFuZ2VzW2ldLmVtcHR5KCkpIHsgY29udGludWUgfQ0KICAgICAg
			ICB2YXIgY3VyID0gcmFuZ2VzW2ldLmhlYWQsIGxpbmUgPSBnZXRMaW5lKGNtLmRvYywgY3VyLmxp
			bmUpLnRleHQ7DQogICAgICAgIGlmIChsaW5lKSB7DQogICAgICAgICAgaWYgKGN1ci5jaCA9PSBs
			aW5lLmxlbmd0aCkgeyBjdXIgPSBuZXcgUG9zKGN1ci5saW5lLCBjdXIuY2ggLSAxKTsgfQ0KICAg
			ICAgICAgIGlmIChjdXIuY2ggPiAwKSB7DQogICAgICAgICAgICBjdXIgPSBuZXcgUG9zKGN1ci5s
			aW5lLCBjdXIuY2ggKyAxKTsNCiAgICAgICAgICAgIGNtLnJlcGxhY2VSYW5nZShsaW5lLmNoYXJB
			dChjdXIuY2ggLSAxKSArIGxpbmUuY2hhckF0KGN1ci5jaCAtIDIpLA0KICAgICAgICAgICAgICAg
			ICAgICAgICAgICAgIFBvcyhjdXIubGluZSwgY3VyLmNoIC0gMiksIGN1ciwgIit0cmFuc3Bvc2Ui
			KTsNCiAgICAgICAgICB9IGVsc2UgaWYgKGN1ci5saW5lID4gY20uZG9jLmZpcnN0KSB7DQogICAg
			ICAgICAgICB2YXIgcHJldiA9IGdldExpbmUoY20uZG9jLCBjdXIubGluZSAtIDEpLnRleHQ7DQog
			ICAgICAgICAgICBpZiAocHJldikgew0KICAgICAgICAgICAgICBjdXIgPSBuZXcgUG9zKGN1ci5s
			aW5lLCAxKTsNCiAgICAgICAgICAgICAgY20ucmVwbGFjZVJhbmdlKGxpbmUuY2hhckF0KDApICsg
			Y20uZG9jLmxpbmVTZXBhcmF0b3IoKSArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBw
			cmV2LmNoYXJBdChwcmV2Lmxlbmd0aCAtIDEpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAg
			ICAgUG9zKGN1ci5saW5lIC0gMSwgcHJldi5sZW5ndGggLSAxKSwgY3VyLCAiK3RyYW5zcG9zZSIp
			Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBuZXdTZWwu
			cHVzaChuZXcgUmFuZ2UoY3VyLCBjdXIpKTsNCiAgICAgIH0NCiAgICAgIGNtLnNldFNlbGVjdGlv
			bnMobmV3U2VsKTsNCiAgICB9KTsgfSwNCiAgICBuZXdsaW5lQW5kSW5kZW50OiBmdW5jdGlvbiAo
			Y20pIHsgcmV0dXJuIHJ1bkluT3AoY20sIGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciBzZWxzID0g
			Y20ubGlzdFNlbGVjdGlvbnMoKTsNCiAgICAgIGZvciAodmFyIGkgPSBzZWxzLmxlbmd0aCAtIDE7
			IGkgPj0gMDsgaS0tKQ0KICAgICAgICB7IGNtLnJlcGxhY2VSYW5nZShjbS5kb2MubGluZVNlcGFy
			YXRvcigpLCBzZWxzW2ldLmFuY2hvciwgc2Vsc1tpXS5oZWFkLCAiK2lucHV0Iik7IH0NCiAgICAg
			IHNlbHMgPSBjbS5saXN0U2VsZWN0aW9ucygpOw0KICAgICAgZm9yICh2YXIgaSQxID0gMDsgaSQx
			IDwgc2Vscy5sZW5ndGg7IGkkMSsrKQ0KICAgICAgICB7IGNtLmluZGVudExpbmUoc2Vsc1tpJDFd
			LmZyb20oKS5saW5lLCBudWxsLCB0cnVlKTsgfQ0KICAgICAgZW5zdXJlQ3Vyc29yVmlzaWJsZShj
			bSk7DQogICAgfSk7IH0sDQogICAgb3BlbkxpbmU6IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20u
			cmVwbGFjZVNlbGVjdGlvbigiXG4iLCAic3RhcnQiKTsgfSwNCiAgICB0b2dnbGVPdmVyd3JpdGU6
			IGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gY20udG9nZ2xlT3ZlcndyaXRlKCk7IH0NCiAgfTsNCg0K
			DQogIGZ1bmN0aW9uIGxpbmVTdGFydChjbSwgbGluZU4pIHsNCiAgICB2YXIgbGluZSA9IGdldExp
			bmUoY20uZG9jLCBsaW5lTik7DQogICAgdmFyIHZpc3VhbCA9IHZpc3VhbExpbmUobGluZSk7DQog
			ICAgaWYgKHZpc3VhbCAhPSBsaW5lKSB7IGxpbmVOID0gbGluZU5vKHZpc3VhbCk7IH0NCiAgICBy
			ZXR1cm4gZW5kT2ZMaW5lKHRydWUsIGNtLCB2aXN1YWwsIGxpbmVOLCAxKQ0KICB9DQogIGZ1bmN0
			aW9uIGxpbmVFbmQoY20sIGxpbmVOKSB7DQogICAgdmFyIGxpbmUgPSBnZXRMaW5lKGNtLmRvYywg
			bGluZU4pOw0KICAgIHZhciB2aXN1YWwgPSB2aXN1YWxMaW5lRW5kKGxpbmUpOw0KICAgIGlmICh2
			aXN1YWwgIT0gbGluZSkgeyBsaW5lTiA9IGxpbmVObyh2aXN1YWwpOyB9DQogICAgcmV0dXJuIGVu
			ZE9mTGluZSh0cnVlLCBjbSwgbGluZSwgbGluZU4sIC0xKQ0KICB9DQogIGZ1bmN0aW9uIGxpbmVT
			dGFydFNtYXJ0KGNtLCBwb3MpIHsNCiAgICB2YXIgc3RhcnQgPSBsaW5lU3RhcnQoY20sIHBvcy5s
			aW5lKTsNCiAgICB2YXIgbGluZSA9IGdldExpbmUoY20uZG9jLCBzdGFydC5saW5lKTsNCiAgICB2
			YXIgb3JkZXIgPSBnZXRPcmRlcihsaW5lLCBjbS5kb2MuZGlyZWN0aW9uKTsNCiAgICBpZiAoIW9y
			ZGVyIHx8IG9yZGVyWzBdLmxldmVsID09IDApIHsNCiAgICAgIHZhciBmaXJzdE5vbldTID0gTWF0
			aC5tYXgoc3RhcnQuY2gsIGxpbmUudGV4dC5zZWFyY2goL1xTLykpOw0KICAgICAgdmFyIGluV1Mg
			PSBwb3MubGluZSA9PSBzdGFydC5saW5lICYmIHBvcy5jaCA8PSBmaXJzdE5vbldTICYmIHBvcy5j
			aDsNCiAgICAgIHJldHVybiBQb3Moc3RhcnQubGluZSwgaW5XUyA/IDAgOiBmaXJzdE5vbldTLCBz
			dGFydC5zdGlja3kpDQogICAgfQ0KICAgIHJldHVybiBzdGFydA0KICB9DQoNCiAgLy8gUnVuIGEg
			aGFuZGxlciB0aGF0IHdhcyBib3VuZCB0byBhIGtleS4NCiAgZnVuY3Rpb24gZG9IYW5kbGVCaW5k
			aW5nKGNtLCBib3VuZCwgZHJvcFNoaWZ0KSB7DQogICAgaWYgKHR5cGVvZiBib3VuZCA9PSAic3Ry
			aW5nIikgew0KICAgICAgYm91bmQgPSBjb21tYW5kc1tib3VuZF07DQogICAgICBpZiAoIWJvdW5k
			KSB7IHJldHVybiBmYWxzZSB9DQogICAgfQ0KICAgIC8vIEVuc3VyZSBwcmV2aW91cyBpbnB1dCBo
			YXMgYmVlbiByZWFkLCBzbyB0aGF0IHRoZSBoYW5kbGVyIHNlZXMgYQ0KICAgIC8vIGNvbnNpc3Rl
			bnQgdmlldyBvZiB0aGUgZG9jdW1lbnQNCiAgICBjbS5kaXNwbGF5LmlucHV0LmVuc3VyZVBvbGxl
			ZCgpOw0KICAgIHZhciBwcmV2U2hpZnQgPSBjbS5kaXNwbGF5LnNoaWZ0LCBkb25lID0gZmFsc2U7
			DQogICAgdHJ5IHsNCiAgICAgIGlmIChjbS5pc1JlYWRPbmx5KCkpIHsgY20uc3RhdGUuc3VwcHJl
			c3NFZGl0cyA9IHRydWU7IH0NCiAgICAgIGlmIChkcm9wU2hpZnQpIHsgY20uZGlzcGxheS5zaGlm
			dCA9IGZhbHNlOyB9DQogICAgICBkb25lID0gYm91bmQoY20pICE9IFBhc3M7DQogICAgfSBmaW5h
			bGx5IHsNCiAgICAgIGNtLmRpc3BsYXkuc2hpZnQgPSBwcmV2U2hpZnQ7DQogICAgICBjbS5zdGF0
			ZS5zdXBwcmVzc0VkaXRzID0gZmFsc2U7DQogICAgfQ0KICAgIHJldHVybiBkb25lDQogIH0NCg0K
			ICBmdW5jdGlvbiBsb29rdXBLZXlGb3JFZGl0b3IoY20sIG5hbWUsIGhhbmRsZSkgew0KICAgIGZv
			ciAodmFyIGkgPSAwOyBpIDwgY20uc3RhdGUua2V5TWFwcy5sZW5ndGg7IGkrKykgew0KICAgICAg
			dmFyIHJlc3VsdCA9IGxvb2t1cEtleShuYW1lLCBjbS5zdGF0ZS5rZXlNYXBzW2ldLCBoYW5kbGUs
			IGNtKTsNCiAgICAgIGlmIChyZXN1bHQpIHsgcmV0dXJuIHJlc3VsdCB9DQogICAgfQ0KICAgIHJl
			dHVybiAoY20ub3B0aW9ucy5leHRyYUtleXMgJiYgbG9va3VwS2V5KG5hbWUsIGNtLm9wdGlvbnMu
			ZXh0cmFLZXlzLCBoYW5kbGUsIGNtKSkNCiAgICAgIHx8IGxvb2t1cEtleShuYW1lLCBjbS5vcHRp
			b25zLmtleU1hcCwgaGFuZGxlLCBjbSkNCiAgfQ0KDQogIC8vIE5vdGUgdGhhdCwgZGVzcGl0ZSB0
			aGUgbmFtZSwgdGhpcyBmdW5jdGlvbiBpcyBhbHNvIHVzZWQgdG8gY2hlY2sNCiAgLy8gZm9yIGJv
			dW5kIG1vdXNlIGNsaWNrcy4NCg0KICB2YXIgc3RvcFNlcSA9IG5ldyBEZWxheWVkOw0KDQogIGZ1
			bmN0aW9uIGRpc3BhdGNoS2V5KGNtLCBuYW1lLCBlLCBoYW5kbGUpIHsNCiAgICB2YXIgc2VxID0g
			Y20uc3RhdGUua2V5U2VxOw0KICAgIGlmIChzZXEpIHsNCiAgICAgIGlmIChpc01vZGlmaWVyS2V5
			KG5hbWUpKSB7IHJldHVybiAiaGFuZGxlZCIgfQ0KICAgICAgaWYgKC9cJyQvLnRlc3QobmFtZSkp
			DQogICAgICAgIHsgY20uc3RhdGUua2V5U2VxID0gbnVsbDsgfQ0KICAgICAgZWxzZQ0KICAgICAg
			ICB7IHN0b3BTZXEuc2V0KDUwLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgaWYgKGNtLnN0YXRl
			LmtleVNlcSA9PSBzZXEpIHsNCiAgICAgICAgICAgIGNtLnN0YXRlLmtleVNlcSA9IG51bGw7DQog
			ICAgICAgICAgICBjbS5kaXNwbGF5LmlucHV0LnJlc2V0KCk7DQogICAgICAgICAgfQ0KICAgICAg
			ICB9KTsgfQ0KICAgICAgaWYgKGRpc3BhdGNoS2V5SW5uZXIoY20sIHNlcSArICIgIiArIG5hbWUs
			IGUsIGhhbmRsZSkpIHsgcmV0dXJuIHRydWUgfQ0KICAgIH0NCiAgICByZXR1cm4gZGlzcGF0Y2hL
			ZXlJbm5lcihjbSwgbmFtZSwgZSwgaGFuZGxlKQ0KICB9DQoNCiAgZnVuY3Rpb24gZGlzcGF0Y2hL
			ZXlJbm5lcihjbSwgbmFtZSwgZSwgaGFuZGxlKSB7DQogICAgdmFyIHJlc3VsdCA9IGxvb2t1cEtl
			eUZvckVkaXRvcihjbSwgbmFtZSwgaGFuZGxlKTsNCg0KICAgIGlmIChyZXN1bHQgPT0gIm11bHRp
			IikNCiAgICAgIHsgY20uc3RhdGUua2V5U2VxID0gbmFtZTsgfQ0KICAgIGlmIChyZXN1bHQgPT0g
			ImhhbmRsZWQiKQ0KICAgICAgeyBzaWduYWxMYXRlcihjbSwgImtleUhhbmRsZWQiLCBjbSwgbmFt
			ZSwgZSk7IH0NCg0KICAgIGlmIChyZXN1bHQgPT0gImhhbmRsZWQiIHx8IHJlc3VsdCA9PSAibXVs
			dGkiKSB7DQogICAgICBlX3ByZXZlbnREZWZhdWx0KGUpOw0KICAgICAgcmVzdGFydEJsaW5rKGNt
			KTsNCiAgICB9DQoNCiAgICByZXR1cm4gISFyZXN1bHQNCiAgfQ0KDQogIC8vIEhhbmRsZSBhIGtl
			eSBmcm9tIHRoZSBrZXlkb3duIGV2ZW50Lg0KICBmdW5jdGlvbiBoYW5kbGVLZXlCaW5kaW5nKGNt
			LCBlKSB7DQogICAgdmFyIG5hbWUgPSBrZXlOYW1lKGUsIHRydWUpOw0KICAgIGlmICghbmFtZSkg
			eyByZXR1cm4gZmFsc2UgfQ0KDQogICAgaWYgKGUuc2hpZnRLZXkgJiYgIWNtLnN0YXRlLmtleVNl
			cSkgew0KICAgICAgLy8gRmlyc3QgdHJ5IHRvIHJlc29sdmUgZnVsbCBuYW1lIChpbmNsdWRpbmcg
			J1NoaWZ0LScpLiBGYWlsaW5nDQogICAgICAvLyB0aGF0LCBzZWUgaWYgdGhlcmUgaXMgYSBjdXJz
			b3ItbW90aW9uIGNvbW1hbmQgKHN0YXJ0aW5nIHdpdGgNCiAgICAgIC8vICdnbycpIGJvdW5kIHRv
			IHRoZSBrZXluYW1lIHdpdGhvdXQgJ1NoaWZ0LScuDQogICAgICByZXR1cm4gZGlzcGF0Y2hLZXko
			Y20sICJTaGlmdC0iICsgbmFtZSwgZSwgZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGRvSGFuZGxlQmlu
			ZGluZyhjbSwgYiwgdHJ1ZSk7IH0pDQogICAgICAgICAgfHwgZGlzcGF0Y2hLZXkoY20sIG5hbWUs
			IGUsIGZ1bmN0aW9uIChiKSB7DQogICAgICAgICAgICAgICBpZiAodHlwZW9mIGIgPT0gInN0cmlu
			ZyIgPyAvXmdvW0EtWl0vLnRlc3QoYikgOiBiLm1vdGlvbikNCiAgICAgICAgICAgICAgICAgeyBy
			ZXR1cm4gZG9IYW5kbGVCaW5kaW5nKGNtLCBiKSB9DQogICAgICAgICAgICAgfSkNCiAgICB9IGVs
			c2Ugew0KICAgICAgcmV0dXJuIGRpc3BhdGNoS2V5KGNtLCBuYW1lLCBlLCBmdW5jdGlvbiAoYikg
			eyByZXR1cm4gZG9IYW5kbGVCaW5kaW5nKGNtLCBiKTsgfSkNCiAgICB9DQogIH0NCg0KICAvLyBI
			YW5kbGUgYSBrZXkgZnJvbSB0aGUga2V5cHJlc3MgZXZlbnQNCiAgZnVuY3Rpb24gaGFuZGxlQ2hh
			ckJpbmRpbmcoY20sIGUsIGNoKSB7DQogICAgcmV0dXJuIGRpc3BhdGNoS2V5KGNtLCAiJyIgKyBj
			aCArICInIiwgZSwgZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGRvSGFuZGxlQmluZGluZyhjbSwgYiwg
			dHJ1ZSk7IH0pDQogIH0NCg0KICB2YXIgbGFzdFN0b3BwZWRLZXkgPSBudWxsOw0KICBmdW5jdGlv
			biBvbktleURvd24oZSkgew0KICAgIHZhciBjbSA9IHRoaXM7DQogICAgY20uY3VyT3AuZm9jdXMg
			PSBhY3RpdmVFbHQoKTsNCiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpKSB7IHJldHVybiB9
			DQogICAgLy8gSUUgZG9lcyBzdHJhbmdlIHRoaW5ncyB3aXRoIGVzY2FwZS4NCiAgICBpZiAoaWUg
			JiYgaWVfdmVyc2lvbiA8IDExICYmIGUua2V5Q29kZSA9PSAyNykgeyBlLnJldHVyblZhbHVlID0g
			ZmFsc2U7IH0NCiAgICB2YXIgY29kZSA9IGUua2V5Q29kZTsNCiAgICBjbS5kaXNwbGF5LnNoaWZ0
			ID0gY29kZSA9PSAxNiB8fCBlLnNoaWZ0S2V5Ow0KICAgIHZhciBoYW5kbGVkID0gaGFuZGxlS2V5
			QmluZGluZyhjbSwgZSk7DQogICAgaWYgKHByZXN0bykgew0KICAgICAgbGFzdFN0b3BwZWRLZXkg
			PSBoYW5kbGVkID8gY29kZSA6IG51bGw7DQogICAgICAvLyBPcGVyYSBoYXMgbm8gY3V0IGV2ZW50
			Li4uIHdlIHRyeSB0byBhdCBsZWFzdCBjYXRjaCB0aGUga2V5IGNvbWJvDQogICAgICBpZiAoIWhh
			bmRsZWQgJiYgY29kZSA9PSA4OCAmJiAhaGFzQ29weUV2ZW50ICYmIChtYWMgPyBlLm1ldGFLZXkg
			OiBlLmN0cmxLZXkpKQ0KICAgICAgICB7IGNtLnJlcGxhY2VTZWxlY3Rpb24oIiIsIG51bGwsICJj
			dXQiKTsgfQ0KICAgIH0NCiAgICBpZiAoZ2Vja28gJiYgIW1hYyAmJiAhaGFuZGxlZCAmJiBjb2Rl
			ID09IDQ2ICYmIGUuc2hpZnRLZXkgJiYgIWUuY3RybEtleSAmJiBkb2N1bWVudC5leGVjQ29tbWFu
			ZCkNCiAgICAgIHsgZG9jdW1lbnQuZXhlY0NvbW1hbmQoImN1dCIpOyB9DQoNCiAgICAvLyBUdXJu
			IG1vdXNlIGludG8gY3Jvc3NoYWlyIHdoZW4gQWx0IGlzIGhlbGQgb24gTWFjLg0KICAgIGlmIChj
			b2RlID09IDE4ICYmICEvXGJDb2RlTWlycm9yLWNyb3NzaGFpclxiLy50ZXN0KGNtLmRpc3BsYXku
			bGluZURpdi5jbGFzc05hbWUpKQ0KICAgICAgeyBzaG93Q3Jvc3NIYWlyKGNtKTsgfQ0KICB9DQoN
			CiAgZnVuY3Rpb24gc2hvd0Nyb3NzSGFpcihjbSkgew0KICAgIHZhciBsaW5lRGl2ID0gY20uZGlz
			cGxheS5saW5lRGl2Ow0KICAgIGFkZENsYXNzKGxpbmVEaXYsICJDb2RlTWlycm9yLWNyb3NzaGFp
			ciIpOw0KDQogICAgZnVuY3Rpb24gdXAoZSkgew0KICAgICAgaWYgKGUua2V5Q29kZSA9PSAxOCB8
			fCAhZS5hbHRLZXkpIHsNCiAgICAgICAgcm1DbGFzcyhsaW5lRGl2LCAiQ29kZU1pcnJvci1jcm9z
			c2hhaXIiKTsNCiAgICAgICAgb2ZmKGRvY3VtZW50LCAia2V5dXAiLCB1cCk7DQogICAgICAgIG9m
			Zihkb2N1bWVudCwgIm1vdXNlb3ZlciIsIHVwKTsNCiAgICAgIH0NCiAgICB9DQogICAgb24oZG9j
			dW1lbnQsICJrZXl1cCIsIHVwKTsNCiAgICBvbihkb2N1bWVudCwgIm1vdXNlb3ZlciIsIHVwKTsN
			CiAgfQ0KDQogIGZ1bmN0aW9uIG9uS2V5VXAoZSkgew0KICAgIGlmIChlLmtleUNvZGUgPT0gMTYp
			IHsgdGhpcy5kb2Muc2VsLnNoaWZ0ID0gZmFsc2U7IH0NCiAgICBzaWduYWxET01FdmVudCh0aGlz
			LCBlKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIG9uS2V5UHJlc3MoZSkgew0KICAgIHZhciBjbSA9IHRo
			aXM7DQogICAgaWYgKGV2ZW50SW5XaWRnZXQoY20uZGlzcGxheSwgZSkgfHwgc2lnbmFsRE9NRXZl
			bnQoY20sIGUpIHx8IGUuY3RybEtleSAmJiAhZS5hbHRLZXkgfHwgbWFjICYmIGUubWV0YUtleSkg
			eyByZXR1cm4gfQ0KICAgIHZhciBrZXlDb2RlID0gZS5rZXlDb2RlLCBjaGFyQ29kZSA9IGUuY2hh
			ckNvZGU7DQogICAgaWYgKHByZXN0byAmJiBrZXlDb2RlID09IGxhc3RTdG9wcGVkS2V5KSB7bGFz
			dFN0b3BwZWRLZXkgPSBudWxsOyBlX3ByZXZlbnREZWZhdWx0KGUpOyByZXR1cm59DQogICAgaWYg
			KChwcmVzdG8gJiYgKCFlLndoaWNoIHx8IGUud2hpY2ggPCAxMCkpICYmIGhhbmRsZUtleUJpbmRp
			bmcoY20sIGUpKSB7IHJldHVybiB9DQogICAgdmFyIGNoID0gU3RyaW5nLmZyb21DaGFyQ29kZShj
			aGFyQ29kZSA9PSBudWxsID8ga2V5Q29kZSA6IGNoYXJDb2RlKTsNCiAgICAvLyBTb21lIGJyb3dz
			ZXJzIGZpcmUga2V5cHJlc3MgZXZlbnRzIGZvciBiYWNrc3BhY2UNCiAgICBpZiAoY2ggPT0gIlx4
			MDgiKSB7IHJldHVybiB9DQogICAgaWYgKGhhbmRsZUNoYXJCaW5kaW5nKGNtLCBlLCBjaCkpIHsg
			cmV0dXJuIH0NCiAgICBjbS5kaXNwbGF5LmlucHV0Lm9uS2V5UHJlc3MoZSk7DQogIH0NCg0KICB2
			YXIgRE9VQkxFQ0xJQ0tfREVMQVkgPSA0MDA7DQoNCiAgdmFyIFBhc3RDbGljayA9IGZ1bmN0aW9u
			KHRpbWUsIHBvcywgYnV0dG9uKSB7DQogICAgdGhpcy50aW1lID0gdGltZTsNCiAgICB0aGlzLnBv
			cyA9IHBvczsNCiAgICB0aGlzLmJ1dHRvbiA9IGJ1dHRvbjsNCiAgfTsNCg0KICBQYXN0Q2xpY2su
			cHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiAodGltZSwgcG9zLCBidXR0b24pIHsNCiAgICBy
			ZXR1cm4gdGhpcy50aW1lICsgRE9VQkxFQ0xJQ0tfREVMQVkgPiB0aW1lICYmDQogICAgICBjbXAo
			cG9zLCB0aGlzLnBvcykgPT0gMCAmJiBidXR0b24gPT0gdGhpcy5idXR0b24NCiAgfTsNCg0KICB2
			YXIgbGFzdENsaWNrLCBsYXN0RG91YmxlQ2xpY2s7DQogIGZ1bmN0aW9uIGNsaWNrUmVwZWF0KHBv
			cywgYnV0dG9uKSB7DQogICAgdmFyIG5vdyA9ICtuZXcgRGF0ZTsNCiAgICBpZiAobGFzdERvdWJs
			ZUNsaWNrICYmIGxhc3REb3VibGVDbGljay5jb21wYXJlKG5vdywgcG9zLCBidXR0b24pKSB7DQog
			ICAgICBsYXN0Q2xpY2sgPSBsYXN0RG91YmxlQ2xpY2sgPSBudWxsOw0KICAgICAgcmV0dXJuICJ0
			cmlwbGUiDQogICAgfSBlbHNlIGlmIChsYXN0Q2xpY2sgJiYgbGFzdENsaWNrLmNvbXBhcmUobm93
			LCBwb3MsIGJ1dHRvbikpIHsNCiAgICAgIGxhc3REb3VibGVDbGljayA9IG5ldyBQYXN0Q2xpY2so
			bm93LCBwb3MsIGJ1dHRvbik7DQogICAgICBsYXN0Q2xpY2sgPSBudWxsOw0KICAgICAgcmV0dXJu
			ICJkb3VibGUiDQogICAgfSBlbHNlIHsNCiAgICAgIGxhc3RDbGljayA9IG5ldyBQYXN0Q2xpY2so
			bm93LCBwb3MsIGJ1dHRvbik7DQogICAgICBsYXN0RG91YmxlQ2xpY2sgPSBudWxsOw0KICAgICAg
			cmV0dXJuICJzaW5nbGUiDQogICAgfQ0KICB9DQoNCiAgLy8gQSBtb3VzZSBkb3duIGNhbiBiZSBh
			IHNpbmdsZSBjbGljaywgZG91YmxlIGNsaWNrLCB0cmlwbGUgY2xpY2ssDQogIC8vIHN0YXJ0IG9m
			IHNlbGVjdGlvbiBkcmFnLCBzdGFydCBvZiB0ZXh0IGRyYWcsIG5ldyBjdXJzb3INCiAgLy8gKGN0
			cmwtY2xpY2spLCByZWN0YW5nbGUgZHJhZyAoYWx0LWRyYWcpLCBvciB4d2luDQogIC8vIG1pZGRs
			ZS1jbGljay1wYXN0ZS4gT3IgaXQgbWlnaHQgYmUgYSBjbGljayBvbiBzb21ldGhpbmcgd2Ugc2hv
			dWxkDQogIC8vIG5vdCBpbnRlcmZlcmUgd2l0aCwgc3VjaCBhcyBhIHNjcm9sbGJhciBvciB3aWRn
			ZXQuDQogIGZ1bmN0aW9uIG9uTW91c2VEb3duKGUpIHsNCiAgICB2YXIgY20gPSB0aGlzLCBkaXNw
			bGF5ID0gY20uZGlzcGxheTsNCiAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpIHx8IGRpc3Bs
			YXkuYWN0aXZlVG91Y2ggJiYgZGlzcGxheS5pbnB1dC5zdXBwb3J0c1RvdWNoKCkpIHsgcmV0dXJu
			IH0NCiAgICBkaXNwbGF5LmlucHV0LmVuc3VyZVBvbGxlZCgpOw0KICAgIGRpc3BsYXkuc2hpZnQg
			PSBlLnNoaWZ0S2V5Ow0KDQogICAgaWYgKGV2ZW50SW5XaWRnZXQoZGlzcGxheSwgZSkpIHsNCiAg
			ICAgIGlmICghd2Via2l0KSB7DQogICAgICAgIC8vIEJyaWVmbHkgdHVybiBvZmYgZHJhZ2dhYmls
			aXR5LCB0byBhbGxvdyB3aWRnZXRzIHRvIGRvDQogICAgICAgIC8vIG5vcm1hbCBkcmFnZ2luZyB0
			aGluZ3MuDQogICAgICAgIGRpc3BsYXkuc2Nyb2xsZXIuZHJhZ2dhYmxlID0gZmFsc2U7DQogICAg
			ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZGlzcGxheS5zY3JvbGxlci5kcmFn
			Z2FibGUgPSB0cnVlOyB9LCAxMDApOw0KICAgICAgfQ0KICAgICAgcmV0dXJuDQogICAgfQ0KICAg
			IGlmIChjbGlja0luR3V0dGVyKGNtLCBlKSkgeyByZXR1cm4gfQ0KICAgIHZhciBwb3MgPSBwb3NG
			cm9tTW91c2UoY20sIGUpLCBidXR0b24gPSBlX2J1dHRvbihlKSwgcmVwZWF0ID0gcG9zID8gY2xp
			Y2tSZXBlYXQocG9zLCBidXR0b24pIDogInNpbmdsZSI7DQogICAgd2luZG93LmZvY3VzKCk7DQoN
			CiAgICAvLyAjMzI2MTogbWFrZSBzdXJlLCB0aGF0IHdlJ3JlIG5vdCBzdGFydGluZyBhIHNlY29u
			ZCBzZWxlY3Rpb24NCiAgICBpZiAoYnV0dG9uID09IDEgJiYgY20uc3RhdGUuc2VsZWN0aW5nVGV4
			dCkNCiAgICAgIHsgY20uc3RhdGUuc2VsZWN0aW5nVGV4dChlKTsgfQ0KDQogICAgaWYgKHBvcyAm
			JiBoYW5kbGVNYXBwZWRCdXR0b24oY20sIGJ1dHRvbiwgcG9zLCByZXBlYXQsIGUpKSB7IHJldHVy
			biB9DQoNCiAgICBpZiAoYnV0dG9uID09IDEpIHsNCiAgICAgIGlmIChwb3MpIHsgbGVmdEJ1dHRv
			bkRvd24oY20sIHBvcywgcmVwZWF0LCBlKTsgfQ0KICAgICAgZWxzZSBpZiAoZV90YXJnZXQoZSkg
			PT0gZGlzcGxheS5zY3JvbGxlcikgeyBlX3ByZXZlbnREZWZhdWx0KGUpOyB9DQogICAgfSBlbHNl
			IGlmIChidXR0b24gPT0gMikgew0KICAgICAgaWYgKHBvcykgeyBleHRlbmRTZWxlY3Rpb24oY20u
			ZG9jLCBwb3MpOyB9DQogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRpc3Bs
			YXkuaW5wdXQuZm9jdXMoKTsgfSwgMjApOw0KICAgIH0gZWxzZSBpZiAoYnV0dG9uID09IDMpIHsN
			CiAgICAgIGlmIChjYXB0dXJlUmlnaHRDbGljaykgeyBjbS5kaXNwbGF5LmlucHV0Lm9uQ29udGV4
			dE1lbnUoZSk7IH0NCiAgICAgIGVsc2UgeyBkZWxheUJsdXJFdmVudChjbSk7IH0NCiAgICB9DQog
			IH0NCg0KICBmdW5jdGlvbiBoYW5kbGVNYXBwZWRCdXR0b24oY20sIGJ1dHRvbiwgcG9zLCByZXBl
			YXQsIGV2ZW50KSB7DQogICAgdmFyIG5hbWUgPSAiQ2xpY2siOw0KICAgIGlmIChyZXBlYXQgPT0g
			ImRvdWJsZSIpIHsgbmFtZSA9ICJEb3VibGUiICsgbmFtZTsgfQ0KICAgIGVsc2UgaWYgKHJlcGVh
			dCA9PSAidHJpcGxlIikgeyBuYW1lID0gIlRyaXBsZSIgKyBuYW1lOyB9DQogICAgbmFtZSA9IChi
			dXR0b24gPT0gMSA/ICJMZWZ0IiA6IGJ1dHRvbiA9PSAyID8gIk1pZGRsZSIgOiAiUmlnaHQiKSAr
			IG5hbWU7DQoNCiAgICByZXR1cm4gZGlzcGF0Y2hLZXkoY20sICBhZGRNb2RpZmllck5hbWVzKG5h
			bWUsIGV2ZW50KSwgZXZlbnQsIGZ1bmN0aW9uIChib3VuZCkgew0KICAgICAgaWYgKHR5cGVvZiBi
			b3VuZCA9PSAic3RyaW5nIikgeyBib3VuZCA9IGNvbW1hbmRzW2JvdW5kXTsgfQ0KICAgICAgaWYg
			KCFib3VuZCkgeyByZXR1cm4gZmFsc2UgfQ0KICAgICAgdmFyIGRvbmUgPSBmYWxzZTsNCiAgICAg
			IHRyeSB7DQogICAgICAgIGlmIChjbS5pc1JlYWRPbmx5KCkpIHsgY20uc3RhdGUuc3VwcHJlc3NF
			ZGl0cyA9IHRydWU7IH0NCiAgICAgICAgZG9uZSA9IGJvdW5kKGNtLCBwb3MpICE9IFBhc3M7DQog
			ICAgICB9IGZpbmFsbHkgew0KICAgICAgICBjbS5zdGF0ZS5zdXBwcmVzc0VkaXRzID0gZmFsc2U7
			DQogICAgICB9DQogICAgICByZXR1cm4gZG9uZQ0KICAgIH0pDQogIH0NCg0KICBmdW5jdGlvbiBj
			b25maWd1cmVNb3VzZShjbSwgcmVwZWF0LCBldmVudCkgew0KICAgIHZhciBvcHRpb24gPSBjbS5n
			ZXRPcHRpb24oImNvbmZpZ3VyZU1vdXNlIik7DQogICAgdmFyIHZhbHVlID0gb3B0aW9uID8gb3B0
			aW9uKGNtLCByZXBlYXQsIGV2ZW50KSA6IHt9Ow0KICAgIGlmICh2YWx1ZS51bml0ID09IG51bGwp
			IHsNCiAgICAgIHZhciByZWN0ID0gY2hyb21lT1MgPyBldmVudC5zaGlmdEtleSAmJiBldmVudC5t
			ZXRhS2V5IDogZXZlbnQuYWx0S2V5Ow0KICAgICAgdmFsdWUudW5pdCA9IHJlY3QgPyAicmVjdGFu
			Z2xlIiA6IHJlcGVhdCA9PSAic2luZ2xlIiA/ICJjaGFyIiA6IHJlcGVhdCA9PSAiZG91YmxlIiA/
			ICJ3b3JkIiA6ICJsaW5lIjsNCiAgICB9DQogICAgaWYgKHZhbHVlLmV4dGVuZCA9PSBudWxsIHx8
			IGNtLmRvYy5leHRlbmQpIHsgdmFsdWUuZXh0ZW5kID0gY20uZG9jLmV4dGVuZCB8fCBldmVudC5z
			aGlmdEtleTsgfQ0KICAgIGlmICh2YWx1ZS5hZGROZXcgPT0gbnVsbCkgeyB2YWx1ZS5hZGROZXcg
			PSBtYWMgPyBldmVudC5tZXRhS2V5IDogZXZlbnQuY3RybEtleTsgfQ0KICAgIGlmICh2YWx1ZS5t
			b3ZlT25EcmFnID09IG51bGwpIHsgdmFsdWUubW92ZU9uRHJhZyA9ICEobWFjID8gZXZlbnQuYWx0
			S2V5IDogZXZlbnQuY3RybEtleSk7IH0NCiAgICByZXR1cm4gdmFsdWUNCiAgfQ0KDQogIGZ1bmN0
			aW9uIGxlZnRCdXR0b25Eb3duKGNtLCBwb3MsIHJlcGVhdCwgZXZlbnQpIHsNCiAgICBpZiAoaWUp
			IHsgc2V0VGltZW91dChiaW5kKGVuc3VyZUZvY3VzLCBjbSksIDApOyB9DQogICAgZWxzZSB7IGNt
			LmN1ck9wLmZvY3VzID0gYWN0aXZlRWx0KCk7IH0NCg0KICAgIHZhciBiZWhhdmlvciA9IGNvbmZp
			Z3VyZU1vdXNlKGNtLCByZXBlYXQsIGV2ZW50KTsNCg0KICAgIHZhciBzZWwgPSBjbS5kb2Muc2Vs
			LCBjb250YWluZWQ7DQogICAgaWYgKGNtLm9wdGlvbnMuZHJhZ0Ryb3AgJiYgZHJhZ0FuZERyb3Ag
			JiYgIWNtLmlzUmVhZE9ubHkoKSAmJg0KICAgICAgICByZXBlYXQgPT0gInNpbmdsZSIgJiYgKGNv
			bnRhaW5lZCA9IHNlbC5jb250YWlucyhwb3MpKSA+IC0xICYmDQogICAgICAgIChjbXAoKGNvbnRh
			aW5lZCA9IHNlbC5yYW5nZXNbY29udGFpbmVkXSkuZnJvbSgpLCBwb3MpIDwgMCB8fCBwb3MueFJl
			bCA+IDApICYmDQogICAgICAgIChjbXAoY29udGFpbmVkLnRvKCksIHBvcykgPiAwIHx8IHBvcy54
			UmVsIDwgMCkpDQogICAgICB7IGxlZnRCdXR0b25TdGFydERyYWcoY20sIGV2ZW50LCBwb3MsIGJl
			aGF2aW9yKTsgfQ0KICAgIGVsc2UNCiAgICAgIHsgbGVmdEJ1dHRvblNlbGVjdChjbSwgZXZlbnQs
			IHBvcywgYmVoYXZpb3IpOyB9DQogIH0NCg0KICAvLyBTdGFydCBhIHRleHQgZHJhZy4gV2hlbiBp
			dCBlbmRzLCBzZWUgaWYgYW55IGRyYWdnaW5nIGFjdHVhbGx5DQogIC8vIGhhcHBlbiwgYW5kIHRy
			ZWF0IGFzIGEgY2xpY2sgaWYgaXQgZGlkbid0Lg0KICBmdW5jdGlvbiBsZWZ0QnV0dG9uU3RhcnRE
			cmFnKGNtLCBldmVudCwgcG9zLCBiZWhhdmlvcikgew0KICAgIHZhciBkaXNwbGF5ID0gY20uZGlz
			cGxheSwgbW92ZWQgPSBmYWxzZTsNCiAgICB2YXIgZHJhZ0VuZCA9IG9wZXJhdGlvbihjbSwgZnVu
			Y3Rpb24gKGUpIHsNCiAgICAgIGlmICh3ZWJraXQpIHsgZGlzcGxheS5zY3JvbGxlci5kcmFnZ2Fi
			bGUgPSBmYWxzZTsgfQ0KICAgICAgY20uc3RhdGUuZHJhZ2dpbmdUZXh0ID0gZmFsc2U7DQogICAg
			ICBvZmYoZGlzcGxheS53cmFwcGVyLm93bmVyRG9jdW1lbnQsICJtb3VzZXVwIiwgZHJhZ0VuZCk7
			DQogICAgICBvZmYoZGlzcGxheS53cmFwcGVyLm93bmVyRG9jdW1lbnQsICJtb3VzZW1vdmUiLCBt
			b3VzZU1vdmUpOw0KICAgICAgb2ZmKGRpc3BsYXkuc2Nyb2xsZXIsICJkcmFnc3RhcnQiLCBkcmFn
			U3RhcnQpOw0KICAgICAgb2ZmKGRpc3BsYXkuc2Nyb2xsZXIsICJkcm9wIiwgZHJhZ0VuZCk7DQog
			ICAgICBpZiAoIW1vdmVkKSB7DQogICAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7DQogICAgICAg
			IGlmICghYmVoYXZpb3IuYWRkTmV3KQ0KICAgICAgICAgIHsgZXh0ZW5kU2VsZWN0aW9uKGNtLmRv
			YywgcG9zLCBudWxsLCBudWxsLCBiZWhhdmlvci5leHRlbmQpOyB9DQogICAgICAgIC8vIFdvcmsg
			YXJvdW5kIHVuZXhwbGFpbmFibGUgZm9jdXMgcHJvYmxlbSBpbiBJRTkgKCMyMTI3KSBhbmQgQ2hy
			b21lICgjMzA4MSkNCiAgICAgICAgaWYgKHdlYmtpdCB8fCBpZSAmJiBpZV92ZXJzaW9uID09IDkp
			DQogICAgICAgICAgeyBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtkaXNwbGF5LndyYXBwZXIub3du
			ZXJEb2N1bWVudC5ib2R5LmZvY3VzKCk7IGRpc3BsYXkuaW5wdXQuZm9jdXMoKTt9LCAyMCk7IH0N
			CiAgICAgICAgZWxzZQ0KICAgICAgICAgIHsgZGlzcGxheS5pbnB1dC5mb2N1cygpOyB9DQogICAg
			ICB9DQogICAgfSk7DQogICAgdmFyIG1vdXNlTW92ZSA9IGZ1bmN0aW9uKGUyKSB7DQogICAgICBt
			b3ZlZCA9IG1vdmVkIHx8IE1hdGguYWJzKGV2ZW50LmNsaWVudFggLSBlMi5jbGllbnRYKSArIE1h
			dGguYWJzKGV2ZW50LmNsaWVudFkgLSBlMi5jbGllbnRZKSA+PSAxMDsNCiAgICB9Ow0KICAgIHZh
			ciBkcmFnU3RhcnQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBtb3ZlZCA9IHRydWU7IH07DQogICAg
			Ly8gTGV0IHRoZSBkcmFnIGhhbmRsZXIgaGFuZGxlIHRoaXMuDQogICAgaWYgKHdlYmtpdCkgeyBk
			aXNwbGF5LnNjcm9sbGVyLmRyYWdnYWJsZSA9IHRydWU7IH0NCiAgICBjbS5zdGF0ZS5kcmFnZ2lu
			Z1RleHQgPSBkcmFnRW5kOw0KICAgIGRyYWdFbmQuY29weSA9ICFiZWhhdmlvci5tb3ZlT25EcmFn
			Ow0KICAgIC8vIElFJ3MgYXBwcm9hY2ggdG8gZHJhZ2dhYmxlDQogICAgaWYgKGRpc3BsYXkuc2Ny
			b2xsZXIuZHJhZ0Ryb3ApIHsgZGlzcGxheS5zY3JvbGxlci5kcmFnRHJvcCgpOyB9DQogICAgb24o
			ZGlzcGxheS53cmFwcGVyLm93bmVyRG9jdW1lbnQsICJtb3VzZXVwIiwgZHJhZ0VuZCk7DQogICAg
			b24oZGlzcGxheS53cmFwcGVyLm93bmVyRG9jdW1lbnQsICJtb3VzZW1vdmUiLCBtb3VzZU1vdmUp
			Ow0KICAgIG9uKGRpc3BsYXkuc2Nyb2xsZXIsICJkcmFnc3RhcnQiLCBkcmFnU3RhcnQpOw0KICAg
			IG9uKGRpc3BsYXkuc2Nyb2xsZXIsICJkcm9wIiwgZHJhZ0VuZCk7DQoNCiAgICBkZWxheUJsdXJF
			dmVudChjbSk7DQogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBkaXNwbGF5Lmlu
			cHV0LmZvY3VzKCk7IH0sIDIwKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHJhbmdlRm9yVW5pdChjbSwg
			cG9zLCB1bml0KSB7DQogICAgaWYgKHVuaXQgPT0gImNoYXIiKSB7IHJldHVybiBuZXcgUmFuZ2Uo
			cG9zLCBwb3MpIH0NCiAgICBpZiAodW5pdCA9PSAid29yZCIpIHsgcmV0dXJuIGNtLmZpbmRXb3Jk
			QXQocG9zKSB9DQogICAgaWYgKHVuaXQgPT0gImxpbmUiKSB7IHJldHVybiBuZXcgUmFuZ2UoUG9z
			KHBvcy5saW5lLCAwKSwgY2xpcFBvcyhjbS5kb2MsIFBvcyhwb3MubGluZSArIDEsIDApKSkgfQ0K
			ICAgIHZhciByZXN1bHQgPSB1bml0KGNtLCBwb3MpOw0KICAgIHJldHVybiBuZXcgUmFuZ2UocmVz
			dWx0LmZyb20sIHJlc3VsdC50bykNCiAgfQ0KDQogIC8vIE5vcm1hbCBzZWxlY3Rpb24sIGFzIG9w
			cG9zZWQgdG8gdGV4dCBkcmFnZ2luZy4NCiAgZnVuY3Rpb24gbGVmdEJ1dHRvblNlbGVjdChjbSwg
			ZXZlbnQsIHN0YXJ0LCBiZWhhdmlvcikgew0KICAgIHZhciBkaXNwbGF5ID0gY20uZGlzcGxheSwg
			ZG9jID0gY20uZG9jOw0KICAgIGVfcHJldmVudERlZmF1bHQoZXZlbnQpOw0KDQogICAgdmFyIG91
			clJhbmdlLCBvdXJJbmRleCwgc3RhcnRTZWwgPSBkb2Muc2VsLCByYW5nZXMgPSBzdGFydFNlbC5y
			YW5nZXM7DQogICAgaWYgKGJlaGF2aW9yLmFkZE5ldyAmJiAhYmVoYXZpb3IuZXh0ZW5kKSB7DQog
			ICAgICBvdXJJbmRleCA9IGRvYy5zZWwuY29udGFpbnMoc3RhcnQpOw0KICAgICAgaWYgKG91cklu
			ZGV4ID4gLTEpDQogICAgICAgIHsgb3VyUmFuZ2UgPSByYW5nZXNbb3VySW5kZXhdOyB9DQogICAg
			ICBlbHNlDQogICAgICAgIHsgb3VyUmFuZ2UgPSBuZXcgUmFuZ2Uoc3RhcnQsIHN0YXJ0KTsgfQ0K
			ICAgIH0gZWxzZSB7DQogICAgICBvdXJSYW5nZSA9IGRvYy5zZWwucHJpbWFyeSgpOw0KICAgICAg
			b3VySW5kZXggPSBkb2Muc2VsLnByaW1JbmRleDsNCiAgICB9DQoNCiAgICBpZiAoYmVoYXZpb3Iu
			dW5pdCA9PSAicmVjdGFuZ2xlIikgew0KICAgICAgaWYgKCFiZWhhdmlvci5hZGROZXcpIHsgb3Vy
			UmFuZ2UgPSBuZXcgUmFuZ2Uoc3RhcnQsIHN0YXJ0KTsgfQ0KICAgICAgc3RhcnQgPSBwb3NGcm9t
			TW91c2UoY20sIGV2ZW50LCB0cnVlLCB0cnVlKTsNCiAgICAgIG91ckluZGV4ID0gLTE7DQogICAg
			fSBlbHNlIHsNCiAgICAgIHZhciByYW5nZSQkMSA9IHJhbmdlRm9yVW5pdChjbSwgc3RhcnQsIGJl
			aGF2aW9yLnVuaXQpOw0KICAgICAgaWYgKGJlaGF2aW9yLmV4dGVuZCkNCiAgICAgICAgeyBvdXJS
			YW5nZSA9IGV4dGVuZFJhbmdlKG91clJhbmdlLCByYW5nZSQkMS5hbmNob3IsIHJhbmdlJCQxLmhl
			YWQsIGJlaGF2aW9yLmV4dGVuZCk7IH0NCiAgICAgIGVsc2UNCiAgICAgICAgeyBvdXJSYW5nZSA9
			IHJhbmdlJCQxOyB9DQogICAgfQ0KDQogICAgaWYgKCFiZWhhdmlvci5hZGROZXcpIHsNCiAgICAg
			IG91ckluZGV4ID0gMDsNCiAgICAgIHNldFNlbGVjdGlvbihkb2MsIG5ldyBTZWxlY3Rpb24oW291
			clJhbmdlXSwgMCksIHNlbF9tb3VzZSk7DQogICAgICBzdGFydFNlbCA9IGRvYy5zZWw7DQogICAg
			fSBlbHNlIGlmIChvdXJJbmRleCA9PSAtMSkgew0KICAgICAgb3VySW5kZXggPSByYW5nZXMubGVu
			Z3RoOw0KICAgICAgc2V0U2VsZWN0aW9uKGRvYywgbm9ybWFsaXplU2VsZWN0aW9uKGNtLCByYW5n
			ZXMuY29uY2F0KFtvdXJSYW5nZV0pLCBvdXJJbmRleCksDQogICAgICAgICAgICAgICAgICAge3Nj
			cm9sbDogZmFsc2UsIG9yaWdpbjogIiptb3VzZSJ9KTsNCiAgICB9IGVsc2UgaWYgKHJhbmdlcy5s
			ZW5ndGggPiAxICYmIHJhbmdlc1tvdXJJbmRleF0uZW1wdHkoKSAmJiBiZWhhdmlvci51bml0ID09
			ICJjaGFyIiAmJiAhYmVoYXZpb3IuZXh0ZW5kKSB7DQogICAgICBzZXRTZWxlY3Rpb24oZG9jLCBu
			b3JtYWxpemVTZWxlY3Rpb24oY20sIHJhbmdlcy5zbGljZSgwLCBvdXJJbmRleCkuY29uY2F0KHJh
			bmdlcy5zbGljZShvdXJJbmRleCArIDEpKSwgMCksDQogICAgICAgICAgICAgICAgICAge3Njcm9s
			bDogZmFsc2UsIG9yaWdpbjogIiptb3VzZSJ9KTsNCiAgICAgIHN0YXJ0U2VsID0gZG9jLnNlbDsN
			CiAgICB9IGVsc2Ugew0KICAgICAgcmVwbGFjZU9uZVNlbGVjdGlvbihkb2MsIG91ckluZGV4LCBv
			dXJSYW5nZSwgc2VsX21vdXNlKTsNCiAgICB9DQoNCiAgICB2YXIgbGFzdFBvcyA9IHN0YXJ0Ow0K
			ICAgIGZ1bmN0aW9uIGV4dGVuZFRvKHBvcykgew0KICAgICAgaWYgKGNtcChsYXN0UG9zLCBwb3Mp
			ID09IDApIHsgcmV0dXJuIH0NCiAgICAgIGxhc3RQb3MgPSBwb3M7DQoNCiAgICAgIGlmIChiZWhh
			dmlvci51bml0ID09ICJyZWN0YW5nbGUiKSB7DQogICAgICAgIHZhciByYW5nZXMgPSBbXSwgdGFi
			U2l6ZSA9IGNtLm9wdGlvbnMudGFiU2l6ZTsNCiAgICAgICAgdmFyIHN0YXJ0Q29sID0gY291bnRD
			b2x1bW4oZ2V0TGluZShkb2MsIHN0YXJ0LmxpbmUpLnRleHQsIHN0YXJ0LmNoLCB0YWJTaXplKTsN
			CiAgICAgICAgdmFyIHBvc0NvbCA9IGNvdW50Q29sdW1uKGdldExpbmUoZG9jLCBwb3MubGluZSku
			dGV4dCwgcG9zLmNoLCB0YWJTaXplKTsNCiAgICAgICAgdmFyIGxlZnQgPSBNYXRoLm1pbihzdGFy
			dENvbCwgcG9zQ29sKSwgcmlnaHQgPSBNYXRoLm1heChzdGFydENvbCwgcG9zQ29sKTsNCiAgICAg
			ICAgZm9yICh2YXIgbGluZSA9IE1hdGgubWluKHN0YXJ0LmxpbmUsIHBvcy5saW5lKSwgZW5kID0g
			TWF0aC5taW4oY20ubGFzdExpbmUoKSwgTWF0aC5tYXgoc3RhcnQubGluZSwgcG9zLmxpbmUpKTsN
			CiAgICAgICAgICAgICBsaW5lIDw9IGVuZDsgbGluZSsrKSB7DQogICAgICAgICAgdmFyIHRleHQg
			PSBnZXRMaW5lKGRvYywgbGluZSkudGV4dCwgbGVmdFBvcyA9IGZpbmRDb2x1bW4odGV4dCwgbGVm
			dCwgdGFiU2l6ZSk7DQogICAgICAgICAgaWYgKGxlZnQgPT0gcmlnaHQpDQogICAgICAgICAgICB7
			IHJhbmdlcy5wdXNoKG5ldyBSYW5nZShQb3MobGluZSwgbGVmdFBvcyksIFBvcyhsaW5lLCBsZWZ0
			UG9zKSkpOyB9DQogICAgICAgICAgZWxzZSBpZiAodGV4dC5sZW5ndGggPiBsZWZ0UG9zKQ0KICAg
			ICAgICAgICAgeyByYW5nZXMucHVzaChuZXcgUmFuZ2UoUG9zKGxpbmUsIGxlZnRQb3MpLCBQb3Mo
			bGluZSwgZmluZENvbHVtbih0ZXh0LCByaWdodCwgdGFiU2l6ZSkpKSk7IH0NCiAgICAgICAgfQ0K
			ICAgICAgICBpZiAoIXJhbmdlcy5sZW5ndGgpIHsgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKHN0YXJ0
			LCBzdGFydCkpOyB9DQogICAgICAgIHNldFNlbGVjdGlvbihkb2MsIG5vcm1hbGl6ZVNlbGVjdGlv
			bihjbSwgc3RhcnRTZWwucmFuZ2VzLnNsaWNlKDAsIG91ckluZGV4KS5jb25jYXQocmFuZ2VzKSwg
			b3VySW5kZXgpLA0KICAgICAgICAgICAgICAgICAgICAge29yaWdpbjogIiptb3VzZSIsIHNjcm9s
			bDogZmFsc2V9KTsNCiAgICAgICAgY20uc2Nyb2xsSW50b1ZpZXcocG9zKTsNCiAgICAgIH0gZWxz
			ZSB7DQogICAgICAgIHZhciBvbGRSYW5nZSA9IG91clJhbmdlOw0KICAgICAgICB2YXIgcmFuZ2Uk
			JDEgPSByYW5nZUZvclVuaXQoY20sIHBvcywgYmVoYXZpb3IudW5pdCk7DQogICAgICAgIHZhciBh
			bmNob3IgPSBvbGRSYW5nZS5hbmNob3IsIGhlYWQ7DQogICAgICAgIGlmIChjbXAocmFuZ2UkJDEu
			YW5jaG9yLCBhbmNob3IpID4gMCkgew0KICAgICAgICAgIGhlYWQgPSByYW5nZSQkMS5oZWFkOw0K
			ICAgICAgICAgIGFuY2hvciA9IG1pblBvcyhvbGRSYW5nZS5mcm9tKCksIHJhbmdlJCQxLmFuY2hv
			cik7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaGVhZCA9IHJhbmdlJCQxLmFuY2hvcjsN
			CiAgICAgICAgICBhbmNob3IgPSBtYXhQb3Mob2xkUmFuZ2UudG8oKSwgcmFuZ2UkJDEuaGVhZCk7
			DQogICAgICAgIH0NCiAgICAgICAgdmFyIHJhbmdlcyQxID0gc3RhcnRTZWwucmFuZ2VzLnNsaWNl
			KDApOw0KICAgICAgICByYW5nZXMkMVtvdXJJbmRleF0gPSBiaWRpU2ltcGxpZnkoY20sIG5ldyBS
			YW5nZShjbGlwUG9zKGRvYywgYW5jaG9yKSwgaGVhZCkpOw0KICAgICAgICBzZXRTZWxlY3Rpb24o
			ZG9jLCBub3JtYWxpemVTZWxlY3Rpb24oY20sIHJhbmdlcyQxLCBvdXJJbmRleCksIHNlbF9tb3Vz
			ZSk7DQogICAgICB9DQogICAgfQ0KDQogICAgdmFyIGVkaXRvclNpemUgPSBkaXNwbGF5LndyYXBw
			ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7DQogICAgLy8gVXNlZCB0byBlbnN1cmUgdGltZW91
			dCByZS10cmllcyBkb24ndCBmaXJlIHdoZW4gYW5vdGhlciBleHRlbmQNCiAgICAvLyBoYXBwZW5l
			ZCBpbiB0aGUgbWVhbnRpbWUgKGNsZWFyVGltZW91dCBpc24ndCByZWxpYWJsZSAtLSBhdA0KICAg
			IC8vIGxlYXN0IG9uIENocm9tZSwgdGhlIHRpbWVvdXRzIHN0aWxsIGhhcHBlbiBldmVuIHdoZW4g
			Y2xlYXJlZCwNCiAgICAvLyBpZiB0aGUgY2xlYXIgaGFwcGVucyBhZnRlciB0aGVpciBzY2hlZHVs
			ZWQgZmlyaW5nIHRpbWUpLg0KICAgIHZhciBjb3VudGVyID0gMDsNCg0KICAgIGZ1bmN0aW9uIGV4
			dGVuZChlKSB7DQogICAgICB2YXIgY3VyQ291bnQgPSArK2NvdW50ZXI7DQogICAgICB2YXIgY3Vy
			ID0gcG9zRnJvbU1vdXNlKGNtLCBlLCB0cnVlLCBiZWhhdmlvci51bml0ID09ICJyZWN0YW5nbGUi
			KTsNCiAgICAgIGlmICghY3VyKSB7IHJldHVybiB9DQogICAgICBpZiAoY21wKGN1ciwgbGFzdFBv
			cykgIT0gMCkgew0KICAgICAgICBjbS5jdXJPcC5mb2N1cyA9IGFjdGl2ZUVsdCgpOw0KICAgICAg
			ICBleHRlbmRUbyhjdXIpOw0KICAgICAgICB2YXIgdmlzaWJsZSA9IHZpc2libGVMaW5lcyhkaXNw
			bGF5LCBkb2MpOw0KICAgICAgICBpZiAoY3VyLmxpbmUgPj0gdmlzaWJsZS50byB8fCBjdXIubGlu
			ZSA8IHZpc2libGUuZnJvbSkNCiAgICAgICAgICB7IHNldFRpbWVvdXQob3BlcmF0aW9uKGNtLCBm
			dW5jdGlvbiAoKSB7aWYgKGNvdW50ZXIgPT0gY3VyQ291bnQpIHsgZXh0ZW5kKGUpOyB9fSksIDE1
			MCk7IH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHZhciBvdXRzaWRlID0gZS5jbGllbnRZIDwg
			ZWRpdG9yU2l6ZS50b3AgPyAtMjAgOiBlLmNsaWVudFkgPiBlZGl0b3JTaXplLmJvdHRvbSA/IDIw
			IDogMDsNCiAgICAgICAgaWYgKG91dHNpZGUpIHsgc2V0VGltZW91dChvcGVyYXRpb24oY20sIGZ1
			bmN0aW9uICgpIHsNCiAgICAgICAgICBpZiAoY291bnRlciAhPSBjdXJDb3VudCkgeyByZXR1cm4g
			fQ0KICAgICAgICAgIGRpc3BsYXkuc2Nyb2xsZXIuc2Nyb2xsVG9wICs9IG91dHNpZGU7DQogICAg
			ICAgICAgZXh0ZW5kKGUpOw0KICAgICAgICB9KSwgNTApOyB9DQogICAgICB9DQogICAgfQ0KDQog
			ICAgZnVuY3Rpb24gZG9uZShlKSB7DQogICAgICBjbS5zdGF0ZS5zZWxlY3RpbmdUZXh0ID0gZmFs
			c2U7DQogICAgICBjb3VudGVyID0gSW5maW5pdHk7DQogICAgICAvLyBJZiBlIGlzIG51bGwgb3Ig
			dW5kZWZpbmVkIHdlIGludGVycHJldCB0aGlzIGFzIHNvbWVvbmUgdHJ5aW5nDQogICAgICAvLyB0
			byBleHBsaWNpdGx5IGNhbmNlbCB0aGUgc2VsZWN0aW9uIHJhdGhlciB0aGFuIHRoZSB1c2VyDQog
			ICAgICAvLyBsZXR0aW5nIGdvIG9mIHRoZSBtb3VzZSBidXR0b24uDQogICAgICBpZiAoZSkgew0K
			ICAgICAgICBlX3ByZXZlbnREZWZhdWx0KGUpOw0KICAgICAgICBkaXNwbGF5LmlucHV0LmZvY3Vz
			KCk7DQogICAgICB9DQogICAgICBvZmYoZGlzcGxheS53cmFwcGVyLm93bmVyRG9jdW1lbnQsICJt
			b3VzZW1vdmUiLCBtb3ZlKTsNCiAgICAgIG9mZihkaXNwbGF5LndyYXBwZXIub3duZXJEb2N1bWVu
			dCwgIm1vdXNldXAiLCB1cCk7DQogICAgICBkb2MuaGlzdG9yeS5sYXN0U2VsT3JpZ2luID0gbnVs
			bDsNCiAgICB9DQoNCiAgICB2YXIgbW92ZSA9IG9wZXJhdGlvbihjbSwgZnVuY3Rpb24gKGUpIHsN
			CiAgICAgIGlmIChlLmJ1dHRvbnMgPT09IDAgfHwgIWVfYnV0dG9uKGUpKSB7IGRvbmUoZSk7IH0N
			CiAgICAgIGVsc2UgeyBleHRlbmQoZSk7IH0NCiAgICB9KTsNCiAgICB2YXIgdXAgPSBvcGVyYXRp
			b24oY20sIGRvbmUpOw0KICAgIGNtLnN0YXRlLnNlbGVjdGluZ1RleHQgPSB1cDsNCiAgICBvbihk
			aXNwbGF5LndyYXBwZXIub3duZXJEb2N1bWVudCwgIm1vdXNlbW92ZSIsIG1vdmUpOw0KICAgIG9u
			KGRpc3BsYXkud3JhcHBlci5vd25lckRvY3VtZW50LCAibW91c2V1cCIsIHVwKTsNCiAgfQ0KDQog
			IC8vIFVzZWQgd2hlbiBtb3VzZS1zZWxlY3RpbmcgdG8gYWRqdXN0IHRoZSBhbmNob3IgdG8gdGhl
			IHByb3BlciBzaWRlDQogIC8vIG9mIGEgYmlkaSBqdW1wIGRlcGVuZGluZyBvbiB0aGUgdmlzdWFs
			IHBvc2l0aW9uIG9mIHRoZSBoZWFkLg0KICBmdW5jdGlvbiBiaWRpU2ltcGxpZnkoY20sIHJhbmdl
			JCQxKSB7DQogICAgdmFyIGFuY2hvciA9IHJhbmdlJCQxLmFuY2hvcjsNCiAgICB2YXIgaGVhZCA9
			IHJhbmdlJCQxLmhlYWQ7DQogICAgdmFyIGFuY2hvckxpbmUgPSBnZXRMaW5lKGNtLmRvYywgYW5j
			aG9yLmxpbmUpOw0KICAgIGlmIChjbXAoYW5jaG9yLCBoZWFkKSA9PSAwICYmIGFuY2hvci5zdGlj
			a3kgPT0gaGVhZC5zdGlja3kpIHsgcmV0dXJuIHJhbmdlJCQxIH0NCiAgICB2YXIgb3JkZXIgPSBn
			ZXRPcmRlcihhbmNob3JMaW5lKTsNCiAgICBpZiAoIW9yZGVyKSB7IHJldHVybiByYW5nZSQkMSB9
			DQogICAgdmFyIGluZGV4ID0gZ2V0QmlkaVBhcnRBdChvcmRlciwgYW5jaG9yLmNoLCBhbmNob3Iu
			c3RpY2t5KSwgcGFydCA9IG9yZGVyW2luZGV4XTsNCiAgICBpZiAocGFydC5mcm9tICE9IGFuY2hv
			ci5jaCAmJiBwYXJ0LnRvICE9IGFuY2hvci5jaCkgeyByZXR1cm4gcmFuZ2UkJDEgfQ0KICAgIHZh
			ciBib3VuZGFyeSA9IGluZGV4ICsgKChwYXJ0LmZyb20gPT0gYW5jaG9yLmNoKSA9PSAocGFydC5s
			ZXZlbCAhPSAxKSA/IDAgOiAxKTsNCiAgICBpZiAoYm91bmRhcnkgPT0gMCB8fCBib3VuZGFyeSA9
			PSBvcmRlci5sZW5ndGgpIHsgcmV0dXJuIHJhbmdlJCQxIH0NCg0KICAgIC8vIENvbXB1dGUgdGhl
			IHJlbGF0aXZlIHZpc3VhbCBwb3NpdGlvbiBvZiB0aGUgaGVhZCBjb21wYXJlZCB0byB0aGUNCiAg
			ICAvLyBhbmNob3IgKDwwIGlzIHRvIHRoZSBsZWZ0LCA+MCB0byB0aGUgcmlnaHQpDQogICAgdmFy
			IGxlZnRTaWRlOw0KICAgIGlmIChoZWFkLmxpbmUgIT0gYW5jaG9yLmxpbmUpIHsNCiAgICAgIGxl
			ZnRTaWRlID0gKGhlYWQubGluZSAtIGFuY2hvci5saW5lKSAqIChjbS5kb2MuZGlyZWN0aW9uID09
			ICJsdHIiID8gMSA6IC0xKSA+IDA7DQogICAgfSBlbHNlIHsNCiAgICAgIHZhciBoZWFkSW5kZXgg
			PSBnZXRCaWRpUGFydEF0KG9yZGVyLCBoZWFkLmNoLCBoZWFkLnN0aWNreSk7DQogICAgICB2YXIg
			ZGlyID0gaGVhZEluZGV4IC0gaW5kZXggfHwgKGhlYWQuY2ggLSBhbmNob3IuY2gpICogKHBhcnQu
			bGV2ZWwgPT0gMSA/IC0xIDogMSk7DQogICAgICBpZiAoaGVhZEluZGV4ID09IGJvdW5kYXJ5IC0g
			MSB8fCBoZWFkSW5kZXggPT0gYm91bmRhcnkpDQogICAgICAgIHsgbGVmdFNpZGUgPSBkaXIgPCAw
			OyB9DQogICAgICBlbHNlDQogICAgICAgIHsgbGVmdFNpZGUgPSBkaXIgPiAwOyB9DQogICAgfQ0K
			DQogICAgdmFyIHVzZVBhcnQgPSBvcmRlcltib3VuZGFyeSArIChsZWZ0U2lkZSA/IC0xIDogMCld
			Ow0KICAgIHZhciBmcm9tID0gbGVmdFNpZGUgPT0gKHVzZVBhcnQubGV2ZWwgPT0gMSk7DQogICAg
			dmFyIGNoID0gZnJvbSA/IHVzZVBhcnQuZnJvbSA6IHVzZVBhcnQudG8sIHN0aWNreSA9IGZyb20g
			PyAiYWZ0ZXIiIDogImJlZm9yZSI7DQogICAgcmV0dXJuIGFuY2hvci5jaCA9PSBjaCAmJiBhbmNo
			b3Iuc3RpY2t5ID09IHN0aWNreSA/IHJhbmdlJCQxIDogbmV3IFJhbmdlKG5ldyBQb3MoYW5jaG9y
			LmxpbmUsIGNoLCBzdGlja3kpLCBoZWFkKQ0KICB9DQoNCg0KICAvLyBEZXRlcm1pbmVzIHdoZXRo
			ZXIgYW4gZXZlbnQgaGFwcGVuZWQgaW4gdGhlIGd1dHRlciwgYW5kIGZpcmVzIHRoZQ0KICAvLyBo
			YW5kbGVycyBmb3IgdGhlIGNvcnJlc3BvbmRpbmcgZXZlbnQuDQogIGZ1bmN0aW9uIGd1dHRlckV2
			ZW50KGNtLCBlLCB0eXBlLCBwcmV2ZW50KSB7DQogICAgdmFyIG1YLCBtWTsNCiAgICBpZiAoZS50
			b3VjaGVzKSB7DQogICAgICBtWCA9IGUudG91Y2hlc1swXS5jbGllbnRYOw0KICAgICAgbVkgPSBl
			LnRvdWNoZXNbMF0uY2xpZW50WTsNCiAgICB9IGVsc2Ugew0KICAgICAgdHJ5IHsgbVggPSBlLmNs
			aWVudFg7IG1ZID0gZS5jbGllbnRZOyB9DQogICAgICBjYXRjaChlKSB7IHJldHVybiBmYWxzZSB9
			DQogICAgfQ0KICAgIGlmIChtWCA+PSBNYXRoLmZsb29yKGNtLmRpc3BsYXkuZ3V0dGVycy5nZXRC
			b3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCkpIHsgcmV0dXJuIGZhbHNlIH0NCiAgICBpZiAocHJl
			dmVudCkgeyBlX3ByZXZlbnREZWZhdWx0KGUpOyB9DQoNCiAgICB2YXIgZGlzcGxheSA9IGNtLmRp
			c3BsYXk7DQogICAgdmFyIGxpbmVCb3ggPSBkaXNwbGF5LmxpbmVEaXYuZ2V0Qm91bmRpbmdDbGll
			bnRSZWN0KCk7DQoNCiAgICBpZiAobVkgPiBsaW5lQm94LmJvdHRvbSB8fCAhaGFzSGFuZGxlcihj
			bSwgdHlwZSkpIHsgcmV0dXJuIGVfZGVmYXVsdFByZXZlbnRlZChlKSB9DQogICAgbVkgLT0gbGlu
			ZUJveC50b3AgLSBkaXNwbGF5LnZpZXdPZmZzZXQ7DQoNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8
			IGNtLmRpc3BsYXkuZ3V0dGVyU3BlY3MubGVuZ3RoOyArK2kpIHsNCiAgICAgIHZhciBnID0gZGlz
			cGxheS5ndXR0ZXJzLmNoaWxkTm9kZXNbaV07DQogICAgICBpZiAoZyAmJiBnLmdldEJvdW5kaW5n
			Q2xpZW50UmVjdCgpLnJpZ2h0ID49IG1YKSB7DQogICAgICAgIHZhciBsaW5lID0gbGluZUF0SGVp
			Z2h0KGNtLmRvYywgbVkpOw0KICAgICAgICB2YXIgZ3V0dGVyID0gY20uZGlzcGxheS5ndXR0ZXJT
			cGVjc1tpXTsNCiAgICAgICAgc2lnbmFsKGNtLCB0eXBlLCBjbSwgbGluZSwgZ3V0dGVyLmNsYXNz
			TmFtZSwgZSk7DQogICAgICAgIHJldHVybiBlX2RlZmF1bHRQcmV2ZW50ZWQoZSkNCiAgICAgIH0N
			CiAgICB9DQogIH0NCg0KICBmdW5jdGlvbiBjbGlja0luR3V0dGVyKGNtLCBlKSB7DQogICAgcmV0
			dXJuIGd1dHRlckV2ZW50KGNtLCBlLCAiZ3V0dGVyQ2xpY2siLCB0cnVlKQ0KICB9DQoNCiAgLy8g
			Q09OVEVYVCBNRU5VIEhBTkRMSU5HDQoNCiAgLy8gVG8gbWFrZSB0aGUgY29udGV4dCBtZW51IHdv
			cmssIHdlIG5lZWQgdG8gYnJpZWZseSB1bmhpZGUgdGhlDQogIC8vIHRleHRhcmVhIChtYWtpbmcg
			aXQgYXMgdW5vYnRydXNpdmUgYXMgcG9zc2libGUpIHRvIGxldCB0aGUNCiAgLy8gcmlnaHQtY2xp
			Y2sgdGFrZSBlZmZlY3Qgb24gaXQuDQogIGZ1bmN0aW9uIG9uQ29udGV4dE1lbnUoY20sIGUpIHsN
			CiAgICBpZiAoZXZlbnRJbldpZGdldChjbS5kaXNwbGF5LCBlKSB8fCBjb250ZXh0TWVudUluR3V0
			dGVyKGNtLCBlKSkgeyByZXR1cm4gfQ0KICAgIGlmIChzaWduYWxET01FdmVudChjbSwgZSwgImNv
			bnRleHRtZW51IikpIHsgcmV0dXJuIH0NCiAgICBpZiAoIWNhcHR1cmVSaWdodENsaWNrKSB7IGNt
			LmRpc3BsYXkuaW5wdXQub25Db250ZXh0TWVudShlKTsgfQ0KICB9DQoNCiAgZnVuY3Rpb24gY29u
			dGV4dE1lbnVJbkd1dHRlcihjbSwgZSkgew0KICAgIGlmICghaGFzSGFuZGxlcihjbSwgImd1dHRl
			ckNvbnRleHRNZW51IikpIHsgcmV0dXJuIGZhbHNlIH0NCiAgICByZXR1cm4gZ3V0dGVyRXZlbnQo
			Y20sIGUsICJndXR0ZXJDb250ZXh0TWVudSIsIGZhbHNlKQ0KICB9DQoNCiAgZnVuY3Rpb24gdGhl
			bWVDaGFuZ2VkKGNtKSB7DQogICAgY20uZGlzcGxheS53cmFwcGVyLmNsYXNzTmFtZSA9IGNtLmRp
			c3BsYXkud3JhcHBlci5jbGFzc05hbWUucmVwbGFjZSgvXHMqY20tcy1cUysvZywgIiIpICsNCiAg
			ICAgIGNtLm9wdGlvbnMudGhlbWUucmVwbGFjZSgvKF58XHMpXHMqL2csICIgY20tcy0iKTsNCiAg
			ICBjbGVhckNhY2hlcyhjbSk7DQogIH0NCg0KICB2YXIgSW5pdCA9IHt0b1N0cmluZzogZnVuY3Rp
			b24oKXtyZXR1cm4gIkNvZGVNaXJyb3IuSW5pdCJ9fTsNCg0KICB2YXIgZGVmYXVsdHMgPSB7fTsN
			CiAgdmFyIG9wdGlvbkhhbmRsZXJzID0ge307DQoNCiAgZnVuY3Rpb24gZGVmaW5lT3B0aW9ucyhD
			b2RlTWlycm9yKSB7DQogICAgdmFyIG9wdGlvbkhhbmRsZXJzID0gQ29kZU1pcnJvci5vcHRpb25I
			YW5kbGVyczsNCg0KICAgIGZ1bmN0aW9uIG9wdGlvbihuYW1lLCBkZWZsdCwgaGFuZGxlLCBub3RP
			bkluaXQpIHsNCiAgICAgIENvZGVNaXJyb3IuZGVmYXVsdHNbbmFtZV0gPSBkZWZsdDsNCiAgICAg
			IGlmIChoYW5kbGUpIHsgb3B0aW9uSGFuZGxlcnNbbmFtZV0gPQ0KICAgICAgICBub3RPbkluaXQg
			PyBmdW5jdGlvbiAoY20sIHZhbCwgb2xkKSB7aWYgKG9sZCAhPSBJbml0KSB7IGhhbmRsZShjbSwg
			dmFsLCBvbGQpOyB9fSA6IGhhbmRsZTsgfQ0KICAgIH0NCg0KICAgIENvZGVNaXJyb3IuZGVmaW5l
			T3B0aW9uID0gb3B0aW9uOw0KDQogICAgLy8gUGFzc2VkIHRvIG9wdGlvbiBoYW5kbGVycyB3aGVu
			IHRoZXJlIGlzIG5vIG9sZCB2YWx1ZS4NCiAgICBDb2RlTWlycm9yLkluaXQgPSBJbml0Ow0KDQog
			ICAgLy8gVGhlc2UgdHdvIGFyZSwgb24gaW5pdCwgY2FsbGVkIGZyb20gdGhlIGNvbnN0cnVjdG9y
			IGJlY2F1c2UgdGhleQ0KICAgIC8vIGhhdmUgdG8gYmUgaW5pdGlhbGl6ZWQgYmVmb3JlIHRoZSBl
			ZGl0b3IgY2FuIHN0YXJ0IGF0IGFsbC4NCiAgICBvcHRpb24oInZhbHVlIiwgIiIsIGZ1bmN0aW9u
			IChjbSwgdmFsKSB7IHJldHVybiBjbS5zZXRWYWx1ZSh2YWwpOyB9LCB0cnVlKTsNCiAgICBvcHRp
			b24oIm1vZGUiLCBudWxsLCBmdW5jdGlvbiAoY20sIHZhbCkgew0KICAgICAgY20uZG9jLm1vZGVP
			cHRpb24gPSB2YWw7DQogICAgICBsb2FkTW9kZShjbSk7DQogICAgfSwgdHJ1ZSk7DQoNCiAgICBv
			cHRpb24oImluZGVudFVuaXQiLCAyLCBsb2FkTW9kZSwgdHJ1ZSk7DQogICAgb3B0aW9uKCJpbmRl
			bnRXaXRoVGFicyIsIGZhbHNlKTsNCiAgICBvcHRpb24oInNtYXJ0SW5kZW50IiwgdHJ1ZSk7DQog
			ICAgb3B0aW9uKCJ0YWJTaXplIiwgNCwgZnVuY3Rpb24gKGNtKSB7DQogICAgICByZXNldE1vZGVT
			dGF0ZShjbSk7DQogICAgICBjbGVhckNhY2hlcyhjbSk7DQogICAgICByZWdDaGFuZ2UoY20pOw0K
			ICAgIH0sIHRydWUpOw0KDQogICAgb3B0aW9uKCJsaW5lU2VwYXJhdG9yIiwgbnVsbCwgZnVuY3Rp
			b24gKGNtLCB2YWwpIHsNCiAgICAgIGNtLmRvYy5saW5lU2VwID0gdmFsOw0KICAgICAgaWYgKCF2
			YWwpIHsgcmV0dXJuIH0NCiAgICAgIHZhciBuZXdCcmVha3MgPSBbXSwgbGluZU5vID0gY20uZG9j
			LmZpcnN0Ow0KICAgICAgY20uZG9jLml0ZXIoZnVuY3Rpb24gKGxpbmUpIHsNCiAgICAgICAgZm9y
			ICh2YXIgcG9zID0gMDs7KSB7DQogICAgICAgICAgdmFyIGZvdW5kID0gbGluZS50ZXh0LmluZGV4
			T2YodmFsLCBwb3MpOw0KICAgICAgICAgIGlmIChmb3VuZCA9PSAtMSkgeyBicmVhayB9DQogICAg
			ICAgICAgcG9zID0gZm91bmQgKyB2YWwubGVuZ3RoOw0KICAgICAgICAgIG5ld0JyZWFrcy5wdXNo
			KFBvcyhsaW5lTm8sIGZvdW5kKSk7DQogICAgICAgIH0NCiAgICAgICAgbGluZU5vKys7DQogICAg
			ICB9KTsNCiAgICAgIGZvciAodmFyIGkgPSBuZXdCcmVha3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBp
			LS0pDQogICAgICAgIHsgcmVwbGFjZVJhbmdlKGNtLmRvYywgdmFsLCBuZXdCcmVha3NbaV0sIFBv
			cyhuZXdCcmVha3NbaV0ubGluZSwgbmV3QnJlYWtzW2ldLmNoICsgdmFsLmxlbmd0aCkpOyB9DQog
			ICAgfSk7DQogICAgb3B0aW9uKCJzcGVjaWFsQ2hhcnMiLCAvW1x1MDAwMC1cdTAwMWZcdTAwN2Yt
			XHUwMDlmXHUwMGFkXHUwNjFjXHUyMDBiLVx1MjAwZlx1MjAyOFx1MjAyOVx1ZmVmZlx1ZmZmOS1c
			dWZmZmNdL2csIGZ1bmN0aW9uIChjbSwgdmFsLCBvbGQpIHsNCiAgICAgIGNtLnN0YXRlLnNwZWNp
			YWxDaGFycyA9IG5ldyBSZWdFeHAodmFsLnNvdXJjZSArICh2YWwudGVzdCgiXHQiKSA/ICIiIDog
			InxcdCIpLCAiZyIpOw0KICAgICAgaWYgKG9sZCAhPSBJbml0KSB7IGNtLnJlZnJlc2goKTsgfQ0K
			ICAgIH0pOw0KICAgIG9wdGlvbigic3BlY2lhbENoYXJQbGFjZWhvbGRlciIsIGRlZmF1bHRTcGVj
			aWFsQ2hhclBsYWNlaG9sZGVyLCBmdW5jdGlvbiAoY20pIHsgcmV0dXJuIGNtLnJlZnJlc2goKTsg
			fSwgdHJ1ZSk7DQogICAgb3B0aW9uKCJlbGVjdHJpY0NoYXJzIiwgdHJ1ZSk7DQogICAgb3B0aW9u
			KCJpbnB1dFN0eWxlIiwgbW9iaWxlID8gImNvbnRlbnRlZGl0YWJsZSIgOiAidGV4dGFyZWEiLCBm
			dW5jdGlvbiAoKSB7DQogICAgICB0aHJvdyBuZXcgRXJyb3IoImlucHV0U3R5bGUgY2FuIG5vdCAo
			eWV0KSBiZSBjaGFuZ2VkIGluIGEgcnVubmluZyBlZGl0b3IiKSAvLyBGSVhNRQ0KICAgIH0sIHRy
			dWUpOw0KICAgIG9wdGlvbigic3BlbGxjaGVjayIsIGZhbHNlLCBmdW5jdGlvbiAoY20sIHZhbCkg
			eyByZXR1cm4gY20uZ2V0SW5wdXRGaWVsZCgpLnNwZWxsY2hlY2sgPSB2YWw7IH0sIHRydWUpOw0K
			ICAgIG9wdGlvbigiYXV0b2NvcnJlY3QiLCBmYWxzZSwgZnVuY3Rpb24gKGNtLCB2YWwpIHsgcmV0
			dXJuIGNtLmdldElucHV0RmllbGQoKS5hdXRvY29ycmVjdCA9IHZhbDsgfSwgdHJ1ZSk7DQogICAg
			b3B0aW9uKCJhdXRvY2FwaXRhbGl6ZSIsIGZhbHNlLCBmdW5jdGlvbiAoY20sIHZhbCkgeyByZXR1
			cm4gY20uZ2V0SW5wdXRGaWVsZCgpLmF1dG9jYXBpdGFsaXplID0gdmFsOyB9LCB0cnVlKTsNCiAg
			ICBvcHRpb24oInJ0bE1vdmVWaXN1YWxseSIsICF3aW5kb3dzKTsNCiAgICBvcHRpb24oIndob2xl
			TGluZVVwZGF0ZUJlZm9yZSIsIHRydWUpOw0KDQogICAgb3B0aW9uKCJ0aGVtZSIsICJkZWZhdWx0
			IiwgZnVuY3Rpb24gKGNtKSB7DQogICAgICB0aGVtZUNoYW5nZWQoY20pOw0KICAgICAgdXBkYXRl
			R3V0dGVycyhjbSk7DQogICAgfSwgdHJ1ZSk7DQogICAgb3B0aW9uKCJrZXlNYXAiLCAiZGVmYXVs
			dCIsIGZ1bmN0aW9uIChjbSwgdmFsLCBvbGQpIHsNCiAgICAgIHZhciBuZXh0ID0gZ2V0S2V5TWFw
			KHZhbCk7DQogICAgICB2YXIgcHJldiA9IG9sZCAhPSBJbml0ICYmIGdldEtleU1hcChvbGQpOw0K
			ICAgICAgaWYgKHByZXYgJiYgcHJldi5kZXRhY2gpIHsgcHJldi5kZXRhY2goY20sIG5leHQpOyB9
			DQogICAgICBpZiAobmV4dC5hdHRhY2gpIHsgbmV4dC5hdHRhY2goY20sIHByZXYgfHwgbnVsbCk7
			IH0NCiAgICB9KTsNCiAgICBvcHRpb24oImV4dHJhS2V5cyIsIG51bGwpOw0KICAgIG9wdGlvbigi
			Y29uZmlndXJlTW91c2UiLCBudWxsKTsNCg0KICAgIG9wdGlvbigibGluZVdyYXBwaW5nIiwgZmFs
			c2UsIHdyYXBwaW5nQ2hhbmdlZCwgdHJ1ZSk7DQogICAgb3B0aW9uKCJndXR0ZXJzIiwgW10sIGZ1
			bmN0aW9uIChjbSwgdmFsKSB7DQogICAgICBjbS5kaXNwbGF5Lmd1dHRlclNwZWNzID0gZ2V0R3V0
			dGVycyh2YWwsIGNtLm9wdGlvbnMubGluZU51bWJlcnMpOw0KICAgICAgdXBkYXRlR3V0dGVycyhj
			bSk7DQogICAgfSwgdHJ1ZSk7DQogICAgb3B0aW9uKCJmaXhlZEd1dHRlciIsIHRydWUsIGZ1bmN0
			aW9uIChjbSwgdmFsKSB7DQogICAgICBjbS5kaXNwbGF5Lmd1dHRlcnMuc3R5bGUubGVmdCA9IHZh
			bCA/IGNvbXBlbnNhdGVGb3JIU2Nyb2xsKGNtLmRpc3BsYXkpICsgInB4IiA6ICIwIjsNCiAgICAg
			IGNtLnJlZnJlc2goKTsNCiAgICB9LCB0cnVlKTsNCiAgICBvcHRpb24oImNvdmVyR3V0dGVyTmV4
			dFRvU2Nyb2xsYmFyIiwgZmFsc2UsIGZ1bmN0aW9uIChjbSkgeyByZXR1cm4gdXBkYXRlU2Nyb2xs
			YmFycyhjbSk7IH0sIHRydWUpOw0KICAgIG9wdGlvbigic2Nyb2xsYmFyU3R5bGUiLCAibmF0aXZl
			IiwgZnVuY3Rpb24gKGNtKSB7DQogICAgICBpbml0U2Nyb2xsYmFycyhjbSk7DQogICAgICB1cGRh
			dGVTY3JvbGxiYXJzKGNtKTsNCiAgICAgIGNtLmRpc3BsYXkuc2Nyb2xsYmFycy5zZXRTY3JvbGxU
			b3AoY20uZG9jLnNjcm9sbFRvcCk7DQogICAgICBjbS5kaXNwbGF5LnNjcm9sbGJhcnMuc2V0U2Ny
			b2xsTGVmdChjbS5kb2Muc2Nyb2xsTGVmdCk7DQogICAgfSwgdHJ1ZSk7DQogICAgb3B0aW9uKCJs
			aW5lTnVtYmVycyIsIGZhbHNlLCBmdW5jdGlvbiAoY20sIHZhbCkgew0KICAgICAgY20uZGlzcGxh
			eS5ndXR0ZXJTcGVjcyA9IGdldEd1dHRlcnMoY20ub3B0aW9ucy5ndXR0ZXJzLCB2YWwpOw0KICAg
			ICAgdXBkYXRlR3V0dGVycyhjbSk7DQogICAgfSwgdHJ1ZSk7DQogICAgb3B0aW9uKCJmaXJzdExp
			bmVOdW1iZXIiLCAxLCB1cGRhdGVHdXR0ZXJzLCB0cnVlKTsNCiAgICBvcHRpb24oImxpbmVOdW1i
			ZXJGb3JtYXR0ZXIiLCBmdW5jdGlvbiAoaW50ZWdlcikgeyByZXR1cm4gaW50ZWdlcjsgfSwgdXBk
			YXRlR3V0dGVycywgdHJ1ZSk7DQogICAgb3B0aW9uKCJzaG93Q3Vyc29yV2hlblNlbGVjdGluZyIs
			IGZhbHNlLCB1cGRhdGVTZWxlY3Rpb24sIHRydWUpOw0KDQogICAgb3B0aW9uKCJyZXNldFNlbGVj
			dGlvbk9uQ29udGV4dE1lbnUiLCB0cnVlKTsNCiAgICBvcHRpb24oImxpbmVXaXNlQ29weUN1dCIs
			IHRydWUpOw0KICAgIG9wdGlvbigicGFzdGVMaW5lc1BlclNlbGVjdGlvbiIsIHRydWUpOw0KICAg
			IG9wdGlvbigic2VsZWN0aW9uc01heVRvdWNoIiwgZmFsc2UpOw0KDQogICAgb3B0aW9uKCJyZWFk
			T25seSIsIGZhbHNlLCBmdW5jdGlvbiAoY20sIHZhbCkgew0KICAgICAgaWYgKHZhbCA9PSAibm9j
			dXJzb3IiKSB7DQogICAgICAgIG9uQmx1cihjbSk7DQogICAgICAgIGNtLmRpc3BsYXkuaW5wdXQu
			Ymx1cigpOw0KICAgICAgfQ0KICAgICAgY20uZGlzcGxheS5pbnB1dC5yZWFkT25seUNoYW5nZWQo
			dmFsKTsNCiAgICB9KTsNCg0KICAgIG9wdGlvbigic2NyZWVuUmVhZGVyTGFiZWwiLCBudWxsLCBm
			dW5jdGlvbiAoY20sIHZhbCkgew0KICAgICAgdmFsID0gKHZhbCA9PT0gJycpID8gbnVsbCA6IHZh
			bDsNCiAgICAgIGNtLmRpc3BsYXkuaW5wdXQuc2NyZWVuUmVhZGVyTGFiZWxDaGFuZ2VkKHZhbCk7
			DQogICAgfSk7DQoNCiAgICBvcHRpb24oImRpc2FibGVJbnB1dCIsIGZhbHNlLCBmdW5jdGlvbiAo
			Y20sIHZhbCkge2lmICghdmFsKSB7IGNtLmRpc3BsYXkuaW5wdXQucmVzZXQoKTsgfX0sIHRydWUp
			Ow0KICAgIG9wdGlvbigiZHJhZ0Ryb3AiLCB0cnVlLCBkcmFnRHJvcENoYW5nZWQpOw0KICAgIG9w
			dGlvbigiYWxsb3dEcm9wRmlsZVR5cGVzIiwgbnVsbCk7DQoNCiAgICBvcHRpb24oImN1cnNvckJs
			aW5rUmF0ZSIsIDUzMCk7DQogICAgb3B0aW9uKCJjdXJzb3JTY3JvbGxNYXJnaW4iLCAwKTsNCiAg
			ICBvcHRpb24oImN1cnNvckhlaWdodCIsIDEsIHVwZGF0ZVNlbGVjdGlvbiwgdHJ1ZSk7DQogICAg
			b3B0aW9uKCJzaW5nbGVDdXJzb3JIZWlnaHRQZXJMaW5lIiwgdHJ1ZSwgdXBkYXRlU2VsZWN0aW9u
			LCB0cnVlKTsNCiAgICBvcHRpb24oIndvcmtUaW1lIiwgMTAwKTsNCiAgICBvcHRpb24oIndvcmtE
			ZWxheSIsIDEwMCk7DQogICAgb3B0aW9uKCJmbGF0dGVuU3BhbnMiLCB0cnVlLCByZXNldE1vZGVT
			dGF0ZSwgdHJ1ZSk7DQogICAgb3B0aW9uKCJhZGRNb2RlQ2xhc3MiLCBmYWxzZSwgcmVzZXRNb2Rl
			U3RhdGUsIHRydWUpOw0KICAgIG9wdGlvbigicG9sbEludGVydmFsIiwgMTAwKTsNCiAgICBvcHRp
			b24oInVuZG9EZXB0aCIsIDIwMCwgZnVuY3Rpb24gKGNtLCB2YWwpIHsgcmV0dXJuIGNtLmRvYy5o
			aXN0b3J5LnVuZG9EZXB0aCA9IHZhbDsgfSk7DQogICAgb3B0aW9uKCJoaXN0b3J5RXZlbnREZWxh
			eSIsIDEyNTApOw0KICAgIG9wdGlvbigidmlld3BvcnRNYXJnaW4iLCAxMCwgZnVuY3Rpb24gKGNt
			KSB7IHJldHVybiBjbS5yZWZyZXNoKCk7IH0sIHRydWUpOw0KICAgIG9wdGlvbigibWF4SGlnaGxp
			Z2h0TGVuZ3RoIiwgMTAwMDAsIHJlc2V0TW9kZVN0YXRlLCB0cnVlKTsNCiAgICBvcHRpb24oIm1v
			dmVJbnB1dFdpdGhDdXJzb3IiLCB0cnVlLCBmdW5jdGlvbiAoY20sIHZhbCkgew0KICAgICAgaWYg
			KCF2YWwpIHsgY20uZGlzcGxheS5pbnB1dC5yZXNldFBvc2l0aW9uKCk7IH0NCiAgICB9KTsNCg0K
			ICAgIG9wdGlvbigidGFiaW5kZXgiLCBudWxsLCBmdW5jdGlvbiAoY20sIHZhbCkgeyByZXR1cm4g
			Y20uZGlzcGxheS5pbnB1dC5nZXRGaWVsZCgpLnRhYkluZGV4ID0gdmFsIHx8ICIiOyB9KTsNCiAg
			ICBvcHRpb24oImF1dG9mb2N1cyIsIG51bGwpOw0KICAgIG9wdGlvbigiZGlyZWN0aW9uIiwgImx0
			ciIsIGZ1bmN0aW9uIChjbSwgdmFsKSB7IHJldHVybiBjbS5kb2Muc2V0RGlyZWN0aW9uKHZhbCk7
			IH0sIHRydWUpOw0KICAgIG9wdGlvbigicGhyYXNlcyIsIG51bGwpOw0KICB9DQoNCiAgZnVuY3Rp
			b24gZHJhZ0Ryb3BDaGFuZ2VkKGNtLCB2YWx1ZSwgb2xkKSB7DQogICAgdmFyIHdhc09uID0gb2xk
			ICYmIG9sZCAhPSBJbml0Ow0KICAgIGlmICghdmFsdWUgIT0gIXdhc09uKSB7DQogICAgICB2YXIg
			ZnVuY3MgPSBjbS5kaXNwbGF5LmRyYWdGdW5jdGlvbnM7DQogICAgICB2YXIgdG9nZ2xlID0gdmFs
			dWUgPyBvbiA6IG9mZjsNCiAgICAgIHRvZ2dsZShjbS5kaXNwbGF5LnNjcm9sbGVyLCAiZHJhZ3N0
			YXJ0IiwgZnVuY3Muc3RhcnQpOw0KICAgICAgdG9nZ2xlKGNtLmRpc3BsYXkuc2Nyb2xsZXIsICJk
			cmFnZW50ZXIiLCBmdW5jcy5lbnRlcik7DQogICAgICB0b2dnbGUoY20uZGlzcGxheS5zY3JvbGxl
			ciwgImRyYWdvdmVyIiwgZnVuY3Mub3Zlcik7DQogICAgICB0b2dnbGUoY20uZGlzcGxheS5zY3Jv
			bGxlciwgImRyYWdsZWF2ZSIsIGZ1bmNzLmxlYXZlKTsNCiAgICAgIHRvZ2dsZShjbS5kaXNwbGF5
			LnNjcm9sbGVyLCAiZHJvcCIsIGZ1bmNzLmRyb3ApOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9u
			IHdyYXBwaW5nQ2hhbmdlZChjbSkgew0KICAgIGlmIChjbS5vcHRpb25zLmxpbmVXcmFwcGluZykg
			ew0KICAgICAgYWRkQ2xhc3MoY20uZGlzcGxheS53cmFwcGVyLCAiQ29kZU1pcnJvci13cmFwIik7
			DQogICAgICBjbS5kaXNwbGF5LnNpemVyLnN0eWxlLm1pbldpZHRoID0gIiI7DQogICAgICBjbS5k
			aXNwbGF5LnNpemVyV2lkdGggPSBudWxsOw0KICAgIH0gZWxzZSB7DQogICAgICBybUNsYXNzKGNt
			LmRpc3BsYXkud3JhcHBlciwgIkNvZGVNaXJyb3Itd3JhcCIpOw0KICAgICAgZmluZE1heExpbmUo
			Y20pOw0KICAgIH0NCiAgICBlc3RpbWF0ZUxpbmVIZWlnaHRzKGNtKTsNCiAgICByZWdDaGFuZ2Uo
			Y20pOw0KICAgIGNsZWFyQ2FjaGVzKGNtKTsNCiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsg
			cmV0dXJuIHVwZGF0ZVNjcm9sbGJhcnMoY20pOyB9LCAxMDApOw0KICB9DQoNCiAgLy8gQSBDb2Rl
			TWlycm9yIGluc3RhbmNlIHJlcHJlc2VudHMgYW4gZWRpdG9yLiBUaGlzIGlzIHRoZSBvYmplY3QN
			CiAgLy8gdGhhdCB1c2VyIGNvZGUgaXMgdXN1YWxseSBkZWFsaW5nIHdpdGguDQoNCiAgZnVuY3Rp
			b24gQ29kZU1pcnJvcihwbGFjZSwgb3B0aW9ucykgew0KICAgIHZhciB0aGlzJDEgPSB0aGlzOw0K
			DQogICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIENvZGVNaXJyb3IpKSB7IHJldHVybiBuZXcgQ29k
			ZU1pcnJvcihwbGFjZSwgb3B0aW9ucykgfQ0KDQogICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyA9
			IG9wdGlvbnMgPyBjb3B5T2JqKG9wdGlvbnMpIDoge307DQogICAgLy8gRGV0ZXJtaW5lIGVmZmVj
			dGl2ZSBvcHRpb25zIGJhc2VkIG9uIGdpdmVuIHZhbHVlcyBhbmQgZGVmYXVsdHMuDQogICAgY29w
			eU9iaihkZWZhdWx0cywgb3B0aW9ucywgZmFsc2UpOw0KDQogICAgdmFyIGRvYyA9IG9wdGlvbnMu
			dmFsdWU7DQogICAgaWYgKHR5cGVvZiBkb2MgPT0gInN0cmluZyIpIHsgZG9jID0gbmV3IERvYyhk
			b2MsIG9wdGlvbnMubW9kZSwgbnVsbCwgb3B0aW9ucy5saW5lU2VwYXJhdG9yLCBvcHRpb25zLmRp
			cmVjdGlvbik7IH0NCiAgICBlbHNlIGlmIChvcHRpb25zLm1vZGUpIHsgZG9jLm1vZGVPcHRpb24g
			PSBvcHRpb25zLm1vZGU7IH0NCiAgICB0aGlzLmRvYyA9IGRvYzsNCg0KICAgIHZhciBpbnB1dCA9
			IG5ldyBDb2RlTWlycm9yLmlucHV0U3R5bGVzW29wdGlvbnMuaW5wdXRTdHlsZV0odGhpcyk7DQog
			ICAgdmFyIGRpc3BsYXkgPSB0aGlzLmRpc3BsYXkgPSBuZXcgRGlzcGxheShwbGFjZSwgZG9jLCBp
			bnB1dCwgb3B0aW9ucyk7DQogICAgZGlzcGxheS53cmFwcGVyLkNvZGVNaXJyb3IgPSB0aGlzOw0K
			ICAgIHRoZW1lQ2hhbmdlZCh0aGlzKTsNCiAgICBpZiAob3B0aW9ucy5saW5lV3JhcHBpbmcpDQog
			ICAgICB7IHRoaXMuZGlzcGxheS53cmFwcGVyLmNsYXNzTmFtZSArPSAiIENvZGVNaXJyb3Itd3Jh
			cCI7IH0NCiAgICBpbml0U2Nyb2xsYmFycyh0aGlzKTsNCg0KICAgIHRoaXMuc3RhdGUgPSB7DQog
			ICAgICBrZXlNYXBzOiBbXSwgIC8vIHN0b3JlcyBtYXBzIGFkZGVkIGJ5IGFkZEtleU1hcA0KICAg
			ICAgb3ZlcmxheXM6IFtdLCAvLyBoaWdobGlnaHRpbmcgb3ZlcmxheXMsIGFzIGFkZGVkIGJ5IGFk
			ZE92ZXJsYXkNCiAgICAgIG1vZGVHZW46IDAsICAgLy8gYnVtcGVkIHdoZW4gbW9kZS9vdmVybGF5
			IGNoYW5nZXMsIHVzZWQgdG8gaW52YWxpZGF0ZSBoaWdobGlnaHRpbmcgaW5mbw0KICAgICAgb3Zl
			cndyaXRlOiBmYWxzZSwNCiAgICAgIGRlbGF5aW5nQmx1ckV2ZW50OiBmYWxzZSwNCiAgICAgIGZv
			Y3VzZWQ6IGZhbHNlLA0KICAgICAgc3VwcHJlc3NFZGl0czogZmFsc2UsIC8vIHVzZWQgdG8gZGlz
			YWJsZSBlZGl0aW5nIGR1cmluZyBrZXkgaGFuZGxlcnMgd2hlbiBpbiByZWFkT25seSBtb2RlDQog
			ICAgICBwYXN0ZUluY29taW5nOiAtMSwgY3V0SW5jb21pbmc6IC0xLCAvLyBoZWxwIHJlY29nbml6
			ZSBwYXN0ZS9jdXQgZWRpdHMgaW4gaW5wdXQucG9sbA0KICAgICAgc2VsZWN0aW5nVGV4dDogZmFs
			c2UsDQogICAgICBkcmFnZ2luZ1RleHQ6IGZhbHNlLA0KICAgICAgaGlnaGxpZ2h0OiBuZXcgRGVs
			YXllZCgpLCAvLyBzdG9yZXMgaGlnaGxpZ2h0IHdvcmtlciB0aW1lb3V0DQogICAgICBrZXlTZXE6
			IG51bGwsICAvLyBVbmZpbmlzaGVkIGtleSBzZXF1ZW5jZQ0KICAgICAgc3BlY2lhbENoYXJzOiBu
			dWxsDQogICAgfTsNCg0KICAgIGlmIChvcHRpb25zLmF1dG9mb2N1cyAmJiAhbW9iaWxlKSB7IGRp
			c3BsYXkuaW5wdXQuZm9jdXMoKTsgfQ0KDQogICAgLy8gT3ZlcnJpZGUgbWFnaWMgdGV4dGFyZWEg
			Y29udGVudCByZXN0b3JlIHRoYXQgSUUgc29tZXRpbWVzIGRvZXMNCiAgICAvLyBvbiBvdXIgaGlk
			ZGVuIHRleHRhcmVhIG9uIHJlbG9hZA0KICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDwgMTEpIHsg
			c2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzJDEuZGlzcGxheS5pbnB1dC5yZXNl
			dCh0cnVlKTsgfSwgMjApOyB9DQoNCiAgICByZWdpc3RlckV2ZW50SGFuZGxlcnModGhpcyk7DQog
			ICAgZW5zdXJlR2xvYmFsSGFuZGxlcnMoKTsNCg0KICAgIHN0YXJ0T3BlcmF0aW9uKHRoaXMpOw0K
			ICAgIHRoaXMuY3VyT3AuZm9yY2VVcGRhdGUgPSB0cnVlOw0KICAgIGF0dGFjaERvYyh0aGlzLCBk
			b2MpOw0KDQogICAgaWYgKChvcHRpb25zLmF1dG9mb2N1cyAmJiAhbW9iaWxlKSB8fCB0aGlzLmhh
			c0ZvY3VzKCkpDQogICAgICB7IHNldFRpbWVvdXQoYmluZChvbkZvY3VzLCB0aGlzKSwgMjApOyB9
			DQogICAgZWxzZQ0KICAgICAgeyBvbkJsdXIodGhpcyk7IH0NCg0KICAgIGZvciAodmFyIG9wdCBp
			biBvcHRpb25IYW5kbGVycykgeyBpZiAob3B0aW9uSGFuZGxlcnMuaGFzT3duUHJvcGVydHkob3B0
			KSkNCiAgICAgIHsgb3B0aW9uSGFuZGxlcnNbb3B0XSh0aGlzJDEsIG9wdGlvbnNbb3B0XSwgSW5p
			dCk7IH0gfQ0KICAgIG1heWJlVXBkYXRlTGluZU51bWJlcldpZHRoKHRoaXMpOw0KICAgIGlmIChv
			cHRpb25zLmZpbmlzaEluaXQpIHsgb3B0aW9ucy5maW5pc2hJbml0KHRoaXMpOyB9DQogICAgZm9y
			ICh2YXIgaSA9IDA7IGkgPCBpbml0SG9va3MubGVuZ3RoOyArK2kpIHsgaW5pdEhvb2tzW2ldKHRo
			aXMkMSk7IH0NCiAgICBlbmRPcGVyYXRpb24odGhpcyk7DQogICAgLy8gU3VwcHJlc3Mgb3B0aW1p
			emVsZWdpYmlsaXR5IGluIFdlYmtpdCwgc2luY2UgaXQgYnJlYWtzIHRleHQNCiAgICAvLyBtZWFz
			dXJpbmcgb24gbGluZSB3cmFwcGluZyBib3VuZGFyaWVzLg0KICAgIGlmICh3ZWJraXQgJiYgb3B0
			aW9ucy5saW5lV3JhcHBpbmcgJiYNCiAgICAgICAgZ2V0Q29tcHV0ZWRTdHlsZShkaXNwbGF5Lmxp
			bmVEaXYpLnRleHRSZW5kZXJpbmcgPT0gIm9wdGltaXplbGVnaWJpbGl0eSIpDQogICAgICB7IGRp
			c3BsYXkubGluZURpdi5zdHlsZS50ZXh0UmVuZGVyaW5nID0gImF1dG8iOyB9DQogIH0NCg0KICAv
			LyBUaGUgZGVmYXVsdCBjb25maWd1cmF0aW9uIG9wdGlvbnMuDQogIENvZGVNaXJyb3IuZGVmYXVs
			dHMgPSBkZWZhdWx0czsNCiAgLy8gRnVuY3Rpb25zIHRvIHJ1biB3aGVuIG9wdGlvbnMgYXJlIGNo
			YW5nZWQuDQogIENvZGVNaXJyb3Iub3B0aW9uSGFuZGxlcnMgPSBvcHRpb25IYW5kbGVyczsNCg0K
			ICAvLyBBdHRhY2ggdGhlIG5lY2Vzc2FyeSBldmVudCBoYW5kbGVycyB3aGVuIGluaXRpYWxpemlu
			ZyB0aGUgZWRpdG9yDQogIGZ1bmN0aW9uIHJlZ2lzdGVyRXZlbnRIYW5kbGVycyhjbSkgew0KICAg
			IHZhciBkID0gY20uZGlzcGxheTsNCiAgICBvbihkLnNjcm9sbGVyLCAibW91c2Vkb3duIiwgb3Bl
			cmF0aW9uKGNtLCBvbk1vdXNlRG93bikpOw0KICAgIC8vIE9sZGVyIElFJ3Mgd2lsbCBub3QgZmly
			ZSBhIHNlY29uZCBtb3VzZWRvd24gZm9yIGEgZG91YmxlIGNsaWNrDQogICAgaWYgKGllICYmIGll
			X3ZlcnNpb24gPCAxMSkNCiAgICAgIHsgb24oZC5zY3JvbGxlciwgImRibGNsaWNrIiwgb3BlcmF0
			aW9uKGNtLCBmdW5jdGlvbiAoZSkgew0KICAgICAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUp
			KSB7IHJldHVybiB9DQogICAgICAgIHZhciBwb3MgPSBwb3NGcm9tTW91c2UoY20sIGUpOw0KICAg
			ICAgICBpZiAoIXBvcyB8fCBjbGlja0luR3V0dGVyKGNtLCBlKSB8fCBldmVudEluV2lkZ2V0KGNt
			LmRpc3BsYXksIGUpKSB7IHJldHVybiB9DQogICAgICAgIGVfcHJldmVudERlZmF1bHQoZSk7DQog
			ICAgICAgIHZhciB3b3JkID0gY20uZmluZFdvcmRBdChwb3MpOw0KICAgICAgICBleHRlbmRTZWxl
			Y3Rpb24oY20uZG9jLCB3b3JkLmFuY2hvciwgd29yZC5oZWFkKTsNCiAgICAgIH0pKTsgfQ0KICAg
			IGVsc2UNCiAgICAgIHsgb24oZC5zY3JvbGxlciwgImRibGNsaWNrIiwgZnVuY3Rpb24gKGUpIHsg
			cmV0dXJuIHNpZ25hbERPTUV2ZW50KGNtLCBlKSB8fCBlX3ByZXZlbnREZWZhdWx0KGUpOyB9KTsg
			fQ0KICAgIC8vIFNvbWUgYnJvd3NlcnMgZmlyZSBjb250ZXh0bWVudSAqYWZ0ZXIqIG9wZW5pbmcg
			dGhlIG1lbnUsIGF0DQogICAgLy8gd2hpY2ggcG9pbnQgd2UgY2FuJ3QgbWVzcyB3aXRoIGl0IGFu
			eW1vcmUuIENvbnRleHQgbWVudSBpcw0KICAgIC8vIGhhbmRsZWQgaW4gb25Nb3VzZURvd24gZm9y
			IHRoZXNlIGJyb3dzZXJzLg0KICAgIG9uKGQuc2Nyb2xsZXIsICJjb250ZXh0bWVudSIsIGZ1bmN0
			aW9uIChlKSB7IHJldHVybiBvbkNvbnRleHRNZW51KGNtLCBlKTsgfSk7DQogICAgb24oZC5pbnB1
			dC5nZXRGaWVsZCgpLCAiY29udGV4dG1lbnUiLCBmdW5jdGlvbiAoZSkgew0KICAgICAgaWYgKCFk
			LnNjcm9sbGVyLmNvbnRhaW5zKGUudGFyZ2V0KSkgeyBvbkNvbnRleHRNZW51KGNtLCBlKTsgfQ0K
			ICAgIH0pOw0KDQogICAgLy8gVXNlZCB0byBzdXBwcmVzcyBtb3VzZSBldmVudCBoYW5kbGluZyB3
			aGVuIGEgdG91Y2ggaGFwcGVucw0KICAgIHZhciB0b3VjaEZpbmlzaGVkLCBwcmV2VG91Y2ggPSB7
			ZW5kOiAwfTsNCiAgICBmdW5jdGlvbiBmaW5pc2hUb3VjaCgpIHsNCiAgICAgIGlmIChkLmFjdGl2
			ZVRvdWNoKSB7DQogICAgICAgIHRvdWNoRmluaXNoZWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgp
			IHsgcmV0dXJuIGQuYWN0aXZlVG91Y2ggPSBudWxsOyB9LCAxMDAwKTsNCiAgICAgICAgcHJldlRv
			dWNoID0gZC5hY3RpdmVUb3VjaDsNCiAgICAgICAgcHJldlRvdWNoLmVuZCA9ICtuZXcgRGF0ZTsN
			CiAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gaXNNb3VzZUxpa2VUb3VjaEV2ZW50KGUpIHsN
			CiAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoICE9IDEpIHsgcmV0dXJuIGZhbHNlIH0NCiAgICAg
			IHZhciB0b3VjaCA9IGUudG91Y2hlc1swXTsNCiAgICAgIHJldHVybiB0b3VjaC5yYWRpdXNYIDw9
			IDEgJiYgdG91Y2gucmFkaXVzWSA8PSAxDQogICAgfQ0KICAgIGZ1bmN0aW9uIGZhckF3YXkodG91
			Y2gsIG90aGVyKSB7DQogICAgICBpZiAob3RoZXIubGVmdCA9PSBudWxsKSB7IHJldHVybiB0cnVl
			IH0NCiAgICAgIHZhciBkeCA9IG90aGVyLmxlZnQgLSB0b3VjaC5sZWZ0LCBkeSA9IG90aGVyLnRv
			cCAtIHRvdWNoLnRvcDsNCiAgICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeSA+IDIwICogMjAN
			CiAgICB9DQogICAgb24oZC5zY3JvbGxlciwgInRvdWNoc3RhcnQiLCBmdW5jdGlvbiAoZSkgew0K
			ICAgICAgaWYgKCFzaWduYWxET01FdmVudChjbSwgZSkgJiYgIWlzTW91c2VMaWtlVG91Y2hFdmVu
			dChlKSAmJiAhY2xpY2tJbkd1dHRlcihjbSwgZSkpIHsNCiAgICAgICAgZC5pbnB1dC5lbnN1cmVQ
			b2xsZWQoKTsNCiAgICAgICAgY2xlYXJUaW1lb3V0KHRvdWNoRmluaXNoZWQpOw0KICAgICAgICB2
			YXIgbm93ID0gK25ldyBEYXRlOw0KICAgICAgICBkLmFjdGl2ZVRvdWNoID0ge3N0YXJ0OiBub3cs
			IG1vdmVkOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2OiBub3cgLSBwcmV2
			VG91Y2guZW5kIDw9IDMwMCA/IHByZXZUb3VjaCA6IG51bGx9Ow0KICAgICAgICBpZiAoZS50b3Vj
			aGVzLmxlbmd0aCA9PSAxKSB7DQogICAgICAgICAgZC5hY3RpdmVUb3VjaC5sZWZ0ID0gZS50b3Vj
			aGVzWzBdLnBhZ2VYOw0KICAgICAgICAgIGQuYWN0aXZlVG91Y2gudG9wID0gZS50b3VjaGVzWzBd
			LnBhZ2VZOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSk7DQogICAgb24oZC5zY3JvbGxlciwg
			InRvdWNobW92ZSIsIGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmIChkLmFjdGl2ZVRvdWNoKSB7IGQu
			YWN0aXZlVG91Y2gubW92ZWQgPSB0cnVlOyB9DQogICAgfSk7DQogICAgb24oZC5zY3JvbGxlciwg
			InRvdWNoZW5kIiwgZnVuY3Rpb24gKGUpIHsNCiAgICAgIHZhciB0b3VjaCA9IGQuYWN0aXZlVG91
			Y2g7DQogICAgICBpZiAodG91Y2ggJiYgIWV2ZW50SW5XaWRnZXQoZCwgZSkgJiYgdG91Y2gubGVm
			dCAhPSBudWxsICYmDQogICAgICAgICAgIXRvdWNoLm1vdmVkICYmIG5ldyBEYXRlIC0gdG91Y2gu
			c3RhcnQgPCAzMDApIHsNCiAgICAgICAgdmFyIHBvcyA9IGNtLmNvb3Jkc0NoYXIoZC5hY3RpdmVU
			b3VjaCwgInBhZ2UiKSwgcmFuZ2U7DQogICAgICAgIGlmICghdG91Y2gucHJldiB8fCBmYXJBd2F5
			KHRvdWNoLCB0b3VjaC5wcmV2KSkgLy8gU2luZ2xlIHRhcA0KICAgICAgICAgIHsgcmFuZ2UgPSBu
			ZXcgUmFuZ2UocG9zLCBwb3MpOyB9DQogICAgICAgIGVsc2UgaWYgKCF0b3VjaC5wcmV2LnByZXYg
			fHwgZmFyQXdheSh0b3VjaCwgdG91Y2gucHJldi5wcmV2KSkgLy8gRG91YmxlIHRhcA0KICAgICAg
			ICAgIHsgcmFuZ2UgPSBjbS5maW5kV29yZEF0KHBvcyk7IH0NCiAgICAgICAgZWxzZSAvLyBUcmlw
			bGUgdGFwDQogICAgICAgICAgeyByYW5nZSA9IG5ldyBSYW5nZShQb3MocG9zLmxpbmUsIDApLCBj
			bGlwUG9zKGNtLmRvYywgUG9zKHBvcy5saW5lICsgMSwgMCkpKTsgfQ0KICAgICAgICBjbS5zZXRT
			ZWxlY3Rpb24ocmFuZ2UuYW5jaG9yLCByYW5nZS5oZWFkKTsNCiAgICAgICAgY20uZm9jdXMoKTsN
			CiAgICAgICAgZV9wcmV2ZW50RGVmYXVsdChlKTsNCiAgICAgIH0NCiAgICAgIGZpbmlzaFRvdWNo
			KCk7DQogICAgfSk7DQogICAgb24oZC5zY3JvbGxlciwgInRvdWNoY2FuY2VsIiwgZmluaXNoVG91
			Y2gpOw0KDQogICAgLy8gU3luYyBzY3JvbGxpbmcgYmV0d2VlbiBmYWtlIHNjcm9sbGJhcnMgYW5k
			IHJlYWwgc2Nyb2xsYWJsZQ0KICAgIC8vIGFyZWEsIGVuc3VyZSB2aWV3cG9ydCBpcyB1cGRhdGVk
			IHdoZW4gc2Nyb2xsaW5nLg0KICAgIG9uKGQuc2Nyb2xsZXIsICJzY3JvbGwiLCBmdW5jdGlvbiAo
			KSB7DQogICAgICBpZiAoZC5zY3JvbGxlci5jbGllbnRIZWlnaHQpIHsNCiAgICAgICAgdXBkYXRl
			U2Nyb2xsVG9wKGNtLCBkLnNjcm9sbGVyLnNjcm9sbFRvcCk7DQogICAgICAgIHNldFNjcm9sbExl
			ZnQoY20sIGQuc2Nyb2xsZXIuc2Nyb2xsTGVmdCwgdHJ1ZSk7DQogICAgICAgIHNpZ25hbChjbSwg
			InNjcm9sbCIsIGNtKTsNCiAgICAgIH0NCiAgICB9KTsNCg0KICAgIC8vIExpc3RlbiB0byB3aGVl
			bCBldmVudHMgaW4gb3JkZXIgdG8gdHJ5IGFuZCB1cGRhdGUgdGhlIHZpZXdwb3J0IG9uIHRpbWUu
			DQogICAgb24oZC5zY3JvbGxlciwgIm1vdXNld2hlZWwiLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4g
			b25TY3JvbGxXaGVlbChjbSwgZSk7IH0pOw0KICAgIG9uKGQuc2Nyb2xsZXIsICJET01Nb3VzZVNj
			cm9sbCIsIGZ1bmN0aW9uIChlKSB7IHJldHVybiBvblNjcm9sbFdoZWVsKGNtLCBlKTsgfSk7DQoN
			CiAgICAvLyBQcmV2ZW50IHdyYXBwZXIgZnJvbSBldmVyIHNjcm9sbGluZw0KICAgIG9uKGQud3Jh
			cHBlciwgInNjcm9sbCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGQud3JhcHBlci5zY3JvbGxUb3Ag
			PSBkLndyYXBwZXIuc2Nyb2xsTGVmdCA9IDA7IH0pOw0KDQogICAgZC5kcmFnRnVuY3Rpb25zID0g
			ew0KICAgICAgZW50ZXI6IGZ1bmN0aW9uIChlKSB7aWYgKCFzaWduYWxET01FdmVudChjbSwgZSkp
			IHsgZV9zdG9wKGUpOyB9fSwNCiAgICAgIG92ZXI6IGZ1bmN0aW9uIChlKSB7aWYgKCFzaWduYWxE
			T01FdmVudChjbSwgZSkpIHsgb25EcmFnT3ZlcihjbSwgZSk7IGVfc3RvcChlKTsgfX0sDQogICAg
			ICBzdGFydDogZnVuY3Rpb24gKGUpIHsgcmV0dXJuIG9uRHJhZ1N0YXJ0KGNtLCBlKTsgfSwNCiAg
			ICAgIGRyb3A6IG9wZXJhdGlvbihjbSwgb25Ecm9wKSwNCiAgICAgIGxlYXZlOiBmdW5jdGlvbiAo
			ZSkge2lmICghc2lnbmFsRE9NRXZlbnQoY20sIGUpKSB7IGNsZWFyRHJhZ0N1cnNvcihjbSk7IH19
			DQogICAgfTsNCg0KICAgIHZhciBpbnAgPSBkLmlucHV0LmdldEZpZWxkKCk7DQogICAgb24oaW5w
			LCAia2V5dXAiLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gb25LZXlVcC5jYWxsKGNtLCBlKTsgfSk7
			DQogICAgb24oaW5wLCAia2V5ZG93biIsIG9wZXJhdGlvbihjbSwgb25LZXlEb3duKSk7DQogICAg
			b24oaW5wLCAia2V5cHJlc3MiLCBvcGVyYXRpb24oY20sIG9uS2V5UHJlc3MpKTsNCiAgICBvbihp
			bnAsICJmb2N1cyIsIGZ1bmN0aW9uIChlKSB7IHJldHVybiBvbkZvY3VzKGNtLCBlKTsgfSk7DQog
			ICAgb24oaW5wLCAiYmx1ciIsIGZ1bmN0aW9uIChlKSB7IHJldHVybiBvbkJsdXIoY20sIGUpOyB9
			KTsNCiAgfQ0KDQogIHZhciBpbml0SG9va3MgPSBbXTsNCiAgQ29kZU1pcnJvci5kZWZpbmVJbml0
			SG9vayA9IGZ1bmN0aW9uIChmKSB7IHJldHVybiBpbml0SG9va3MucHVzaChmKTsgfTsNCg0KICAv
			LyBJbmRlbnQgdGhlIGdpdmVuIGxpbmUuIFRoZSBob3cgcGFyYW1ldGVyIGNhbiBiZSAic21hcnQi
			LA0KICAvLyAiYWRkIi9udWxsLCAic3VidHJhY3QiLCBvciAicHJldiIuIFdoZW4gYWdncmVzc2l2
			ZSBpcyBmYWxzZQ0KICAvLyAodHlwaWNhbGx5IHNldCB0byB0cnVlIGZvciBmb3JjZWQgc2luZ2xl
			LWxpbmUgaW5kZW50cyksIGVtcHR5DQogIC8vIGxpbmVzIGFyZSBub3QgaW5kZW50ZWQsIGFuZCBw
			bGFjZXMgd2hlcmUgdGhlIG1vZGUgcmV0dXJucyBQYXNzDQogIC8vIGFyZSBsZWZ0IGFsb25lLg0K
			ICBmdW5jdGlvbiBpbmRlbnRMaW5lKGNtLCBuLCBob3csIGFnZ3Jlc3NpdmUpIHsNCiAgICB2YXIg
			ZG9jID0gY20uZG9jLCBzdGF0ZTsNCiAgICBpZiAoaG93ID09IG51bGwpIHsgaG93ID0gImFkZCI7
			IH0NCiAgICBpZiAoaG93ID09ICJzbWFydCIpIHsNCiAgICAgIC8vIEZhbGwgYmFjayB0byAicHJl
			diIgd2hlbiB0aGUgbW9kZSBkb2Vzbid0IGhhdmUgYW4gaW5kZW50YXRpb24NCiAgICAgIC8vIG1l
			dGhvZC4NCiAgICAgIGlmICghZG9jLm1vZGUuaW5kZW50KSB7IGhvdyA9ICJwcmV2IjsgfQ0KICAg
			ICAgZWxzZSB7IHN0YXRlID0gZ2V0Q29udGV4dEJlZm9yZShjbSwgbikuc3RhdGU7IH0NCiAgICB9
			DQoNCiAgICB2YXIgdGFiU2l6ZSA9IGNtLm9wdGlvbnMudGFiU2l6ZTsNCiAgICB2YXIgbGluZSA9
			IGdldExpbmUoZG9jLCBuKSwgY3VyU3BhY2UgPSBjb3VudENvbHVtbihsaW5lLnRleHQsIG51bGws
			IHRhYlNpemUpOw0KICAgIGlmIChsaW5lLnN0YXRlQWZ0ZXIpIHsgbGluZS5zdGF0ZUFmdGVyID0g
			bnVsbDsgfQ0KICAgIHZhciBjdXJTcGFjZVN0cmluZyA9IGxpbmUudGV4dC5tYXRjaCgvXlxzKi8p
			WzBdLCBpbmRlbnRhdGlvbjsNCiAgICBpZiAoIWFnZ3Jlc3NpdmUgJiYgIS9cUy8udGVzdChsaW5l
			LnRleHQpKSB7DQogICAgICBpbmRlbnRhdGlvbiA9IDA7DQogICAgICBob3cgPSAibm90IjsNCiAg
			ICB9IGVsc2UgaWYgKGhvdyA9PSAic21hcnQiKSB7DQogICAgICBpbmRlbnRhdGlvbiA9IGRvYy5t
			b2RlLmluZGVudChzdGF0ZSwgbGluZS50ZXh0LnNsaWNlKGN1clNwYWNlU3RyaW5nLmxlbmd0aCks
			IGxpbmUudGV4dCk7DQogICAgICBpZiAoaW5kZW50YXRpb24gPT0gUGFzcyB8fCBpbmRlbnRhdGlv
			biA+IDE1MCkgew0KICAgICAgICBpZiAoIWFnZ3Jlc3NpdmUpIHsgcmV0dXJuIH0NCiAgICAgICAg
			aG93ID0gInByZXYiOw0KICAgICAgfQ0KICAgIH0NCiAgICBpZiAoaG93ID09ICJwcmV2Iikgew0K
			ICAgICAgaWYgKG4gPiBkb2MuZmlyc3QpIHsgaW5kZW50YXRpb24gPSBjb3VudENvbHVtbihnZXRM
			aW5lKGRvYywgbi0xKS50ZXh0LCBudWxsLCB0YWJTaXplKTsgfQ0KICAgICAgZWxzZSB7IGluZGVu
			dGF0aW9uID0gMDsgfQ0KICAgIH0gZWxzZSBpZiAoaG93ID09ICJhZGQiKSB7DQogICAgICBpbmRl
			bnRhdGlvbiA9IGN1clNwYWNlICsgY20ub3B0aW9ucy5pbmRlbnRVbml0Ow0KICAgIH0gZWxzZSBp
			ZiAoaG93ID09ICJzdWJ0cmFjdCIpIHsNCiAgICAgIGluZGVudGF0aW9uID0gY3VyU3BhY2UgLSBj
			bS5vcHRpb25zLmluZGVudFVuaXQ7DQogICAgfSBlbHNlIGlmICh0eXBlb2YgaG93ID09ICJudW1i
			ZXIiKSB7DQogICAgICBpbmRlbnRhdGlvbiA9IGN1clNwYWNlICsgaG93Ow0KICAgIH0NCiAgICBp
			bmRlbnRhdGlvbiA9IE1hdGgubWF4KDAsIGluZGVudGF0aW9uKTsNCg0KICAgIHZhciBpbmRlbnRT
			dHJpbmcgPSAiIiwgcG9zID0gMDsNCiAgICBpZiAoY20ub3B0aW9ucy5pbmRlbnRXaXRoVGFicykN
			CiAgICAgIHsgZm9yICh2YXIgaSA9IE1hdGguZmxvb3IoaW5kZW50YXRpb24gLyB0YWJTaXplKTsg
			aTsgLS1pKSB7cG9zICs9IHRhYlNpemU7IGluZGVudFN0cmluZyArPSAiXHQiO30gfQ0KICAgIGlm
			IChwb3MgPCBpbmRlbnRhdGlvbikgeyBpbmRlbnRTdHJpbmcgKz0gc3BhY2VTdHIoaW5kZW50YXRp
			b24gLSBwb3MpOyB9DQoNCiAgICBpZiAoaW5kZW50U3RyaW5nICE9IGN1clNwYWNlU3RyaW5nKSB7
			DQogICAgICByZXBsYWNlUmFuZ2UoZG9jLCBpbmRlbnRTdHJpbmcsIFBvcyhuLCAwKSwgUG9zKG4s
			IGN1clNwYWNlU3RyaW5nLmxlbmd0aCksICIraW5wdXQiKTsNCiAgICAgIGxpbmUuc3RhdGVBZnRl
			ciA9IG51bGw7DQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIH0gZWxzZSB7DQogICAgICAvLyBFbnN1
			cmUgdGhhdCwgaWYgdGhlIGN1cnNvciB3YXMgaW4gdGhlIHdoaXRlc3BhY2UgYXQgdGhlIHN0YXJ0
			DQogICAgICAvLyBvZiB0aGUgbGluZSwgaXQgaXMgbW92ZWQgdG8gdGhlIGVuZCBvZiB0aGF0IHNw
			YWNlLg0KICAgICAgZm9yICh2YXIgaSQxID0gMDsgaSQxIDwgZG9jLnNlbC5yYW5nZXMubGVuZ3Ro
			OyBpJDErKykgew0KICAgICAgICB2YXIgcmFuZ2UgPSBkb2Muc2VsLnJhbmdlc1tpJDFdOw0KICAg
			ICAgICBpZiAocmFuZ2UuaGVhZC5saW5lID09IG4gJiYgcmFuZ2UuaGVhZC5jaCA8IGN1clNwYWNl
			U3RyaW5nLmxlbmd0aCkgew0KICAgICAgICAgIHZhciBwb3MkMSA9IFBvcyhuLCBjdXJTcGFjZVN0
			cmluZy5sZW5ndGgpOw0KICAgICAgICAgIHJlcGxhY2VPbmVTZWxlY3Rpb24oZG9jLCBpJDEsIG5l
			dyBSYW5nZShwb3MkMSwgcG9zJDEpKTsNCiAgICAgICAgICBicmVhaw0KICAgICAgICB9DQogICAg
			ICB9DQogICAgfQ0KICB9DQoNCiAgLy8gVGhpcyB3aWxsIGJlIHNldCB0byBhIHtsaW5lV2lzZTog
			Ym9vbCwgdGV4dDogW3N0cmluZ119IG9iamVjdCwgc28NCiAgLy8gdGhhdCwgd2hlbiBwYXN0aW5n
			LCB3ZSBrbm93IHdoYXQga2luZCBvZiBzZWxlY3Rpb25zIHRoZSBjb3BpZWQNCiAgLy8gdGV4dCB3
			YXMgbWFkZSBvdXQgb2YuDQogIHZhciBsYXN0Q29waWVkID0gbnVsbDsNCg0KICBmdW5jdGlvbiBz
			ZXRMYXN0Q29waWVkKG5ld0xhc3RDb3BpZWQpIHsNCiAgICBsYXN0Q29waWVkID0gbmV3TGFzdENv
			cGllZDsNCiAgfQ0KDQogIGZ1bmN0aW9uIGFwcGx5VGV4dElucHV0KGNtLCBpbnNlcnRlZCwgZGVs
			ZXRlZCwgc2VsLCBvcmlnaW4pIHsNCiAgICB2YXIgZG9jID0gY20uZG9jOw0KICAgIGNtLmRpc3Bs
			YXkuc2hpZnQgPSBmYWxzZTsNCiAgICBpZiAoIXNlbCkgeyBzZWwgPSBkb2Muc2VsOyB9DQoNCiAg
			ICB2YXIgcmVjZW50ID0gK25ldyBEYXRlIC0gMjAwOw0KICAgIHZhciBwYXN0ZSA9IG9yaWdpbiA9
			PSAicGFzdGUiIHx8IGNtLnN0YXRlLnBhc3RlSW5jb21pbmcgPiByZWNlbnQ7DQogICAgdmFyIHRl
			eHRMaW5lcyA9IHNwbGl0TGluZXNBdXRvKGluc2VydGVkKSwgbXVsdGlQYXN0ZSA9IG51bGw7DQog
			ICAgLy8gV2hlbiBwYXN0aW5nIE4gbGluZXMgaW50byBOIHNlbGVjdGlvbnMsIGluc2VydCBvbmUg
			bGluZSBwZXIgc2VsZWN0aW9uDQogICAgaWYgKHBhc3RlICYmIHNlbC5yYW5nZXMubGVuZ3RoID4g
			MSkgew0KICAgICAgaWYgKGxhc3RDb3BpZWQgJiYgbGFzdENvcGllZC50ZXh0LmpvaW4oIlxuIikg
			PT0gaW5zZXJ0ZWQpIHsNCiAgICAgICAgaWYgKHNlbC5yYW5nZXMubGVuZ3RoICUgbGFzdENvcGll
			ZC50ZXh0Lmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgbXVsdGlQYXN0ZSA9IFtdOw0KICAgICAg
			ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdENvcGllZC50ZXh0Lmxlbmd0aDsgaSsrKQ0KICAg
			ICAgICAgICAgeyBtdWx0aVBhc3RlLnB1c2goZG9jLnNwbGl0TGluZXMobGFzdENvcGllZC50ZXh0
			W2ldKSk7IH0NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmICh0ZXh0TGluZXMubGVuZ3RoID09
			IHNlbC5yYW5nZXMubGVuZ3RoICYmIGNtLm9wdGlvbnMucGFzdGVMaW5lc1BlclNlbGVjdGlvbikg
			ew0KICAgICAgICBtdWx0aVBhc3RlID0gbWFwKHRleHRMaW5lcywgZnVuY3Rpb24gKGwpIHsgcmV0
			dXJuIFtsXTsgfSk7DQogICAgICB9DQogICAgfQ0KDQogICAgdmFyIHVwZGF0ZUlucHV0ID0gY20u
			Y3VyT3AudXBkYXRlSW5wdXQ7DQogICAgLy8gTm9ybWFsIGJlaGF2aW9yIGlzIHRvIGluc2VydCB0
			aGUgbmV3IHRleHQgaW50byBldmVyeSBzZWxlY3Rpb24NCiAgICBmb3IgKHZhciBpJDEgPSBzZWwu
			cmFuZ2VzLmxlbmd0aCAtIDE7IGkkMSA+PSAwOyBpJDEtLSkgew0KICAgICAgdmFyIHJhbmdlJCQx
			ID0gc2VsLnJhbmdlc1tpJDFdOw0KICAgICAgdmFyIGZyb20gPSByYW5nZSQkMS5mcm9tKCksIHRv
			ID0gcmFuZ2UkJDEudG8oKTsNCiAgICAgIGlmIChyYW5nZSQkMS5lbXB0eSgpKSB7DQogICAgICAg
			IGlmIChkZWxldGVkICYmIGRlbGV0ZWQgPiAwKSAvLyBIYW5kbGUgZGVsZXRpb24NCiAgICAgICAg
			ICB7IGZyb20gPSBQb3MoZnJvbS5saW5lLCBmcm9tLmNoIC0gZGVsZXRlZCk7IH0NCiAgICAgICAg
			ZWxzZSBpZiAoY20uc3RhdGUub3ZlcndyaXRlICYmICFwYXN0ZSkgLy8gSGFuZGxlIG92ZXJ3cml0
			ZQ0KICAgICAgICAgIHsgdG8gPSBQb3ModG8ubGluZSwgTWF0aC5taW4oZ2V0TGluZShkb2MsIHRv
			LmxpbmUpLnRleHQubGVuZ3RoLCB0by5jaCArIGxzdCh0ZXh0TGluZXMpLmxlbmd0aCkpOyB9DQog
			ICAgICAgIGVsc2UgaWYgKHBhc3RlICYmIGxhc3RDb3BpZWQgJiYgbGFzdENvcGllZC5saW5lV2lz
			ZSAmJiBsYXN0Q29waWVkLnRleHQuam9pbigiXG4iKSA9PSBpbnNlcnRlZCkNCiAgICAgICAgICB7
			IGZyb20gPSB0byA9IFBvcyhmcm9tLmxpbmUsIDApOyB9DQogICAgICB9DQogICAgICB2YXIgY2hh
			bmdlRXZlbnQgPSB7ZnJvbTogZnJvbSwgdG86IHRvLCB0ZXh0OiBtdWx0aVBhc3RlID8gbXVsdGlQ
			YXN0ZVtpJDEgJSBtdWx0aVBhc3RlLmxlbmd0aF0gOiB0ZXh0TGluZXMsDQogICAgICAgICAgICAg
			ICAgICAgICAgICAgb3JpZ2luOiBvcmlnaW4gfHwgKHBhc3RlID8gInBhc3RlIiA6IGNtLnN0YXRl
			LmN1dEluY29taW5nID4gcmVjZW50ID8gImN1dCIgOiAiK2lucHV0Iil9Ow0KICAgICAgbWFrZUNo
			YW5nZShjbS5kb2MsIGNoYW5nZUV2ZW50KTsNCiAgICAgIHNpZ25hbExhdGVyKGNtLCAiaW5wdXRS
			ZWFkIiwgY20sIGNoYW5nZUV2ZW50KTsNCiAgICB9DQogICAgaWYgKGluc2VydGVkICYmICFwYXN0
			ZSkNCiAgICAgIHsgdHJpZ2dlckVsZWN0cmljKGNtLCBpbnNlcnRlZCk7IH0NCg0KICAgIGVuc3Vy
			ZUN1cnNvclZpc2libGUoY20pOw0KICAgIGlmIChjbS5jdXJPcC51cGRhdGVJbnB1dCA8IDIpIHsg
			Y20uY3VyT3AudXBkYXRlSW5wdXQgPSB1cGRhdGVJbnB1dDsgfQ0KICAgIGNtLmN1ck9wLnR5cGlu
			ZyA9IHRydWU7DQogICAgY20uc3RhdGUucGFzdGVJbmNvbWluZyA9IGNtLnN0YXRlLmN1dEluY29t
			aW5nID0gLTE7DQogIH0NCg0KICBmdW5jdGlvbiBoYW5kbGVQYXN0ZShlLCBjbSkgew0KICAgIHZh
			ciBwYXN0ZWQgPSBlLmNsaXBib2FyZERhdGEgJiYgZS5jbGlwYm9hcmREYXRhLmdldERhdGEoIlRl
			eHQiKTsNCiAgICBpZiAocGFzdGVkKSB7DQogICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAg
			ICBpZiAoIWNtLmlzUmVhZE9ubHkoKSAmJiAhY20ub3B0aW9ucy5kaXNhYmxlSW5wdXQpDQogICAg
			ICAgIHsgcnVuSW5PcChjbSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gYXBwbHlUZXh0SW5wdXQoY20s
			IHBhc3RlZCwgMCwgbnVsbCwgInBhc3RlIik7IH0pOyB9DQogICAgICByZXR1cm4gdHJ1ZQ0KICAg
			IH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHRyaWdnZXJFbGVjdHJpYyhjbSwgaW5zZXJ0ZWQpIHsNCiAg
			ICAvLyBXaGVuIGFuICdlbGVjdHJpYycgY2hhcmFjdGVyIGlzIGluc2VydGVkLCBpbW1lZGlhdGVs
			eSB0cmlnZ2VyIGEgcmVpbmRlbnQNCiAgICBpZiAoIWNtLm9wdGlvbnMuZWxlY3RyaWNDaGFycyB8
			fCAhY20ub3B0aW9ucy5zbWFydEluZGVudCkgeyByZXR1cm4gfQ0KICAgIHZhciBzZWwgPSBjbS5k
			b2Muc2VsOw0KDQogICAgZm9yICh2YXIgaSA9IHNlbC5yYW5nZXMubGVuZ3RoIC0gMTsgaSA+PSAw
			OyBpLS0pIHsNCiAgICAgIHZhciByYW5nZSQkMSA9IHNlbC5yYW5nZXNbaV07DQogICAgICBpZiAo
			cmFuZ2UkJDEuaGVhZC5jaCA+IDEwMCB8fCAoaSAmJiBzZWwucmFuZ2VzW2kgLSAxXS5oZWFkLmxp
			bmUgPT0gcmFuZ2UkJDEuaGVhZC5saW5lKSkgeyBjb250aW51ZSB9DQogICAgICB2YXIgbW9kZSA9
			IGNtLmdldE1vZGVBdChyYW5nZSQkMS5oZWFkKTsNCiAgICAgIHZhciBpbmRlbnRlZCA9IGZhbHNl
			Ow0KICAgICAgaWYgKG1vZGUuZWxlY3RyaWNDaGFycykgew0KICAgICAgICBmb3IgKHZhciBqID0g
			MDsgaiA8IG1vZGUuZWxlY3RyaWNDaGFycy5sZW5ndGg7IGorKykNCiAgICAgICAgICB7IGlmIChp
			bnNlcnRlZC5pbmRleE9mKG1vZGUuZWxlY3RyaWNDaGFycy5jaGFyQXQoaikpID4gLTEpIHsNCiAg
			ICAgICAgICAgIGluZGVudGVkID0gaW5kZW50TGluZShjbSwgcmFuZ2UkJDEuaGVhZC5saW5lLCAi
			c21hcnQiKTsNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgfSB9DQogICAgICB9IGVsc2Ug
			aWYgKG1vZGUuZWxlY3RyaWNJbnB1dCkgew0KICAgICAgICBpZiAobW9kZS5lbGVjdHJpY0lucHV0
			LnRlc3QoZ2V0TGluZShjbS5kb2MsIHJhbmdlJCQxLmhlYWQubGluZSkudGV4dC5zbGljZSgwLCBy
			YW5nZSQkMS5oZWFkLmNoKSkpDQogICAgICAgICAgeyBpbmRlbnRlZCA9IGluZGVudExpbmUoY20s
			IHJhbmdlJCQxLmhlYWQubGluZSwgInNtYXJ0Iik7IH0NCiAgICAgIH0NCiAgICAgIGlmIChpbmRl
			bnRlZCkgeyBzaWduYWxMYXRlcihjbSwgImVsZWN0cmljSW5wdXQiLCBjbSwgcmFuZ2UkJDEuaGVh
			ZC5saW5lKTsgfQ0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIGNvcHlhYmxlUmFuZ2VzKGNtKSB7
			DQogICAgdmFyIHRleHQgPSBbXSwgcmFuZ2VzID0gW107DQogICAgZm9yICh2YXIgaSA9IDA7IGkg
			PCBjbS5kb2Muc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykgew0KICAgICAgdmFyIGxpbmUgPSBjbS5k
			b2Muc2VsLnJhbmdlc1tpXS5oZWFkLmxpbmU7DQogICAgICB2YXIgbGluZVJhbmdlID0ge2FuY2hv
			cjogUG9zKGxpbmUsIDApLCBoZWFkOiBQb3MobGluZSArIDEsIDApfTsNCiAgICAgIHJhbmdlcy5w
			dXNoKGxpbmVSYW5nZSk7DQogICAgICB0ZXh0LnB1c2goY20uZ2V0UmFuZ2UobGluZVJhbmdlLmFu
			Y2hvciwgbGluZVJhbmdlLmhlYWQpKTsNCiAgICB9DQogICAgcmV0dXJuIHt0ZXh0OiB0ZXh0LCBy
			YW5nZXM6IHJhbmdlc30NCiAgfQ0KDQogIGZ1bmN0aW9uIGRpc2FibGVCcm93c2VyTWFnaWMoZmll
			bGQsIHNwZWxsY2hlY2ssIGF1dG9jb3JyZWN0LCBhdXRvY2FwaXRhbGl6ZSkgew0KICAgIGZpZWxk
			LnNldEF0dHJpYnV0ZSgiYXV0b2NvcnJlY3QiLCBhdXRvY29ycmVjdCA/ICIiIDogIm9mZiIpOw0K
			ICAgIGZpZWxkLnNldEF0dHJpYnV0ZSgiYXV0b2NhcGl0YWxpemUiLCBhdXRvY2FwaXRhbGl6ZSA/
			ICIiIDogIm9mZiIpOw0KICAgIGZpZWxkLnNldEF0dHJpYnV0ZSgic3BlbGxjaGVjayIsICEhc3Bl
			bGxjaGVjayk7DQogIH0NCg0KICBmdW5jdGlvbiBoaWRkZW5UZXh0YXJlYSgpIHsNCiAgICB2YXIg
			dGUgPSBlbHQoInRleHRhcmVhIiwgbnVsbCwgbnVsbCwgInBvc2l0aW9uOiBhYnNvbHV0ZTsgYm90
			dG9tOiAtMWVtOyBwYWRkaW5nOiAwOyB3aWR0aDogMXB4OyBoZWlnaHQ6IDFlbTsgb3V0bGluZTog
			bm9uZSIpOw0KICAgIHZhciBkaXYgPSBlbHQoImRpdiIsIFt0ZV0sIG51bGwsICJvdmVyZmxvdzog
			aGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7IHdpZHRoOiAzcHg7IGhlaWdodDogMHB4OyIpOw0K
			ICAgIC8vIFRoZSB0ZXh0YXJlYSBpcyBrZXB0IHBvc2l0aW9uZWQgbmVhciB0aGUgY3Vyc29yIHRv
			IHByZXZlbnQgdGhlDQogICAgLy8gZmFjdCB0aGF0IGl0J2xsIGJlIHNjcm9sbGVkIGludG8gdmll
			dyBvbiBpbnB1dCBmcm9tIHNjcm9sbGluZw0KICAgIC8vIG91ciBmYWtlIGN1cnNvciBvdXQgb2Yg
			dmlldy4gT24gd2Via2l0LCB3aGVuIHdyYXA9b2ZmLCBwYXN0ZSBpcw0KICAgIC8vIHZlcnkgc2xv
			dy4gU28gbWFrZSB0aGUgYXJlYSB3aWRlIGluc3RlYWQuDQogICAgaWYgKHdlYmtpdCkgeyB0ZS5z
			dHlsZS53aWR0aCA9ICIxMDAwcHgiOyB9DQogICAgZWxzZSB7IHRlLnNldEF0dHJpYnV0ZSgid3Jh
			cCIsICJvZmYiKTsgfQ0KICAgIC8vIElmIGJvcmRlcjogMDsgLS0gaU9TIGZhaWxzIHRvIG9wZW4g
			a2V5Ym9hcmQgKGlzc3VlICMxMjg3KQ0KICAgIGlmIChpb3MpIHsgdGUuc3R5bGUuYm9yZGVyID0g
			IjFweCBzb2xpZCBibGFjayI7IH0NCiAgICBkaXNhYmxlQnJvd3Nlck1hZ2ljKHRlKTsNCiAgICBy
			ZXR1cm4gZGl2DQogIH0NCg0KICAvLyBUaGUgcHVibGljbHkgdmlzaWJsZSBBUEkuIE5vdGUgdGhh
			dCBtZXRob2RPcChmKSBtZWFucw0KICAvLyAnd3JhcCBmIGluIGFuIG9wZXJhdGlvbiwgcGVyZm9y
			bWVkIG9uIGl0cyBgdGhpc2AgcGFyYW1ldGVyJy4NCg0KICAvLyBUaGlzIGlzIG5vdCB0aGUgY29t
			cGxldGUgc2V0IG9mIGVkaXRvciBtZXRob2RzLiBNb3N0IG9mIHRoZQ0KICAvLyBtZXRob2RzIGRl
			ZmluZWQgb24gdGhlIERvYyB0eXBlIGFyZSBhbHNvIGluamVjdGVkIGludG8NCiAgLy8gQ29kZU1p
			cnJvci5wcm90b3R5cGUsIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBhbmQNCiAgLy8gY29u
			dmVuaWVuY2UuDQoNCiAgZnVuY3Rpb24gYWRkRWRpdG9yTWV0aG9kcyhDb2RlTWlycm9yKSB7DQog
			ICAgdmFyIG9wdGlvbkhhbmRsZXJzID0gQ29kZU1pcnJvci5vcHRpb25IYW5kbGVyczsNCg0KICAg
			IHZhciBoZWxwZXJzID0gQ29kZU1pcnJvci5oZWxwZXJzID0ge307DQoNCiAgICBDb2RlTWlycm9y
			LnByb3RvdHlwZSA9IHsNCiAgICAgIGNvbnN0cnVjdG9yOiBDb2RlTWlycm9yLA0KICAgICAgZm9j
			dXM6IGZ1bmN0aW9uKCl7d2luZG93LmZvY3VzKCk7IHRoaXMuZGlzcGxheS5pbnB1dC5mb2N1cygp
			O30sDQoNCiAgICAgIHNldE9wdGlvbjogZnVuY3Rpb24ob3B0aW9uLCB2YWx1ZSkgew0KICAgICAg
			ICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucywgb2xkID0gb3B0aW9uc1tvcHRpb25dOw0KICAg
			ICAgICBpZiAob3B0aW9uc1tvcHRpb25dID09IHZhbHVlICYmIG9wdGlvbiAhPSAibW9kZSIpIHsg
			cmV0dXJuIH0NCiAgICAgICAgb3B0aW9uc1tvcHRpb25dID0gdmFsdWU7DQogICAgICAgIGlmIChv
			cHRpb25IYW5kbGVycy5oYXNPd25Qcm9wZXJ0eShvcHRpb24pKQ0KICAgICAgICAgIHsgb3BlcmF0
			aW9uKHRoaXMsIG9wdGlvbkhhbmRsZXJzW29wdGlvbl0pKHRoaXMsIHZhbHVlLCBvbGQpOyB9DQog
			ICAgICAgIHNpZ25hbCh0aGlzLCAib3B0aW9uQ2hhbmdlIiwgdGhpcywgb3B0aW9uKTsNCiAgICAg
			IH0sDQoNCiAgICAgIGdldE9wdGlvbjogZnVuY3Rpb24ob3B0aW9uKSB7cmV0dXJuIHRoaXMub3B0
			aW9uc1tvcHRpb25dfSwNCiAgICAgIGdldERvYzogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuZG9j
			fSwNCg0KICAgICAgYWRkS2V5TWFwOiBmdW5jdGlvbihtYXAkJDEsIGJvdHRvbSkgew0KICAgICAg
			ICB0aGlzLnN0YXRlLmtleU1hcHNbYm90dG9tID8gInB1c2giIDogInVuc2hpZnQiXShnZXRLZXlN
			YXAobWFwJCQxKSk7DQogICAgICB9LA0KICAgICAgcmVtb3ZlS2V5TWFwOiBmdW5jdGlvbihtYXAk
			JDEpIHsNCiAgICAgICAgdmFyIG1hcHMgPSB0aGlzLnN0YXRlLmtleU1hcHM7DQogICAgICAgIGZv
			ciAodmFyIGkgPSAwOyBpIDwgbWFwcy5sZW5ndGg7ICsraSkNCiAgICAgICAgICB7IGlmIChtYXBz
			W2ldID09IG1hcCQkMSB8fCBtYXBzW2ldLm5hbWUgPT0gbWFwJCQxKSB7DQogICAgICAgICAgICBt
			YXBzLnNwbGljZShpLCAxKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgICAgfSB9
			DQogICAgICB9LA0KDQogICAgICBhZGRPdmVybGF5OiBtZXRob2RPcChmdW5jdGlvbihzcGVjLCBv
			cHRpb25zKSB7DQogICAgICAgIHZhciBtb2RlID0gc3BlYy50b2tlbiA/IHNwZWMgOiBDb2RlTWly
			cm9yLmdldE1vZGUodGhpcy5vcHRpb25zLCBzcGVjKTsNCiAgICAgICAgaWYgKG1vZGUuc3RhcnRT
			dGF0ZSkgeyB0aHJvdyBuZXcgRXJyb3IoIk92ZXJsYXlzIG1heSBub3QgYmUgc3RhdGVmdWwuIikg
			fQ0KICAgICAgICBpbnNlcnRTb3J0ZWQodGhpcy5zdGF0ZS5vdmVybGF5cywNCiAgICAgICAgICAg
			ICAgICAgICAgIHttb2RlOiBtb2RlLCBtb2RlU3BlYzogc3BlYywgb3BhcXVlOiBvcHRpb25zICYm
			IG9wdGlvbnMub3BhcXVlLA0KICAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiAob3B0aW9u
			cyAmJiBvcHRpb25zLnByaW9yaXR5KSB8fCAwfSwNCiAgICAgICAgICAgICAgICAgICAgIGZ1bmN0
			aW9uIChvdmVybGF5KSB7IHJldHVybiBvdmVybGF5LnByaW9yaXR5OyB9KTsNCiAgICAgICAgdGhp
			cy5zdGF0ZS5tb2RlR2VuKys7DQogICAgICAgIHJlZ0NoYW5nZSh0aGlzKTsNCiAgICAgIH0pLA0K
			ICAgICAgcmVtb3ZlT3ZlcmxheTogbWV0aG9kT3AoZnVuY3Rpb24oc3BlYykgew0KICAgICAgICB2
			YXIgdGhpcyQxID0gdGhpczsNCg0KICAgICAgICB2YXIgb3ZlcmxheXMgPSB0aGlzLnN0YXRlLm92
			ZXJsYXlzOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG92ZXJsYXlzLmxlbmd0aDsgKytp
			KSB7DQogICAgICAgICAgdmFyIGN1ciA9IG92ZXJsYXlzW2ldLm1vZGVTcGVjOw0KICAgICAgICAg
			IGlmIChjdXIgPT0gc3BlYyB8fCB0eXBlb2Ygc3BlYyA9PSAic3RyaW5nIiAmJiBjdXIubmFtZSA9
			PSBzcGVjKSB7DQogICAgICAgICAgICBvdmVybGF5cy5zcGxpY2UoaSwgMSk7DQogICAgICAgICAg
			ICB0aGlzJDEuc3RhdGUubW9kZUdlbisrOw0KICAgICAgICAgICAgcmVnQ2hhbmdlKHRoaXMkMSk7
			DQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pLA0K
			DQogICAgICBpbmRlbnRMaW5lOiBtZXRob2RPcChmdW5jdGlvbihuLCBkaXIsIGFnZ3Jlc3NpdmUp
			IHsNCiAgICAgICAgaWYgKHR5cGVvZiBkaXIgIT0gInN0cmluZyIgJiYgdHlwZW9mIGRpciAhPSAi
			bnVtYmVyIikgew0KICAgICAgICAgIGlmIChkaXIgPT0gbnVsbCkgeyBkaXIgPSB0aGlzLm9wdGlv
			bnMuc21hcnRJbmRlbnQgPyAic21hcnQiIDogInByZXYiOyB9DQogICAgICAgICAgZWxzZSB7IGRp
			ciA9IGRpciA/ICJhZGQiIDogInN1YnRyYWN0IjsgfQ0KICAgICAgICB9DQogICAgICAgIGlmIChp
			c0xpbmUodGhpcy5kb2MsIG4pKSB7IGluZGVudExpbmUodGhpcywgbiwgZGlyLCBhZ2dyZXNzaXZl
			KTsgfQ0KICAgICAgfSksDQogICAgICBpbmRlbnRTZWxlY3Rpb246IG1ldGhvZE9wKGZ1bmN0aW9u
			KGhvdykgew0KICAgICAgICB2YXIgdGhpcyQxID0gdGhpczsNCg0KICAgICAgICB2YXIgcmFuZ2Vz
			ID0gdGhpcy5kb2Muc2VsLnJhbmdlcywgZW5kID0gLTE7DQogICAgICAgIGZvciAodmFyIGkgPSAw
			OyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgdmFyIHJhbmdlJCQxID0gcmFu
			Z2VzW2ldOw0KICAgICAgICAgIGlmICghcmFuZ2UkJDEuZW1wdHkoKSkgew0KICAgICAgICAgICAg
			dmFyIGZyb20gPSByYW5nZSQkMS5mcm9tKCksIHRvID0gcmFuZ2UkJDEudG8oKTsNCiAgICAgICAg
			ICAgIHZhciBzdGFydCA9IE1hdGgubWF4KGVuZCwgZnJvbS5saW5lKTsNCiAgICAgICAgICAgIGVu
			ZCA9IE1hdGgubWluKHRoaXMkMS5sYXN0TGluZSgpLCB0by5saW5lIC0gKHRvLmNoID8gMCA6IDEp
			KSArIDE7DQogICAgICAgICAgICBmb3IgKHZhciBqID0gc3RhcnQ7IGogPCBlbmQ7ICsraikNCiAg
			ICAgICAgICAgICAgeyBpbmRlbnRMaW5lKHRoaXMkMSwgaiwgaG93KTsgfQ0KICAgICAgICAgICAg
			dmFyIG5ld1JhbmdlcyA9IHRoaXMkMS5kb2Muc2VsLnJhbmdlczsNCiAgICAgICAgICAgIGlmIChm
			cm9tLmNoID09IDAgJiYgcmFuZ2VzLmxlbmd0aCA9PSBuZXdSYW5nZXMubGVuZ3RoICYmIG5ld1Jh
			bmdlc1tpXS5mcm9tKCkuY2ggPiAwKQ0KICAgICAgICAgICAgICB7IHJlcGxhY2VPbmVTZWxlY3Rp
			b24odGhpcyQxLmRvYywgaSwgbmV3IFJhbmdlKGZyb20sIG5ld1Jhbmdlc1tpXS50bygpKSwgc2Vs
			X2RvbnRTY3JvbGwpOyB9DQogICAgICAgICAgfSBlbHNlIGlmIChyYW5nZSQkMS5oZWFkLmxpbmUg
			PiBlbmQpIHsNCiAgICAgICAgICAgIGluZGVudExpbmUodGhpcyQxLCByYW5nZSQkMS5oZWFkLmxp
			bmUsIGhvdywgdHJ1ZSk7DQogICAgICAgICAgICBlbmQgPSByYW5nZSQkMS5oZWFkLmxpbmU7DQog
			ICAgICAgICAgICBpZiAoaSA9PSB0aGlzJDEuZG9jLnNlbC5wcmltSW5kZXgpIHsgZW5zdXJlQ3Vy
			c29yVmlzaWJsZSh0aGlzJDEpOyB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KSwN
			Cg0KICAgICAgLy8gRmV0Y2ggdGhlIHBhcnNlciB0b2tlbiBmb3IgYSBnaXZlbiBjaGFyYWN0ZXIu
			IFVzZWZ1bCBmb3IgaGFja3MNCiAgICAgIC8vIHRoYXQgd2FudCB0byBpbnNwZWN0IHRoZSBtb2Rl
			IHN0YXRlIChzYXksIGZvciBjb21wbGV0aW9uKS4NCiAgICAgIGdldFRva2VuQXQ6IGZ1bmN0aW9u
			KHBvcywgcHJlY2lzZSkgew0KICAgICAgICByZXR1cm4gdGFrZVRva2VuKHRoaXMsIHBvcywgcHJl
			Y2lzZSkNCiAgICAgIH0sDQoNCiAgICAgIGdldExpbmVUb2tlbnM6IGZ1bmN0aW9uKGxpbmUsIHBy
			ZWNpc2UpIHsNCiAgICAgICAgcmV0dXJuIHRha2VUb2tlbih0aGlzLCBQb3MobGluZSksIHByZWNp
			c2UsIHRydWUpDQogICAgICB9LA0KDQogICAgICBnZXRUb2tlblR5cGVBdDogZnVuY3Rpb24ocG9z
			KSB7DQogICAgICAgIHBvcyA9IGNsaXBQb3ModGhpcy5kb2MsIHBvcyk7DQogICAgICAgIHZhciBz
			dHlsZXMgPSBnZXRMaW5lU3R5bGVzKHRoaXMsIGdldExpbmUodGhpcy5kb2MsIHBvcy5saW5lKSk7
			DQogICAgICAgIHZhciBiZWZvcmUgPSAwLCBhZnRlciA9IChzdHlsZXMubGVuZ3RoIC0gMSkgLyAy
			LCBjaCA9IHBvcy5jaDsNCiAgICAgICAgdmFyIHR5cGU7DQogICAgICAgIGlmIChjaCA9PSAwKSB7
			IHR5cGUgPSBzdHlsZXNbMl07IH0NCiAgICAgICAgZWxzZSB7IGZvciAoOzspIHsNCiAgICAgICAg
			ICB2YXIgbWlkID0gKGJlZm9yZSArIGFmdGVyKSA+PiAxOw0KICAgICAgICAgIGlmICgobWlkID8g
			c3R5bGVzW21pZCAqIDIgLSAxXSA6IDApID49IGNoKSB7IGFmdGVyID0gbWlkOyB9DQogICAgICAg
			ICAgZWxzZSBpZiAoc3R5bGVzW21pZCAqIDIgKyAxXSA8IGNoKSB7IGJlZm9yZSA9IG1pZCArIDE7
			IH0NCiAgICAgICAgICBlbHNlIHsgdHlwZSA9IHN0eWxlc1ttaWQgKiAyICsgMl07IGJyZWFrIH0N
			CiAgICAgICAgfSB9DQogICAgICAgIHZhciBjdXQgPSB0eXBlID8gdHlwZS5pbmRleE9mKCJvdmVy
			bGF5ICIpIDogLTE7DQogICAgICAgIHJldHVybiBjdXQgPCAwID8gdHlwZSA6IGN1dCA9PSAwID8g
			bnVsbCA6IHR5cGUuc2xpY2UoMCwgY3V0IC0gMSkNCiAgICAgIH0sDQoNCiAgICAgIGdldE1vZGVB
			dDogZnVuY3Rpb24ocG9zKSB7DQogICAgICAgIHZhciBtb2RlID0gdGhpcy5kb2MubW9kZTsNCiAg
			ICAgICAgaWYgKCFtb2RlLmlubmVyTW9kZSkgeyByZXR1cm4gbW9kZSB9DQogICAgICAgIHJldHVy
			biBDb2RlTWlycm9yLmlubmVyTW9kZShtb2RlLCB0aGlzLmdldFRva2VuQXQocG9zKS5zdGF0ZSku
			bW9kZQ0KICAgICAgfSwNCg0KICAgICAgZ2V0SGVscGVyOiBmdW5jdGlvbihwb3MsIHR5cGUpIHsN
			CiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SGVscGVycyhwb3MsIHR5cGUpWzBdDQogICAgICB9LA0K
			DQogICAgICBnZXRIZWxwZXJzOiBmdW5jdGlvbihwb3MsIHR5cGUpIHsNCiAgICAgICAgdmFyIHRo
			aXMkMSA9IHRoaXM7DQoNCiAgICAgICAgdmFyIGZvdW5kID0gW107DQogICAgICAgIGlmICghaGVs
			cGVycy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkgeyByZXR1cm4gZm91bmQgfQ0KICAgICAgICB2YXIg
			aGVscCA9IGhlbHBlcnNbdHlwZV0sIG1vZGUgPSB0aGlzLmdldE1vZGVBdChwb3MpOw0KICAgICAg
			ICBpZiAodHlwZW9mIG1vZGVbdHlwZV0gPT0gInN0cmluZyIpIHsNCiAgICAgICAgICBpZiAoaGVs
			cFttb2RlW3R5cGVdXSkgeyBmb3VuZC5wdXNoKGhlbHBbbW9kZVt0eXBlXV0pOyB9DQogICAgICAg
			IH0gZWxzZSBpZiAobW9kZVt0eXBlXSkgew0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwg
			bW9kZVt0eXBlXS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgdmFyIHZhbCA9IGhlbHBbbW9k
			ZVt0eXBlXVtpXV07DQogICAgICAgICAgICBpZiAodmFsKSB7IGZvdW5kLnB1c2godmFsKTsgfQ0K
			ICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmIChtb2RlLmhlbHBlclR5cGUgJiYgaGVscFtt
			b2RlLmhlbHBlclR5cGVdKSB7DQogICAgICAgICAgZm91bmQucHVzaChoZWxwW21vZGUuaGVscGVy
			VHlwZV0pOw0KICAgICAgICB9IGVsc2UgaWYgKGhlbHBbbW9kZS5uYW1lXSkgew0KICAgICAgICAg
			IGZvdW5kLnB1c2goaGVscFttb2RlLm5hbWVdKTsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKHZh
			ciBpJDEgPSAwOyBpJDEgPCBoZWxwLl9nbG9iYWwubGVuZ3RoOyBpJDErKykgew0KICAgICAgICAg
			IHZhciBjdXIgPSBoZWxwLl9nbG9iYWxbaSQxXTsNCiAgICAgICAgICBpZiAoY3VyLnByZWQobW9k
			ZSwgdGhpcyQxKSAmJiBpbmRleE9mKGZvdW5kLCBjdXIudmFsKSA9PSAtMSkNCiAgICAgICAgICAg
			IHsgZm91bmQucHVzaChjdXIudmFsKTsgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBmb3Vu
			ZA0KICAgICAgfSwNCg0KICAgICAgZ2V0U3RhdGVBZnRlcjogZnVuY3Rpb24obGluZSwgcHJlY2lz
			ZSkgew0KICAgICAgICB2YXIgZG9jID0gdGhpcy5kb2M7DQogICAgICAgIGxpbmUgPSBjbGlwTGlu
			ZShkb2MsIGxpbmUgPT0gbnVsbCA/IGRvYy5maXJzdCArIGRvYy5zaXplIC0gMTogbGluZSk7DQog
			ICAgICAgIHJldHVybiBnZXRDb250ZXh0QmVmb3JlKHRoaXMsIGxpbmUgKyAxLCBwcmVjaXNlKS5z
			dGF0ZQ0KICAgICAgfSwNCg0KICAgICAgY3Vyc29yQ29vcmRzOiBmdW5jdGlvbihzdGFydCwgbW9k
			ZSkgew0KICAgICAgICB2YXIgcG9zLCByYW5nZSQkMSA9IHRoaXMuZG9jLnNlbC5wcmltYXJ5KCk7
			DQogICAgICAgIGlmIChzdGFydCA9PSBudWxsKSB7IHBvcyA9IHJhbmdlJCQxLmhlYWQ7IH0NCiAg
			ICAgICAgZWxzZSBpZiAodHlwZW9mIHN0YXJ0ID09ICJvYmplY3QiKSB7IHBvcyA9IGNsaXBQb3Mo
			dGhpcy5kb2MsIHN0YXJ0KTsgfQ0KICAgICAgICBlbHNlIHsgcG9zID0gc3RhcnQgPyByYW5nZSQk
			MS5mcm9tKCkgOiByYW5nZSQkMS50bygpOyB9DQogICAgICAgIHJldHVybiBjdXJzb3JDb29yZHMo
			dGhpcywgcG9zLCBtb2RlIHx8ICJwYWdlIikNCiAgICAgIH0sDQoNCiAgICAgIGNoYXJDb29yZHM6
			IGZ1bmN0aW9uKHBvcywgbW9kZSkgew0KICAgICAgICByZXR1cm4gY2hhckNvb3Jkcyh0aGlzLCBj
			bGlwUG9zKHRoaXMuZG9jLCBwb3MpLCBtb2RlIHx8ICJwYWdlIikNCiAgICAgIH0sDQoNCiAgICAg
			IGNvb3Jkc0NoYXI6IGZ1bmN0aW9uKGNvb3JkcywgbW9kZSkgew0KICAgICAgICBjb29yZHMgPSBm
			cm9tQ29vcmRTeXN0ZW0odGhpcywgY29vcmRzLCBtb2RlIHx8ICJwYWdlIik7DQogICAgICAgIHJl
			dHVybiBjb29yZHNDaGFyKHRoaXMsIGNvb3Jkcy5sZWZ0LCBjb29yZHMudG9wKQ0KICAgICAgfSwN
			Cg0KICAgICAgbGluZUF0SGVpZ2h0OiBmdW5jdGlvbihoZWlnaHQsIG1vZGUpIHsNCiAgICAgICAg
			aGVpZ2h0ID0gZnJvbUNvb3JkU3lzdGVtKHRoaXMsIHt0b3A6IGhlaWdodCwgbGVmdDogMH0sIG1v
			ZGUgfHwgInBhZ2UiKS50b3A7DQogICAgICAgIHJldHVybiBsaW5lQXRIZWlnaHQodGhpcy5kb2Ms
			IGhlaWdodCArIHRoaXMuZGlzcGxheS52aWV3T2Zmc2V0KQ0KICAgICAgfSwNCiAgICAgIGhlaWdo
			dEF0TGluZTogZnVuY3Rpb24obGluZSwgbW9kZSwgaW5jbHVkZVdpZGdldHMpIHsNCiAgICAgICAg
			dmFyIGVuZCA9IGZhbHNlLCBsaW5lT2JqOw0KICAgICAgICBpZiAodHlwZW9mIGxpbmUgPT0gIm51
			bWJlciIpIHsNCiAgICAgICAgICB2YXIgbGFzdCA9IHRoaXMuZG9jLmZpcnN0ICsgdGhpcy5kb2Mu
			c2l6ZSAtIDE7DQogICAgICAgICAgaWYgKGxpbmUgPCB0aGlzLmRvYy5maXJzdCkgeyBsaW5lID0g
			dGhpcy5kb2MuZmlyc3Q7IH0NCiAgICAgICAgICBlbHNlIGlmIChsaW5lID4gbGFzdCkgeyBsaW5l
			ID0gbGFzdDsgZW5kID0gdHJ1ZTsgfQ0KICAgICAgICAgIGxpbmVPYmogPSBnZXRMaW5lKHRoaXMu
			ZG9jLCBsaW5lKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBsaW5lT2JqID0gbGluZTsN
			CiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gaW50b0Nvb3JkU3lzdGVtKHRoaXMsIGxpbmVPYmos
			IHt0b3A6IDAsIGxlZnQ6IDB9LCBtb2RlIHx8ICJwYWdlIiwgaW5jbHVkZVdpZGdldHMgfHwgZW5k
			KS50b3AgKw0KICAgICAgICAgIChlbmQgPyB0aGlzLmRvYy5oZWlnaHQgLSBoZWlnaHRBdExpbmUo
			bGluZU9iaikgOiAwKQ0KICAgICAgfSwNCg0KICAgICAgZGVmYXVsdFRleHRIZWlnaHQ6IGZ1bmN0
			aW9uKCkgeyByZXR1cm4gdGV4dEhlaWdodCh0aGlzLmRpc3BsYXkpIH0sDQogICAgICBkZWZhdWx0
			Q2hhcldpZHRoOiBmdW5jdGlvbigpIHsgcmV0dXJuIGNoYXJXaWR0aCh0aGlzLmRpc3BsYXkpIH0s
			DQoNCiAgICAgIGdldFZpZXdwb3J0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHtmcm9tOiB0aGlzLmRp
			c3BsYXkudmlld0Zyb20sIHRvOiB0aGlzLmRpc3BsYXkudmlld1RvfX0sDQoNCiAgICAgIGFkZFdp
			ZGdldDogZnVuY3Rpb24ocG9zLCBub2RlLCBzY3JvbGwsIHZlcnQsIGhvcml6KSB7DQogICAgICAg
			IHZhciBkaXNwbGF5ID0gdGhpcy5kaXNwbGF5Ow0KICAgICAgICBwb3MgPSBjdXJzb3JDb29yZHMo
			dGhpcywgY2xpcFBvcyh0aGlzLmRvYywgcG9zKSk7DQogICAgICAgIHZhciB0b3AgPSBwb3MuYm90
			dG9tLCBsZWZ0ID0gcG9zLmxlZnQ7DQogICAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAiYWJz
			b2x1dGUiOw0KICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgiY20taWdub3JlLWV2ZW50cyIsICJ0
			cnVlIik7DQogICAgICAgIHRoaXMuZGlzcGxheS5pbnB1dC5zZXRVbmVkaXRhYmxlKG5vZGUpOw0K
			ICAgICAgICBkaXNwbGF5LnNpemVyLmFwcGVuZENoaWxkKG5vZGUpOw0KICAgICAgICBpZiAodmVy
			dCA9PSAib3ZlciIpIHsNCiAgICAgICAgICB0b3AgPSBwb3MudG9wOw0KICAgICAgICB9IGVsc2Ug
			aWYgKHZlcnQgPT0gImFib3ZlIiB8fCB2ZXJ0ID09ICJuZWFyIikgew0KICAgICAgICAgIHZhciB2
			c3BhY2UgPSBNYXRoLm1heChkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0LCB0aGlzLmRvYy5o
			ZWlnaHQpLA0KICAgICAgICAgIGhzcGFjZSA9IE1hdGgubWF4KGRpc3BsYXkuc2l6ZXIuY2xpZW50
			V2lkdGgsIGRpc3BsYXkubGluZVNwYWNlLmNsaWVudFdpZHRoKTsNCiAgICAgICAgICAvLyBEZWZh
			dWx0IHRvIHBvc2l0aW9uaW5nIGFib3ZlIChpZiBzcGVjaWZpZWQgYW5kIHBvc3NpYmxlKTsgb3Ro
			ZXJ3aXNlIGRlZmF1bHQgdG8gcG9zaXRpb25pbmcgYmVsb3cNCiAgICAgICAgICBpZiAoKHZlcnQg
			PT0gJ2Fib3ZlJyB8fCBwb3MuYm90dG9tICsgbm9kZS5vZmZzZXRIZWlnaHQgPiB2c3BhY2UpICYm
			IHBvcy50b3AgPiBub2RlLm9mZnNldEhlaWdodCkNCiAgICAgICAgICAgIHsgdG9wID0gcG9zLnRv
			cCAtIG5vZGUub2Zmc2V0SGVpZ2h0OyB9DQogICAgICAgICAgZWxzZSBpZiAocG9zLmJvdHRvbSAr
			IG5vZGUub2Zmc2V0SGVpZ2h0IDw9IHZzcGFjZSkNCiAgICAgICAgICAgIHsgdG9wID0gcG9zLmJv
			dHRvbTsgfQ0KICAgICAgICAgIGlmIChsZWZ0ICsgbm9kZS5vZmZzZXRXaWR0aCA+IGhzcGFjZSkN
			CiAgICAgICAgICAgIHsgbGVmdCA9IGhzcGFjZSAtIG5vZGUub2Zmc2V0V2lkdGg7IH0NCiAgICAg
			ICAgfQ0KICAgICAgICBub2RlLnN0eWxlLnRvcCA9IHRvcCArICJweCI7DQogICAgICAgIG5vZGUu
			c3R5bGUubGVmdCA9IG5vZGUuc3R5bGUucmlnaHQgPSAiIjsNCiAgICAgICAgaWYgKGhvcml6ID09
			ICJyaWdodCIpIHsNCiAgICAgICAgICBsZWZ0ID0gZGlzcGxheS5zaXplci5jbGllbnRXaWR0aCAt
			IG5vZGUub2Zmc2V0V2lkdGg7DQogICAgICAgICAgbm9kZS5zdHlsZS5yaWdodCA9ICIwcHgiOw0K
			ICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChob3JpeiA9PSAibGVmdCIpIHsgbGVmdCA9
			IDA7IH0NCiAgICAgICAgICBlbHNlIGlmIChob3JpeiA9PSAibWlkZGxlIikgeyBsZWZ0ID0gKGRp
			c3BsYXkuc2l6ZXIuY2xpZW50V2lkdGggLSBub2RlLm9mZnNldFdpZHRoKSAvIDI7IH0NCiAgICAg
			ICAgICBub2RlLnN0eWxlLmxlZnQgPSBsZWZ0ICsgInB4IjsNCiAgICAgICAgfQ0KICAgICAgICBp
			ZiAoc2Nyb2xsKQ0KICAgICAgICAgIHsgc2Nyb2xsSW50b1ZpZXcodGhpcywge2xlZnQ6IGxlZnQs
			IHRvcDogdG9wLCByaWdodDogbGVmdCArIG5vZGUub2Zmc2V0V2lkdGgsIGJvdHRvbTogdG9wICsg
			bm9kZS5vZmZzZXRIZWlnaHR9KTsgfQ0KICAgICAgfSwNCg0KICAgICAgdHJpZ2dlck9uS2V5RG93
			bjogbWV0aG9kT3Aob25LZXlEb3duKSwNCiAgICAgIHRyaWdnZXJPbktleVByZXNzOiBtZXRob2RP
			cChvbktleVByZXNzKSwNCiAgICAgIHRyaWdnZXJPbktleVVwOiBvbktleVVwLA0KICAgICAgdHJp
			Z2dlck9uTW91c2VEb3duOiBtZXRob2RPcChvbk1vdXNlRG93biksDQoNCiAgICAgIGV4ZWNDb21t
			YW5kOiBmdW5jdGlvbihjbWQpIHsNCiAgICAgICAgaWYgKGNvbW1hbmRzLmhhc093blByb3BlcnR5
			KGNtZCkpDQogICAgICAgICAgeyByZXR1cm4gY29tbWFuZHNbY21kXS5jYWxsKG51bGwsIHRoaXMp
			IH0NCiAgICAgIH0sDQoNCiAgICAgIHRyaWdnZXJFbGVjdHJpYzogbWV0aG9kT3AoZnVuY3Rpb24o
			dGV4dCkgeyB0cmlnZ2VyRWxlY3RyaWModGhpcywgdGV4dCk7IH0pLA0KDQogICAgICBmaW5kUG9z
			SDogZnVuY3Rpb24oZnJvbSwgYW1vdW50LCB1bml0LCB2aXN1YWxseSkgew0KICAgICAgICB2YXIg
			dGhpcyQxID0gdGhpczsNCg0KICAgICAgICB2YXIgZGlyID0gMTsNCiAgICAgICAgaWYgKGFtb3Vu
			dCA8IDApIHsgZGlyID0gLTE7IGFtb3VudCA9IC1hbW91bnQ7IH0NCiAgICAgICAgdmFyIGN1ciA9
			IGNsaXBQb3ModGhpcy5kb2MsIGZyb20pOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFt
			b3VudDsgKytpKSB7DQogICAgICAgICAgY3VyID0gZmluZFBvc0godGhpcyQxLmRvYywgY3VyLCBk
			aXIsIHVuaXQsIHZpc3VhbGx5KTsNCiAgICAgICAgICBpZiAoY3VyLmhpdFNpZGUpIHsgYnJlYWsg
			fQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBjdXINCiAgICAgIH0sDQoNCiAgICAgIG1vdmVI
			OiBtZXRob2RPcChmdW5jdGlvbihkaXIsIHVuaXQpIHsNCiAgICAgICAgdmFyIHRoaXMkMSA9IHRo
			aXM7DQoNCiAgICAgICAgdGhpcy5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24gKHJhbmdlJCQx
			KSB7DQogICAgICAgICAgaWYgKHRoaXMkMS5kaXNwbGF5LnNoaWZ0IHx8IHRoaXMkMS5kb2MuZXh0
			ZW5kIHx8IHJhbmdlJCQxLmVtcHR5KCkpDQogICAgICAgICAgICB7IHJldHVybiBmaW5kUG9zSCh0
			aGlzJDEuZG9jLCByYW5nZSQkMS5oZWFkLCBkaXIsIHVuaXQsIHRoaXMkMS5vcHRpb25zLnJ0bE1v
			dmVWaXN1YWxseSkgfQ0KICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsgcmV0dXJuIGRpciA8
			IDAgPyByYW5nZSQkMS5mcm9tKCkgOiByYW5nZSQkMS50bygpIH0NCiAgICAgICAgfSwgc2VsX21v
			dmUpOw0KICAgICAgfSksDQoNCiAgICAgIGRlbGV0ZUg6IG1ldGhvZE9wKGZ1bmN0aW9uKGRpciwg
			dW5pdCkgew0KICAgICAgICB2YXIgc2VsID0gdGhpcy5kb2Muc2VsLCBkb2MgPSB0aGlzLmRvYzsN
			CiAgICAgICAgaWYgKHNlbC5zb21ldGhpbmdTZWxlY3RlZCgpKQ0KICAgICAgICAgIHsgZG9jLnJl
			cGxhY2VTZWxlY3Rpb24oIiIsIG51bGwsICIrZGVsZXRlIik7IH0NCiAgICAgICAgZWxzZQ0KICAg
			ICAgICAgIHsgZGVsZXRlTmVhclNlbGVjdGlvbih0aGlzLCBmdW5jdGlvbiAocmFuZ2UkJDEpIHsN
			CiAgICAgICAgICAgIHZhciBvdGhlciA9IGZpbmRQb3NIKGRvYywgcmFuZ2UkJDEuaGVhZCwgZGly
			LCB1bml0LCBmYWxzZSk7DQogICAgICAgICAgICByZXR1cm4gZGlyIDwgMCA/IHtmcm9tOiBvdGhl
			ciwgdG86IHJhbmdlJCQxLmhlYWR9IDoge2Zyb206IHJhbmdlJCQxLmhlYWQsIHRvOiBvdGhlcn0N
			CiAgICAgICAgICB9KTsgfQ0KICAgICAgfSksDQoNCiAgICAgIGZpbmRQb3NWOiBmdW5jdGlvbihm
			cm9tLCBhbW91bnQsIHVuaXQsIGdvYWxDb2x1bW4pIHsNCiAgICAgICAgdmFyIHRoaXMkMSA9IHRo
			aXM7DQoNCiAgICAgICAgdmFyIGRpciA9IDEsIHggPSBnb2FsQ29sdW1uOw0KICAgICAgICBpZiAo
			YW1vdW50IDwgMCkgeyBkaXIgPSAtMTsgYW1vdW50ID0gLWFtb3VudDsgfQ0KICAgICAgICB2YXIg
			Y3VyID0gY2xpcFBvcyh0aGlzLmRvYywgZnJvbSk7DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBp
			IDwgYW1vdW50OyArK2kpIHsNCiAgICAgICAgICB2YXIgY29vcmRzID0gY3Vyc29yQ29vcmRzKHRo
			aXMkMSwgY3VyLCAiZGl2Iik7DQogICAgICAgICAgaWYgKHggPT0gbnVsbCkgeyB4ID0gY29vcmRz
			LmxlZnQ7IH0NCiAgICAgICAgICBlbHNlIHsgY29vcmRzLmxlZnQgPSB4OyB9DQogICAgICAgICAg
			Y3VyID0gZmluZFBvc1YodGhpcyQxLCBjb29yZHMsIGRpciwgdW5pdCk7DQogICAgICAgICAgaWYg
			KGN1ci5oaXRTaWRlKSB7IGJyZWFrIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gY3VyDQog
			ICAgICB9LA0KDQogICAgICBtb3ZlVjogbWV0aG9kT3AoZnVuY3Rpb24oZGlyLCB1bml0KSB7DQog
			ICAgICAgIHZhciB0aGlzJDEgPSB0aGlzOw0KDQogICAgICAgIHZhciBkb2MgPSB0aGlzLmRvYywg
			Z29hbHMgPSBbXTsNCiAgICAgICAgdmFyIGNvbGxhcHNlID0gIXRoaXMuZGlzcGxheS5zaGlmdCAm
			JiAhZG9jLmV4dGVuZCAmJiBkb2Muc2VsLnNvbWV0aGluZ1NlbGVjdGVkKCk7DQogICAgICAgIGRv
			Yy5leHRlbmRTZWxlY3Rpb25zQnkoZnVuY3Rpb24gKHJhbmdlJCQxKSB7DQogICAgICAgICAgaWYg
			KGNvbGxhcHNlKQ0KICAgICAgICAgICAgeyByZXR1cm4gZGlyIDwgMCA/IHJhbmdlJCQxLmZyb20o
			KSA6IHJhbmdlJCQxLnRvKCkgfQ0KICAgICAgICAgIHZhciBoZWFkUG9zID0gY3Vyc29yQ29vcmRz
			KHRoaXMkMSwgcmFuZ2UkJDEuaGVhZCwgImRpdiIpOw0KICAgICAgICAgIGlmIChyYW5nZSQkMS5n
			b2FsQ29sdW1uICE9IG51bGwpIHsgaGVhZFBvcy5sZWZ0ID0gcmFuZ2UkJDEuZ29hbENvbHVtbjsg
			fQ0KICAgICAgICAgIGdvYWxzLnB1c2goaGVhZFBvcy5sZWZ0KTsNCiAgICAgICAgICB2YXIgcG9z
			ID0gZmluZFBvc1YodGhpcyQxLCBoZWFkUG9zLCBkaXIsIHVuaXQpOw0KICAgICAgICAgIGlmICh1
			bml0ID09ICJwYWdlIiAmJiByYW5nZSQkMSA9PSBkb2Muc2VsLnByaW1hcnkoKSkNCiAgICAgICAg
			ICAgIHsgYWRkVG9TY3JvbGxUb3AodGhpcyQxLCBjaGFyQ29vcmRzKHRoaXMkMSwgcG9zLCAiZGl2
			IikudG9wIC0gaGVhZFBvcy50b3ApOyB9DQogICAgICAgICAgcmV0dXJuIHBvcw0KICAgICAgICB9
			LCBzZWxfbW92ZSk7DQogICAgICAgIGlmIChnb2Fscy5sZW5ndGgpIHsgZm9yICh2YXIgaSA9IDA7
			IGkgPCBkb2Muc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykNCiAgICAgICAgICB7IGRvYy5zZWwucmFu
			Z2VzW2ldLmdvYWxDb2x1bW4gPSBnb2Fsc1tpXTsgfSB9DQogICAgICB9KSwNCg0KICAgICAgLy8g
			RmluZCB0aGUgd29yZCBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24gKGFzIHJldHVybmVkIGJ5IGNvb3Jk
			c0NoYXIpLg0KICAgICAgZmluZFdvcmRBdDogZnVuY3Rpb24ocG9zKSB7DQogICAgICAgIHZhciBk
			b2MgPSB0aGlzLmRvYywgbGluZSA9IGdldExpbmUoZG9jLCBwb3MubGluZSkudGV4dDsNCiAgICAg
			ICAgdmFyIHN0YXJ0ID0gcG9zLmNoLCBlbmQgPSBwb3MuY2g7DQogICAgICAgIGlmIChsaW5lKSB7
			DQogICAgICAgICAgdmFyIGhlbHBlciA9IHRoaXMuZ2V0SGVscGVyKHBvcywgIndvcmRDaGFycyIp
			Ow0KICAgICAgICAgIGlmICgocG9zLnN0aWNreSA9PSAiYmVmb3JlIiB8fCBlbmQgPT0gbGluZS5s
			ZW5ndGgpICYmIHN0YXJ0KSB7IC0tc3RhcnQ7IH0gZWxzZSB7ICsrZW5kOyB9DQogICAgICAgICAg
			dmFyIHN0YXJ0Q2hhciA9IGxpbmUuY2hhckF0KHN0YXJ0KTsNCiAgICAgICAgICB2YXIgY2hlY2sg
			PSBpc1dvcmRDaGFyKHN0YXJ0Q2hhciwgaGVscGVyKQ0KICAgICAgICAgICAgPyBmdW5jdGlvbiAo
			Y2gpIHsgcmV0dXJuIGlzV29yZENoYXIoY2gsIGhlbHBlcik7IH0NCiAgICAgICAgICAgIDogL1xz
			Ly50ZXN0KHN0YXJ0Q2hhcikgPyBmdW5jdGlvbiAoY2gpIHsgcmV0dXJuIC9ccy8udGVzdChjaCk7
			IH0NCiAgICAgICAgICAgIDogZnVuY3Rpb24gKGNoKSB7IHJldHVybiAoIS9ccy8udGVzdChjaCkg
			JiYgIWlzV29yZENoYXIoY2gpKTsgfTsNCiAgICAgICAgICB3aGlsZSAoc3RhcnQgPiAwICYmIGNo
			ZWNrKGxpbmUuY2hhckF0KHN0YXJ0IC0gMSkpKSB7IC0tc3RhcnQ7IH0NCiAgICAgICAgICB3aGls
			ZSAoZW5kIDwgbGluZS5sZW5ndGggJiYgY2hlY2sobGluZS5jaGFyQXQoZW5kKSkpIHsgKytlbmQ7
			IH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbmV3IFJhbmdlKFBvcyhwb3MubGluZSwgc3Rh
			cnQpLCBQb3MocG9zLmxpbmUsIGVuZCkpDQogICAgICB9LA0KDQogICAgICB0b2dnbGVPdmVyd3Jp
			dGU6IGZ1bmN0aW9uKHZhbHVlKSB7DQogICAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmIHZhbHVl
			ID09IHRoaXMuc3RhdGUub3ZlcndyaXRlKSB7IHJldHVybiB9DQogICAgICAgIGlmICh0aGlzLnN0
			YXRlLm92ZXJ3cml0ZSA9ICF0aGlzLnN0YXRlLm92ZXJ3cml0ZSkNCiAgICAgICAgICB7IGFkZENs
			YXNzKHRoaXMuZGlzcGxheS5jdXJzb3JEaXYsICJDb2RlTWlycm9yLW92ZXJ3cml0ZSIpOyB9DQog
			ICAgICAgIGVsc2UNCiAgICAgICAgICB7IHJtQ2xhc3ModGhpcy5kaXNwbGF5LmN1cnNvckRpdiwg
			IkNvZGVNaXJyb3Itb3ZlcndyaXRlIik7IH0NCg0KICAgICAgICBzaWduYWwodGhpcywgIm92ZXJ3
			cml0ZVRvZ2dsZSIsIHRoaXMsIHRoaXMuc3RhdGUub3ZlcndyaXRlKTsNCiAgICAgIH0sDQogICAg
			ICBoYXNGb2N1czogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmRpc3BsYXkuaW5wdXQuZ2V0Rmll
			bGQoKSA9PSBhY3RpdmVFbHQoKSB9LA0KICAgICAgaXNSZWFkT25seTogZnVuY3Rpb24oKSB7IHJl
			dHVybiAhISh0aGlzLm9wdGlvbnMucmVhZE9ubHkgfHwgdGhpcy5kb2MuY2FudEVkaXQpIH0sDQoN
			CiAgICAgIHNjcm9sbFRvOiBtZXRob2RPcChmdW5jdGlvbiAoeCwgeSkgeyBzY3JvbGxUb0Nvb3Jk
			cyh0aGlzLCB4LCB5KTsgfSksDQogICAgICBnZXRTY3JvbGxJbmZvOiBmdW5jdGlvbigpIHsNCiAg
			ICAgICAgdmFyIHNjcm9sbGVyID0gdGhpcy5kaXNwbGF5LnNjcm9sbGVyOw0KICAgICAgICByZXR1
			cm4ge2xlZnQ6IHNjcm9sbGVyLnNjcm9sbExlZnQsIHRvcDogc2Nyb2xsZXIuc2Nyb2xsVG9wLA0K
			ICAgICAgICAgICAgICAgIGhlaWdodDogc2Nyb2xsZXIuc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsR2Fw
			KHRoaXMpIC0gdGhpcy5kaXNwbGF5LmJhckhlaWdodCwNCiAgICAgICAgICAgICAgICB3aWR0aDog
			c2Nyb2xsZXIuc2Nyb2xsV2lkdGggLSBzY3JvbGxHYXAodGhpcykgLSB0aGlzLmRpc3BsYXkuYmFy
			V2lkdGgsDQogICAgICAgICAgICAgICAgY2xpZW50SGVpZ2h0OiBkaXNwbGF5SGVpZ2h0KHRoaXMp
			LCBjbGllbnRXaWR0aDogZGlzcGxheVdpZHRoKHRoaXMpfQ0KICAgICAgfSwNCg0KICAgICAgc2Ny
			b2xsSW50b1ZpZXc6IG1ldGhvZE9wKGZ1bmN0aW9uKHJhbmdlJCQxLCBtYXJnaW4pIHsNCiAgICAg
			ICAgaWYgKHJhbmdlJCQxID09IG51bGwpIHsNCiAgICAgICAgICByYW5nZSQkMSA9IHtmcm9tOiB0
			aGlzLmRvYy5zZWwucHJpbWFyeSgpLmhlYWQsIHRvOiBudWxsfTsNCiAgICAgICAgICBpZiAobWFy
			Z2luID09IG51bGwpIHsgbWFyZ2luID0gdGhpcy5vcHRpb25zLmN1cnNvclNjcm9sbE1hcmdpbjsg
			fQ0KICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByYW5nZSQkMSA9PSAibnVtYmVyIikgew0KICAg
			ICAgICAgIHJhbmdlJCQxID0ge2Zyb206IFBvcyhyYW5nZSQkMSwgMCksIHRvOiBudWxsfTsNCiAg
			ICAgICAgfSBlbHNlIGlmIChyYW5nZSQkMS5mcm9tID09IG51bGwpIHsNCiAgICAgICAgICByYW5n
			ZSQkMSA9IHtmcm9tOiByYW5nZSQkMSwgdG86IG51bGx9Ow0KICAgICAgICB9DQogICAgICAgIGlm
			ICghcmFuZ2UkJDEudG8pIHsgcmFuZ2UkJDEudG8gPSByYW5nZSQkMS5mcm9tOyB9DQogICAgICAg
			IHJhbmdlJCQxLm1hcmdpbiA9IG1hcmdpbiB8fCAwOw0KDQogICAgICAgIGlmIChyYW5nZSQkMS5m
			cm9tLmxpbmUgIT0gbnVsbCkgew0KICAgICAgICAgIHNjcm9sbFRvUmFuZ2UodGhpcywgcmFuZ2Uk
			JDEpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHNjcm9sbFRvQ29vcmRzUmFuZ2UodGhp
			cywgcmFuZ2UkJDEuZnJvbSwgcmFuZ2UkJDEudG8sIHJhbmdlJCQxLm1hcmdpbik7DQogICAgICAg
			IH0NCiAgICAgIH0pLA0KDQogICAgICBzZXRTaXplOiBtZXRob2RPcChmdW5jdGlvbih3aWR0aCwg
			aGVpZ2h0KSB7DQogICAgICAgIHZhciB0aGlzJDEgPSB0aGlzOw0KDQogICAgICAgIHZhciBpbnRl
			cnByZXQgPSBmdW5jdGlvbiAodmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09ICJudW1iZXIiIHx8
			IC9eXGQrJC8udGVzdChTdHJpbmcodmFsKSkgPyB2YWwgKyAicHgiIDogdmFsOyB9Ow0KICAgICAg
			ICBpZiAod2lkdGggIT0gbnVsbCkgeyB0aGlzLmRpc3BsYXkud3JhcHBlci5zdHlsZS53aWR0aCA9
			IGludGVycHJldCh3aWR0aCk7IH0NCiAgICAgICAgaWYgKGhlaWdodCAhPSBudWxsKSB7IHRoaXMu
			ZGlzcGxheS53cmFwcGVyLnN0eWxlLmhlaWdodCA9IGludGVycHJldChoZWlnaHQpOyB9DQogICAg
			ICAgIGlmICh0aGlzLm9wdGlvbnMubGluZVdyYXBwaW5nKSB7IGNsZWFyTGluZU1lYXN1cmVtZW50
			Q2FjaGUodGhpcyk7IH0NCiAgICAgICAgdmFyIGxpbmVObyQkMSA9IHRoaXMuZGlzcGxheS52aWV3
			RnJvbTsNCiAgICAgICAgdGhpcy5kb2MuaXRlcihsaW5lTm8kJDEsIHRoaXMuZGlzcGxheS52aWV3
			VG8sIGZ1bmN0aW9uIChsaW5lKSB7DQogICAgICAgICAgaWYgKGxpbmUud2lkZ2V0cykgeyBmb3Ig
			KHZhciBpID0gMDsgaSA8IGxpbmUud2lkZ2V0cy5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgIHsg
			aWYgKGxpbmUud2lkZ2V0c1tpXS5ub0hTY3JvbGwpIHsgcmVnTGluZUNoYW5nZSh0aGlzJDEsIGxp
			bmVObyQkMSwgIndpZGdldCIpOyBicmVhayB9IH0gfQ0KICAgICAgICAgICsrbGluZU5vJCQxOw0K
			ICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5jdXJPcC5mb3JjZVVwZGF0ZSA9IHRydWU7DQogICAg
			ICAgIHNpZ25hbCh0aGlzLCAicmVmcmVzaCIsIHRoaXMpOw0KICAgICAgfSksDQoNCiAgICAgIG9w
			ZXJhdGlvbjogZnVuY3Rpb24oZil7cmV0dXJuIHJ1bkluT3AodGhpcywgZil9LA0KICAgICAgc3Rh
			cnRPcGVyYXRpb246IGZ1bmN0aW9uKCl7cmV0dXJuIHN0YXJ0T3BlcmF0aW9uKHRoaXMpfSwNCiAg
			ICAgIGVuZE9wZXJhdGlvbjogZnVuY3Rpb24oKXtyZXR1cm4gZW5kT3BlcmF0aW9uKHRoaXMpfSwN
			Cg0KICAgICAgcmVmcmVzaDogbWV0aG9kT3AoZnVuY3Rpb24oKSB7DQogICAgICAgIHZhciBvbGRI
			ZWlnaHQgPSB0aGlzLmRpc3BsYXkuY2FjaGVkVGV4dEhlaWdodDsNCiAgICAgICAgcmVnQ2hhbmdl
			KHRoaXMpOw0KICAgICAgICB0aGlzLmN1ck9wLmZvcmNlVXBkYXRlID0gdHJ1ZTsNCiAgICAgICAg
			Y2xlYXJDYWNoZXModGhpcyk7DQogICAgICAgIHNjcm9sbFRvQ29vcmRzKHRoaXMsIHRoaXMuZG9j
			LnNjcm9sbExlZnQsIHRoaXMuZG9jLnNjcm9sbFRvcCk7DQogICAgICAgIHVwZGF0ZUd1dHRlclNw
			YWNlKHRoaXMuZGlzcGxheSk7DQogICAgICAgIGlmIChvbGRIZWlnaHQgPT0gbnVsbCB8fCBNYXRo
			LmFicyhvbGRIZWlnaHQgLSB0ZXh0SGVpZ2h0KHRoaXMuZGlzcGxheSkpID4gLjUgfHwgdGhpcy5v
			cHRpb25zLmxpbmVXcmFwcGluZykNCiAgICAgICAgICB7IGVzdGltYXRlTGluZUhlaWdodHModGhp
			cyk7IH0NCiAgICAgICAgc2lnbmFsKHRoaXMsICJyZWZyZXNoIiwgdGhpcyk7DQogICAgICB9KSwN
			Cg0KICAgICAgc3dhcERvYzogbWV0aG9kT3AoZnVuY3Rpb24oZG9jKSB7DQogICAgICAgIHZhciBv
			bGQgPSB0aGlzLmRvYzsNCiAgICAgICAgb2xkLmNtID0gbnVsbDsNCiAgICAgICAgLy8gQ2FuY2Vs
			IHRoZSBjdXJyZW50IHRleHQgc2VsZWN0aW9uIGlmIGFueSAoIzU4MjEpDQogICAgICAgIGlmICh0
			aGlzLnN0YXRlLnNlbGVjdGluZ1RleHQpIHsgdGhpcy5zdGF0ZS5zZWxlY3RpbmdUZXh0KCk7IH0N
			CiAgICAgICAgYXR0YWNoRG9jKHRoaXMsIGRvYyk7DQogICAgICAgIGNsZWFyQ2FjaGVzKHRoaXMp
			Ow0KICAgICAgICB0aGlzLmRpc3BsYXkuaW5wdXQucmVzZXQoKTsNCiAgICAgICAgc2Nyb2xsVG9D
			b29yZHModGhpcywgZG9jLnNjcm9sbExlZnQsIGRvYy5zY3JvbGxUb3ApOw0KICAgICAgICB0aGlz
			LmN1ck9wLmZvcmNlU2Nyb2xsID0gdHJ1ZTsNCiAgICAgICAgc2lnbmFsTGF0ZXIodGhpcywgInN3
			YXBEb2MiLCB0aGlzLCBvbGQpOw0KICAgICAgICByZXR1cm4gb2xkDQogICAgICB9KSwNCg0KICAg
			ICAgcGhyYXNlOiBmdW5jdGlvbihwaHJhc2VUZXh0KSB7DQogICAgICAgIHZhciBwaHJhc2VzID0g
			dGhpcy5vcHRpb25zLnBocmFzZXM7DQogICAgICAgIHJldHVybiBwaHJhc2VzICYmIE9iamVjdC5w
			cm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwaHJhc2VzLCBwaHJhc2VUZXh0KSA/IHBocmFz
			ZXNbcGhyYXNlVGV4dF0gOiBwaHJhc2VUZXh0DQogICAgICB9LA0KDQogICAgICBnZXRJbnB1dEZp
			ZWxkOiBmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc3BsYXkuaW5wdXQuZ2V0RmllbGQoKX0sDQog
			ICAgICBnZXRXcmFwcGVyRWxlbWVudDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNwbGF5Lndy
			YXBwZXJ9LA0KICAgICAgZ2V0U2Nyb2xsZXJFbGVtZW50OiBmdW5jdGlvbigpe3JldHVybiB0aGlz
			LmRpc3BsYXkuc2Nyb2xsZXJ9LA0KICAgICAgZ2V0R3V0dGVyRWxlbWVudDogZnVuY3Rpb24oKXty
			ZXR1cm4gdGhpcy5kaXNwbGF5Lmd1dHRlcnN9DQogICAgfTsNCiAgICBldmVudE1peGluKENvZGVN
			aXJyb3IpOw0KDQogICAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlciA9IGZ1bmN0aW9uKHR5cGUs
			IG5hbWUsIHZhbHVlKSB7DQogICAgICBpZiAoIWhlbHBlcnMuaGFzT3duUHJvcGVydHkodHlwZSkp
			IHsgaGVscGVyc1t0eXBlXSA9IENvZGVNaXJyb3JbdHlwZV0gPSB7X2dsb2JhbDogW119OyB9DQog
			ICAgICBoZWxwZXJzW3R5cGVdW25hbWVdID0gdmFsdWU7DQogICAgfTsNCiAgICBDb2RlTWlycm9y
			LnJlZ2lzdGVyR2xvYmFsSGVscGVyID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgcHJlZGljYXRlLCB2
			YWx1ZSkgew0KICAgICAgQ29kZU1pcnJvci5yZWdpc3RlckhlbHBlcih0eXBlLCBuYW1lLCB2YWx1
			ZSk7DQogICAgICBoZWxwZXJzW3R5cGVdLl9nbG9iYWwucHVzaCh7cHJlZDogcHJlZGljYXRlLCB2
			YWw6IHZhbHVlfSk7DQogICAgfTsNCiAgfQ0KDQogIC8vIFVzZWQgZm9yIGhvcml6b250YWwgcmVs
			YXRpdmUgbW90aW9uLiBEaXIgaXMgLTEgb3IgMSAobGVmdCBvcg0KICAvLyByaWdodCksIHVuaXQg
			Y2FuIGJlICJjaGFyIiwgImNvbHVtbiIgKGxpa2UgY2hhciwgYnV0IGRvZXNuJ3QNCiAgLy8gY3Jv
			c3MgbGluZSBib3VuZGFyaWVzKSwgIndvcmQiIChhY3Jvc3MgbmV4dCB3b3JkKSwgb3IgImdyb3Vw
			IiAodG8NCiAgLy8gdGhlIHN0YXJ0IG9mIG5leHQgZ3JvdXAgb2Ygd29yZCBvciBub24td29yZC1u
			b24td2hpdGVzcGFjZQ0KICAvLyBjaGFycykuIFRoZSB2aXN1YWxseSBwYXJhbSBjb250cm9scyB3
			aGV0aGVyLCBpbiByaWdodC10by1sZWZ0DQogIC8vIHRleHQsIGRpcmVjdGlvbiAxIG1lYW5zIHRv
			IG1vdmUgdG93YXJkcyB0aGUgbmV4dCBpbmRleCBpbiB0aGUNCiAgLy8gc3RyaW5nLCBvciB0b3dh
			cmRzIHRoZSBjaGFyYWN0ZXIgdG8gdGhlIHJpZ2h0IG9mIHRoZSBjdXJyZW50DQogIC8vIHBvc2l0
			aW9uLiBUaGUgcmVzdWx0aW5nIHBvc2l0aW9uIHdpbGwgaGF2ZSBhIGhpdFNpZGU9dHJ1ZQ0KICAv
			LyBwcm9wZXJ0eSBpZiBpdCByZWFjaGVkIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50Lg0KICBmdW5j
			dGlvbiBmaW5kUG9zSChkb2MsIHBvcywgZGlyLCB1bml0LCB2aXN1YWxseSkgew0KICAgIHZhciBv
			bGRQb3MgPSBwb3M7DQogICAgdmFyIG9yaWdEaXIgPSBkaXI7DQogICAgdmFyIGxpbmVPYmogPSBn
			ZXRMaW5lKGRvYywgcG9zLmxpbmUpOw0KICAgIHZhciBsaW5lRGlyID0gdmlzdWFsbHkgJiYgZG9j
			LmRpcmVjdGlvbiA9PSAicnRsIiA/IC1kaXIgOiBkaXI7DQogICAgZnVuY3Rpb24gZmluZE5leHRM
			aW5lKCkgew0KICAgICAgdmFyIGwgPSBwb3MubGluZSArIGxpbmVEaXI7DQogICAgICBpZiAobCA8
			IGRvYy5maXJzdCB8fCBsID49IGRvYy5maXJzdCArIGRvYy5zaXplKSB7IHJldHVybiBmYWxzZSB9
			DQogICAgICBwb3MgPSBuZXcgUG9zKGwsIHBvcy5jaCwgcG9zLnN0aWNreSk7DQogICAgICByZXR1
			cm4gbGluZU9iaiA9IGdldExpbmUoZG9jLCBsKQ0KICAgIH0NCiAgICBmdW5jdGlvbiBtb3ZlT25j
			ZShib3VuZFRvTGluZSkgew0KICAgICAgdmFyIG5leHQ7DQogICAgICBpZiAodmlzdWFsbHkpIHsN
			CiAgICAgICAgbmV4dCA9IG1vdmVWaXN1YWxseShkb2MuY20sIGxpbmVPYmosIHBvcywgZGlyKTsN
			CiAgICAgIH0gZWxzZSB7DQogICAgICAgIG5leHQgPSBtb3ZlTG9naWNhbGx5KGxpbmVPYmosIHBv
			cywgZGlyKTsNCiAgICAgIH0NCiAgICAgIGlmIChuZXh0ID09IG51bGwpIHsNCiAgICAgICAgaWYg
			KCFib3VuZFRvTGluZSAmJiBmaW5kTmV4dExpbmUoKSkNCiAgICAgICAgICB7IHBvcyA9IGVuZE9m
			TGluZSh2aXN1YWxseSwgZG9jLmNtLCBsaW5lT2JqLCBwb3MubGluZSwgbGluZURpcik7IH0NCiAg
			ICAgICAgZWxzZQ0KICAgICAgICAgIHsgcmV0dXJuIGZhbHNlIH0NCiAgICAgIH0gZWxzZSB7DQog
			ICAgICAgIHBvcyA9IG5leHQ7DQogICAgICB9DQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIH0NCg0K
			ICAgIGlmICh1bml0ID09ICJjaGFyIikgew0KICAgICAgbW92ZU9uY2UoKTsNCiAgICB9IGVsc2Ug
			aWYgKHVuaXQgPT0gImNvbHVtbiIpIHsNCiAgICAgIG1vdmVPbmNlKHRydWUpOw0KICAgIH0gZWxz
			ZSBpZiAodW5pdCA9PSAid29yZCIgfHwgdW5pdCA9PSAiZ3JvdXAiKSB7DQogICAgICB2YXIgc2F3
			VHlwZSA9IG51bGwsIGdyb3VwID0gdW5pdCA9PSAiZ3JvdXAiOw0KICAgICAgdmFyIGhlbHBlciA9
			IGRvYy5jbSAmJiBkb2MuY20uZ2V0SGVscGVyKHBvcywgIndvcmRDaGFycyIpOw0KICAgICAgZm9y
			ICh2YXIgZmlyc3QgPSB0cnVlOzsgZmlyc3QgPSBmYWxzZSkgew0KICAgICAgICBpZiAoZGlyIDwg
			MCAmJiAhbW92ZU9uY2UoIWZpcnN0KSkgeyBicmVhayB9DQogICAgICAgIHZhciBjdXIgPSBsaW5l
			T2JqLnRleHQuY2hhckF0KHBvcy5jaCkgfHwgIlxuIjsNCiAgICAgICAgdmFyIHR5cGUgPSBpc1dv
			cmRDaGFyKGN1ciwgaGVscGVyKSA/ICJ3Ig0KICAgICAgICAgIDogZ3JvdXAgJiYgY3VyID09ICJc
			biIgPyAibiINCiAgICAgICAgICA6ICFncm91cCB8fCAvXHMvLnRlc3QoY3VyKSA/IG51bGwNCiAg
			ICAgICAgICA6ICJwIjsNCiAgICAgICAgaWYgKGdyb3VwICYmICFmaXJzdCAmJiAhdHlwZSkgeyB0
			eXBlID0gInMiOyB9DQogICAgICAgIGlmIChzYXdUeXBlICYmIHNhd1R5cGUgIT0gdHlwZSkgew0K
			ICAgICAgICAgIGlmIChkaXIgPCAwKSB7ZGlyID0gMTsgbW92ZU9uY2UoKTsgcG9zLnN0aWNreSA9
			ICJhZnRlciI7fQ0KICAgICAgICAgIGJyZWFrDQogICAgICAgIH0NCg0KICAgICAgICBpZiAodHlw
			ZSkgeyBzYXdUeXBlID0gdHlwZTsgfQ0KICAgICAgICBpZiAoZGlyID4gMCAmJiAhbW92ZU9uY2Uo
			IWZpcnN0KSkgeyBicmVhayB9DQogICAgICB9DQogICAgfQ0KICAgIHZhciByZXN1bHQgPSBza2lw
			QXRvbWljKGRvYywgcG9zLCBvbGRQb3MsIG9yaWdEaXIsIHRydWUpOw0KICAgIGlmIChlcXVhbEN1
			cnNvclBvcyhvbGRQb3MsIHJlc3VsdCkpIHsgcmVzdWx0LmhpdFNpZGUgPSB0cnVlOyB9DQogICAg
			cmV0dXJuIHJlc3VsdA0KICB9DQoNCiAgLy8gRm9yIHJlbGF0aXZlIHZlcnRpY2FsIG1vdmVtZW50
			LiBEaXIgbWF5IGJlIC0xIG9yIDEuIFVuaXQgY2FuIGJlDQogIC8vICJwYWdlIiBvciAibGluZSIu
			IFRoZSByZXN1bHRpbmcgcG9zaXRpb24gd2lsbCBoYXZlIGEgaGl0U2lkZT10cnVlDQogIC8vIHBy
			b3BlcnR5IGlmIGl0IHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuDQogIGZ1bmN0aW9u
			IGZpbmRQb3NWKGNtLCBwb3MsIGRpciwgdW5pdCkgew0KICAgIHZhciBkb2MgPSBjbS5kb2MsIHgg
			PSBwb3MubGVmdCwgeTsNCiAgICBpZiAodW5pdCA9PSAicGFnZSIpIHsNCiAgICAgIHZhciBwYWdl
			U2l6ZSA9IE1hdGgubWluKGNtLmRpc3BsYXkud3JhcHBlci5jbGllbnRIZWlnaHQsIHdpbmRvdy5p
			bm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KTsNCiAg
			ICAgIHZhciBtb3ZlQW1vdW50ID0gTWF0aC5tYXgocGFnZVNpemUgLSAuNSAqIHRleHRIZWlnaHQo
			Y20uZGlzcGxheSksIDMpOw0KICAgICAgeSA9IChkaXIgPiAwID8gcG9zLmJvdHRvbSA6IHBvcy50
			b3ApICsgZGlyICogbW92ZUFtb3VudDsNCg0KICAgIH0gZWxzZSBpZiAodW5pdCA9PSAibGluZSIp
			IHsNCiAgICAgIHkgPSBkaXIgPiAwID8gcG9zLmJvdHRvbSArIDMgOiBwb3MudG9wIC0gMzsNCiAg
			ICB9DQogICAgdmFyIHRhcmdldDsNCiAgICBmb3IgKDs7KSB7DQogICAgICB0YXJnZXQgPSBjb29y
			ZHNDaGFyKGNtLCB4LCB5KTsNCiAgICAgIGlmICghdGFyZ2V0Lm91dHNpZGUpIHsgYnJlYWsgfQ0K
			ICAgICAgaWYgKGRpciA8IDAgPyB5IDw9IDAgOiB5ID49IGRvYy5oZWlnaHQpIHsgdGFyZ2V0Lmhp
			dFNpZGUgPSB0cnVlOyBicmVhayB9DQogICAgICB5ICs9IGRpciAqIDU7DQogICAgfQ0KICAgIHJl
			dHVybiB0YXJnZXQNCiAgfQ0KDQogIC8vIENPTlRFTlRFRElUQUJMRSBJTlBVVCBTVFlMRQ0KDQog
			IHZhciBDb250ZW50RWRpdGFibGVJbnB1dCA9IGZ1bmN0aW9uKGNtKSB7DQogICAgdGhpcy5jbSA9
			IGNtOw0KICAgIHRoaXMubGFzdEFuY2hvck5vZGUgPSB0aGlzLmxhc3RBbmNob3JPZmZzZXQgPSB0
			aGlzLmxhc3RGb2N1c05vZGUgPSB0aGlzLmxhc3RGb2N1c09mZnNldCA9IG51bGw7DQogICAgdGhp
			cy5wb2xsaW5nID0gbmV3IERlbGF5ZWQoKTsNCiAgICB0aGlzLmNvbXBvc2luZyA9IG51bGw7DQog
			ICAgdGhpcy5ncmFjZVBlcmlvZCA9IGZhbHNlOw0KICAgIHRoaXMucmVhZERPTVRpbWVvdXQgPSBu
			dWxsOw0KICB9Ow0KDQogIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5pbml0ID0gZnVu
			Y3Rpb24gKGRpc3BsYXkpIHsNCiAgICAgIHZhciB0aGlzJDEgPSB0aGlzOw0KDQogICAgdmFyIGlu
			cHV0ID0gdGhpcywgY20gPSBpbnB1dC5jbTsNCiAgICB2YXIgZGl2ID0gaW5wdXQuZGl2ID0gZGlz
			cGxheS5saW5lRGl2Ow0KICAgIGRpc2FibGVCcm93c2VyTWFnaWMoZGl2LCBjbS5vcHRpb25zLnNw
			ZWxsY2hlY2ssIGNtLm9wdGlvbnMuYXV0b2NvcnJlY3QsIGNtLm9wdGlvbnMuYXV0b2NhcGl0YWxp
			emUpOw0KDQogICAgb24oZGl2LCAicGFzdGUiLCBmdW5jdGlvbiAoZSkgew0KICAgICAgaWYgKHNp
			Z25hbERPTUV2ZW50KGNtLCBlKSB8fCBoYW5kbGVQYXN0ZShlLCBjbSkpIHsgcmV0dXJuIH0NCiAg
			ICAgIC8vIElFIGRvZXNuJ3QgZmlyZSBpbnB1dCBldmVudHMsIHNvIHdlIHNjaGVkdWxlIGEgcmVh
			ZCBmb3IgdGhlIHBhc3RlZCBjb250ZW50IGluIHRoaXMgd2F5DQogICAgICBpZiAoaWVfdmVyc2lv
			biA8PSAxMSkgeyBzZXRUaW1lb3V0KG9wZXJhdGlvbihjbSwgZnVuY3Rpb24gKCkgeyByZXR1cm4g
			dGhpcyQxLnVwZGF0ZUZyb21ET00oKTsgfSksIDIwKTsgfQ0KICAgIH0pOw0KDQogICAgb24oZGl2
			LCAiY29tcG9zaXRpb25zdGFydCIsIGZ1bmN0aW9uIChlKSB7DQogICAgICB0aGlzJDEuY29tcG9z
			aW5nID0ge2RhdGE6IGUuZGF0YSwgZG9uZTogZmFsc2V9Ow0KICAgIH0pOw0KICAgIG9uKGRpdiwg
			ImNvbXBvc2l0aW9udXBkYXRlIiwgZnVuY3Rpb24gKGUpIHsNCiAgICAgIGlmICghdGhpcyQxLmNv
			bXBvc2luZykgeyB0aGlzJDEuY29tcG9zaW5nID0ge2RhdGE6IGUuZGF0YSwgZG9uZTogZmFsc2V9
			OyB9DQogICAgfSk7DQogICAgb24oZGl2LCAiY29tcG9zaXRpb25lbmQiLCBmdW5jdGlvbiAoZSkg
			ew0KICAgICAgaWYgKHRoaXMkMS5jb21wb3NpbmcpIHsNCiAgICAgICAgaWYgKGUuZGF0YSAhPSB0
			aGlzJDEuY29tcG9zaW5nLmRhdGEpIHsgdGhpcyQxLnJlYWRGcm9tRE9NU29vbigpOyB9DQogICAg
			ICAgIHRoaXMkMS5jb21wb3NpbmcuZG9uZSA9IHRydWU7DQogICAgICB9DQogICAgfSk7DQoNCiAg
			ICBvbihkaXYsICJ0b3VjaHN0YXJ0IiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5wdXQuZm9yY2VD
			b21wb3NpdGlvbkVuZCgpOyB9KTsNCg0KICAgIG9uKGRpdiwgImlucHV0IiwgZnVuY3Rpb24gKCkg
			ew0KICAgICAgaWYgKCF0aGlzJDEuY29tcG9zaW5nKSB7IHRoaXMkMS5yZWFkRnJvbURPTVNvb24o
			KTsgfQ0KICAgIH0pOw0KDQogICAgZnVuY3Rpb24gb25Db3B5Q3V0KGUpIHsNCiAgICAgIGlmIChz
			aWduYWxET01FdmVudChjbSwgZSkpIHsgcmV0dXJuIH0NCiAgICAgIGlmIChjbS5zb21ldGhpbmdT
			ZWxlY3RlZCgpKSB7DQogICAgICAgIHNldExhc3RDb3BpZWQoe2xpbmVXaXNlOiBmYWxzZSwgdGV4
			dDogY20uZ2V0U2VsZWN0aW9ucygpfSk7DQogICAgICAgIGlmIChlLnR5cGUgPT0gImN1dCIpIHsg
			Y20ucmVwbGFjZVNlbGVjdGlvbigiIiwgbnVsbCwgImN1dCIpOyB9DQogICAgICB9IGVsc2UgaWYg
			KCFjbS5vcHRpb25zLmxpbmVXaXNlQ29weUN1dCkgew0KICAgICAgICByZXR1cm4NCiAgICAgIH0g
			ZWxzZSB7DQogICAgICAgIHZhciByYW5nZXMgPSBjb3B5YWJsZVJhbmdlcyhjbSk7DQogICAgICAg
			IHNldExhc3RDb3BpZWQoe2xpbmVXaXNlOiB0cnVlLCB0ZXh0OiByYW5nZXMudGV4dH0pOw0KICAg
			ICAgICBpZiAoZS50eXBlID09ICJjdXQiKSB7DQogICAgICAgICAgY20ub3BlcmF0aW9uKGZ1bmN0
			aW9uICgpIHsNCiAgICAgICAgICAgIGNtLnNldFNlbGVjdGlvbnMocmFuZ2VzLnJhbmdlcywgMCwg
			c2VsX2RvbnRTY3JvbGwpOw0KICAgICAgICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbigiIiwgbnVs
			bCwgImN1dCIpOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAo
			ZS5jbGlwYm9hcmREYXRhKSB7DQogICAgICAgIGUuY2xpcGJvYXJkRGF0YS5jbGVhckRhdGEoKTsN
			CiAgICAgICAgdmFyIGNvbnRlbnQgPSBsYXN0Q29waWVkLnRleHQuam9pbigiXG4iKTsNCiAgICAg
			ICAgLy8gaU9TIGV4cG9zZXMgdGhlIGNsaXBib2FyZCBBUEksIGJ1dCBzZWVtcyB0byBkaXNjYXJk
			IGNvbnRlbnQgaW5zZXJ0ZWQgaW50byBpdA0KICAgICAgICBlLmNsaXBib2FyZERhdGEuc2V0RGF0
			YSgiVGV4dCIsIGNvbnRlbnQpOw0KICAgICAgICBpZiAoZS5jbGlwYm9hcmREYXRhLmdldERhdGEo
			IlRleHQiKSA9PSBjb250ZW50KSB7DQogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAg
			ICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICB9DQogICAgICAvLyBPbGQtZmFzaGlvbmVk
			IGJyaWVmbHktZm9jdXMtYS10ZXh0YXJlYSBoYWNrDQogICAgICB2YXIga2x1ZGdlID0gaGlkZGVu
			VGV4dGFyZWEoKSwgdGUgPSBrbHVkZ2UuZmlyc3RDaGlsZDsNCiAgICAgIGNtLmRpc3BsYXkubGlu
			ZVNwYWNlLmluc2VydEJlZm9yZShrbHVkZ2UsIGNtLmRpc3BsYXkubGluZVNwYWNlLmZpcnN0Q2hp
			bGQpOw0KICAgICAgdGUudmFsdWUgPSBsYXN0Q29waWVkLnRleHQuam9pbigiXG4iKTsNCiAgICAg
			IHZhciBoYWRGb2N1cyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7DQogICAgICBzZWxlY3RJbnB1
			dCh0ZSk7DQogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgY20uZGlzcGxh
			eS5saW5lU3BhY2UucmVtb3ZlQ2hpbGQoa2x1ZGdlKTsNCiAgICAgICAgaGFkRm9jdXMuZm9jdXMo
			KTsNCiAgICAgICAgaWYgKGhhZEZvY3VzID09IGRpdikgeyBpbnB1dC5zaG93UHJpbWFyeVNlbGVj
			dGlvbigpOyB9DQogICAgICB9LCA1MCk7DQogICAgfQ0KICAgIG9uKGRpdiwgImNvcHkiLCBvbkNv
			cHlDdXQpOw0KICAgIG9uKGRpdiwgImN1dCIsIG9uQ29weUN1dCk7DQogIH07DQoNCiAgQ29udGVu
			dEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLnNjcmVlblJlYWRlckxhYmVsQ2hhbmdlZCA9IGZ1bmN0
			aW9uIChsYWJlbCkgew0KICAgIC8vIExhYmVsIGZvciBzY3JlZW5yZWFkZXJzLCBhY2Nlc3NpYmls
			aXR5DQogICAgaWYobGFiZWwpIHsNCiAgICAgIHRoaXMuZGl2LnNldEF0dHJpYnV0ZSgnYXJpYS1s
			YWJlbCcsIGxhYmVsKTsNCiAgICB9IGVsc2Ugew0KICAgICAgdGhpcy5kaXYucmVtb3ZlQXR0cmli
			dXRlKCdhcmlhLWxhYmVsJyk7DQogICAgfQ0KICB9Ow0KDQogIENvbnRlbnRFZGl0YWJsZUlucHV0
			LnByb3RvdHlwZS5wcmVwYXJlU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciByZXN1
			bHQgPSBwcmVwYXJlU2VsZWN0aW9uKHRoaXMuY20sIGZhbHNlKTsNCiAgICByZXN1bHQuZm9jdXMg
			PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09IHRoaXMuZGl2Ow0KICAgIHJldHVybiByZXN1bHQN
			CiAgfTsNCg0KICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUuc2hvd1NlbGVjdGlvbiA9
			IGZ1bmN0aW9uIChpbmZvLCB0YWtlRm9jdXMpIHsNCiAgICBpZiAoIWluZm8gfHwgIXRoaXMuY20u
			ZGlzcGxheS52aWV3Lmxlbmd0aCkgeyByZXR1cm4gfQ0KICAgIGlmIChpbmZvLmZvY3VzIHx8IHRh
			a2VGb2N1cykgeyB0aGlzLnNob3dQcmltYXJ5U2VsZWN0aW9uKCk7IH0NCiAgICB0aGlzLnNob3dN
			dWx0aXBsZVNlbGVjdGlvbnMoaW5mbyk7DQogIH07DQoNCiAgQ29udGVudEVkaXRhYmxlSW5wdXQu
			cHJvdG90eXBlLmdldFNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4gdGhpcy5j
			bS5kaXNwbGF5LndyYXBwZXIub3duZXJEb2N1bWVudC5nZXRTZWxlY3Rpb24oKQ0KICB9Ow0KDQog
			IENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5zaG93UHJpbWFyeVNlbGVjdGlvbiA9IGZ1
			bmN0aW9uICgpIHsNCiAgICB2YXIgc2VsID0gdGhpcy5nZXRTZWxlY3Rpb24oKSwgY20gPSB0aGlz
			LmNtLCBwcmltID0gY20uZG9jLnNlbC5wcmltYXJ5KCk7DQogICAgdmFyIGZyb20gPSBwcmltLmZy
			b20oKSwgdG8gPSBwcmltLnRvKCk7DQoNCiAgICBpZiAoY20uZGlzcGxheS52aWV3VG8gPT0gY20u
			ZGlzcGxheS52aWV3RnJvbSB8fCBmcm9tLmxpbmUgPj0gY20uZGlzcGxheS52aWV3VG8gfHwgdG8u
			bGluZSA8IGNtLmRpc3BsYXkudmlld0Zyb20pIHsNCiAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMo
			KTsNCiAgICAgIHJldHVybg0KICAgIH0NCg0KICAgIHZhciBjdXJBbmNob3IgPSBkb21Ub1Bvcyhj
			bSwgc2VsLmFuY2hvck5vZGUsIHNlbC5hbmNob3JPZmZzZXQpOw0KICAgIHZhciBjdXJGb2N1cyA9
			IGRvbVRvUG9zKGNtLCBzZWwuZm9jdXNOb2RlLCBzZWwuZm9jdXNPZmZzZXQpOw0KICAgIGlmIChj
			dXJBbmNob3IgJiYgIWN1ckFuY2hvci5iYWQgJiYgY3VyRm9jdXMgJiYgIWN1ckZvY3VzLmJhZCAm
			Jg0KICAgICAgICBjbXAobWluUG9zKGN1ckFuY2hvciwgY3VyRm9jdXMpLCBmcm9tKSA9PSAwICYm
			DQogICAgICAgIGNtcChtYXhQb3MoY3VyQW5jaG9yLCBjdXJGb2N1cyksIHRvKSA9PSAwKQ0KICAg
			ICAgeyByZXR1cm4gfQ0KDQogICAgdmFyIHZpZXcgPSBjbS5kaXNwbGF5LnZpZXc7DQogICAgdmFy
			IHN0YXJ0ID0gKGZyb20ubGluZSA+PSBjbS5kaXNwbGF5LnZpZXdGcm9tICYmIHBvc1RvRE9NKGNt
			LCBmcm9tKSkgfHwNCiAgICAgICAge25vZGU6IHZpZXdbMF0ubWVhc3VyZS5tYXBbMl0sIG9mZnNl
			dDogMH07DQogICAgdmFyIGVuZCA9IHRvLmxpbmUgPCBjbS5kaXNwbGF5LnZpZXdUbyAmJiBwb3NU
			b0RPTShjbSwgdG8pOw0KICAgIGlmICghZW5kKSB7DQogICAgICB2YXIgbWVhc3VyZSA9IHZpZXdb
			dmlldy5sZW5ndGggLSAxXS5tZWFzdXJlOw0KICAgICAgdmFyIG1hcCQkMSA9IG1lYXN1cmUubWFw
			cyA/IG1lYXN1cmUubWFwc1ttZWFzdXJlLm1hcHMubGVuZ3RoIC0gMV0gOiBtZWFzdXJlLm1hcDsN
			CiAgICAgIGVuZCA9IHtub2RlOiBtYXAkJDFbbWFwJCQxLmxlbmd0aCAtIDFdLCBvZmZzZXQ6IG1h
			cCQkMVttYXAkJDEubGVuZ3RoIC0gMl0gLSBtYXAkJDFbbWFwJCQxLmxlbmd0aCAtIDNdfTsNCiAg
			ICB9DQoNCiAgICBpZiAoIXN0YXJ0IHx8ICFlbmQpIHsNCiAgICAgIHNlbC5yZW1vdmVBbGxSYW5n
			ZXMoKTsNCiAgICAgIHJldHVybg0KICAgIH0NCg0KICAgIHZhciBvbGQgPSBzZWwucmFuZ2VDb3Vu
			dCAmJiBzZWwuZ2V0UmFuZ2VBdCgwKSwgcm5nOw0KICAgIHRyeSB7IHJuZyA9IHJhbmdlKHN0YXJ0
			Lm5vZGUsIHN0YXJ0Lm9mZnNldCwgZW5kLm9mZnNldCwgZW5kLm5vZGUpOyB9DQogICAgY2F0Y2go
			ZSkge30gLy8gT3VyIG1vZGVsIG9mIHRoZSBET00gbWlnaHQgYmUgb3V0ZGF0ZWQsIGluIHdoaWNo
			IGNhc2UgdGhlIHJhbmdlIHdlIHRyeSB0byBzZXQgY2FuIGJlIGltcG9zc2libGUNCiAgICBpZiAo
			cm5nKSB7DQogICAgICBpZiAoIWdlY2tvICYmIGNtLnN0YXRlLmZvY3VzZWQpIHsNCiAgICAgICAg
			c2VsLmNvbGxhcHNlKHN0YXJ0Lm5vZGUsIHN0YXJ0Lm9mZnNldCk7DQogICAgICAgIGlmICghcm5n
			LmNvbGxhcHNlZCkgew0KICAgICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAg
			ICBzZWwuYWRkUmFuZ2Uocm5nKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAg
			c2VsLnJlbW92ZUFsbFJhbmdlcygpOw0KICAgICAgICBzZWwuYWRkUmFuZ2Uocm5nKTsNCiAgICAg
			IH0NCiAgICAgIGlmIChvbGQgJiYgc2VsLmFuY2hvck5vZGUgPT0gbnVsbCkgeyBzZWwuYWRkUmFu
			Z2Uob2xkKTsgfQ0KICAgICAgZWxzZSBpZiAoZ2Vja28pIHsgdGhpcy5zdGFydEdyYWNlUGVyaW9k
			KCk7IH0NCiAgICB9DQogICAgdGhpcy5yZW1lbWJlclNlbGVjdGlvbigpOw0KICB9Ow0KDQogIENv
			bnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5zdGFydEdyYWNlUGVyaW9kID0gZnVuY3Rpb24g
			KCkgew0KICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7DQoNCiAgICBjbGVhclRpbWVvdXQodGhpcy5n
			cmFjZVBlcmlvZCk7DQogICAgdGhpcy5ncmFjZVBlcmlvZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24g
			KCkgew0KICAgICAgdGhpcyQxLmdyYWNlUGVyaW9kID0gZmFsc2U7DQogICAgICBpZiAodGhpcyQx
			LnNlbGVjdGlvbkNoYW5nZWQoKSkNCiAgICAgICAgeyB0aGlzJDEuY20ub3BlcmF0aW9uKGZ1bmN0
			aW9uICgpIHsgcmV0dXJuIHRoaXMkMS5jbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTsg
			fSk7IH0NCiAgICB9LCAyMCk7DQogIH07DQoNCiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90
			eXBlLnNob3dNdWx0aXBsZVNlbGVjdGlvbnMgPSBmdW5jdGlvbiAoaW5mbykgew0KICAgIHJlbW92
			ZUNoaWxkcmVuQW5kQWRkKHRoaXMuY20uZGlzcGxheS5jdXJzb3JEaXYsIGluZm8uY3Vyc29ycyk7
			DQogICAgcmVtb3ZlQ2hpbGRyZW5BbmRBZGQodGhpcy5jbS5kaXNwbGF5LnNlbGVjdGlvbkRpdiwg
			aW5mby5zZWxlY3Rpb24pOw0KICB9Ow0KDQogIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlw
			ZS5yZW1lbWJlclNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICB2YXIgc2VsID0gdGhpcy5n
			ZXRTZWxlY3Rpb24oKTsNCiAgICB0aGlzLmxhc3RBbmNob3JOb2RlID0gc2VsLmFuY2hvck5vZGU7
			IHRoaXMubGFzdEFuY2hvck9mZnNldCA9IHNlbC5hbmNob3JPZmZzZXQ7DQogICAgdGhpcy5sYXN0
			Rm9jdXNOb2RlID0gc2VsLmZvY3VzTm9kZTsgdGhpcy5sYXN0Rm9jdXNPZmZzZXQgPSBzZWwuZm9j
			dXNPZmZzZXQ7DQogIH07DQoNCiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLnNlbGVj
			dGlvbkluRWRpdG9yID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciBzZWwgPSB0aGlzLmdldFNlbGVj
			dGlvbigpOw0KICAgIGlmICghc2VsLnJhbmdlQ291bnQpIHsgcmV0dXJuIGZhbHNlIH0NCiAgICB2
			YXIgbm9kZSA9IHNlbC5nZXRSYW5nZUF0KDApLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyOw0KICAg
			IHJldHVybiBjb250YWlucyh0aGlzLmRpdiwgbm9kZSkNCiAgfTsNCg0KICBDb250ZW50RWRpdGFi
			bGVJbnB1dC5wcm90b3R5cGUuZm9jdXMgPSBmdW5jdGlvbiAoKSB7DQogICAgaWYgKHRoaXMuY20u
			b3B0aW9ucy5yZWFkT25seSAhPSAibm9jdXJzb3IiKSB7DQogICAgICBpZiAoIXRoaXMuc2VsZWN0
			aW9uSW5FZGl0b3IoKSB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9IHRoaXMuZGl2KQ0KICAg
			ICAgICB7IHRoaXMuc2hvd1NlbGVjdGlvbih0aGlzLnByZXBhcmVTZWxlY3Rpb24oKSwgdHJ1ZSk7
			IH0NCiAgICAgIHRoaXMuZGl2LmZvY3VzKCk7DQogICAgfQ0KICB9Ow0KICBDb250ZW50RWRpdGFi
			bGVJbnB1dC5wcm90b3R5cGUuYmx1ciA9IGZ1bmN0aW9uICgpIHsgdGhpcy5kaXYuYmx1cigpOyB9
			Ow0KICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUuZ2V0RmllbGQgPSBmdW5jdGlvbiAo
			KSB7IHJldHVybiB0aGlzLmRpdiB9Ow0KDQogIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlw
			ZS5zdXBwb3J0c1RvdWNoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZSB9Ow0KDQogIENvbnRl
			bnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5yZWNlaXZlZEZvY3VzID0gZnVuY3Rpb24gKCkgew0K
			ICAgIHZhciBpbnB1dCA9IHRoaXM7DQogICAgaWYgKHRoaXMuc2VsZWN0aW9uSW5FZGl0b3IoKSkN
			CiAgICAgIHsgdGhpcy5wb2xsU2VsZWN0aW9uKCk7IH0NCiAgICBlbHNlDQogICAgICB7IHJ1bklu
			T3AodGhpcy5jbSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5wdXQuY20uY3VyT3Auc2VsZWN0aW9u
			Q2hhbmdlZCA9IHRydWU7IH0pOyB9DQoNCiAgICBmdW5jdGlvbiBwb2xsKCkgew0KICAgICAgaWYg
			KGlucHV0LmNtLnN0YXRlLmZvY3VzZWQpIHsNCiAgICAgICAgaW5wdXQucG9sbFNlbGVjdGlvbigp
			Ow0KICAgICAgICBpbnB1dC5wb2xsaW5nLnNldChpbnB1dC5jbS5vcHRpb25zLnBvbGxJbnRlcnZh
			bCwgcG9sbCk7DQogICAgICB9DQogICAgfQ0KICAgIHRoaXMucG9sbGluZy5zZXQodGhpcy5jbS5v
			cHRpb25zLnBvbGxJbnRlcnZhbCwgcG9sbCk7DQogIH07DQoNCiAgQ29udGVudEVkaXRhYmxlSW5w
			dXQucHJvdG90eXBlLnNlbGVjdGlvbkNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7DQogICAgdmFyIHNl
			bCA9IHRoaXMuZ2V0U2VsZWN0aW9uKCk7DQogICAgcmV0dXJuIHNlbC5hbmNob3JOb2RlICE9IHRo
			aXMubGFzdEFuY2hvck5vZGUgfHwgc2VsLmFuY2hvck9mZnNldCAhPSB0aGlzLmxhc3RBbmNob3JP
			ZmZzZXQgfHwNCiAgICAgIHNlbC5mb2N1c05vZGUgIT0gdGhpcy5sYXN0Rm9jdXNOb2RlIHx8IHNl
			bC5mb2N1c09mZnNldCAhPSB0aGlzLmxhc3RGb2N1c09mZnNldA0KICB9Ow0KDQogIENvbnRlbnRF
			ZGl0YWJsZUlucHV0LnByb3RvdHlwZS5wb2xsU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkgew0KICAg
			IGlmICh0aGlzLnJlYWRET01UaW1lb3V0ICE9IG51bGwgfHwgdGhpcy5ncmFjZVBlcmlvZCB8fCAh
			dGhpcy5zZWxlY3Rpb25DaGFuZ2VkKCkpIHsgcmV0dXJuIH0NCiAgICB2YXIgc2VsID0gdGhpcy5n
			ZXRTZWxlY3Rpb24oKSwgY20gPSB0aGlzLmNtOw0KICAgIC8vIE9uIEFuZHJvaWQgQ2hyb21lICh2
			ZXJzaW9uIDU2LCBhdCBsZWFzdCksIGJhY2tzcGFjaW5nIGludG8gYW4NCiAgICAvLyB1bmVkaXRh
			YmxlIGJsb2NrIGVsZW1lbnQgd2lsbCBwdXQgdGhlIGN1cnNvciBpbiB0aGF0IGVsZW1lbnQsDQog
			ICAgLy8gYW5kIHRoZW4sIGJlY2F1c2UgaXQncyBub3QgZWRpdGFibGUsIGhpZGUgdGhlIHZpcnR1
			YWwga2V5Ym9hcmQuDQogICAgLy8gQmVjYXVzZSBBbmRyb2lkIGRvZXNuJ3QgYWxsb3cgdXMgdG8g
			YWN0dWFsbHkgZGV0ZWN0IGJhY2tzcGFjZQ0KICAgIC8vIHByZXNzZXMgaW4gYSBzYW5lIHdheSwg
			dGhpcyBjb2RlIGNoZWNrcyBmb3Igd2hlbiB0aGF0IGhhcHBlbnMNCiAgICAvLyBhbmQgc2ltdWxh
			dGVzIGEgYmFja3NwYWNlIHByZXNzIGluIHRoaXMgY2FzZS4NCiAgICBpZiAoYW5kcm9pZCAmJiBj
			aHJvbWUgJiYgdGhpcy5jbS5kaXNwbGF5Lmd1dHRlclNwZWNzLmxlbmd0aCAmJiBpc0luR3V0dGVy
			KHNlbC5hbmNob3JOb2RlKSkgew0KICAgICAgdGhpcy5jbS50cmlnZ2VyT25LZXlEb3duKHt0eXBl
			OiAia2V5ZG93biIsIGtleUNvZGU6IDgsIHByZXZlbnREZWZhdWx0OiBNYXRoLmFic30pOw0KICAg
			ICAgdGhpcy5ibHVyKCk7DQogICAgICB0aGlzLmZvY3VzKCk7DQogICAgICByZXR1cm4NCiAgICB9
			DQogICAgaWYgKHRoaXMuY29tcG9zaW5nKSB7IHJldHVybiB9DQogICAgdGhpcy5yZW1lbWJlclNl
			bGVjdGlvbigpOw0KICAgIHZhciBhbmNob3IgPSBkb21Ub1BvcyhjbSwgc2VsLmFuY2hvck5vZGUs
			IHNlbC5hbmNob3JPZmZzZXQpOw0KICAgIHZhciBoZWFkID0gZG9tVG9Qb3MoY20sIHNlbC5mb2N1
			c05vZGUsIHNlbC5mb2N1c09mZnNldCk7DQogICAgaWYgKGFuY2hvciAmJiBoZWFkKSB7IHJ1bklu
			T3AoY20sIGZ1bmN0aW9uICgpIHsNCiAgICAgIHNldFNlbGVjdGlvbihjbS5kb2MsIHNpbXBsZVNl
			bGVjdGlvbihhbmNob3IsIGhlYWQpLCBzZWxfZG9udFNjcm9sbCk7DQogICAgICBpZiAoYW5jaG9y
			LmJhZCB8fCBoZWFkLmJhZCkgeyBjbS5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTsgfQ0K
			ICAgIH0pOyB9DQogIH07DQoNCiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLnBvbGxD
			b250ZW50ID0gZnVuY3Rpb24gKCkgew0KICAgIGlmICh0aGlzLnJlYWRET01UaW1lb3V0ICE9IG51
			bGwpIHsNCiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlYWRET01UaW1lb3V0KTsNCiAgICAgIHRo
			aXMucmVhZERPTVRpbWVvdXQgPSBudWxsOw0KICAgIH0NCg0KICAgIHZhciBjbSA9IHRoaXMuY20s
			IGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBzZWwgPSBjbS5kb2Muc2VsLnByaW1hcnkoKTsNCiAgICB2
			YXIgZnJvbSA9IHNlbC5mcm9tKCksIHRvID0gc2VsLnRvKCk7DQogICAgaWYgKGZyb20uY2ggPT0g
			MCAmJiBmcm9tLmxpbmUgPiBjbS5maXJzdExpbmUoKSkNCiAgICAgIHsgZnJvbSA9IFBvcyhmcm9t
			LmxpbmUgLSAxLCBnZXRMaW5lKGNtLmRvYywgZnJvbS5saW5lIC0gMSkubGVuZ3RoKTsgfQ0KICAg
			IGlmICh0by5jaCA9PSBnZXRMaW5lKGNtLmRvYywgdG8ubGluZSkudGV4dC5sZW5ndGggJiYgdG8u
			bGluZSA8IGNtLmxhc3RMaW5lKCkpDQogICAgICB7IHRvID0gUG9zKHRvLmxpbmUgKyAxLCAwKTsg
			fQ0KICAgIGlmIChmcm9tLmxpbmUgPCBkaXNwbGF5LnZpZXdGcm9tIHx8IHRvLmxpbmUgPiBkaXNw
			bGF5LnZpZXdUbyAtIDEpIHsgcmV0dXJuIGZhbHNlIH0NCg0KICAgIHZhciBmcm9tSW5kZXgsIGZy
			b21MaW5lLCBmcm9tTm9kZTsNCiAgICBpZiAoZnJvbS5saW5lID09IGRpc3BsYXkudmlld0Zyb20g
			fHwgKGZyb21JbmRleCA9IGZpbmRWaWV3SW5kZXgoY20sIGZyb20ubGluZSkpID09IDApIHsNCiAg
			ICAgIGZyb21MaW5lID0gbGluZU5vKGRpc3BsYXkudmlld1swXS5saW5lKTsNCiAgICAgIGZyb21O
			b2RlID0gZGlzcGxheS52aWV3WzBdLm5vZGU7DQogICAgfSBlbHNlIHsNCiAgICAgIGZyb21MaW5l
			ID0gbGluZU5vKGRpc3BsYXkudmlld1tmcm9tSW5kZXhdLmxpbmUpOw0KICAgICAgZnJvbU5vZGUg
			PSBkaXNwbGF5LnZpZXdbZnJvbUluZGV4IC0gMV0ubm9kZS5uZXh0U2libGluZzsNCiAgICB9DQog
			ICAgdmFyIHRvSW5kZXggPSBmaW5kVmlld0luZGV4KGNtLCB0by5saW5lKTsNCiAgICB2YXIgdG9M
			aW5lLCB0b05vZGU7DQogICAgaWYgKHRvSW5kZXggPT0gZGlzcGxheS52aWV3Lmxlbmd0aCAtIDEp
			IHsNCiAgICAgIHRvTGluZSA9IGRpc3BsYXkudmlld1RvIC0gMTsNCiAgICAgIHRvTm9kZSA9IGRp
			c3BsYXkubGluZURpdi5sYXN0Q2hpbGQ7DQogICAgfSBlbHNlIHsNCiAgICAgIHRvTGluZSA9IGxp
			bmVObyhkaXNwbGF5LnZpZXdbdG9JbmRleCArIDFdLmxpbmUpIC0gMTsNCiAgICAgIHRvTm9kZSA9
			IGRpc3BsYXkudmlld1t0b0luZGV4ICsgMV0ubm9kZS5wcmV2aW91c1NpYmxpbmc7DQogICAgfQ0K
			DQogICAgaWYgKCFmcm9tTm9kZSkgeyByZXR1cm4gZmFsc2UgfQ0KICAgIHZhciBuZXdUZXh0ID0g
			Y20uZG9jLnNwbGl0TGluZXMoZG9tVGV4dEJldHdlZW4oY20sIGZyb21Ob2RlLCB0b05vZGUsIGZy
			b21MaW5lLCB0b0xpbmUpKTsNCiAgICB2YXIgb2xkVGV4dCA9IGdldEJldHdlZW4oY20uZG9jLCBQ
			b3MoZnJvbUxpbmUsIDApLCBQb3ModG9MaW5lLCBnZXRMaW5lKGNtLmRvYywgdG9MaW5lKS50ZXh0
			Lmxlbmd0aCkpOw0KICAgIHdoaWxlIChuZXdUZXh0Lmxlbmd0aCA+IDEgJiYgb2xkVGV4dC5sZW5n
			dGggPiAxKSB7DQogICAgICBpZiAobHN0KG5ld1RleHQpID09IGxzdChvbGRUZXh0KSkgeyBuZXdU
			ZXh0LnBvcCgpOyBvbGRUZXh0LnBvcCgpOyB0b0xpbmUtLTsgfQ0KICAgICAgZWxzZSBpZiAobmV3
			VGV4dFswXSA9PSBvbGRUZXh0WzBdKSB7IG5ld1RleHQuc2hpZnQoKTsgb2xkVGV4dC5zaGlmdCgp
			OyBmcm9tTGluZSsrOyB9DQogICAgICBlbHNlIHsgYnJlYWsgfQ0KICAgIH0NCg0KICAgIHZhciBj
			dXRGcm9udCA9IDAsIGN1dEVuZCA9IDA7DQogICAgdmFyIG5ld1RvcCA9IG5ld1RleHRbMF0sIG9s
			ZFRvcCA9IG9sZFRleHRbMF0sIG1heEN1dEZyb250ID0gTWF0aC5taW4obmV3VG9wLmxlbmd0aCwg
			b2xkVG9wLmxlbmd0aCk7DQogICAgd2hpbGUgKGN1dEZyb250IDwgbWF4Q3V0RnJvbnQgJiYgbmV3
			VG9wLmNoYXJDb2RlQXQoY3V0RnJvbnQpID09IG9sZFRvcC5jaGFyQ29kZUF0KGN1dEZyb250KSkN
			CiAgICAgIHsgKytjdXRGcm9udDsgfQ0KICAgIHZhciBuZXdCb3QgPSBsc3QobmV3VGV4dCksIG9s
			ZEJvdCA9IGxzdChvbGRUZXh0KTsNCiAgICB2YXIgbWF4Q3V0RW5kID0gTWF0aC5taW4obmV3Qm90
			Lmxlbmd0aCAtIChuZXdUZXh0Lmxlbmd0aCA9PSAxID8gY3V0RnJvbnQgOiAwKSwNCiAgICAgICAg
			ICAgICAgICAgICAgICAgICAgICAgb2xkQm90Lmxlbmd0aCAtIChvbGRUZXh0Lmxlbmd0aCA9PSAx
			ID8gY3V0RnJvbnQgOiAwKSk7DQogICAgd2hpbGUgKGN1dEVuZCA8IG1heEN1dEVuZCAmJg0KICAg
			ICAgICAgICBuZXdCb3QuY2hhckNvZGVBdChuZXdCb3QubGVuZ3RoIC0gY3V0RW5kIC0gMSkgPT0g
			b2xkQm90LmNoYXJDb2RlQXQob2xkQm90Lmxlbmd0aCAtIGN1dEVuZCAtIDEpKQ0KICAgICAgeyAr
			K2N1dEVuZDsgfQ0KICAgIC8vIFRyeSB0byBtb3ZlIHN0YXJ0IG9mIGNoYW5nZSB0byBzdGFydCBv
			ZiBzZWxlY3Rpb24gaWYgYW1iaWd1b3VzDQogICAgaWYgKG5ld1RleHQubGVuZ3RoID09IDEgJiYg
			b2xkVGV4dC5sZW5ndGggPT0gMSAmJiBmcm9tTGluZSA9PSBmcm9tLmxpbmUpIHsNCiAgICAgIHdo
			aWxlIChjdXRGcm9udCAmJiBjdXRGcm9udCA+IGZyb20uY2ggJiYNCiAgICAgICAgICAgICBuZXdC
			b3QuY2hhckNvZGVBdChuZXdCb3QubGVuZ3RoIC0gY3V0RW5kIC0gMSkgPT0gb2xkQm90LmNoYXJD
			b2RlQXQob2xkQm90Lmxlbmd0aCAtIGN1dEVuZCAtIDEpKSB7DQogICAgICAgIGN1dEZyb250LS07
			DQogICAgICAgIGN1dEVuZCsrOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIG5ld1RleHRbbmV3VGV4
			dC5sZW5ndGggLSAxXSA9IG5ld0JvdC5zbGljZSgwLCBuZXdCb3QubGVuZ3RoIC0gY3V0RW5kKS5y
			ZXBsYWNlKC9eXHUyMDBiKy8sICIiKTsNCiAgICBuZXdUZXh0WzBdID0gbmV3VGV4dFswXS5zbGlj
			ZShjdXRGcm9udCkucmVwbGFjZSgvXHUyMDBiKyQvLCAiIik7DQoNCiAgICB2YXIgY2hGcm9tID0g
			UG9zKGZyb21MaW5lLCBjdXRGcm9udCk7DQogICAgdmFyIGNoVG8gPSBQb3ModG9MaW5lLCBvbGRU
			ZXh0Lmxlbmd0aCA/IGxzdChvbGRUZXh0KS5sZW5ndGggLSBjdXRFbmQgOiAwKTsNCiAgICBpZiAo
			bmV3VGV4dC5sZW5ndGggPiAxIHx8IG5ld1RleHRbMF0gfHwgY21wKGNoRnJvbSwgY2hUbykpIHsN
			CiAgICAgIHJlcGxhY2VSYW5nZShjbS5kb2MsIG5ld1RleHQsIGNoRnJvbSwgY2hUbywgIitpbnB1
			dCIpOw0KICAgICAgcmV0dXJuIHRydWUNCiAgICB9DQogIH07DQoNCiAgQ29udGVudEVkaXRhYmxl
			SW5wdXQucHJvdG90eXBlLmVuc3VyZVBvbGxlZCA9IGZ1bmN0aW9uICgpIHsNCiAgICB0aGlzLmZv
			cmNlQ29tcG9zaXRpb25FbmQoKTsNCiAgfTsNCiAgQ29udGVudEVkaXRhYmxlSW5wdXQucHJvdG90
			eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgew0KICAgIHRoaXMuZm9yY2VDb21wb3NpdGlvbkVuZCgp
			Ow0KICB9Ow0KICBDb250ZW50RWRpdGFibGVJbnB1dC5wcm90b3R5cGUuZm9yY2VDb21wb3NpdGlv
			bkVuZCA9IGZ1bmN0aW9uICgpIHsNCiAgICBpZiAoIXRoaXMuY29tcG9zaW5nKSB7IHJldHVybiB9
			DQogICAgY2xlYXJUaW1lb3V0KHRoaXMucmVhZERPTVRpbWVvdXQpOw0KICAgIHRoaXMuY29tcG9z
			aW5nID0gbnVsbDsNCiAgICB0aGlzLnVwZGF0ZUZyb21ET00oKTsNCiAgICB0aGlzLmRpdi5ibHVy
			KCk7DQogICAgdGhpcy5kaXYuZm9jdXMoKTsNCiAgfTsNCiAgQ29udGVudEVkaXRhYmxlSW5wdXQu
			cHJvdG90eXBlLnJlYWRGcm9tRE9NU29vbiA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciB0aGlz
			JDEgPSB0aGlzOw0KDQogICAgaWYgKHRoaXMucmVhZERPTVRpbWVvdXQgIT0gbnVsbCkgeyByZXR1
			cm4gfQ0KICAgIHRoaXMucmVhZERPTVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsN
			CiAgICAgIHRoaXMkMS5yZWFkRE9NVGltZW91dCA9IG51bGw7DQogICAgICBpZiAodGhpcyQxLmNv
			bXBvc2luZykgew0KICAgICAgICBpZiAodGhpcyQxLmNvbXBvc2luZy5kb25lKSB7IHRoaXMkMS5j
			b21wb3NpbmcgPSBudWxsOyB9DQogICAgICAgIGVsc2UgeyByZXR1cm4gfQ0KICAgICAgfQ0KICAg
			ICAgdGhpcyQxLnVwZGF0ZUZyb21ET00oKTsNCiAgICB9LCA4MCk7DQogIH07DQoNCiAgQ29udGVu
			dEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLnVwZGF0ZUZyb21ET00gPSBmdW5jdGlvbiAoKSB7DQog
			ICAgICB2YXIgdGhpcyQxID0gdGhpczsNCg0KICAgIGlmICh0aGlzLmNtLmlzUmVhZE9ubHkoKSB8
			fCAhdGhpcy5wb2xsQ29udGVudCgpKQ0KICAgICAgeyBydW5Jbk9wKHRoaXMuY20sIGZ1bmN0aW9u
			ICgpIHsgcmV0dXJuIHJlZ0NoYW5nZSh0aGlzJDEuY20pOyB9KTsgfQ0KICB9Ow0KDQogIENvbnRl
			bnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5zZXRVbmVkaXRhYmxlID0gZnVuY3Rpb24gKG5vZGUp
			IHsNCiAgICBub2RlLmNvbnRlbnRFZGl0YWJsZSA9ICJmYWxzZSI7DQogIH07DQoNCiAgQ29udGVu
			dEVkaXRhYmxlSW5wdXQucHJvdG90eXBlLm9uS2V5UHJlc3MgPSBmdW5jdGlvbiAoZSkgew0KICAg
			IGlmIChlLmNoYXJDb2RlID09IDAgfHwgdGhpcy5jb21wb3NpbmcpIHsgcmV0dXJuIH0NCiAgICBl
			LnByZXZlbnREZWZhdWx0KCk7DQogICAgaWYgKCF0aGlzLmNtLmlzUmVhZE9ubHkoKSkNCiAgICAg
			IHsgb3BlcmF0aW9uKHRoaXMuY20sIGFwcGx5VGV4dElucHV0KSh0aGlzLmNtLCBTdHJpbmcuZnJv
			bUNoYXJDb2RlKGUuY2hhckNvZGUgPT0gbnVsbCA/IGUua2V5Q29kZSA6IGUuY2hhckNvZGUpLCAw
			KTsgfQ0KICB9Ow0KDQogIENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5yZWFkT25seUNo
			YW5nZWQgPSBmdW5jdGlvbiAodmFsKSB7DQogICAgdGhpcy5kaXYuY29udGVudEVkaXRhYmxlID0g
			U3RyaW5nKHZhbCAhPSAibm9jdXJzb3IiKTsNCiAgfTsNCg0KICBDb250ZW50RWRpdGFibGVJbnB1
			dC5wcm90b3R5cGUub25Db250ZXh0TWVudSA9IGZ1bmN0aW9uICgpIHt9Ow0KICBDb250ZW50RWRp
			dGFibGVJbnB1dC5wcm90b3R5cGUucmVzZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHt9Ow0KDQog
			IENvbnRlbnRFZGl0YWJsZUlucHV0LnByb3RvdHlwZS5uZWVkc0NvbnRlbnRBdHRyaWJ1dGUgPSB0
			cnVlOw0KDQogIGZ1bmN0aW9uIHBvc1RvRE9NKGNtLCBwb3MpIHsNCiAgICB2YXIgdmlldyA9IGZp
			bmRWaWV3Rm9yTGluZShjbSwgcG9zLmxpbmUpOw0KICAgIGlmICghdmlldyB8fCB2aWV3LmhpZGRl
			bikgeyByZXR1cm4gbnVsbCB9DQogICAgdmFyIGxpbmUgPSBnZXRMaW5lKGNtLmRvYywgcG9zLmxp
			bmUpOw0KICAgIHZhciBpbmZvID0gbWFwRnJvbUxpbmVWaWV3KHZpZXcsIGxpbmUsIHBvcy5saW5l
			KTsNCg0KICAgIHZhciBvcmRlciA9IGdldE9yZGVyKGxpbmUsIGNtLmRvYy5kaXJlY3Rpb24pLCBz
			aWRlID0gImxlZnQiOw0KICAgIGlmIChvcmRlcikgew0KICAgICAgdmFyIHBhcnRQb3MgPSBnZXRC
			aWRpUGFydEF0KG9yZGVyLCBwb3MuY2gpOw0KICAgICAgc2lkZSA9IHBhcnRQb3MgJSAyID8gInJp
			Z2h0IiA6ICJsZWZ0IjsNCiAgICB9DQogICAgdmFyIHJlc3VsdCA9IG5vZGVBbmRPZmZzZXRJbkxp
			bmVNYXAoaW5mby5tYXAsIHBvcy5jaCwgc2lkZSk7DQogICAgcmVzdWx0Lm9mZnNldCA9IHJlc3Vs
			dC5jb2xsYXBzZSA9PSAicmlnaHQiID8gcmVzdWx0LmVuZCA6IHJlc3VsdC5zdGFydDsNCiAgICBy
			ZXR1cm4gcmVzdWx0DQogIH0NCg0KICBmdW5jdGlvbiBpc0luR3V0dGVyKG5vZGUpIHsNCiAgICBm
			b3IgKHZhciBzY2FuID0gbm9kZTsgc2Nhbjsgc2NhbiA9IHNjYW4ucGFyZW50Tm9kZSkNCiAgICAg
			IHsgaWYgKC9Db2RlTWlycm9yLWd1dHRlci13cmFwcGVyLy50ZXN0KHNjYW4uY2xhc3NOYW1lKSkg
			eyByZXR1cm4gdHJ1ZSB9IH0NCiAgICByZXR1cm4gZmFsc2UNCiAgfQ0KDQogIGZ1bmN0aW9uIGJh
			ZFBvcyhwb3MsIGJhZCkgeyBpZiAoYmFkKSB7IHBvcy5iYWQgPSB0cnVlOyB9IHJldHVybiBwb3Mg
			fQ0KDQogIGZ1bmN0aW9uIGRvbVRleHRCZXR3ZWVuKGNtLCBmcm9tLCB0bywgZnJvbUxpbmUsIHRv
			TGluZSkgew0KICAgIHZhciB0ZXh0ID0gIiIsIGNsb3NpbmcgPSBmYWxzZSwgbGluZVNlcCA9IGNt
			LmRvYy5saW5lU2VwYXJhdG9yKCksIGV4dHJhTGluZWJyZWFrID0gZmFsc2U7DQogICAgZnVuY3Rp
			b24gcmVjb2duaXplTWFya2VyKGlkKSB7IHJldHVybiBmdW5jdGlvbiAobWFya2VyKSB7IHJldHVy
			biBtYXJrZXIuaWQgPT0gaWQ7IH0gfQ0KICAgIGZ1bmN0aW9uIGNsb3NlKCkgew0KICAgICAgaWYg
			KGNsb3NpbmcpIHsNCiAgICAgICAgdGV4dCArPSBsaW5lU2VwOw0KICAgICAgICBpZiAoZXh0cmFM
			aW5lYnJlYWspIHsgdGV4dCArPSBsaW5lU2VwOyB9DQogICAgICAgIGNsb3NpbmcgPSBleHRyYUxp
			bmVicmVhayA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBhZGRUZXh0KHN0
			cikgew0KICAgICAgaWYgKHN0cikgew0KICAgICAgICBjbG9zZSgpOw0KICAgICAgICB0ZXh0ICs9
			IHN0cjsNCiAgICAgIH0NCiAgICB9DQogICAgZnVuY3Rpb24gd2Fsayhub2RlKSB7DQogICAgICBp
			ZiAobm9kZS5ub2RlVHlwZSA9PSAxKSB7DQogICAgICAgIHZhciBjbVRleHQgPSBub2RlLmdldEF0
			dHJpYnV0ZSgiY20tdGV4dCIpOw0KICAgICAgICBpZiAoY21UZXh0KSB7DQogICAgICAgICAgYWRk
			VGV4dChjbVRleHQpOw0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICAgIHZhciBt
			YXJrZXJJRCA9IG5vZGUuZ2V0QXR0cmlidXRlKCJjbS1tYXJrZXIiKSwgcmFuZ2UkJDE7DQogICAg
			ICAgIGlmIChtYXJrZXJJRCkgew0KICAgICAgICAgIHZhciBmb3VuZCA9IGNtLmZpbmRNYXJrcyhQ
			b3MoZnJvbUxpbmUsIDApLCBQb3ModG9MaW5lICsgMSwgMCksIHJlY29nbml6ZU1hcmtlcigrbWFy
			a2VySUQpKTsNCiAgICAgICAgICBpZiAoZm91bmQubGVuZ3RoICYmIChyYW5nZSQkMSA9IGZvdW5k
			WzBdLmZpbmQoMCkpKQ0KICAgICAgICAgICAgeyBhZGRUZXh0KGdldEJldHdlZW4oY20uZG9jLCBy
			YW5nZSQkMS5mcm9tLCByYW5nZSQkMS50bykuam9pbihsaW5lU2VwKSk7IH0NCiAgICAgICAgICBy
			ZXR1cm4NCiAgICAgICAgfQ0KICAgICAgICBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoImNvbnRlbnRl
			ZGl0YWJsZSIpID09ICJmYWxzZSIpIHsgcmV0dXJuIH0NCiAgICAgICAgdmFyIGlzQmxvY2sgPSAv
			XihwcmV8ZGl2fHB8bGl8dGFibGV8YnIpJC9pLnRlc3Qobm9kZS5ub2RlTmFtZSk7DQogICAgICAg
			IGlmICghL15iciQvaS50ZXN0KG5vZGUubm9kZU5hbWUpICYmIG5vZGUudGV4dENvbnRlbnQubGVu
			Z3RoID09IDApIHsgcmV0dXJuIH0NCg0KICAgICAgICBpZiAoaXNCbG9jaykgeyBjbG9zZSgpOyB9
			DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsgaSsr
			KQ0KICAgICAgICAgIHsgd2Fsayhub2RlLmNoaWxkTm9kZXNbaV0pOyB9DQoNCiAgICAgICAgaWYg
			KC9eKHByZXxwKSQvaS50ZXN0KG5vZGUubm9kZU5hbWUpKSB7IGV4dHJhTGluZWJyZWFrID0gdHJ1
			ZTsgfQ0KICAgICAgICBpZiAoaXNCbG9jaykgeyBjbG9zaW5nID0gdHJ1ZTsgfQ0KICAgICAgfSBl
			bHNlIGlmIChub2RlLm5vZGVUeXBlID09IDMpIHsNCiAgICAgICAgYWRkVGV4dChub2RlLm5vZGVW
			YWx1ZS5yZXBsYWNlKC9cdTIwMGIvZywgIiIpLnJlcGxhY2UoL1x1MDBhMC9nLCAiICIpKTsNCiAg
			ICAgIH0NCiAgICB9DQogICAgZm9yICg7Oykgew0KICAgICAgd2Fsayhmcm9tKTsNCiAgICAgIGlm
			IChmcm9tID09IHRvKSB7IGJyZWFrIH0NCiAgICAgIGZyb20gPSBmcm9tLm5leHRTaWJsaW5nOw0K
			ICAgICAgZXh0cmFMaW5lYnJlYWsgPSBmYWxzZTsNCiAgICB9DQogICAgcmV0dXJuIHRleHQNCiAg
			fQ0KDQogIGZ1bmN0aW9uIGRvbVRvUG9zKGNtLCBub2RlLCBvZmZzZXQpIHsNCiAgICB2YXIgbGlu
			ZU5vZGU7DQogICAgaWYgKG5vZGUgPT0gY20uZGlzcGxheS5saW5lRGl2KSB7DQogICAgICBsaW5l
			Tm9kZSA9IGNtLmRpc3BsYXkubGluZURpdi5jaGlsZE5vZGVzW29mZnNldF07DQogICAgICBpZiAo
			IWxpbmVOb2RlKSB7IHJldHVybiBiYWRQb3MoY20uY2xpcFBvcyhQb3MoY20uZGlzcGxheS52aWV3
			VG8gLSAxKSksIHRydWUpIH0NCiAgICAgIG5vZGUgPSBudWxsOyBvZmZzZXQgPSAwOw0KICAgIH0g
			ZWxzZSB7DQogICAgICBmb3IgKGxpbmVOb2RlID0gbm9kZTs7IGxpbmVOb2RlID0gbGluZU5vZGUu
			cGFyZW50Tm9kZSkgew0KICAgICAgICBpZiAoIWxpbmVOb2RlIHx8IGxpbmVOb2RlID09IGNtLmRp
			c3BsYXkubGluZURpdikgeyByZXR1cm4gbnVsbCB9DQogICAgICAgIGlmIChsaW5lTm9kZS5wYXJl
			bnROb2RlICYmIGxpbmVOb2RlLnBhcmVudE5vZGUgPT0gY20uZGlzcGxheS5saW5lRGl2KSB7IGJy
			ZWFrIH0NCiAgICAgIH0NCiAgICB9DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbS5kaXNwbGF5
			LnZpZXcubGVuZ3RoOyBpKyspIHsNCiAgICAgIHZhciBsaW5lVmlldyA9IGNtLmRpc3BsYXkudmll
			d1tpXTsNCiAgICAgIGlmIChsaW5lVmlldy5ub2RlID09IGxpbmVOb2RlKQ0KICAgICAgICB7IHJl
			dHVybiBsb2NhdGVOb2RlSW5MaW5lVmlldyhsaW5lVmlldywgbm9kZSwgb2Zmc2V0KSB9DQogICAg
			fQ0KICB9DQoNCiAgZnVuY3Rpb24gbG9jYXRlTm9kZUluTGluZVZpZXcobGluZVZpZXcsIG5vZGUs
			IG9mZnNldCkgew0KICAgIHZhciB3cmFwcGVyID0gbGluZVZpZXcudGV4dC5maXJzdENoaWxkLCBi
			YWQgPSBmYWxzZTsNCiAgICBpZiAoIW5vZGUgfHwgIWNvbnRhaW5zKHdyYXBwZXIsIG5vZGUpKSB7
			IHJldHVybiBiYWRQb3MoUG9zKGxpbmVObyhsaW5lVmlldy5saW5lKSwgMCksIHRydWUpIH0NCiAg
			ICBpZiAobm9kZSA9PSB3cmFwcGVyKSB7DQogICAgICBiYWQgPSB0cnVlOw0KICAgICAgbm9kZSA9
			IHdyYXBwZXIuY2hpbGROb2Rlc1tvZmZzZXRdOw0KICAgICAgb2Zmc2V0ID0gMDsNCiAgICAgIGlm
			ICghbm9kZSkgew0KICAgICAgICB2YXIgbGluZSA9IGxpbmVWaWV3LnJlc3QgPyBsc3QobGluZVZp
			ZXcucmVzdCkgOiBsaW5lVmlldy5saW5lOw0KICAgICAgICByZXR1cm4gYmFkUG9zKFBvcyhsaW5l
			Tm8obGluZSksIGxpbmUudGV4dC5sZW5ndGgpLCBiYWQpDQogICAgICB9DQogICAgfQ0KDQogICAg
			dmFyIHRleHROb2RlID0gbm9kZS5ub2RlVHlwZSA9PSAzID8gbm9kZSA6IG51bGwsIHRvcE5vZGUg
			PSBub2RlOw0KICAgIGlmICghdGV4dE5vZGUgJiYgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA9PSAx
			ICYmIG5vZGUuZmlyc3RDaGlsZC5ub2RlVHlwZSA9PSAzKSB7DQogICAgICB0ZXh0Tm9kZSA9IG5v
			ZGUuZmlyc3RDaGlsZDsNCiAgICAgIGlmIChvZmZzZXQpIHsgb2Zmc2V0ID0gdGV4dE5vZGUubm9k
			ZVZhbHVlLmxlbmd0aDsgfQ0KICAgIH0NCiAgICB3aGlsZSAodG9wTm9kZS5wYXJlbnROb2RlICE9
			IHdyYXBwZXIpIHsgdG9wTm9kZSA9IHRvcE5vZGUucGFyZW50Tm9kZTsgfQ0KICAgIHZhciBtZWFz
			dXJlID0gbGluZVZpZXcubWVhc3VyZSwgbWFwcyA9IG1lYXN1cmUubWFwczsNCg0KICAgIGZ1bmN0
			aW9uIGZpbmQodGV4dE5vZGUsIHRvcE5vZGUsIG9mZnNldCkgew0KICAgICAgZm9yICh2YXIgaSA9
			IC0xOyBpIDwgKG1hcHMgPyBtYXBzLmxlbmd0aCA6IDApOyBpKyspIHsNCiAgICAgICAgdmFyIG1h
			cCQkMSA9IGkgPCAwID8gbWVhc3VyZS5tYXAgOiBtYXBzW2ldOw0KICAgICAgICBmb3IgKHZhciBq
			ID0gMDsgaiA8IG1hcCQkMS5sZW5ndGg7IGogKz0gMykgew0KICAgICAgICAgIHZhciBjdXJOb2Rl
			ID0gbWFwJCQxW2ogKyAyXTsNCiAgICAgICAgICBpZiAoY3VyTm9kZSA9PSB0ZXh0Tm9kZSB8fCBj
			dXJOb2RlID09IHRvcE5vZGUpIHsNCiAgICAgICAgICAgIHZhciBsaW5lID0gbGluZU5vKGkgPCAw
			ID8gbGluZVZpZXcubGluZSA6IGxpbmVWaWV3LnJlc3RbaV0pOw0KICAgICAgICAgICAgdmFyIGNo
			ID0gbWFwJCQxW2pdICsgb2Zmc2V0Ow0KICAgICAgICAgICAgaWYgKG9mZnNldCA8IDAgfHwgY3Vy
			Tm9kZSAhPSB0ZXh0Tm9kZSkgeyBjaCA9IG1hcCQkMVtqICsgKG9mZnNldCA/IDEgOiAwKV07IH0N
			CiAgICAgICAgICAgIHJldHVybiBQb3MobGluZSwgY2gpDQogICAgICAgICAgfQ0KICAgICAgICB9
			DQogICAgICB9DQogICAgfQ0KICAgIHZhciBmb3VuZCA9IGZpbmQodGV4dE5vZGUsIHRvcE5vZGUs
			IG9mZnNldCk7DQogICAgaWYgKGZvdW5kKSB7IHJldHVybiBiYWRQb3MoZm91bmQsIGJhZCkgfQ0K
			DQogICAgLy8gRklYTUUgdGhpcyBpcyBhbGwgcmVhbGx5IHNoYWt5LiBtaWdodCBoYW5kbGUgdGhl
			IGZldyBjYXNlcyBpdCBuZWVkcyB0byBoYW5kbGUsIGJ1dCBsaWtlbHkgdG8gY2F1c2UgcHJvYmxl
			bXMNCiAgICBmb3IgKHZhciBhZnRlciA9IHRvcE5vZGUubmV4dFNpYmxpbmcsIGRpc3QgPSB0ZXh0
			Tm9kZSA/IHRleHROb2RlLm5vZGVWYWx1ZS5sZW5ndGggLSBvZmZzZXQgOiAwOyBhZnRlcjsgYWZ0
			ZXIgPSBhZnRlci5uZXh0U2libGluZykgew0KICAgICAgZm91bmQgPSBmaW5kKGFmdGVyLCBhZnRl
			ci5maXJzdENoaWxkLCAwKTsNCiAgICAgIGlmIChmb3VuZCkNCiAgICAgICAgeyByZXR1cm4gYmFk
			UG9zKFBvcyhmb3VuZC5saW5lLCBmb3VuZC5jaCAtIGRpc3QpLCBiYWQpIH0NCiAgICAgIGVsc2UN
			CiAgICAgICAgeyBkaXN0ICs9IGFmdGVyLnRleHRDb250ZW50Lmxlbmd0aDsgfQ0KICAgIH0NCiAg
			ICBmb3IgKHZhciBiZWZvcmUgPSB0b3BOb2RlLnByZXZpb3VzU2libGluZywgZGlzdCQxID0gb2Zm
			c2V0OyBiZWZvcmU7IGJlZm9yZSA9IGJlZm9yZS5wcmV2aW91c1NpYmxpbmcpIHsNCiAgICAgIGZv
			dW5kID0gZmluZChiZWZvcmUsIGJlZm9yZS5maXJzdENoaWxkLCAtMSk7DQogICAgICBpZiAoZm91
			bmQpDQogICAgICAgIHsgcmV0dXJuIGJhZFBvcyhQb3MoZm91bmQubGluZSwgZm91bmQuY2ggKyBk
			aXN0JDEpLCBiYWQpIH0NCiAgICAgIGVsc2UNCiAgICAgICAgeyBkaXN0JDEgKz0gYmVmb3JlLnRl
			eHRDb250ZW50Lmxlbmd0aDsgfQ0KICAgIH0NCiAgfQ0KDQogIC8vIFRFWFRBUkVBIElOUFVUIFNU
			WUxFDQoNCiAgdmFyIFRleHRhcmVhSW5wdXQgPSBmdW5jdGlvbihjbSkgew0KICAgIHRoaXMuY20g
			PSBjbTsNCiAgICAvLyBTZWUgaW5wdXQucG9sbCBhbmQgaW5wdXQucmVzZXQNCiAgICB0aGlzLnBy
			ZXZJbnB1dCA9ICIiOw0KDQogICAgLy8gRmxhZyB0aGF0IGluZGljYXRlcyB3aGV0aGVyIHdlIGV4
			cGVjdCBpbnB1dCB0byBhcHBlYXIgcmVhbCBzb29uDQogICAgLy8gbm93IChhZnRlciBzb21lIGV2
			ZW50IGxpa2UgJ2tleXByZXNzJyBvciAnaW5wdXQnKSBhbmQgYXJlDQogICAgLy8gcG9sbGluZyBp
			bnRlbnNpdmVseS4NCiAgICB0aGlzLnBvbGxpbmdGYXN0ID0gZmFsc2U7DQogICAgLy8gU2VsZi1y
			ZXNldHRpbmcgdGltZW91dCBmb3IgdGhlIHBvbGxlcg0KICAgIHRoaXMucG9sbGluZyA9IG5ldyBE
			ZWxheWVkKCk7DQogICAgLy8gVXNlZCB0byB3b3JrIGFyb3VuZCBJRSBpc3N1ZSB3aXRoIHNlbGVj
			dGlvbiBiZWluZyBmb3Jnb3R0ZW4gd2hlbiBmb2N1cyBtb3ZlcyBhd2F5IGZyb20gdGV4dGFyZWEN
			CiAgICB0aGlzLmhhc1NlbGVjdGlvbiA9IGZhbHNlOw0KICAgIHRoaXMuY29tcG9zaW5nID0gbnVs
			bDsNCiAgfTsNCg0KICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGRp
			c3BsYXkpIHsNCiAgICAgIHZhciB0aGlzJDEgPSB0aGlzOw0KDQogICAgdmFyIGlucHV0ID0gdGhp
			cywgY20gPSB0aGlzLmNtOw0KICAgIHRoaXMuY3JlYXRlRmllbGQoZGlzcGxheSk7DQogICAgdmFy
			IHRlID0gdGhpcy50ZXh0YXJlYTsNCg0KICAgIGRpc3BsYXkud3JhcHBlci5pbnNlcnRCZWZvcmUo
			dGhpcy53cmFwcGVyLCBkaXNwbGF5LndyYXBwZXIuZmlyc3RDaGlsZCk7DQoNCiAgICAvLyBOZWVk
			ZWQgdG8gaGlkZSBiaWcgYmx1ZSBibGlua2luZyBjdXJzb3Igb24gTW9iaWxlIFNhZmFyaSAoZG9l
			c24ndCBzZWVtIHRvIHdvcmsgaW4gaU9TIDggYW55bW9yZSkNCiAgICBpZiAoaW9zKSB7IHRlLnN0
			eWxlLndpZHRoID0gIjBweCI7IH0NCg0KICAgIG9uKHRlLCAiaW5wdXQiLCBmdW5jdGlvbiAoKSB7
			DQogICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5ICYmIHRoaXMkMS5oYXNTZWxlY3Rpb24p
			IHsgdGhpcyQxLmhhc1NlbGVjdGlvbiA9IG51bGw7IH0NCiAgICAgIGlucHV0LnBvbGwoKTsNCiAg
			ICB9KTsNCg0KICAgIG9uKHRlLCAicGFzdGUiLCBmdW5jdGlvbiAoZSkgew0KICAgICAgaWYgKHNp
			Z25hbERPTUV2ZW50KGNtLCBlKSB8fCBoYW5kbGVQYXN0ZShlLCBjbSkpIHsgcmV0dXJuIH0NCg0K
			ICAgICAgY20uc3RhdGUucGFzdGVJbmNvbWluZyA9ICtuZXcgRGF0ZTsNCiAgICAgIGlucHV0LmZh
			c3RQb2xsKCk7DQogICAgfSk7DQoNCiAgICBmdW5jdGlvbiBwcmVwYXJlQ29weUN1dChlKSB7DQog
			ICAgICBpZiAoc2lnbmFsRE9NRXZlbnQoY20sIGUpKSB7IHJldHVybiB9DQogICAgICBpZiAoY20u
			c29tZXRoaW5nU2VsZWN0ZWQoKSkgew0KICAgICAgICBzZXRMYXN0Q29waWVkKHtsaW5lV2lzZTog
			ZmFsc2UsIHRleHQ6IGNtLmdldFNlbGVjdGlvbnMoKX0pOw0KICAgICAgfSBlbHNlIGlmICghY20u
			b3B0aW9ucy5saW5lV2lzZUNvcHlDdXQpIHsNCiAgICAgICAgcmV0dXJuDQogICAgICB9IGVsc2Ug
			ew0KICAgICAgICB2YXIgcmFuZ2VzID0gY29weWFibGVSYW5nZXMoY20pOw0KICAgICAgICBzZXRM
			YXN0Q29waWVkKHtsaW5lV2lzZTogdHJ1ZSwgdGV4dDogcmFuZ2VzLnRleHR9KTsNCiAgICAgICAg
			aWYgKGUudHlwZSA9PSAiY3V0Iikgew0KICAgICAgICAgIGNtLnNldFNlbGVjdGlvbnMocmFuZ2Vz
			LnJhbmdlcywgbnVsbCwgc2VsX2RvbnRTY3JvbGwpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAg
			ICAgIGlucHV0LnByZXZJbnB1dCA9ICIiOw0KICAgICAgICAgIHRlLnZhbHVlID0gcmFuZ2VzLnRl
			eHQuam9pbigiXG4iKTsNCiAgICAgICAgICBzZWxlY3RJbnB1dCh0ZSk7DQogICAgICAgIH0NCiAg
			ICAgIH0NCiAgICAgIGlmIChlLnR5cGUgPT0gImN1dCIpIHsgY20uc3RhdGUuY3V0SW5jb21pbmcg
			PSArbmV3IERhdGU7IH0NCiAgICB9DQogICAgb24odGUsICJjdXQiLCBwcmVwYXJlQ29weUN1dCk7
			DQogICAgb24odGUsICJjb3B5IiwgcHJlcGFyZUNvcHlDdXQpOw0KDQogICAgb24oZGlzcGxheS5z
			Y3JvbGxlciwgInBhc3RlIiwgZnVuY3Rpb24gKGUpIHsNCiAgICAgIGlmIChldmVudEluV2lkZ2V0
			KGRpc3BsYXksIGUpIHx8IHNpZ25hbERPTUV2ZW50KGNtLCBlKSkgeyByZXR1cm4gfQ0KICAgICAg
			aWYgKCF0ZS5kaXNwYXRjaEV2ZW50KSB7DQogICAgICAgIGNtLnN0YXRlLnBhc3RlSW5jb21pbmcg
			PSArbmV3IERhdGU7DQogICAgICAgIGlucHV0LmZvY3VzKCk7DQogICAgICAgIHJldHVybg0KICAg
			ICAgfQ0KDQogICAgICAvLyBQYXNzIHRoZSBgcGFzdGVgIGV2ZW50IHRvIHRoZSB0ZXh0YXJlYSBz
			byBpdCdzIGhhbmRsZWQgYnkgaXRzIGV2ZW50IGxpc3RlbmVyLg0KICAgICAgdmFyIGV2ZW50ID0g
			bmV3IEV2ZW50KCJwYXN0ZSIpOw0KICAgICAgZXZlbnQuY2xpcGJvYXJkRGF0YSA9IGUuY2xpcGJv
			YXJkRGF0YTsNCiAgICAgIHRlLmRpc3BhdGNoRXZlbnQoZXZlbnQpOw0KICAgIH0pOw0KDQogICAg
			Ly8gUHJldmVudCBub3JtYWwgc2VsZWN0aW9uIGluIHRoZSBlZGl0b3IgKHdlIGhhbmRsZSBvdXIg
			b3duKQ0KICAgIG9uKGRpc3BsYXkubGluZVNwYWNlLCAic2VsZWN0c3RhcnQiLCBmdW5jdGlvbiAo
			ZSkgew0KICAgICAgaWYgKCFldmVudEluV2lkZ2V0KGRpc3BsYXksIGUpKSB7IGVfcHJldmVudERl
			ZmF1bHQoZSk7IH0NCiAgICB9KTsNCg0KICAgIG9uKHRlLCAiY29tcG9zaXRpb25zdGFydCIsIGZ1
			bmN0aW9uICgpIHsNCiAgICAgIHZhciBzdGFydCA9IGNtLmdldEN1cnNvcigiZnJvbSIpOw0KICAg
			ICAgaWYgKGlucHV0LmNvbXBvc2luZykgeyBpbnB1dC5jb21wb3NpbmcucmFuZ2UuY2xlYXIoKTsg
			fQ0KICAgICAgaW5wdXQuY29tcG9zaW5nID0gew0KICAgICAgICBzdGFydDogc3RhcnQsDQogICAg
			ICAgIHJhbmdlOiBjbS5tYXJrVGV4dChzdGFydCwgY20uZ2V0Q3Vyc29yKCJ0byIpLCB7Y2xhc3NO
			YW1lOiAiQ29kZU1pcnJvci1jb21wb3NpbmcifSkNCiAgICAgIH07DQogICAgfSk7DQogICAgb24o
			dGUsICJjb21wb3NpdGlvbmVuZCIsIGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmIChpbnB1dC5jb21w
			b3NpbmcpIHsNCiAgICAgICAgaW5wdXQucG9sbCgpOw0KICAgICAgICBpbnB1dC5jb21wb3Npbmcu
			cmFuZ2UuY2xlYXIoKTsNCiAgICAgICAgaW5wdXQuY29tcG9zaW5nID0gbnVsbDsNCiAgICAgIH0N
			CiAgICB9KTsNCiAgfTsNCg0KICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5jcmVhdGVGaWVsZCA9
			IGZ1bmN0aW9uIChfZGlzcGxheSkgew0KICAgIC8vIFdyYXBzIGFuZCBoaWRlcyBpbnB1dCB0ZXh0
			YXJlYQ0KICAgIHRoaXMud3JhcHBlciA9IGhpZGRlblRleHRhcmVhKCk7DQogICAgLy8gVGhlIHNl
			bWloaWRkZW4gdGV4dGFyZWEgdGhhdCBpcyBmb2N1c2VkIHdoZW4gdGhlIGVkaXRvciBpcw0KICAg
			IC8vIGZvY3VzZWQsIGFuZCByZWNlaXZlcyBpbnB1dC4NCiAgICB0aGlzLnRleHRhcmVhID0gdGhp
			cy53cmFwcGVyLmZpcnN0Q2hpbGQ7DQogIH07DQoNCiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUu
			c2NyZWVuUmVhZGVyTGFiZWxDaGFuZ2VkID0gZnVuY3Rpb24gKGxhYmVsKSB7DQogICAgLy8gTGFi
			ZWwgZm9yIHNjcmVlbnJlYWRlcnMsIGFjY2Vzc2liaWxpdHkNCiAgICBpZihsYWJlbCkgew0KICAg
			ICAgdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBsYWJlbCk7DQogICAg
			fSBlbHNlIHsNCiAgICAgIHRoaXMudGV4dGFyZWEucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWxhYmVs
			Jyk7DQogICAgfQ0KICB9Ow0KDQogIFRleHRhcmVhSW5wdXQucHJvdG90eXBlLnByZXBhcmVTZWxl
			Y3Rpb24gPSBmdW5jdGlvbiAoKSB7DQogICAgLy8gUmVkcmF3IHRoZSBzZWxlY3Rpb24gYW5kL29y
			IGN1cnNvcg0KICAgIHZhciBjbSA9IHRoaXMuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5LCBkb2Mg
			PSBjbS5kb2M7DQogICAgdmFyIHJlc3VsdCA9IHByZXBhcmVTZWxlY3Rpb24oY20pOw0KDQogICAg
			Ly8gTW92ZSB0aGUgaGlkZGVuIHRleHRhcmVhIG5lYXIgdGhlIGN1cnNvciB0byBwcmV2ZW50IHNj
			cm9sbGluZyBhcnRpZmFjdHMNCiAgICBpZiAoY20ub3B0aW9ucy5tb3ZlSW5wdXRXaXRoQ3Vyc29y
			KSB7DQogICAgICB2YXIgaGVhZFBvcyA9IGN1cnNvckNvb3JkcyhjbSwgZG9jLnNlbC5wcmltYXJ5
			KCkuaGVhZCwgImRpdiIpOw0KICAgICAgdmFyIHdyYXBPZmYgPSBkaXNwbGF5LndyYXBwZXIuZ2V0
			Qm91bmRpbmdDbGllbnRSZWN0KCksIGxpbmVPZmYgPSBkaXNwbGF5LmxpbmVEaXYuZ2V0Qm91bmRp
			bmdDbGllbnRSZWN0KCk7DQogICAgICByZXN1bHQudGVUb3AgPSBNYXRoLm1heCgwLCBNYXRoLm1p
			bihkaXNwbGF5LndyYXBwZXIuY2xpZW50SGVpZ2h0IC0gMTAsDQogICAgICAgICAgICAgICAgICAg
			ICAgICAgICAgICAgICAgICAgICAgICBoZWFkUG9zLnRvcCArIGxpbmVPZmYudG9wIC0gd3JhcE9m
			Zi50b3ApKTsNCiAgICAgIHJlc3VsdC50ZUxlZnQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihkaXNw
			bGF5LndyYXBwZXIuY2xpZW50V2lkdGggLSAxMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAg
			ICAgICAgICAgICAgICAgICBoZWFkUG9zLmxlZnQgKyBsaW5lT2ZmLmxlZnQgLSB3cmFwT2ZmLmxl
			ZnQpKTsNCiAgICB9DQoNCiAgICByZXR1cm4gcmVzdWx0DQogIH07DQoNCiAgVGV4dGFyZWFJbnB1
			dC5wcm90b3R5cGUuc2hvd1NlbGVjdGlvbiA9IGZ1bmN0aW9uIChkcmF3bikgew0KICAgIHZhciBj
			bSA9IHRoaXMuY20sIGRpc3BsYXkgPSBjbS5kaXNwbGF5Ow0KICAgIHJlbW92ZUNoaWxkcmVuQW5k
			QWRkKGRpc3BsYXkuY3Vyc29yRGl2LCBkcmF3bi5jdXJzb3JzKTsNCiAgICByZW1vdmVDaGlsZHJl
			bkFuZEFkZChkaXNwbGF5LnNlbGVjdGlvbkRpdiwgZHJhd24uc2VsZWN0aW9uKTsNCiAgICBpZiAo
			ZHJhd24udGVUb3AgIT0gbnVsbCkgew0KICAgICAgdGhpcy53cmFwcGVyLnN0eWxlLnRvcCA9IGRy
			YXduLnRlVG9wICsgInB4IjsNCiAgICAgIHRoaXMud3JhcHBlci5zdHlsZS5sZWZ0ID0gZHJhd24u
			dGVMZWZ0ICsgInB4IjsNCiAgICB9DQogIH07DQoNCiAgLy8gUmVzZXQgdGhlIGlucHV0IHRvIGNv
			cnJlc3BvbmQgdG8gdGhlIHNlbGVjdGlvbiAob3IgdG8gYmUgZW1wdHksDQogIC8vIHdoZW4gbm90
			IHR5cGluZyBhbmQgbm90aGluZyBpcyBzZWxlY3RlZCkNCiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5
			cGUucmVzZXQgPSBmdW5jdGlvbiAodHlwaW5nKSB7DQogICAgaWYgKHRoaXMuY29udGV4dE1lbnVQ
			ZW5kaW5nIHx8IHRoaXMuY29tcG9zaW5nKSB7IHJldHVybiB9DQogICAgdmFyIGNtID0gdGhpcy5j
			bTsNCiAgICBpZiAoY20uc29tZXRoaW5nU2VsZWN0ZWQoKSkgew0KICAgICAgdGhpcy5wcmV2SW5w
			dXQgPSAiIjsNCiAgICAgIHZhciBjb250ZW50ID0gY20uZ2V0U2VsZWN0aW9uKCk7DQogICAgICB0
			aGlzLnRleHRhcmVhLnZhbHVlID0gY29udGVudDsNCiAgICAgIGlmIChjbS5zdGF0ZS5mb2N1c2Vk
			KSB7IHNlbGVjdElucHV0KHRoaXMudGV4dGFyZWEpOyB9DQogICAgICBpZiAoaWUgJiYgaWVfdmVy
			c2lvbiA+PSA5KSB7IHRoaXMuaGFzU2VsZWN0aW9uID0gY29udGVudDsgfQ0KICAgIH0gZWxzZSBp
			ZiAoIXR5cGluZykgew0KICAgICAgdGhpcy5wcmV2SW5wdXQgPSB0aGlzLnRleHRhcmVhLnZhbHVl
			ID0gIiI7DQogICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KSB7IHRoaXMuaGFzU2VsZWN0
			aW9uID0gbnVsbDsgfQ0KICAgIH0NCiAgfTsNCg0KICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5n
			ZXRGaWVsZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMudGV4dGFyZWEgfTsNCg0KICBUZXh0
			YXJlYUlucHV0LnByb3RvdHlwZS5zdXBwb3J0c1RvdWNoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4g
			ZmFsc2UgfTsNCg0KICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5mb2N1cyA9IGZ1bmN0aW9uICgp
			IHsNCiAgICBpZiAodGhpcy5jbS5vcHRpb25zLnJlYWRPbmx5ICE9ICJub2N1cnNvciIgJiYgKCFt
			b2JpbGUgfHwgYWN0aXZlRWx0KCkgIT0gdGhpcy50ZXh0YXJlYSkpIHsNCiAgICAgIHRyeSB7IHRo
			aXMudGV4dGFyZWEuZm9jdXMoKTsgfQ0KICAgICAgY2F0Y2ggKGUpIHt9IC8vIElFOCB3aWxsIHRo
			cm93IGlmIHRoZSB0ZXh0YXJlYSBpcyBkaXNwbGF5OiBub25lIG9yIG5vdCBpbiBET00NCiAgICB9
			DQogIH07DQoNCiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuYmx1ciA9IGZ1bmN0aW9uICgpIHsg
			dGhpcy50ZXh0YXJlYS5ibHVyKCk7IH07DQoNCiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUucmVz
			ZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHsNCiAgICB0aGlzLndyYXBwZXIuc3R5bGUudG9wID0g
			dGhpcy53cmFwcGVyLnN0eWxlLmxlZnQgPSAwOw0KICB9Ow0KDQogIFRleHRhcmVhSW5wdXQucHJv
			dG90eXBlLnJlY2VpdmVkRm9jdXMgPSBmdW5jdGlvbiAoKSB7IHRoaXMuc2xvd1BvbGwoKTsgfTsN
			Cg0KICAvLyBQb2xsIGZvciBpbnB1dCBjaGFuZ2VzLCB1c2luZyB0aGUgbm9ybWFsIHJhdGUgb2Yg
			cG9sbGluZy4gVGhpcw0KICAvLyBydW5zIGFzIGxvbmcgYXMgdGhlIGVkaXRvciBpcyBmb2N1c2Vk
			Lg0KICBUZXh0YXJlYUlucHV0LnByb3RvdHlwZS5zbG93UG9sbCA9IGZ1bmN0aW9uICgpIHsNCiAg
			ICAgIHZhciB0aGlzJDEgPSB0aGlzOw0KDQogICAgaWYgKHRoaXMucG9sbGluZ0Zhc3QpIHsgcmV0
			dXJuIH0NCiAgICB0aGlzLnBvbGxpbmcuc2V0KHRoaXMuY20ub3B0aW9ucy5wb2xsSW50ZXJ2YWws
			IGZ1bmN0aW9uICgpIHsNCiAgICAgIHRoaXMkMS5wb2xsKCk7DQogICAgICBpZiAodGhpcyQxLmNt
			LnN0YXRlLmZvY3VzZWQpIHsgdGhpcyQxLnNsb3dQb2xsKCk7IH0NCiAgICB9KTsNCiAgfTsNCg0K
			ICAvLyBXaGVuIGFuIGV2ZW50IGhhcyBqdXN0IGNvbWUgaW4gdGhhdCBpcyBsaWtlbHkgdG8gYWRk
			IG9yIGNoYW5nZQ0KICAvLyBzb21ldGhpbmcgaW4gdGhlIGlucHV0IHRleHRhcmVhLCB3ZSBwb2xs
			IGZhc3RlciwgdG8gZW5zdXJlIHRoYXQNCiAgLy8gdGhlIGNoYW5nZSBhcHBlYXJzIG9uIHRoZSBz
			Y3JlZW4gcXVpY2tseS4NCiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUuZmFzdFBvbGwgPSBmdW5j
			dGlvbiAoKSB7DQogICAgdmFyIG1pc3NlZCA9IGZhbHNlLCBpbnB1dCA9IHRoaXM7DQogICAgaW5w
			dXQucG9sbGluZ0Zhc3QgPSB0cnVlOw0KICAgIGZ1bmN0aW9uIHAoKSB7DQogICAgICB2YXIgY2hh
			bmdlZCA9IGlucHV0LnBvbGwoKTsNCiAgICAgIGlmICghY2hhbmdlZCAmJiAhbWlzc2VkKSB7bWlz
			c2VkID0gdHJ1ZTsgaW5wdXQucG9sbGluZy5zZXQoNjAsIHApO30NCiAgICAgIGVsc2Uge2lucHV0
			LnBvbGxpbmdGYXN0ID0gZmFsc2U7IGlucHV0LnNsb3dQb2xsKCk7fQ0KICAgIH0NCiAgICBpbnB1
			dC5wb2xsaW5nLnNldCgyMCwgcCk7DQogIH07DQoNCiAgLy8gUmVhZCBpbnB1dCBmcm9tIHRoZSB0
			ZXh0YXJlYSwgYW5kIHVwZGF0ZSB0aGUgZG9jdW1lbnQgdG8gbWF0Y2guDQogIC8vIFdoZW4gc29t
			ZXRoaW5nIGlzIHNlbGVjdGVkLCBpdCBpcyBwcmVzZW50IGluIHRoZSB0ZXh0YXJlYSwgYW5kDQog
			IC8vIHNlbGVjdGVkICh1bmxlc3MgaXQgaXMgaHVnZSwgaW4gd2hpY2ggY2FzZSBhIHBsYWNlaG9s
			ZGVyIGlzDQogIC8vIHVzZWQpLiBXaGVuIG5vdGhpbmcgaXMgc2VsZWN0ZWQsIHRoZSBjdXJzb3Ig
			c2l0cyBhZnRlciBwcmV2aW91c2x5DQogIC8vIHNlZW4gdGV4dCAoY2FuIGJlIGVtcHR5KSwgd2hp
			Y2ggaXMgc3RvcmVkIGluIHByZXZJbnB1dCAod2UgbXVzdA0KICAvLyBub3QgcmVzZXQgdGhlIHRl
			eHRhcmVhIHdoZW4gdHlwaW5nLCBiZWNhdXNlIHRoYXQgYnJlYWtzIElNRSkuDQogIFRleHRhcmVh
			SW5wdXQucHJvdG90eXBlLnBvbGwgPSBmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgdGhpcyQxID0g
			dGhpczsNCg0KICAgIHZhciBjbSA9IHRoaXMuY20sIGlucHV0ID0gdGhpcy50ZXh0YXJlYSwgcHJl
			dklucHV0ID0gdGhpcy5wcmV2SW5wdXQ7DQogICAgLy8gU2luY2UgdGhpcyBpcyBjYWxsZWQgYSAq
			bG90KiwgdHJ5IHRvIGJhaWwgb3V0IGFzIGNoZWFwbHkgYXMNCiAgICAvLyBwb3NzaWJsZSB3aGVu
			IGl0IGlzIGNsZWFyIHRoYXQgbm90aGluZyBoYXBwZW5lZC4gaGFzU2VsZWN0aW9uDQogICAgLy8g
			d2lsbCBiZSB0aGUgY2FzZSB3aGVuIHRoZXJlIGlzIGEgbG90IG9mIHRleHQgaW4gdGhlIHRleHRh
			cmVhLA0KICAgIC8vIGluIHdoaWNoIGNhc2UgcmVhZGluZyBpdHMgdmFsdWUgd291bGQgYmUgZXhw
			ZW5zaXZlLg0KICAgIGlmICh0aGlzLmNvbnRleHRNZW51UGVuZGluZyB8fCAhY20uc3RhdGUuZm9j
			dXNlZCB8fA0KICAgICAgICAoaGFzU2VsZWN0aW9uKGlucHV0KSAmJiAhcHJldklucHV0ICYmICF0
			aGlzLmNvbXBvc2luZykgfHwNCiAgICAgICAgY20uaXNSZWFkT25seSgpIHx8IGNtLm9wdGlvbnMu
			ZGlzYWJsZUlucHV0IHx8IGNtLnN0YXRlLmtleVNlcSkNCiAgICAgIHsgcmV0dXJuIGZhbHNlIH0N
			Cg0KICAgIHZhciB0ZXh0ID0gaW5wdXQudmFsdWU7DQogICAgLy8gSWYgbm90aGluZyBjaGFuZ2Vk
			LCBiYWlsLg0KICAgIGlmICh0ZXh0ID09IHByZXZJbnB1dCAmJiAhY20uc29tZXRoaW5nU2VsZWN0
			ZWQoKSkgeyByZXR1cm4gZmFsc2UgfQ0KICAgIC8vIFdvcmsgYXJvdW5kIG5vbnNlbnNpY2FsIHNl
			bGVjdGlvbiByZXNldHRpbmcgaW4gSUU5LzEwLCBhbmQNCiAgICAvLyBpbmV4cGxpY2FibGUgYXBw
			ZWFyYW5jZSBvZiBwcml2YXRlIGFyZWEgdW5pY29kZSBjaGFyYWN0ZXJzIG9uDQogICAgLy8gc29t
			ZSBrZXkgY29tYm9zIGluIE1hYyAoIzI2ODkpLg0KICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uID49
			IDkgJiYgdGhpcy5oYXNTZWxlY3Rpb24gPT09IHRleHQgfHwNCiAgICAgICAgbWFjICYmIC9bXHVm
			NzAwLVx1ZjdmZl0vLnRlc3QodGV4dCkpIHsNCiAgICAgIGNtLmRpc3BsYXkuaW5wdXQucmVzZXQo
			KTsNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCg0KICAgIGlmIChjbS5kb2Muc2VsID09IGNt
			LmRpc3BsYXkuc2VsRm9yQ29udGV4dE1lbnUpIHsNCiAgICAgIHZhciBmaXJzdCA9IHRleHQuY2hh
			ckNvZGVBdCgwKTsNCiAgICAgIGlmIChmaXJzdCA9PSAweDIwMGIgJiYgIXByZXZJbnB1dCkgeyBw
			cmV2SW5wdXQgPSAiXHUyMDBiIjsgfQ0KICAgICAgaWYgKGZpcnN0ID09IDB4MjFkYSkgeyB0aGlz
			LnJlc2V0KCk7IHJldHVybiB0aGlzLmNtLmV4ZWNDb21tYW5kKCJ1bmRvIikgfQ0KICAgIH0NCiAg
			ICAvLyBGaW5kIHRoZSBwYXJ0IG9mIHRoZSBpbnB1dCB0aGF0IGlzIGFjdHVhbGx5IG5ldw0KICAg
			IHZhciBzYW1lID0gMCwgbCA9IE1hdGgubWluKHByZXZJbnB1dC5sZW5ndGgsIHRleHQubGVuZ3Ro
			KTsNCiAgICB3aGlsZSAoc2FtZSA8IGwgJiYgcHJldklucHV0LmNoYXJDb2RlQXQoc2FtZSkgPT0g
			dGV4dC5jaGFyQ29kZUF0KHNhbWUpKSB7ICsrc2FtZTsgfQ0KDQogICAgcnVuSW5PcChjbSwgZnVu
			Y3Rpb24gKCkgew0KICAgICAgYXBwbHlUZXh0SW5wdXQoY20sIHRleHQuc2xpY2Uoc2FtZSksIHBy
			ZXZJbnB1dC5sZW5ndGggLSBzYW1lLA0KICAgICAgICAgICAgICAgICAgICAgbnVsbCwgdGhpcyQx
			LmNvbXBvc2luZyA/ICIqY29tcG9zZSIgOiBudWxsKTsNCg0KICAgICAgLy8gRG9uJ3QgbGVhdmUg
			bG9uZyB0ZXh0IGluIHRoZSB0ZXh0YXJlYSwgc2luY2UgaXQgbWFrZXMgZnVydGhlciBwb2xsaW5n
			IHNsb3cNCiAgICAgIGlmICh0ZXh0Lmxlbmd0aCA+IDEwMDAgfHwgdGV4dC5pbmRleE9mKCJcbiIp
			ID4gLTEpIHsgaW5wdXQudmFsdWUgPSB0aGlzJDEucHJldklucHV0ID0gIiI7IH0NCiAgICAgIGVs
			c2UgeyB0aGlzJDEucHJldklucHV0ID0gdGV4dDsgfQ0KDQogICAgICBpZiAodGhpcyQxLmNvbXBv
			c2luZykgew0KICAgICAgICB0aGlzJDEuY29tcG9zaW5nLnJhbmdlLmNsZWFyKCk7DQogICAgICAg
			IHRoaXMkMS5jb21wb3NpbmcucmFuZ2UgPSBjbS5tYXJrVGV4dCh0aGlzJDEuY29tcG9zaW5nLnN0
			YXJ0LCBjbS5nZXRDdXJzb3IoInRvIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
			ICAgICAgICAgICAge2NsYXNzTmFtZTogIkNvZGVNaXJyb3ItY29tcG9zaW5nIn0pOw0KICAgICAg
			fQ0KICAgIH0pOw0KICAgIHJldHVybiB0cnVlDQogIH07DQoNCiAgVGV4dGFyZWFJbnB1dC5wcm90
			b3R5cGUuZW5zdXJlUG9sbGVkID0gZnVuY3Rpb24gKCkgew0KICAgIGlmICh0aGlzLnBvbGxpbmdG
			YXN0ICYmIHRoaXMucG9sbCgpKSB7IHRoaXMucG9sbGluZ0Zhc3QgPSBmYWxzZTsgfQ0KICB9Ow0K
			DQogIFRleHRhcmVhSW5wdXQucHJvdG90eXBlLm9uS2V5UHJlc3MgPSBmdW5jdGlvbiAoKSB7DQog
			ICAgaWYgKGllICYmIGllX3ZlcnNpb24gPj0gOSkgeyB0aGlzLmhhc1NlbGVjdGlvbiA9IG51bGw7
			IH0NCiAgICB0aGlzLmZhc3RQb2xsKCk7DQogIH07DQoNCiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5
			cGUub25Db250ZXh0TWVudSA9IGZ1bmN0aW9uIChlKSB7DQogICAgdmFyIGlucHV0ID0gdGhpcywg
			Y20gPSBpbnB1dC5jbSwgZGlzcGxheSA9IGNtLmRpc3BsYXksIHRlID0gaW5wdXQudGV4dGFyZWE7
			DQogICAgaWYgKGlucHV0LmNvbnRleHRNZW51UGVuZGluZykgeyBpbnB1dC5jb250ZXh0TWVudVBl
			bmRpbmcoKTsgfQ0KICAgIHZhciBwb3MgPSBwb3NGcm9tTW91c2UoY20sIGUpLCBzY3JvbGxQb3Mg
			PSBkaXNwbGF5LnNjcm9sbGVyLnNjcm9sbFRvcDsNCiAgICBpZiAoIXBvcyB8fCBwcmVzdG8pIHsg
			cmV0dXJuIH0gLy8gT3BlcmEgaXMgZGlmZmljdWx0Lg0KDQogICAgLy8gUmVzZXQgdGhlIGN1cnJl
			bnQgdGV4dCBzZWxlY3Rpb24gb25seSBpZiB0aGUgY2xpY2sgaXMgZG9uZSBvdXRzaWRlIG9mIHRo
			ZSBzZWxlY3Rpb24NCiAgICAvLyBhbmQgJ3Jlc2V0U2VsZWN0aW9uT25Db250ZXh0TWVudScgb3B0
			aW9uIGlzIHRydWUuDQogICAgdmFyIHJlc2V0ID0gY20ub3B0aW9ucy5yZXNldFNlbGVjdGlvbk9u
			Q29udGV4dE1lbnU7DQogICAgaWYgKHJlc2V0ICYmIGNtLmRvYy5zZWwuY29udGFpbnMocG9zKSA9
			PSAtMSkNCiAgICAgIHsgb3BlcmF0aW9uKGNtLCBzZXRTZWxlY3Rpb24pKGNtLmRvYywgc2ltcGxl
			U2VsZWN0aW9uKHBvcyksIHNlbF9kb250U2Nyb2xsKTsgfQ0KDQogICAgdmFyIG9sZENTUyA9IHRl
			LnN0eWxlLmNzc1RleHQsIG9sZFdyYXBwZXJDU1MgPSBpbnB1dC53cmFwcGVyLnN0eWxlLmNzc1Rl
			eHQ7DQogICAgdmFyIHdyYXBwZXJCb3ggPSBpbnB1dC53cmFwcGVyLm9mZnNldFBhcmVudC5nZXRC
			b3VuZGluZ0NsaWVudFJlY3QoKTsNCiAgICBpbnB1dC53cmFwcGVyLnN0eWxlLmNzc1RleHQgPSAi
			cG9zaXRpb246IHN0YXRpYyI7DQogICAgdGUuc3R5bGUuY3NzVGV4dCA9ICJwb3NpdGlvbjogYWJz
			b2x1dGU7IHdpZHRoOiAzMHB4OyBoZWlnaHQ6IDMwcHg7XG4gICAgICB0b3A6ICIgKyAoZS5jbGll
			bnRZIC0gd3JhcHBlckJveC50b3AgLSA1KSArICJweDsgbGVmdDogIiArIChlLmNsaWVudFggLSB3
			cmFwcGVyQm94LmxlZnQgLSA1KSArICJweDtcbiAgICAgIHotaW5kZXg6IDEwMDA7IGJhY2tncm91
			bmQ6ICIgKyAoaWUgPyAicmdiYSgyNTUsIDI1NSwgMjU1LCAuMDUpIiA6ICJ0cmFuc3BhcmVudCIp
			ICsgIjtcbiAgICAgIG91dGxpbmU6IG5vbmU7IGJvcmRlci13aWR0aDogMDsgb3V0bGluZTogbm9u
			ZTsgb3ZlcmZsb3c6IGhpZGRlbjsgb3BhY2l0eTogLjA1OyBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9
			NSk7IjsNCiAgICB2YXIgb2xkU2Nyb2xsWTsNCiAgICBpZiAod2Via2l0KSB7IG9sZFNjcm9sbFkg
			PSB3aW5kb3cuc2Nyb2xsWTsgfSAvLyBXb3JrIGFyb3VuZCBDaHJvbWUgaXNzdWUgKCMyNzEyKQ0K
			ICAgIGRpc3BsYXkuaW5wdXQuZm9jdXMoKTsNCiAgICBpZiAod2Via2l0KSB7IHdpbmRvdy5zY3Jv
			bGxUbyhudWxsLCBvbGRTY3JvbGxZKTsgfQ0KICAgIGRpc3BsYXkuaW5wdXQucmVzZXQoKTsNCiAg
			ICAvLyBBZGRzICJTZWxlY3QgYWxsIiB0byBjb250ZXh0IG1lbnUgaW4gRkYNCiAgICBpZiAoIWNt
			LnNvbWV0aGluZ1NlbGVjdGVkKCkpIHsgdGUudmFsdWUgPSBpbnB1dC5wcmV2SW5wdXQgPSAiICI7
			IH0NCiAgICBpbnB1dC5jb250ZXh0TWVudVBlbmRpbmcgPSByZWhpZGU7DQogICAgZGlzcGxheS5z
			ZWxGb3JDb250ZXh0TWVudSA9IGNtLmRvYy5zZWw7DQogICAgY2xlYXJUaW1lb3V0KGRpc3BsYXku
			ZGV0ZWN0aW5nU2VsZWN0QWxsKTsNCg0KICAgIC8vIFNlbGVjdC1hbGwgd2lsbCBiZSBncmV5ZWQg
			b3V0IGlmIHRoZXJlJ3Mgbm90aGluZyB0byBzZWxlY3QsIHNvDQogICAgLy8gdGhpcyBhZGRzIGEg
			emVyby13aWR0aCBzcGFjZSBzbyB0aGF0IHdlIGNhbiBsYXRlciBjaGVjayB3aGV0aGVyDQogICAg
			Ly8gaXQgZ290IHNlbGVjdGVkLg0KICAgIGZ1bmN0aW9uIHByZXBhcmVTZWxlY3RBbGxIYWNrKCkg
			ew0KICAgICAgaWYgKHRlLnNlbGVjdGlvblN0YXJ0ICE9IG51bGwpIHsNCiAgICAgICAgdmFyIHNl
			bGVjdGVkID0gY20uc29tZXRoaW5nU2VsZWN0ZWQoKTsNCiAgICAgICAgdmFyIGV4dHZhbCA9ICJc
			dTIwMGIiICsgKHNlbGVjdGVkID8gdGUudmFsdWUgOiAiIik7DQogICAgICAgIHRlLnZhbHVlID0g
			Ilx1MjFkYSI7IC8vIFVzZWQgdG8gY2F0Y2ggY29udGV4dC1tZW51IHVuZG8NCiAgICAgICAgdGUu
			dmFsdWUgPSBleHR2YWw7DQogICAgICAgIGlucHV0LnByZXZJbnB1dCA9IHNlbGVjdGVkID8gIiIg
			OiAiXHUyMDBiIjsNCiAgICAgICAgdGUuc2VsZWN0aW9uU3RhcnQgPSAxOyB0ZS5zZWxlY3Rpb25F
			bmQgPSBleHR2YWwubGVuZ3RoOw0KICAgICAgICAvLyBSZS1zZXQgdGhpcywgaW4gY2FzZSBzb21l
			IG90aGVyIGhhbmRsZXIgdG91Y2hlZCB0aGUNCiAgICAgICAgLy8gc2VsZWN0aW9uIGluIHRoZSBt
			ZWFudGltZS4NCiAgICAgICAgZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9IGNtLmRvYy5zZWw7
			DQogICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHJlaGlkZSgpIHsNCiAgICAgIGlmIChpbnB1
			dC5jb250ZXh0TWVudVBlbmRpbmcgIT0gcmVoaWRlKSB7IHJldHVybiB9DQogICAgICBpbnB1dC5j
			b250ZXh0TWVudVBlbmRpbmcgPSBmYWxzZTsNCiAgICAgIGlucHV0LndyYXBwZXIuc3R5bGUuY3Nz
			VGV4dCA9IG9sZFdyYXBwZXJDU1M7DQogICAgICB0ZS5zdHlsZS5jc3NUZXh0ID0gb2xkQ1NTOw0K
			ICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPCA5KSB7IGRpc3BsYXkuc2Nyb2xsYmFycy5zZXRT
			Y3JvbGxUb3AoZGlzcGxheS5zY3JvbGxlci5zY3JvbGxUb3AgPSBzY3JvbGxQb3MpOyB9DQoNCiAg
			ICAgIC8vIFRyeSB0byBkZXRlY3QgdGhlIHVzZXIgY2hvb3Npbmcgc2VsZWN0LWFsbA0KICAgICAg
			aWYgKHRlLnNlbGVjdGlvblN0YXJ0ICE9IG51bGwpIHsNCiAgICAgICAgaWYgKCFpZSB8fCAoaWUg
			JiYgaWVfdmVyc2lvbiA8IDkpKSB7IHByZXBhcmVTZWxlY3RBbGxIYWNrKCk7IH0NCiAgICAgICAg
			dmFyIGkgPSAwLCBwb2xsID0gZnVuY3Rpb24gKCkgew0KICAgICAgICAgIGlmIChkaXNwbGF5LnNl
			bEZvckNvbnRleHRNZW51ID09IGNtLmRvYy5zZWwgJiYgdGUuc2VsZWN0aW9uU3RhcnQgPT0gMCAm
			Jg0KICAgICAgICAgICAgICB0ZS5zZWxlY3Rpb25FbmQgPiAwICYmIGlucHV0LnByZXZJbnB1dCA9
			PSAiXHUyMDBiIikgew0KICAgICAgICAgICAgb3BlcmF0aW9uKGNtLCBzZWxlY3RBbGwpKGNtKTsN
			CiAgICAgICAgICB9IGVsc2UgaWYgKGkrKyA8IDEwKSB7DQogICAgICAgICAgICBkaXNwbGF5LmRl
			dGVjdGluZ1NlbGVjdEFsbCA9IHNldFRpbWVvdXQocG9sbCwgNTAwKTsNCiAgICAgICAgICB9IGVs
			c2Ugew0KICAgICAgICAgICAgZGlzcGxheS5zZWxGb3JDb250ZXh0TWVudSA9IG51bGw7DQogICAg
			ICAgICAgICBkaXNwbGF5LmlucHV0LnJlc2V0KCk7DQogICAgICAgICAgfQ0KICAgICAgICB9Ow0K
			ICAgICAgICBkaXNwbGF5LmRldGVjdGluZ1NlbGVjdEFsbCA9IHNldFRpbWVvdXQocG9sbCwgMjAw
			KTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA+PSA5KSB7IHBy
			ZXBhcmVTZWxlY3RBbGxIYWNrKCk7IH0NCiAgICBpZiAoY2FwdHVyZVJpZ2h0Q2xpY2spIHsNCiAg
			ICAgIGVfc3RvcChlKTsNCiAgICAgIHZhciBtb3VzZXVwID0gZnVuY3Rpb24gKCkgew0KICAgICAg
			ICBvZmYod2luZG93LCAibW91c2V1cCIsIG1vdXNldXApOw0KICAgICAgICBzZXRUaW1lb3V0KHJl
			aGlkZSwgMjApOw0KICAgICAgfTsNCiAgICAgIG9uKHdpbmRvdywgIm1vdXNldXAiLCBtb3VzZXVw
			KTsNCiAgICB9IGVsc2Ugew0KICAgICAgc2V0VGltZW91dChyZWhpZGUsIDUwKTsNCiAgICB9DQog
			IH07DQoNCiAgVGV4dGFyZWFJbnB1dC5wcm90b3R5cGUucmVhZE9ubHlDaGFuZ2VkID0gZnVuY3Rp
			b24gKHZhbCkgew0KICAgIGlmICghdmFsKSB7IHRoaXMucmVzZXQoKTsgfQ0KICAgIHRoaXMudGV4
			dGFyZWEuZGlzYWJsZWQgPSB2YWwgPT0gIm5vY3Vyc29yIjsNCiAgfTsNCg0KICBUZXh0YXJlYUlu
			cHV0LnByb3RvdHlwZS5zZXRVbmVkaXRhYmxlID0gZnVuY3Rpb24gKCkge307DQoNCiAgVGV4dGFy
			ZWFJbnB1dC5wcm90b3R5cGUubmVlZHNDb250ZW50QXR0cmlidXRlID0gZmFsc2U7DQoNCiAgZnVu
			Y3Rpb24gZnJvbVRleHRBcmVhKHRleHRhcmVhLCBvcHRpb25zKSB7DQogICAgb3B0aW9ucyA9IG9w
			dGlvbnMgPyBjb3B5T2JqKG9wdGlvbnMpIDoge307DQogICAgb3B0aW9ucy52YWx1ZSA9IHRleHRh
			cmVhLnZhbHVlOw0KICAgIGlmICghb3B0aW9ucy50YWJpbmRleCAmJiB0ZXh0YXJlYS50YWJJbmRl
			eCkNCiAgICAgIHsgb3B0aW9ucy50YWJpbmRleCA9IHRleHRhcmVhLnRhYkluZGV4OyB9DQogICAg
			aWYgKCFvcHRpb25zLnBsYWNlaG9sZGVyICYmIHRleHRhcmVhLnBsYWNlaG9sZGVyKQ0KICAgICAg
			eyBvcHRpb25zLnBsYWNlaG9sZGVyID0gdGV4dGFyZWEucGxhY2Vob2xkZXI7IH0NCiAgICAvLyBT
			ZXQgYXV0b2ZvY3VzIHRvIHRydWUgaWYgdGhpcyB0ZXh0YXJlYSBpcyBmb2N1c2VkLCBvciBpZiBp
			dCBoYXMNCiAgICAvLyBhdXRvZm9jdXMgYW5kIG5vIG90aGVyIGVsZW1lbnQgaXMgZm9jdXNlZC4N
			CiAgICBpZiAob3B0aW9ucy5hdXRvZm9jdXMgPT0gbnVsbCkgew0KICAgICAgdmFyIGhhc0ZvY3Vz
			ID0gYWN0aXZlRWx0KCk7DQogICAgICBvcHRpb25zLmF1dG9mb2N1cyA9IGhhc0ZvY3VzID09IHRl
			eHRhcmVhIHx8DQogICAgICAgIHRleHRhcmVhLmdldEF0dHJpYnV0ZSgiYXV0b2ZvY3VzIikgIT0g
			bnVsbCAmJiBoYXNGb2N1cyA9PSBkb2N1bWVudC5ib2R5Ow0KICAgIH0NCg0KICAgIGZ1bmN0aW9u
			IHNhdmUoKSB7dGV4dGFyZWEudmFsdWUgPSBjbS5nZXRWYWx1ZSgpO30NCg0KICAgIHZhciByZWFs
			U3VibWl0Ow0KICAgIGlmICh0ZXh0YXJlYS5mb3JtKSB7DQogICAgICBvbih0ZXh0YXJlYS5mb3Jt
			LCAic3VibWl0Iiwgc2F2ZSk7DQogICAgICAvLyBEZXBsb3JhYmxlIGhhY2sgdG8gbWFrZSB0aGUg
			c3VibWl0IG1ldGhvZCBkbyB0aGUgcmlnaHQgdGhpbmcuDQogICAgICBpZiAoIW9wdGlvbnMubGVh
			dmVTdWJtaXRNZXRob2RBbG9uZSkgew0KICAgICAgICB2YXIgZm9ybSA9IHRleHRhcmVhLmZvcm07
			DQogICAgICAgIHJlYWxTdWJtaXQgPSBmb3JtLnN1Ym1pdDsNCiAgICAgICAgdHJ5IHsNCiAgICAg
			ICAgICB2YXIgd3JhcHBlZFN1Ym1pdCA9IGZvcm0uc3VibWl0ID0gZnVuY3Rpb24gKCkgew0KICAg
			ICAgICAgICAgc2F2ZSgpOw0KICAgICAgICAgICAgZm9ybS5zdWJtaXQgPSByZWFsU3VibWl0Ow0K
			ICAgICAgICAgICAgZm9ybS5zdWJtaXQoKTsNCiAgICAgICAgICAgIGZvcm0uc3VibWl0ID0gd3Jh
			cHBlZFN1Ym1pdDsNCiAgICAgICAgICB9Ow0KICAgICAgICB9IGNhdGNoKGUpIHt9DQogICAgICB9
			DQogICAgfQ0KDQogICAgb3B0aW9ucy5maW5pc2hJbml0ID0gZnVuY3Rpb24gKGNtKSB7DQogICAg
			ICBjbS5zYXZlID0gc2F2ZTsNCiAgICAgIGNtLmdldFRleHRBcmVhID0gZnVuY3Rpb24gKCkgeyBy
			ZXR1cm4gdGV4dGFyZWE7IH07DQogICAgICBjbS50b1RleHRBcmVhID0gZnVuY3Rpb24gKCkgew0K
			ICAgICAgICBjbS50b1RleHRBcmVhID0gaXNOYU47IC8vIFByZXZlbnQgdGhpcyBmcm9tIGJlaW5n
			IHJhbiB0d2ljZQ0KICAgICAgICBzYXZlKCk7DQogICAgICAgIHRleHRhcmVhLnBhcmVudE5vZGUu
			cmVtb3ZlQ2hpbGQoY20uZ2V0V3JhcHBlckVsZW1lbnQoKSk7DQogICAgICAgIHRleHRhcmVhLnN0
			eWxlLmRpc3BsYXkgPSAiIjsNCiAgICAgICAgaWYgKHRleHRhcmVhLmZvcm0pIHsNCiAgICAgICAg
			ICBvZmYodGV4dGFyZWEuZm9ybSwgInN1Ym1pdCIsIHNhdmUpOw0KICAgICAgICAgIGlmICghb3B0
			aW9ucy5sZWF2ZVN1Ym1pdE1ldGhvZEFsb25lICYmIHR5cGVvZiB0ZXh0YXJlYS5mb3JtLnN1Ym1p
			dCA9PSAiZnVuY3Rpb24iKQ0KICAgICAgICAgICAgeyB0ZXh0YXJlYS5mb3JtLnN1Ym1pdCA9IHJl
			YWxTdWJtaXQ7IH0NCiAgICAgICAgfQ0KICAgICAgfTsNCiAgICB9Ow0KDQogICAgdGV4dGFyZWEu
			c3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICB2YXIgY20gPSBDb2RlTWlycm9yKGZ1bmN0aW9u
			IChub2RlKSB7IHJldHVybiB0ZXh0YXJlYS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCB0
			ZXh0YXJlYS5uZXh0U2libGluZyk7IH0sDQogICAgICBvcHRpb25zKTsNCiAgICByZXR1cm4gY20N
			CiAgfQ0KDQogIGZ1bmN0aW9uIGFkZExlZ2FjeVByb3BzKENvZGVNaXJyb3IpIHsNCiAgICBDb2Rl
			TWlycm9yLm9mZiA9IG9mZjsNCiAgICBDb2RlTWlycm9yLm9uID0gb247DQogICAgQ29kZU1pcnJv
			ci53aGVlbEV2ZW50UGl4ZWxzID0gd2hlZWxFdmVudFBpeGVsczsNCiAgICBDb2RlTWlycm9yLkRv
			YyA9IERvYzsNCiAgICBDb2RlTWlycm9yLnNwbGl0TGluZXMgPSBzcGxpdExpbmVzQXV0bzsNCiAg
			ICBDb2RlTWlycm9yLmNvdW50Q29sdW1uID0gY291bnRDb2x1bW47DQogICAgQ29kZU1pcnJvci5m
			aW5kQ29sdW1uID0gZmluZENvbHVtbjsNCiAgICBDb2RlTWlycm9yLmlzV29yZENoYXIgPSBpc1dv
			cmRDaGFyQmFzaWM7DQogICAgQ29kZU1pcnJvci5QYXNzID0gUGFzczsNCiAgICBDb2RlTWlycm9y
			LnNpZ25hbCA9IHNpZ25hbDsNCiAgICBDb2RlTWlycm9yLkxpbmUgPSBMaW5lOw0KICAgIENvZGVN
			aXJyb3IuY2hhbmdlRW5kID0gY2hhbmdlRW5kOw0KICAgIENvZGVNaXJyb3Iuc2Nyb2xsYmFyTW9k
			ZWwgPSBzY3JvbGxiYXJNb2RlbDsNCiAgICBDb2RlTWlycm9yLlBvcyA9IFBvczsNCiAgICBDb2Rl
			TWlycm9yLmNtcFBvcyA9IGNtcDsNCiAgICBDb2RlTWlycm9yLm1vZGVzID0gbW9kZXM7DQogICAg
			Q29kZU1pcnJvci5taW1lTW9kZXMgPSBtaW1lTW9kZXM7DQogICAgQ29kZU1pcnJvci5yZXNvbHZl
			TW9kZSA9IHJlc29sdmVNb2RlOw0KICAgIENvZGVNaXJyb3IuZ2V0TW9kZSA9IGdldE1vZGU7DQog
			ICAgQ29kZU1pcnJvci5tb2RlRXh0ZW5zaW9ucyA9IG1vZGVFeHRlbnNpb25zOw0KICAgIENvZGVN
			aXJyb3IuZXh0ZW5kTW9kZSA9IGV4dGVuZE1vZGU7DQogICAgQ29kZU1pcnJvci5jb3B5U3RhdGUg
			PSBjb3B5U3RhdGU7DQogICAgQ29kZU1pcnJvci5zdGFydFN0YXRlID0gc3RhcnRTdGF0ZTsNCiAg
			ICBDb2RlTWlycm9yLmlubmVyTW9kZSA9IGlubmVyTW9kZTsNCiAgICBDb2RlTWlycm9yLmNvbW1h
			bmRzID0gY29tbWFuZHM7DQogICAgQ29kZU1pcnJvci5rZXlNYXAgPSBrZXlNYXA7DQogICAgQ29k
			ZU1pcnJvci5rZXlOYW1lID0ga2V5TmFtZTsNCiAgICBDb2RlTWlycm9yLmlzTW9kaWZpZXJLZXkg
			PSBpc01vZGlmaWVyS2V5Ow0KICAgIENvZGVNaXJyb3IubG9va3VwS2V5ID0gbG9va3VwS2V5Ow0K
			ICAgIENvZGVNaXJyb3Iubm9ybWFsaXplS2V5TWFwID0gbm9ybWFsaXplS2V5TWFwOw0KICAgIENv
			ZGVNaXJyb3IuU3RyaW5nU3RyZWFtID0gU3RyaW5nU3RyZWFtOw0KICAgIENvZGVNaXJyb3IuU2hh
			cmVkVGV4dE1hcmtlciA9IFNoYXJlZFRleHRNYXJrZXI7DQogICAgQ29kZU1pcnJvci5UZXh0TWFy
			a2VyID0gVGV4dE1hcmtlcjsNCiAgICBDb2RlTWlycm9yLkxpbmVXaWRnZXQgPSBMaW5lV2lkZ2V0
			Ow0KICAgIENvZGVNaXJyb3IuZV9wcmV2ZW50RGVmYXVsdCA9IGVfcHJldmVudERlZmF1bHQ7DQog
			ICAgQ29kZU1pcnJvci5lX3N0b3BQcm9wYWdhdGlvbiA9IGVfc3RvcFByb3BhZ2F0aW9uOw0KICAg
			IENvZGVNaXJyb3IuZV9zdG9wID0gZV9zdG9wOw0KICAgIENvZGVNaXJyb3IuYWRkQ2xhc3MgPSBh
			ZGRDbGFzczsNCiAgICBDb2RlTWlycm9yLmNvbnRhaW5zID0gY29udGFpbnM7DQogICAgQ29kZU1p
			cnJvci5ybUNsYXNzID0gcm1DbGFzczsNCiAgICBDb2RlTWlycm9yLmtleU5hbWVzID0ga2V5TmFt
			ZXM7DQogIH0NCg0KICAvLyBFRElUT1IgQ09OU1RSVUNUT1INCg0KICBkZWZpbmVPcHRpb25zKENv
			ZGVNaXJyb3IpOw0KDQogIGFkZEVkaXRvck1ldGhvZHMoQ29kZU1pcnJvcik7DQoNCiAgLy8gU2V0
			IHVwIG1ldGhvZHMgb24gQ29kZU1pcnJvcidzIHByb3RvdHlwZSB0byByZWRpcmVjdCB0byB0aGUg
			ZWRpdG9yJ3MgZG9jdW1lbnQuDQogIHZhciBkb250RGVsZWdhdGUgPSAiaXRlciBpbnNlcnQgcmVt
			b3ZlIGNvcHkgZ2V0RWRpdG9yIGNvbnN0cnVjdG9yIi5zcGxpdCgiICIpOw0KICBmb3IgKHZhciBw
			cm9wIGluIERvYy5wcm90b3R5cGUpIHsgaWYgKERvYy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHko
			cHJvcCkgJiYgaW5kZXhPZihkb250RGVsZWdhdGUsIHByb3ApIDwgMCkNCiAgICB7IENvZGVNaXJy
			b3IucHJvdG90eXBlW3Byb3BdID0gKGZ1bmN0aW9uKG1ldGhvZCkgew0KICAgICAgcmV0dXJuIGZ1
			bmN0aW9uKCkge3JldHVybiBtZXRob2QuYXBwbHkodGhpcy5kb2MsIGFyZ3VtZW50cyl9DQogICAg
			fSkoRG9jLnByb3RvdHlwZVtwcm9wXSk7IH0gfQ0KDQogIGV2ZW50TWl4aW4oRG9jKTsNCiAgQ29k
			ZU1pcnJvci5pbnB1dFN0eWxlcyA9IHsidGV4dGFyZWEiOiBUZXh0YXJlYUlucHV0LCAiY29udGVu
			dGVkaXRhYmxlIjogQ29udGVudEVkaXRhYmxlSW5wdXR9Ow0KDQogIC8vIEV4dHJhIGFyZ3VtZW50
			cyBhcmUgc3RvcmVkIGFzIHRoZSBtb2RlJ3MgZGVwZW5kZW5jaWVzLCB3aGljaCBpcw0KICAvLyB1
			c2VkIGJ5IChsZWdhY3kpIG1lY2hhbmlzbXMgbGlrZSBsb2FkbW9kZS5qcyB0byBhdXRvbWF0aWNh
			bGx5DQogIC8vIGxvYWQgYSBtb2RlLiAoUHJlZmVycmVkIG1lY2hhbmlzbSBpcyB0aGUgcmVxdWly
			ZS9kZWZpbmUgY2FsbHMuKQ0KICBDb2RlTWlycm9yLmRlZmluZU1vZGUgPSBmdW5jdGlvbihuYW1l
			LyosIG1vZGUsIMOi4oKswqYqLykgew0KICAgIGlmICghQ29kZU1pcnJvci5kZWZhdWx0cy5tb2Rl
			ICYmIG5hbWUgIT0gIm51bGwiKSB7IENvZGVNaXJyb3IuZGVmYXVsdHMubW9kZSA9IG5hbWU7IH0N
			CiAgICBkZWZpbmVNb2RlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogIH07DQoNCiAgQ29kZU1p
			cnJvci5kZWZpbmVNSU1FID0gZGVmaW5lTUlNRTsNCg0KICAvLyBNaW5pbWFsIGRlZmF1bHQgbW9k
			ZS4NCiAgQ29kZU1pcnJvci5kZWZpbmVNb2RlKCJudWxsIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4g
			KHt0b2tlbjogZnVuY3Rpb24gKHN0cmVhbSkgeyByZXR1cm4gc3RyZWFtLnNraXBUb0VuZCgpOyB9
			fSk7IH0pOw0KICBDb2RlTWlycm9yLmRlZmluZU1JTUUoInRleHQvcGxhaW4iLCAibnVsbCIpOw0K
			DQogIC8vIEVYVEVOU0lPTlMNCg0KICBDb2RlTWlycm9yLmRlZmluZUV4dGVuc2lvbiA9IGZ1bmN0
			aW9uIChuYW1lLCBmdW5jKSB7DQogICAgQ29kZU1pcnJvci5wcm90b3R5cGVbbmFtZV0gPSBmdW5j
			Ow0KICB9Ow0KICBDb2RlTWlycm9yLmRlZmluZURvY0V4dGVuc2lvbiA9IGZ1bmN0aW9uIChuYW1l
			LCBmdW5jKSB7DQogICAgRG9jLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmM7DQogIH07DQoNCiAgQ29k
			ZU1pcnJvci5mcm9tVGV4dEFyZWEgPSBmcm9tVGV4dEFyZWE7DQoNCiAgYWRkTGVnYWN5UHJvcHMo
			Q29kZU1pcnJvcik7DQoNCiAgQ29kZU1pcnJvci52ZXJzaW9uID0gIjUuNTMuMiI7DQoNCiAgcmV0
			dXJuIENvZGVNaXJyb3I7DQoNCn0pKSk7
		</Resource>
		<Resource ID="25634bc0-f478-460c-bdcd-29c38d0c3f6c" Type="css" Name="dialog.css">
			LkNvZGVNaXJyb3ItZGlhbG9nIHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICBsZWZ0OiAwOyBy
			aWdodDogMDsNCiAgYmFja2dyb3VuZDogaW5oZXJpdDsNCiAgei1pbmRleDogMTU7DQogIHBhZGRp
			bmc6IC4xZW0gLjhlbTsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgY29sb3I6IGluaGVyaXQ7DQp9
			DQoNCi5Db2RlTWlycm9yLWRpYWxvZy10b3Agew0KICBib3JkZXItYm90dG9tOiAxcHggc29saWQg
			I2VlZTsNCiAgdG9wOiAwOw0KfQ0KDQouQ29kZU1pcnJvci1kaWFsb2ctYm90dG9tIHsNCiAgYm9y
			ZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7DQogIGJvdHRvbTogMDsNCn0NCg0KLkNvZGVNaXJyb3It
			ZGlhbG9nIGlucHV0IHsNCiAgYm9yZGVyOiBub25lOw0KICBvdXRsaW5lOiBub25lOw0KICBiYWNr
			Z3JvdW5kOiB0cmFuc3BhcmVudDsNCiAgd2lkdGg6IDIwZW07DQogIGNvbG9yOiBpbmhlcml0Ow0K
			ICBmb250LWZhbWlseTogbW9ub3NwYWNlOw0KfQ0KDQouQ29kZU1pcnJvci1kaWFsb2cgYnV0dG9u
			IHsNCiAgZm9udC1zaXplOiA3MCU7DQp9
		</Resource>
		<Resource ID="2a2d2448-2e13-b0bb-8a81-17014fba35bd" Type="png" Name="Icon">
			iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJ
			bWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdp
			bj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6
			eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0
			NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJo
			dHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlw
			dGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAv
			IiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RS
			ZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpD
			cmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNl
			SUQ9InhtcC5paWQ6MkNGM0JEMURGRDhCMTFFMTgyOTJFMzAxM0NFMjgxMDciIHhtcE1NOkRvY3Vt
			ZW50SUQ9InhtcC5kaWQ6MkNGM0JEMUVGRDhCMTFFMTgyOTJFMzAxM0NFMjgxMDciPiA8eG1wTU06
			RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyQ0YzQkQxQkZEOEIxMUUxODI5
			MkUzMDEzQ0UyODEwNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyQ0YzQkQxQ0ZEOEIxMUUx
			ODI5MkUzMDEzQ0UyODEwNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1w
			bWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvPxTuMAAAUKSURBVHja7JpPaCNVHMd/L50k/U+73Vqa
			GC91jeBS2LQ1qbWuhe0lJw8LHjwI4kWLh6Kr0ENLCxbWdU+yelFREGFhBS/1siK4PbSFUqSIYNZA
			yV9Lu9u60abpv/F9X/omMyGbpklIpksePCbzZubl95nf+/1+7zfvMdKViYmJ5xwOxzcul+tSR0dH
			vcViIVVVRa1mYYyJenR0RJubm8lwOLwcj8ffnp2dDWj3yB8zMzM3+vv7308kEmxra4t2dnbo4ODA
			VCCKolBTUxO1t7dTc3Ozury8fHNycvKaBjI1NXWjt7f3g0gkQqlUivb39wXE4eGheAtmAMHoqKur
			EzBWq5Xq6+vJ6XTS6urqp9PT09fY+Pj48x6P54/19XW2t7dHsgLCjCCodrtdwNhsNurq6lJXVlYu
			Kq2trV/qIXZ3d2lhYYGCwaA4N1OB4D09PTQ4OKi9XMje1tb2lcLp+jGcMJRQl5aWaG1tTaiuoaHB
			VCAQHrJBGz6fT2gKbXy4ebjGLHb98InFYoIcN5mtQCbIFgqFNDAMfz7cbAoMWw+CCzkhnnUTvXLF
			2Pbfv0S3vz1ZgtffJGpqNrbd+5norz+LAoK8EgQVDIpslAaVD0L1v0YUvJ9uO9dBlNwh9neM6Ne7
			j//Xy6OkDr1K1NBI9PBBuq3nQsbvFwGTLSsYFBDJBlzMWSQEOvno3XTbW2OiTX3vQ2J5QHBdPPfT
			j0Rf30q33bkrnmVFgmTLCgaLnjKnINc/1zTBro5mLnCh2Gef5NfEnTSguO8YQpyjH96feBG8/1Js
			RgMryfp+/y0/TAVLaSAPNvLbx5kBMVGpgTxZIB5vSV6noiBsZSkdBBEAeewwuNcrfhHccpZoKB07
			4MK9L4v7tYJ+0B9cOvovQ1FOvINPQeCtEZ1FEAsGMsL1XspE+uyCQIfqfkHcp+qyOBGXYpE0RCFT
			nLKASBg+FUGUlpFaFLxRGekfp1F+XQy/F18ilVet/Yfvy+q6lYLv5H/Kivzjk2BrXqsGUgM5ZUqL
			af7xzFn/uzzGXsmU9jhdAIAhdSgJJFeaeppUVx9Ei+2jHCAqn4aI6L2b5NE6krlQYKorM0vaephJ
			dfUlvEbl+MxR+NDiEIZ4UGCqqw2XhXuGLNE8xq5LdYUxXh6tql09Me63Yl5L5ZNHlm34mICWab5V
			OffLnQNgDHYDj3XWNGJeY69NUcwGglQXWSIdfw6Nhs6I18JaiS5WGFLdAsa+ev4pYrliTeIRURny
			9sJBHE8b09wCU12tZKW6hj7KDZLrQ3apaWqhs9dT95slq6K/YJZVKu0r/tVRw2+DcWftARALPWiU
			1Uz5SD6NQlbILqsFy1aSDBppbGw0vauFjHIhFBWLuZbt7W1Vrqej9PX1mR7E6/WKI2SG7IlEQrXE
			4/F/cCKXp4eGhmhkZERslTBbgUyQbWBgQJMXssdisUfM7XZ/5/f738BuAmyPwPKvy+Wizs5OoULs
			NJC2U2lnIA0Zbx5CJ5NJ2tjYoHA4LDYzoA3Dam5u7jZzOBzPcMHvDw8P2+TGFVklRDU9mrQDOYyk
			JuSGn/n5+T0OdkFI193d/Y7T6bzl8/kYNKP3YhKgmiDyqPdS0MTi4qIajUbHuHl8oUnHYcasVutN
			PtTs2HXT0tIiNFJNiGwYeFhu2GJ3RiAQSPHzcUAIGfUPcAAnV9/H/MERXp28qc5U37sYS/FDjB9/
			4S95imsjKq/9L8AAJ/6bZaasazgAAAAASUVORK5CYII=
		</Resource>
		<Resource ID="3b92e99a-bae2-fecd-a5fc-39bcf6e535bf" Type="js" Name="codemirror.js">
			Ly8gQ29kZU1pcnJvciB2ZXJzaW9uIDIuMjIKLy8KLy8gQWxsIGZ1bmN0aW9ucyB0aGF0IG5lZWQg
			YWNjZXNzIHRvIHRoZSBlZGl0b3IncyBzdGF0ZSBsaXZlIGluc2lkZQovLyB0aGUgQ29kZU1pcnJv
			ciBmdW5jdGlvbi4gQmVsb3cgdGhhdCwgYXQgdGhlIGJvdHRvbSBvZiB0aGUgZmlsZSwKLy8gc29t
			ZSB1dGlsaXRpZXMgYXJlIGRlZmluZWQuCgovLyBDb2RlTWlycm9yIGlzIHRoZSBvbmx5IGdsb2Jh
			bCB2YXIgd2UgY2xhaW0KdmFyIENvZGVNaXJyb3IgPSAoZnVuY3Rpb24oKSB7CiAgLy8gVGhpcyBp
			cyB0aGUgZnVuY3Rpb24gdGhhdCBwcm9kdWNlcyBhbiBlZGl0b3IgaW5zdGFuY2UuIEl0cwogIC8v
			IGNsb3N1cmUgaXMgdXNlZCB0byBzdG9yZSB0aGUgZWRpdG9yIHN0YXRlLgogIGZ1bmN0aW9uIENv
			ZGVNaXJyb3IocGxhY2UsIGdpdmVuT3B0aW9ucykgewogICAgLy8gRGV0ZXJtaW5lIGVmZmVjdGl2
			ZSBvcHRpb25zIGJhc2VkIG9uIGdpdmVuIHZhbHVlcyBhbmQgZGVmYXVsdHMuCiAgICB2YXIgb3B0
			aW9ucyA9IHt9LCBkZWZhdWx0cyA9IENvZGVNaXJyb3IuZGVmYXVsdHM7CiAgICBmb3IgKHZhciBv
			cHQgaW4gZGVmYXVsdHMpCiAgICAgIGlmIChkZWZhdWx0cy5oYXNPd25Qcm9wZXJ0eShvcHQpKQog
			ICAgICAgIG9wdGlvbnNbb3B0XSA9IChnaXZlbk9wdGlvbnMgJiYgZ2l2ZW5PcHRpb25zLmhhc093
			blByb3BlcnR5KG9wdCkgPyBnaXZlbk9wdGlvbnMgOiBkZWZhdWx0cylbb3B0XTsKCiAgICB2YXIg
			dGFyZ2V0RG9jdW1lbnQgPSBvcHRpb25zWyJkb2N1bWVudCJdOwogICAgLy8gVGhlIGVsZW1lbnQg
			aW4gd2hpY2ggdGhlIGVkaXRvciBsaXZlcy4KICAgIHZhciB3cmFwcGVyID0gdGFyZ2V0RG9jdW1l
			bnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICB3cmFwcGVyLmNsYXNzTmFtZSA9ICJDb2RlTWly
			cm9yIiArIChvcHRpb25zLmxpbmVXcmFwcGluZyA/ICIgQ29kZU1pcnJvci13cmFwIiA6ICIiKTsK
			ICAgIC8vIFRoaXMgbWVzcyBjcmVhdGVzIHRoZSBiYXNlIERPTSBzdHJ1Y3R1cmUgZm9yIHRoZSBl
			ZGl0b3IuCiAgICB3cmFwcGVyLmlubmVySFRNTCA9CiAgICAgICc8ZGl2IHN0eWxlPSJvdmVyZmxv
			dzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7IHdpZHRoOiAzcHg7IGhlaWdodDogMHB4OyI+
			JyArIC8vIFdyYXBzIGFuZCBoaWRlcyBpbnB1dCB0ZXh0YXJlYQogICAgICAgICc8dGV4dGFyZWEg
			c3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgcGFkZGluZzogMDsgd2lkdGg6IDFweDsgaGVpZ2h0
			OiAxZW0iIHdyYXA9Im9mZiIgJyArCiAgICAgICAgICAnYXV0b2NvcnJlY3Q9Im9mZiIgYXV0b2Nh
			cGl0YWxpemU9Im9mZiI+PC90ZXh0YXJlYT48L2Rpdj4nICsKICAgICAgJzxkaXYgY2xhc3M9IkNv
			ZGVNaXJyb3Itc2Nyb2xsIiB0YWJpbmRleD0iLTEiPicgKwogICAgICAgICc8ZGl2IHN0eWxlPSJw
			b3NpdGlvbjogcmVsYXRpdmUiPicgKyAvLyBTZXQgdG8gdGhlIGhlaWdodCBvZiB0aGUgdGV4dCwg
			Y2F1c2VzIHNjcm9sbGluZwogICAgICAgICAgJzxkaXYgc3R5bGU9InBvc2l0aW9uOiByZWxhdGl2
			ZSI+JyArIC8vIE1vdmVkIGFyb3VuZCBpdHMgcGFyZW50IHRvIGNvdmVyIHZpc2libGUgdmlldwog
			ICAgICAgICAgICAnPGRpdiBjbGFzcz0iQ29kZU1pcnJvci1ndXR0ZXIiPjxkaXYgY2xhc3M9IkNv
			ZGVNaXJyb3ItZ3V0dGVyLXRleHQiPjwvZGl2PjwvZGl2PicgKwogICAgICAgICAgICAvLyBQcm92
			aWRlcyBwb3NpdGlvbmluZyByZWxhdGl2ZSB0byAodmlzaWJsZSkgdGV4dCBvcmlnaW4KICAgICAg
			ICAgICAgJzxkaXYgY2xhc3M9IkNvZGVNaXJyb3ItbGluZXMiPjxkaXYgc3R5bGU9InBvc2l0aW9u
			OiByZWxhdGl2ZTsgei1pbmRleDogMCI+JyArCiAgICAgICAgICAgICAgJzxkaXYgc3R5bGU9InBv
			c2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7IGhlaWdodDogMDsgb3ZlcmZsb3c6IGhpZGRl
			bjsgdmlzaWJpbGl0eTogaGlkZGVuOyI+PC9kaXY+JyArCiAgICAgICAgICAgICAgJzxwcmUgY2xh
			c3M9IkNvZGVNaXJyb3ItY3Vyc29yIj4mIzE2MDs8L3ByZT4nICsgLy8gQWJzb2x1dGVseSBwb3Np
			dGlvbmVkIGJsaW5reSBjdXJzb3IKICAgICAgICAgICAgICAnPGRpdiBzdHlsZT0icG9zaXRpb246
			IHJlbGF0aXZlOyB6LWluZGV4OiAtMSI+PC9kaXY+PGRpdj48L2Rpdj4nICsgLy8gRElWcyBjb250
			YWluaW5nIHRoZSBzZWxlY3Rpb24gYW5kIHRoZSBhY3R1YWwgY29kZQogICAgICAgICAgICAnPC9k
			aXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+JzsKICAgIGlmIChwbGFjZS5hcHBlbmRDaGlsZCkg
			cGxhY2UuYXBwZW5kQ2hpbGQod3JhcHBlcik7IGVsc2UgcGxhY2Uod3JhcHBlcik7CiAgICAvLyBJ
			J3ZlIG5ldmVyIHNlZW4gbW9yZSBlbGVnYW50IGNvZGUgaW4gbXkgbGlmZS4KICAgIHZhciBpbnB1
			dERpdiA9IHdyYXBwZXIuZmlyc3RDaGlsZCwgaW5wdXQgPSBpbnB1dERpdi5maXJzdENoaWxkLAog
			ICAgICAgIHNjcm9sbGVyID0gd3JhcHBlci5sYXN0Q2hpbGQsIGNvZGUgPSBzY3JvbGxlci5maXJz
			dENoaWxkLAogICAgICAgIG1vdmVyID0gY29kZS5maXJzdENoaWxkLCBndXR0ZXIgPSBtb3Zlci5m
			aXJzdENoaWxkLCBndXR0ZXJUZXh0ID0gZ3V0dGVyLmZpcnN0Q2hpbGQsCiAgICAgICAgbGluZVNw
			YWNlID0gZ3V0dGVyLm5leHRTaWJsaW5nLmZpcnN0Q2hpbGQsIG1lYXN1cmUgPSBsaW5lU3BhY2Uu
			Zmlyc3RDaGlsZCwKICAgICAgICBjdXJzb3IgPSBtZWFzdXJlLm5leHRTaWJsaW5nLCBzZWxlY3Rp
			b25EaXYgPSBjdXJzb3IubmV4dFNpYmxpbmcsCiAgICAgICAgbGluZURpdiA9IHNlbGVjdGlvbkRp
			di5uZXh0U2libGluZzsKICAgIHRoZW1lQ2hhbmdlZCgpOwogICAgLy8gTmVlZGVkIHRvIGhpZGUg
			YmlnIGJsdWUgYmxpbmtpbmcgY3Vyc29yIG9uIE1vYmlsZSBTYWZhcmkKICAgIGlmIChpb3MpIGlu
			cHV0LnN0eWxlLndpZHRoID0gIjBweCI7CiAgICBpZiAoIXdlYmtpdCkgbGluZVNwYWNlLmRyYWdn
			YWJsZSA9IHRydWU7CiAgICBsaW5lU3BhY2Uuc3R5bGUub3V0bGluZSA9ICJub25lIjsKICAgIGlm
			IChvcHRpb25zLnRhYmluZGV4ICE9IG51bGwpIGlucHV0LnRhYkluZGV4ID0gb3B0aW9ucy50YWJp
			bmRleDsKICAgIGlmICghb3B0aW9ucy5ndXR0ZXIgJiYgIW9wdGlvbnMubGluZU51bWJlcnMpIGd1
			dHRlci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoKICAgIC8vIENoZWNrIGZvciBwcm9ibGVtIHdp
			dGggSUUgaW5uZXJIVE1MIG5vdCB3b3JraW5nIHdoZW4gd2UgaGF2ZSBhCiAgICAvLyBQIChvciBz
			aW1pbGFyKSBwYXJlbnQgbm9kZS4KICAgIHRyeSB7IHN0cmluZ1dpZHRoKCJ4Iik7IH0KICAgIGNh
			dGNoIChlKSB7CiAgICAgIGlmIChlLm1lc3NhZ2UubWF0Y2goL3J1bnRpbWUvaSkpCiAgICAgICAg
			ZSA9IG5ldyBFcnJvcigiQSBDb2RlTWlycm9yIGluc2lkZSBhIFAtc3R5bGUgZWxlbWVudCBkb2Vz
			IG5vdCB3b3JrIGluIEludGVybmV0IEV4cGxvcmVyLiAoaW5uZXJIVE1MIGJ1ZykiKTsKICAgICAg
			dGhyb3cgZTsKICAgIH0KCiAgICAvLyBEZWxheWVkIG9iamVjdCB3cmFwIHRpbWVvdXRzLCBtYWtp
			bmcgc3VyZSBvbmx5IG9uZSBpcyBhY3RpdmUuIGJsaW5rZXIgaG9sZHMgYW4gaW50ZXJ2YWwuCiAg
			ICB2YXIgcG9sbCA9IG5ldyBEZWxheWVkKCksIGhpZ2hsaWdodCA9IG5ldyBEZWxheWVkKCksIGJs
			aW5rZXI7CgogICAgLy8gbW9kZSBob2xkcyBhIG1vZGUgQVBJIG9iamVjdC4gZG9jIGlzIHRoZSB0
			cmVlIG9mIExpbmUgb2JqZWN0cywKICAgIC8vIHdvcmsgYW4gYXJyYXkgb2YgbGluZXMgdGhhdCBz
			aG91bGQgYmUgcGFyc2VkLCBhbmQgaGlzdG9yeSB0aGUKICAgIC8vIHVuZG8gaGlzdG9yeSAoaW5z
			dGFuY2Ugb2YgSGlzdG9yeSBjb25zdHJ1Y3RvcikuCiAgICB2YXIgbW9kZSwgZG9jID0gbmV3IEJy
			YW5jaENodW5rKFtuZXcgTGVhZkNodW5rKFtuZXcgTGluZSgiIildKV0pLCB3b3JrLCBmb2N1c2Vk
			OwogICAgbG9hZE1vZGUoKTsKICAgIC8vIFRoZSBzZWxlY3Rpb24uIFRoZXNlIGFyZSBhbHdheXMg
			bWFpbnRhaW5lZCB0byBwb2ludCBhdCB2YWxpZAogICAgLy8gcG9zaXRpb25zLiBJbnZlcnRlZCBp
			cyB1c2VkIHRvIHJlbWVtYmVyIHRoYXQgdGhlIHVzZXIgaXMKICAgIC8vIHNlbGVjdGluZyBib3R0
			b20tdG8tdG9wLgogICAgdmFyIHNlbCA9IHtmcm9tOiB7bGluZTogMCwgY2g6IDB9LCB0bzoge2xp
			bmU6IDAsIGNoOiAwfSwgaW52ZXJ0ZWQ6IGZhbHNlfTsKICAgIC8vIFNlbGVjdGlvbi1yZWxhdGVk
			IGZsYWdzLiBzaGlmdFNlbGVjdGluZyBvYnZpb3VzbHkgdHJhY2tzCiAgICAvLyB3aGV0aGVyIHRo
			ZSB1c2VyIGlzIGhvbGRpbmcgc2hpZnQuCiAgICB2YXIgc2hpZnRTZWxlY3RpbmcsIGxhc3RDbGlj
			aywgbGFzdERvdWJsZUNsaWNrLCBsYXN0U2Nyb2xsUG9zID0gMCwgZHJhZ2dpbmdUZXh0LAogICAg
			ICAgIG92ZXJ3cml0ZSA9IGZhbHNlLCBzdXBwcmVzc0VkaXRzID0gZmFsc2U7CiAgICAvLyBWYXJp
			YWJsZXMgdXNlZCBieSBzdGFydE9wZXJhdGlvbi9lbmRPcGVyYXRpb24gdG8gdHJhY2sgd2hhdAog
			ICAgLy8gaGFwcGVuZWQgZHVyaW5nIHRoZSBvcGVyYXRpb24uCiAgICB2YXIgdXBkYXRlSW5wdXQs
			IHVzZXJTZWxDaGFuZ2UsIGNoYW5nZXMsIHRleHRDaGFuZ2VkLCBzZWxlY3Rpb25DaGFuZ2VkLCBs
			ZWF2ZUlucHV0QWxvbmUsCiAgICAgICAgZ3V0dGVyRGlydHksIGNhbGxiYWNrczsKICAgIC8vIEN1
			cnJlbnQgdmlzaWJsZSByYW5nZSAobWF5IGJlIGJpZ2dlciB0aGFuIHRoZSB2aWV3IHdpbmRvdyku
			CiAgICB2YXIgZGlzcGxheU9mZnNldCA9IDAsIHNob3dpbmdGcm9tID0gMCwgc2hvd2luZ1RvID0g
			MCwgbGFzdFNpemVDID0gMDsKICAgIC8vIGJyYWNrZXRIaWdobGlnaHRlZCBpcyB1c2VkIHRvIHJl
			bWVtYmVyIHRoYXQgYSBiYWNrZXQgaGFzIGJlZW4KICAgIC8vIG1hcmtlZC4KICAgIHZhciBicmFj
			a2V0SGlnaGxpZ2h0ZWQ7CiAgICAvLyBUcmFja3MgdGhlIG1heGltdW0gbGluZSBsZW5ndGggc28g
			dGhhdCB0aGUgaG9yaXpvbnRhbCBzY3JvbGxiYXIKICAgIC8vIGNhbiBiZSBrZXB0IHN0YXRpYyB3
			aGVuIHNjcm9sbGluZy4KICAgIHZhciBtYXhMaW5lID0gIiIsIG1heFdpZHRoOwoKICAgIC8vIElu
			aXRpYWxpemUgdGhlIGNvbnRlbnQuCiAgICBvcGVyYXRpb24oZnVuY3Rpb24oKXtzZXRWYWx1ZShv
			cHRpb25zLnZhbHVlIHx8ICIiKTsgdXBkYXRlSW5wdXQgPSBmYWxzZTt9KSgpOwogICAgdmFyIGhp
			c3RvcnkgPSBuZXcgSGlzdG9yeSgpOwoKICAgIC8vIFJlZ2lzdGVyIG91ciBldmVudCBoYW5kbGVy
			cy4KICAgIGNvbm5lY3Qoc2Nyb2xsZXIsICJtb3VzZWRvd24iLCBvcGVyYXRpb24ob25Nb3VzZURv
			d24pKTsKICAgIGNvbm5lY3Qoc2Nyb2xsZXIsICJkYmxjbGljayIsIG9wZXJhdGlvbihvbkRvdWJs
			ZUNsaWNrKSk7CiAgICBjb25uZWN0KGxpbmVTcGFjZSwgImRyYWdzdGFydCIsIG9uRHJhZ1N0YXJ0
			KTsKICAgIGNvbm5lY3QobGluZVNwYWNlLCAic2VsZWN0c3RhcnQiLCBlX3ByZXZlbnREZWZhdWx0
			KTsKICAgIC8vIEdlY2tvIGJyb3dzZXJzIGZpcmUgY29udGV4dG1lbnUgKmFmdGVyKiBvcGVuaW5n
			IHRoZSBtZW51LCBhdAogICAgLy8gd2hpY2ggcG9pbnQgd2UgY2FuJ3QgbWVzcyB3aXRoIGl0IGFu
			eW1vcmUuIENvbnRleHQgbWVudSBpcwogICAgLy8gaGFuZGxlZCBpbiBvbk1vdXNlRG93biBmb3Ig
			R2Vja28uCiAgICBpZiAoIWdlY2tvKSBjb25uZWN0KHNjcm9sbGVyLCAiY29udGV4dG1lbnUiLCBv
			bkNvbnRleHRNZW51KTsKICAgIGNvbm5lY3Qoc2Nyb2xsZXIsICJzY3JvbGwiLCBmdW5jdGlvbigp
			IHsKICAgICAgbGFzdFNjcm9sbFBvcyA9IHNjcm9sbGVyLnNjcm9sbFRvcDsKICAgICAgdXBkYXRl
			RGlzcGxheShbXSk7CiAgICAgIGlmIChvcHRpb25zLmZpeGVkR3V0dGVyKSBndXR0ZXIuc3R5bGUu
			bGVmdCA9IHNjcm9sbGVyLnNjcm9sbExlZnQgKyAicHgiOwogICAgICBpZiAob3B0aW9ucy5vblNj
			cm9sbCkgb3B0aW9ucy5vblNjcm9sbChpbnN0YW5jZSk7CiAgICB9KTsKICAgIGNvbm5lY3Qod2lu
			ZG93LCAicmVzaXplIiwgZnVuY3Rpb24oKSB7dXBkYXRlRGlzcGxheSh0cnVlKTt9KTsKICAgIGNv
			bm5lY3QoaW5wdXQsICJrZXl1cCIsIG9wZXJhdGlvbihvbktleVVwKSk7CiAgICBjb25uZWN0KGlu
			cHV0LCAiaW5wdXQiLCBmYXN0UG9sbCk7CiAgICBjb25uZWN0KGlucHV0LCAia2V5ZG93biIsIG9w
			ZXJhdGlvbihvbktleURvd24pKTsKICAgIGNvbm5lY3QoaW5wdXQsICJrZXlwcmVzcyIsIG9wZXJh
			dGlvbihvbktleVByZXNzKSk7CiAgICBjb25uZWN0KGlucHV0LCAiZm9jdXMiLCBvbkZvY3VzKTsK
			ICAgIGNvbm5lY3QoaW5wdXQsICJibHVyIiwgb25CbHVyKTsKCiAgICBjb25uZWN0KHNjcm9sbGVy
			LCAiZHJhZ2VudGVyIiwgZV9zdG9wKTsKICAgIGNvbm5lY3Qoc2Nyb2xsZXIsICJkcmFnb3ZlciIs
			IGVfc3RvcCk7CiAgICBjb25uZWN0KHNjcm9sbGVyLCAiZHJvcCIsIG9wZXJhdGlvbihvbkRyb3Ap
			KTsKICAgIGNvbm5lY3Qoc2Nyb2xsZXIsICJwYXN0ZSIsIGZ1bmN0aW9uKCl7Zm9jdXNJbnB1dCgp
			OyBmYXN0UG9sbCgpO30pOwogICAgY29ubmVjdChpbnB1dCwgInBhc3RlIiwgZmFzdFBvbGwpOwog
			ICAgY29ubmVjdChpbnB1dCwgImN1dCIsIG9wZXJhdGlvbihmdW5jdGlvbigpewogICAgICBpZiAo
			IW9wdGlvbnMucmVhZE9ubHkpIHJlcGxhY2VTZWxlY3Rpb24oIiIpOwogICAgfSkpOwoKICAgIC8v
			IElFIHRocm93cyB1bnNwZWNpZmllZCBlcnJvciBpbiBjZXJ0YWluIGNhc2VzLCB3aGVuCiAgICAv
			LyB0cnlpbmcgdG8gYWNjZXNzIGFjdGl2ZUVsZW1lbnQgYmVmb3JlIG9ubG9hZAogICAgdmFyIGhh
			c0ZvY3VzOyB0cnkgeyBoYXNGb2N1cyA9ICh0YXJnZXREb2N1bWVudC5hY3RpdmVFbGVtZW50ID09
			IGlucHV0KTsgfSBjYXRjaChlKSB7IH0KICAgIGlmIChoYXNGb2N1cykgc2V0VGltZW91dChvbkZv
			Y3VzLCAyMCk7CiAgICBlbHNlIG9uQmx1cigpOwoKICAgIGZ1bmN0aW9uIGlzTGluZShsKSB7cmV0
			dXJuIGwgPj0gMCAmJiBsIDwgZG9jLnNpemU7fQogICAgLy8gVGhlIGluc3RhbmNlIG9iamVjdCB0
			aGF0IHdlJ2xsIHJldHVybi4gTW9zdGx5IGNhbGxzIG91dCB0bwogICAgLy8gbG9jYWwgZnVuY3Rp
			b25zIGluIHRoZSBDb2RlTWlycm9yIGZ1bmN0aW9uLiBTb21lIGRvIHNvbWUgZXh0cmEKICAgIC8v
			IHJhbmdlIGNoZWNraW5nIGFuZC9vciBjbGlwcGluZy4gb3BlcmF0aW9uIGlzIHVzZWQgdG8gd3Jh
			cCB0aGUKICAgIC8vIGNhbGwgc28gdGhhdCBjaGFuZ2VzIGl0IG1ha2VzIGFyZSB0cmFja2VkLCBh
			bmQgdGhlIGRpc3BsYXkgaXMKICAgIC8vIHVwZGF0ZWQgYWZ0ZXJ3YXJkcy4KICAgIHZhciBpbnN0
			YW5jZSA9IHdyYXBwZXIuQ29kZU1pcnJvciA9IHsKICAgICAgZ2V0VmFsdWU6IGdldFZhbHVlLAog
			ICAgICBzZXRWYWx1ZTogb3BlcmF0aW9uKHNldFZhbHVlKSwKICAgICAgZ2V0U2VsZWN0aW9uOiBn
			ZXRTZWxlY3Rpb24sCiAgICAgIHJlcGxhY2VTZWxlY3Rpb246IG9wZXJhdGlvbihyZXBsYWNlU2Vs
			ZWN0aW9uKSwKICAgICAgZm9jdXM6IGZ1bmN0aW9uKCl7d2luZG93LmZvY3VzKCk7IGZvY3VzSW5w
			dXQoKTsgb25Gb2N1cygpOyBmYXN0UG9sbCgpO30sCiAgICAgIHNldE9wdGlvbjogZnVuY3Rpb24o
			b3B0aW9uLCB2YWx1ZSkgewogICAgICAgIHZhciBvbGRWYWwgPSBvcHRpb25zW29wdGlvbl07CiAg
			ICAgICAgb3B0aW9uc1tvcHRpb25dID0gdmFsdWU7CiAgICAgICAgaWYgKG9wdGlvbiA9PSAibW9k
			ZSIgfHwgb3B0aW9uID09ICJpbmRlbnRVbml0IikgbG9hZE1vZGUoKTsKICAgICAgICBlbHNlIGlm
			IChvcHRpb24gPT0gInJlYWRPbmx5IiAmJiB2YWx1ZSA9PSAibm9jdXJzb3IiKSB7b25CbHVyKCk7
			IGlucHV0LmJsdXIoKTt9CiAgICAgICAgZWxzZSBpZiAob3B0aW9uID09ICJyZWFkT25seSIgJiYg
			IXZhbHVlKSB7cmVzZXRJbnB1dCh0cnVlKTt9CiAgICAgICAgZWxzZSBpZiAob3B0aW9uID09ICJ0
			aGVtZSIpIHRoZW1lQ2hhbmdlZCgpOwogICAgICAgIGVsc2UgaWYgKG9wdGlvbiA9PSAibGluZVdy
			YXBwaW5nIiAmJiBvbGRWYWwgIT0gdmFsdWUpIG9wZXJhdGlvbih3cmFwcGluZ0NoYW5nZWQpKCk7
			CiAgICAgICAgZWxzZSBpZiAob3B0aW9uID09ICJ0YWJTaXplIikgdXBkYXRlRGlzcGxheSh0cnVl
			KTsKICAgICAgICBpZiAob3B0aW9uID09ICJsaW5lTnVtYmVycyIgfHwgb3B0aW9uID09ICJndXR0
			ZXIiIHx8IG9wdGlvbiA9PSAiZmlyc3RMaW5lTnVtYmVyIiB8fCBvcHRpb24gPT0gInRoZW1lIikg
			ewogICAgICAgICAgZ3V0dGVyQ2hhbmdlZCgpOwogICAgICAgICAgdXBkYXRlRGlzcGxheSh0cnVl
			KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGdldE9wdGlvbjogZnVuY3Rpb24ob3B0aW9uKSB7
			cmV0dXJuIG9wdGlvbnNbb3B0aW9uXTt9LAogICAgICB1bmRvOiBvcGVyYXRpb24odW5kbyksCiAg
			ICAgIHJlZG86IG9wZXJhdGlvbihyZWRvKSwKICAgICAgaW5kZW50TGluZTogb3BlcmF0aW9uKGZ1
			bmN0aW9uKG4sIGRpcikgewogICAgICAgIGlmICh0eXBlb2YgZGlyICE9ICJzdHJpbmciKSB7CiAg
			ICAgICAgICBpZiAoZGlyID09IG51bGwpIGRpciA9IG9wdGlvbnMuc21hcnRJbmRlbnQgPyAic21h
			cnQiIDogInByZXYiOwogICAgICAgICAgZWxzZSBkaXIgPSBkaXIgPyAiYWRkIiA6ICJzdWJ0cmFj
			dCI7CiAgICAgICAgfQogICAgICAgIGlmIChpc0xpbmUobikpIGluZGVudExpbmUobiwgZGlyKTsK
			ICAgICAgfSksCiAgICAgIGluZGVudFNlbGVjdGlvbjogb3BlcmF0aW9uKGluZGVudFNlbGVjdGVk
			KSwKICAgICAgaGlzdG9yeVNpemU6IGZ1bmN0aW9uKCkge3JldHVybiB7dW5kbzogaGlzdG9yeS5k
			b25lLmxlbmd0aCwgcmVkbzogaGlzdG9yeS51bmRvbmUubGVuZ3RofTt9LAogICAgICBjbGVhckhp
			c3Rvcnk6IGZ1bmN0aW9uKCkge2hpc3RvcnkgPSBuZXcgSGlzdG9yeSgpO30sCiAgICAgIG1hdGNo
			QnJhY2tldHM6IG9wZXJhdGlvbihmdW5jdGlvbigpe21hdGNoQnJhY2tldHModHJ1ZSk7fSksCiAg
			ICAgIGdldFRva2VuQXQ6IG9wZXJhdGlvbihmdW5jdGlvbihwb3MpIHsKICAgICAgICBwb3MgPSBj
			bGlwUG9zKHBvcyk7CiAgICAgICAgcmV0dXJuIGdldExpbmUocG9zLmxpbmUpLmdldFRva2VuQXQo
			bW9kZSwgZ2V0U3RhdGVCZWZvcmUocG9zLmxpbmUpLCBwb3MuY2gpOwogICAgICB9KSwKICAgICAg
			Z2V0U3RhdGVBZnRlcjogZnVuY3Rpb24obGluZSkgewogICAgICAgIGxpbmUgPSBjbGlwTGluZShs
			aW5lID09IG51bGwgPyBkb2Muc2l6ZSAtIDE6IGxpbmUpOwogICAgICAgIHJldHVybiBnZXRTdGF0
			ZUJlZm9yZShsaW5lICsgMSk7CiAgICAgIH0sCiAgICAgIGN1cnNvckNvb3JkczogZnVuY3Rpb24o
			c3RhcnQpewogICAgICAgIGlmIChzdGFydCA9PSBudWxsKSBzdGFydCA9IHNlbC5pbnZlcnRlZDsK
			ICAgICAgICByZXR1cm4gcGFnZUNvb3JkcyhzdGFydCA/IHNlbC5mcm9tIDogc2VsLnRvKTsKICAg
			ICAgfSwKICAgICAgY2hhckNvb3JkczogZnVuY3Rpb24ocG9zKXtyZXR1cm4gcGFnZUNvb3Jkcyhj
			bGlwUG9zKHBvcykpO30sCiAgICAgIGNvb3Jkc0NoYXI6IGZ1bmN0aW9uKGNvb3JkcykgewogICAg
			ICAgIHZhciBvZmYgPSBlbHRPZmZzZXQobGluZVNwYWNlKTsKICAgICAgICByZXR1cm4gY29vcmRz
			Q2hhcihjb29yZHMueCAtIG9mZi5sZWZ0LCBjb29yZHMueSAtIG9mZi50b3ApOwogICAgICB9LAog
			ICAgICBtYXJrVGV4dDogb3BlcmF0aW9uKG1hcmtUZXh0KSwKICAgICAgc2V0Qm9va21hcms6IHNl
			dEJvb2ttYXJrLAogICAgICBzZXRNYXJrZXI6IG9wZXJhdGlvbihhZGRHdXR0ZXJNYXJrZXIpLAog
			ICAgICBjbGVhck1hcmtlcjogb3BlcmF0aW9uKHJlbW92ZUd1dHRlck1hcmtlciksCiAgICAgIHNl
			dExpbmVDbGFzczogb3BlcmF0aW9uKHNldExpbmVDbGFzcyksCiAgICAgIGhpZGVMaW5lOiBvcGVy
			YXRpb24oZnVuY3Rpb24oaCkge3JldHVybiBzZXRMaW5lSGlkZGVuKGgsIHRydWUpO30pLAogICAg
			ICBzaG93TGluZTogb3BlcmF0aW9uKGZ1bmN0aW9uKGgpIHtyZXR1cm4gc2V0TGluZUhpZGRlbiho
			LCBmYWxzZSk7fSksCiAgICAgIG9uRGVsZXRlTGluZTogZnVuY3Rpb24obGluZSwgZikgewogICAg
			ICAgIGlmICh0eXBlb2YgbGluZSA9PSAibnVtYmVyIikgewogICAgICAgICAgaWYgKCFpc0xpbmUo
			bGluZSkpIHJldHVybiBudWxsOwogICAgICAgICAgbGluZSA9IGdldExpbmUobGluZSk7CiAgICAg
			ICAgfQogICAgICAgIChsaW5lLmhhbmRsZXJzIHx8IChsaW5lLmhhbmRsZXJzID0gW10pKS5wdXNo
			KGYpOwogICAgICAgIHJldHVybiBsaW5lOwogICAgICB9LAogICAgICBsaW5lSW5mbzogbGluZUlu
			Zm8sCiAgICAgIGFkZFdpZGdldDogZnVuY3Rpb24ocG9zLCBub2RlLCBzY3JvbGwsIHZlcnQsIGhv
			cml6KSB7CiAgICAgICAgcG9zID0gbG9jYWxDb29yZHMoY2xpcFBvcyhwb3MpKTsKICAgICAgICB2
			YXIgdG9wID0gcG9zLnlCb3QsIGxlZnQgPSBwb3MueDsKICAgICAgICBub2RlLnN0eWxlLnBvc2l0
			aW9uID0gImFic29sdXRlIjsKICAgICAgICBjb2RlLmFwcGVuZENoaWxkKG5vZGUpOwogICAgICAg
			IGlmICh2ZXJ0ID09ICJvdmVyIikgdG9wID0gcG9zLnk7CiAgICAgICAgZWxzZSBpZiAodmVydCA9
			PSAibmVhciIpIHsKICAgICAgICAgIHZhciB2c3BhY2UgPSBNYXRoLm1heChzY3JvbGxlci5vZmZz
			ZXRIZWlnaHQsIGRvYy5oZWlnaHQgKiB0ZXh0SGVpZ2h0KCkpLAogICAgICAgICAgICAgIGhzcGFj
			ZSA9IE1hdGgubWF4KGNvZGUuY2xpZW50V2lkdGgsIGxpbmVTcGFjZS5jbGllbnRXaWR0aCkgLSBw
			YWRkaW5nTGVmdCgpOwogICAgICAgICAgaWYgKHBvcy55Qm90ICsgbm9kZS5vZmZzZXRIZWlnaHQg
			PiB2c3BhY2UgJiYgcG9zLnkgPiBub2RlLm9mZnNldEhlaWdodCkKICAgICAgICAgICAgdG9wID0g
			cG9zLnkgLSBub2RlLm9mZnNldEhlaWdodDsKICAgICAgICAgIGlmIChsZWZ0ICsgbm9kZS5vZmZz
			ZXRXaWR0aCA+IGhzcGFjZSkKICAgICAgICAgICAgbGVmdCA9IGhzcGFjZSAtIG5vZGUub2Zmc2V0
			V2lkdGg7CiAgICAgICAgfQogICAgICAgIG5vZGUuc3R5bGUudG9wID0gKHRvcCArIHBhZGRpbmdU
			b3AoKSkgKyAicHgiOwogICAgICAgIG5vZGUuc3R5bGUubGVmdCA9IG5vZGUuc3R5bGUucmlnaHQg
			PSAiIjsKICAgICAgICBpZiAoaG9yaXogPT0gInJpZ2h0IikgewogICAgICAgICAgbGVmdCA9IGNv
			ZGUuY2xpZW50V2lkdGggLSBub2RlLm9mZnNldFdpZHRoOwogICAgICAgICAgbm9kZS5zdHlsZS5y
			aWdodCA9ICIwcHgiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoaG9yaXogPT0gImxl
			ZnQiKSBsZWZ0ID0gMDsKICAgICAgICAgIGVsc2UgaWYgKGhvcml6ID09ICJtaWRkbGUiKSBsZWZ0
			ID0gKGNvZGUuY2xpZW50V2lkdGggLSBub2RlLm9mZnNldFdpZHRoKSAvIDI7CiAgICAgICAgICBu
			b2RlLnN0eWxlLmxlZnQgPSAobGVmdCArIHBhZGRpbmdMZWZ0KCkpICsgInB4IjsKICAgICAgICB9
			CiAgICAgICAgaWYgKHNjcm9sbCkKICAgICAgICAgIHNjcm9sbEludG9WaWV3KGxlZnQsIHRvcCwg
			bGVmdCArIG5vZGUub2Zmc2V0V2lkdGgsIHRvcCArIG5vZGUub2Zmc2V0SGVpZ2h0KTsKICAgICAg
			fSwKCiAgICAgIGxpbmVDb3VudDogZnVuY3Rpb24oKSB7cmV0dXJuIGRvYy5zaXplO30sCiAgICAg
			IGNsaXBQb3M6IGNsaXBQb3MsCiAgICAgIGdldEN1cnNvcjogZnVuY3Rpb24oc3RhcnQpIHsKICAg
			ICAgICBpZiAoc3RhcnQgPT0gbnVsbCkgc3RhcnQgPSBzZWwuaW52ZXJ0ZWQ7CiAgICAgICAgcmV0
			dXJuIGNvcHlQb3Moc3RhcnQgPyBzZWwuZnJvbSA6IHNlbC50byk7CiAgICAgIH0sCiAgICAgIHNv
			bWV0aGluZ1NlbGVjdGVkOiBmdW5jdGlvbigpIHtyZXR1cm4gIXBvc0VxKHNlbC5mcm9tLCBzZWwu
			dG8pO30sCiAgICAgIHNldEN1cnNvcjogb3BlcmF0aW9uKGZ1bmN0aW9uKGxpbmUsIGNoLCB1c2Vy
			KSB7CiAgICAgICAgaWYgKGNoID09IG51bGwgJiYgdHlwZW9mIGxpbmUubGluZSA9PSAibnVtYmVy
			Iikgc2V0Q3Vyc29yKGxpbmUubGluZSwgbGluZS5jaCwgdXNlcik7CiAgICAgICAgZWxzZSBzZXRD
			dXJzb3IobGluZSwgY2gsIHVzZXIpOwogICAgICB9KSwKICAgICAgc2V0U2VsZWN0aW9uOiBvcGVy
			YXRpb24oZnVuY3Rpb24oZnJvbSwgdG8sIHVzZXIpIHsKICAgICAgICAodXNlciA/IHNldFNlbGVj
			dGlvblVzZXIgOiBzZXRTZWxlY3Rpb24pKGNsaXBQb3MoZnJvbSksIGNsaXBQb3ModG8gfHwgZnJv
			bSkpOwogICAgICB9KSwKICAgICAgZ2V0TGluZTogZnVuY3Rpb24obGluZSkge2lmIChpc0xpbmUo
			bGluZSkpIHJldHVybiBnZXRMaW5lKGxpbmUpLnRleHQ7fSwKICAgICAgZ2V0TGluZUhhbmRsZTog
			ZnVuY3Rpb24obGluZSkge2lmIChpc0xpbmUobGluZSkpIHJldHVybiBnZXRMaW5lKGxpbmUpO30s
			CiAgICAgIHNldExpbmU6IG9wZXJhdGlvbihmdW5jdGlvbihsaW5lLCB0ZXh0KSB7CiAgICAgICAg
			aWYgKGlzTGluZShsaW5lKSkgcmVwbGFjZVJhbmdlKHRleHQsIHtsaW5lOiBsaW5lLCBjaDogMH0s
			IHtsaW5lOiBsaW5lLCBjaDogZ2V0TGluZShsaW5lKS50ZXh0Lmxlbmd0aH0pOwogICAgICB9KSwK
			ICAgICAgcmVtb3ZlTGluZTogb3BlcmF0aW9uKGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgICBpZiAo
			aXNMaW5lKGxpbmUpKSByZXBsYWNlUmFuZ2UoIiIsIHtsaW5lOiBsaW5lLCBjaDogMH0sIGNsaXBQ
			b3Moe2xpbmU6IGxpbmUrMSwgY2g6IDB9KSk7CiAgICAgIH0pLAogICAgICByZXBsYWNlUmFuZ2U6
			IG9wZXJhdGlvbihyZXBsYWNlUmFuZ2UpLAogICAgICBnZXRSYW5nZTogZnVuY3Rpb24oZnJvbSwg
			dG8pIHtyZXR1cm4gZ2V0UmFuZ2UoY2xpcFBvcyhmcm9tKSwgY2xpcFBvcyh0bykpO30sCgogICAg
			ICBleGVjQ29tbWFuZDogZnVuY3Rpb24oY21kKSB7cmV0dXJuIGNvbW1hbmRzW2NtZF0oaW5zdGFu
			Y2UpO30sCiAgICAgIC8vIFN0dWZmIHVzZWQgYnkgY29tbWFuZHMsIHByb2JhYmx5IG5vdCBtdWNo
			IHVzZSB0byBvdXRzaWRlIGNvZGUuCiAgICAgIG1vdmVIOiBvcGVyYXRpb24obW92ZUgpLAogICAg
			ICBkZWxldGVIOiBvcGVyYXRpb24oZGVsZXRlSCksCiAgICAgIG1vdmVWOiBvcGVyYXRpb24obW92
			ZVYpLAogICAgICB0b2dnbGVPdmVyd3JpdGU6IGZ1bmN0aW9uKCkgewogICAgICAgIGlmKG92ZXJ3
			cml0ZSl7CiAgICAgICAgICBvdmVyd3JpdGUgPSBmYWxzZTsKICAgICAgICAgIGN1cnNvci5jbGFz
			c05hbWUgPSBjdXJzb3IuY2xhc3NOYW1lLnJlcGxhY2UoIiBDb2RlTWlycm9yLW92ZXJ3cml0ZSIs
			ICIiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb3ZlcndyaXRlID0gdHJ1ZTsKICAgICAg
			ICAgIGN1cnNvci5jbGFzc05hbWUgKz0gIiBDb2RlTWlycm9yLW92ZXJ3cml0ZSI7CiAgICAgICAg
			fQogICAgICB9LAoKICAgICAgcG9zRnJvbUluZGV4OiBmdW5jdGlvbihvZmYpIHsKICAgICAgICB2
			YXIgbGluZU5vID0gMCwgY2g7CiAgICAgICAgZG9jLml0ZXIoMCwgZG9jLnNpemUsIGZ1bmN0aW9u
			KGxpbmUpIHsKICAgICAgICAgIHZhciBzeiA9IGxpbmUudGV4dC5sZW5ndGggKyAxOwogICAgICAg
			ICAgaWYgKHN6ID4gb2ZmKSB7IGNoID0gb2ZmOyByZXR1cm4gdHJ1ZTsgfQogICAgICAgICAgb2Zm
			IC09IHN6OwogICAgICAgICAgKytsaW5lTm87CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGNs
			aXBQb3Moe2xpbmU6IGxpbmVObywgY2g6IGNofSk7CiAgICAgIH0sCiAgICAgIGluZGV4RnJvbVBv
			czogZnVuY3Rpb24gKGNvb3JkcykgewogICAgICAgIGlmIChjb29yZHMubGluZSA8IDAgfHwgY29v
			cmRzLmNoIDwgMCkgcmV0dXJuIDA7CiAgICAgICAgdmFyIGluZGV4ID0gY29vcmRzLmNoOwogICAg
			ICAgIGRvYy5pdGVyKDAsIGNvb3Jkcy5saW5lLCBmdW5jdGlvbiAobGluZSkgewogICAgICAgICAg
			aW5kZXggKz0gbGluZS50ZXh0Lmxlbmd0aCArIDE7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJu
			IGluZGV4OwogICAgICB9LAogICAgICBzY3JvbGxUbzogZnVuY3Rpb24oeCwgeSkgewogICAgICAg
			IGlmICh4ICE9IG51bGwpIHNjcm9sbGVyLnNjcm9sbExlZnQgPSB4OwogICAgICAgIGlmICh5ICE9
			IG51bGwpIHNjcm9sbGVyLnNjcm9sbFRvcCA9IHk7CiAgICAgICAgdXBkYXRlRGlzcGxheShbXSk7
			CiAgICAgIH0sCgogICAgICBvcGVyYXRpb246IGZ1bmN0aW9uKGYpe3JldHVybiBvcGVyYXRpb24o
			ZikoKTt9LAogICAgICByZWZyZXNoOiBmdW5jdGlvbigpewogICAgICAgIHVwZGF0ZURpc3BsYXko
			dHJ1ZSk7CiAgICAgICAgaWYgKHNjcm9sbGVyLnNjcm9sbEhlaWdodCA+IGxhc3RTY3JvbGxQb3Mp
			CiAgICAgICAgICBzY3JvbGxlci5zY3JvbGxUb3AgPSBsYXN0U2Nyb2xsUG9zOwogICAgICB9LAog
			ICAgICBnZXRJbnB1dEZpZWxkOiBmdW5jdGlvbigpe3JldHVybiBpbnB1dDt9LAogICAgICBnZXRX
			cmFwcGVyRWxlbWVudDogZnVuY3Rpb24oKXtyZXR1cm4gd3JhcHBlcjt9LAogICAgICBnZXRTY3Jv
			bGxlckVsZW1lbnQ6IGZ1bmN0aW9uKCl7cmV0dXJuIHNjcm9sbGVyO30sCiAgICAgIGdldEd1dHRl
			ckVsZW1lbnQ6IGZ1bmN0aW9uKCl7cmV0dXJuIGd1dHRlcjt9CiAgICB9OwoKICAgIGZ1bmN0aW9u
			IGdldExpbmUobikgeyByZXR1cm4gZ2V0TGluZUF0KGRvYywgbik7IH0KICAgIGZ1bmN0aW9uIHVw
			ZGF0ZUxpbmVIZWlnaHQobGluZSwgaGVpZ2h0KSB7CiAgICAgIGd1dHRlckRpcnR5ID0gdHJ1ZTsK
			ICAgICAgdmFyIGRpZmYgPSBoZWlnaHQgLSBsaW5lLmhlaWdodDsKICAgICAgZm9yICh2YXIgbiA9
			IGxpbmU7IG47IG4gPSBuLnBhcmVudCkgbi5oZWlnaHQgKz0gZGlmZjsKICAgIH0KCiAgICBmdW5j
			dGlvbiBzZXRWYWx1ZShjb2RlKSB7CiAgICAgIHZhciB0b3AgPSB7bGluZTogMCwgY2g6IDB9Owog
			ICAgICB1cGRhdGVMaW5lcyh0b3AsIHtsaW5lOiBkb2Muc2l6ZSAtIDEsIGNoOiBnZXRMaW5lKGRv
			Yy5zaXplLTEpLnRleHQubGVuZ3RofSwKICAgICAgICAgICAgICAgICAgc3BsaXRMaW5lcyhjb2Rl
			KSwgdG9wLCB0b3ApOwogICAgICB1cGRhdGVJbnB1dCA9IHRydWU7CiAgICB9CiAgICBmdW5jdGlv
			biBnZXRWYWx1ZShjb2RlKSB7CiAgICAgIHZhciB0ZXh0ID0gW107CiAgICAgIGRvYy5pdGVyKDAs
			IGRvYy5zaXplLCBmdW5jdGlvbihsaW5lKSB7IHRleHQucHVzaChsaW5lLnRleHQpOyB9KTsKICAg
			ICAgcmV0dXJuIHRleHQuam9pbigiXG4iKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbk1vdXNlRG93
			bihlKSB7CiAgICAgIHNldFNoaWZ0KGVfcHJvcChlLCAic2hpZnRLZXkiKSk7CiAgICAgIC8vIENo
			ZWNrIHdoZXRoZXIgdGhpcyBpcyBhIGNsaWNrIGluIGEgd2lkZ2V0CiAgICAgIGZvciAodmFyIG4g
			PSBlX3RhcmdldChlKTsgbiAhPSB3cmFwcGVyOyBuID0gbi5wYXJlbnROb2RlKQogICAgICAgIGlm
			IChuLnBhcmVudE5vZGUgPT0gY29kZSAmJiBuICE9IG1vdmVyKSByZXR1cm47CgogICAgICAvLyBT
			ZWUgaWYgdGhpcyBpcyBhIGNsaWNrIGluIHRoZSBndXR0ZXIKICAgICAgZm9yICh2YXIgbiA9IGVf
			dGFyZ2V0KGUpOyBuICE9IHdyYXBwZXI7IG4gPSBuLnBhcmVudE5vZGUpCiAgICAgICAgaWYgKG4u
			cGFyZW50Tm9kZSA9PSBndXR0ZXJUZXh0KSB7CiAgICAgICAgICBpZiAob3B0aW9ucy5vbkd1dHRl
			ckNsaWNrKQogICAgICAgICAgICBvcHRpb25zLm9uR3V0dGVyQ2xpY2soaW5zdGFuY2UsIGluZGV4
			T2YoZ3V0dGVyVGV4dC5jaGlsZE5vZGVzLCBuKSArIHNob3dpbmdGcm9tLCBlKTsKICAgICAgICAg
			IHJldHVybiBlX3ByZXZlbnREZWZhdWx0KGUpOwogICAgICAgIH0KCiAgICAgIHZhciBzdGFydCA9
			IHBvc0Zyb21Nb3VzZShlKTsKCiAgICAgIHN3aXRjaCAoZV9idXR0b24oZSkpIHsKICAgICAgY2Fz
			ZSAzOgogICAgICAgIGlmIChnZWNrbyAmJiAhbWFjKSBvbkNvbnRleHRNZW51KGUpOwogICAgICAg
			IHJldHVybjsKICAgICAgY2FzZSAyOgogICAgICAgIGlmIChzdGFydCkgc2V0Q3Vyc29yKHN0YXJ0
			LmxpbmUsIHN0YXJ0LmNoLCB0cnVlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLy8g
			Rm9yIGJ1dHRvbiAxLCBpZiBpdCB3YXMgY2xpY2tlZCBpbnNpZGUgdGhlIGVkaXRvcgogICAgICAv
			LyAocG9zRnJvbU1vdXNlIHJldHVybmluZyBub24tbnVsbCksIHdlIGhhdmUgdG8gYWRqdXN0IHRo
			ZQogICAgICAvLyBzZWxlY3Rpb24uCiAgICAgIGlmICghc3RhcnQpIHtpZiAoZV90YXJnZXQoZSkg
			PT0gc2Nyb2xsZXIpIGVfcHJldmVudERlZmF1bHQoZSk7IHJldHVybjt9CgogICAgICBpZiAoIWZv
			Y3VzZWQpIG9uRm9jdXMoKTsKCiAgICAgIHZhciBub3cgPSArbmV3IERhdGU7CiAgICAgIGlmIChs
			YXN0RG91YmxlQ2xpY2sgJiYgbGFzdERvdWJsZUNsaWNrLnRpbWUgPiBub3cgLSA0MDAgJiYgcG9z
			RXEobGFzdERvdWJsZUNsaWNrLnBvcywgc3RhcnQpKSB7CiAgICAgICAgZV9wcmV2ZW50RGVmYXVs
			dChlKTsKICAgICAgICBzZXRUaW1lb3V0KGZvY3VzSW5wdXQsIDIwKTsKICAgICAgICByZXR1cm4g
			c2VsZWN0TGluZShzdGFydC5saW5lKTsKICAgICAgfSBlbHNlIGlmIChsYXN0Q2xpY2sgJiYgbGFz
			dENsaWNrLnRpbWUgPiBub3cgLSA0MDAgJiYgcG9zRXEobGFzdENsaWNrLnBvcywgc3RhcnQpKSB7
			CiAgICAgICAgbGFzdERvdWJsZUNsaWNrID0ge3RpbWU6IG5vdywgcG9zOiBzdGFydH07CiAgICAg
			ICAgZV9wcmV2ZW50RGVmYXVsdChlKTsKICAgICAgICByZXR1cm4gc2VsZWN0V29yZEF0KHN0YXJ0
			KTsKICAgICAgfSBlbHNlIHsgbGFzdENsaWNrID0ge3RpbWU6IG5vdywgcG9zOiBzdGFydH07IH0K
			CiAgICAgIHZhciBsYXN0ID0gc3RhcnQsIGdvaW5nOwogICAgICBpZiAoZHJhZ0FuZERyb3AgJiYg
			IW9wdGlvbnMucmVhZE9ubHkgJiYgIXBvc0VxKHNlbC5mcm9tLCBzZWwudG8pICYmCiAgICAgICAg
			ICAhcG9zTGVzcyhzdGFydCwgc2VsLmZyb20pICYmICFwb3NMZXNzKHNlbC50bywgc3RhcnQpKSB7
			CiAgICAgICAgLy8gTGV0IHRoZSBkcmFnIGhhbmRsZXIgaGFuZGxlIHRoaXMuCiAgICAgICAgaWYg
			KHdlYmtpdCkgbGluZVNwYWNlLmRyYWdnYWJsZSA9IHRydWU7CiAgICAgICAgdmFyIHVwID0gY29u
			bmVjdCh0YXJnZXREb2N1bWVudCwgIm1vdXNldXAiLCBvcGVyYXRpb24oZnVuY3Rpb24oZTIpIHsK
			ICAgICAgICAgIGlmICh3ZWJraXQpIGxpbmVTcGFjZS5kcmFnZ2FibGUgPSBmYWxzZTsKICAgICAg
			ICAgIGRyYWdnaW5nVGV4dCA9IGZhbHNlOwogICAgICAgICAgdXAoKTsKICAgICAgICAgIGlmIChN
			YXRoLmFicyhlLmNsaWVudFggLSBlMi5jbGllbnRYKSArIE1hdGguYWJzKGUuY2xpZW50WSAtIGUy
			LmNsaWVudFkpIDwgMTApIHsKICAgICAgICAgICAgZV9wcmV2ZW50RGVmYXVsdChlMik7CiAgICAg
			ICAgICAgIHNldEN1cnNvcihzdGFydC5saW5lLCBzdGFydC5jaCwgdHJ1ZSk7CiAgICAgICAgICAg
			IGZvY3VzSW5wdXQoKTsKICAgICAgICAgIH0KICAgICAgICB9KSwgdHJ1ZSk7CiAgICAgICAgZHJh
			Z2dpbmdUZXh0ID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZV9wcmV2ZW50
			RGVmYXVsdChlKTsKICAgICAgc2V0Q3Vyc29yKHN0YXJ0LmxpbmUsIHN0YXJ0LmNoLCB0cnVlKTsK
			CiAgICAgIGZ1bmN0aW9uIGV4dGVuZChlKSB7CiAgICAgICAgdmFyIGN1ciA9IHBvc0Zyb21Nb3Vz
			ZShlLCB0cnVlKTsKICAgICAgICBpZiAoY3VyICYmICFwb3NFcShjdXIsIGxhc3QpKSB7CiAgICAg
			ICAgICBpZiAoIWZvY3VzZWQpIG9uRm9jdXMoKTsKICAgICAgICAgIGxhc3QgPSBjdXI7CiAgICAg
			ICAgICBzZXRTZWxlY3Rpb25Vc2VyKHN0YXJ0LCBjdXIpOwogICAgICAgICAgdXBkYXRlSW5wdXQg
			PSBmYWxzZTsKICAgICAgICAgIHZhciB2aXNpYmxlID0gdmlzaWJsZUxpbmVzKCk7CiAgICAgICAg
			ICBpZiAoY3VyLmxpbmUgPj0gdmlzaWJsZS50byB8fCBjdXIubGluZSA8IHZpc2libGUuZnJvbSkK
			ICAgICAgICAgICAgZ29pbmcgPSBzZXRUaW1lb3V0KG9wZXJhdGlvbihmdW5jdGlvbigpe2V4dGVu
			ZChlKTt9KSwgMTUwKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBtb3ZlID0gY29ubmVj
			dCh0YXJnZXREb2N1bWVudCwgIm1vdXNlbW92ZSIsIG9wZXJhdGlvbihmdW5jdGlvbihlKSB7CiAg
			ICAgICAgY2xlYXJUaW1lb3V0KGdvaW5nKTsKICAgICAgICBlX3ByZXZlbnREZWZhdWx0KGUpOwog
			ICAgICAgIGV4dGVuZChlKTsKICAgICAgfSksIHRydWUpOwogICAgICB2YXIgdXAgPSBjb25uZWN0
			KHRhcmdldERvY3VtZW50LCAibW91c2V1cCIsIG9wZXJhdGlvbihmdW5jdGlvbihlKSB7CiAgICAg
			ICAgY2xlYXJUaW1lb3V0KGdvaW5nKTsKICAgICAgICB2YXIgY3VyID0gcG9zRnJvbU1vdXNlKGUp
			OwogICAgICAgIGlmIChjdXIpIHNldFNlbGVjdGlvblVzZXIoc3RhcnQsIGN1cik7CiAgICAgICAg
			ZV9wcmV2ZW50RGVmYXVsdChlKTsKICAgICAgICBmb2N1c0lucHV0KCk7CiAgICAgICAgdXBkYXRl
			SW5wdXQgPSB0cnVlOwogICAgICAgIG1vdmUoKTsgdXAoKTsKICAgICAgfSksIHRydWUpOwogICAg
			fQogICAgZnVuY3Rpb24gb25Eb3VibGVDbGljayhlKSB7CiAgICAgIGZvciAodmFyIG4gPSBlX3Rh
			cmdldChlKTsgbiAhPSB3cmFwcGVyOyBuID0gbi5wYXJlbnROb2RlKQogICAgICAgIGlmIChuLnBh
			cmVudE5vZGUgPT0gZ3V0dGVyVGV4dCkgcmV0dXJuIGVfcHJldmVudERlZmF1bHQoZSk7CiAgICAg
			IHZhciBzdGFydCA9IHBvc0Zyb21Nb3VzZShlKTsKICAgICAgaWYgKCFzdGFydCkgcmV0dXJuOwog
			ICAgICBsYXN0RG91YmxlQ2xpY2sgPSB7dGltZTogK25ldyBEYXRlLCBwb3M6IHN0YXJ0fTsKICAg
			ICAgZV9wcmV2ZW50RGVmYXVsdChlKTsKICAgICAgc2VsZWN0V29yZEF0KHN0YXJ0KTsKICAgIH0K
			ICAgIGZ1bmN0aW9uIG9uRHJvcChlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAg
			dmFyIHBvcyA9IHBvc0Zyb21Nb3VzZShlLCB0cnVlKSwgZmlsZXMgPSBlLmRhdGFUcmFuc2Zlci5m
			aWxlczsKICAgICAgaWYgKCFwb3MgfHwgb3B0aW9ucy5yZWFkT25seSkgcmV0dXJuOwogICAgICBp
			ZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoICYmIHdpbmRvdy5GaWxlUmVhZGVyICYmIHdpbmRvdy5G
			aWxlKSB7CiAgICAgICAgZnVuY3Rpb24gbG9hZEZpbGUoZmlsZSwgaSkgewogICAgICAgICAgdmFy
			IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyOwogICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0
			aW9uKCkgewogICAgICAgICAgICB0ZXh0W2ldID0gcmVhZGVyLnJlc3VsdDsKICAgICAgICAgICAg
			aWYgKCsrcmVhZCA9PSBuKSB7CgkgICAgICBwb3MgPSBjbGlwUG9zKHBvcyk7CgkgICAgICBvcGVy
			YXRpb24oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgZW5kID0gcmVwbGFjZVJhbmdl
			KHRleHQuam9pbigiIiksIHBvcywgcG9zKTsKICAgICAgICAgICAgICAgIHNldFNlbGVjdGlvblVz
			ZXIocG9zLCBlbmQpOwogICAgICAgICAgICAgIH0pKCk7CgkgICAgfQogICAgICAgICAgfTsKICAg
			ICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOwogICAgICAgIH0KICAgICAgICB2YXIgbiA9
			IGZpbGVzLmxlbmd0aCwgdGV4dCA9IEFycmF5KG4pLCByZWFkID0gMDsKICAgICAgICBmb3IgKHZh
			ciBpID0gMDsgaSA8IG47ICsraSkgbG9hZEZpbGUoZmlsZXNbaV0sIGkpOwogICAgICB9CiAgICAg
			IGVsc2UgewogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgdGV4dCA9IGUuZGF0YVRyYW5zZmVy
			LmdldERhdGEoIlRleHQiKTsKICAgICAgICAgIGlmICh0ZXh0KSB7CiAgICAgICAgICAgIHZhciBj
			dXJGcm9tID0gc2VsLmZyb20sIGN1clRvID0gc2VsLnRvOwogICAgICAgICAgICBzZXRTZWxlY3Rp
			b25Vc2VyKHBvcywgcG9zKTsKICAgICAgICAgICAgaWYgKGRyYWdnaW5nVGV4dCkgcmVwbGFjZVJh
			bmdlKCIiLCBjdXJGcm9tLCBjdXJUbyk7CiAgICAgICAgICAgIHJlcGxhY2VTZWxlY3Rpb24odGV4
			dCk7CgkgICAgZm9jdXNJbnB1dCgpOwoJICB9CiAgICAgICAgfQogICAgICAgIGNhdGNoKGUpe30K
			ICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gb25EcmFnU3RhcnQoZSkgewogICAgICB2YXIgdHh0
			ID0gZ2V0U2VsZWN0aW9uKCk7CiAgICAgIC8vIERpc2FibGVkIHVudGlsIGZ1cnRoZXIgbm90aWNl
			LiBEb2Vzbid0IHdvcmsgb24gbW9zdCBicm93c2VycywKICAgICAgLy8gYW5kIGNyYXNoZXMgU2Fm
			YXJpIChpc3N1ZSAjMzMyKS4KICAgICAgLy9odG1sRXNjYXBlKHR4dCk7CiAgICAgIC8vZS5kYXRh
			VHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGVzY2FwZUVsZW1lbnQsIDAsIDApOwogICAgICBlLmRhdGFU
			cmFuc2Zlci5zZXREYXRhKCJUZXh0IiwgdHh0KTsKICAgIH0KCiAgICBmdW5jdGlvbiBkb0hhbmRs
			ZUJpbmRpbmcoYm91bmQsIGRyb3BTaGlmdCkgewogICAgICBpZiAodHlwZW9mIGJvdW5kID09ICJz
			dHJpbmciKSB7CiAgICAgICAgYm91bmQgPSBjb21tYW5kc1tib3VuZF07CiAgICAgICAgaWYgKCFi
			b3VuZCkgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHZhciBwcmV2U2hpZnQgPSBzaGlmdFNl
			bGVjdGluZzsKICAgICAgdHJ5IHsKICAgICAgICBpZiAob3B0aW9ucy5yZWFkT25seSkgc3VwcHJl
			c3NFZGl0cyA9IHRydWU7CiAgICAgICAgaWYgKGRyb3BTaGlmdCkgc2hpZnRTZWxlY3RpbmcgPSBu
			dWxsOwogICAgICAgIGJvdW5kKGluc3RhbmNlKTsKICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAg
			aWYgKGUgIT0gUGFzcykgdGhyb3cgZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gZmlu
			YWxseSB7CiAgICAgICAgc2hpZnRTZWxlY3RpbmcgPSBwcmV2U2hpZnQ7CiAgICAgICAgc3VwcHJl
			c3NFZGl0cyA9IGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgZnVu
			Y3Rpb24gaGFuZGxlS2V5QmluZGluZyhlKSB7CiAgICAgIC8vIEhhbmRsZSBhdXRvIGtleW1hcCB0
			cmFuc2l0aW9ucwogICAgICB2YXIgc3RhcnRNYXAgPSBnZXRLZXlNYXAob3B0aW9ucy5rZXlNYXAp
			LCBuZXh0ID0gc3RhcnRNYXAuYXV0bzsKICAgICAgY2xlYXJUaW1lb3V0KG1heWJlVHJhbnNpdGlv
			bik7CiAgICAgIGlmIChuZXh0ICYmICFpc01vZGlmaWVyS2V5KGUpKSBtYXliZVRyYW5zaXRpb24g
			PSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChnZXRLZXlNYXAob3B0aW9ucy5r
			ZXlNYXApID09IHN0YXJ0TWFwKSB7CiAgICAgICAgICBvcHRpb25zLmtleU1hcCA9IChuZXh0LmNh
			bGwgPyBuZXh0LmNhbGwobnVsbCwgaW5zdGFuY2UpIDogbmV4dCk7CiAgICAgICAgfQogICAgICB9
			LCA1MCk7CgogICAgICB2YXIgbmFtZSA9IGtleU5hbWVzW2VfcHJvcChlLCAia2V5Q29kZSIpXSwg
			aGFuZGxlZCA9IGZhbHNlOwogICAgICBpZiAobmFtZSA9PSBudWxsIHx8IGUuYWx0R3JhcGhLZXkp
			IHJldHVybiBmYWxzZTsKICAgICAgaWYgKGVfcHJvcChlLCAiYWx0S2V5IikpIG5hbWUgPSAiQWx0
			LSIgKyBuYW1lOwogICAgICBpZiAoZV9wcm9wKGUsICJjdHJsS2V5IikpIG5hbWUgPSAiQ3RybC0i
			ICsgbmFtZTsKICAgICAgaWYgKGVfcHJvcChlLCAibWV0YUtleSIpKSBuYW1lID0gIkNtZC0iICsg
			bmFtZTsKCiAgICAgIGlmIChlX3Byb3AoZSwgInNoaWZ0S2V5IikpCiAgICAgICAgaGFuZGxlZCA9
			IGxvb2t1cEtleSgiU2hpZnQtIiArIG5hbWUsIG9wdGlvbnMuZXh0cmFLZXlzLCBvcHRpb25zLmtl
			eU1hcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGIpIHtyZXR1cm4gZG9I
			YW5kbGVCaW5kaW5nKGIsIHRydWUpO30pOwogICAgICBpZiAoIWhhbmRsZWQpCiAgICAgICAgaGFu
			ZGxlZCA9IGxvb2t1cEtleShuYW1lLCBvcHRpb25zLmV4dHJhS2V5cywgb3B0aW9ucy5rZXlNYXAs
			IGRvSGFuZGxlQmluZGluZyk7CgogICAgICBpZiAoaGFuZGxlZCkgZV9wcmV2ZW50RGVmYXVsdChl
			KTsKICAgICAgcmV0dXJuIGhhbmRsZWQ7CiAgICB9CiAgICBmdW5jdGlvbiBoYW5kbGVDaGFyQmlu
			ZGluZyhlLCBjaCkgewogICAgICB2YXIgaGFuZGxlZCA9IGxvb2t1cEtleSgiJyIgKyBjaCArICIn
			Iiwgb3B0aW9ucy5leHRyYUtleXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlv
			bnMua2V5TWFwLCBkb0hhbmRsZUJpbmRpbmcpOwogICAgICBpZiAoaGFuZGxlZCkgZV9wcmV2ZW50
			RGVmYXVsdChlKTsKICAgICAgcmV0dXJuIGhhbmRsZWQ7CiAgICB9CgogICAgdmFyIGxhc3RTdG9w
			cGVkS2V5ID0gbnVsbCwgbWF5YmVUcmFuc2l0aW9uOwogICAgZnVuY3Rpb24gb25LZXlEb3duKGUp
			IHsKICAgICAgaWYgKCFmb2N1c2VkKSBvbkZvY3VzKCk7CiAgICAgIGlmIChpZSAmJiBlLmtleUNv
			ZGUgPT0gMjcpIHsgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOyB9CiAgICAgIGlmIChwb2xsaW5nRmFz
			dCkgeyBpZiAocmVhZElucHV0KCkpIHBvbGxpbmdGYXN0ID0gZmFsc2U7IH0KICAgICAgaWYgKG9w
			dGlvbnMub25LZXlFdmVudCAmJiBvcHRpb25zLm9uS2V5RXZlbnQoaW5zdGFuY2UsIGFkZFN0b3Ao
			ZSkpKSByZXR1cm47CiAgICAgIHZhciBjb2RlID0gZV9wcm9wKGUsICJrZXlDb2RlIik7CiAgICAg
			IC8vIElFIGRvZXMgc3RyYW5nZSB0aGluZ3Mgd2l0aCBlc2NhcGUuCiAgICAgIHNldFNoaWZ0KGNv
			ZGUgPT0gMTYgfHwgZV9wcm9wKGUsICJzaGlmdEtleSIpKTsKICAgICAgLy8gRmlyc3QgZ2l2ZSBv
			bktleUV2ZW50IG9wdGlvbiBhIGNoYW5jZSB0byBoYW5kbGUgdGhpcy4KICAgICAgdmFyIGhhbmRs
			ZWQgPSBoYW5kbGVLZXlCaW5kaW5nKGUpOwogICAgICBpZiAod2luZG93Lm9wZXJhKSB7CiAgICAg
			ICAgbGFzdFN0b3BwZWRLZXkgPSBoYW5kbGVkID8gY29kZSA6IG51bGw7CiAgICAgICAgLy8gT3Bl
			cmEgaGFzIG5vIGN1dCBldmVudC4uLiB3ZSB0cnkgdG8gYXQgbGVhc3QgY2F0Y2ggdGhlIGtleSBj
			b21ibwogICAgICAgIGlmICghaGFuZGxlZCAmJiBjb2RlID09IDg4ICYmIGVfcHJvcChlLCBtYWMg
			PyAibWV0YUtleSIgOiAiY3RybEtleSIpKQogICAgICAgICAgcmVwbGFjZVNlbGVjdGlvbigiIik7
			CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIG9uS2V5UHJlc3MoZSkgewogICAgICBpZiAocG9s
			bGluZ0Zhc3QpIHJlYWRJbnB1dCgpOwogICAgICBpZiAob3B0aW9ucy5vbktleUV2ZW50ICYmIG9w
			dGlvbnMub25LZXlFdmVudChpbnN0YW5jZSwgYWRkU3RvcChlKSkpIHJldHVybjsKICAgICAgdmFy
			IGtleUNvZGUgPSBlX3Byb3AoZSwgImtleUNvZGUiKSwgY2hhckNvZGUgPSBlX3Byb3AoZSwgImNo
			YXJDb2RlIik7CiAgICAgIGlmICh3aW5kb3cub3BlcmEgJiYga2V5Q29kZSA9PSBsYXN0U3RvcHBl
			ZEtleSkge2xhc3RTdG9wcGVkS2V5ID0gbnVsbDsgZV9wcmV2ZW50RGVmYXVsdChlKTsgcmV0dXJu
			O30KICAgICAgaWYgKHdpbmRvdy5vcGVyYSAmJiAhZS53aGljaCAmJiBoYW5kbGVLZXlCaW5kaW5n
			KGUpKSByZXR1cm47CiAgICAgIHZhciBjaCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUg
			PT0gbnVsbCA/IGtleUNvZGUgOiBjaGFyQ29kZSk7CiAgICAgIGlmIChvcHRpb25zLmVsZWN0cmlj
			Q2hhcnMgJiYgbW9kZS5lbGVjdHJpY0NoYXJzICYmIG9wdGlvbnMuc21hcnRJbmRlbnQgJiYgIW9w
			dGlvbnMucmVhZE9ubHkpIHsKICAgICAgICBpZiAobW9kZS5lbGVjdHJpY0NoYXJzLmluZGV4T2Yo
			Y2gpID4gLTEpCiAgICAgICAgICBzZXRUaW1lb3V0KG9wZXJhdGlvbihmdW5jdGlvbigpIHtpbmRl
			bnRMaW5lKHNlbC50by5saW5lLCAic21hcnQiKTt9KSwgNzUpOwogICAgICB9CiAgICAgIGlmICho
			YW5kbGVDaGFyQmluZGluZyhlLCBjaCkpIHJldHVybjsKICAgICAgZmFzdFBvbGwoKTsKICAgIH0K
			ICAgIGZ1bmN0aW9uIG9uS2V5VXAoZSkgewogICAgICBpZiAob3B0aW9ucy5vbktleUV2ZW50ICYm
			IG9wdGlvbnMub25LZXlFdmVudChpbnN0YW5jZSwgYWRkU3RvcChlKSkpIHJldHVybjsKICAgICAg
			aWYgKGVfcHJvcChlLCAia2V5Q29kZSIpID09IDE2KSBzaGlmdFNlbGVjdGluZyA9IG51bGw7CiAg
			ICB9CgogICAgZnVuY3Rpb24gb25Gb2N1cygpIHsKICAgICAgaWYgKG9wdGlvbnMucmVhZE9ubHkg
			PT0gIm5vY3Vyc29yIikgcmV0dXJuOwogICAgICBpZiAoIWZvY3VzZWQpIHsKICAgICAgICBpZiAo
			b3B0aW9ucy5vbkZvY3VzKSBvcHRpb25zLm9uRm9jdXMoaW5zdGFuY2UpOwogICAgICAgIGZvY3Vz
			ZWQgPSB0cnVlOwogICAgICAgIGlmICh3cmFwcGVyLmNsYXNzTmFtZS5zZWFyY2goL1xiQ29kZU1p
			cnJvci1mb2N1c2VkXGIvKSA9PSAtMSkKICAgICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lICs9ICIg
			Q29kZU1pcnJvci1mb2N1c2VkIjsKICAgICAgICBpZiAoIWxlYXZlSW5wdXRBbG9uZSkgcmVzZXRJ
			bnB1dCh0cnVlKTsKICAgICAgfQogICAgICBzbG93UG9sbCgpOwogICAgICByZXN0YXJ0Qmxpbmso
			KTsKICAgIH0KICAgIGZ1bmN0aW9uIG9uQmx1cigpIHsKICAgICAgaWYgKGZvY3VzZWQpIHsKICAg
			ICAgICBpZiAob3B0aW9ucy5vbkJsdXIpIG9wdGlvbnMub25CbHVyKGluc3RhbmNlKTsKICAgICAg
			ICBmb2N1c2VkID0gZmFsc2U7CiAgICAgICAgaWYgKGJyYWNrZXRIaWdobGlnaHRlZCkKICAgICAg
			ICAgIG9wZXJhdGlvbihmdW5jdGlvbigpewogICAgICAgICAgICBpZiAoYnJhY2tldEhpZ2hsaWdo
			dGVkKSB7IGJyYWNrZXRIaWdobGlnaHRlZCgpOyBicmFja2V0SGlnaGxpZ2h0ZWQgPSBudWxsOyB9
			CiAgICAgICAgICB9KSgpOwogICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gd3JhcHBlci5jbGFz
			c05hbWUucmVwbGFjZSgiIENvZGVNaXJyb3ItZm9jdXNlZCIsICIiKTsKICAgICAgfQogICAgICBj
			bGVhckludGVydmFsKGJsaW5rZXIpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge2lmICgh
			Zm9jdXNlZCkgc2hpZnRTZWxlY3RpbmcgPSBudWxsO30sIDE1MCk7CiAgICB9CgogICAgLy8gUmVw
			bGFjZSB0aGUgcmFuZ2UgZnJvbSBmcm9tIHRvIHRvIGJ5IHRoZSBzdHJpbmdzIGluIG5ld1RleHQu
			CiAgICAvLyBBZnRlcndhcmRzLCBzZXQgdGhlIHNlbGVjdGlvbiB0byBzZWxGcm9tLCBzZWxUby4K
			ICAgIGZ1bmN0aW9uIHVwZGF0ZUxpbmVzKGZyb20sIHRvLCBuZXdUZXh0LCBzZWxGcm9tLCBzZWxU
			bykgewogICAgICBpZiAoc3VwcHJlc3NFZGl0cykgcmV0dXJuOwogICAgICBpZiAoaGlzdG9yeSkg
			ewogICAgICAgIHZhciBvbGQgPSBbXTsKICAgICAgICBkb2MuaXRlcihmcm9tLmxpbmUsIHRvLmxp
			bmUgKyAxLCBmdW5jdGlvbihsaW5lKSB7IG9sZC5wdXNoKGxpbmUudGV4dCk7IH0pOwogICAgICAg
			IGhpc3RvcnkuYWRkQ2hhbmdlKGZyb20ubGluZSwgbmV3VGV4dC5sZW5ndGgsIG9sZCk7CiAgICAg
			ICAgd2hpbGUgKGhpc3RvcnkuZG9uZS5sZW5ndGggPiBvcHRpb25zLnVuZG9EZXB0aCkgaGlzdG9y
			eS5kb25lLnNoaWZ0KCk7CiAgICAgIH0KICAgICAgdXBkYXRlTGluZXNOb1VuZG8oZnJvbSwgdG8s
			IG5ld1RleHQsIHNlbEZyb20sIHNlbFRvKTsKICAgIH0KICAgIGZ1bmN0aW9uIHVucmVkb0hlbHBl
			cihmcm9tLCB0bykgewogICAgICBpZiAoIWZyb20ubGVuZ3RoKSByZXR1cm47CiAgICAgIHZhciBz
			ZXQgPSBmcm9tLnBvcCgpLCBvdXQgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IHNldC5sZW5ndGgg
			LSAxOyBpID49IDA7IGkgLT0gMSkgewogICAgICAgIHZhciBjaGFuZ2UgPSBzZXRbaV07CiAgICAg
			ICAgdmFyIHJlcGxhY2VkID0gW10sIGVuZCA9IGNoYW5nZS5zdGFydCArIGNoYW5nZS5hZGRlZDsK
			ICAgICAgICBkb2MuaXRlcihjaGFuZ2Uuc3RhcnQsIGVuZCwgZnVuY3Rpb24obGluZSkgeyByZXBs
			YWNlZC5wdXNoKGxpbmUudGV4dCk7IH0pOwogICAgICAgIG91dC5wdXNoKHtzdGFydDogY2hhbmdl
			LnN0YXJ0LCBhZGRlZDogY2hhbmdlLm9sZC5sZW5ndGgsIG9sZDogcmVwbGFjZWR9KTsKICAgICAg
			ICB2YXIgcG9zID0gY2xpcFBvcyh7bGluZTogY2hhbmdlLnN0YXJ0ICsgY2hhbmdlLm9sZC5sZW5n
			dGggLSAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICBjaDogZWRpdEVuZChyZXBsYWNlZFty
			ZXBsYWNlZC5sZW5ndGgtMV0sIGNoYW5nZS5vbGRbY2hhbmdlLm9sZC5sZW5ndGgtMV0pfSk7CiAg
			ICAgICAgdXBkYXRlTGluZXNOb1VuZG8oe2xpbmU6IGNoYW5nZS5zdGFydCwgY2g6IDB9LCB7bGlu
			ZTogZW5kIC0gMSwgY2g6IGdldExpbmUoZW5kLTEpLnRleHQubGVuZ3RofSwgY2hhbmdlLm9sZCwg
			cG9zLCBwb3MpOwogICAgICB9CiAgICAgIHVwZGF0ZUlucHV0ID0gdHJ1ZTsKICAgICAgdG8ucHVz
			aChvdXQpOwogICAgfQogICAgZnVuY3Rpb24gdW5kbygpIHt1bnJlZG9IZWxwZXIoaGlzdG9yeS5k
			b25lLCBoaXN0b3J5LnVuZG9uZSk7fQogICAgZnVuY3Rpb24gcmVkbygpIHt1bnJlZG9IZWxwZXIo
			aGlzdG9yeS51bmRvbmUsIGhpc3RvcnkuZG9uZSk7fQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUxpbmVz
			Tm9VbmRvKGZyb20sIHRvLCBuZXdUZXh0LCBzZWxGcm9tLCBzZWxUbykgewogICAgICBpZiAoc3Vw
			cHJlc3NFZGl0cykgcmV0dXJuOwogICAgICB2YXIgcmVjb21wdXRlTWF4TGVuZ3RoID0gZmFsc2Us
			IG1heExpbmVMZW5ndGggPSBtYXhMaW5lLmxlbmd0aDsKICAgICAgaWYgKCFvcHRpb25zLmxpbmVX
			cmFwcGluZykKICAgICAgICBkb2MuaXRlcihmcm9tLmxpbmUsIHRvLmxpbmUsIGZ1bmN0aW9uKGxp
			bmUpIHsKICAgICAgICAgIGlmIChsaW5lLnRleHQubGVuZ3RoID09IG1heExpbmVMZW5ndGgpIHty
			ZWNvbXB1dGVNYXhMZW5ndGggPSB0cnVlOyByZXR1cm4gdHJ1ZTt9CiAgICAgICAgfSk7CiAgICAg
			IGlmIChmcm9tLmxpbmUgIT0gdG8ubGluZSB8fCBuZXdUZXh0Lmxlbmd0aCA+IDEpIGd1dHRlckRp
			cnR5ID0gdHJ1ZTsKCiAgICAgIHZhciBubGluZXMgPSB0by5saW5lIC0gZnJvbS5saW5lLCBmaXJz
			dExpbmUgPSBnZXRMaW5lKGZyb20ubGluZSksIGxhc3RMaW5lID0gZ2V0TGluZSh0by5saW5lKTsK
			ICAgICAgLy8gRmlyc3QgYWRqdXN0IHRoZSBsaW5lIHN0cnVjdHVyZSwgdGFraW5nIHNvbWUgY2Fy
			ZSB0byBsZWF2ZSBoaWdobGlnaHRpbmcgaW50YWN0LgogICAgICBpZiAoZnJvbS5jaCA9PSAwICYm
			IHRvLmNoID09IDAgJiYgbmV3VGV4dFtuZXdUZXh0Lmxlbmd0aCAtIDFdID09ICIiKSB7CiAgICAg
			ICAgLy8gVGhpcyBpcyBhIHdob2xlLWxpbmUgcmVwbGFjZS4gVHJlYXRlZCBzcGVjaWFsbHkgdG8g
			bWFrZQogICAgICAgIC8vIHN1cmUgbGluZSBvYmplY3RzIG1vdmUgdGhlIHdheSB0aGV5IGFyZSBz
			dXBwb3NlZCB0by4KICAgICAgICB2YXIgYWRkZWQgPSBbXSwgcHJldkxpbmUgPSBudWxsOwogICAg
			ICAgIGlmIChmcm9tLmxpbmUpIHsKICAgICAgICAgIHByZXZMaW5lID0gZ2V0TGluZShmcm9tLmxp
			bmUgLSAxKTsKICAgICAgICAgIHByZXZMaW5lLmZpeE1hcmtFbmRzKGxhc3RMaW5lKTsKICAgICAg
			ICB9IGVsc2UgbGFzdExpbmUuZml4TWFya1N0YXJ0cygpOwogICAgICAgIGZvciAodmFyIGkgPSAw
			LCBlID0gbmV3VGV4dC5sZW5ndGggLSAxOyBpIDwgZTsgKytpKQogICAgICAgICAgYWRkZWQucHVz
			aChMaW5lLmluaGVyaXRNYXJrcyhuZXdUZXh0W2ldLCBwcmV2TGluZSkpOwogICAgICAgIGlmIChu
			bGluZXMpIGRvYy5yZW1vdmUoZnJvbS5saW5lLCBubGluZXMsIGNhbGxiYWNrcyk7CiAgICAgICAg
			aWYgKGFkZGVkLmxlbmd0aCkgZG9jLmluc2VydChmcm9tLmxpbmUsIGFkZGVkKTsKICAgICAgfSBl
			bHNlIGlmIChmaXJzdExpbmUgPT0gbGFzdExpbmUpIHsKICAgICAgICBpZiAobmV3VGV4dC5sZW5n
			dGggPT0gMSkKICAgICAgICAgIGZpcnN0TGluZS5yZXBsYWNlKGZyb20uY2gsIHRvLmNoLCBuZXdU
			ZXh0WzBdKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgIGxhc3RMaW5lID0gZmlyc3RMaW5lLnNw
			bGl0KHRvLmNoLCBuZXdUZXh0W25ld1RleHQubGVuZ3RoLTFdKTsKICAgICAgICAgIGZpcnN0TGlu
			ZS5yZXBsYWNlKGZyb20uY2gsIG51bGwsIG5ld1RleHRbMF0pOwogICAgICAgICAgZmlyc3RMaW5l
			LmZpeE1hcmtFbmRzKGxhc3RMaW5lKTsKICAgICAgICAgIHZhciBhZGRlZCA9IFtdOwogICAgICAg
			ICAgZm9yICh2YXIgaSA9IDEsIGUgPSBuZXdUZXh0Lmxlbmd0aCAtIDE7IGkgPCBlOyArK2kpCiAg
			ICAgICAgICAgIGFkZGVkLnB1c2goTGluZS5pbmhlcml0TWFya3MobmV3VGV4dFtpXSwgZmlyc3RM
			aW5lKSk7CiAgICAgICAgICBhZGRlZC5wdXNoKGxhc3RMaW5lKTsKICAgICAgICAgIGRvYy5pbnNl
			cnQoZnJvbS5saW5lICsgMSwgYWRkZWQpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChuZXdU
			ZXh0Lmxlbmd0aCA9PSAxKSB7CiAgICAgICAgZmlyc3RMaW5lLnJlcGxhY2UoZnJvbS5jaCwgbnVs
			bCwgbmV3VGV4dFswXSk7CiAgICAgICAgbGFzdExpbmUucmVwbGFjZShudWxsLCB0by5jaCwgIiIp
			OwogICAgICAgIGZpcnN0TGluZS5hcHBlbmQobGFzdExpbmUpOwogICAgICAgIGRvYy5yZW1vdmUo
			ZnJvbS5saW5lICsgMSwgbmxpbmVzLCBjYWxsYmFja3MpOwogICAgICB9IGVsc2UgewogICAgICAg
			IHZhciBhZGRlZCA9IFtdOwogICAgICAgIGZpcnN0TGluZS5yZXBsYWNlKGZyb20uY2gsIG51bGws
			IG5ld1RleHRbMF0pOwogICAgICAgIGxhc3RMaW5lLnJlcGxhY2UobnVsbCwgdG8uY2gsIG5ld1Rl
			eHRbbmV3VGV4dC5sZW5ndGgtMV0pOwogICAgICAgIGZpcnN0TGluZS5maXhNYXJrRW5kcyhsYXN0
			TGluZSk7CiAgICAgICAgZm9yICh2YXIgaSA9IDEsIGUgPSBuZXdUZXh0Lmxlbmd0aCAtIDE7IGkg
			PCBlOyArK2kpCiAgICAgICAgICBhZGRlZC5wdXNoKExpbmUuaW5oZXJpdE1hcmtzKG5ld1RleHRb
			aV0sIGZpcnN0TGluZSkpOwogICAgICAgIGlmIChubGluZXMgPiAxKSBkb2MucmVtb3ZlKGZyb20u
			bGluZSArIDEsIG5saW5lcyAtIDEsIGNhbGxiYWNrcyk7CiAgICAgICAgZG9jLmluc2VydChmcm9t
			LmxpbmUgKyAxLCBhZGRlZCk7CiAgICAgIH0KICAgICAgaWYgKG9wdGlvbnMubGluZVdyYXBwaW5n
			KSB7CiAgICAgICAgdmFyIHBlckxpbmUgPSBzY3JvbGxlci5jbGllbnRXaWR0aCAvIGNoYXJXaWR0
			aCgpIC0gMzsKICAgICAgICBkb2MuaXRlcihmcm9tLmxpbmUsIGZyb20ubGluZSArIG5ld1RleHQu
			bGVuZ3RoLCBmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgICBpZiAobGluZS5oaWRkZW4pIHJldHVy
			bjsKICAgICAgICAgIHZhciBndWVzcyA9IE1hdGguY2VpbChsaW5lLnRleHQubGVuZ3RoIC8gcGVy
			TGluZSkgfHwgMTsKICAgICAgICAgIGlmIChndWVzcyAhPSBsaW5lLmhlaWdodCkgdXBkYXRlTGlu
			ZUhlaWdodChsaW5lLCBndWVzcyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAg
			ZG9jLml0ZXIoZnJvbS5saW5lLCBpICsgbmV3VGV4dC5sZW5ndGgsIGZ1bmN0aW9uKGxpbmUpIHsK
			ICAgICAgICAgIHZhciBsID0gbGluZS50ZXh0OwogICAgICAgICAgaWYgKGwubGVuZ3RoID4gbWF4
			TGluZUxlbmd0aCkgewogICAgICAgICAgICBtYXhMaW5lID0gbDsgbWF4TGluZUxlbmd0aCA9IGwu
			bGVuZ3RoOyBtYXhXaWR0aCA9IG51bGw7CiAgICAgICAgICAgIHJlY29tcHV0ZU1heExlbmd0aCA9
			IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmIChyZWNvbXB1dGVNYXhM
			ZW5ndGgpIHsKICAgICAgICAgIG1heExpbmVMZW5ndGggPSAwOyBtYXhMaW5lID0gIiI7IG1heFdp
			ZHRoID0gbnVsbDsKICAgICAgICAgIGRvYy5pdGVyKDAsIGRvYy5zaXplLCBmdW5jdGlvbihsaW5l
			KSB7CiAgICAgICAgICAgIHZhciBsID0gbGluZS50ZXh0OwogICAgICAgICAgICBpZiAobC5sZW5n
			dGggPiBtYXhMaW5lTGVuZ3RoKSB7CiAgICAgICAgICAgICAgbWF4TGluZUxlbmd0aCA9IGwubGVu
			Z3RoOyBtYXhMaW5lID0gbDsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQog
			ICAgICB9CgogICAgICAvLyBBZGQgdGhlc2UgbGluZXMgdG8gdGhlIHdvcmsgYXJyYXksIHNvIHRo
			YXQgdGhleSB3aWxsIGJlCiAgICAgIC8vIGhpZ2hsaWdodGVkLiBBZGp1c3Qgd29yayBsaW5lcyBp
			ZiBsaW5lcyB3ZXJlIGFkZGVkL3JlbW92ZWQuCiAgICAgIHZhciBuZXdXb3JrID0gW10sIGxlbmRp
			ZmYgPSBuZXdUZXh0Lmxlbmd0aCAtIG5saW5lcyAtIDE7CiAgICAgIGZvciAodmFyIGkgPSAwLCBs
			ID0gd29yay5sZW5ndGg7IGkgPCBsOyArK2kpIHsKICAgICAgICB2YXIgdGFzayA9IHdvcmtbaV07
			CiAgICAgICAgaWYgKHRhc2sgPCBmcm9tLmxpbmUpIG5ld1dvcmsucHVzaCh0YXNrKTsKICAgICAg
			ICBlbHNlIGlmICh0YXNrID4gdG8ubGluZSkgbmV3V29yay5wdXNoKHRhc2sgKyBsZW5kaWZmKTsK
			ICAgICAgfQogICAgICB2YXIgaGxFbmQgPSBmcm9tLmxpbmUgKyBNYXRoLm1pbihuZXdUZXh0Lmxl
			bmd0aCwgNTAwKTsKICAgICAgaGlnaGxpZ2h0TGluZXMoZnJvbS5saW5lLCBobEVuZCk7CiAgICAg
			IG5ld1dvcmsucHVzaChobEVuZCk7CiAgICAgIHdvcmsgPSBuZXdXb3JrOwogICAgICBzdGFydFdv
			cmtlcigxMDApOwogICAgICAvLyBSZW1lbWJlciB0aGF0IHRoZXNlIGxpbmVzIGNoYW5nZWQsIGZv
			ciB1cGRhdGluZyB0aGUgZGlzcGxheQogICAgICBjaGFuZ2VzLnB1c2goe2Zyb206IGZyb20ubGlu
			ZSwgdG86IHRvLmxpbmUgKyAxLCBkaWZmOiBsZW5kaWZmfSk7CiAgICAgIHZhciBjaGFuZ2VPYmog
			PSB7ZnJvbTogZnJvbSwgdG86IHRvLCB0ZXh0OiBuZXdUZXh0fTsKICAgICAgaWYgKHRleHRDaGFu
			Z2VkKSB7CiAgICAgICAgZm9yICh2YXIgY3VyID0gdGV4dENoYW5nZWQ7IGN1ci5uZXh0OyBjdXIg
			PSBjdXIubmV4dCkge30KICAgICAgICBjdXIubmV4dCA9IGNoYW5nZU9iajsKICAgICAgfSBlbHNl
			IHRleHRDaGFuZ2VkID0gY2hhbmdlT2JqOwoKICAgICAgLy8gVXBkYXRlIHRoZSBzZWxlY3Rpb24K
			ICAgICAgZnVuY3Rpb24gdXBkYXRlTGluZShuKSB7cmV0dXJuIG4gPD0gTWF0aC5taW4odG8ubGlu
			ZSwgdG8ubGluZSArIGxlbmRpZmYpID8gbiA6IG4gKyBsZW5kaWZmO30KICAgICAgc2V0U2VsZWN0
			aW9uKHNlbEZyb20sIHNlbFRvLCB1cGRhdGVMaW5lKHNlbC5mcm9tLmxpbmUpLCB1cGRhdGVMaW5l
			KHNlbC50by5saW5lKSk7CgogICAgICAvLyBNYWtlIHN1cmUgdGhlIHNjcm9sbC1zaXplIGRpdiBo
			YXMgdGhlIGNvcnJlY3QgaGVpZ2h0LgogICAgICBpZiAoc2Nyb2xsZXIuY2xpZW50SGVpZ2h0KQog
			ICAgICAgIGNvZGUuc3R5bGUuaGVpZ2h0ID0gKGRvYy5oZWlnaHQgKiB0ZXh0SGVpZ2h0KCkgKyAy
			ICogcGFkZGluZ1RvcCgpKSArICJweCI7CiAgICB9CgogICAgZnVuY3Rpb24gcmVwbGFjZVJhbmdl
			KGNvZGUsIGZyb20sIHRvKSB7CiAgICAgIGZyb20gPSBjbGlwUG9zKGZyb20pOwogICAgICBpZiAo
			IXRvKSB0byA9IGZyb207IGVsc2UgdG8gPSBjbGlwUG9zKHRvKTsKICAgICAgY29kZSA9IHNwbGl0
			TGluZXMoY29kZSk7CiAgICAgIGZ1bmN0aW9uIGFkanVzdFBvcyhwb3MpIHsKICAgICAgICBpZiAo
			cG9zTGVzcyhwb3MsIGZyb20pKSByZXR1cm4gcG9zOwogICAgICAgIGlmICghcG9zTGVzcyh0bywg
			cG9zKSkgcmV0dXJuIGVuZDsKICAgICAgICB2YXIgbGluZSA9IHBvcy5saW5lICsgY29kZS5sZW5n
			dGggLSAodG8ubGluZSAtIGZyb20ubGluZSkgLSAxOwogICAgICAgIHZhciBjaCA9IHBvcy5jaDsK
			ICAgICAgICBpZiAocG9zLmxpbmUgPT0gdG8ubGluZSkKICAgICAgICAgIGNoICs9IGNvZGVbY29k
			ZS5sZW5ndGgtMV0ubGVuZ3RoIC0gKHRvLmNoIC0gKHRvLmxpbmUgPT0gZnJvbS5saW5lID8gZnJv
			bS5jaCA6IDApKTsKICAgICAgICByZXR1cm4ge2xpbmU6IGxpbmUsIGNoOiBjaH07CiAgICAgIH0K
			ICAgICAgdmFyIGVuZDsKICAgICAgcmVwbGFjZVJhbmdlMShjb2RlLCBmcm9tLCB0bywgZnVuY3Rp
			b24oZW5kMSkgewogICAgICAgIGVuZCA9IGVuZDE7CiAgICAgICAgcmV0dXJuIHtmcm9tOiBhZGp1
			c3RQb3Moc2VsLmZyb20pLCB0bzogYWRqdXN0UG9zKHNlbC50byl9OwogICAgICB9KTsKICAgICAg
			cmV0dXJuIGVuZDsKICAgIH0KICAgIGZ1bmN0aW9uIHJlcGxhY2VTZWxlY3Rpb24oY29kZSwgY29s
			bGFwc2UpIHsKICAgICAgcmVwbGFjZVJhbmdlMShzcGxpdExpbmVzKGNvZGUpLCBzZWwuZnJvbSwg
			c2VsLnRvLCBmdW5jdGlvbihlbmQpIHsKICAgICAgICBpZiAoY29sbGFwc2UgPT0gImVuZCIpIHJl
			dHVybiB7ZnJvbTogZW5kLCB0bzogZW5kfTsKICAgICAgICBlbHNlIGlmIChjb2xsYXBzZSA9PSAi
			c3RhcnQiKSByZXR1cm4ge2Zyb206IHNlbC5mcm9tLCB0bzogc2VsLmZyb219OwogICAgICAgIGVs
			c2UgcmV0dXJuIHtmcm9tOiBzZWwuZnJvbSwgdG86IGVuZH07CiAgICAgIH0pOwogICAgfQogICAg
			ZnVuY3Rpb24gcmVwbGFjZVJhbmdlMShjb2RlLCBmcm9tLCB0bywgY29tcHV0ZVNlbCkgewogICAg
			ICB2YXIgZW5kY2ggPSBjb2RlLmxlbmd0aCA9PSAxID8gY29kZVswXS5sZW5ndGggKyBmcm9tLmNo
			IDogY29kZVtjb2RlLmxlbmd0aC0xXS5sZW5ndGg7CiAgICAgIHZhciBuZXdTZWwgPSBjb21wdXRl
			U2VsKHtsaW5lOiBmcm9tLmxpbmUgKyBjb2RlLmxlbmd0aCAtIDEsIGNoOiBlbmRjaH0pOwogICAg
			ICB1cGRhdGVMaW5lcyhmcm9tLCB0bywgY29kZSwgbmV3U2VsLmZyb20sIG5ld1NlbC50byk7CiAg
			ICB9CgogICAgZnVuY3Rpb24gZ2V0UmFuZ2UoZnJvbSwgdG8pIHsKICAgICAgdmFyIGwxID0gZnJv
			bS5saW5lLCBsMiA9IHRvLmxpbmU7CiAgICAgIGlmIChsMSA9PSBsMikgcmV0dXJuIGdldExpbmUo
			bDEpLnRleHQuc2xpY2UoZnJvbS5jaCwgdG8uY2gpOwogICAgICB2YXIgY29kZSA9IFtnZXRMaW5l
			KGwxKS50ZXh0LnNsaWNlKGZyb20uY2gpXTsKICAgICAgZG9jLml0ZXIobDEgKyAxLCBsMiwgZnVu
			Y3Rpb24obGluZSkgeyBjb2RlLnB1c2gobGluZS50ZXh0KTsgfSk7CiAgICAgIGNvZGUucHVzaChn
			ZXRMaW5lKGwyKS50ZXh0LnNsaWNlKDAsIHRvLmNoKSk7CiAgICAgIHJldHVybiBjb2RlLmpvaW4o
			IlxuIik7CiAgICB9CiAgICBmdW5jdGlvbiBnZXRTZWxlY3Rpb24oKSB7CiAgICAgIHJldHVybiBn
			ZXRSYW5nZShzZWwuZnJvbSwgc2VsLnRvKTsKICAgIH0KCiAgICB2YXIgcG9sbGluZ0Zhc3QgPSBm
			YWxzZTsgLy8gRW5zdXJlcyBzbG93UG9sbCBkb2Vzbid0IGNhbmNlbCBmYXN0UG9sbAogICAgZnVu
			Y3Rpb24gc2xvd1BvbGwoKSB7CiAgICAgIGlmIChwb2xsaW5nRmFzdCkgcmV0dXJuOwogICAgICBw
			b2xsLnNldChvcHRpb25zLnBvbGxJbnRlcnZhbCwgZnVuY3Rpb24oKSB7CiAgICAgICAgc3RhcnRP
			cGVyYXRpb24oKTsKICAgICAgICByZWFkSW5wdXQoKTsKICAgICAgICBpZiAoZm9jdXNlZCkgc2xv
			d1BvbGwoKTsKICAgICAgICBlbmRPcGVyYXRpb24oKTsKICAgICAgfSk7CiAgICB9CiAgICBmdW5j
			dGlvbiBmYXN0UG9sbCgpIHsKICAgICAgdmFyIG1pc3NlZCA9IGZhbHNlOwogICAgICBwb2xsaW5n
			RmFzdCA9IHRydWU7CiAgICAgIGZ1bmN0aW9uIHAoKSB7CiAgICAgICAgc3RhcnRPcGVyYXRpb24o
			KTsKICAgICAgICB2YXIgY2hhbmdlZCA9IHJlYWRJbnB1dCgpOwogICAgICAgIGlmICghY2hhbmdl
			ZCAmJiAhbWlzc2VkKSB7bWlzc2VkID0gdHJ1ZTsgcG9sbC5zZXQoNjAsIHApO30KICAgICAgICBl
			bHNlIHtwb2xsaW5nRmFzdCA9IGZhbHNlOyBzbG93UG9sbCgpO30KICAgICAgICBlbmRPcGVyYXRp
			b24oKTsKICAgICAgfQogICAgICBwb2xsLnNldCgyMCwgcCk7CiAgICB9CgogICAgLy8gUHJldmlu
			cHV0IGlzIGEgaGFjayB0byB3b3JrIHdpdGggSU1FLiBJZiB3ZSByZXNldCB0aGUgdGV4dGFyZWEK
			ICAgIC8vIG9uIGV2ZXJ5IGNoYW5nZSwgdGhhdCBicmVha3MgSU1FLiBTbyB3ZSBsb29rIGZvciBj
			aGFuZ2VzCiAgICAvLyBjb21wYXJlZCB0byB0aGUgcHJldmlvdXMgY29udGVudCBpbnN0ZWFkLiAo
			TW9kZXJuIGJyb3dzZXJzIGhhdmUKICAgIC8vIGV2ZW50cyB0aGF0IGluZGljYXRlIElNRSB0YWtp
			bmcgcGxhY2UsIGJ1dCB0aGVzZSBhcmUgbm90IHdpZGVseQogICAgLy8gc3VwcG9ydGVkIG9yIGNv
			bXBhdGlibGUgZW5vdWdoIHlldCB0byByZWx5IG9uLikKICAgIHZhciBwcmV2SW5wdXQgPSAiIjsK
			ICAgIGZ1bmN0aW9uIHJlYWRJbnB1dCgpIHsKICAgICAgaWYgKGxlYXZlSW5wdXRBbG9uZSB8fCAh
			Zm9jdXNlZCB8fCBoYXNTZWxlY3Rpb24oaW5wdXQpIHx8IG9wdGlvbnMucmVhZE9ubHkpIHJldHVy
			biBmYWxzZTsKICAgICAgdmFyIHRleHQgPSBpbnB1dC52YWx1ZTsKICAgICAgaWYgKHRleHQgPT0g
			cHJldklucHV0KSByZXR1cm4gZmFsc2U7CiAgICAgIHNoaWZ0U2VsZWN0aW5nID0gbnVsbDsKICAg
			ICAgdmFyIHNhbWUgPSAwLCBsID0gTWF0aC5taW4ocHJldklucHV0Lmxlbmd0aCwgdGV4dC5sZW5n
			dGgpOwogICAgICB3aGlsZSAoc2FtZSA8IGwgJiYgcHJldklucHV0W3NhbWVdID09IHRleHRbc2Ft
			ZV0pICsrc2FtZTsKICAgICAgaWYgKHNhbWUgPCBwcmV2SW5wdXQubGVuZ3RoKQogICAgICAgIHNl
			bC5mcm9tID0ge2xpbmU6IHNlbC5mcm9tLmxpbmUsIGNoOiBzZWwuZnJvbS5jaCAtIChwcmV2SW5w
			dXQubGVuZ3RoIC0gc2FtZSl9OwogICAgICBlbHNlIGlmIChvdmVyd3JpdGUgJiYgcG9zRXEoc2Vs
			LmZyb20sIHNlbC50bykpCiAgICAgICAgc2VsLnRvID0ge2xpbmU6IHNlbC50by5saW5lLCBjaDog
			TWF0aC5taW4oZ2V0TGluZShzZWwudG8ubGluZSkudGV4dC5sZW5ndGgsIHNlbC50by5jaCArICh0
			ZXh0Lmxlbmd0aCAtIHNhbWUpKX07CiAgICAgIHJlcGxhY2VTZWxlY3Rpb24odGV4dC5zbGljZShz
			YW1lKSwgImVuZCIpOwogICAgICBwcmV2SW5wdXQgPSB0ZXh0OwogICAgICByZXR1cm4gdHJ1ZTsK
			ICAgIH0KICAgIGZ1bmN0aW9uIHJlc2V0SW5wdXQodXNlcikgewogICAgICBpZiAoIXBvc0VxKHNl
			bC5mcm9tLCBzZWwudG8pKSB7CiAgICAgICAgcHJldklucHV0ID0gIiI7CiAgICAgICAgaW5wdXQu
			dmFsdWUgPSBnZXRTZWxlY3Rpb24oKTsKICAgICAgICBzZWxlY3RJbnB1dChpbnB1dCk7CiAgICAg
			IH0gZWxzZSBpZiAodXNlcikgcHJldklucHV0ID0gaW5wdXQudmFsdWUgPSAiIjsKICAgIH0KCiAg
			ICBmdW5jdGlvbiBmb2N1c0lucHV0KCkgewogICAgICBpZiAob3B0aW9ucy5yZWFkT25seSAhPSAi
			bm9jdXJzb3IiKSBpbnB1dC5mb2N1cygpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNjcm9sbEVkaXRv
			ckludG9WaWV3KCkgewogICAgICBpZiAoIWN1cnNvci5nZXRCb3VuZGluZ0NsaWVudFJlY3QpIHJl
			dHVybjsKICAgICAgdmFyIHJlY3QgPSBjdXJzb3IuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAg
			ICAgIC8vIElFIHJldHVybnMgYm9ndXMgY29vcmRpbmF0ZXMgd2hlbiB0aGUgaW5zdGFuY2Ugc2l0
			cyBpbnNpZGUgb2YgYW4gaWZyYW1lIGFuZCB0aGUgY3Vyc29yIGlzIGhpZGRlbgogICAgICBpZiAo
			aWUgJiYgcmVjdC50b3AgPT0gcmVjdC5ib3R0b20pIHJldHVybjsKICAgICAgdmFyIHdpbkggPSB3
			aW5kb3cuaW5uZXJIZWlnaHQgfHwgTWF0aC5tYXgoZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQs
			IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQpOwogICAgICBpZiAocmVjdC50
			b3AgPCAwIHx8IHJlY3QuYm90dG9tID4gd2luSCkgY3Vyc29yLnNjcm9sbEludG9WaWV3KCk7CiAg
			ICB9CiAgICBmdW5jdGlvbiBzY3JvbGxDdXJzb3JJbnRvVmlldygpIHsKICAgICAgdmFyIGN1cnNv
			ciA9IGxvY2FsQ29vcmRzKHNlbC5pbnZlcnRlZCA/IHNlbC5mcm9tIDogc2VsLnRvKTsKICAgICAg
			dmFyIHggPSBvcHRpb25zLmxpbmVXcmFwcGluZyA/IE1hdGgubWluKGN1cnNvci54LCBsaW5lU3Bh
			Y2Uub2Zmc2V0V2lkdGgpIDogY3Vyc29yLng7CiAgICAgIHJldHVybiBzY3JvbGxJbnRvVmlldyh4
			LCBjdXJzb3IueSwgeCwgY3Vyc29yLnlCb3QpOwogICAgfQogICAgZnVuY3Rpb24gc2Nyb2xsSW50
			b1ZpZXcoeDEsIHkxLCB4MiwgeTIpIHsKICAgICAgdmFyIHBsID0gcGFkZGluZ0xlZnQoKSwgcHQg
			PSBwYWRkaW5nVG9wKCksIGxoID0gdGV4dEhlaWdodCgpOwogICAgICB5MSArPSBwdDsgeTIgKz0g
			cHQ7IHgxICs9IHBsOyB4MiArPSBwbDsKICAgICAgdmFyIHNjcmVlbiA9IHNjcm9sbGVyLmNsaWVu
			dEhlaWdodCwgc2NyZWVudG9wID0gc2Nyb2xsZXIuc2Nyb2xsVG9wLCBzY3JvbGxlZCA9IGZhbHNl
			LCByZXN1bHQgPSB0cnVlOwogICAgICBpZiAoeTEgPCBzY3JlZW50b3ApIHtzY3JvbGxlci5zY3Jv
			bGxUb3AgPSBNYXRoLm1heCgwLCB5MSAtIDIqbGgpOyBzY3JvbGxlZCA9IHRydWU7fQogICAgICBl
			bHNlIGlmICh5MiA+IHNjcmVlbnRvcCArIHNjcmVlbikge3Njcm9sbGVyLnNjcm9sbFRvcCA9IHky
			ICsgbGggLSBzY3JlZW47IHNjcm9sbGVkID0gdHJ1ZTt9CgogICAgICB2YXIgc2NyZWVudyA9IHNj
			cm9sbGVyLmNsaWVudFdpZHRoLCBzY3JlZW5sZWZ0ID0gc2Nyb2xsZXIuc2Nyb2xsTGVmdDsKICAg
			ICAgdmFyIGd1dHRlcncgPSBvcHRpb25zLmZpeGVkR3V0dGVyID8gZ3V0dGVyLmNsaWVudFdpZHRo
			IDogMDsKICAgICAgaWYgKHgxIDwgc2NyZWVubGVmdCArIGd1dHRlcncpIHsKICAgICAgICBpZiAo
			eDEgPCA1MCkgeDEgPSAwOwogICAgICAgIHNjcm9sbGVyLnNjcm9sbExlZnQgPSBNYXRoLm1heCgw
			LCB4MSAtIDEwIC0gZ3V0dGVydyk7CiAgICAgICAgc2Nyb2xsZWQgPSB0cnVlOwogICAgICB9CiAg
			ICAgIGVsc2UgaWYgKHgyID4gc2NyZWVudyArIHNjcmVlbmxlZnQgLSAzKSB7CiAgICAgICAgc2Ny
			b2xsZXIuc2Nyb2xsTGVmdCA9IHgyICsgMTAgLSBzY3JlZW53OwogICAgICAgIHNjcm9sbGVkID0g
			dHJ1ZTsKICAgICAgICBpZiAoeDIgPiBjb2RlLmNsaWVudFdpZHRoKSByZXN1bHQgPSBmYWxzZTsK
			ICAgICAgfQogICAgICBpZiAoc2Nyb2xsZWQgJiYgb3B0aW9ucy5vblNjcm9sbCkgb3B0aW9ucy5v
			blNjcm9sbChpbnN0YW5jZSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgZnVuY3Rp
			b24gdmlzaWJsZUxpbmVzKCkgewogICAgICB2YXIgbGggPSB0ZXh0SGVpZ2h0KCksIHRvcCA9IHNj
			cm9sbGVyLnNjcm9sbFRvcCAtIHBhZGRpbmdUb3AoKTsKICAgICAgdmFyIGZyb21faGVpZ2h0ID0g
			TWF0aC5tYXgoMCwgTWF0aC5mbG9vcih0b3AgLyBsaCkpOwogICAgICB2YXIgdG9faGVpZ2h0ID0g
			TWF0aC5jZWlsKCh0b3AgKyBzY3JvbGxlci5jbGllbnRIZWlnaHQpIC8gbGgpOwogICAgICByZXR1
			cm4ge2Zyb206IGxpbmVBdEhlaWdodChkb2MsIGZyb21faGVpZ2h0KSwKICAgICAgICAgICAgICB0
			bzogbGluZUF0SGVpZ2h0KGRvYywgdG9faGVpZ2h0KX07CiAgICB9CiAgICAvLyBVc2VzIGEgc2V0
			IG9mIGNoYW5nZXMgcGx1cyB0aGUgY3VycmVudCBzY3JvbGwgcG9zaXRpb24gdG8KICAgIC8vIGRl
			dGVybWluZSB3aGljaCBET00gdXBkYXRlcyBoYXZlIHRvIGJlIG1hZGUsIGFuZCBtYWtlcyB0aGUK
			ICAgIC8vIHVwZGF0ZXMuCiAgICBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5KGNoYW5nZXMsIHN1cHBy
			ZXNzQ2FsbGJhY2spIHsKICAgICAgaWYgKCFzY3JvbGxlci5jbGllbnRXaWR0aCkgewogICAgICAg
			IHNob3dpbmdGcm9tID0gc2hvd2luZ1RvID0gZGlzcGxheU9mZnNldCA9IDA7CiAgICAgICAgcmV0
			dXJuOwogICAgICB9CiAgICAgIC8vIENvbXB1dGUgdGhlIG5ldyB2aXNpYmxlIHdpbmRvdwogICAg
			ICB2YXIgdmlzaWJsZSA9IHZpc2libGVMaW5lcygpOwogICAgICAvLyBCYWlsIG91dCBpZiB0aGUg
			dmlzaWJsZSBhcmVhIGlzIGFscmVhZHkgcmVuZGVyZWQgYW5kIG5vdGhpbmcgY2hhbmdlZC4KICAg
			ICAgaWYgKGNoYW5nZXMgIT09IHRydWUgJiYgY2hhbmdlcy5sZW5ndGggPT0gMCAmJiB2aXNpYmxl
			LmZyb20gPiBzaG93aW5nRnJvbSAmJiB2aXNpYmxlLnRvIDwgc2hvd2luZ1RvKSByZXR1cm47CiAg
			ICAgIHZhciBmcm9tID0gTWF0aC5tYXgodmlzaWJsZS5mcm9tIC0gMTAwLCAwKSwgdG8gPSBNYXRo
			Lm1pbihkb2Muc2l6ZSwgdmlzaWJsZS50byArIDEwMCk7CiAgICAgIGlmIChzaG93aW5nRnJvbSA8
			IGZyb20gJiYgZnJvbSAtIHNob3dpbmdGcm9tIDwgMjApIGZyb20gPSBzaG93aW5nRnJvbTsKICAg
			ICAgaWYgKHNob3dpbmdUbyA+IHRvICYmIHNob3dpbmdUbyAtIHRvIDwgMjApIHRvID0gTWF0aC5t
			aW4oZG9jLnNpemUsIHNob3dpbmdUbyk7CgogICAgICAvLyBDcmVhdGUgYSByYW5nZSBvZiB0aGVv
			cmV0aWNhbGx5IGludGFjdCBsaW5lcywgYW5kIHB1bmNoIGhvbGVzCiAgICAgIC8vIGluIHRoYXQg
			dXNpbmcgdGhlIGNoYW5nZSBpbmZvLgogICAgICB2YXIgaW50YWN0ID0gY2hhbmdlcyA9PT0gdHJ1
			ZSA/IFtdIDoKICAgICAgICBjb21wdXRlSW50YWN0KFt7ZnJvbTogc2hvd2luZ0Zyb20sIHRvOiBz
			aG93aW5nVG8sIGRvbVN0YXJ0OiAwfV0sIGNoYW5nZXMpOwogICAgICAvLyBDbGlwIG9mZiB0aGUg
			cGFydHMgdGhhdCB3b24ndCBiZSB2aXNpYmxlCiAgICAgIHZhciBpbnRhY3RMaW5lcyA9IDA7CiAg
			ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW50YWN0Lmxlbmd0aDsgKytpKSB7CiAgICAgICAgdmFy
			IHJhbmdlID0gaW50YWN0W2ldOwogICAgICAgIGlmIChyYW5nZS5mcm9tIDwgZnJvbSkge3Jhbmdl
			LmRvbVN0YXJ0ICs9IChmcm9tIC0gcmFuZ2UuZnJvbSk7IHJhbmdlLmZyb20gPSBmcm9tO30KICAg
			ICAgICBpZiAocmFuZ2UudG8gPiB0bykgcmFuZ2UudG8gPSB0bzsKICAgICAgICBpZiAocmFuZ2Uu
			ZnJvbSA+PSByYW5nZS50bykgaW50YWN0LnNwbGljZShpLS0sIDEpOwogICAgICAgIGVsc2UgaW50
			YWN0TGluZXMgKz0gcmFuZ2UudG8gLSByYW5nZS5mcm9tOwogICAgICB9CiAgICAgIGlmIChpbnRh
			Y3RMaW5lcyA9PSB0byAtIGZyb20pIHJldHVybjsKICAgICAgaW50YWN0LnNvcnQoZnVuY3Rpb24o
			YSwgYikge3JldHVybiBhLmRvbVN0YXJ0IC0gYi5kb21TdGFydDt9KTsKCiAgICAgIHZhciB0aCA9
			IHRleHRIZWlnaHQoKSwgZ3V0dGVyRGlzcGxheSA9IGd1dHRlci5zdHlsZS5kaXNwbGF5OwogICAg
			ICBsaW5lRGl2LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgIHBhdGNoRGlzcGxheShmcm9t
			LCB0bywgaW50YWN0KTsKICAgICAgbGluZURpdi5zdHlsZS5kaXNwbGF5ID0gZ3V0dGVyLnN0eWxl
			LmRpc3BsYXkgPSAiIjsKCiAgICAgIC8vIFBvc2l0aW9uIHRoZSBtb3ZlciBkaXYgdG8gYWxpZ24g
			d2l0aCB0aGUgbGluZXMgaXQncyBzdXBwb3NlZAogICAgICAvLyB0byBiZSBzaG93aW5nICh3aGlj
			aCB3aWxsIGNvdmVyIHRoZSB2aXNpYmxlIGRpc3BsYXkpCiAgICAgIHZhciBkaWZmZXJlbnQgPSBm
			cm9tICE9IHNob3dpbmdGcm9tIHx8IHRvICE9IHNob3dpbmdUbyB8fCBsYXN0U2l6ZUMgIT0gc2Ny
			b2xsZXIuY2xpZW50SGVpZ2h0ICsgdGg7CiAgICAgIC8vIFRoaXMgaXMganVzdCBhIGJvZ3VzIGZv
			cm11bGEgdGhhdCBkZXRlY3RzIHdoZW4gdGhlIGVkaXRvciBpcwogICAgICAvLyByZXNpemVkIG9y
			IHRoZSBmb250IHNpemUgY2hhbmdlcy4KICAgICAgaWYgKGRpZmZlcmVudCkgbGFzdFNpemVDID0g
			c2Nyb2xsZXIuY2xpZW50SGVpZ2h0ICsgdGg7CiAgICAgIHNob3dpbmdGcm9tID0gZnJvbTsgc2hv
			d2luZ1RvID0gdG87CiAgICAgIGRpc3BsYXlPZmZzZXQgPSBoZWlnaHRBdExpbmUoZG9jLCBmcm9t
			KTsKICAgICAgbW92ZXIuc3R5bGUudG9wID0gKGRpc3BsYXlPZmZzZXQgKiB0aCkgKyAicHgiOwog
			ICAgICBpZiAoc2Nyb2xsZXIuY2xpZW50SGVpZ2h0KQogICAgICAgIGNvZGUuc3R5bGUuaGVpZ2h0
			ID0gKGRvYy5oZWlnaHQgKiB0aCArIDIgKiBwYWRkaW5nVG9wKCkpICsgInB4IjsKCiAgICAgIC8v
			IFNpbmNlIHRoaXMgaXMgYWxsIHJhdGhlciBlcnJvciBwcm9uZSwgaXQgaXMgaG9ub3VyZWQgd2l0
			aCB0aGUKICAgICAgLy8gb25seSBhc3NlcnRpb24gaW4gdGhlIHdob2xlIGZpbGUuCiAgICAgIGlm
			IChsaW5lRGl2LmNoaWxkTm9kZXMubGVuZ3RoICE9IHNob3dpbmdUbyAtIHNob3dpbmdGcm9tKQog
			ICAgICAgIHRocm93IG5ldyBFcnJvcigiQkFEIFBBVENIISAiICsgSlNPTi5zdHJpbmdpZnkoaW50
			YWN0KSArICIgc2l6ZT0iICsgKHNob3dpbmdUbyAtIHNob3dpbmdGcm9tKSArCiAgICAgICAgICAg
			ICAgICAgICAgICAgICIgbm9kZXM9IiArIGxpbmVEaXYuY2hpbGROb2Rlcy5sZW5ndGgpOwoKICAg
			ICAgaWYgKG9wdGlvbnMubGluZVdyYXBwaW5nKSB7CiAgICAgICAgbWF4V2lkdGggPSBzY3JvbGxl
			ci5jbGllbnRXaWR0aDsKICAgICAgICB2YXIgY3VyTm9kZSA9IGxpbmVEaXYuZmlyc3RDaGlsZCwg
			aGVpZ2h0Q2hhbmdlZCA9IGZhbHNlOwogICAgICAgIGRvYy5pdGVyKHNob3dpbmdGcm9tLCBzaG93
			aW5nVG8sIGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgICAgIGlmICghbGluZS5oaWRkZW4pIHsKICAg
			ICAgICAgICAgdmFyIGhlaWdodCA9IE1hdGgucm91bmQoY3VyTm9kZS5vZmZzZXRIZWlnaHQgLyB0
			aCkgfHwgMTsKICAgICAgICAgICAgaWYgKGxpbmUuaGVpZ2h0ICE9IGhlaWdodCkgewogICAgICAg
			ICAgICAgIHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgaGVpZ2h0KTsKICAgICAgICAgICAgICBndXR0
			ZXJEaXJ0eSA9IGhlaWdodENoYW5nZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9
			CiAgICAgICAgICBjdXJOb2RlID0gY3VyTm9kZS5uZXh0U2libGluZzsKICAgICAgICB9KTsKICAg
			ICAgICBpZiAoaGVpZ2h0Q2hhbmdlZCkKICAgICAgICAgIGNvZGUuc3R5bGUuaGVpZ2h0ID0gKGRv
			Yy5oZWlnaHQgKiB0aCArIDIgKiBwYWRkaW5nVG9wKCkpICsgInB4IjsKICAgICAgfSBlbHNlIHsK
			ICAgICAgICBpZiAobWF4V2lkdGggPT0gbnVsbCkgbWF4V2lkdGggPSBzdHJpbmdXaWR0aChtYXhM
			aW5lKTsKICAgICAgICBpZiAobWF4V2lkdGggPiBzY3JvbGxlci5jbGllbnRXaWR0aCkgewogICAg
			ICAgICAgbGluZVNwYWNlLnN0eWxlLndpZHRoID0gbWF4V2lkdGggKyAicHgiOwogICAgICAgICAg
			Ly8gTmVlZGVkIHRvIHByZXZlbnQgb2RkIHdyYXBwaW5nL2hpZGluZyBvZiB3aWRnZXRzIHBsYWNl
			ZCBpbiBoZXJlLgogICAgICAgICAgY29kZS5zdHlsZS53aWR0aCA9ICIiOwogICAgICAgICAgY29k
			ZS5zdHlsZS53aWR0aCA9IHNjcm9sbGVyLnNjcm9sbFdpZHRoICsgInB4IjsKICAgICAgICB9IGVs
			c2UgewogICAgICAgICAgbGluZVNwYWNlLnN0eWxlLndpZHRoID0gY29kZS5zdHlsZS53aWR0aCA9
			ICIiOwogICAgICAgIH0KICAgICAgfQogICAgICBndXR0ZXIuc3R5bGUuZGlzcGxheSA9IGd1dHRl
			ckRpc3BsYXk7CiAgICAgIGlmIChkaWZmZXJlbnQgfHwgZ3V0dGVyRGlydHkpIHVwZGF0ZUd1dHRl
			cigpOwogICAgICB1cGRhdGVTZWxlY3Rpb24oKTsKICAgICAgaWYgKCFzdXBwcmVzc0NhbGxiYWNr
			ICYmIG9wdGlvbnMub25VcGRhdGUpIG9wdGlvbnMub25VcGRhdGUoaW5zdGFuY2UpOwogICAgICBy
			ZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjb21wdXRlSW50YWN0KGludGFjdCwgY2hh
			bmdlcykgewogICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoYW5nZXMubGVuZ3RoIHx8IDA7IGkg
			PCBsOyArK2kpIHsKICAgICAgICB2YXIgY2hhbmdlID0gY2hhbmdlc1tpXSwgaW50YWN0MiA9IFtd
			LCBkaWZmID0gY2hhbmdlLmRpZmYgfHwgMDsKICAgICAgICBmb3IgKHZhciBqID0gMCwgbDIgPSBp
			bnRhY3QubGVuZ3RoOyBqIDwgbDI7ICsraikgewogICAgICAgICAgdmFyIHJhbmdlID0gaW50YWN0
			W2pdOwogICAgICAgICAgaWYgKGNoYW5nZS50byA8PSByYW5nZS5mcm9tICYmIGNoYW5nZS5kaWZm
			KQogICAgICAgICAgICBpbnRhY3QyLnB1c2goe2Zyb206IHJhbmdlLmZyb20gKyBkaWZmLCB0bzog
			cmFuZ2UudG8gKyBkaWZmLAogICAgICAgICAgICAgICAgICAgICAgICAgIGRvbVN0YXJ0OiByYW5n
			ZS5kb21TdGFydH0pOwogICAgICAgICAgZWxzZSBpZiAoY2hhbmdlLnRvIDw9IHJhbmdlLmZyb20g
			fHwgY2hhbmdlLmZyb20gPj0gcmFuZ2UudG8pCiAgICAgICAgICAgIGludGFjdDIucHVzaChyYW5n
			ZSk7CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaWYgKGNoYW5nZS5mcm9tID4gcmFuZ2Uu
			ZnJvbSkKICAgICAgICAgICAgICBpbnRhY3QyLnB1c2goe2Zyb206IHJhbmdlLmZyb20sIHRvOiBj
			aGFuZ2UuZnJvbSwgZG9tU3RhcnQ6IHJhbmdlLmRvbVN0YXJ0fSk7CiAgICAgICAgICAgIGlmIChj
			aGFuZ2UudG8gPCByYW5nZS50bykKICAgICAgICAgICAgICBpbnRhY3QyLnB1c2goe2Zyb206IGNo
			YW5nZS50byArIGRpZmYsIHRvOiByYW5nZS50byArIGRpZmYsCiAgICAgICAgICAgICAgICAgICAg
			ICAgICAgICBkb21TdGFydDogcmFuZ2UuZG9tU3RhcnQgKyAoY2hhbmdlLnRvIC0gcmFuZ2UuZnJv
			bSl9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaW50YWN0ID0gaW50YWN0MjsKICAg
			ICAgfQogICAgICByZXR1cm4gaW50YWN0OwogICAgfQoKICAgIGZ1bmN0aW9uIHBhdGNoRGlzcGxh
			eShmcm9tLCB0bywgaW50YWN0KSB7CiAgICAgIC8vIFRoZSBmaXJzdCBwYXNzIHJlbW92ZXMgdGhl
			IERPTSBub2RlcyB0aGF0IGFyZW4ndCBpbnRhY3QuCiAgICAgIGlmICghaW50YWN0Lmxlbmd0aCkg
			bGluZURpdi5pbm5lckhUTUwgPSAiIjsKICAgICAgZWxzZSB7CiAgICAgICAgZnVuY3Rpb24ga2ls
			bE5vZGUobm9kZSkgewogICAgICAgICAgdmFyIHRtcCA9IG5vZGUubmV4dFNpYmxpbmc7CiAgICAg
			ICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7CiAgICAgICAgICByZXR1cm4g
			dG1wOwogICAgICAgIH0KICAgICAgICB2YXIgZG9tUG9zID0gMCwgY3VyTm9kZSA9IGxpbmVEaXYu
			Zmlyc3RDaGlsZCwgbjsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGludGFjdC5sZW5ndGg7
			ICsraSkgewogICAgICAgICAgdmFyIGN1ciA9IGludGFjdFtpXTsKICAgICAgICAgIHdoaWxlIChj
			dXIuZG9tU3RhcnQgPiBkb21Qb3MpIHtjdXJOb2RlID0ga2lsbE5vZGUoY3VyTm9kZSk7IGRvbVBv
			cysrO30KICAgICAgICAgIGZvciAodmFyIGogPSAwLCBlID0gY3VyLnRvIC0gY3VyLmZyb207IGog
			PCBlOyArK2opIHtjdXJOb2RlID0gY3VyTm9kZS5uZXh0U2libGluZzsgZG9tUG9zKys7fQogICAg
			ICAgIH0KICAgICAgICB3aGlsZSAoY3VyTm9kZSkgY3VyTm9kZSA9IGtpbGxOb2RlKGN1ck5vZGUp
			OwogICAgICB9CiAgICAgIC8vIFRoaXMgcGFzcyBmaWxscyBpbiB0aGUgbGluZXMgdGhhdCBhY3R1
			YWxseSBjaGFuZ2VkLgogICAgICB2YXIgbmV4dEludGFjdCA9IGludGFjdC5zaGlmdCgpLCBjdXJO
			b2RlID0gbGluZURpdi5maXJzdENoaWxkLCBqID0gZnJvbTsKICAgICAgdmFyIHNjcmF0Y2ggPSB0
			YXJnZXREb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSwgbmV3RWx0OwogICAgICBkb2MuaXRl
			cihmcm9tLCB0bywgZnVuY3Rpb24obGluZSkgewogICAgICAgIGlmIChuZXh0SW50YWN0ICYmIG5l
			eHRJbnRhY3QudG8gPT0gaikgbmV4dEludGFjdCA9IGludGFjdC5zaGlmdCgpOwogICAgICAgIGlm
			ICghbmV4dEludGFjdCB8fCBuZXh0SW50YWN0LmZyb20gPiBqKSB7CiAgICAgICAgICBpZiAobGlu
			ZS5oaWRkZW4pIHZhciBodG1sID0gc2NyYXRjaC5pbm5lckhUTUwgPSAiPHByZT48L3ByZT4iOwog
			ICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhciBodG1sID0gJzxwcmU+JyArIGxpbmUuZ2V0
			SFRNTChtYWtlVGFiKSArICc8L3ByZT4nOwogICAgICAgICAgICAvLyBLbHVkZ2UgdG8gbWFrZSBz
			dXJlIHRoZSBzdHlsZWQgZWxlbWVudCBsaWVzIGJlaGluZCB0aGUgc2VsZWN0aW9uIChieSB6LWlu
			ZGV4KQogICAgICAgICAgICBpZiAobGluZS5jbGFzc05hbWUpCiAgICAgICAgICAgICAgaHRtbCA9
			ICc8ZGl2IHN0eWxlPSJwb3NpdGlvbjogcmVsYXRpdmUiPjxwcmUgY2xhc3M9IicgKyBsaW5lLmNs
			YXNzTmFtZSArCiAgICAgICAgICAgICAgJyIgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVm
			dDogMDsgcmlnaHQ6IDA7IHRvcDogMDsgYm90dG9tOiAwOyB6LWluZGV4OiAtMiI+JiMxNjA7PC9w
			cmU+JyArIGh0bWwgKyAiPC9kaXY+IjsKICAgICAgICAgIH0KICAgICAgICAgIHNjcmF0Y2guaW5u
			ZXJIVE1MID0gaHRtbDsKICAgICAgICAgIGxpbmVEaXYuaW5zZXJ0QmVmb3JlKHNjcmF0Y2guZmly
			c3RDaGlsZCwgY3VyTm9kZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGN1ck5vZGUgPSBj
			dXJOb2RlLm5leHRTaWJsaW5nOwogICAgICAgIH0KICAgICAgICArK2o7CiAgICAgIH0pOwogICAg
			fQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUd1dHRlcigpIHsKICAgICAgaWYgKCFvcHRpb25zLmd1dHRl
			ciAmJiAhb3B0aW9ucy5saW5lTnVtYmVycykgcmV0dXJuOwogICAgICB2YXIgaFRleHQgPSBtb3Zl
			ci5vZmZzZXRIZWlnaHQsIGhFZGl0b3IgPSBzY3JvbGxlci5jbGllbnRIZWlnaHQ7CiAgICAgIGd1
			dHRlci5zdHlsZS5oZWlnaHQgPSAoaFRleHQgLSBoRWRpdG9yIDwgMiA/IGhFZGl0b3IgOiBoVGV4
			dCkgKyAicHgiOwogICAgICB2YXIgaHRtbCA9IFtdLCBpID0gc2hvd2luZ0Zyb207CiAgICAgIGRv
			Yy5pdGVyKHNob3dpbmdGcm9tLCBNYXRoLm1heChzaG93aW5nVG8sIHNob3dpbmdGcm9tICsgMSks
			IGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgICBpZiAobGluZS5oaWRkZW4pIHsKICAgICAgICAgIGh0
			bWwucHVzaCgiPHByZT48L3ByZT4iKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIG1h
			cmtlciA9IGxpbmUuZ3V0dGVyTWFya2VyOwogICAgICAgICAgdmFyIHRleHQgPSBvcHRpb25zLmxp
			bmVOdW1iZXJzID8gaSArIG9wdGlvbnMuZmlyc3RMaW5lTnVtYmVyIDogbnVsbDsKICAgICAgICAg
			IGlmIChtYXJrZXIgJiYgbWFya2VyLnRleHQpCiAgICAgICAgICAgIHRleHQgPSBtYXJrZXIudGV4
			dC5yZXBsYWNlKCIlTiUiLCB0ZXh0ICE9IG51bGwgPyB0ZXh0IDogIiIpOwogICAgICAgICAgZWxz
			ZSBpZiAodGV4dCA9PSBudWxsKQogICAgICAgICAgICB0ZXh0ID0gIlx1MDBhMCI7CiAgICAgICAg
			ICBodG1sLnB1c2goKG1hcmtlciAmJiBtYXJrZXIuc3R5bGUgPyAnPHByZSBjbGFzcz0iJyArIG1h
			cmtlci5zdHlsZSArICciPicgOiAiPHByZT4iKSwgdGV4dCk7CiAgICAgICAgICBmb3IgKHZhciBq
			ID0gMTsgaiA8IGxpbmUuaGVpZ2h0OyArK2opIGh0bWwucHVzaCgiPGJyLz4mIzE2MDsiKTsKICAg
			ICAgICAgIGh0bWwucHVzaCgiPC9wcmU+Iik7CiAgICAgICAgfQogICAgICAgICsraTsKICAgICAg
			fSk7CiAgICAgIGd1dHRlci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICBndXR0ZXJUZXh0
			LmlubmVySFRNTCA9IGh0bWwuam9pbigiIik7CiAgICAgIHZhciBtaW53aWR0aCA9IFN0cmluZyhk
			b2Muc2l6ZSkubGVuZ3RoLCBmaXJzdE5vZGUgPSBndXR0ZXJUZXh0LmZpcnN0Q2hpbGQsIHZhbCA9
			IGVsdFRleHQoZmlyc3ROb2RlKSwgcGFkID0gIiI7CiAgICAgIHdoaWxlICh2YWwubGVuZ3RoICsg
			cGFkLmxlbmd0aCA8IG1pbndpZHRoKSBwYWQgKz0gIlx1MDBhMCI7CiAgICAgIGlmIChwYWQpIGZp
			cnN0Tm9kZS5pbnNlcnRCZWZvcmUodGFyZ2V0RG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocGFkKSwg
			Zmlyc3ROb2RlLmZpcnN0Q2hpbGQpOwogICAgICBndXR0ZXIuc3R5bGUuZGlzcGxheSA9ICIiOwog
			ICAgICBsaW5lU3BhY2Uuc3R5bGUubWFyZ2luTGVmdCA9IGd1dHRlci5vZmZzZXRXaWR0aCArICJw
			eCI7CiAgICAgIGd1dHRlckRpcnR5ID0gZmFsc2U7CiAgICB9CiAgICBmdW5jdGlvbiB1cGRhdGVT
			ZWxlY3Rpb24oKSB7CiAgICAgIHZhciBjb2xsYXBzZWQgPSBwb3NFcShzZWwuZnJvbSwgc2VsLnRv
			KTsKICAgICAgdmFyIGZyb21Qb3MgPSBsb2NhbENvb3JkcyhzZWwuZnJvbSwgdHJ1ZSk7CiAgICAg
			IHZhciB0b1BvcyA9IGNvbGxhcHNlZCA/IGZyb21Qb3MgOiBsb2NhbENvb3JkcyhzZWwudG8sIHRy
			dWUpOwogICAgICB2YXIgaGVhZFBvcyA9IHNlbC5pbnZlcnRlZCA/IGZyb21Qb3MgOiB0b1Bvcywg
			dGggPSB0ZXh0SGVpZ2h0KCk7CiAgICAgIHZhciB3cmFwT2ZmID0gZWx0T2Zmc2V0KHdyYXBwZXIp
			LCBsaW5lT2ZmID0gZWx0T2Zmc2V0KGxpbmVEaXYpOwogICAgICBpbnB1dERpdi5zdHlsZS50b3Ag
			PSBNYXRoLm1heCgwLCBNYXRoLm1pbihzY3JvbGxlci5vZmZzZXRIZWlnaHQsIGhlYWRQb3MueSAr
			IGxpbmVPZmYudG9wIC0gd3JhcE9mZi50b3ApKSArICJweCI7CiAgICAgIGlucHV0RGl2LnN0eWxl
			LmxlZnQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihzY3JvbGxlci5vZmZzZXRXaWR0aCwgaGVhZFBv
			cy54ICsgbGluZU9mZi5sZWZ0IC0gd3JhcE9mZi5sZWZ0KSkgKyAicHgiOwogICAgICBpZiAoY29s
			bGFwc2VkKSB7CiAgICAgICAgY3Vyc29yLnN0eWxlLnRvcCA9IGhlYWRQb3MueSArICJweCI7CiAg
			ICAgICAgY3Vyc29yLnN0eWxlLmxlZnQgPSAob3B0aW9ucy5saW5lV3JhcHBpbmcgPyBNYXRoLm1p
			bihoZWFkUG9zLngsIGxpbmVTcGFjZS5vZmZzZXRXaWR0aCkgOiBoZWFkUG9zLngpICsgInB4IjsK
			ICAgICAgICBjdXJzb3Iuc3R5bGUuZGlzcGxheSA9ICIiOwogICAgICAgIHNlbGVjdGlvbkRpdi5z
			dHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBzYW1lTGlu
			ZSA9IGZyb21Qb3MueSA9PSB0b1Bvcy55LCBodG1sID0gIiI7CiAgICAgICAgZnVuY3Rpb24gYWRk
			KGxlZnQsIHRvcCwgcmlnaHQsIGhlaWdodCkgewogICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFz
			cz0iQ29kZU1pcnJvci1zZWxlY3RlZCIgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgbGVmdDog
			JyArIGxlZnQgKwogICAgICAgICAgICAncHg7IHRvcDogJyArIHRvcCArICdweDsgcmlnaHQ6ICcg
			KyByaWdodCArICdweDsgaGVpZ2h0OiAnICsgaGVpZ2h0ICsgJ3B4Ij48L2Rpdj4nOwogICAgICAg
			IH0KICAgICAgICBpZiAoc2VsLmZyb20uY2ggJiYgZnJvbVBvcy55ID49IDApIHsKICAgICAgICAg
			IHZhciByaWdodCA9IHNhbWVMaW5lID8gbGluZVNwYWNlLmNsaWVudFdpZHRoIC0gdG9Qb3MueCA6
			IDA7CiAgICAgICAgICBhZGQoZnJvbVBvcy54LCBmcm9tUG9zLnksIHJpZ2h0LCB0aCk7CiAgICAg
			ICAgfQogICAgICAgIHZhciBtaWRkbGVTdGFydCA9IE1hdGgubWF4KDAsIGZyb21Qb3MueSArIChz
			ZWwuZnJvbS5jaCA/IHRoIDogMCkpOwogICAgICAgIHZhciBtaWRkbGVIZWlnaHQgPSBNYXRoLm1p
			bih0b1Bvcy55LCBsaW5lU3BhY2UuY2xpZW50SGVpZ2h0KSAtIG1pZGRsZVN0YXJ0OwogICAgICAg
			IGlmIChtaWRkbGVIZWlnaHQgPiAwLjIgKiB0aCkKICAgICAgICAgIGFkZCgwLCBtaWRkbGVTdGFy
			dCwgMCwgbWlkZGxlSGVpZ2h0KTsKICAgICAgICBpZiAoKCFzYW1lTGluZSB8fCAhc2VsLmZyb20u
			Y2gpICYmIHRvUG9zLnkgPCBsaW5lU3BhY2UuY2xpZW50SGVpZ2h0IC0gLjUgKiB0aCkKICAgICAg
			ICAgIGFkZCgwLCB0b1Bvcy55LCBsaW5lU3BhY2UuY2xpZW50V2lkdGggLSB0b1Bvcy54LCB0aCk7
			CiAgICAgICAgc2VsZWN0aW9uRGl2LmlubmVySFRNTCA9IGh0bWw7CiAgICAgICAgY3Vyc29yLnN0
			eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgc2VsZWN0aW9uRGl2LnN0eWxlLmRpc3BsYXkg
			PSAiIjsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldFNoaWZ0KHZhbCkgewogICAgICBp
			ZiAodmFsKSBzaGlmdFNlbGVjdGluZyA9IHNoaWZ0U2VsZWN0aW5nIHx8IChzZWwuaW52ZXJ0ZWQg
			PyBzZWwudG8gOiBzZWwuZnJvbSk7CiAgICAgIGVsc2Ugc2hpZnRTZWxlY3RpbmcgPSBudWxsOwog
			ICAgfQogICAgZnVuY3Rpb24gc2V0U2VsZWN0aW9uVXNlcihmcm9tLCB0bykgewogICAgICB2YXIg
			c2ggPSBzaGlmdFNlbGVjdGluZyAmJiBjbGlwUG9zKHNoaWZ0U2VsZWN0aW5nKTsKICAgICAgaWYg
			KHNoKSB7CiAgICAgICAgaWYgKHBvc0xlc3Moc2gsIGZyb20pKSBmcm9tID0gc2g7CiAgICAgICAg
			ZWxzZSBpZiAocG9zTGVzcyh0bywgc2gpKSB0byA9IHNoOwogICAgICB9CiAgICAgIHNldFNlbGVj
			dGlvbihmcm9tLCB0byk7CiAgICAgIHVzZXJTZWxDaGFuZ2UgPSB0cnVlOwogICAgfQogICAgLy8g
			VXBkYXRlIHRoZSBzZWxlY3Rpb24uIExhc3QgdHdvIGFyZ3MgYXJlIG9ubHkgdXNlZCBieQogICAg
			Ly8gdXBkYXRlTGluZXMsIHNpbmNlIHRoZXkgaGF2ZSB0byBiZSBleHByZXNzZWQgaW4gdGhlIGxp
			bmUKICAgIC8vIG51bWJlcnMgYmVmb3JlIHRoZSB1cGRhdGUuCiAgICBmdW5jdGlvbiBzZXRTZWxl
			Y3Rpb24oZnJvbSwgdG8sIG9sZEZyb20sIG9sZFRvKSB7CiAgICAgIGdvYWxDb2x1bW4gPSBudWxs
			OwogICAgICBpZiAob2xkRnJvbSA9PSBudWxsKSB7b2xkRnJvbSA9IHNlbC5mcm9tLmxpbmU7IG9s
			ZFRvID0gc2VsLnRvLmxpbmU7fQogICAgICBpZiAocG9zRXEoc2VsLmZyb20sIGZyb20pICYmIHBv
			c0VxKHNlbC50bywgdG8pKSByZXR1cm47CiAgICAgIGlmIChwb3NMZXNzKHRvLCBmcm9tKSkge3Zh
			ciB0bXAgPSB0bzsgdG8gPSBmcm9tOyBmcm9tID0gdG1wO30KCiAgICAgIC8vIFNraXAgb3ZlciBo
			aWRkZW4gbGluZXMuCiAgICAgIGlmIChmcm9tLmxpbmUgIT0gb2xkRnJvbSkgZnJvbSA9IHNraXBI
			aWRkZW4oZnJvbSwgb2xkRnJvbSwgc2VsLmZyb20uY2gpOwogICAgICBpZiAodG8ubGluZSAhPSBv
			bGRUbykgdG8gPSBza2lwSGlkZGVuKHRvLCBvbGRUbywgc2VsLnRvLmNoKTsKCiAgICAgIGlmIChw
			b3NFcShmcm9tLCB0bykpIHNlbC5pbnZlcnRlZCA9IGZhbHNlOwogICAgICBlbHNlIGlmIChwb3NF
			cShmcm9tLCBzZWwudG8pKSBzZWwuaW52ZXJ0ZWQgPSBmYWxzZTsKICAgICAgZWxzZSBpZiAocG9z
			RXEodG8sIHNlbC5mcm9tKSkgc2VsLmludmVydGVkID0gdHJ1ZTsKCiAgICAgIGlmIChvcHRpb25z
			LmF1dG9DbGVhckVtcHR5TGluZXMgJiYgcG9zRXEoc2VsLmZyb20sIHNlbC50bykpIHsKICAgICAg
			ICB2YXIgaGVhZCA9IHNlbC5pbnZlcnRlZCA/IGZyb20gOiB0bzsKICAgICAgICBpZiAoaGVhZC5s
			aW5lICE9IHNlbC5mcm9tLmxpbmUpIHsKICAgICAgICAgIHZhciBvbGRMaW5lID0gZ2V0TGluZShz
			ZWwuZnJvbS5saW5lKTsKICAgICAgICAgIGlmICgvXlxzKyQvLnRlc3Qob2xkTGluZS50ZXh0KSkK
			ICAgICAgICAgICAgc2V0VGltZW91dChvcGVyYXRpb24oZnVuY3Rpb24oKSB7CiAgICAgICAgICAg
			ICAgaWYgKG9sZExpbmUucGFyZW50ICYmIC9eXHMrJC8udGVzdChvbGRMaW5lLnRleHQpKSB7CiAg
			ICAgICAgICAgICAgICB2YXIgbm8gPSBsaW5lTm8ob2xkTGluZSk7CiAgICAgICAgICAgICAgICBy
			ZXBsYWNlUmFuZ2UoIiIsIHtsaW5lOiBubywgY2g6IDB9LCB7bGluZTogbm8sIGNoOiBvbGRMaW5l
			LnRleHQubGVuZ3RofSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCAxMCkpOwogICAg
			ICAgIH0KICAgICAgfQoKICAgICAgc2VsLmZyb20gPSBmcm9tOyBzZWwudG8gPSB0bzsKICAgICAg
			c2VsZWN0aW9uQ2hhbmdlZCA9IHRydWU7CiAgICB9CiAgICBmdW5jdGlvbiBza2lwSGlkZGVuKHBv
			cywgb2xkTGluZSwgb2xkQ2gpIHsKICAgICAgZnVuY3Rpb24gZ2V0Tm9uSGlkZGVuKGRpcikgewog
			ICAgICAgIHZhciBsTm8gPSBwb3MubGluZSArIGRpciwgZW5kID0gZGlyID09IDEgPyBkb2Muc2l6
			ZSA6IC0xOwogICAgICAgIHdoaWxlIChsTm8gIT0gZW5kKSB7CiAgICAgICAgICB2YXIgbGluZSA9
			IGdldExpbmUobE5vKTsKICAgICAgICAgIGlmICghbGluZS5oaWRkZW4pIHsKICAgICAgICAgICAg
			dmFyIGNoID0gcG9zLmNoOwogICAgICAgICAgICBpZiAoY2ggPiBvbGRDaCB8fCBjaCA+IGxpbmUu
			dGV4dC5sZW5ndGgpIGNoID0gbGluZS50ZXh0Lmxlbmd0aDsKICAgICAgICAgICAgcmV0dXJuIHts
			aW5lOiBsTm8sIGNoOiBjaH07CiAgICAgICAgICB9CiAgICAgICAgICBsTm8gKz0gZGlyOwogICAg
			ICAgIH0KICAgICAgfQogICAgICB2YXIgbGluZSA9IGdldExpbmUocG9zLmxpbmUpOwogICAgICBp
			ZiAoIWxpbmUuaGlkZGVuKSByZXR1cm4gcG9zOwogICAgICBpZiAocG9zLmxpbmUgPj0gb2xkTGlu
			ZSkgcmV0dXJuIGdldE5vbkhpZGRlbigxKSB8fCBnZXROb25IaWRkZW4oLTEpOwogICAgICBlbHNl
			IHJldHVybiBnZXROb25IaWRkZW4oLTEpIHx8IGdldE5vbkhpZGRlbigxKTsKICAgIH0KICAgIGZ1
			bmN0aW9uIHNldEN1cnNvcihsaW5lLCBjaCwgdXNlcikgewogICAgICB2YXIgcG9zID0gY2xpcFBv
			cyh7bGluZTogbGluZSwgY2g6IGNoIHx8IDB9KTsKICAgICAgKHVzZXIgPyBzZXRTZWxlY3Rpb25V
			c2VyIDogc2V0U2VsZWN0aW9uKShwb3MsIHBvcyk7CiAgICB9CgogICAgZnVuY3Rpb24gY2xpcExp
			bmUobikge3JldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbihuLCBkb2Muc2l6ZS0xKSk7fQogICAg
			ZnVuY3Rpb24gY2xpcFBvcyhwb3MpIHsKICAgICAgaWYgKHBvcy5saW5lIDwgMCkgcmV0dXJuIHts
			aW5lOiAwLCBjaDogMH07CiAgICAgIGlmIChwb3MubGluZSA+PSBkb2Muc2l6ZSkgcmV0dXJuIHts
			aW5lOiBkb2Muc2l6ZS0xLCBjaDogZ2V0TGluZShkb2Muc2l6ZS0xKS50ZXh0Lmxlbmd0aH07CiAg
			ICAgIHZhciBjaCA9IHBvcy5jaCwgbGluZWxlbiA9IGdldExpbmUocG9zLmxpbmUpLnRleHQubGVu
			Z3RoOwogICAgICBpZiAoY2ggPT0gbnVsbCB8fCBjaCA+IGxpbmVsZW4pIHJldHVybiB7bGluZTog
			cG9zLmxpbmUsIGNoOiBsaW5lbGVufTsKICAgICAgZWxzZSBpZiAoY2ggPCAwKSByZXR1cm4ge2xp
			bmU6IHBvcy5saW5lLCBjaDogMH07CiAgICAgIGVsc2UgcmV0dXJuIHBvczsKICAgIH0KCiAgICBm
			dW5jdGlvbiBmaW5kUG9zSChkaXIsIHVuaXQpIHsKICAgICAgdmFyIGVuZCA9IHNlbC5pbnZlcnRl
			ZCA/IHNlbC5mcm9tIDogc2VsLnRvLCBsaW5lID0gZW5kLmxpbmUsIGNoID0gZW5kLmNoOwogICAg
			ICB2YXIgbGluZU9iaiA9IGdldExpbmUobGluZSk7CiAgICAgIGZ1bmN0aW9uIGZpbmROZXh0TGlu
			ZSgpIHsKICAgICAgICBmb3IgKHZhciBsID0gbGluZSArIGRpciwgZSA9IGRpciA8IDAgPyAtMSA6
			IGRvYy5zaXplOyBsICE9IGU7IGwgKz0gZGlyKSB7CiAgICAgICAgICB2YXIgbG8gPSBnZXRMaW5l
			KGwpOwogICAgICAgICAgaWYgKCFsby5oaWRkZW4pIHsgbGluZSA9IGw7IGxpbmVPYmogPSBsbzsg
			cmV0dXJuIHRydWU7IH0KICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbW92ZU9uY2Uo
			Ym91bmRUb0xpbmUpIHsKICAgICAgICBpZiAoY2ggPT0gKGRpciA8IDAgPyAwIDogbGluZU9iai50
			ZXh0Lmxlbmd0aCkpIHsKICAgICAgICAgIGlmICghYm91bmRUb0xpbmUgJiYgZmluZE5leHRMaW5l
			KCkpIGNoID0gZGlyIDwgMCA/IGxpbmVPYmoudGV4dC5sZW5ndGggOiAwOwogICAgICAgICAgZWxz
			ZSByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIGNoICs9IGRpcjsKICAgICAgICByZXR1cm4g
			dHJ1ZTsKICAgICAgfQogICAgICBpZiAodW5pdCA9PSAiY2hhciIpIG1vdmVPbmNlKCk7CiAgICAg
			IGVsc2UgaWYgKHVuaXQgPT0gImNvbHVtbiIpIG1vdmVPbmNlKHRydWUpOwogICAgICBlbHNlIGlm
			ICh1bml0ID09ICJ3b3JkIikgewogICAgICAgIHZhciBzYXdXb3JkID0gZmFsc2U7CiAgICAgICAg
			Zm9yICg7OykgewogICAgICAgICAgaWYgKGRpciA8IDApIGlmICghbW92ZU9uY2UoKSkgYnJlYWs7
			CiAgICAgICAgICBpZiAoaXNXb3JkQ2hhcihsaW5lT2JqLnRleHQuY2hhckF0KGNoKSkpIHNhd1dv
			cmQgPSB0cnVlOwogICAgICAgICAgZWxzZSBpZiAoc2F3V29yZCkge2lmIChkaXIgPCAwKSB7ZGly
			ID0gMTsgbW92ZU9uY2UoKTt9IGJyZWFrO30KICAgICAgICAgIGlmIChkaXIgPiAwKSBpZiAoIW1v
			dmVPbmNlKCkpIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4ge2xpbmU6IGxp
			bmUsIGNoOiBjaH07CiAgICB9CiAgICBmdW5jdGlvbiBtb3ZlSChkaXIsIHVuaXQpIHsKICAgICAg
			dmFyIHBvcyA9IGRpciA8IDAgPyBzZWwuZnJvbSA6IHNlbC50bzsKICAgICAgaWYgKHNoaWZ0U2Vs
			ZWN0aW5nIHx8IHBvc0VxKHNlbC5mcm9tLCBzZWwudG8pKSBwb3MgPSBmaW5kUG9zSChkaXIsIHVu
			aXQpOwogICAgICBzZXRDdXJzb3IocG9zLmxpbmUsIHBvcy5jaCwgdHJ1ZSk7CiAgICB9CiAgICBm
			dW5jdGlvbiBkZWxldGVIKGRpciwgdW5pdCkgewogICAgICBpZiAoIXBvc0VxKHNlbC5mcm9tLCBz
			ZWwudG8pKSByZXBsYWNlUmFuZ2UoIiIsIHNlbC5mcm9tLCBzZWwudG8pOwogICAgICBlbHNlIGlm
			IChkaXIgPCAwKSByZXBsYWNlUmFuZ2UoIiIsIGZpbmRQb3NIKGRpciwgdW5pdCksIHNlbC50byk7
			CiAgICAgIGVsc2UgcmVwbGFjZVJhbmdlKCIiLCBzZWwuZnJvbSwgZmluZFBvc0goZGlyLCB1bml0
			KSk7CiAgICAgIHVzZXJTZWxDaGFuZ2UgPSB0cnVlOwogICAgfQogICAgdmFyIGdvYWxDb2x1bW4g
			PSBudWxsOwogICAgZnVuY3Rpb24gbW92ZVYoZGlyLCB1bml0KSB7CiAgICAgIHZhciBkaXN0ID0g
			MCwgcG9zID0gbG9jYWxDb29yZHMoc2VsLmludmVydGVkID8gc2VsLmZyb20gOiBzZWwudG8sIHRy
			dWUpOwogICAgICBpZiAoZ29hbENvbHVtbiAhPSBudWxsKSBwb3MueCA9IGdvYWxDb2x1bW47CiAg
			ICAgIGlmICh1bml0ID09ICJwYWdlIikgZGlzdCA9IE1hdGgubWluKHNjcm9sbGVyLmNsaWVudEhl
			aWdodCwgd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGll
			bnRIZWlnaHQpOwogICAgICBlbHNlIGlmICh1bml0ID09ICJsaW5lIikgZGlzdCA9IHRleHRIZWln
			aHQoKTsKICAgICAgdmFyIHRhcmdldCA9IGNvb3Jkc0NoYXIocG9zLngsIHBvcy55ICsgZGlzdCAq
			IGRpciArIDIpOwogICAgICBzZXRDdXJzb3IodGFyZ2V0LmxpbmUsIHRhcmdldC5jaCwgdHJ1ZSk7
			CiAgICAgIGdvYWxDb2x1bW4gPSBwb3MueDsKICAgIH0KCiAgICBmdW5jdGlvbiBzZWxlY3RXb3Jk
			QXQocG9zKSB7CiAgICAgIHZhciBsaW5lID0gZ2V0TGluZShwb3MubGluZSkudGV4dDsKICAgICAg
			dmFyIHN0YXJ0ID0gcG9zLmNoLCBlbmQgPSBwb3MuY2g7CiAgICAgIHdoaWxlIChzdGFydCA+IDAg
			JiYgaXNXb3JkQ2hhcihsaW5lLmNoYXJBdChzdGFydCAtIDEpKSkgLS1zdGFydDsKICAgICAgd2hp
			bGUgKGVuZCA8IGxpbmUubGVuZ3RoICYmIGlzV29yZENoYXIobGluZS5jaGFyQXQoZW5kKSkpICsr
			ZW5kOwogICAgICBzZXRTZWxlY3Rpb25Vc2VyKHtsaW5lOiBwb3MubGluZSwgY2g6IHN0YXJ0fSwg
			e2xpbmU6IHBvcy5saW5lLCBjaDogZW5kfSk7CiAgICB9CiAgICBmdW5jdGlvbiBzZWxlY3RMaW5l
			KGxpbmUpIHsKICAgICAgc2V0U2VsZWN0aW9uVXNlcih7bGluZTogbGluZSwgY2g6IDB9LCBjbGlw
			UG9zKHtsaW5lOiBsaW5lICsgMSwgY2g6IDB9KSk7CiAgICB9CiAgICBmdW5jdGlvbiBpbmRlbnRT
			ZWxlY3RlZChtb2RlKSB7CiAgICAgIGlmIChwb3NFcShzZWwuZnJvbSwgc2VsLnRvKSkgcmV0dXJu
			IGluZGVudExpbmUoc2VsLmZyb20ubGluZSwgbW9kZSk7CiAgICAgIHZhciBlID0gc2VsLnRvLmxp
			bmUgLSAoc2VsLnRvLmNoID8gMCA6IDEpOwogICAgICBmb3IgKHZhciBpID0gc2VsLmZyb20ubGlu
			ZTsgaSA8PSBlOyArK2kpIGluZGVudExpbmUoaSwgbW9kZSk7CiAgICB9CgogICAgZnVuY3Rpb24g
			aW5kZW50TGluZShuLCBob3cpIHsKICAgICAgaWYgKCFob3cpIGhvdyA9ICJhZGQiOwogICAgICBp
			ZiAoaG93ID09ICJzbWFydCIpIHsKICAgICAgICBpZiAoIW1vZGUuaW5kZW50KSBob3cgPSAicHJl
			diI7CiAgICAgICAgZWxzZSB2YXIgc3RhdGUgPSBnZXRTdGF0ZUJlZm9yZShuKTsKICAgICAgfQoK
			ICAgICAgdmFyIGxpbmUgPSBnZXRMaW5lKG4pLCBjdXJTcGFjZSA9IGxpbmUuaW5kZW50YXRpb24o
			b3B0aW9ucy50YWJTaXplKSwKICAgICAgICAgIGN1clNwYWNlU3RyaW5nID0gbGluZS50ZXh0Lm1h
			dGNoKC9eXHMqLylbMF0sIGluZGVudGF0aW9uOwogICAgICBpZiAoaG93ID09ICJwcmV2Iikgewog
			ICAgICAgIGlmIChuKSBpbmRlbnRhdGlvbiA9IGdldExpbmUobi0xKS5pbmRlbnRhdGlvbihvcHRp
			b25zLnRhYlNpemUpOwogICAgICAgIGVsc2UgaW5kZW50YXRpb24gPSAwOwogICAgICB9CiAgICAg
			IGVsc2UgaWYgKGhvdyA9PSAic21hcnQiKSBpbmRlbnRhdGlvbiA9IG1vZGUuaW5kZW50KHN0YXRl
			LCBsaW5lLnRleHQuc2xpY2UoY3VyU3BhY2VTdHJpbmcubGVuZ3RoKSwgbGluZS50ZXh0KTsKICAg
			ICAgZWxzZSBpZiAoaG93ID09ICJhZGQiKSBpbmRlbnRhdGlvbiA9IGN1clNwYWNlICsgb3B0aW9u
			cy5pbmRlbnRVbml0OwogICAgICBlbHNlIGlmIChob3cgPT0gInN1YnRyYWN0IikgaW5kZW50YXRp
			b24gPSBjdXJTcGFjZSAtIG9wdGlvbnMuaW5kZW50VW5pdDsKICAgICAgaW5kZW50YXRpb24gPSBN
			YXRoLm1heCgwLCBpbmRlbnRhdGlvbik7CiAgICAgIHZhciBkaWZmID0gaW5kZW50YXRpb24gLSBj
			dXJTcGFjZTsKCiAgICAgIGlmICghZGlmZikgewogICAgICAgIGlmIChzZWwuZnJvbS5saW5lICE9
			IG4gJiYgc2VsLnRvLmxpbmUgIT0gbikgcmV0dXJuOwogICAgICAgIHZhciBpbmRlbnRTdHJpbmcg
			PSBjdXJTcGFjZVN0cmluZzsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICB2YXIgaW5kZW50
			U3RyaW5nID0gIiIsIHBvcyA9IDA7CiAgICAgICAgaWYgKG9wdGlvbnMuaW5kZW50V2l0aFRhYnMp
			CiAgICAgICAgICBmb3IgKHZhciBpID0gTWF0aC5mbG9vcihpbmRlbnRhdGlvbiAvIG9wdGlvbnMu
			dGFiU2l6ZSk7IGk7IC0taSkge3BvcyArPSBvcHRpb25zLnRhYlNpemU7IGluZGVudFN0cmluZyAr
			PSAiXHQiO30KICAgICAgICB3aGlsZSAocG9zIDwgaW5kZW50YXRpb24pIHsrK3BvczsgaW5kZW50
			U3RyaW5nICs9ICIgIjt9CiAgICAgIH0KCiAgICAgIHJlcGxhY2VSYW5nZShpbmRlbnRTdHJpbmcs
			IHtsaW5lOiBuLCBjaDogMH0sIHtsaW5lOiBuLCBjaDogY3VyU3BhY2VTdHJpbmcubGVuZ3RofSk7
			CiAgICB9CgogICAgZnVuY3Rpb24gbG9hZE1vZGUoKSB7CiAgICAgIG1vZGUgPSBDb2RlTWlycm9y
			LmdldE1vZGUob3B0aW9ucywgb3B0aW9ucy5tb2RlKTsKICAgICAgZG9jLml0ZXIoMCwgZG9jLnNp
			emUsIGZ1bmN0aW9uKGxpbmUpIHsgbGluZS5zdGF0ZUFmdGVyID0gbnVsbDsgfSk7CiAgICAgIHdv
			cmsgPSBbMF07CiAgICAgIHN0YXJ0V29ya2VyKCk7CiAgICB9CiAgICBmdW5jdGlvbiBndXR0ZXJD
			aGFuZ2VkKCkgewogICAgICB2YXIgdmlzaWJsZSA9IG9wdGlvbnMuZ3V0dGVyIHx8IG9wdGlvbnMu
			bGluZU51bWJlcnM7CiAgICAgIGd1dHRlci5zdHlsZS5kaXNwbGF5ID0gdmlzaWJsZSA/ICIiIDog
			Im5vbmUiOwogICAgICBpZiAodmlzaWJsZSkgZ3V0dGVyRGlydHkgPSB0cnVlOwogICAgICBlbHNl
			IGxpbmVEaXYucGFyZW50Tm9kZS5zdHlsZS5tYXJnaW5MZWZ0ID0gMDsKICAgIH0KICAgIGZ1bmN0
			aW9uIHdyYXBwaW5nQ2hhbmdlZChmcm9tLCB0bykgewogICAgICBpZiAob3B0aW9ucy5saW5lV3Jh
			cHBpbmcpIHsKICAgICAgICB3cmFwcGVyLmNsYXNzTmFtZSArPSAiIENvZGVNaXJyb3Itd3JhcCI7
			CiAgICAgICAgdmFyIHBlckxpbmUgPSBzY3JvbGxlci5jbGllbnRXaWR0aCAvIGNoYXJXaWR0aCgp
			IC0gMzsKICAgICAgICBkb2MuaXRlcigwLCBkb2Muc2l6ZSwgZnVuY3Rpb24obGluZSkgewogICAg
			ICAgICAgaWYgKGxpbmUuaGlkZGVuKSByZXR1cm47CiAgICAgICAgICB2YXIgZ3Vlc3MgPSBNYXRo
			LmNlaWwobGluZS50ZXh0Lmxlbmd0aCAvIHBlckxpbmUpIHx8IDE7CiAgICAgICAgICBpZiAoZ3Vl
			c3MgIT0gMSkgdXBkYXRlTGluZUhlaWdodChsaW5lLCBndWVzcyk7CiAgICAgICAgfSk7CiAgICAg
			ICAgbGluZVNwYWNlLnN0eWxlLndpZHRoID0gY29kZS5zdHlsZS53aWR0aCA9ICIiOwogICAgICB9
			IGVsc2UgewogICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gd3JhcHBlci5jbGFzc05hbWUucmVw
			bGFjZSgiIENvZGVNaXJyb3Itd3JhcCIsICIiKTsKICAgICAgICBtYXhXaWR0aCA9IG51bGw7IG1h
			eExpbmUgPSAiIjsKICAgICAgICBkb2MuaXRlcigwLCBkb2Muc2l6ZSwgZnVuY3Rpb24obGluZSkg
			ewogICAgICAgICAgaWYgKGxpbmUuaGVpZ2h0ICE9IDEgJiYgIWxpbmUuaGlkZGVuKSB1cGRhdGVM
			aW5lSGVpZ2h0KGxpbmUsIDEpOwogICAgICAgICAgaWYgKGxpbmUudGV4dC5sZW5ndGggPiBtYXhM
			aW5lLmxlbmd0aCkgbWF4TGluZSA9IGxpbmUudGV4dDsKICAgICAgICB9KTsKICAgICAgfQogICAg
			ICBjaGFuZ2VzLnB1c2goe2Zyb206IDAsIHRvOiBkb2Muc2l6ZX0pOwogICAgfQogICAgZnVuY3Rp
			b24gbWFrZVRhYihjb2wpIHsKICAgICAgdmFyIHcgPSBvcHRpb25zLnRhYlNpemUgLSBjb2wgJSBv
			cHRpb25zLnRhYlNpemU7CiAgICAgIGZvciAodmFyIHN0ciA9ICc8c3BhbiBjbGFzcz0iY20tdGFi
			Ij4nLCBpID0gMDsgaSA8IHc7ICsraSkgc3RyICs9ICIgIjsKICAgICAgcmV0dXJuIHtodG1sOiBz
			dHIgKyAiPC9zcGFuPiIsIHdpZHRoOiB3fTsKICAgIH0KICAgIGZ1bmN0aW9uIHRoZW1lQ2hhbmdl
			ZCgpIHsKICAgICAgc2Nyb2xsZXIuY2xhc3NOYW1lID0gc2Nyb2xsZXIuY2xhc3NOYW1lLnJlcGxh
			Y2UoL1xzKmNtLXMtXHcrL2csICIiKSArCiAgICAgICAgb3B0aW9ucy50aGVtZS5yZXBsYWNlKC8o
			XnxccylccyovZywgIiBjbS1zLSIpOwogICAgfQoKICAgIGZ1bmN0aW9uIFRleHRNYXJrZXIoKSB7
			IHRoaXMuc2V0ID0gW107IH0KICAgIFRleHRNYXJrZXIucHJvdG90eXBlLmNsZWFyID0gb3BlcmF0
			aW9uKGZ1bmN0aW9uKCkgewogICAgICB2YXIgbWluID0gSW5maW5pdHksIG1heCA9IC1JbmZpbml0
			eTsKICAgICAgZm9yICh2YXIgaSA9IDAsIGUgPSB0aGlzLnNldC5sZW5ndGg7IGkgPCBlOyArK2kp
			IHsKICAgICAgICB2YXIgbGluZSA9IHRoaXMuc2V0W2ldLCBtayA9IGxpbmUubWFya2VkOwogICAg
			ICAgIGlmICghbWsgfHwgIWxpbmUucGFyZW50KSBjb250aW51ZTsKICAgICAgICB2YXIgbGluZU4g
			PSBsaW5lTm8obGluZSk7CiAgICAgICAgbWluID0gTWF0aC5taW4obWluLCBsaW5lTik7IG1heCA9
			IE1hdGgubWF4KG1heCwgbGluZU4pOwogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWsubGVu
			Z3RoOyArK2opCiAgICAgICAgICBpZiAobWtbal0uc2V0ID09IHRoaXMuc2V0KSBtay5zcGxpY2Uo
			ai0tLCAxKTsKICAgICAgfQogICAgICBpZiAobWluICE9IEluZmluaXR5KQogICAgICAgIGNoYW5n
			ZXMucHVzaCh7ZnJvbTogbWluLCB0bzogbWF4ICsgMX0pOwogICAgfSk7CiAgICBUZXh0TWFya2Vy
			LnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBmcm9tLCB0bzsKICAgICAg
			Zm9yICh2YXIgaSA9IDAsIGUgPSB0aGlzLnNldC5sZW5ndGg7IGkgPCBlOyArK2kpIHsKICAgICAg
			ICB2YXIgbGluZSA9IHRoaXMuc2V0W2ldLCBtayA9IGxpbmUubWFya2VkOwogICAgICAgIGZvciAo
			dmFyIGogPSAwOyBqIDwgbWsubGVuZ3RoOyArK2opIHsKICAgICAgICAgIHZhciBtYXJrID0gbWtb
			al07CiAgICAgICAgICBpZiAobWFyay5zZXQgPT0gdGhpcy5zZXQpIHsKICAgICAgICAgICAgaWYg
			KG1hcmsuZnJvbSAhPSBudWxsIHx8IG1hcmsudG8gIT0gbnVsbCkgewogICAgICAgICAgICAgIHZh
			ciBmb3VuZCA9IGxpbmVObyhsaW5lKTsKICAgICAgICAgICAgICBpZiAoZm91bmQgIT0gbnVsbCkg
			ewogICAgICAgICAgICAgICAgaWYgKG1hcmsuZnJvbSAhPSBudWxsKSBmcm9tID0ge2xpbmU6IGZv
			dW5kLCBjaDogbWFyay5mcm9tfTsKICAgICAgICAgICAgICAgIGlmIChtYXJrLnRvICE9IG51bGwp
			IHRvID0ge2xpbmU6IGZvdW5kLCBjaDogbWFyay50b307CiAgICAgICAgICAgICAgfQogICAgICAg
			ICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB7ZnJvbTog
			ZnJvbSwgdG86IHRvfTsKICAgIH07CgogICAgZnVuY3Rpb24gbWFya1RleHQoZnJvbSwgdG8sIGNs
			YXNzTmFtZSkgewogICAgICBmcm9tID0gY2xpcFBvcyhmcm9tKTsgdG8gPSBjbGlwUG9zKHRvKTsK
			ICAgICAgdmFyIHRtID0gbmV3IFRleHRNYXJrZXIoKTsKICAgICAgZnVuY3Rpb24gYWRkKGxpbmUs
			IGZyb20sIHRvLCBjbGFzc05hbWUpIHsKICAgICAgICBnZXRMaW5lKGxpbmUpLmFkZE1hcmsobmV3
			IE1hcmtlZFRleHQoZnJvbSwgdG8sIGNsYXNzTmFtZSwgdG0uc2V0KSk7CiAgICAgIH0KICAgICAg
			aWYgKGZyb20ubGluZSA9PSB0by5saW5lKSBhZGQoZnJvbS5saW5lLCBmcm9tLmNoLCB0by5jaCwg
			Y2xhc3NOYW1lKTsKICAgICAgZWxzZSB7CiAgICAgICAgYWRkKGZyb20ubGluZSwgZnJvbS5jaCwg
			bnVsbCwgY2xhc3NOYW1lKTsKICAgICAgICBmb3IgKHZhciBpID0gZnJvbS5saW5lICsgMSwgZSA9
			IHRvLmxpbmU7IGkgPCBlOyArK2kpCiAgICAgICAgICBhZGQoaSwgbnVsbCwgbnVsbCwgY2xhc3NO
			YW1lKTsKICAgICAgICBhZGQodG8ubGluZSwgbnVsbCwgdG8uY2gsIGNsYXNzTmFtZSk7CiAgICAg
			IH0KICAgICAgY2hhbmdlcy5wdXNoKHtmcm9tOiBmcm9tLmxpbmUsIHRvOiB0by5saW5lICsgMX0p
			OwogICAgICByZXR1cm4gdG07CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Qm9va21hcmsocG9zKSB7
			CiAgICAgIHBvcyA9IGNsaXBQb3MocG9zKTsKICAgICAgdmFyIGJtID0gbmV3IEJvb2ttYXJrKHBv
			cy5jaCk7CiAgICAgIGdldExpbmUocG9zLmxpbmUpLmFkZE1hcmsoYm0pOwogICAgICByZXR1cm4g
			Ym07CiAgICB9CgogICAgZnVuY3Rpb24gYWRkR3V0dGVyTWFya2VyKGxpbmUsIHRleHQsIGNsYXNz
			TmFtZSkgewogICAgICBpZiAodHlwZW9mIGxpbmUgPT0gIm51bWJlciIpIGxpbmUgPSBnZXRMaW5l
			KGNsaXBMaW5lKGxpbmUpKTsKICAgICAgbGluZS5ndXR0ZXJNYXJrZXIgPSB7dGV4dDogdGV4dCwg
			c3R5bGU6IGNsYXNzTmFtZX07CiAgICAgIGd1dHRlckRpcnR5ID0gdHJ1ZTsKICAgICAgcmV0dXJu
			IGxpbmU7CiAgICB9CiAgICBmdW5jdGlvbiByZW1vdmVHdXR0ZXJNYXJrZXIobGluZSkgewogICAg
			ICBpZiAodHlwZW9mIGxpbmUgPT0gIm51bWJlciIpIGxpbmUgPSBnZXRMaW5lKGNsaXBMaW5lKGxp
			bmUpKTsKICAgICAgbGluZS5ndXR0ZXJNYXJrZXIgPSBudWxsOwogICAgICBndXR0ZXJEaXJ0eSA9
			IHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlTGluZShoYW5kbGUsIG9wKSB7CiAgICAg
			IHZhciBubyA9IGhhbmRsZSwgbGluZSA9IGhhbmRsZTsKICAgICAgaWYgKHR5cGVvZiBoYW5kbGUg
			PT0gIm51bWJlciIpIGxpbmUgPSBnZXRMaW5lKGNsaXBMaW5lKGhhbmRsZSkpOwogICAgICBlbHNl
			IG5vID0gbGluZU5vKGhhbmRsZSk7CiAgICAgIGlmIChubyA9PSBudWxsKSByZXR1cm4gbnVsbDsK
			ICAgICAgaWYgKG9wKGxpbmUsIG5vKSkgY2hhbmdlcy5wdXNoKHtmcm9tOiBubywgdG86IG5vICsg
			MX0pOwogICAgICBlbHNlIHJldHVybiBudWxsOwogICAgICByZXR1cm4gbGluZTsKICAgIH0KICAg
			IGZ1bmN0aW9uIHNldExpbmVDbGFzcyhoYW5kbGUsIGNsYXNzTmFtZSkgewogICAgICByZXR1cm4g
			Y2hhbmdlTGluZShoYW5kbGUsIGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgICBpZiAobGluZS5jbGFz
			c05hbWUgIT0gY2xhc3NOYW1lKSB7CiAgICAgICAgICBsaW5lLmNsYXNzTmFtZSA9IGNsYXNzTmFt
			ZTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICBm
			dW5jdGlvbiBzZXRMaW5lSGlkZGVuKGhhbmRsZSwgaGlkZGVuKSB7CiAgICAgIHJldHVybiBjaGFu
			Z2VMaW5lKGhhbmRsZSwgZnVuY3Rpb24obGluZSwgbm8pIHsKICAgICAgICBpZiAobGluZS5oaWRk
			ZW4gIT0gaGlkZGVuKSB7CiAgICAgICAgICBsaW5lLmhpZGRlbiA9IGhpZGRlbjsKICAgICAgICAg
			IHVwZGF0ZUxpbmVIZWlnaHQobGluZSwgaGlkZGVuID8gMCA6IDEpOwogICAgICAgICAgdmFyIGZs
			aW5lID0gc2VsLmZyb20ubGluZSwgdGxpbmUgPSBzZWwudG8ubGluZTsKICAgICAgICAgIGlmICho
			aWRkZW4gJiYgKGZsaW5lID09IG5vIHx8IHRsaW5lID09IG5vKSkgewogICAgICAgICAgICB2YXIg
			ZnJvbSA9IGZsaW5lID09IG5vID8gc2tpcEhpZGRlbih7bGluZTogZmxpbmUsIGNoOiAwfSwgZmxp
			bmUsIDApIDogc2VsLmZyb207CiAgICAgICAgICAgIHZhciB0byA9IHRsaW5lID09IG5vID8gc2tp
			cEhpZGRlbih7bGluZTogdGxpbmUsIGNoOiAwfSwgdGxpbmUsIDApIDogc2VsLnRvOwogICAgICAg
			ICAgICBzZXRTZWxlY3Rpb24oZnJvbSwgdG8pOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJu
			IChndXR0ZXJEaXJ0eSA9IHRydWUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgZnVu
			Y3Rpb24gbGluZUluZm8obGluZSkgewogICAgICBpZiAodHlwZW9mIGxpbmUgPT0gIm51bWJlciIp
			IHsKICAgICAgICBpZiAoIWlzTGluZShsaW5lKSkgcmV0dXJuIG51bGw7CiAgICAgICAgdmFyIG4g
			PSBsaW5lOwogICAgICAgIGxpbmUgPSBnZXRMaW5lKGxpbmUpOwogICAgICAgIGlmICghbGluZSkg
			cmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgdmFyIG4gPSBsaW5lTm8o
			bGluZSk7CiAgICAgICAgaWYgKG4gPT0gbnVsbCkgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAg
			dmFyIG1hcmtlciA9IGxpbmUuZ3V0dGVyTWFya2VyOwogICAgICByZXR1cm4ge2xpbmU6IG4sIGhh
			bmRsZTogbGluZSwgdGV4dDogbGluZS50ZXh0LCBtYXJrZXJUZXh0OiBtYXJrZXIgJiYgbWFya2Vy
			LnRleHQsCiAgICAgICAgICAgICAgbWFya2VyQ2xhc3M6IG1hcmtlciAmJiBtYXJrZXIuc3R5bGUs
			IGxpbmVDbGFzczogbGluZS5jbGFzc05hbWV9OwogICAgfQoKICAgIGZ1bmN0aW9uIHN0cmluZ1dp
			ZHRoKHN0cikgewogICAgICBtZWFzdXJlLmlubmVySFRNTCA9ICI8cHJlPjxzcGFuPng8L3NwYW4+
			PC9wcmU+IjsKICAgICAgbWVhc3VyZS5maXJzdENoaWxkLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZC5u
			b2RlVmFsdWUgPSBzdHI7CiAgICAgIHJldHVybiBtZWFzdXJlLmZpcnN0Q2hpbGQuZmlyc3RDaGls
			ZC5vZmZzZXRXaWR0aCB8fCAxMDsKICAgIH0KICAgIC8vIFRoZXNlIGFyZSB1c2VkIHRvIGdvIGZy
			b20gcGl4ZWwgcG9zaXRpb25zIHRvIGNoYXJhY3RlcgogICAgLy8gcG9zaXRpb25zLCB0YWtpbmcg
			dmFyeWluZyBjaGFyYWN0ZXIgd2lkdGhzIGludG8gYWNjb3VudC4KICAgIGZ1bmN0aW9uIGNoYXJG
			cm9tWChsaW5lLCB4KSB7CiAgICAgIGlmICh4IDw9IDApIHJldHVybiAwOwogICAgICB2YXIgbGlu
			ZU9iaiA9IGdldExpbmUobGluZSksIHRleHQgPSBsaW5lT2JqLnRleHQ7CiAgICAgIGZ1bmN0aW9u
			IGdldFgobGVuKSB7CiAgICAgICAgbWVhc3VyZS5pbm5lckhUTUwgPSAiPHByZT48c3Bhbj4iICsg
			bGluZU9iai5nZXRIVE1MKG1ha2VUYWIsIGxlbikgKyAiPC9zcGFuPjwvcHJlPiI7CiAgICAgICAg
			cmV0dXJuIG1lYXN1cmUuZmlyc3RDaGlsZC5maXJzdENoaWxkLm9mZnNldFdpZHRoOwogICAgICB9
			CiAgICAgIHZhciBmcm9tID0gMCwgZnJvbVggPSAwLCB0byA9IHRleHQubGVuZ3RoLCB0b1g7CiAg
			ICAgIC8vIEd1ZXNzIGEgc3VpdGFibGUgdXBwZXIgYm91bmQgZm9yIG91ciBzZWFyY2guCiAgICAg
			IHZhciBlc3RpbWF0ZWQgPSBNYXRoLm1pbih0bywgTWF0aC5jZWlsKHggLyBjaGFyV2lkdGgoKSkp
			OwogICAgICBmb3IgKDs7KSB7CiAgICAgICAgdmFyIGVzdFggPSBnZXRYKGVzdGltYXRlZCk7CiAg
			ICAgICAgaWYgKGVzdFggPD0geCAmJiBlc3RpbWF0ZWQgPCB0bykgZXN0aW1hdGVkID0gTWF0aC5t
			aW4odG8sIE1hdGguY2VpbChlc3RpbWF0ZWQgKiAxLjIpKTsKICAgICAgICBlbHNlIHt0b1ggPSBl
			c3RYOyB0byA9IGVzdGltYXRlZDsgYnJlYWs7fQogICAgICB9CiAgICAgIGlmICh4ID4gdG9YKSBy
			ZXR1cm4gdG87CiAgICAgIC8vIFRyeSB0byBndWVzcyBhIHN1aXRhYmxlIGxvd2VyIGJvdW5kIGFz
			IHdlbGwuCiAgICAgIGVzdGltYXRlZCA9IE1hdGguZmxvb3IodG8gKiAwLjgpOyBlc3RYID0gZ2V0
			WChlc3RpbWF0ZWQpOwogICAgICBpZiAoZXN0WCA8IHgpIHtmcm9tID0gZXN0aW1hdGVkOyBmcm9t
			WCA9IGVzdFg7fQogICAgICAvLyBEbyBhIGJpbmFyeSBzZWFyY2ggYmV0d2VlbiB0aGVzZSBib3Vu
			ZHMuCiAgICAgIGZvciAoOzspIHsKICAgICAgICBpZiAodG8gLSBmcm9tIDw9IDEpIHJldHVybiAo
			dG9YIC0geCA+IHggLSBmcm9tWCkgPyBmcm9tIDogdG87CiAgICAgICAgdmFyIG1pZGRsZSA9IE1h
			dGguY2VpbCgoZnJvbSArIHRvKSAvIDIpLCBtaWRkbGVYID0gZ2V0WChtaWRkbGUpOwogICAgICAg
			IGlmIChtaWRkbGVYID4geCkge3RvID0gbWlkZGxlOyB0b1ggPSBtaWRkbGVYO30KICAgICAgICBl
			bHNlIHtmcm9tID0gbWlkZGxlOyBmcm9tWCA9IG1pZGRsZVg7fQogICAgICB9CiAgICB9CgogICAg
			dmFyIHRlbXBJZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmKS50b1N0cmlu
			ZygxNik7CiAgICBmdW5jdGlvbiBtZWFzdXJlTGluZShsaW5lLCBjaCkgewogICAgICBpZiAoY2gg
			PT0gMCkgcmV0dXJuIHt0b3A6IDAsIGxlZnQ6IDB9OwogICAgICB2YXIgZXh0cmEgPSAiIjsKICAg
			ICAgLy8gSW5jbHVkZSBleHRyYSB0ZXh0IGF0IHRoZSBlbmQgdG8gbWFrZSBzdXJlIHRoZSBtZWFz
			dXJlZCBsaW5lIGlzIHdyYXBwZWQgaW4gdGhlIHJpZ2h0IHdheS4KICAgICAgaWYgKG9wdGlvbnMu
			bGluZVdyYXBwaW5nKSB7CiAgICAgICAgdmFyIGVuZCA9IGxpbmUudGV4dC5pbmRleE9mKCIgIiwg
			Y2ggKyAyKTsKICAgICAgICBleHRyYSA9IGh0bWxFc2NhcGUobGluZS50ZXh0LnNsaWNlKGNoICsg
			MSwgZW5kIDwgMCA/IGxpbmUudGV4dC5sZW5ndGggOiBlbmQgKyAoaWUgPyA1IDogMCkpKTsKICAg
			ICAgfQogICAgICBtZWFzdXJlLmlubmVySFRNTCA9ICI8cHJlPiIgKyBsaW5lLmdldEhUTUwobWFr
			ZVRhYiwgY2gpICsKICAgICAgICAnPHNwYW4gaWQ9IkNvZGVNaXJyb3ItdGVtcC0nICsgdGVtcElk
			ICsgJyI+JyArIGh0bWxFc2NhcGUobGluZS50ZXh0LmNoYXJBdChjaCkgfHwgIiAiKSArICI8L3Nw
			YW4+IiArCiAgICAgICAgZXh0cmEgKyAiPC9wcmU+IjsKICAgICAgdmFyIGVsdCA9IGRvY3VtZW50
			LmdldEVsZW1lbnRCeUlkKCJDb2RlTWlycm9yLXRlbXAtIiArIHRlbXBJZCk7CiAgICAgIHZhciB0
			b3AgPSBlbHQub2Zmc2V0VG9wLCBsZWZ0ID0gZWx0Lm9mZnNldExlZnQ7CiAgICAgIC8vIE9sZGVy
			IElFcyByZXBvcnQgemVybyBvZmZzZXRzIGZvciBzcGFucyBkaXJlY3RseSBhZnRlciBhIHdyYXAK
			ICAgICAgaWYgKGllICYmIHRvcCA9PSAwICYmIGxlZnQgPT0gMCkgewogICAgICAgIHZhciBiYWNr
			dXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICAgICAgYmFja3VwLmlubmVy
			SFRNTCA9ICJ4IjsKICAgICAgICBlbHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYmFja3VwLCBl
			bHQubmV4dFNpYmxpbmcpOwogICAgICAgIHRvcCA9IGJhY2t1cC5vZmZzZXRUb3A7CiAgICAgIH0K
			ICAgICAgcmV0dXJuIHt0b3A6IHRvcCwgbGVmdDogbGVmdH07CiAgICB9CiAgICBmdW5jdGlvbiBs
			b2NhbENvb3Jkcyhwb3MsIGluTGluZVdyYXApIHsKICAgICAgdmFyIHgsIGxoID0gdGV4dEhlaWdo
			dCgpLCB5ID0gbGggKiAoaGVpZ2h0QXRMaW5lKGRvYywgcG9zLmxpbmUpIC0gKGluTGluZVdyYXAg
			PyBkaXNwbGF5T2Zmc2V0IDogMCkpOwogICAgICBpZiAocG9zLmNoID09IDApIHggPSAwOwogICAg
			ICBlbHNlIHsKICAgICAgICB2YXIgc3AgPSBtZWFzdXJlTGluZShnZXRMaW5lKHBvcy5saW5lKSwg
			cG9zLmNoKTsKICAgICAgICB4ID0gc3AubGVmdDsKICAgICAgICBpZiAob3B0aW9ucy5saW5lV3Jh
			cHBpbmcpIHkgKz0gTWF0aC5tYXgoMCwgc3AudG9wKTsKICAgICAgfQogICAgICByZXR1cm4ge3g6
			IHgsIHk6IHksIHlCb3Q6IHkgKyBsaH07CiAgICB9CiAgICAvLyBDb29yZHMgbXVzdCBiZSBsaW5l
			U3BhY2UtbG9jYWwKICAgIGZ1bmN0aW9uIGNvb3Jkc0NoYXIoeCwgeSkgewogICAgICBpZiAoeSA8
			IDApIHkgPSAwOwogICAgICB2YXIgdGggPSB0ZXh0SGVpZ2h0KCksIGN3ID0gY2hhcldpZHRoKCks
			IGhlaWdodFBvcyA9IGRpc3BsYXlPZmZzZXQgKyBNYXRoLmZsb29yKHkgLyB0aCk7CiAgICAgIHZh
			ciBsaW5lTm8gPSBsaW5lQXRIZWlnaHQoZG9jLCBoZWlnaHRQb3MpOwogICAgICBpZiAobGluZU5v
			ID49IGRvYy5zaXplKSByZXR1cm4ge2xpbmU6IGRvYy5zaXplIC0gMSwgY2g6IGdldExpbmUoZG9j
			LnNpemUgLSAxKS50ZXh0Lmxlbmd0aH07CiAgICAgIHZhciBsaW5lT2JqID0gZ2V0TGluZShsaW5l
			Tm8pLCB0ZXh0ID0gbGluZU9iai50ZXh0OwogICAgICB2YXIgdHcgPSBvcHRpb25zLmxpbmVXcmFw
			cGluZywgaW5uZXJPZmYgPSB0dyA/IGhlaWdodFBvcyAtIGhlaWdodEF0TGluZShkb2MsIGxpbmVO
			bykgOiAwOwogICAgICBpZiAoeCA8PSAwICYmIGlubmVyT2ZmID09IDApIHJldHVybiB7bGluZTog
			bGluZU5vLCBjaDogMH07CiAgICAgIGZ1bmN0aW9uIGdldFgobGVuKSB7CiAgICAgICAgdmFyIHNw
			ID0gbWVhc3VyZUxpbmUobGluZU9iaiwgbGVuKTsKICAgICAgICBpZiAodHcpIHsKICAgICAgICAg
			IHZhciBvZmYgPSBNYXRoLnJvdW5kKHNwLnRvcCAvIHRoKTsKICAgICAgICAgIHJldHVybiBNYXRo
			Lm1heCgwLCBzcC5sZWZ0ICsgKG9mZiAtIGlubmVyT2ZmKSAqIHNjcm9sbGVyLmNsaWVudFdpZHRo
			KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHNwLmxlZnQ7CiAgICAgIH0KICAgICAgdmFyIGZy
			b20gPSAwLCBmcm9tWCA9IDAsIHRvID0gdGV4dC5sZW5ndGgsIHRvWDsKICAgICAgLy8gR3Vlc3Mg
			YSBzdWl0YWJsZSB1cHBlciBib3VuZCBmb3Igb3VyIHNlYXJjaC4KICAgICAgdmFyIGVzdGltYXRl
			ZCA9IE1hdGgubWluKHRvLCBNYXRoLmNlaWwoKHggKyBpbm5lck9mZiAqIHNjcm9sbGVyLmNsaWVu
			dFdpZHRoICogLjkpIC8gY3cpKTsKICAgICAgZm9yICg7OykgewogICAgICAgIHZhciBlc3RYID0g
			Z2V0WChlc3RpbWF0ZWQpOwogICAgICAgIGlmIChlc3RYIDw9IHggJiYgZXN0aW1hdGVkIDwgdG8p
			IGVzdGltYXRlZCA9IE1hdGgubWluKHRvLCBNYXRoLmNlaWwoZXN0aW1hdGVkICogMS4yKSk7CiAg
			ICAgICAgZWxzZSB7dG9YID0gZXN0WDsgdG8gPSBlc3RpbWF0ZWQ7IGJyZWFrO30KICAgICAgfQog
			ICAgICBpZiAoeCA+IHRvWCkgcmV0dXJuIHtsaW5lOiBsaW5lTm8sIGNoOiB0b307CiAgICAgIC8v
			IFRyeSB0byBndWVzcyBhIHN1aXRhYmxlIGxvd2VyIGJvdW5kIGFzIHdlbGwuCiAgICAgIGVzdGlt
			YXRlZCA9IE1hdGguZmxvb3IodG8gKiAwLjgpOyBlc3RYID0gZ2V0WChlc3RpbWF0ZWQpOwogICAg
			ICBpZiAoZXN0WCA8IHgpIHtmcm9tID0gZXN0aW1hdGVkOyBmcm9tWCA9IGVzdFg7fQogICAgICAv
			LyBEbyBhIGJpbmFyeSBzZWFyY2ggYmV0d2VlbiB0aGVzZSBib3VuZHMuCiAgICAgIGZvciAoOzsp
			IHsKICAgICAgICBpZiAodG8gLSBmcm9tIDw9IDEpIHJldHVybiB7bGluZTogbGluZU5vLCBjaDog
			KHRvWCAtIHggPiB4IC0gZnJvbVgpID8gZnJvbSA6IHRvfTsKICAgICAgICB2YXIgbWlkZGxlID0g
			TWF0aC5jZWlsKChmcm9tICsgdG8pIC8gMiksIG1pZGRsZVggPSBnZXRYKG1pZGRsZSk7CiAgICAg
			ICAgaWYgKG1pZGRsZVggPiB4KSB7dG8gPSBtaWRkbGU7IHRvWCA9IG1pZGRsZVg7fQogICAgICAg
			IGVsc2Uge2Zyb20gPSBtaWRkbGU7IGZyb21YID0gbWlkZGxlWDt9CiAgICAgIH0KICAgIH0KICAg
			IGZ1bmN0aW9uIHBhZ2VDb29yZHMocG9zKSB7CiAgICAgIHZhciBsb2NhbCA9IGxvY2FsQ29vcmRz
			KHBvcywgdHJ1ZSksIG9mZiA9IGVsdE9mZnNldChsaW5lU3BhY2UpOwogICAgICByZXR1cm4ge3g6
			IG9mZi5sZWZ0ICsgbG9jYWwueCwgeTogb2ZmLnRvcCArIGxvY2FsLnksIHlCb3Q6IG9mZi50b3Ag
			KyBsb2NhbC55Qm90fTsKICAgIH0KCiAgICB2YXIgY2FjaGVkSGVpZ2h0LCBjYWNoZWRIZWlnaHRG
			b3IsIG1lYXN1cmVUZXh0OwogICAgZnVuY3Rpb24gdGV4dEhlaWdodCgpIHsKICAgICAgaWYgKG1l
			YXN1cmVUZXh0ID09IG51bGwpIHsKICAgICAgICBtZWFzdXJlVGV4dCA9ICI8cHJlPiI7CiAgICAg
			ICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OTsgKytpKSBtZWFzdXJlVGV4dCArPSAieDxici8+IjsK
			ICAgICAgICBtZWFzdXJlVGV4dCArPSAieDwvcHJlPiI7CiAgICAgIH0KICAgICAgdmFyIG9mZnNl
			dEhlaWdodCA9IGxpbmVEaXYuY2xpZW50SGVpZ2h0OwogICAgICBpZiAob2Zmc2V0SGVpZ2h0ID09
			IGNhY2hlZEhlaWdodEZvcikgcmV0dXJuIGNhY2hlZEhlaWdodDsKICAgICAgY2FjaGVkSGVpZ2h0
			Rm9yID0gb2Zmc2V0SGVpZ2h0OwogICAgICBtZWFzdXJlLmlubmVySFRNTCA9IG1lYXN1cmVUZXh0
			OwogICAgICBjYWNoZWRIZWlnaHQgPSBtZWFzdXJlLmZpcnN0Q2hpbGQub2Zmc2V0SGVpZ2h0IC8g
			NTAgfHwgMTsKICAgICAgbWVhc3VyZS5pbm5lckhUTUwgPSAiIjsKICAgICAgcmV0dXJuIGNhY2hl
			ZEhlaWdodDsKICAgIH0KICAgIHZhciBjYWNoZWRXaWR0aCwgY2FjaGVkV2lkdGhGb3IgPSAwOwog
			ICAgZnVuY3Rpb24gY2hhcldpZHRoKCkgewogICAgICBpZiAoc2Nyb2xsZXIuY2xpZW50V2lkdGgg
			PT0gY2FjaGVkV2lkdGhGb3IpIHJldHVybiBjYWNoZWRXaWR0aDsKICAgICAgY2FjaGVkV2lkdGhG
			b3IgPSBzY3JvbGxlci5jbGllbnRXaWR0aDsKICAgICAgcmV0dXJuIChjYWNoZWRXaWR0aCA9IHN0
			cmluZ1dpZHRoKCJ4IikpOwogICAgfQogICAgZnVuY3Rpb24gcGFkZGluZ1RvcCgpIHtyZXR1cm4g
			bGluZVNwYWNlLm9mZnNldFRvcDt9CiAgICBmdW5jdGlvbiBwYWRkaW5nTGVmdCgpIHtyZXR1cm4g
			bGluZVNwYWNlLm9mZnNldExlZnQ7fQoKICAgIGZ1bmN0aW9uIHBvc0Zyb21Nb3VzZShlLCBsaWJl
			cmFsKSB7CiAgICAgIHZhciBvZmZXID0gZWx0T2Zmc2V0KHNjcm9sbGVyLCB0cnVlKSwgeCwgeTsK
			ICAgICAgLy8gRmFpbHMgdW5wcmVkaWN0YWJseSBvbiBJRVs2N10gd2hlbiBtb3VzZSBpcyBkcmFn
			Z2VkIGFyb3VuZCBxdWlja2x5LgogICAgICB0cnkgeyB4ID0gZS5jbGllbnRYOyB5ID0gZS5jbGll
			bnRZOyB9IGNhdGNoIChlKSB7IHJldHVybiBudWxsOyB9CiAgICAgIC8vIFRoaXMgaXMgYSBtZXNz
			IG9mIGEgaGV1cmlzdGljIHRvIHRyeSBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgYQogICAgICAvLyBz
			Y3JvbGwtYmFyIHdhcyBjbGlja2VkIG9yIG5vdCwgYW5kIHRvIHJldHVybiBudWxsIGlmIG9uZSB3
			YXMKICAgICAgLy8gKGFuZCAhbGliZXJhbCkuCiAgICAgIGlmICghbGliZXJhbCAmJiAoeCAtIG9m
			ZlcubGVmdCA+IHNjcm9sbGVyLmNsaWVudFdpZHRoIHx8IHkgLSBvZmZXLnRvcCA+IHNjcm9sbGVy
			LmNsaWVudEhlaWdodCkpCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIHZhciBvZmZMID0gZWx0
			T2Zmc2V0KGxpbmVTcGFjZSwgdHJ1ZSk7CiAgICAgIHJldHVybiBjb29yZHNDaGFyKHggLSBvZmZM
			LmxlZnQsIHkgLSBvZmZMLnRvcCk7CiAgICB9CiAgICBmdW5jdGlvbiBvbkNvbnRleHRNZW51KGUp
			IHsKICAgICAgdmFyIHBvcyA9IHBvc0Zyb21Nb3VzZShlKSwgc2Nyb2xsUG9zID0gc2Nyb2xsZXIu
			c2Nyb2xsVG9wOwogICAgICBpZiAoIXBvcyB8fCB3aW5kb3cub3BlcmEpIHJldHVybjsgLy8gT3Bl
			cmEgaXMgZGlmZmljdWx0LgogICAgICBpZiAocG9zRXEoc2VsLmZyb20sIHNlbC50bykgfHwgcG9z
			TGVzcyhwb3MsIHNlbC5mcm9tKSB8fCAhcG9zTGVzcyhwb3MsIHNlbC50bykpCiAgICAgICAgb3Bl
			cmF0aW9uKHNldEN1cnNvcikocG9zLmxpbmUsIHBvcy5jaCk7CgogICAgICB2YXIgb2xkQ1NTID0g
			aW5wdXQuc3R5bGUuY3NzVGV4dDsKICAgICAgaW5wdXREaXYuc3R5bGUucG9zaXRpb24gPSAiYWJz
			b2x1dGUiOwogICAgICBpbnB1dC5zdHlsZS5jc3NUZXh0ID0gInBvc2l0aW9uOiBmaXhlZDsgd2lk
			dGg6IDMwcHg7IGhlaWdodDogMzBweDsgdG9wOiAiICsgKGUuY2xpZW50WSAtIDUpICsKICAgICAg
			ICAicHg7IGxlZnQ6ICIgKyAoZS5jbGllbnRYIC0gNSkgKyAicHg7IHotaW5kZXg6IDEwMDA7IGJh
			Y2tncm91bmQ6IHdoaXRlOyAiICsKICAgICAgICAiYm9yZGVyLXdpZHRoOiAwOyBvdXRsaW5lOiBu
			b25lOyBvdmVyZmxvdzogaGlkZGVuOyBvcGFjaXR5OiAuMDU7IGZpbHRlcjogYWxwaGEob3BhY2l0
			eT01KTsiOwogICAgICBsZWF2ZUlucHV0QWxvbmUgPSB0cnVlOwogICAgICB2YXIgdmFsID0gaW5w
			dXQudmFsdWUgPSBnZXRTZWxlY3Rpb24oKTsKICAgICAgZm9jdXNJbnB1dCgpOwogICAgICBzZWxl
			Y3RJbnB1dChpbnB1dCk7CiAgICAgIGZ1bmN0aW9uIHJlaGlkZSgpIHsKICAgICAgICB2YXIgbmV3
			VmFsID0gc3BsaXRMaW5lcyhpbnB1dC52YWx1ZSkuam9pbigiXG4iKTsKICAgICAgICBpZiAobmV3
			VmFsICE9IHZhbCkgb3BlcmF0aW9uKHJlcGxhY2VTZWxlY3Rpb24pKG5ld1ZhbCwgImVuZCIpOwog
			ICAgICAgIGlucHV0RGl2LnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIjsKICAgICAgICBpbnB1
			dC5zdHlsZS5jc3NUZXh0ID0gb2xkQ1NTOwogICAgICAgIGlmIChpZV9sdDkpIHNjcm9sbGVyLnNj
			cm9sbFRvcCA9IHNjcm9sbFBvczsKICAgICAgICBsZWF2ZUlucHV0QWxvbmUgPSBmYWxzZTsKICAg
			ICAgICByZXNldElucHV0KHRydWUpOwogICAgICAgIHNsb3dQb2xsKCk7CiAgICAgIH0KCiAgICAg
			IGlmIChnZWNrbykgewogICAgICAgIGVfc3RvcChlKTsKICAgICAgICB2YXIgbW91c2V1cCA9IGNv
			bm5lY3Qod2luZG93LCAibW91c2V1cCIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgbW91c2V1cCgp
			OwogICAgICAgICAgc2V0VGltZW91dChyZWhpZGUsIDIwKTsKICAgICAgICB9LCB0cnVlKTsKICAg
			ICAgfSBlbHNlIHsKICAgICAgICBzZXRUaW1lb3V0KHJlaGlkZSwgNTApOwogICAgICB9CiAgICB9
			CgogICAgLy8gQ3Vyc29yLWJsaW5raW5nCiAgICBmdW5jdGlvbiByZXN0YXJ0QmxpbmsoKSB7CiAg
			ICAgIGNsZWFySW50ZXJ2YWwoYmxpbmtlcik7CiAgICAgIHZhciBvbiA9IHRydWU7CiAgICAgIGN1
			cnNvci5zdHlsZS52aXNpYmlsaXR5ID0gIiI7CiAgICAgIGJsaW5rZXIgPSBzZXRJbnRlcnZhbChm
			dW5jdGlvbigpIHsKICAgICAgICBjdXJzb3Iuc3R5bGUudmlzaWJpbGl0eSA9IChvbiA9ICFvbikg
			PyAiIiA6ICJoaWRkZW4iOwogICAgICB9LCA2NTApOwogICAgfQoKICAgIHZhciBtYXRjaGluZyA9
			IHsiKCI6ICIpPiIsICIpIjogIig8IiwgIlsiOiAiXT4iLCAiXSI6ICJbPCIsICJ7IjogIn0+Iiwg
			In0iOiAiezwifTsKICAgIGZ1bmN0aW9uIG1hdGNoQnJhY2tldHMoYXV0b2NsZWFyKSB7CiAgICAg
			IHZhciBoZWFkID0gc2VsLmludmVydGVkID8gc2VsLmZyb20gOiBzZWwudG8sIGxpbmUgPSBnZXRM
			aW5lKGhlYWQubGluZSksIHBvcyA9IGhlYWQuY2ggLSAxOwogICAgICB2YXIgbWF0Y2ggPSAocG9z
			ID49IDAgJiYgbWF0Y2hpbmdbbGluZS50ZXh0LmNoYXJBdChwb3MpXSkgfHwgbWF0Y2hpbmdbbGlu
			ZS50ZXh0LmNoYXJBdCgrK3BvcyldOwogICAgICBpZiAoIW1hdGNoKSByZXR1cm47CiAgICAgIHZh
			ciBjaCA9IG1hdGNoLmNoYXJBdCgwKSwgZm9yd2FyZCA9IG1hdGNoLmNoYXJBdCgxKSA9PSAiPiIs
			IGQgPSBmb3J3YXJkID8gMSA6IC0xLCBzdCA9IGxpbmUuc3R5bGVzOwogICAgICBmb3IgKHZhciBv
			ZmYgPSBwb3MgKyAxLCBpID0gMCwgZSA9IHN0Lmxlbmd0aDsgaSA8IGU7IGkrPTIpCiAgICAgICAg
			aWYgKChvZmYgLT0gc3RbaV0ubGVuZ3RoKSA8PSAwKSB7dmFyIHN0eWxlID0gc3RbaSsxXTsgYnJl
			YWs7fQoKICAgICAgdmFyIHN0YWNrID0gW2xpbmUudGV4dC5jaGFyQXQocG9zKV0sIHJlID0gL1so
			KXt9W1xdXS87CiAgICAgIGZ1bmN0aW9uIHNjYW4obGluZSwgZnJvbSwgdG8pIHsKICAgICAgICBp
			ZiAoIWxpbmUudGV4dCkgcmV0dXJuOwogICAgICAgIHZhciBzdCA9IGxpbmUuc3R5bGVzLCBwb3Mg
			PSBmb3J3YXJkID8gMCA6IGxpbmUudGV4dC5sZW5ndGggLSAxLCBjdXI7CiAgICAgICAgZm9yICh2
			YXIgaSA9IGZvcndhcmQgPyAwIDogc3QubGVuZ3RoIC0gMiwgZSA9IGZvcndhcmQgPyBzdC5sZW5n
			dGggOiAtMjsgaSAhPSBlOyBpICs9IDIqZCkgewogICAgICAgICAgdmFyIHRleHQgPSBzdFtpXTsK
			ICAgICAgICAgIGlmIChzdFtpKzFdICE9IG51bGwgJiYgc3RbaSsxXSAhPSBzdHlsZSkge3BvcyAr
			PSBkICogdGV4dC5sZW5ndGg7IGNvbnRpbnVlO30KICAgICAgICAgIGZvciAodmFyIGogPSBmb3J3
			YXJkID8gMCA6IHRleHQubGVuZ3RoIC0gMSwgdGUgPSBmb3J3YXJkID8gdGV4dC5sZW5ndGggOiAt
			MTsgaiAhPSB0ZTsgaiArPSBkLCBwb3MrPWQpIHsKICAgICAgICAgICAgaWYgKHBvcyA+PSBmcm9t
			ICYmIHBvcyA8IHRvICYmIHJlLnRlc3QoY3VyID0gdGV4dC5jaGFyQXQoaikpKSB7CiAgICAgICAg
			ICAgICAgdmFyIG1hdGNoID0gbWF0Y2hpbmdbY3VyXTsKICAgICAgICAgICAgICBpZiAobWF0Y2gu
			Y2hhckF0KDEpID09ICI+IiA9PSBmb3J3YXJkKSBzdGFjay5wdXNoKGN1cik7CiAgICAgICAgICAg
			ICAgZWxzZSBpZiAoc3RhY2sucG9wKCkgIT0gbWF0Y2guY2hhckF0KDApKSByZXR1cm4ge3Bvczog
			cG9zLCBtYXRjaDogZmFsc2V9OwogICAgICAgICAgICAgIGVsc2UgaWYgKCFzdGFjay5sZW5ndGgp
			IHJldHVybiB7cG9zOiBwb3MsIG1hdGNoOiB0cnVlfTsKICAgICAgICAgICAgfQogICAgICAgICAg
			fQogICAgICAgIH0KICAgICAgfQogICAgICBmb3IgKHZhciBpID0gaGVhZC5saW5lLCBlID0gZm9y
			d2FyZCA/IE1hdGgubWluKGkgKyAxMDAsIGRvYy5zaXplKSA6IE1hdGgubWF4KC0xLCBpIC0gMTAw
			KTsgaSAhPSBlOyBpKz1kKSB7CiAgICAgICAgdmFyIGxpbmUgPSBnZXRMaW5lKGkpLCBmaXJzdCA9
			IGkgPT0gaGVhZC5saW5lOwogICAgICAgIHZhciBmb3VuZCA9IHNjYW4obGluZSwgZmlyc3QgJiYg
			Zm9yd2FyZCA/IHBvcyArIDEgOiAwLCBmaXJzdCAmJiAhZm9yd2FyZCA/IHBvcyA6IGxpbmUudGV4
			dC5sZW5ndGgpOwogICAgICAgIGlmIChmb3VuZCkgYnJlYWs7CiAgICAgIH0KICAgICAgaWYgKCFm
			b3VuZCkgZm91bmQgPSB7cG9zOiBudWxsLCBtYXRjaDogZmFsc2V9OwogICAgICB2YXIgc3R5bGUg
			PSBmb3VuZC5tYXRjaCA/ICJDb2RlTWlycm9yLW1hdGNoaW5nYnJhY2tldCIgOiAiQ29kZU1pcnJv
			ci1ub25tYXRjaGluZ2JyYWNrZXQiOwogICAgICB2YXIgb25lID0gbWFya1RleHQoe2xpbmU6IGhl
			YWQubGluZSwgY2g6IHBvc30sIHtsaW5lOiBoZWFkLmxpbmUsIGNoOiBwb3MrMX0sIHN0eWxlKSwK
			ICAgICAgICAgIHR3byA9IGZvdW5kLnBvcyAhPSBudWxsICYmIG1hcmtUZXh0KHtsaW5lOiBpLCBj
			aDogZm91bmQucG9zfSwge2xpbmU6IGksIGNoOiBmb3VuZC5wb3MgKyAxfSwgc3R5bGUpOwogICAg
			ICB2YXIgY2xlYXIgPSBvcGVyYXRpb24oZnVuY3Rpb24oKXtvbmUuY2xlYXIoKTsgdHdvICYmIHR3
			by5jbGVhcigpO30pOwogICAgICBpZiAoYXV0b2NsZWFyKSBzZXRUaW1lb3V0KGNsZWFyLCA4MDAp
			OwogICAgICBlbHNlIGJyYWNrZXRIaWdobGlnaHRlZCA9IGNsZWFyOwogICAgfQoKICAgIC8vIEZp
			bmRzIHRoZSBsaW5lIHRvIHN0YXJ0IHdpdGggd2hlbiBzdGFydGluZyBhIHBhcnNlLiBUcmllcyB0
			bwogICAgLy8gZmluZCBhIGxpbmUgd2l0aCBhIHN0YXRlQWZ0ZXIsIHNvIHRoYXQgaXQgY2FuIHN0
			YXJ0IHdpdGggYQogICAgLy8gdmFsaWQgc3RhdGUuIElmIHRoYXQgZmFpbHMsIGl0IHJldHVybnMg
			dGhlIGxpbmUgd2l0aCB0aGUKICAgIC8vIHNtYWxsZXN0IGluZGVudGF0aW9uLCB3aGljaCB0ZW5k
			cyB0byBuZWVkIHRoZSBsZWFzdCBjb250ZXh0IHRvCiAgICAvLyBwYXJzZSBjb3JyZWN0bHkuCiAg
			ICBmdW5jdGlvbiBmaW5kU3RhcnRMaW5lKG4pIHsKICAgICAgdmFyIG1pbmluZGVudCwgbWlubGlu
			ZTsKICAgICAgZm9yICh2YXIgc2VhcmNoID0gbiwgbGltID0gbiAtIDQwOyBzZWFyY2ggPiBsaW07
			IC0tc2VhcmNoKSB7CiAgICAgICAgaWYgKHNlYXJjaCA9PSAwKSByZXR1cm4gMDsKICAgICAgICB2
			YXIgbGluZSA9IGdldExpbmUoc2VhcmNoLTEpOwogICAgICAgIGlmIChsaW5lLnN0YXRlQWZ0ZXIp
			IHJldHVybiBzZWFyY2g7CiAgICAgICAgdmFyIGluZGVudGVkID0gbGluZS5pbmRlbnRhdGlvbihv
			cHRpb25zLnRhYlNpemUpOwogICAgICAgIGlmIChtaW5saW5lID09IG51bGwgfHwgbWluaW5kZW50
			ID4gaW5kZW50ZWQpIHsKICAgICAgICAgIG1pbmxpbmUgPSBzZWFyY2ggLSAxOwogICAgICAgICAg
			bWluaW5kZW50ID0gaW5kZW50ZWQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBtaW5s
			aW5lOwogICAgfQogICAgZnVuY3Rpb24gZ2V0U3RhdGVCZWZvcmUobikgewogICAgICB2YXIgc3Rh
			cnQgPSBmaW5kU3RhcnRMaW5lKG4pLCBzdGF0ZSA9IHN0YXJ0ICYmIGdldExpbmUoc3RhcnQtMSku
			c3RhdGVBZnRlcjsKICAgICAgaWYgKCFzdGF0ZSkgc3RhdGUgPSBzdGFydFN0YXRlKG1vZGUpOwog
			ICAgICBlbHNlIHN0YXRlID0gY29weVN0YXRlKG1vZGUsIHN0YXRlKTsKICAgICAgZG9jLml0ZXIo
			c3RhcnQsIG4sIGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgICBsaW5lLmhpZ2hsaWdodChtb2RlLCBz
			dGF0ZSwgb3B0aW9ucy50YWJTaXplKTsKICAgICAgICBsaW5lLnN0YXRlQWZ0ZXIgPSBjb3B5U3Rh
			dGUobW9kZSwgc3RhdGUpOwogICAgICB9KTsKICAgICAgaWYgKHN0YXJ0IDwgbikgY2hhbmdlcy5w
			dXNoKHtmcm9tOiBzdGFydCwgdG86IG59KTsKICAgICAgaWYgKG4gPCBkb2Muc2l6ZSAmJiAhZ2V0
			TGluZShuKS5zdGF0ZUFmdGVyKSB3b3JrLnB1c2gobik7CiAgICAgIHJldHVybiBzdGF0ZTsKICAg
			IH0KICAgIGZ1bmN0aW9uIGhpZ2hsaWdodExpbmVzKHN0YXJ0LCBlbmQpIHsKICAgICAgdmFyIHN0
			YXRlID0gZ2V0U3RhdGVCZWZvcmUoc3RhcnQpOwogICAgICBkb2MuaXRlcihzdGFydCwgZW5kLCBm
			dW5jdGlvbihsaW5lKSB7CiAgICAgICAgbGluZS5oaWdobGlnaHQobW9kZSwgc3RhdGUsIG9wdGlv
			bnMudGFiU2l6ZSk7CiAgICAgICAgbGluZS5zdGF0ZUFmdGVyID0gY29weVN0YXRlKG1vZGUsIHN0
			YXRlKTsKICAgICAgfSk7CiAgICB9CiAgICBmdW5jdGlvbiBoaWdobGlnaHRXb3JrZXIoKSB7CiAg
			ICAgIHZhciBlbmQgPSArbmV3IERhdGUgKyBvcHRpb25zLndvcmtUaW1lOwogICAgICB2YXIgZm91
			bmRXb3JrID0gd29yay5sZW5ndGg7CiAgICAgIHdoaWxlICh3b3JrLmxlbmd0aCkgewogICAgICAg
			IGlmICghZ2V0TGluZShzaG93aW5nRnJvbSkuc3RhdGVBZnRlcikgdmFyIHRhc2sgPSBzaG93aW5n
			RnJvbTsKICAgICAgICBlbHNlIHZhciB0YXNrID0gd29yay5wb3AoKTsKICAgICAgICBpZiAodGFz
			ayA+PSBkb2Muc2l6ZSkgY29udGludWU7CiAgICAgICAgdmFyIHN0YXJ0ID0gZmluZFN0YXJ0TGlu
			ZSh0YXNrKSwgc3RhdGUgPSBzdGFydCAmJiBnZXRMaW5lKHN0YXJ0LTEpLnN0YXRlQWZ0ZXI7CiAg
			ICAgICAgaWYgKHN0YXRlKSBzdGF0ZSA9IGNvcHlTdGF0ZShtb2RlLCBzdGF0ZSk7CiAgICAgICAg
			ZWxzZSBzdGF0ZSA9IHN0YXJ0U3RhdGUobW9kZSk7CgogICAgICAgIHZhciB1bmNoYW5nZWQgPSAw
			LCBjb21wYXJlID0gbW9kZS5jb21wYXJlU3RhdGVzLCByZWFsQ2hhbmdlID0gZmFsc2UsCiAgICAg
			ICAgICAgIGkgPSBzdGFydCwgYmFpbCA9IGZhbHNlOwogICAgICAgIGRvYy5pdGVyKGksIGRvYy5z
			aXplLCBmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgICB2YXIgaGFkU3RhdGUgPSBsaW5lLnN0YXRl
			QWZ0ZXI7CiAgICAgICAgICBpZiAoK25ldyBEYXRlID4gZW5kKSB7CiAgICAgICAgICAgIHdvcmsu
			cHVzaChpKTsKICAgICAgICAgICAgc3RhcnRXb3JrZXIob3B0aW9ucy53b3JrRGVsYXkpOwogICAg
			ICAgICAgICBpZiAocmVhbENoYW5nZSkgY2hhbmdlcy5wdXNoKHtmcm9tOiB0YXNrLCB0bzogaSAr
			IDF9KTsKICAgICAgICAgICAgcmV0dXJuIChiYWlsID0gdHJ1ZSk7CiAgICAgICAgICB9CiAgICAg
			ICAgICB2YXIgY2hhbmdlZCA9IGxpbmUuaGlnaGxpZ2h0KG1vZGUsIHN0YXRlLCBvcHRpb25zLnRh
			YlNpemUpOwogICAgICAgICAgaWYgKGNoYW5nZWQpIHJlYWxDaGFuZ2UgPSB0cnVlOwogICAgICAg
			ICAgbGluZS5zdGF0ZUFmdGVyID0gY29weVN0YXRlKG1vZGUsIHN0YXRlKTsKICAgICAgICAgIGlm
			IChjb21wYXJlKSB7CiAgICAgICAgICAgIGlmIChoYWRTdGF0ZSAmJiBjb21wYXJlKGhhZFN0YXRl
			LCBzdGF0ZSkpIHJldHVybiB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYg
			KGNoYW5nZWQgIT09IGZhbHNlIHx8ICFoYWRTdGF0ZSkgdW5jaGFuZ2VkID0gMDsKICAgICAgICAg
			ICAgZWxzZSBpZiAoKyt1bmNoYW5nZWQgPiAzICYmICghbW9kZS5pbmRlbnQgfHwgbW9kZS5pbmRl
			bnQoaGFkU3RhdGUsICIiKSA9PSBtb2RlLmluZGVudChzdGF0ZSwgIiIpKSkKICAgICAgICAgICAg
			ICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgICsraTsKICAgICAgICB9KTsKICAg
			ICAgICBpZiAoYmFpbCkgcmV0dXJuOwogICAgICAgIGlmIChyZWFsQ2hhbmdlKSBjaGFuZ2VzLnB1
			c2goe2Zyb206IHRhc2ssIHRvOiBpICsgMX0pOwogICAgICB9CiAgICAgIGlmIChmb3VuZFdvcmsg
			JiYgb3B0aW9ucy5vbkhpZ2hsaWdodENvbXBsZXRlKQogICAgICAgIG9wdGlvbnMub25IaWdobGln
			aHRDb21wbGV0ZShpbnN0YW5jZSk7CiAgICB9CiAgICBmdW5jdGlvbiBzdGFydFdvcmtlcih0aW1l
			KSB7CiAgICAgIGlmICghd29yay5sZW5ndGgpIHJldHVybjsKICAgICAgaGlnaGxpZ2h0LnNldCh0
			aW1lLCBvcGVyYXRpb24oaGlnaGxpZ2h0V29ya2VyKSk7CiAgICB9CgogICAgLy8gT3BlcmF0aW9u
			cyBhcmUgdXNlZCB0byB3cmFwIGNoYW5nZXMgaW4gc3VjaCBhIHdheSB0aGF0IGVhY2gKICAgIC8v
			IGNoYW5nZSB3b24ndCBoYXZlIHRvIHVwZGF0ZSB0aGUgY3Vyc29yIGFuZCBkaXNwbGF5ICh3aGlj
			aCB3b3VsZAogICAgLy8gYmUgYXdrd2FyZCwgc2xvdywgYW5kIGVycm9yLXByb25lKSwgYnV0IGlu
			c3RlYWQgdXBkYXRlcyBhcmUKICAgIC8vIGJhdGNoZWQgYW5kIHRoZW4gYWxsIGNvbWJpbmVkIGFu
			ZCBleGVjdXRlZCBhdCBvbmNlLgogICAgZnVuY3Rpb24gc3RhcnRPcGVyYXRpb24oKSB7CiAgICAg
			IHVwZGF0ZUlucHV0ID0gdXNlclNlbENoYW5nZSA9IHRleHRDaGFuZ2VkID0gbnVsbDsKICAgICAg
			Y2hhbmdlcyA9IFtdOyBzZWxlY3Rpb25DaGFuZ2VkID0gZmFsc2U7IGNhbGxiYWNrcyA9IFtdOwog
			ICAgfQogICAgZnVuY3Rpb24gZW5kT3BlcmF0aW9uKCkgewogICAgICB2YXIgcmVTY3JvbGwgPSBm
			YWxzZSwgdXBkYXRlZDsKICAgICAgaWYgKHNlbGVjdGlvbkNoYW5nZWQpIHJlU2Nyb2xsID0gIXNj
			cm9sbEN1cnNvckludG9WaWV3KCk7CiAgICAgIGlmIChjaGFuZ2VzLmxlbmd0aCkgdXBkYXRlZCA9
			IHVwZGF0ZURpc3BsYXkoY2hhbmdlcywgdHJ1ZSk7CiAgICAgIGVsc2UgewogICAgICAgIGlmIChz
			ZWxlY3Rpb25DaGFuZ2VkKSB1cGRhdGVTZWxlY3Rpb24oKTsKICAgICAgICBpZiAoZ3V0dGVyRGly
			dHkpIHVwZGF0ZUd1dHRlcigpOwogICAgICB9CiAgICAgIGlmIChyZVNjcm9sbCkgc2Nyb2xsQ3Vy
			c29ySW50b1ZpZXcoKTsKICAgICAgaWYgKHNlbGVjdGlvbkNoYW5nZWQpIHtzY3JvbGxFZGl0b3JJ
			bnRvVmlldygpOyByZXN0YXJ0QmxpbmsoKTt9CgogICAgICBpZiAoZm9jdXNlZCAmJiAhbGVhdmVJ
			bnB1dEFsb25lICYmCiAgICAgICAgICAodXBkYXRlSW5wdXQgPT09IHRydWUgfHwgKHVwZGF0ZUlu
			cHV0ICE9PSBmYWxzZSAmJiBzZWxlY3Rpb25DaGFuZ2VkKSkpCiAgICAgICAgcmVzZXRJbnB1dCh1
			c2VyU2VsQ2hhbmdlKTsKCiAgICAgIGlmIChzZWxlY3Rpb25DaGFuZ2VkICYmIG9wdGlvbnMubWF0
			Y2hCcmFja2V0cykKICAgICAgICBzZXRUaW1lb3V0KG9wZXJhdGlvbihmdW5jdGlvbigpIHsKICAg
			ICAgICAgIGlmIChicmFja2V0SGlnaGxpZ2h0ZWQpIHticmFja2V0SGlnaGxpZ2h0ZWQoKTsgYnJh
			Y2tldEhpZ2hsaWdodGVkID0gbnVsbDt9CiAgICAgICAgICBpZiAocG9zRXEoc2VsLmZyb20sIHNl
			bC50bykpIG1hdGNoQnJhY2tldHMoZmFsc2UpOwogICAgICAgIH0pLCAyMCk7CiAgICAgIHZhciB0
			YyA9IHRleHRDaGFuZ2VkLCBjYnMgPSBjYWxsYmFja3M7IC8vIHRoZXNlIGNhbiBiZSByZXNldCBi
			eSBjYWxsYmFja3MKICAgICAgaWYgKHNlbGVjdGlvbkNoYW5nZWQgJiYgb3B0aW9ucy5vbkN1cnNv
			ckFjdGl2aXR5KQogICAgICAgIG9wdGlvbnMub25DdXJzb3JBY3Rpdml0eShpbnN0YW5jZSk7CiAg
			ICAgIGlmICh0YyAmJiBvcHRpb25zLm9uQ2hhbmdlICYmIGluc3RhbmNlKQogICAgICAgIG9wdGlv
			bnMub25DaGFuZ2UoaW5zdGFuY2UsIHRjKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYnMu
			bGVuZ3RoOyArK2kpIGNic1tpXShpbnN0YW5jZSk7CiAgICAgIGlmICh1cGRhdGVkICYmIG9wdGlv
			bnMub25VcGRhdGUpIG9wdGlvbnMub25VcGRhdGUoaW5zdGFuY2UpOwogICAgfQogICAgdmFyIG5l
			c3RlZE9wZXJhdGlvbiA9IDA7CiAgICBmdW5jdGlvbiBvcGVyYXRpb24oZikgewogICAgICByZXR1
			cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKCFuZXN0ZWRPcGVyYXRpb24rKykgc3RhcnRPcGVy
			YXRpb24oKTsKICAgICAgICB0cnkge3ZhciByZXN1bHQgPSBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50
			cyk7fQogICAgICAgIGZpbmFsbHkge2lmICghLS1uZXN0ZWRPcGVyYXRpb24pIGVuZE9wZXJhdGlv
			bigpO30KICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9OwogICAgfQoKICAgIGZvciAodmFy
			IGV4dCBpbiBleHRlbnNpb25zKQogICAgICBpZiAoZXh0ZW5zaW9ucy5wcm9wZXJ0eUlzRW51bWVy
			YWJsZShleHQpICYmCiAgICAgICAgICAhaW5zdGFuY2UucHJvcGVydHlJc0VudW1lcmFibGUoZXh0
			KSkKICAgICAgICBpbnN0YW5jZVtleHRdID0gZXh0ZW5zaW9uc1tleHRdOwogICAgcmV0dXJuIGlu
			c3RhbmNlOwogIH0gLy8gKGVuZCBvZiBmdW5jdGlvbiBDb2RlTWlycm9yKQoKICAvLyBUaGUgZGVm
			YXVsdCBjb25maWd1cmF0aW9uIG9wdGlvbnMuCiAgQ29kZU1pcnJvci5kZWZhdWx0cyA9IHsKICAg
			IHZhbHVlOiAiIiwKICAgIG1vZGU6IG51bGwsCiAgICB0aGVtZTogImRlZmF1bHQiLAogICAgaW5k
			ZW50VW5pdDogMiwKICAgIGluZGVudFdpdGhUYWJzOiBmYWxzZSwKICAgIHNtYXJ0SW5kZW50OiB0
			cnVlLAogICAgdGFiU2l6ZTogNCwKICAgIGtleU1hcDogImRlZmF1bHQiLAogICAgZXh0cmFLZXlz
			OiBudWxsLAogICAgZWxlY3RyaWNDaGFyczogdHJ1ZSwKICAgIGF1dG9DbGVhckVtcHR5TGluZXM6
			IGZhbHNlLAogICAgb25LZXlFdmVudDogbnVsbCwKICAgIGxpbmVXcmFwcGluZzogZmFsc2UsCiAg
			ICBsaW5lTnVtYmVyczogZmFsc2UsCiAgICBndXR0ZXI6IGZhbHNlLAogICAgZml4ZWRHdXR0ZXI6
			IGZhbHNlLAogICAgZmlyc3RMaW5lTnVtYmVyOiAxLAogICAgcmVhZE9ubHk6IGZhbHNlLAogICAg
			b25DaGFuZ2U6IG51bGwsCiAgICBvbkN1cnNvckFjdGl2aXR5OiBudWxsLAogICAgb25HdXR0ZXJD
			bGljazogbnVsbCwKICAgIG9uSGlnaGxpZ2h0Q29tcGxldGU6IG51bGwsCiAgICBvblVwZGF0ZTog
			bnVsbCwKICAgIG9uRm9jdXM6IG51bGwsIG9uQmx1cjogbnVsbCwgb25TY3JvbGw6IG51bGwsCiAg
			ICBtYXRjaEJyYWNrZXRzOiBmYWxzZSwKICAgIHdvcmtUaW1lOiAxMDAsCiAgICB3b3JrRGVsYXk6
			IDIwMCwKICAgIHBvbGxJbnRlcnZhbDogMTAwLAogICAgdW5kb0RlcHRoOiA0MCwKICAgIHRhYmlu
			ZGV4OiBudWxsLAogICAgZG9jdW1lbnQ6IHdpbmRvdy5kb2N1bWVudAogIH07CgogIHZhciBpb3Mg
			PSAvQXBwbGVXZWJLaXQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgL01vYmlsZVwvXHcr
			Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOwogIHZhciBtYWMgPSBpb3MgfHwgL01hYy8udGVz
			dChuYXZpZ2F0b3IucGxhdGZvcm0pOwogIHZhciB3aW4gPSAvV2luLy50ZXN0KG5hdmlnYXRvci5w
			bGF0Zm9ybSk7CgogIC8vIEtub3duIG1vZGVzLCBieSBuYW1lIGFuZCBieSBNSU1FCiAgdmFyIG1v
			ZGVzID0ge30sIG1pbWVNb2RlcyA9IHt9OwogIENvZGVNaXJyb3IuZGVmaW5lTW9kZSA9IGZ1bmN0
			aW9uKG5hbWUsIG1vZGUpIHsKICAgIGlmICghQ29kZU1pcnJvci5kZWZhdWx0cy5tb2RlICYmIG5h
			bWUgIT0gIm51bGwiKSBDb2RlTWlycm9yLmRlZmF1bHRzLm1vZGUgPSBuYW1lOwogICAgbW9kZXNb
			bmFtZV0gPSBtb2RlOwogIH07CiAgQ29kZU1pcnJvci5kZWZpbmVNSU1FID0gZnVuY3Rpb24obWlt
			ZSwgc3BlYykgewogICAgbWltZU1vZGVzW21pbWVdID0gc3BlYzsKICB9OwogIENvZGVNaXJyb3Iu
			cmVzb2x2ZU1vZGUgPSBmdW5jdGlvbihzcGVjKSB7CiAgICBpZiAodHlwZW9mIHNwZWMgPT0gInN0
			cmluZyIgJiYgbWltZU1vZGVzLmhhc093blByb3BlcnR5KHNwZWMpKQogICAgICBzcGVjID0gbWlt
			ZU1vZGVzW3NwZWNdOwogICAgaWYgKHR5cGVvZiBzcGVjID09ICJzdHJpbmciKSByZXR1cm4ge25h
			bWU6IHNwZWN9OwogICAgZWxzZSByZXR1cm4gc3BlYyB8fCB7bmFtZTogIm51bGwifTsKICB9Owog
			IENvZGVNaXJyb3IuZ2V0TW9kZSA9IGZ1bmN0aW9uKG9wdGlvbnMsIHNwZWMpIHsKICAgIHZhciBz
			cGVjID0gQ29kZU1pcnJvci5yZXNvbHZlTW9kZShzcGVjKTsKICAgIHZhciBtZmFjdG9yeSA9IG1v
			ZGVzW3NwZWMubmFtZV07CiAgICBpZiAoIW1mYWN0b3J5KSB7CiAgICAgIGlmICh3aW5kb3cuY29u
			c29sZSkgY29uc29sZS53YXJuKCJObyBtb2RlICIgKyBzcGVjLm5hbWUgKyAiIGZvdW5kLCBmYWxs
			aW5nIGJhY2sgdG8gcGxhaW4gdGV4dC4iKTsKICAgICAgcmV0dXJuIENvZGVNaXJyb3IuZ2V0TW9k
			ZShvcHRpb25zLCAidGV4dC9wbGFpbiIpOwogICAgfQogICAgcmV0dXJuIG1mYWN0b3J5KG9wdGlv
			bnMsIHNwZWMpOwogIH07CiAgQ29kZU1pcnJvci5saXN0TW9kZXMgPSBmdW5jdGlvbigpIHsKICAg
			IHZhciBsaXN0ID0gW107CiAgICBmb3IgKHZhciBtIGluIG1vZGVzKQogICAgICBpZiAobW9kZXMu
			cHJvcGVydHlJc0VudW1lcmFibGUobSkpIGxpc3QucHVzaChtKTsKICAgIHJldHVybiBsaXN0Owog
			IH07CiAgQ29kZU1pcnJvci5saXN0TUlNRXMgPSBmdW5jdGlvbigpIHsKICAgIHZhciBsaXN0ID0g
			W107CiAgICBmb3IgKHZhciBtIGluIG1pbWVNb2RlcykKICAgICAgaWYgKG1pbWVNb2Rlcy5wcm9w
			ZXJ0eUlzRW51bWVyYWJsZShtKSkgbGlzdC5wdXNoKHttaW1lOiBtLCBtb2RlOiBtaW1lTW9kZXNb
			bV19KTsKICAgIHJldHVybiBsaXN0OwogIH07CgogIHZhciBleHRlbnNpb25zID0gQ29kZU1pcnJv
			ci5leHRlbnNpb25zID0ge307CiAgQ29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24gPSBmdW5jdGlv
			bihuYW1lLCBmdW5jKSB7CiAgICBleHRlbnNpb25zW25hbWVdID0gZnVuYzsKICB9OwoKICB2YXIg
			Y29tbWFuZHMgPSBDb2RlTWlycm9yLmNvbW1hbmRzID0gewogICAgc2VsZWN0QWxsOiBmdW5jdGlv
			bihjbSkge2NtLnNldFNlbGVjdGlvbih7bGluZTogMCwgY2g6IDB9LCB7bGluZTogY20ubGluZUNv
			dW50KCkgLSAxfSk7fSwKICAgIGtpbGxMaW5lOiBmdW5jdGlvbihjbSkgewogICAgICB2YXIgZnJv
			bSA9IGNtLmdldEN1cnNvcih0cnVlKSwgdG8gPSBjbS5nZXRDdXJzb3IoZmFsc2UpLCBzZWwgPSAh
			cG9zRXEoZnJvbSwgdG8pOwogICAgICBpZiAoIXNlbCAmJiBjbS5nZXRMaW5lKGZyb20ubGluZSku
			bGVuZ3RoID09IGZyb20uY2gpIGNtLnJlcGxhY2VSYW5nZSgiIiwgZnJvbSwge2xpbmU6IGZyb20u
			bGluZSArIDEsIGNoOiAwfSk7CiAgICAgIGVsc2UgY20ucmVwbGFjZVJhbmdlKCIiLCBmcm9tLCBz
			ZWwgPyB0byA6IHtsaW5lOiBmcm9tLmxpbmV9KTsKICAgIH0sCiAgICBkZWxldGVMaW5lOiBmdW5j
			dGlvbihjbSkge3ZhciBsID0gY20uZ2V0Q3Vyc29yKCkubGluZTsgY20ucmVwbGFjZVJhbmdlKCIi
			LCB7bGluZTogbCwgY2g6IDB9LCB7bGluZTogbH0pO30sCiAgICB1bmRvOiBmdW5jdGlvbihjbSkg
			e2NtLnVuZG8oKTt9LAogICAgcmVkbzogZnVuY3Rpb24oY20pIHtjbS5yZWRvKCk7fSwKICAgIGdv
			RG9jU3RhcnQ6IGZ1bmN0aW9uKGNtKSB7Y20uc2V0Q3Vyc29yKDAsIDAsIHRydWUpO30sCiAgICBn
			b0RvY0VuZDogZnVuY3Rpb24oY20pIHtjbS5zZXRTZWxlY3Rpb24oe2xpbmU6IGNtLmxpbmVDb3Vu
			dCgpIC0gMX0sIG51bGwsIHRydWUpO30sCiAgICBnb0xpbmVTdGFydDogZnVuY3Rpb24oY20pIHtj
			bS5zZXRDdXJzb3IoY20uZ2V0Q3Vyc29yKCkubGluZSwgMCwgdHJ1ZSk7fSwKICAgIGdvTGluZVN0
			YXJ0U21hcnQ6IGZ1bmN0aW9uKGNtKSB7CiAgICAgIHZhciBjdXIgPSBjbS5nZXRDdXJzb3IoKTsK
			ICAgICAgdmFyIHRleHQgPSBjbS5nZXRMaW5lKGN1ci5saW5lKSwgZmlyc3ROb25XUyA9IE1hdGgu
			bWF4KDAsIHRleHQuc2VhcmNoKC9cUy8pKTsKICAgICAgY20uc2V0Q3Vyc29yKGN1ci5saW5lLCBj
			dXIuY2ggPD0gZmlyc3ROb25XUyAmJiBjdXIuY2ggPyAwIDogZmlyc3ROb25XUywgdHJ1ZSk7CiAg
			ICB9LAogICAgZ29MaW5lRW5kOiBmdW5jdGlvbihjbSkge2NtLnNldFNlbGVjdGlvbih7bGluZTog
			Y20uZ2V0Q3Vyc29yKCkubGluZX0sIG51bGwsIHRydWUpO30sCiAgICBnb0xpbmVVcDogZnVuY3Rp
			b24oY20pIHtjbS5tb3ZlVigtMSwgImxpbmUiKTt9LAogICAgZ29MaW5lRG93bjogZnVuY3Rpb24o
			Y20pIHtjbS5tb3ZlVigxLCAibGluZSIpO30sCiAgICBnb1BhZ2VVcDogZnVuY3Rpb24oY20pIHtj
			bS5tb3ZlVigtMSwgInBhZ2UiKTt9LAogICAgZ29QYWdlRG93bjogZnVuY3Rpb24oY20pIHtjbS5t
			b3ZlVigxLCAicGFnZSIpO30sCiAgICBnb0NoYXJMZWZ0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVI
			KC0xLCAiY2hhciIpO30sCiAgICBnb0NoYXJSaWdodDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlSCgx
			LCAiY2hhciIpO30sCiAgICBnb0NvbHVtbkxlZnQ6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZUgoLTEs
			ICJjb2x1bW4iKTt9LAogICAgZ29Db2x1bW5SaWdodDogZnVuY3Rpb24oY20pIHtjbS5tb3ZlSCgx
			LCAiY29sdW1uIik7fSwKICAgIGdvV29yZExlZnQ6IGZ1bmN0aW9uKGNtKSB7Y20ubW92ZUgoLTEs
			ICJ3b3JkIik7fSwKICAgIGdvV29yZFJpZ2h0OiBmdW5jdGlvbihjbSkge2NtLm1vdmVIKDEsICJ3
			b3JkIik7fSwKICAgIGRlbENoYXJMZWZ0OiBmdW5jdGlvbihjbSkge2NtLmRlbGV0ZUgoLTEsICJj
			aGFyIik7fSwKICAgIGRlbENoYXJSaWdodDogZnVuY3Rpb24oY20pIHtjbS5kZWxldGVIKDEsICJj
			aGFyIik7fSwKICAgIGRlbFdvcmRMZWZ0OiBmdW5jdGlvbihjbSkge2NtLmRlbGV0ZUgoLTEsICJ3
			b3JkIik7fSwKICAgIGRlbFdvcmRSaWdodDogZnVuY3Rpb24oY20pIHtjbS5kZWxldGVIKDEsICJ3
			b3JkIik7fSwKICAgIGluZGVudEF1dG86IGZ1bmN0aW9uKGNtKSB7Y20uaW5kZW50U2VsZWN0aW9u
			KCJzbWFydCIpO30sCiAgICBpbmRlbnRNb3JlOiBmdW5jdGlvbihjbSkge2NtLmluZGVudFNlbGVj
			dGlvbigiYWRkIik7fSwKICAgIGluZGVudExlc3M6IGZ1bmN0aW9uKGNtKSB7Y20uaW5kZW50U2Vs
			ZWN0aW9uKCJzdWJ0cmFjdCIpO30sCiAgICBpbnNlcnRUYWI6IGZ1bmN0aW9uKGNtKSB7Y20ucmVw
			bGFjZVNlbGVjdGlvbigiXHQiLCAiZW5kIik7fSwKICAgIHRyYW5zcG9zZUNoYXJzOiBmdW5jdGlv
			bihjbSkgewogICAgICB2YXIgY3VyID0gY20uZ2V0Q3Vyc29yKCksIGxpbmUgPSBjbS5nZXRMaW5l
			KGN1ci5saW5lKTsKICAgICAgaWYgKGN1ci5jaCA+IDAgJiYgY3VyLmNoIDwgbGluZS5sZW5ndGgg
			LSAxKQogICAgICAgIGNtLnJlcGxhY2VSYW5nZShsaW5lLmNoYXJBdChjdXIuY2gpICsgbGluZS5j
			aGFyQXQoY3VyLmNoIC0gMSksCiAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXIubGlu
			ZSwgY2g6IGN1ci5jaCAtIDF9LCB7bGluZTogY3VyLmxpbmUsIGNoOiBjdXIuY2ggKyAxfSk7CiAg
			ICB9LAogICAgbmV3bGluZUFuZEluZGVudDogZnVuY3Rpb24oY20pIHsKICAgICAgY20ucmVwbGFj
			ZVNlbGVjdGlvbigiXG4iLCAiZW5kIik7CiAgICAgIGNtLmluZGVudExpbmUoY20uZ2V0Q3Vyc29y
			KCkubGluZSk7CiAgICB9LAogICAgdG9nZ2xlT3ZlcndyaXRlOiBmdW5jdGlvbihjbSkge2NtLnRv
			Z2dsZU92ZXJ3cml0ZSgpO30KICB9OwoKICB2YXIga2V5TWFwID0gQ29kZU1pcnJvci5rZXlNYXAg
			PSB7fTsKICBrZXlNYXAuYmFzaWMgPSB7CiAgICAiTGVmdCI6ICJnb0NoYXJMZWZ0IiwgIlJpZ2h0
			IjogImdvQ2hhclJpZ2h0IiwgIlVwIjogImdvTGluZVVwIiwgIkRvd24iOiAiZ29MaW5lRG93biIs
			CiAgICAiRW5kIjogImdvTGluZUVuZCIsICJIb21lIjogImdvTGluZVN0YXJ0U21hcnQiLCAiUGFn
			ZVVwIjogImdvUGFnZVVwIiwgIlBhZ2VEb3duIjogImdvUGFnZURvd24iLAogICAgIkRlbGV0ZSI6
			ICJkZWxDaGFyUmlnaHQiLCAiQmFja3NwYWNlIjogImRlbENoYXJMZWZ0IiwgIlRhYiI6ICJpbmRl
			bnRNb3JlIiwgIlNoaWZ0LVRhYiI6ICJpbmRlbnRMZXNzIiwKICAgICJFbnRlciI6ICJuZXdsaW5l
			QW5kSW5kZW50IiwgIkluc2VydCI6ICJ0b2dnbGVPdmVyd3JpdGUiCiAgfTsKICAvLyBOb3RlIHRo
			YXQgdGhlIHNhdmUgYW5kIGZpbmQtcmVsYXRlZCBjb21tYW5kcyBhcmVuJ3QgZGVmaW5lZCBieQog
			IC8vIGRlZmF1bHQuIFVua25vd24gY29tbWFuZHMgYXJlIHNpbXBseSBpZ25vcmVkLgogIGtleU1h
			cC5wY0RlZmF1bHQgPSB7CiAgICAiQ3RybC1BIjogInNlbGVjdEFsbCIsICJDdHJsLUQiOiAiZGVs
			ZXRlTGluZSIsICJDdHJsLVoiOiAidW5kbyIsICJTaGlmdC1DdHJsLVoiOiAicmVkbyIsICJDdHJs
			LVkiOiAicmVkbyIsCiAgICAiQ3RybC1Ib21lIjogImdvRG9jU3RhcnQiLCAiQWx0LVVwIjogImdv
			RG9jU3RhcnQiLCAiQ3RybC1FbmQiOiAiZ29Eb2NFbmQiLCAiQ3RybC1Eb3duIjogImdvRG9jRW5k
			IiwKICAgICJDdHJsLUxlZnQiOiAiZ29Xb3JkTGVmdCIsICJDdHJsLVJpZ2h0IjogImdvV29yZFJp
			Z2h0IiwgIkFsdC1MZWZ0IjogImdvTGluZVN0YXJ0IiwgIkFsdC1SaWdodCI6ICJnb0xpbmVFbmQi
			LAogICAgIkN0cmwtQmFja3NwYWNlIjogImRlbFdvcmRMZWZ0IiwgIkN0cmwtRGVsZXRlIjogImRl
			bFdvcmRSaWdodCIsICJDdHJsLVMiOiAic2F2ZSIsICJDdHJsLUYiOiAiZmluZCIsCiAgICAiQ3Ry
			bC1HIjogImZpbmROZXh0IiwgIlNoaWZ0LUN0cmwtRyI6ICJmaW5kUHJldiIsICJTaGlmdC1DdHJs
			LUYiOiAicmVwbGFjZSIsICJTaGlmdC1DdHJsLVIiOiAicmVwbGFjZUFsbCIsCiAgICBmYWxsdGhy
			b3VnaDogImJhc2ljIgogIH07CiAga2V5TWFwLm1hY0RlZmF1bHQgPSB7CiAgICAiQ21kLUEiOiAi
			c2VsZWN0QWxsIiwgIkNtZC1EIjogImRlbGV0ZUxpbmUiLCAiQ21kLVoiOiAidW5kbyIsICJTaGlm
			dC1DbWQtWiI6ICJyZWRvIiwgIkNtZC1ZIjogInJlZG8iLAogICAgIkNtZC1VcCI6ICJnb0RvY1N0
			YXJ0IiwgIkNtZC1FbmQiOiAiZ29Eb2NFbmQiLCAiQ21kLURvd24iOiAiZ29Eb2NFbmQiLCAiQWx0
			LUxlZnQiOiAiZ29Xb3JkTGVmdCIsCiAgICAiQWx0LVJpZ2h0IjogImdvV29yZFJpZ2h0IiwgIkNt
			ZC1MZWZ0IjogImdvTGluZVN0YXJ0IiwgIkNtZC1SaWdodCI6ICJnb0xpbmVFbmQiLCAiQWx0LUJh
			Y2tzcGFjZSI6ICJkZWxXb3JkTGVmdCIsCiAgICAiQ3RybC1BbHQtQmFja3NwYWNlIjogImRlbFdv
			cmRSaWdodCIsICJBbHQtRGVsZXRlIjogImRlbFdvcmRSaWdodCIsICJDbWQtUyI6ICJzYXZlIiwg
			IkNtZC1GIjogImZpbmQiLAogICAgIkNtZC1HIjogImZpbmROZXh0IiwgIlNoaWZ0LUNtZC1HIjog
			ImZpbmRQcmV2IiwgIkNtZC1BbHQtRiI6ICJyZXBsYWNlIiwgIlNoaWZ0LUNtZC1BbHQtRiI6ICJy
			ZXBsYWNlQWxsIiwKICAgIGZhbGx0aHJvdWdoOiBbImJhc2ljIiwgImVtYWNzeSJdCiAgfTsKICBr
			ZXlNYXBbImRlZmF1bHQiXSA9IG1hYyA/IGtleU1hcC5tYWNEZWZhdWx0IDoga2V5TWFwLnBjRGVm
			YXVsdDsKICBrZXlNYXAuZW1hY3N5ID0gewogICAgIkN0cmwtRiI6ICJnb0NoYXJSaWdodCIsICJD
			dHJsLUIiOiAiZ29DaGFyTGVmdCIsICJDdHJsLVAiOiAiZ29MaW5lVXAiLCAiQ3RybC1OIjogImdv
			TGluZURvd24iLAogICAgIkFsdC1GIjogImdvV29yZFJpZ2h0IiwgIkFsdC1CIjogImdvV29yZExl
			ZnQiLCAiQ3RybC1BIjogImdvTGluZVN0YXJ0IiwgIkN0cmwtRSI6ICJnb0xpbmVFbmQiLAogICAg
			IkN0cmwtViI6ICJnb1BhZ2VVcCIsICJTaGlmdC1DdHJsLVYiOiAiZ29QYWdlRG93biIsICJDdHJs
			LUQiOiAiZGVsQ2hhclJpZ2h0IiwgIkN0cmwtSCI6ICJkZWxDaGFyTGVmdCIsCiAgICAiQWx0LUQi
			OiAiZGVsV29yZFJpZ2h0IiwgIkFsdC1CYWNrc3BhY2UiOiAiZGVsV29yZExlZnQiLCAiQ3RybC1L
			IjogImtpbGxMaW5lIiwgIkN0cmwtVCI6ICJ0cmFuc3Bvc2VDaGFycyIKICB9OwoKICBmdW5jdGlv
			biBnZXRLZXlNYXAodmFsKSB7CiAgICBpZiAodHlwZW9mIHZhbCA9PSAic3RyaW5nIikgcmV0dXJu
			IGtleU1hcFt2YWxdOwogICAgZWxzZSByZXR1cm4gdmFsOwogIH0KICBmdW5jdGlvbiBsb29rdXBL
			ZXkobmFtZSwgZXh0cmFNYXAsIG1hcCwgaGFuZGxlKSB7CiAgICBmdW5jdGlvbiBsb29rdXAobWFw
			KSB7CiAgICAgIG1hcCA9IGdldEtleU1hcChtYXApOwogICAgICB2YXIgZm91bmQgPSBtYXBbbmFt
			ZV07CiAgICAgIGlmIChmb3VuZCAhPSBudWxsICYmIGhhbmRsZShmb3VuZCkpIHJldHVybiB0cnVl
			OwogICAgICBpZiAobWFwLmNhdGNoYWxsKSByZXR1cm4gaGFuZGxlKG1hcC5jYXRjaGFsbCk7CiAg
			ICAgIHZhciBmYWxsdGhyb3VnaCA9IG1hcC5mYWxsdGhyb3VnaDsKICAgICAgaWYgKGZhbGx0aHJv
			dWdoID09IG51bGwpIHJldHVybiBmYWxzZTsKICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9T
			dHJpbmcuY2FsbChmYWxsdGhyb3VnaCkgIT0gIltvYmplY3QgQXJyYXldIikKICAgICAgICByZXR1
			cm4gbG9va3VwKGZhbGx0aHJvdWdoKTsKICAgICAgZm9yICh2YXIgaSA9IDAsIGUgPSBmYWxsdGhy
			b3VnaC5sZW5ndGg7IGkgPCBlOyArK2kpIHsKICAgICAgICBpZiAobG9va3VwKGZhbGx0aHJvdWdo
			W2ldKSkgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAg
			aWYgKGV4dHJhTWFwICYmIGxvb2t1cChleHRyYU1hcCkpIHJldHVybiB0cnVlOwogICAgcmV0dXJu
			IGxvb2t1cChtYXApOwogIH0KICBmdW5jdGlvbiBpc01vZGlmaWVyS2V5KGV2ZW50KSB7CiAgICB2
			YXIgbmFtZSA9IGtleU5hbWVzW2VfcHJvcChldmVudCwgImtleUNvZGUiKV07CiAgICByZXR1cm4g
			bmFtZSA9PSAiQ3RybCIgfHwgbmFtZSA9PSAiQWx0IiB8fCBuYW1lID09ICJTaGlmdCIgfHwgbmFt
			ZSA9PSAiTW9kIjsKICB9CgogIENvZGVNaXJyb3IuZnJvbVRleHRBcmVhID0gZnVuY3Rpb24odGV4
			dGFyZWEsIG9wdGlvbnMpIHsKICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9OwogICAgb3B0
			aW9ucy52YWx1ZSA9IHRleHRhcmVhLnZhbHVlOwogICAgaWYgKCFvcHRpb25zLnRhYmluZGV4ICYm
			IHRleHRhcmVhLnRhYmluZGV4KQogICAgICBvcHRpb25zLnRhYmluZGV4ID0gdGV4dGFyZWEudGFi
			aW5kZXg7CgogICAgZnVuY3Rpb24gc2F2ZSgpIHt0ZXh0YXJlYS52YWx1ZSA9IGluc3RhbmNlLmdl
			dFZhbHVlKCk7fQogICAgaWYgKHRleHRhcmVhLmZvcm0pIHsKICAgICAgLy8gRGVwbG9yYWJsZSBo
			YWNrIHRvIG1ha2UgdGhlIHN1Ym1pdCBtZXRob2QgZG8gdGhlIHJpZ2h0IHRoaW5nLgogICAgICB2
			YXIgcm1TdWJtaXQgPSBjb25uZWN0KHRleHRhcmVhLmZvcm0sICJzdWJtaXQiLCBzYXZlLCB0cnVl
			KTsKICAgICAgaWYgKHR5cGVvZiB0ZXh0YXJlYS5mb3JtLnN1Ym1pdCA9PSAiZnVuY3Rpb24iKSB7
			CiAgICAgICAgdmFyIHJlYWxTdWJtaXQgPSB0ZXh0YXJlYS5mb3JtLnN1Ym1pdDsKICAgICAgICBm
			dW5jdGlvbiB3cmFwcGVkU3VibWl0KCkgewogICAgICAgICAgc2F2ZSgpOwogICAgICAgICAgdGV4
			dGFyZWEuZm9ybS5zdWJtaXQgPSByZWFsU3VibWl0OwogICAgICAgICAgdGV4dGFyZWEuZm9ybS5z
			dWJtaXQoKTsKICAgICAgICAgIHRleHRhcmVhLmZvcm0uc3VibWl0ID0gd3JhcHBlZFN1Ym1pdDsK
			ICAgICAgICB9CiAgICAgICAgdGV4dGFyZWEuZm9ybS5zdWJtaXQgPSB3cmFwcGVkU3VibWl0Owog
			ICAgICB9CiAgICB9CgogICAgdGV4dGFyZWEuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIHZh
			ciBpbnN0YW5jZSA9IENvZGVNaXJyb3IoZnVuY3Rpb24obm9kZSkgewogICAgICB0ZXh0YXJlYS5w
			YXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCB0ZXh0YXJlYS5uZXh0U2libGluZyk7CiAgICB9
			LCBvcHRpb25zKTsKICAgIGluc3RhbmNlLnNhdmUgPSBzYXZlOwogICAgaW5zdGFuY2UuZ2V0VGV4
			dEFyZWEgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRleHRhcmVhOyB9OwogICAgaW5zdGFuY2UudG9U
			ZXh0QXJlYSA9IGZ1bmN0aW9uKCkgewogICAgICBzYXZlKCk7CiAgICAgIHRleHRhcmVhLnBhcmVu
			dE5vZGUucmVtb3ZlQ2hpbGQoaW5zdGFuY2UuZ2V0V3JhcHBlckVsZW1lbnQoKSk7CiAgICAgIHRl
			eHRhcmVhLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAgICAgaWYgKHRleHRhcmVhLmZvcm0pIHsKICAg
			ICAgICBybVN1Ym1pdCgpOwogICAgICAgIGlmICh0eXBlb2YgdGV4dGFyZWEuZm9ybS5zdWJtaXQg
			PT0gImZ1bmN0aW9uIikKICAgICAgICAgIHRleHRhcmVhLmZvcm0uc3VibWl0ID0gcmVhbFN1Ym1p
			dDsKICAgICAgfQogICAgfTsKICAgIHJldHVybiBpbnN0YW5jZTsKICB9OwoKICAvLyBVdGlsaXR5
			IGZ1bmN0aW9ucyBmb3Igd29ya2luZyB3aXRoIHN0YXRlLiBFeHBvcnRlZCBiZWNhdXNlIG1vZGVz
			CiAgLy8gc29tZXRpbWVzIG5lZWQgdG8gZG8gdGhpcy4KICBmdW5jdGlvbiBjb3B5U3RhdGUobW9k
			ZSwgc3RhdGUpIHsKICAgIGlmIChzdGF0ZSA9PT0gdHJ1ZSkgcmV0dXJuIHN0YXRlOwogICAgaWYg
			KG1vZGUuY29weVN0YXRlKSByZXR1cm4gbW9kZS5jb3B5U3RhdGUoc3RhdGUpOwogICAgdmFyIG5z
			dGF0ZSA9IHt9OwogICAgZm9yICh2YXIgbiBpbiBzdGF0ZSkgewogICAgICB2YXIgdmFsID0gc3Rh
			dGVbbl07CiAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBBcnJheSkgdmFsID0gdmFsLmNvbmNhdChb
			XSk7CiAgICAgIG5zdGF0ZVtuXSA9IHZhbDsKICAgIH0KICAgIHJldHVybiBuc3RhdGU7CiAgfQog
			IENvZGVNaXJyb3IuY29weVN0YXRlID0gY29weVN0YXRlOwogIGZ1bmN0aW9uIHN0YXJ0U3RhdGUo
			bW9kZSwgYTEsIGEyKSB7CiAgICByZXR1cm4gbW9kZS5zdGFydFN0YXRlID8gbW9kZS5zdGFydFN0
			YXRlKGExLCBhMikgOiB0cnVlOwogIH0KICBDb2RlTWlycm9yLnN0YXJ0U3RhdGUgPSBzdGFydFN0
			YXRlOwoKICAvLyBUaGUgY2hhcmFjdGVyIHN0cmVhbSB1c2VkIGJ5IGEgbW9kZSdzIHBhcnNlci4K
			ICBmdW5jdGlvbiBTdHJpbmdTdHJlYW0oc3RyaW5nLCB0YWJTaXplKSB7CiAgICB0aGlzLnBvcyA9
			IHRoaXMuc3RhcnQgPSAwOwogICAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7CiAgICB0aGlzLnRhYlNp
			emUgPSB0YWJTaXplIHx8IDg7CiAgfQogIFN0cmluZ1N0cmVhbS5wcm90b3R5cGUgPSB7CiAgICBl
			b2w6IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLnBvcyA+PSB0aGlzLnN0cmluZy5sZW5ndGg7fSwK
			ICAgIHNvbDogZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMucG9zID09IDA7fSwKICAgIHBlZWs6IGZ1
			bmN0aW9uKCkge3JldHVybiB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MpO30sCiAgICBuZXh0
			OiBmdW5jdGlvbigpIHsKICAgICAgaWYgKHRoaXMucG9zIDwgdGhpcy5zdHJpbmcubGVuZ3RoKQog
			ICAgICAgIHJldHVybiB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MrKyk7CiAgICB9LAogICAg
			ZWF0OiBmdW5jdGlvbihtYXRjaCkgewogICAgICB2YXIgY2ggPSB0aGlzLnN0cmluZy5jaGFyQXQo
			dGhpcy5wb3MpOwogICAgICBpZiAodHlwZW9mIG1hdGNoID09ICJzdHJpbmciKSB2YXIgb2sgPSBj
			aCA9PSBtYXRjaDsKICAgICAgZWxzZSB2YXIgb2sgPSBjaCAmJiAobWF0Y2gudGVzdCA/IG1hdGNo
			LnRlc3QoY2gpIDogbWF0Y2goY2gpKTsKICAgICAgaWYgKG9rKSB7Kyt0aGlzLnBvczsgcmV0dXJu
			IGNoO30KICAgIH0sCiAgICBlYXRXaGlsZTogZnVuY3Rpb24obWF0Y2gpIHsKICAgICAgdmFyIHN0
			YXJ0ID0gdGhpcy5wb3M7CiAgICAgIHdoaWxlICh0aGlzLmVhdChtYXRjaCkpe30KICAgICAgcmV0
			dXJuIHRoaXMucG9zID4gc3RhcnQ7CiAgICB9LAogICAgZWF0U3BhY2U6IGZ1bmN0aW9uKCkgewog
			ICAgICB2YXIgc3RhcnQgPSB0aGlzLnBvczsKICAgICAgd2hpbGUgKC9bXHNcdTAwYTBdLy50ZXN0
			KHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcykpKSArK3RoaXMucG9zOwogICAgICByZXR1cm4g
			dGhpcy5wb3MgPiBzdGFydDsKICAgIH0sCiAgICBza2lwVG9FbmQ6IGZ1bmN0aW9uKCkge3RoaXMu
			cG9zID0gdGhpcy5zdHJpbmcubGVuZ3RoO30sCiAgICBza2lwVG86IGZ1bmN0aW9uKGNoKSB7CiAg
			ICAgIHZhciBmb3VuZCA9IHRoaXMuc3RyaW5nLmluZGV4T2YoY2gsIHRoaXMucG9zKTsKICAgICAg
			aWYgKGZvdW5kID4gLTEpIHt0aGlzLnBvcyA9IGZvdW5kOyByZXR1cm4gdHJ1ZTt9CiAgICB9LAog
			ICAgYmFja1VwOiBmdW5jdGlvbihuKSB7dGhpcy5wb3MgLT0gbjt9LAogICAgY29sdW1uOiBmdW5j
			dGlvbigpIHtyZXR1cm4gY291bnRDb2x1bW4odGhpcy5zdHJpbmcsIHRoaXMuc3RhcnQsIHRoaXMu
			dGFiU2l6ZSk7fSwKICAgIGluZGVudGF0aW9uOiBmdW5jdGlvbigpIHtyZXR1cm4gY291bnRDb2x1
			bW4odGhpcy5zdHJpbmcsIG51bGwsIHRoaXMudGFiU2l6ZSk7fSwKICAgIG1hdGNoOiBmdW5jdGlv
			bihwYXR0ZXJuLCBjb25zdW1lLCBjYXNlSW5zZW5zaXRpdmUpIHsKICAgICAgaWYgKHR5cGVvZiBw
			YXR0ZXJuID09ICJzdHJpbmciKSB7CiAgICAgICAgZnVuY3Rpb24gY2FzZWQoc3RyKSB7cmV0dXJu
			IGNhc2VJbnNlbnNpdGl2ZSA/IHN0ci50b0xvd2VyQ2FzZSgpIDogc3RyO30KICAgICAgICBpZiAo
			Y2FzZWQodGhpcy5zdHJpbmcpLmluZGV4T2YoY2FzZWQocGF0dGVybiksIHRoaXMucG9zKSA9PSB0
			aGlzLnBvcykgewogICAgICAgICAgaWYgKGNvbnN1bWUgIT09IGZhbHNlKSB0aGlzLnBvcyArPSBw
			YXR0ZXJuLmxlbmd0aDsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQog
			ICAgICBlbHNlIHsKICAgICAgICB2YXIgbWF0Y2ggPSB0aGlzLnN0cmluZy5zbGljZSh0aGlzLnBv
			cykubWF0Y2gocGF0dGVybik7CiAgICAgICAgaWYgKG1hdGNoICYmIGNvbnN1bWUgIT09IGZhbHNl
			KSB0aGlzLnBvcyArPSBtYXRjaFswXS5sZW5ndGg7CiAgICAgICAgcmV0dXJuIG1hdGNoOwogICAg
			ICB9CiAgICB9LAogICAgY3VycmVudDogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJpbmcuc2xp
			Y2UodGhpcy5zdGFydCwgdGhpcy5wb3MpO30KICB9OwogIENvZGVNaXJyb3IuU3RyaW5nU3RyZWFt
			ID0gU3RyaW5nU3RyZWFtOwoKICBmdW5jdGlvbiBNYXJrZWRUZXh0KGZyb20sIHRvLCBjbGFzc05h
			bWUsIHNldCkgewogICAgdGhpcy5mcm9tID0gZnJvbTsgdGhpcy50byA9IHRvOyB0aGlzLnN0eWxl
			ID0gY2xhc3NOYW1lOyB0aGlzLnNldCA9IHNldDsKICB9CiAgTWFya2VkVGV4dC5wcm90b3R5cGUg
			PSB7CiAgICBhdHRhY2g6IGZ1bmN0aW9uKGxpbmUpIHsgdGhpcy5zZXQucHVzaChsaW5lKTsgfSwK
			ICAgIGRldGFjaDogZnVuY3Rpb24obGluZSkgewogICAgICB2YXIgaXggPSBpbmRleE9mKHRoaXMu
			c2V0LCBsaW5lKTsKICAgICAgaWYgKGl4ID4gLTEpIHRoaXMuc2V0LnNwbGljZShpeCwgMSk7CiAg
			ICB9LAogICAgc3BsaXQ6IGZ1bmN0aW9uKHBvcywgbGVuQmVmb3JlKSB7CiAgICAgIGlmICh0aGlz
			LnRvIDw9IHBvcyAmJiB0aGlzLnRvICE9IG51bGwpIHJldHVybiBudWxsOwogICAgICB2YXIgZnJv
			bSA9IHRoaXMuZnJvbSA8IHBvcyB8fCB0aGlzLmZyb20gPT0gbnVsbCA/IG51bGwgOiB0aGlzLmZy
			b20gLSBwb3MgKyBsZW5CZWZvcmU7CiAgICAgIHZhciB0byA9IHRoaXMudG8gPT0gbnVsbCA/IG51
			bGwgOiB0aGlzLnRvIC0gcG9zICsgbGVuQmVmb3JlOwogICAgICByZXR1cm4gbmV3IE1hcmtlZFRl
			eHQoZnJvbSwgdG8sIHRoaXMuc3R5bGUsIHRoaXMuc2V0KTsKICAgIH0sCiAgICBkdXA6IGZ1bmN0
			aW9uKCkgeyByZXR1cm4gbmV3IE1hcmtlZFRleHQobnVsbCwgbnVsbCwgdGhpcy5zdHlsZSwgdGhp
			cy5zZXQpOyB9LAogICAgY2xpcFRvOiBmdW5jdGlvbihmcm9tT3BlbiwgZnJvbSwgdG9PcGVuLCB0
			bywgZGlmZikgewogICAgICBpZiAodGhpcy5mcm9tICE9IG51bGwgJiYgdGhpcy5mcm9tID49IGZy
			b20pCiAgICAgICAgdGhpcy5mcm9tID0gTWF0aC5tYXgodG8sIHRoaXMuZnJvbSkgKyBkaWZmOwog
			ICAgICBpZiAodGhpcy50byAhPSBudWxsICYmIHRoaXMudG8gPiBmcm9tKQogICAgICAgIHRoaXMu
			dG8gPSB0byA8IHRoaXMudG8gPyB0aGlzLnRvICsgZGlmZiA6IGZyb207CiAgICAgIGlmIChmcm9t
			T3BlbiAmJiB0byA+IHRoaXMuZnJvbSAmJiAodG8gPCB0aGlzLnRvIHx8IHRoaXMudG8gPT0gbnVs
			bCkpCiAgICAgICAgdGhpcy5mcm9tID0gbnVsbDsKICAgICAgaWYgKHRvT3BlbiAmJiAoZnJvbSA8
			IHRoaXMudG8gfHwgdGhpcy50byA9PSBudWxsKSAmJiAoZnJvbSA+IHRoaXMuZnJvbSB8fCB0aGlz
			LmZyb20gPT0gbnVsbCkpCiAgICAgICAgdGhpcy50byA9IG51bGw7CiAgICB9LAogICAgaXNEZWFk
			OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuZnJvbSAhPSBudWxsICYmIHRoaXMudG8gIT0gbnVs
			bCAmJiB0aGlzLmZyb20gPj0gdGhpcy50bzsgfSwKICAgIHNhbWVTZXQ6IGZ1bmN0aW9uKHgpIHsg
			cmV0dXJuIHRoaXMuc2V0ID09IHguc2V0OyB9CiAgfTsKCiAgZnVuY3Rpb24gQm9va21hcmsocG9z
			KSB7CiAgICB0aGlzLmZyb20gPSBwb3M7IHRoaXMudG8gPSBwb3M7IHRoaXMubGluZSA9IG51bGw7
			CiAgfQogIEJvb2ttYXJrLnByb3RvdHlwZSA9IHsKICAgIGF0dGFjaDogZnVuY3Rpb24obGluZSkg
			eyB0aGlzLmxpbmUgPSBsaW5lOyB9LAogICAgZGV0YWNoOiBmdW5jdGlvbihsaW5lKSB7IGlmICh0
			aGlzLmxpbmUgPT0gbGluZSkgdGhpcy5saW5lID0gbnVsbDsgfSwKICAgIHNwbGl0OiBmdW5jdGlv
			bihwb3MsIGxlbkJlZm9yZSkgewogICAgICBpZiAocG9zIDwgdGhpcy5mcm9tKSB7CiAgICAgICAg
			dGhpcy5mcm9tID0gdGhpcy50byA9ICh0aGlzLmZyb20gLSBwb3MpICsgbGVuQmVmb3JlOwogICAg
			ICAgIHJldHVybiB0aGlzOwogICAgICB9CiAgICB9LAogICAgaXNEZWFkOiBmdW5jdGlvbigpIHsg
			cmV0dXJuIHRoaXMuZnJvbSA+IHRoaXMudG87IH0sCiAgICBjbGlwVG86IGZ1bmN0aW9uKGZyb21P
			cGVuLCBmcm9tLCB0b09wZW4sIHRvLCBkaWZmKSB7CiAgICAgIGlmICgoZnJvbU9wZW4gfHwgZnJv
			bSA8IHRoaXMuZnJvbSkgJiYgKHRvT3BlbiB8fCB0byA+IHRoaXMudG8pKSB7CiAgICAgICAgdGhp
			cy5mcm9tID0gMDsgdGhpcy50byA9IC0xOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZnJvbSA+IGZy
			b20pIHsKICAgICAgICB0aGlzLmZyb20gPSB0aGlzLnRvID0gTWF0aC5tYXgodG8sIHRoaXMuZnJv
			bSkgKyBkaWZmOwogICAgICB9CiAgICB9LAogICAgc2FtZVNldDogZnVuY3Rpb24oeCkgeyByZXR1
			cm4gZmFsc2U7IH0sCiAgICBmaW5kOiBmdW5jdGlvbigpIHsKICAgICAgaWYgKCF0aGlzLmxpbmUg
			fHwgIXRoaXMubGluZS5wYXJlbnQpIHJldHVybiBudWxsOwogICAgICByZXR1cm4ge2xpbmU6IGxp
			bmVObyh0aGlzLmxpbmUpLCBjaDogdGhpcy5mcm9tfTsKICAgIH0sCiAgICBjbGVhcjogZnVuY3Rp
			b24oKSB7CiAgICAgIGlmICh0aGlzLmxpbmUpIHsKICAgICAgICB2YXIgZm91bmQgPSBpbmRleE9m
			KHRoaXMubGluZS5tYXJrZWQsIHRoaXMpOwogICAgICAgIGlmIChmb3VuZCAhPSAtMSkgdGhpcy5s
			aW5lLm1hcmtlZC5zcGxpY2UoZm91bmQsIDEpOwogICAgICAgIHRoaXMubGluZSA9IG51bGw7CiAg
			ICAgIH0KICAgIH0KICB9OwoKICAvLyBMaW5lIG9iamVjdHMuIFRoZXNlIGhvbGQgc3RhdGUgcmVs
			YXRlZCB0byBhIGxpbmUsIGluY2x1ZGluZwogIC8vIGhpZ2hsaWdodGluZyBpbmZvICh0aGUgc3R5
			bGVzIGFycmF5KS4KICBmdW5jdGlvbiBMaW5lKHRleHQsIHN0eWxlcykgewogICAgdGhpcy5zdHls
			ZXMgPSBzdHlsZXMgfHwgW3RleHQsIG51bGxdOwogICAgdGhpcy50ZXh0ID0gdGV4dDsKICAgIHRo
			aXMuaGVpZ2h0ID0gMTsKICAgIHRoaXMubWFya2VkID0gdGhpcy5ndXR0ZXJNYXJrZXIgPSB0aGlz
			LmNsYXNzTmFtZSA9IHRoaXMuaGFuZGxlcnMgPSBudWxsOwogICAgdGhpcy5zdGF0ZUFmdGVyID0g
			dGhpcy5wYXJlbnQgPSB0aGlzLmhpZGRlbiA9IG51bGw7CiAgfQogIExpbmUuaW5oZXJpdE1hcmtz
			ID0gZnVuY3Rpb24odGV4dCwgb3JpZykgewogICAgdmFyIGxuID0gbmV3IExpbmUodGV4dCksIG1r
			ID0gb3JpZyAmJiBvcmlnLm1hcmtlZDsKICAgIGlmIChtaykgewogICAgICBmb3IgKHZhciBpID0g
			MDsgaSA8IG1rLmxlbmd0aDsgKytpKSB7CiAgICAgICAgaWYgKG1rW2ldLnRvID09IG51bGwgJiYg
			bWtbaV0uc3R5bGUpIHsKICAgICAgICAgIHZhciBuZXdtayA9IGxuLm1hcmtlZCB8fCAobG4ubWFy
			a2VkID0gW10pLCBtYXJrID0gbWtbaV07CiAgICAgICAgICB2YXIgbm1hcmsgPSBtYXJrLmR1cCgp
			OyBuZXdtay5wdXNoKG5tYXJrKTsgbm1hcmsuYXR0YWNoKGxuKTsKICAgICAgICB9CiAgICAgIH0K
			ICAgIH0KICAgIHJldHVybiBsbjsKICB9CiAgTGluZS5wcm90b3R5cGUgPSB7CiAgICAvLyBSZXBs
			YWNlIGEgcGllY2Ugb2YgYSBsaW5lLCBrZWVwaW5nIHRoZSBzdHlsZXMgYXJvdW5kIGl0IGludGFj
			dC4KICAgIHJlcGxhY2U6IGZ1bmN0aW9uKGZyb20sIHRvXywgdGV4dCkgewogICAgICB2YXIgc3Qg
			PSBbXSwgbWsgPSB0aGlzLm1hcmtlZCwgdG8gPSB0b18gPT0gbnVsbCA/IHRoaXMudGV4dC5sZW5n
			dGggOiB0b187CiAgICAgIGNvcHlTdHlsZXMoMCwgZnJvbSwgdGhpcy5zdHlsZXMsIHN0KTsKICAg
			ICAgaWYgKHRleHQpIHN0LnB1c2godGV4dCwgbnVsbCk7CiAgICAgIGNvcHlTdHlsZXModG8sIHRo
			aXMudGV4dC5sZW5ndGgsIHRoaXMuc3R5bGVzLCBzdCk7CiAgICAgIHRoaXMuc3R5bGVzID0gc3Q7
			CiAgICAgIHRoaXMudGV4dCA9IHRoaXMudGV4dC5zbGljZSgwLCBmcm9tKSArIHRleHQgKyB0aGlz
			LnRleHQuc2xpY2UodG8pOwogICAgICB0aGlzLnN0YXRlQWZ0ZXIgPSBudWxsOwogICAgICBpZiAo
			bWspIHsKICAgICAgICB2YXIgZGlmZiA9IHRleHQubGVuZ3RoIC0gKHRvIC0gZnJvbSk7CiAgICAg
			ICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtay5sZW5ndGg7ICsraSkgewogICAgICAgICAgdmFyIG1h
			cmsgPSBta1tpXTsKICAgICAgICAgIG1hcmsuY2xpcFRvKGZyb20gPT0gbnVsbCwgZnJvbSB8fCAw
			LCB0b18gPT0gbnVsbCwgdG8sIGRpZmYpOwogICAgICAgICAgaWYgKG1hcmsuaXNEZWFkKCkpIHtt
			YXJrLmRldGFjaCh0aGlzKTsgbWsuc3BsaWNlKGktLSwgMSk7fQogICAgICAgIH0KICAgICAgfQog
			ICAgfSwKICAgIC8vIFNwbGl0IGEgcGFydCBvZmYgYSBsaW5lLCBrZWVwaW5nIHN0eWxlcyBhbmQg
			bWFya2VycyBpbnRhY3QuCiAgICBzcGxpdDogZnVuY3Rpb24ocG9zLCB0ZXh0QmVmb3JlKSB7CiAg
			ICAgIHZhciBzdCA9IFt0ZXh0QmVmb3JlLCBudWxsXSwgbWsgPSB0aGlzLm1hcmtlZDsKICAgICAg
			Y29weVN0eWxlcyhwb3MsIHRoaXMudGV4dC5sZW5ndGgsIHRoaXMuc3R5bGVzLCBzdCk7CiAgICAg
			IHZhciB0YWtlbiA9IG5ldyBMaW5lKHRleHRCZWZvcmUgKyB0aGlzLnRleHQuc2xpY2UocG9zKSwg
			c3QpOwogICAgICBpZiAobWspIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1rLmxlbmd0
			aDsgKytpKSB7CiAgICAgICAgICB2YXIgbWFyayA9IG1rW2ldOwogICAgICAgICAgdmFyIG5ld21h
			cmsgPSBtYXJrLnNwbGl0KHBvcywgdGV4dEJlZm9yZS5sZW5ndGgpOwogICAgICAgICAgaWYgKG5l
			d21hcmspIHsKICAgICAgICAgICAgaWYgKCF0YWtlbi5tYXJrZWQpIHRha2VuLm1hcmtlZCA9IFtd
			OwogICAgICAgICAgICB0YWtlbi5tYXJrZWQucHVzaChuZXdtYXJrKTsgbmV3bWFyay5hdHRhY2go
			dGFrZW4pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdGFrZW47
			CiAgICB9LAogICAgYXBwZW5kOiBmdW5jdGlvbihsaW5lKSB7CiAgICAgIHZhciBteWxlbiA9IHRo
			aXMudGV4dC5sZW5ndGgsIG1rID0gbGluZS5tYXJrZWQsIG15bWsgPSB0aGlzLm1hcmtlZDsKICAg
			ICAgdGhpcy50ZXh0ICs9IGxpbmUudGV4dDsKICAgICAgY29weVN0eWxlcygwLCBsaW5lLnRleHQu
			bGVuZ3RoLCBsaW5lLnN0eWxlcywgdGhpcy5zdHlsZXMpOwogICAgICBpZiAobXltaykgewogICAg
			ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXltay5sZW5ndGg7ICsraSkKICAgICAgICAgIGlmICht
			eW1rW2ldLnRvID09IG51bGwpIG15bWtbaV0udG8gPSBteWxlbjsKICAgICAgfQogICAgICBpZiAo
			bWsgJiYgbWsubGVuZ3RoKSB7CiAgICAgICAgaWYgKCFteW1rKSB0aGlzLm1hcmtlZCA9IG15bWsg
			PSBbXTsKICAgICAgICBvdXRlcjogZm9yICh2YXIgaSA9IDA7IGkgPCBtay5sZW5ndGg7ICsraSkg
			ewogICAgICAgICAgdmFyIG1hcmsgPSBta1tpXTsKICAgICAgICAgIGlmICghbWFyay5mcm9tKSB7
			CiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbXltay5sZW5ndGg7ICsraikgewogICAg
			ICAgICAgICAgIHZhciBteW1hcmsgPSBteW1rW2pdOwogICAgICAgICAgICAgIGlmIChteW1hcmsu
			dG8gPT0gbXlsZW4gJiYgbXltYXJrLnNhbWVTZXQobWFyaykpIHsKICAgICAgICAgICAgICAgIG15
			bWFyay50byA9IG1hcmsudG8gPT0gbnVsbCA/IG51bGwgOiBtYXJrLnRvICsgbXlsZW47CiAgICAg
			ICAgICAgICAgICBpZiAobXltYXJrLmlzRGVhZCgpKSB7CiAgICAgICAgICAgICAgICAgIG15bWFy
			ay5kZXRhY2godGhpcyk7CiAgICAgICAgICAgICAgICAgIG1rLnNwbGljZShpLS0sIDEpOwogICAg
			ICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29udGludWUgb3V0ZXI7CiAgICAgICAgICAg
			ICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBteW1rLnB1c2gobWFyayk7
			CiAgICAgICAgICBtYXJrLmF0dGFjaCh0aGlzKTsKICAgICAgICAgIG1hcmsuZnJvbSArPSBteWxl
			bjsKICAgICAgICAgIGlmIChtYXJrLnRvICE9IG51bGwpIG1hcmsudG8gKz0gbXlsZW47CiAgICAg
			ICAgfQogICAgICB9CiAgICB9LAogICAgZml4TWFya0VuZHM6IGZ1bmN0aW9uKG90aGVyKSB7CiAg
			ICAgIHZhciBtayA9IHRoaXMubWFya2VkLCBvbWsgPSBvdGhlci5tYXJrZWQ7CiAgICAgIGlmICgh
			bWspIHJldHVybjsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtay5sZW5ndGg7ICsraSkgewog
			ICAgICAgIHZhciBtYXJrID0gbWtbaV0sIGNsb3NlID0gbWFyay50byA9PSBudWxsOwogICAgICAg
			IGlmIChjbG9zZSAmJiBvbWspIHsKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb21rLmxl
			bmd0aDsgKytqKQogICAgICAgICAgICBpZiAob21rW2pdLnNhbWVTZXQobWFyaykpIHtjbG9zZSA9
			IGZhbHNlOyBicmVhazt9CiAgICAgICAgfQogICAgICAgIGlmIChjbG9zZSkgbWFyay50byA9IHRo
			aXMudGV4dC5sZW5ndGg7CiAgICAgIH0KICAgIH0sCiAgICBmaXhNYXJrU3RhcnRzOiBmdW5jdGlv
			bigpIHsKICAgICAgdmFyIG1rID0gdGhpcy5tYXJrZWQ7CiAgICAgIGlmICghbWspIHJldHVybjsK
			ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtay5sZW5ndGg7ICsraSkKICAgICAgICBpZiAobWtb
			aV0uZnJvbSA9PSBudWxsKSBta1tpXS5mcm9tID0gMDsKICAgIH0sCiAgICBhZGRNYXJrOiBmdW5j
			dGlvbihtYXJrKSB7CiAgICAgIG1hcmsuYXR0YWNoKHRoaXMpOwogICAgICBpZiAodGhpcy5tYXJr
			ZWQgPT0gbnVsbCkgdGhpcy5tYXJrZWQgPSBbXTsKICAgICAgdGhpcy5tYXJrZWQucHVzaChtYXJr
			KTsKICAgICAgdGhpcy5tYXJrZWQuc29ydChmdW5jdGlvbihhLCBiKXtyZXR1cm4gKGEuZnJvbSB8
			fCAwKSAtIChiLmZyb20gfHwgMCk7fSk7CiAgICB9LAogICAgLy8gUnVuIHRoZSBnaXZlbiBtb2Rl
			J3MgcGFyc2VyIG92ZXIgYSBsaW5lLCB1cGRhdGUgdGhlIHN0eWxlcwogICAgLy8gYXJyYXksIHdo
			aWNoIGNvbnRhaW5zIGFsdGVybmF0aW5nIGZyYWdtZW50cyBvZiB0ZXh0IGFuZCBDU1MKICAgIC8v
			IGNsYXNzZXMuCiAgICBoaWdobGlnaHQ6IGZ1bmN0aW9uKG1vZGUsIHN0YXRlLCB0YWJTaXplKSB7
			CiAgICAgIHZhciBzdHJlYW0gPSBuZXcgU3RyaW5nU3RyZWFtKHRoaXMudGV4dCwgdGFiU2l6ZSks
			IHN0ID0gdGhpcy5zdHlsZXMsIHBvcyA9IDA7CiAgICAgIHZhciBjaGFuZ2VkID0gZmFsc2UsIGN1
			cldvcmQgPSBzdFswXSwgcHJldldvcmQ7CiAgICAgIGlmICh0aGlzLnRleHQgPT0gIiIgJiYgbW9k
			ZS5ibGFua0xpbmUpIG1vZGUuYmxhbmtMaW5lKHN0YXRlKTsKICAgICAgd2hpbGUgKCFzdHJlYW0u
			ZW9sKCkpIHsKICAgICAgICB2YXIgc3R5bGUgPSBtb2RlLnRva2VuKHN0cmVhbSwgc3RhdGUpOwog
			ICAgICAgIHZhciBzdWJzdHIgPSB0aGlzLnRleHQuc2xpY2Uoc3RyZWFtLnN0YXJ0LCBzdHJlYW0u
			cG9zKTsKICAgICAgICBzdHJlYW0uc3RhcnQgPSBzdHJlYW0ucG9zOwogICAgICAgIGlmIChwb3Mg
			JiYgc3RbcG9zLTFdID09IHN0eWxlKQogICAgICAgICAgc3RbcG9zLTJdICs9IHN1YnN0cjsKICAg
			ICAgICBlbHNlIGlmIChzdWJzdHIpIHsKICAgICAgICAgIGlmICghY2hhbmdlZCAmJiAoc3RbcG9z
			KzFdICE9IHN0eWxlIHx8IChwb3MgJiYgc3RbcG9zLTJdICE9IHByZXZXb3JkKSkpIGNoYW5nZWQg
			PSB0cnVlOwogICAgICAgICAgc3RbcG9zKytdID0gc3Vic3RyOyBzdFtwb3MrK10gPSBzdHlsZTsK
			ICAgICAgICAgIHByZXZXb3JkID0gY3VyV29yZDsgY3VyV29yZCA9IHN0W3Bvc107CiAgICAgICAg
			fQogICAgICAgIC8vIEdpdmUgdXAgd2hlbiBsaW5lIGlzIHJpZGljdWxvdXNseSBsb25nCiAgICAg
			ICAgaWYgKHN0cmVhbS5wb3MgPiA1MDAwKSB7CiAgICAgICAgICBzdFtwb3MrK10gPSB0aGlzLnRl
			eHQuc2xpY2Uoc3RyZWFtLnBvcyk7IHN0W3BvcysrXSA9IG51bGw7CiAgICAgICAgICBicmVhazsK
			ICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHN0Lmxlbmd0aCAhPSBwb3MpIHtzdC5sZW5ndGgg
			PSBwb3M7IGNoYW5nZWQgPSB0cnVlO30KICAgICAgaWYgKHBvcyAmJiBzdFtwb3MtMl0gIT0gcHJl
			dldvcmQpIGNoYW5nZWQgPSB0cnVlOwogICAgICAvLyBTaG9ydCBsaW5lcyB3aXRoIHNpbXBsZSBo
			aWdobGlnaHRzIHJldHVybiBudWxsLCBhbmQgYXJlCiAgICAgIC8vIGNvdW50ZWQgYXMgY2hhbmdl
			ZCBieSB0aGUgZHJpdmVyIGJlY2F1c2UgdGhleSBhcmUgbGlrZWx5IHRvCiAgICAgIC8vIGhpZ2hs
			aWdodCB0aGUgc2FtZSB3YXkgaW4gdmFyaW91cyBjb250ZXh0cy4KICAgICAgcmV0dXJuIGNoYW5n
			ZWQgfHwgKHN0Lmxlbmd0aCA8IDUgJiYgdGhpcy50ZXh0Lmxlbmd0aCA8IDEwID8gbnVsbCA6IGZh
			bHNlKTsKICAgIH0sCiAgICAvLyBGZXRjaCB0aGUgcGFyc2VyIHRva2VuIGZvciBhIGdpdmVuIGNo
			YXJhY3Rlci4gVXNlZnVsIGZvciBoYWNrcwogICAgLy8gdGhhdCB3YW50IHRvIGluc3BlY3QgdGhl
			IG1vZGUgc3RhdGUgKHNheSwgZm9yIGNvbXBsZXRpb24pLgogICAgZ2V0VG9rZW5BdDogZnVuY3Rp
			b24obW9kZSwgc3RhdGUsIGNoKSB7CiAgICAgIHZhciB0eHQgPSB0aGlzLnRleHQsIHN0cmVhbSA9
			IG5ldyBTdHJpbmdTdHJlYW0odHh0KTsKICAgICAgd2hpbGUgKHN0cmVhbS5wb3MgPCBjaCAmJiAh
			c3RyZWFtLmVvbCgpKSB7CiAgICAgICAgc3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvczsKICAgICAg
			ICB2YXIgc3R5bGUgPSBtb2RlLnRva2VuKHN0cmVhbSwgc3RhdGUpOwogICAgICB9CiAgICAgIHJl
			dHVybiB7c3RhcnQ6IHN0cmVhbS5zdGFydCwKICAgICAgICAgICAgICBlbmQ6IHN0cmVhbS5wb3Ms
			CiAgICAgICAgICAgICAgc3RyaW5nOiBzdHJlYW0uY3VycmVudCgpLAogICAgICAgICAgICAgIGNs
			YXNzTmFtZTogc3R5bGUgfHwgbnVsbCwKICAgICAgICAgICAgICBzdGF0ZTogc3RhdGV9OwogICAg
			fSwKICAgIGluZGVudGF0aW9uOiBmdW5jdGlvbih0YWJTaXplKSB7cmV0dXJuIGNvdW50Q29sdW1u
			KHRoaXMudGV4dCwgbnVsbCwgdGFiU2l6ZSk7fSwKICAgIC8vIFByb2R1Y2VzIGFuIEhUTUwgZnJh
			Z21lbnQgZm9yIHRoZSBsaW5lLCB0YWtpbmcgc2VsZWN0aW9uLAogICAgLy8gbWFya2luZywgYW5k
			IGhpZ2hsaWdodGluZyBpbnRvIGFjY291bnQuCiAgICBnZXRIVE1MOiBmdW5jdGlvbihtYWtlVGFi
			LCBlbmRBdCkgewogICAgICB2YXIgaHRtbCA9IFtdLCBmaXJzdCA9IHRydWUsIGNvbCA9IDA7CiAg
			ICAgIGZ1bmN0aW9uIHNwYW4odGV4dCwgc3R5bGUpIHsKICAgICAgICBpZiAoIXRleHQpIHJldHVy
			bjsKICAgICAgICAvLyBXb3JrIGFyb3VuZCBhIGJ1ZyB3aGVyZSwgaW4gc29tZSBjb21wYXQgbW9k
			ZXMsIElFIGlnbm9yZXMgbGVhZGluZyBzcGFjZXMKICAgICAgICBpZiAoZmlyc3QgJiYgaWUgJiYg
			dGV4dC5jaGFyQXQoMCkgPT0gIiAiKSB0ZXh0ID0gIlx1MDBhMCIgKyB0ZXh0LnNsaWNlKDEpOwog
			ICAgICAgIGZpcnN0ID0gZmFsc2U7CiAgICAgICAgaWYgKHRleHQuaW5kZXhPZigiXHQiKSA9PSAt
			MSkgewogICAgICAgICAgY29sICs9IHRleHQubGVuZ3RoOwogICAgICAgICAgdmFyIGVzY2FwZWQg
			PSBodG1sRXNjYXBlKHRleHQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgZXNjYXBl
			ZCA9ICIiOwogICAgICAgICAgZm9yICh2YXIgcG9zID0gMDs7KSB7CiAgICAgICAgICAgIHZhciBp
			ZHggPSB0ZXh0LmluZGV4T2YoIlx0IiwgcG9zKTsKICAgICAgICAgICAgaWYgKGlkeCA9PSAtMSkg
			ewogICAgICAgICAgICAgIGVzY2FwZWQgKz0gaHRtbEVzY2FwZSh0ZXh0LnNsaWNlKHBvcykpOwog
			ICAgICAgICAgICAgIGNvbCArPSB0ZXh0Lmxlbmd0aCAtIHBvczsKICAgICAgICAgICAgICBicmVh
			azsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb2wgKz0gaWR4IC0gcG9zOwog
			ICAgICAgICAgICAgIHZhciB0YWIgPSBtYWtlVGFiKGNvbCk7CiAgICAgICAgICAgICAgZXNjYXBl
			ZCArPSBodG1sRXNjYXBlKHRleHQuc2xpY2UocG9zLCBpZHgpKSArIHRhYi5odG1sOwogICAgICAg
			ICAgICAgIGNvbCArPSB0YWIud2lkdGg7CiAgICAgICAgICAgICAgcG9zID0gaWR4ICsgMTsKICAg
			ICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoc3R5bGUpIGh0bWwu
			cHVzaCgnPHNwYW4gY2xhc3M9IicsIHN0eWxlLCAnIj4nLCBlc2NhcGVkLCAiPC9zcGFuPiIpOwog
			ICAgICAgIGVsc2UgaHRtbC5wdXNoKGVzY2FwZWQpOwogICAgICB9CiAgICAgIHZhciBzdCA9IHRo
			aXMuc3R5bGVzLCBhbGxUZXh0ID0gdGhpcy50ZXh0LCBtYXJrZWQgPSB0aGlzLm1hcmtlZDsKICAg
			ICAgdmFyIGxlbiA9IGFsbFRleHQubGVuZ3RoOwogICAgICBpZiAoZW5kQXQgIT0gbnVsbCkgbGVu
			ID0gTWF0aC5taW4oZW5kQXQsIGxlbik7CiAgICAgIGZ1bmN0aW9uIHN0eWxlVG9DbGFzcyhzdHls
			ZSkgewogICAgICAgIGlmICghc3R5bGUpIHJldHVybiBudWxsOwogICAgICAgIHJldHVybiAiY20t
			IiArIHN0eWxlLnJlcGxhY2UoLyArL2csICIgY20tIik7CiAgICAgIH0KCiAgICAgIGlmICghYWxs
			VGV4dCAmJiBlbmRBdCA9PSBudWxsKQogICAgICAgIHNwYW4oIiAiKTsKICAgICAgZWxzZSBpZiAo
			IW1hcmtlZCB8fCAhbWFya2VkLmxlbmd0aCkKICAgICAgICBmb3IgKHZhciBpID0gMCwgY2ggPSAw
			OyBjaCA8IGxlbjsgaSs9MikgewogICAgICAgICAgdmFyIHN0ciA9IHN0W2ldLCBzdHlsZSA9IHN0
			W2krMV0sIGwgPSBzdHIubGVuZ3RoOwogICAgICAgICAgaWYgKGNoICsgbCA+IGxlbikgc3RyID0g
			c3RyLnNsaWNlKDAsIGxlbiAtIGNoKTsKICAgICAgICAgIGNoICs9IGw7CiAgICAgICAgICBzcGFu
			KHN0ciwgc3R5bGVUb0NsYXNzKHN0eWxlKSk7CiAgICAgICAgfQogICAgICBlbHNlIHsKICAgICAg
			ICB2YXIgcG9zID0gMCwgaSA9IDAsIHRleHQgPSAiIiwgc3R5bGUsIHNnID0gMDsKICAgICAgICB2
			YXIgbmV4dENoYW5nZSA9IG1hcmtlZFswXS5mcm9tIHx8IDAsIG1hcmtzID0gW10sIG1hcmtwb3Mg
			PSAwOwogICAgICAgIGZ1bmN0aW9uIGFkdmFuY2VNYXJrcygpIHsKICAgICAgICAgIHZhciBtOwog
			ICAgICAgICAgd2hpbGUgKG1hcmtwb3MgPCBtYXJrZWQubGVuZ3RoICYmCiAgICAgICAgICAgICAg
			ICAgKChtID0gbWFya2VkW21hcmtwb3NdKS5mcm9tID09IHBvcyB8fCBtLmZyb20gPT0gbnVsbCkp
			IHsKICAgICAgICAgICAgaWYgKG0uc3R5bGUgIT0gbnVsbCkgbWFya3MucHVzaChtKTsKICAgICAg
			ICAgICAgKyttYXJrcG9zOwogICAgICAgICAgfQogICAgICAgICAgbmV4dENoYW5nZSA9IG1hcmtw
			b3MgPCBtYXJrZWQubGVuZ3RoID8gbWFya2VkW21hcmtwb3NdLmZyb20gOiBJbmZpbml0eTsKICAg
			ICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFya3MubGVuZ3RoOyArK2kpIHsKICAgICAgICAg
			ICAgdmFyIHRvID0gbWFya3NbaV0udG8gfHwgSW5maW5pdHk7CiAgICAgICAgICAgIGlmICh0byA9
			PSBwb3MpIG1hcmtzLnNwbGljZShpLS0sIDEpOwogICAgICAgICAgICBlbHNlIG5leHRDaGFuZ2Ug
			PSBNYXRoLm1pbih0bywgbmV4dENoYW5nZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAg
			IHZhciBtID0gMDsKICAgICAgICB3aGlsZSAocG9zIDwgbGVuKSB7CiAgICAgICAgICBpZiAobmV4
			dENoYW5nZSA9PSBwb3MpIGFkdmFuY2VNYXJrcygpOwogICAgICAgICAgdmFyIHVwdG8gPSBNYXRo
			Lm1pbihsZW4sIG5leHRDaGFuZ2UpOwogICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAg
			ICAgaWYgKHRleHQpIHsKICAgICAgICAgICAgICB2YXIgZW5kID0gcG9zICsgdGV4dC5sZW5ndGg7
			CiAgICAgICAgICAgICAgdmFyIGFwcGxpZWRTdHlsZSA9IHN0eWxlOwogICAgICAgICAgICAgIGZv
			ciAodmFyIGogPSAwOyBqIDwgbWFya3MubGVuZ3RoOyArK2opCiAgICAgICAgICAgICAgICBhcHBs
			aWVkU3R5bGUgPSAoYXBwbGllZFN0eWxlID8gYXBwbGllZFN0eWxlICsgIiAiIDogIiIpICsgbWFy
			a3Nbal0uc3R5bGU7CiAgICAgICAgICAgICAgc3BhbihlbmQgPiB1cHRvID8gdGV4dC5zbGljZSgw
			LCB1cHRvIC0gcG9zKSA6IHRleHQsIGFwcGxpZWRTdHlsZSk7CiAgICAgICAgICAgICAgaWYgKGVu
			ZCA+PSB1cHRvKSB7dGV4dCA9IHRleHQuc2xpY2UodXB0byAtIHBvcyk7IHBvcyA9IHVwdG87IGJy
			ZWFrO30KICAgICAgICAgICAgICBwb3MgPSBlbmQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg
			dGV4dCA9IHN0W2krK107IHN0eWxlID0gc3R5bGVUb0NsYXNzKHN0W2krK10pOwogICAgICAgICAg
			fQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gaHRtbC5qb2luKCIiKTsKICAgIH0sCiAg
			ICBjbGVhblVwOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5wYXJlbnQgPSBudWxsOwogICAgICBp
			ZiAodGhpcy5tYXJrZWQpCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGUgPSB0aGlzLm1hcmtlZC5s
			ZW5ndGg7IGkgPCBlOyArK2kpIHRoaXMubWFya2VkW2ldLmRldGFjaCh0aGlzKTsKICAgIH0KICB9
			OwogIC8vIFV0aWxpdHkgdXNlZCBieSByZXBsYWNlIGFuZCBzcGxpdCBhYm92ZQogIGZ1bmN0aW9u
			IGNvcHlTdHlsZXMoZnJvbSwgdG8sIHNvdXJjZSwgZGVzdCkgewogICAgZm9yICh2YXIgaSA9IDAs
			IHBvcyA9IDAsIHN0YXRlID0gMDsgcG9zIDwgdG87IGkrPTIpIHsKICAgICAgdmFyIHBhcnQgPSBz
			b3VyY2VbaV0sIGVuZCA9IHBvcyArIHBhcnQubGVuZ3RoOwogICAgICBpZiAoc3RhdGUgPT0gMCkg
			ewogICAgICAgIGlmIChlbmQgPiBmcm9tKSBkZXN0LnB1c2gocGFydC5zbGljZShmcm9tIC0gcG9z
			LCBNYXRoLm1pbihwYXJ0Lmxlbmd0aCwgdG8gLSBwb3MpKSwgc291cmNlW2krMV0pOwogICAgICAg
			IGlmIChlbmQgPj0gZnJvbSkgc3RhdGUgPSAxOwogICAgICB9CiAgICAgIGVsc2UgaWYgKHN0YXRl
			ID09IDEpIHsKICAgICAgICBpZiAoZW5kID4gdG8pIGRlc3QucHVzaChwYXJ0LnNsaWNlKDAsIHRv
			IC0gcG9zKSwgc291cmNlW2krMV0pOwogICAgICAgIGVsc2UgZGVzdC5wdXNoKHBhcnQsIHNvdXJj
			ZVtpKzFdKTsKICAgICAgfQogICAgICBwb3MgPSBlbmQ7CiAgICB9CiAgfQoKICAvLyBEYXRhIHN0
			cnVjdHVyZSB0aGF0IGhvbGRzIHRoZSBzZXF1ZW5jZSBvZiBsaW5lcy4KICBmdW5jdGlvbiBMZWFm
			Q2h1bmsobGluZXMpIHsKICAgIHRoaXMubGluZXMgPSBsaW5lczsKICAgIHRoaXMucGFyZW50ID0g
			bnVsbDsKICAgIGZvciAodmFyIGkgPSAwLCBlID0gbGluZXMubGVuZ3RoLCBoZWlnaHQgPSAwOyBp
			IDwgZTsgKytpKSB7CiAgICAgIGxpbmVzW2ldLnBhcmVudCA9IHRoaXM7CiAgICAgIGhlaWdodCAr
			PSBsaW5lc1tpXS5oZWlnaHQ7CiAgICB9CiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKICB9CiAg
			TGVhZkNodW5rLnByb3RvdHlwZSA9IHsKICAgIGNodW5rU2l6ZTogZnVuY3Rpb24oKSB7IHJldHVy
			biB0aGlzLmxpbmVzLmxlbmd0aDsgfSwKICAgIHJlbW92ZTogZnVuY3Rpb24oYXQsIG4sIGNhbGxi
			YWNrcykgewogICAgICBmb3IgKHZhciBpID0gYXQsIGUgPSBhdCArIG47IGkgPCBlOyArK2kpIHsK
			ICAgICAgICB2YXIgbGluZSA9IHRoaXMubGluZXNbaV07CiAgICAgICAgdGhpcy5oZWlnaHQgLT0g
			bGluZS5oZWlnaHQ7CiAgICAgICAgbGluZS5jbGVhblVwKCk7CiAgICAgICAgaWYgKGxpbmUuaGFu
			ZGxlcnMpCiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxpbmUuaGFuZGxlcnMubGVuZ3Ro
			OyArK2opIGNhbGxiYWNrcy5wdXNoKGxpbmUuaGFuZGxlcnNbal0pOwogICAgICB9CiAgICAgIHRo
			aXMubGluZXMuc3BsaWNlKGF0LCBuKTsKICAgIH0sCiAgICBjb2xsYXBzZTogZnVuY3Rpb24obGlu
			ZXMpIHsKICAgICAgbGluZXMuc3BsaWNlLmFwcGx5KGxpbmVzLCBbbGluZXMubGVuZ3RoLCAwXS5j
			b25jYXQodGhpcy5saW5lcykpOwogICAgfSwKICAgIGluc2VydEhlaWdodDogZnVuY3Rpb24oYXQs
			IGxpbmVzLCBoZWlnaHQpIHsKICAgICAgdGhpcy5oZWlnaHQgKz0gaGVpZ2h0OwogICAgICB0aGlz
			LmxpbmVzLnNwbGljZS5hcHBseSh0aGlzLmxpbmVzLCBbYXQsIDBdLmNvbmNhdChsaW5lcykpOwog
			ICAgICBmb3IgKHZhciBpID0gMCwgZSA9IGxpbmVzLmxlbmd0aDsgaSA8IGU7ICsraSkgbGluZXNb
			aV0ucGFyZW50ID0gdGhpczsKICAgIH0sCiAgICBpdGVyTjogZnVuY3Rpb24oYXQsIG4sIG9wKSB7
			CiAgICAgIGZvciAodmFyIGUgPSBhdCArIG47IGF0IDwgZTsgKythdCkKICAgICAgICBpZiAob3Ao
			dGhpcy5saW5lc1thdF0pKSByZXR1cm4gdHJ1ZTsKICAgIH0KICB9OwogIGZ1bmN0aW9uIEJyYW5j
			aENodW5rKGNoaWxkcmVuKSB7CiAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47CiAgICB2YXIg
			c2l6ZSA9IDAsIGhlaWdodCA9IDA7CiAgICBmb3IgKHZhciBpID0gMCwgZSA9IGNoaWxkcmVuLmxl
			bmd0aDsgaSA8IGU7ICsraSkgewogICAgICB2YXIgY2ggPSBjaGlsZHJlbltpXTsKICAgICAgc2l6
			ZSArPSBjaC5jaHVua1NpemUoKTsgaGVpZ2h0ICs9IGNoLmhlaWdodDsKICAgICAgY2gucGFyZW50
			ID0gdGhpczsKICAgIH0KICAgIHRoaXMuc2l6ZSA9IHNpemU7CiAgICB0aGlzLmhlaWdodCA9IGhl
			aWdodDsKICAgIHRoaXMucGFyZW50ID0gbnVsbDsKICB9CiAgQnJhbmNoQ2h1bmsucHJvdG90eXBl
			ID0gewogICAgY2h1bmtTaXplOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuc2l6ZTsgfSwKICAg
			IHJlbW92ZTogZnVuY3Rpb24oYXQsIG4sIGNhbGxiYWNrcykgewogICAgICB0aGlzLnNpemUgLT0g
			bjsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7
			CiAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgc3ogPSBjaGlsZC5jaHVua1Np
			emUoKTsKICAgICAgICBpZiAoYXQgPCBzeikgewogICAgICAgICAgdmFyIHJtID0gTWF0aC5taW4o
			biwgc3ogLSBhdCksIG9sZEhlaWdodCA9IGNoaWxkLmhlaWdodDsKICAgICAgICAgIGNoaWxkLnJl
			bW92ZShhdCwgcm0sIGNhbGxiYWNrcyk7CiAgICAgICAgICB0aGlzLmhlaWdodCAtPSBvbGRIZWln
			aHQgLSBjaGlsZC5oZWlnaHQ7CiAgICAgICAgICBpZiAoc3ogPT0gcm0pIHsgdGhpcy5jaGlsZHJl
			bi5zcGxpY2UoaS0tLCAxKTsgY2hpbGQucGFyZW50ID0gbnVsbDsgfQogICAgICAgICAgaWYgKChu
			IC09IHJtKSA9PSAwKSBicmVhazsKICAgICAgICAgIGF0ID0gMDsKICAgICAgICB9IGVsc2UgYXQg
			LT0gc3o7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc2l6ZSAtIG4gPCAyNSkgewogICAgICAgIHZh
			ciBsaW5lcyA9IFtdOwogICAgICAgIHRoaXMuY29sbGFwc2UobGluZXMpOwogICAgICAgIHRoaXMu
			Y2hpbGRyZW4gPSBbbmV3IExlYWZDaHVuayhsaW5lcyldOwogICAgICAgIHRoaXMuY2hpbGRyZW5b
			MF0ucGFyZW50ID0gdGhpczsKICAgICAgfQogICAgfSwKICAgIGNvbGxhcHNlOiBmdW5jdGlvbihs
			aW5lcykgewogICAgICBmb3IgKHZhciBpID0gMCwgZSA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBp
			IDwgZTsgKytpKSB0aGlzLmNoaWxkcmVuW2ldLmNvbGxhcHNlKGxpbmVzKTsKICAgIH0sCiAgICBp
			bnNlcnQ6IGZ1bmN0aW9uKGF0LCBsaW5lcykgewogICAgICB2YXIgaGVpZ2h0ID0gMDsKICAgICAg
			Zm9yICh2YXIgaSA9IDAsIGUgPSBsaW5lcy5sZW5ndGg7IGkgPCBlOyArK2kpIGhlaWdodCArPSBs
			aW5lc1tpXS5oZWlnaHQ7CiAgICAgIHRoaXMuaW5zZXJ0SGVpZ2h0KGF0LCBsaW5lcywgaGVpZ2h0
			KTsKICAgIH0sCiAgICBpbnNlcnRIZWlnaHQ6IGZ1bmN0aW9uKGF0LCBsaW5lcywgaGVpZ2h0KSB7
			CiAgICAgIHRoaXMuc2l6ZSArPSBsaW5lcy5sZW5ndGg7CiAgICAgIHRoaXMuaGVpZ2h0ICs9IGhl
			aWdodDsKICAgICAgZm9yICh2YXIgaSA9IDAsIGUgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8
			IGU7ICsraSkgewogICAgICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV0sIHN6ID0gY2hp
			bGQuY2h1bmtTaXplKCk7CiAgICAgICAgaWYgKGF0IDw9IHN6KSB7CiAgICAgICAgICBjaGlsZC5p
			bnNlcnRIZWlnaHQoYXQsIGxpbmVzLCBoZWlnaHQpOwogICAgICAgICAgaWYgKGNoaWxkLmxpbmVz
			ICYmIGNoaWxkLmxpbmVzLmxlbmd0aCA+IDUwKSB7CiAgICAgICAgICAgIHdoaWxlIChjaGlsZC5s
			aW5lcy5sZW5ndGggPiA1MCkgewogICAgICAgICAgICAgIHZhciBzcGlsbGVkID0gY2hpbGQubGlu
			ZXMuc3BsaWNlKGNoaWxkLmxpbmVzLmxlbmd0aCAtIDI1LCAyNSk7CiAgICAgICAgICAgICAgdmFy
			IG5ld2xlYWYgPSBuZXcgTGVhZkNodW5rKHNwaWxsZWQpOwogICAgICAgICAgICAgIGNoaWxkLmhl
			aWdodCAtPSBuZXdsZWFmLmhlaWdodDsKICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGlj
			ZShpICsgMSwgMCwgbmV3bGVhZik7CiAgICAgICAgICAgICAgbmV3bGVhZi5wYXJlbnQgPSB0aGlz
			OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMubWF5YmVTcGlsbCgpOwogICAgICAgICAg
			fQogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGF0IC09IHN6OwogICAgICB9CiAg
			ICB9LAogICAgbWF5YmVTcGlsbDogZnVuY3Rpb24oKSB7CiAgICAgIGlmICh0aGlzLmNoaWxkcmVu
			Lmxlbmd0aCA8PSAxMCkgcmV0dXJuOwogICAgICB2YXIgbWUgPSB0aGlzOwogICAgICBkbyB7CiAg
			ICAgICAgdmFyIHNwaWxsZWQgPSBtZS5jaGlsZHJlbi5zcGxpY2UobWUuY2hpbGRyZW4ubGVuZ3Ro
			IC0gNSwgNSk7CiAgICAgICAgdmFyIHNpYmxpbmcgPSBuZXcgQnJhbmNoQ2h1bmsoc3BpbGxlZCk7
			CiAgICAgICAgaWYgKCFtZS5wYXJlbnQpIHsgLy8gQmVjb21lIHRoZSBwYXJlbnQgbm9kZQogICAg
			ICAgICAgdmFyIGNvcHkgPSBuZXcgQnJhbmNoQ2h1bmsobWUuY2hpbGRyZW4pOwogICAgICAgICAg
			Y29weS5wYXJlbnQgPSBtZTsKICAgICAgICAgIG1lLmNoaWxkcmVuID0gW2NvcHksIHNpYmxpbmdd
			OwogICAgICAgICAgbWUgPSBjb3B5OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtZS5zaXpl
			IC09IHNpYmxpbmcuc2l6ZTsKICAgICAgICAgIG1lLmhlaWdodCAtPSBzaWJsaW5nLmhlaWdodDsK
			ICAgICAgICAgIHZhciBteUluZGV4ID0gaW5kZXhPZihtZS5wYXJlbnQuY2hpbGRyZW4sIG1lKTsK
			ICAgICAgICAgIG1lLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UobXlJbmRleCArIDEsIDAsIHNpYmxp
			bmcpOwogICAgICAgIH0KICAgICAgICBzaWJsaW5nLnBhcmVudCA9IG1lLnBhcmVudDsKICAgICAg
			fSB3aGlsZSAobWUuY2hpbGRyZW4ubGVuZ3RoID4gMTApOwogICAgICBtZS5wYXJlbnQubWF5YmVT
			cGlsbCgpOwogICAgfSwKICAgIGl0ZXI6IGZ1bmN0aW9uKGZyb20sIHRvLCBvcCkgeyB0aGlzLml0
			ZXJOKGZyb20sIHRvIC0gZnJvbSwgb3ApOyB9LAogICAgaXRlck46IGZ1bmN0aW9uKGF0LCBuLCBv
			cCkgewogICAgICBmb3IgKHZhciBpID0gMCwgZSA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwg
			ZTsgKytpKSB7CiAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgc3ogPSBjaGls
			ZC5jaHVua1NpemUoKTsKICAgICAgICBpZiAoYXQgPCBzeikgewogICAgICAgICAgdmFyIHVzZWQg
			PSBNYXRoLm1pbihuLCBzeiAtIGF0KTsKICAgICAgICAgIGlmIChjaGlsZC5pdGVyTihhdCwgdXNl
			ZCwgb3ApKSByZXR1cm4gdHJ1ZTsKICAgICAgICAgIGlmICgobiAtPSB1c2VkKSA9PSAwKSBicmVh
			azsKICAgICAgICAgIGF0ID0gMDsKICAgICAgICB9IGVsc2UgYXQgLT0gc3o7CiAgICAgIH0KICAg
			IH0KICB9OwoKICBmdW5jdGlvbiBnZXRMaW5lQXQoY2h1bmssIG4pIHsKICAgIHdoaWxlICghY2h1
			bmsubGluZXMpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7OyArK2kpIHsKICAgICAgICB2YXIgY2hp
			bGQgPSBjaHVuay5jaGlsZHJlbltpXSwgc3ogPSBjaGlsZC5jaHVua1NpemUoKTsKICAgICAgICBp
			ZiAobiA8IHN6KSB7IGNodW5rID0gY2hpbGQ7IGJyZWFrOyB9CiAgICAgICAgbiAtPSBzejsKICAg
			ICAgfQogICAgfQogICAgcmV0dXJuIGNodW5rLmxpbmVzW25dOwogIH0KICBmdW5jdGlvbiBsaW5l
			Tm8obGluZSkgewogICAgaWYgKGxpbmUucGFyZW50ID09IG51bGwpIHJldHVybiBudWxsOwogICAg
			dmFyIGN1ciA9IGxpbmUucGFyZW50LCBubyA9IGluZGV4T2YoY3VyLmxpbmVzLCBsaW5lKTsKICAg
			IGZvciAodmFyIGNodW5rID0gY3VyLnBhcmVudDsgY2h1bms7IGN1ciA9IGNodW5rLCBjaHVuayA9
			IGNodW5rLnBhcmVudCkgewogICAgICBmb3IgKHZhciBpID0gMCwgZSA9IGNodW5rLmNoaWxkcmVu
			Lmxlbmd0aDsgOyArK2kpIHsKICAgICAgICBpZiAoY2h1bmsuY2hpbGRyZW5baV0gPT0gY3VyKSBi
			cmVhazsKICAgICAgICBubyArPSBjaHVuay5jaGlsZHJlbltpXS5jaHVua1NpemUoKTsKICAgICAg
			fQogICAgfQogICAgcmV0dXJuIG5vOwogIH0KICBmdW5jdGlvbiBsaW5lQXRIZWlnaHQoY2h1bmss
			IGgpIHsKICAgIHZhciBuID0gMDsKICAgIG91dGVyOiBkbyB7CiAgICAgIGZvciAodmFyIGkgPSAw
			LCBlID0gY2h1bmsuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgZTsgKytpKSB7CiAgICAgICAgdmFyIGNo
			aWxkID0gY2h1bmsuY2hpbGRyZW5baV0sIGNoID0gY2hpbGQuaGVpZ2h0OwogICAgICAgIGlmICho
			IDwgY2gpIHsgY2h1bmsgPSBjaGlsZDsgY29udGludWUgb3V0ZXI7IH0KICAgICAgICBoIC09IGNo
			OwogICAgICAgIG4gKz0gY2hpbGQuY2h1bmtTaXplKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIG47
			CiAgICB9IHdoaWxlICghY2h1bmsubGluZXMpOwogICAgZm9yICh2YXIgaSA9IDAsIGUgPSBjaHVu
			ay5saW5lcy5sZW5ndGg7IGkgPCBlOyArK2kpIHsKICAgICAgdmFyIGxpbmUgPSBjaHVuay5saW5l
			c1tpXSwgbGggPSBsaW5lLmhlaWdodDsKICAgICAgaWYgKGggPCBsaCkgYnJlYWs7CiAgICAgIGgg
			LT0gbGg7CiAgICB9CiAgICByZXR1cm4gbiArIGk7CiAgfQogIGZ1bmN0aW9uIGhlaWdodEF0TGlu
			ZShjaHVuaywgbikgewogICAgdmFyIGggPSAwOwogICAgb3V0ZXI6IGRvIHsKICAgICAgZm9yICh2
			YXIgaSA9IDAsIGUgPSBjaHVuay5jaGlsZHJlbi5sZW5ndGg7IGkgPCBlOyArK2kpIHsKICAgICAg
			ICB2YXIgY2hpbGQgPSBjaHVuay5jaGlsZHJlbltpXSwgc3ogPSBjaGlsZC5jaHVua1NpemUoKTsK
			ICAgICAgICBpZiAobiA8IHN6KSB7IGNodW5rID0gY2hpbGQ7IGNvbnRpbnVlIG91dGVyOyB9CiAg
			ICAgICAgbiAtPSBzejsKICAgICAgICBoICs9IGNoaWxkLmhlaWdodDsKICAgICAgfQogICAgICBy
			ZXR1cm4gaDsKICAgIH0gd2hpbGUgKCFjaHVuay5saW5lcyk7CiAgICBmb3IgKHZhciBpID0gMDsg
			aSA8IG47ICsraSkgaCArPSBjaHVuay5saW5lc1tpXS5oZWlnaHQ7CiAgICByZXR1cm4gaDsKICB9
			CgogIC8vIFRoZSBoaXN0b3J5IG9iamVjdCAnY2h1bmtzJyBjaGFuZ2VzIHRoYXQgYXJlIG1hZGUg
			Y2xvc2UgdG9nZXRoZXIKICAvLyBhbmQgYXQgYWxtb3N0IHRoZSBzYW1lIHRpbWUgaW50byBiaWdn
			ZXIgdW5kb2FibGUgdW5pdHMuCiAgZnVuY3Rpb24gSGlzdG9yeSgpIHsKICAgIHRoaXMudGltZSA9
			IDA7CiAgICB0aGlzLmRvbmUgPSBbXTsgdGhpcy51bmRvbmUgPSBbXTsKICB9CiAgSGlzdG9yeS5w
			cm90b3R5cGUgPSB7CiAgICBhZGRDaGFuZ2U6IGZ1bmN0aW9uKHN0YXJ0LCBhZGRlZCwgb2xkKSB7
			CiAgICAgIHRoaXMudW5kb25lLmxlbmd0aCA9IDA7CiAgICAgIHZhciB0aW1lID0gK25ldyBEYXRl
			LCBjdXIgPSB0aGlzLmRvbmVbdGhpcy5kb25lLmxlbmd0aCAtIDFdLCBsYXN0ID0gY3VyICYmIGN1
			cltjdXIubGVuZ3RoIC0gMV07CiAgICAgIHZhciBkdGltZSA9IHRpbWUgLSB0aGlzLnRpbWU7CiAg
			ICAgIGlmIChkdGltZSA+IDQwMCB8fCAhbGFzdCkgewogICAgICAgIHRoaXMuZG9uZS5wdXNoKFt7
			c3RhcnQ6IHN0YXJ0LCBhZGRlZDogYWRkZWQsIG9sZDogb2xkfV0pOwogICAgICB9IGVsc2UgaWYg
			KGxhc3Quc3RhcnQgPiBzdGFydCArIG9sZC5sZW5ndGggfHwgbGFzdC5zdGFydCArIGxhc3QuYWRk
			ZWQgPCBzdGFydCAtIGxhc3QuYWRkZWQgKyBsYXN0Lm9sZC5sZW5ndGgpIHsKICAgICAgICBjdXIu
			cHVzaCh7c3RhcnQ6IHN0YXJ0LCBhZGRlZDogYWRkZWQsIG9sZDogb2xkfSk7CiAgICAgIH0gZWxz
			ZSB7CiAgICAgICAgdmFyIG9sZG9mZiA9IDA7CiAgICAgICAgaWYgKHN0YXJ0IDwgbGFzdC5zdGFy
			dCkgewogICAgICAgICAgZm9yICh2YXIgaSA9IGxhc3Quc3RhcnQgLSBzdGFydCAtIDE7IGkgPj0g
			MDsgLS1pKQogICAgICAgICAgICBsYXN0Lm9sZC51bnNoaWZ0KG9sZFtpXSk7CiAgICAgICAgICBs
			YXN0LmFkZGVkICs9IGxhc3Quc3RhcnQgLSBzdGFydDsKICAgICAgICAgIGxhc3Quc3RhcnQgPSBz
			dGFydDsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobGFzdC5zdGFydCA8IHN0YXJ0KSB7CiAg
			ICAgICAgICBvbGRvZmYgPSBzdGFydCAtIGxhc3Quc3RhcnQ7CiAgICAgICAgICBhZGRlZCArPSBv
			bGRvZmY7CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGkgPSBsYXN0LmFkZGVkIC0gb2xkb2Zm
			LCBlID0gb2xkLmxlbmd0aDsgaSA8IGU7ICsraSkKICAgICAgICAgIGxhc3Qub2xkLnB1c2gob2xk
			W2ldKTsKICAgICAgICBpZiAobGFzdC5hZGRlZCA8IGFkZGVkKSBsYXN0LmFkZGVkID0gYWRkZWQ7
			CiAgICAgIH0KICAgICAgdGhpcy50aW1lID0gdGltZTsKICAgIH0KICB9OwoKICBmdW5jdGlvbiBz
			dG9wTWV0aG9kKCkge2Vfc3RvcCh0aGlzKTt9CiAgLy8gRW5zdXJlIGFuIGV2ZW50IGhhcyBhIHN0
			b3AgbWV0aG9kLgogIGZ1bmN0aW9uIGFkZFN0b3AoZXZlbnQpIHsKICAgIGlmICghZXZlbnQuc3Rv
			cCkgZXZlbnQuc3RvcCA9IHN0b3BNZXRob2Q7CiAgICByZXR1cm4gZXZlbnQ7CiAgfQoKICBmdW5j
			dGlvbiBlX3ByZXZlbnREZWZhdWx0KGUpIHsKICAgIGlmIChlLnByZXZlbnREZWZhdWx0KSBlLnBy
			ZXZlbnREZWZhdWx0KCk7CiAgICBlbHNlIGUucmV0dXJuVmFsdWUgPSBmYWxzZTsKICB9CiAgZnVu
			Y3Rpb24gZV9zdG9wUHJvcGFnYXRpb24oZSkgewogICAgaWYgKGUuc3RvcFByb3BhZ2F0aW9uKSBl
			LnN0b3BQcm9wYWdhdGlvbigpOwogICAgZWxzZSBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7CiAgfQog
			IGZ1bmN0aW9uIGVfc3RvcChlKSB7ZV9wcmV2ZW50RGVmYXVsdChlKTsgZV9zdG9wUHJvcGFnYXRp
			b24oZSk7fQogIENvZGVNaXJyb3IuZV9zdG9wID0gZV9zdG9wOwogIENvZGVNaXJyb3IuZV9wcmV2
			ZW50RGVmYXVsdCA9IGVfcHJldmVudERlZmF1bHQ7CiAgQ29kZU1pcnJvci5lX3N0b3BQcm9wYWdh
			dGlvbiA9IGVfc3RvcFByb3BhZ2F0aW9uOwoKICBmdW5jdGlvbiBlX3RhcmdldChlKSB7cmV0dXJu
			IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDt9CiAgZnVuY3Rpb24gZV9idXR0b24oZSkgewogICAg
			aWYgKGUud2hpY2gpIHJldHVybiBlLndoaWNoOwogICAgZWxzZSBpZiAoZS5idXR0b24gJiAxKSBy
			ZXR1cm4gMTsKICAgIGVsc2UgaWYgKGUuYnV0dG9uICYgMikgcmV0dXJuIDM7CiAgICBlbHNlIGlm
			IChlLmJ1dHRvbiAmIDQpIHJldHVybiAyOwogIH0KCiAgLy8gQWxsb3cgM3JkLXBhcnR5IGNvZGUg
			dG8gb3ZlcnJpZGUgZXZlbnQgcHJvcGVydGllcyBieSBhZGRpbmcgYW4gb3ZlcnJpZGUKICAvLyBv
			YmplY3QgdG8gYW4gZXZlbnQgb2JqZWN0LgogIGZ1bmN0aW9uIGVfcHJvcChlLCBwcm9wKSB7CiAg
			ICB2YXIgb3ZlcnJpZGRlbiA9IGUub3ZlcnJpZGUgJiYgZS5vdmVycmlkZS5oYXNPd25Qcm9wZXJ0
			eShwcm9wKTsKICAgIHJldHVybiBvdmVycmlkZGVuID8gZS5vdmVycmlkZVtwcm9wXSA6IGVbcHJv
			cF07CiAgfQoKICAvLyBFdmVudCBoYW5kbGVyIHJlZ2lzdHJhdGlvbi4gSWYgZGlzY29ubmVjdCBp
			cyB0cnVlLCBpdCdsbCByZXR1cm4gYQogIC8vIGZ1bmN0aW9uIHRoYXQgdW5yZWdpc3RlcnMgdGhl
			IGhhbmRsZXIuCiAgZnVuY3Rpb24gY29ubmVjdChub2RlLCB0eXBlLCBoYW5kbGVyLCBkaXNjb25u
			ZWN0KSB7CiAgICBpZiAodHlwZW9mIG5vZGUuYWRkRXZlbnRMaXN0ZW5lciA9PSAiZnVuY3Rpb24i
			KSB7CiAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBmYWxzZSk7CiAg
			ICAgIGlmIChkaXNjb25uZWN0KSByZXR1cm4gZnVuY3Rpb24oKSB7bm9kZS5yZW1vdmVFdmVudExp
			c3RlbmVyKHR5cGUsIGhhbmRsZXIsIGZhbHNlKTt9OwogICAgfQogICAgZWxzZSB7CiAgICAgIHZh
			ciB3cmFwSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KSB7aGFuZGxlcihldmVudCB8fCB3aW5kb3cu
			ZXZlbnQpO307CiAgICAgIG5vZGUuYXR0YWNoRXZlbnQoIm9uIiArIHR5cGUsIHdyYXBIYW5kbGVy
			KTsKICAgICAgaWYgKGRpc2Nvbm5lY3QpIHJldHVybiBmdW5jdGlvbigpIHtub2RlLmRldGFjaEV2
			ZW50KCJvbiIgKyB0eXBlLCB3cmFwSGFuZGxlcik7fTsKICAgIH0KICB9CiAgQ29kZU1pcnJvci5j
			b25uZWN0ID0gY29ubmVjdDsKCiAgZnVuY3Rpb24gRGVsYXllZCgpIHt0aGlzLmlkID0gbnVsbDt9
			CiAgRGVsYXllZC5wcm90b3R5cGUgPSB7c2V0OiBmdW5jdGlvbihtcywgZikge2NsZWFyVGltZW91
			dCh0aGlzLmlkKTsgdGhpcy5pZCA9IHNldFRpbWVvdXQoZiwgbXMpO319OwoKICB2YXIgUGFzcyA9
			IENvZGVNaXJyb3IuUGFzcyA9IHt0b1N0cmluZzogZnVuY3Rpb24oKXtyZXR1cm4gIkNvZGVNaXJy
			b3IuUGFzcyI7fX07CgogIC8vIERldGVjdCBkcmFnLWFuZC1kcm9wCiAgdmFyIGRyYWdBbmREcm9w
			ID0gZnVuY3Rpb24oKSB7CiAgICAvLyBJRTggaGFzIG9uZHJhZ3N0YXJ0IGFuZCBvbmRyb3AgcHJv
			cGVydGllcywgYnV0IGRvZXNuJ3Qgc2VlbSB0bwogICAgLy8gYWN0dWFsbHkgc3VwcG9ydCBvbmRy
			YWdzdGFydCB0aGUgd2F5IGl0J3Mgc3VwcG9zZWQgdG8gd29yay4KICAgIGlmICgvTVNJRSBbMS04
			XVxiLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSByZXR1cm4gZmFsc2U7CiAgICB2YXIgZGl2
			ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICByZXR1cm4gImRyYWdnYWJsZSIg
			aW4gZGl2OwogIH0oKTsKCiAgdmFyIGdlY2tvID0gL2dlY2tvXC9cZHs3fS9pLnRlc3QobmF2aWdh
			dG9yLnVzZXJBZ2VudCk7CiAgdmFyIGllID0gL01TSUUgXGQvLnRlc3QobmF2aWdhdG9yLnVzZXJB
			Z2VudCk7CiAgdmFyIGllX2x0OSA9IC9NU0lFIFsxLThdXGIvLnRlc3QobmF2aWdhdG9yLnVzZXJB
			Z2VudCk7CiAgdmFyIHdlYmtpdCA9IC9XZWJLaXRcLy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50
			KTsKCiAgdmFyIGxpbmVTZXAgPSAiXG4iOwogIC8vIEZlYXR1cmUtZGV0ZWN0IHdoZXRoZXIgbmV3
			bGluZXMgaW4gdGV4dGFyZWFzIGFyZSBjb252ZXJ0ZWQgdG8gXHJcbgogIChmdW5jdGlvbiAoKSB7
			CiAgICB2YXIgdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpOwogICAgdGUu
			dmFsdWUgPSAiZm9vXG5iYXIiOwogICAgaWYgKHRlLnZhbHVlLmluZGV4T2YoIlxyIikgPiAtMSkg
			bGluZVNlcCA9ICJcclxuIjsKICB9KCkpOwoKICAvLyBDb3VudHMgdGhlIGNvbHVtbiBvZmZzZXQg
			aW4gYSBzdHJpbmcsIHRha2luZyB0YWJzIGludG8gYWNjb3VudC4KICAvLyBVc2VkIG1vc3RseSB0
			byBmaW5kIGluZGVudGF0aW9uLgogIGZ1bmN0aW9uIGNvdW50Q29sdW1uKHN0cmluZywgZW5kLCB0
			YWJTaXplKSB7CiAgICBpZiAoZW5kID09IG51bGwpIHsKICAgICAgZW5kID0gc3RyaW5nLnNlYXJj
			aCgvW15cc1x1MDBhMF0vKTsKICAgICAgaWYgKGVuZCA9PSAtMSkgZW5kID0gc3RyaW5nLmxlbmd0
			aDsKICAgIH0KICAgIGZvciAodmFyIGkgPSAwLCBuID0gMDsgaSA8IGVuZDsgKytpKSB7CiAgICAg
			IGlmIChzdHJpbmcuY2hhckF0KGkpID09ICJcdCIpIG4gKz0gdGFiU2l6ZSAtIChuICUgdGFiU2l6
			ZSk7CiAgICAgIGVsc2UgKytuOwogICAgfQogICAgcmV0dXJuIG47CiAgfQoKICBmdW5jdGlvbiBj
			b21wdXRlZFN0eWxlKGVsdCkgewogICAgaWYgKGVsdC5jdXJyZW50U3R5bGUpIHJldHVybiBlbHQu
			Y3VycmVudFN0eWxlOwogICAgcmV0dXJuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsdCwgbnVs
			bCk7CiAgfQoKICAvLyBGaW5kIHRoZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IGJ5IGZvbGxvd2lu
			ZyB0aGUgb2Zmc2V0UGFyZW50IGNoYWluLgogIC8vIElmIHNjcmVlbj09dHJ1ZSwgaXQgcmV0dXJu
			cyBzY3JlZW4gKHJhdGhlciB0aGFuIHBhZ2UpIGNvb3JkaW5hdGVzLgogIGZ1bmN0aW9uIGVsdE9m
			ZnNldChub2RlLCBzY3JlZW4pIHsKICAgIHZhciBib2QgPSBub2RlLm93bmVyRG9jdW1lbnQuYm9k
			eTsKICAgIHZhciB4ID0gMCwgeSA9IDAsIHNraXBCb2R5ID0gZmFsc2U7CiAgICBmb3IgKHZhciBu
			ID0gbm9kZTsgbjsgbiA9IG4ub2Zmc2V0UGFyZW50KSB7CiAgICAgIHZhciBvbCA9IG4ub2Zmc2V0
			TGVmdCwgb3QgPSBuLm9mZnNldFRvcDsKICAgICAgLy8gRmlyZWZveCByZXBvcnRzIHdlaXJkIGlu
			dmVydGVkIG9mZnNldHMgd2hlbiB0aGUgYm9keSBoYXMgYSBib3JkZXIuCiAgICAgIGlmIChuID09
			IGJvZCkgeyB4ICs9IE1hdGguYWJzKG9sKTsgeSArPSBNYXRoLmFicyhvdCk7IH0KICAgICAgZWxz
			ZSB7IHggKz0gb2wsIHkgKz0gb3Q7IH0KICAgICAgaWYgKHNjcmVlbiAmJiBjb21wdXRlZFN0eWxl
			KG4pLnBvc2l0aW9uID09ICJmaXhlZCIpCiAgICAgICAgc2tpcEJvZHkgPSB0cnVlOwogICAgfQog
			ICAgdmFyIGUgPSBzY3JlZW4gJiYgIXNraXBCb2R5ID8gbnVsbCA6IGJvZDsKICAgIGZvciAodmFy
			IG4gPSBub2RlLnBhcmVudE5vZGU7IG4gIT0gZTsgbiA9IG4ucGFyZW50Tm9kZSkKICAgICAgaWYg
			KG4uc2Nyb2xsTGVmdCAhPSBudWxsKSB7IHggLT0gbi5zY3JvbGxMZWZ0OyB5IC09IG4uc2Nyb2xs
			VG9wO30KICAgIHJldHVybiB7bGVmdDogeCwgdG9wOiB5fTsKICB9CiAgLy8gVXNlIHRoZSBmYXN0
			ZXIgYW5kIHNhbmVyIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBtZXRob2Qgd2hlbiBwb3NzaWJsZS4K
			ICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPSBu
			dWxsKSBlbHRPZmZzZXQgPSBmdW5jdGlvbihub2RlLCBzY3JlZW4pIHsKICAgIC8vIFRha2UgdGhl
			IHBhcnRzIG9mIGJvdW5kaW5nIGNsaWVudCByZWN0IHRoYXQgd2UgYXJlIGludGVyZXN0ZWQgaW4g
			c28gd2UgYXJlIGFibGUgdG8gZWRpdCBpZiBuZWVkIGJlLAogICAgLy8gc2luY2UgdGhlIHJldHVy
			bmVkIHZhbHVlIGNhbm5vdCBiZSBjaGFuZ2VkIGV4dGVybmFsbHkgKHRoZXkgYXJlIGtlcHQgaW4g
			c3luYyBhcyB0aGUgZWxlbWVudCBtb3ZlcyB3aXRoaW4gdGhlIHBhZ2UpCiAgICB0cnkgeyB2YXIg
			Ym94ID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgYm94ID0geyB0b3A6IGJveC50b3As
			IGxlZnQ6IGJveC5sZWZ0IH07IH0KICAgIGNhdGNoKGUpIHsgYm94ID0ge3RvcDogMCwgbGVmdDog
			MH07IH0KICAgIGlmICghc2NyZWVuKSB7CiAgICAgIC8vIEdldCB0aGUgdG9wbGV2ZWwgc2Nyb2xs
			LCB3b3JraW5nIGFyb3VuZCBicm93c2VyIGRpZmZlcmVuY2VzLgogICAgICBpZiAod2luZG93LnBh
			Z2VZT2Zmc2V0ID09IG51bGwpIHsKICAgICAgICB2YXIgdCA9IGRvY3VtZW50LmRvY3VtZW50RWxl
			bWVudCB8fCBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGU7CiAgICAgICAgaWYgKHQuc2Nyb2xsVG9w
			ID09IG51bGwpIHQgPSBkb2N1bWVudC5ib2R5OwogICAgICAgIGJveC50b3AgKz0gdC5zY3JvbGxU
			b3A7IGJveC5sZWZ0ICs9IHQuc2Nyb2xsTGVmdDsKICAgICAgfSBlbHNlIHsKICAgICAgICBib3gu
			dG9wICs9IHdpbmRvdy5wYWdlWU9mZnNldDsgYm94LmxlZnQgKz0gd2luZG93LnBhZ2VYT2Zmc2V0
			OwogICAgICB9CiAgICB9CiAgICByZXR1cm4gYm94OwogIH07CgogIC8vIEdldCBhIG5vZGUncyB0
			ZXh0IGNvbnRlbnQuCiAgZnVuY3Rpb24gZWx0VGV4dChub2RlKSB7CiAgICByZXR1cm4gbm9kZS50
			ZXh0Q29udGVudCB8fCBub2RlLmlubmVyVGV4dCB8fCBub2RlLm5vZGVWYWx1ZSB8fCAiIjsKICB9
			CiAgZnVuY3Rpb24gc2VsZWN0SW5wdXQobm9kZSkgewogICAgaWYgKGlvcykgeyAvLyBNb2JpbGUg
			U2FmYXJpIGFwcGFyZW50bHkgaGFzIGEgYnVnIHdoZXJlIHNlbGVjdCgpIGlzIGJyb2tlbi4KICAg
			ICAgbm9kZS5zZWxlY3Rpb25TdGFydCA9IDA7CiAgICAgIG5vZGUuc2VsZWN0aW9uRW5kID0gbm9k
			ZS52YWx1ZS5sZW5ndGg7CiAgICB9IGVsc2Ugbm9kZS5zZWxlY3QoKTsKICB9CgogIC8vIE9wZXJh
			dGlvbnMgb24ge2xpbmUsIGNofSBvYmplY3RzLgogIGZ1bmN0aW9uIHBvc0VxKGEsIGIpIHtyZXR1
			cm4gYS5saW5lID09IGIubGluZSAmJiBhLmNoID09IGIuY2g7fQogIGZ1bmN0aW9uIHBvc0xlc3Mo
			YSwgYikge3JldHVybiBhLmxpbmUgPCBiLmxpbmUgfHwgKGEubGluZSA9PSBiLmxpbmUgJiYgYS5j
			aCA8IGIuY2gpO30KICBmdW5jdGlvbiBjb3B5UG9zKHgpIHtyZXR1cm4ge2xpbmU6IHgubGluZSwg
			Y2g6IHguY2h9O30KCiAgdmFyIGVzY2FwZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50
			KCJwcmUiKTsKICBmdW5jdGlvbiBodG1sRXNjYXBlKHN0cikgewogICAgZXNjYXBlRWxlbWVudC50
			ZXh0Q29udGVudCA9IHN0cjsKICAgIHJldHVybiBlc2NhcGVFbGVtZW50LmlubmVySFRNTDsKICB9
			CiAgLy8gUmVjZW50IChsYXRlIDIwMTEpIE9wZXJhIGJldGFzIGluc2VydCBib2d1cyBuZXdsaW5l
			cyBhdCB0aGUgc3RhcnQKICAvLyBvZiB0aGUgdGV4dENvbnRlbnQsIHNvIHdlIHN0cmlwIHRob3Nl
			LgogIGlmIChodG1sRXNjYXBlKCJhIikgPT0gIlxuYSIpCiAgICBodG1sRXNjYXBlID0gZnVuY3Rp
			b24oc3RyKSB7CiAgICAgIGVzY2FwZUVsZW1lbnQudGV4dENvbnRlbnQgPSBzdHI7CiAgICAgIHJl
			dHVybiBlc2NhcGVFbGVtZW50LmlubmVySFRNTC5zbGljZSgxKTsKICAgIH07CiAgLy8gU29tZSBJ
			RXMgZG9uJ3QgcHJlc2VydmUgdGFicyB0aHJvdWdoIGlubmVySFRNTAogIGVsc2UgaWYgKGh0bWxF
			c2NhcGUoIlx0IikgIT0gIlx0IikKICAgIGh0bWxFc2NhcGUgPSBmdW5jdGlvbihzdHIpIHsKICAg
			ICAgZXNjYXBlRWxlbWVudC5pbm5lckhUTUwgPSAiIjsKICAgICAgZXNjYXBlRWxlbWVudC5hcHBl
			bmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzdHIpKTsKICAgICAgcmV0dXJuIGVzY2Fw
			ZUVsZW1lbnQuaW5uZXJIVE1MOwogICAgfTsKICBDb2RlTWlycm9yLmh0bWxFc2NhcGUgPSBodG1s
			RXNjYXBlOwoKICAvLyBVc2VkIHRvIHBvc2l0aW9uIHRoZSBjdXJzb3IgYWZ0ZXIgYW4gdW5kby9y
			ZWRvIGJ5IGZpbmRpbmcgdGhlCiAgLy8gbGFzdCBlZGl0ZWQgY2hhcmFjdGVyLgogIGZ1bmN0aW9u
			IGVkaXRFbmQoZnJvbSwgdG8pIHsKICAgIGlmICghdG8pIHJldHVybiAwOwogICAgaWYgKCFmcm9t
			KSByZXR1cm4gdG8ubGVuZ3RoOwogICAgZm9yICh2YXIgaSA9IGZyb20ubGVuZ3RoLCBqID0gdG8u
			bGVuZ3RoOyBpID49IDAgJiYgaiA+PSAwOyAtLWksIC0taikKICAgICAgaWYgKGZyb20uY2hhckF0
			KGkpICE9IHRvLmNoYXJBdChqKSkgYnJlYWs7CiAgICByZXR1cm4gaiArIDE7CiAgfQoKICBmdW5j
			dGlvbiBpbmRleE9mKGNvbGxlY3Rpb24sIGVsdCkgewogICAgaWYgKGNvbGxlY3Rpb24uaW5kZXhP
			ZikgcmV0dXJuIGNvbGxlY3Rpb24uaW5kZXhPZihlbHQpOwogICAgZm9yICh2YXIgaSA9IDAsIGUg
			PSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGU7ICsraSkKICAgICAgaWYgKGNvbGxlY3Rpb25baV0g
			PT0gZWx0KSByZXR1cm4gaTsKICAgIHJldHVybiAtMTsKICB9CiAgZnVuY3Rpb24gaXNXb3JkQ2hh
			cihjaCkgewogICAgcmV0dXJuIC9cdy8udGVzdChjaCkgfHwgY2gudG9VcHBlckNhc2UoKSAhPSBj
			aC50b0xvd2VyQ2FzZSgpOwogIH0KCiAgLy8gU2VlIGlmICIiLnNwbGl0IGlzIHRoZSBicm9rZW4g
			SUUgdmVyc2lvbiwgaWYgc28sIHByb3ZpZGUgYW4KICAvLyBhbHRlcm5hdGl2ZSB3YXkgdG8gc3Bs
			aXQgbGluZXMuCiAgdmFyIHNwbGl0TGluZXMgPSAiXG5cbmIiLnNwbGl0KC9cbi8pLmxlbmd0aCAh
			PSAzID8gZnVuY3Rpb24oc3RyaW5nKSB7CiAgICB2YXIgcG9zID0gMCwgbmwsIHJlc3VsdCA9IFtd
			OwogICAgd2hpbGUgKChubCA9IHN0cmluZy5pbmRleE9mKCJcbiIsIHBvcykpID4gLTEpIHsKICAg
			ICAgcmVzdWx0LnB1c2goc3RyaW5nLnNsaWNlKHBvcywgc3RyaW5nLmNoYXJBdChubC0xKSA9PSAi
			XHIiID8gbmwgLSAxIDogbmwpKTsKICAgICAgcG9zID0gbmwgKyAxOwogICAgfQogICAgcmVzdWx0
			LnB1c2goc3RyaW5nLnNsaWNlKHBvcykpOwogICAgcmV0dXJuIHJlc3VsdDsKICB9IDogZnVuY3Rp
			b24oc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnNwbGl0KC9ccj9cbi8pO307CiAgQ29kZU1pcnJvci5z
			cGxpdExpbmVzID0gc3BsaXRMaW5lczsKCiAgdmFyIGhhc1NlbGVjdGlvbiA9IHdpbmRvdy5nZXRT
			ZWxlY3Rpb24gPyBmdW5jdGlvbih0ZSkgewogICAgdHJ5IHsgcmV0dXJuIHRlLnNlbGVjdGlvblN0
			YXJ0ICE9IHRlLnNlbGVjdGlvbkVuZDsgfQogICAgY2F0Y2goZSkgeyByZXR1cm4gZmFsc2U7IH0K
			ICB9IDogZnVuY3Rpb24odGUpIHsKICAgIHRyeSB7dmFyIHJhbmdlID0gdGUub3duZXJEb2N1bWVu
			dC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTt9CiAgICBjYXRjaChlKSB7fQogICAgaWYgKCFyYW5n
			ZSB8fCByYW5nZS5wYXJlbnRFbGVtZW50KCkgIT0gdGUpIHJldHVybiBmYWxzZTsKICAgIHJldHVy
			biByYW5nZS5jb21wYXJlRW5kUG9pbnRzKCJTdGFydFRvRW5kIiwgcmFuZ2UpICE9IDA7CiAgfTsK
			CiAgQ29kZU1pcnJvci5kZWZpbmVNb2RlKCJudWxsIiwgZnVuY3Rpb24oKSB7CiAgICByZXR1cm4g
			e3Rva2VuOiBmdW5jdGlvbihzdHJlYW0pIHtzdHJlYW0uc2tpcFRvRW5kKCk7fX07CiAgfSk7CiAg
			Q29kZU1pcnJvci5kZWZpbmVNSU1FKCJ0ZXh0L3BsYWluIiwgIm51bGwiKTsKCiAgdmFyIGtleU5h
			bWVzID0gezM6ICJFbnRlciIsIDg6ICJCYWNrc3BhY2UiLCA5OiAiVGFiIiwgMTM6ICJFbnRlciIs
			IDE2OiAiU2hpZnQiLCAxNzogIkN0cmwiLCAxODogIkFsdCIsCiAgICAgICAgICAgICAgICAgIDE5
			OiAiUGF1c2UiLCAyMDogIkNhcHNMb2NrIiwgMjc6ICJFc2MiLCAzMjogIlNwYWNlIiwgMzM6ICJQ
			YWdlVXAiLCAzNDogIlBhZ2VEb3duIiwgMzU6ICJFbmQiLAogICAgICAgICAgICAgICAgICAzNjog
			IkhvbWUiLCAzNzogIkxlZnQiLCAzODogIlVwIiwgMzk6ICJSaWdodCIsIDQwOiAiRG93biIsIDQ0
			OiAiUHJpbnRTY3JuIiwgNDU6ICJJbnNlcnQiLAogICAgICAgICAgICAgICAgICA0NjogIkRlbGV0
			ZSIsIDU5OiAiOyIsIDkxOiAiTW9kIiwgOTI6ICJNb2QiLCA5MzogIk1vZCIsIDE4NjogIjsiLCAx
			ODc6ICI9IiwgMTg4OiAiLCIsCiAgICAgICAgICAgICAgICAgIDE4OTogIi0iLCAxOTA6ICIuIiwg
			MTkxOiAiLyIsIDE5MjogImAiLCAyMTk6ICJbIiwgMjIwOiAiXFwiLCAyMjE6ICJdIiwgMjIyOiAi
			JyIsIDYzMjc2OiAiUGFnZVVwIiwKICAgICAgICAgICAgICAgICAgNjMyNzc6ICJQYWdlRG93biIs
			IDYzMjc1OiAiRW5kIiwgNjMyNzM6ICJIb21lIiwgNjMyMzQ6ICJMZWZ0IiwgNjMyMzI6ICJVcCIs
			IDYzMjM1OiAiUmlnaHQiLAogICAgICAgICAgICAgICAgICA2MzIzMzogIkRvd24iLCA2MzMwMjog
			Ikluc2VydCIsIDYzMjcyOiAiRGVsZXRlIn07CiAgQ29kZU1pcnJvci5rZXlOYW1lcyA9IGtleU5h
			bWVzOwogIChmdW5jdGlvbigpIHsKICAgIC8vIE51bWJlciBrZXlzCiAgICBmb3IgKHZhciBpID0g
			MDsgaSA8IDEwOyBpKyspIGtleU5hbWVzW2kgKyA0OF0gPSBTdHJpbmcoaSk7CiAgICAvLyBBbHBo
			YWJldGljIGtleXMKICAgIGZvciAodmFyIGkgPSA2NTsgaSA8PSA5MDsgaSsrKSBrZXlOYW1lc1tp
			XSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaSk7CiAgICAvLyBGdW5jdGlvbiBrZXlzCiAgICBmb3Ig
			KHZhciBpID0gMTsgaSA8PSAxMjsgaSsrKSBrZXlOYW1lc1tpICsgMTExXSA9IGtleU5hbWVzW2kg
			KyA2MzIzNV0gPSAiRiIgKyBpOwogIH0pKCk7CgogIHJldHVybiBDb2RlTWlycm9yOwp9KSgpOwo=
		</Resource>
		<Resource ID="4aa2cd26-287d-4f83-b2f8-927b5593693e" Type="js" Name="dialog.js">
			Ly8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhl
			cnMNCi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJy
			b3IubmV0L0xJQ0VOU0UNCg0KLy8gT3BlbiBzaW1wbGUgZGlhbG9ncyBvbiB0b3Agb2YgYW4gZWRp
			dG9yLiBSZWxpZXMgb24gZGlhbG9nLmNzcy4NCg0KKGZ1bmN0aW9uKG1vZCkgew0KICBpZiAodHlw
			ZW9mIGV4cG9ydHMgPT0gIm9iamVjdCIgJiYgdHlwZW9mIG1vZHVsZSA9PSAib2JqZWN0IikgLy8g
			Q29tbW9uSlMNCiAgICBtb2QocmVxdWlyZSgiLi4vLi4vbGliL2NvZGVtaXJyb3IiKSk7DQogIGVs
			c2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kKSAvLyBBTUQN
			CiAgICBkZWZpbmUoWyIuLi8uLi9saWIvY29kZW1pcnJvciJdLCBtb2QpOw0KICBlbHNlIC8vIFBs
			YWluIGJyb3dzZXIgZW52DQogICAgbW9kKENvZGVNaXJyb3IpOw0KfSkoZnVuY3Rpb24oQ29kZU1p
			cnJvcikgew0KICBmdW5jdGlvbiBkaWFsb2dEaXYoY20sIHRlbXBsYXRlLCBib3R0b20pIHsNCiAg
			ICB2YXIgd3JhcCA9IGNtLmdldFdyYXBwZXJFbGVtZW50KCk7DQogICAgdmFyIGRpYWxvZzsNCiAg
			ICBkaWFsb2cgPSB3cmFwLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIp
			KTsNCiAgICBpZiAoYm90dG9tKQ0KICAgICAgZGlhbG9nLmNsYXNzTmFtZSA9ICJDb2RlTWlycm9y
			LWRpYWxvZyBDb2RlTWlycm9yLWRpYWxvZy1ib3R0b20iOw0KICAgIGVsc2UNCiAgICAgIGRpYWxv
			Zy5jbGFzc05hbWUgPSAiQ29kZU1pcnJvci1kaWFsb2cgQ29kZU1pcnJvci1kaWFsb2ctdG9wIjsN
			Cg0KICAgIGlmICh0eXBlb2YgdGVtcGxhdGUgPT0gInN0cmluZyIpIHsNCiAgICAgIGRpYWxvZy5p
			bm5lckhUTUwgPSB0ZW1wbGF0ZTsNCiAgICB9IGVsc2UgeyAvLyBBc3N1bWluZyBpdCdzIGEgZGV0
			YWNoZWQgRE9NIGVsZW1lbnQuDQogICAgICBkaWFsb2cuYXBwZW5kQ2hpbGQodGVtcGxhdGUpOw0K
			ICAgIH0NCiAgICBDb2RlTWlycm9yLmFkZENsYXNzKHdyYXAsICdkaWFsb2ctb3BlbmVkJyk7DQog
			ICAgcmV0dXJuIGRpYWxvZzsNCiAgfQ0KDQogIGZ1bmN0aW9uIGNsb3NlTm90aWZpY2F0aW9uKGNt
			LCBuZXdWYWwpIHsNCiAgICBpZiAoY20uc3RhdGUuY3VycmVudE5vdGlmaWNhdGlvbkNsb3NlKQ0K
			ICAgICAgY20uc3RhdGUuY3VycmVudE5vdGlmaWNhdGlvbkNsb3NlKCk7DQogICAgY20uc3RhdGUu
			Y3VycmVudE5vdGlmaWNhdGlvbkNsb3NlID0gbmV3VmFsOw0KICB9DQoNCiAgQ29kZU1pcnJvci5k
			ZWZpbmVFeHRlbnNpb24oIm9wZW5EaWFsb2ciLCBmdW5jdGlvbih0ZW1wbGF0ZSwgY2FsbGJhY2ss
			IG9wdGlvbnMpIHsNCiAgICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTsNCg0KICAgIGNsb3Nl
			Tm90aWZpY2F0aW9uKHRoaXMsIG51bGwpOw0KDQogICAgdmFyIGRpYWxvZyA9IGRpYWxvZ0Rpdih0
			aGlzLCB0ZW1wbGF0ZSwgb3B0aW9ucy5ib3R0b20pOw0KICAgIHZhciBjbG9zZWQgPSBmYWxzZSwg
			bWUgPSB0aGlzOw0KICAgIGZ1bmN0aW9uIGNsb3NlKG5ld1ZhbCkgew0KICAgICAgaWYgKHR5cGVv
			ZiBuZXdWYWwgPT0gJ3N0cmluZycpIHsNCiAgICAgICAgaW5wLnZhbHVlID0gbmV3VmFsOw0KICAg
			ICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKGNsb3NlZCkgcmV0dXJuOw0KICAgICAgICBjbG9zZWQg
			PSB0cnVlOw0KICAgICAgICBDb2RlTWlycm9yLnJtQ2xhc3MoZGlhbG9nLnBhcmVudE5vZGUsICdk
			aWFsb2ctb3BlbmVkJyk7DQogICAgICAgIGRpYWxvZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRp
			YWxvZyk7DQogICAgICAgIG1lLmZvY3VzKCk7DQoNCiAgICAgICAgaWYgKG9wdGlvbnMub25DbG9z
			ZSkgb3B0aW9ucy5vbkNsb3NlKGRpYWxvZyk7DQogICAgICB9DQogICAgfQ0KDQogICAgdmFyIGlu
			cCA9IGRpYWxvZy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKVswXSwgYnV0dG9uOw0KICAg
			IGlmIChpbnApIHsNCiAgICAgIGlucC5mb2N1cygpOw0KDQogICAgICBpZiAob3B0aW9ucy52YWx1
			ZSkgew0KICAgICAgICBpbnAudmFsdWUgPSBvcHRpb25zLnZhbHVlOw0KICAgICAgICBpZiAob3B0
			aW9ucy5zZWxlY3RWYWx1ZU9uT3BlbiAhPT0gZmFsc2UpIHsNCiAgICAgICAgICBpbnAuc2VsZWN0
			KCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgaWYgKG9wdGlvbnMub25JbnB1dCkNCiAg
			ICAgICAgQ29kZU1pcnJvci5vbihpbnAsICJpbnB1dCIsIGZ1bmN0aW9uKGUpIHsgb3B0aW9ucy5v
			bklucHV0KGUsIGlucC52YWx1ZSwgY2xvc2UpO30pOw0KICAgICAgaWYgKG9wdGlvbnMub25LZXlV
			cCkNCiAgICAgICAgQ29kZU1pcnJvci5vbihpbnAsICJrZXl1cCIsIGZ1bmN0aW9uKGUpIHtvcHRp
			b25zLm9uS2V5VXAoZSwgaW5wLnZhbHVlLCBjbG9zZSk7fSk7DQoNCiAgICAgIENvZGVNaXJyb3Iu
			b24oaW5wLCAia2V5ZG93biIsIGZ1bmN0aW9uKGUpIHsNCiAgICAgICAgaWYgKG9wdGlvbnMgJiYg
			b3B0aW9ucy5vbktleURvd24gJiYgb3B0aW9ucy5vbktleURvd24oZSwgaW5wLnZhbHVlLCBjbG9z
			ZSkpIHsgcmV0dXJuOyB9DQogICAgICAgIGlmIChlLmtleUNvZGUgPT0gMjcgfHwgKG9wdGlvbnMu
			Y2xvc2VPbkVudGVyICE9PSBmYWxzZSAmJiBlLmtleUNvZGUgPT0gMTMpKSB7DQogICAgICAgICAg
			aW5wLmJsdXIoKTsNCiAgICAgICAgICBDb2RlTWlycm9yLmVfc3RvcChlKTsNCiAgICAgICAgICBj
			bG9zZSgpOw0KICAgICAgICB9DQogICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIGNhbGxiYWNr
			KGlucC52YWx1ZSwgZSk7DQogICAgICB9KTsNCg0KICAgICAgaWYgKG9wdGlvbnMuY2xvc2VPbkJs
			dXIgIT09IGZhbHNlKSBDb2RlTWlycm9yLm9uKGRpYWxvZywgImZvY3Vzb3V0IiwgZnVuY3Rpb24g
			KGV2dCkgew0KICAgICAgICBpZiAoZXZ0LnJlbGF0ZWRUYXJnZXQgIT09IG51bGwpIGNsb3NlKCk7
			DQogICAgICB9KTsNCiAgICB9IGVsc2UgaWYgKGJ1dHRvbiA9IGRpYWxvZy5nZXRFbGVtZW50c0J5
			VGFnTmFtZSgiYnV0dG9uIilbMF0pIHsNCiAgICAgIENvZGVNaXJyb3Iub24oYnV0dG9uLCAiY2xp
			Y2siLCBmdW5jdGlvbigpIHsNCiAgICAgICAgY2xvc2UoKTsNCiAgICAgICAgbWUuZm9jdXMoKTsN
			CiAgICAgIH0pOw0KDQogICAgICBpZiAob3B0aW9ucy5jbG9zZU9uQmx1ciAhPT0gZmFsc2UpIENv
			ZGVNaXJyb3Iub24oYnV0dG9uLCAiYmx1ciIsIGNsb3NlKTsNCg0KICAgICAgYnV0dG9uLmZvY3Vz
			KCk7DQogICAgfQ0KICAgIHJldHVybiBjbG9zZTsNCiAgfSk7DQoNCiAgQ29kZU1pcnJvci5kZWZp
			bmVFeHRlbnNpb24oIm9wZW5Db25maXJtIiwgZnVuY3Rpb24odGVtcGxhdGUsIGNhbGxiYWNrcywg
			b3B0aW9ucykgew0KICAgIGNsb3NlTm90aWZpY2F0aW9uKHRoaXMsIG51bGwpOw0KICAgIHZhciBk
			aWFsb2cgPSBkaWFsb2dEaXYodGhpcywgdGVtcGxhdGUsIG9wdGlvbnMgJiYgb3B0aW9ucy5ib3R0
			b20pOw0KICAgIHZhciBidXR0b25zID0gZGlhbG9nLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJidXR0
			b24iKTsNCiAgICB2YXIgY2xvc2VkID0gZmFsc2UsIG1lID0gdGhpcywgYmx1cnJpbmcgPSAxOw0K
			ICAgIGZ1bmN0aW9uIGNsb3NlKCkgew0KICAgICAgaWYgKGNsb3NlZCkgcmV0dXJuOw0KICAgICAg
			Y2xvc2VkID0gdHJ1ZTsNCiAgICAgIENvZGVNaXJyb3Iucm1DbGFzcyhkaWFsb2cucGFyZW50Tm9k
			ZSwgJ2RpYWxvZy1vcGVuZWQnKTsNCiAgICAgIGRpYWxvZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxk
			KGRpYWxvZyk7DQogICAgICBtZS5mb2N1cygpOw0KICAgIH0NCiAgICBidXR0b25zWzBdLmZvY3Vz
			KCk7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidXR0b25zLmxlbmd0aDsgKytpKSB7DQogICAg
			ICB2YXIgYiA9IGJ1dHRvbnNbaV07DQogICAgICAoZnVuY3Rpb24oY2FsbGJhY2spIHsNCiAgICAg
			ICAgQ29kZU1pcnJvci5vbihiLCAiY2xpY2siLCBmdW5jdGlvbihlKSB7DQogICAgICAgICAgQ29k
			ZU1pcnJvci5lX3ByZXZlbnREZWZhdWx0KGUpOw0KICAgICAgICAgIGNsb3NlKCk7DQogICAgICAg
			ICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhtZSk7DQogICAgICAgIH0pOw0KICAgICAgfSkoY2Fs
			bGJhY2tzW2ldKTsNCiAgICAgIENvZGVNaXJyb3Iub24oYiwgImJsdXIiLCBmdW5jdGlvbigpIHsN
			CiAgICAgICAgLS1ibHVycmluZzsNCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgaWYg
			KGJsdXJyaW5nIDw9IDApIGNsb3NlKCk7IH0sIDIwMCk7DQogICAgICB9KTsNCiAgICAgIENvZGVN
			aXJyb3Iub24oYiwgImZvY3VzIiwgZnVuY3Rpb24oKSB7ICsrYmx1cnJpbmc7IH0pOw0KICAgIH0N
			CiAgfSk7DQoNCiAgLyoNCiAgICogb3Blbk5vdGlmaWNhdGlvbg0KICAgKiBPcGVucyBhIG5vdGlm
			aWNhdGlvbiwgdGhhdCBjYW4gYmUgY2xvc2VkIHdpdGggYW4gb3B0aW9uYWwgdGltZXINCiAgICog
			KGRlZmF1bHQgNTAwMG1zIHRpbWVyKSBhbmQgYWx3YXlzIGNsb3NlcyBvbiBjbGljay4NCiAgICoN
			CiAgICogSWYgYSBub3RpZmljYXRpb24gaXMgb3BlbmVkIHdoaWxlIGFub3RoZXIgaXMgb3BlbmVk
			LCBpdCB3aWxsIGNsb3NlIHRoZQ0KICAgKiBjdXJyZW50bHkgb3BlbmVkIG9uZSBhbmQgb3BlbiB0
			aGUgbmV3IG9uZSBpbW1lZGlhdGVseS4NCiAgICovDQogIENvZGVNaXJyb3IuZGVmaW5lRXh0ZW5z
			aW9uKCJvcGVuTm90aWZpY2F0aW9uIiwgZnVuY3Rpb24odGVtcGxhdGUsIG9wdGlvbnMpIHsNCiAg
			ICBjbG9zZU5vdGlmaWNhdGlvbih0aGlzLCBjbG9zZSk7DQogICAgdmFyIGRpYWxvZyA9IGRpYWxv
			Z0Rpdih0aGlzLCB0ZW1wbGF0ZSwgb3B0aW9ucyAmJiBvcHRpb25zLmJvdHRvbSk7DQogICAgdmFy
			IGNsb3NlZCA9IGZhbHNlLCBkb25lVGltZXI7DQogICAgdmFyIGR1cmF0aW9uID0gb3B0aW9ucyAm
			JiB0eXBlb2Ygb3B0aW9ucy5kdXJhdGlvbiAhPT0gInVuZGVmaW5lZCIgPyBvcHRpb25zLmR1cmF0
			aW9uIDogNTAwMDsNCg0KICAgIGZ1bmN0aW9uIGNsb3NlKCkgew0KICAgICAgaWYgKGNsb3NlZCkg
			cmV0dXJuOw0KICAgICAgY2xvc2VkID0gdHJ1ZTsNCiAgICAgIGNsZWFyVGltZW91dChkb25lVGlt
			ZXIpOw0KICAgICAgQ29kZU1pcnJvci5ybUNsYXNzKGRpYWxvZy5wYXJlbnROb2RlLCAnZGlhbG9n
			LW9wZW5lZCcpOw0KICAgICAgZGlhbG9nLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGlhbG9nKTsN
			CiAgICB9DQoNCiAgICBDb2RlTWlycm9yLm9uKGRpYWxvZywgJ2NsaWNrJywgZnVuY3Rpb24oZSkg
			ew0KICAgICAgQ29kZU1pcnJvci5lX3ByZXZlbnREZWZhdWx0KGUpOw0KICAgICAgY2xvc2UoKTsN
			CiAgICB9KTsNCg0KICAgIGlmIChkdXJhdGlvbikNCiAgICAgIGRvbmVUaW1lciA9IHNldFRpbWVv
			dXQoY2xvc2UsIGR1cmF0aW9uKTsNCg0KICAgIHJldHVybiBjbG9zZTsNCiAgfSk7DQp9KTs=
		</Resource>
		<Resource ID="5cd10fee-6e10-5253-24ea-3edb0a87f9ec" Type="js" Name="utils.js">
			Lyogc2VhcmNoY3Vyc29yICovCihmdW5jdGlvbigpe2Z1bmN0aW9uIFNlYXJjaEN1cnNvcihjbSxx
			dWVyeSxwb3MsY2FzZUZvbGQpe3RoaXMuYXRPY2N1cnJlbmNlPWZhbHNlO3RoaXMuY209Y207aWYo
			Y2FzZUZvbGQ9PW51bGwpY2FzZUZvbGQ9dHlwZW9mIHF1ZXJ5PT0ic3RyaW5nIiYmcXVlcnk9PXF1
			ZXJ5LnRvTG93ZXJDYXNlKCk7cG9zPXBvcz9jbS5jbGlwUG9zKHBvcyk6e2xpbmU6MCxjaDowfTt0
			aGlzLnBvcz17ZnJvbTpwb3MsdG86cG9zfTtpZih0eXBlb2YgcXVlcnkhPSJzdHJpbmciKXRoaXMu
			bWF0Y2hlcz1mdW5jdGlvbihyZXZlcnNlLHBvcyl7aWYocmV2ZXJzZSl7dmFyIGxpbmU9Y20uZ2V0
			TGluZShwb3MubGluZSkuc2xpY2UoMCxwb3MuY2gpLG1hdGNoPWxpbmUubWF0Y2gocXVlcnkpLHN0
			YXJ0PTA7d2hpbGUobWF0Y2gpe3ZhciBpbmQ9bGluZS5pbmRleE9mKG1hdGNoWzBdKTtzdGFydCs9
			aW5kO2xpbmU9bGluZS5zbGljZShpbmQrMSk7dmFyIG5ld21hdGNoPWxpbmUubWF0Y2gocXVlcnkp
			O2lmKG5ld21hdGNoKW1hdGNoPSBuZXdtYXRjaDtlbHNlIGJyZWFrO3N0YXJ0Kyt9fWVsc2UgdmFy
			IGxpbmU9Y20uZ2V0TGluZShwb3MubGluZSkuc2xpY2UocG9zLmNoKSxtYXRjaD1saW5lLm1hdGNo
			KHF1ZXJ5KSxzdGFydD1tYXRjaCYmcG9zLmNoK2xpbmUuaW5kZXhPZihtYXRjaFswXSk7aWYobWF0
			Y2gpcmV0dXJue2Zyb206e2xpbmU6cG9zLmxpbmUsY2g6c3RhcnR9LHRvOntsaW5lOnBvcy5saW5l
			LGNoOnN0YXJ0K21hdGNoWzBdLmxlbmd0aH0sbWF0Y2g6bWF0Y2h9fTtlbHNle2lmKGNhc2VGb2xk
			KXF1ZXJ5PXF1ZXJ5LnRvTG93ZXJDYXNlKCk7dmFyIGZvbGQ9Y2FzZUZvbGQ/ZnVuY3Rpb24oc3Ry
			KXtyZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCl9OmZ1bmN0aW9uKHN0cil7cmV0dXJuIHN0cn07dmFy
			IHRhcmdldD1xdWVyeS5zcGxpdCgiXG4iKTtpZih0YXJnZXQubGVuZ3RoPT0xKXRoaXMubWF0Y2hl
			cz1mdW5jdGlvbihyZXZlcnNlLHBvcyl7dmFyIGxpbmU9Zm9sZChjbS5nZXRMaW5lKHBvcy5saW5l
			KSksbGVuPXF1ZXJ5Lmxlbmd0aCwgbWF0Y2g7aWYocmV2ZXJzZT9wb3MuY2g+PWxlbiYmKG1hdGNo
			PWxpbmUubGFzdEluZGV4T2YocXVlcnkscG9zLmNoLWxlbikpIT0tMToobWF0Y2g9bGluZS5pbmRl
			eE9mKHF1ZXJ5LHBvcy5jaCkpIT0tMSlyZXR1cm57ZnJvbTp7bGluZTpwb3MubGluZSxjaDptYXRj
			aH0sdG86e2xpbmU6cG9zLmxpbmUsY2g6bWF0Y2grbGVufX19O2Vsc2UgdGhpcy5tYXRjaGVzPWZ1
			bmN0aW9uKHJldmVyc2UscG9zKXt2YXIgbG49cG9zLmxpbmUsaWR4PXJldmVyc2U/dGFyZ2V0Lmxl
			bmd0aC0xOjAsbWF0Y2g9dGFyZ2V0W2lkeF0sbGluZT1mb2xkKGNtLmdldExpbmUobG4pKTt2YXIg
			b2Zmc2V0QT1yZXZlcnNlP2xpbmUuaW5kZXhPZihtYXRjaCkrbWF0Y2gubGVuZ3RoOmxpbmUubGFz
			dEluZGV4T2YobWF0Y2gpO2lmKHJldmVyc2U/b2Zmc2V0QT49cG9zLmNofHxvZmZzZXRBIT1tYXRj
			aC5sZW5ndGg6b2Zmc2V0QTw9cG9zLmNofHxvZmZzZXRBIT1saW5lLmxlbmd0aC1tYXRjaC5sZW5n
			dGgpcmV0dXJuOyBmb3IoOzspe2lmKHJldmVyc2U/IWxuOmxuPT1jbS5saW5lQ291bnQoKS0xKXJl
			dHVybjtsaW5lPWZvbGQoY20uZ2V0TGluZShsbis9cmV2ZXJzZT8tMToxKSk7bWF0Y2g9dGFyZ2V0
			W3JldmVyc2U/LS1pZHg6KytpZHhdO2lmKGlkeD4wJiZpZHg8dGFyZ2V0Lmxlbmd0aC0xKWlmKGxp
			bmUhPW1hdGNoKXJldHVybjtlbHNlIGNvbnRpbnVlO3ZhciBvZmZzZXRCPXJldmVyc2U/bGluZS5s
			YXN0SW5kZXhPZihtYXRjaCk6bGluZS5pbmRleE9mKG1hdGNoKSttYXRjaC5sZW5ndGg7aWYocmV2
			ZXJzZT9vZmZzZXRCIT1saW5lLmxlbmd0aC1tYXRjaC5sZW5ndGg6b2Zmc2V0QiE9bWF0Y2gubGVu
			Z3RoKXJldHVybjt2YXIgc3RhcnQ9e2xpbmU6cG9zLmxpbmUsY2g6b2Zmc2V0QX0sZW5kPXtsaW5l
			OmxuLGNoOm9mZnNldEJ9O3JldHVybntmcm9tOnJldmVyc2U/ZW5kOnN0YXJ0LHRvOnJldmVyc2U/
			c3RhcnQ6ZW5kfX19fX1TZWFyY2hDdXJzb3IucHJvdG90eXBlPXtmaW5kTmV4dDpmdW5jdGlvbigp
			e3JldHVybiB0aGlzLmZpbmQoZmFsc2UpfSwgZmluZFByZXZpb3VzOmZ1bmN0aW9uKCl7cmV0dXJu
			IHRoaXMuZmluZCh0cnVlKX0sZmluZDpmdW5jdGlvbihyZXZlcnNlKXt2YXIgc2VsZj10aGlzLHBv
			cz10aGlzLmNtLmNsaXBQb3MocmV2ZXJzZT90aGlzLnBvcy5mcm9tOnRoaXMucG9zLnRvKTtmdW5j
			dGlvbiBzYXZlUG9zQW5kRmFpbChsaW5lKXt2YXIgcG9zPXtsaW5lOmxpbmUsY2g6MH07c2VsZi5w
			b3M9e2Zyb206cG9zLHRvOnBvc307c2VsZi5hdE9jY3VycmVuY2U9ZmFsc2U7cmV0dXJuIGZhbHNl
			fWZvcig7Oyl7aWYodGhpcy5wb3M9dGhpcy5tYXRjaGVzKHJldmVyc2UscG9zKSl7dGhpcy5hdE9j
			Y3VycmVuY2U9dHJ1ZTtyZXR1cm4gdGhpcy5wb3MubWF0Y2h8fHRydWV9aWYocmV2ZXJzZSl7aWYo
			IXBvcy5saW5lKXJldHVybiBzYXZlUG9zQW5kRmFpbCgwKTtwb3M9e2xpbmU6cG9zLmxpbmUtMSxj
			aDp0aGlzLmNtLmdldExpbmUocG9zLmxpbmUtMSkubGVuZ3RofX1lbHNle3ZhciBtYXhMaW5lPXRo
			aXMuY20ubGluZUNvdW50KCk7IGlmKHBvcy5saW5lPT1tYXhMaW5lLTEpcmV0dXJuIHNhdmVQb3NB
			bmRGYWlsKG1heExpbmUpO3Bvcz17bGluZTpwb3MubGluZSsxLGNoOjB9fX19LGZyb206ZnVuY3Rp
			b24oKXtpZih0aGlzLmF0T2NjdXJyZW5jZSlyZXR1cm4gdGhpcy5wb3MuZnJvbX0sdG86ZnVuY3Rp
			b24oKXtpZih0aGlzLmF0T2NjdXJyZW5jZSlyZXR1cm4gdGhpcy5wb3MudG99LHJlcGxhY2U6ZnVu
			Y3Rpb24obmV3VGV4dCl7dmFyIHNlbGY9dGhpcztpZih0aGlzLmF0T2NjdXJyZW5jZSlzZWxmLnBv
			cy50bz10aGlzLmNtLnJlcGxhY2VSYW5nZShuZXdUZXh0LHNlbGYucG9zLmZyb20sc2VsZi5wb3Mu
			dG8pfX07Q29kZU1pcnJvci5kZWZpbmVFeHRlbnNpb24oImdldFNlYXJjaEN1cnNvciIsZnVuY3Rp
			b24ocXVlcnkscG9zLGNhc2VGb2xkKXtyZXR1cm4gbmV3IFNlYXJjaEN1cnNvcih0aGlzLHF1ZXJ5
			LHBvcyxjYXNlRm9sZCl9KX0pKCk7Ci8qIG1hdGNoLWhpZ2hsaWdodGVyICovCihmdW5jdGlvbigp
			e3ZhciBERUZBVUxUX01JTl9DSEFSUz0yO2Z1bmN0aW9uIE1hdGNoSGlnaGxpZ2h0U3RhdGUoKXt0
			aGlzLm1hcmtlZD1bXX1mdW5jdGlvbiBnZXRNYXRjaEhpZ2hsaWdodFN0YXRlKGNtKXtyZXR1cm4g
			Y20uX21hdGNoSGlnaGxpZ2h0U3RhdGV8fChjbS5fbWF0Y2hIaWdobGlnaHRTdGF0ZT1uZXcgTWF0
			Y2hIaWdobGlnaHRTdGF0ZSl9ZnVuY3Rpb24gY2xlYXJNYXJrcyhjbSl7dmFyIHN0YXRlPWdldE1h
			dGNoSGlnaGxpZ2h0U3RhdGUoY20pO2Zvcih2YXIgaT0wO2k8c3RhdGUubWFya2VkLmxlbmd0aDsr
			K2kpc3RhdGUubWFya2VkW2ldLmNsZWFyKCk7c3RhdGUubWFya2VkPVtdfWZ1bmN0aW9uIG1hcmtE
			b2N1bWVudChjbSxjbGFzc05hbWUsbWluQ2hhcnMpe2NsZWFyTWFya3MoY20pO21pbkNoYXJzPXR5
			cGVvZiBtaW5DaGFycyE9PSJ1bmRlZmluZWQiP21pbkNoYXJzOkRFRkFVTFRfTUlOX0NIQVJTO2lm
			KGNtLnNvbWV0aGluZ1NlbGVjdGVkKCkmJmNtLmdldFNlbGVjdGlvbigpLmxlbmd0aD49IG1pbkNo
			YXJzKXt2YXIgc3RhdGU9Z2V0TWF0Y2hIaWdobGlnaHRTdGF0ZShjbSk7dmFyIHF1ZXJ5PWNtLmdl
			dFNlbGVjdGlvbigpO2NtLm9wZXJhdGlvbihmdW5jdGlvbigpe2lmKGNtLmxpbmVDb3VudCgpPDJF
			Mylmb3IodmFyIGN1cnNvcj1jbS5nZXRTZWFyY2hDdXJzb3IocXVlcnkpO2N1cnNvci5maW5kTmV4
			dCgpOylpZighKGN1cnNvci5mcm9tKCkubGluZT09PWNtLmdldEN1cnNvcih0cnVlKS5saW5lJiZj
			dXJzb3IuZnJvbSgpLmNoPT09Y20uZ2V0Q3Vyc29yKHRydWUpLmNoKSlzdGF0ZS5tYXJrZWQucHVz
			aChjbS5tYXJrVGV4dChjdXJzb3IuZnJvbSgpLGN1cnNvci50bygpLGNsYXNzTmFtZSkpfSl9fUNv
			ZGVNaXJyb3IuZGVmaW5lRXh0ZW5zaW9uKCJtYXRjaEhpZ2hsaWdodCIsZnVuY3Rpb24oY2xhc3NO
			YW1lLG1pbkNoYXJzKXttYXJrRG9jdW1lbnQodGhpcyxjbGFzc05hbWUsbWluQ2hhcnMpfSl9KSgp
			Owo=
		</Resource>
		<Resource ID="618a76f6-eb25-4afe-bde0-f1b991b914e4" Type="js" Name="activeline.js">
			Ly8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhl
			cnMNCi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJy
			b3IubmV0L0xJQ0VOU0UNCg0KKGZ1bmN0aW9uKG1vZCkgew0KICBpZiAodHlwZW9mIGV4cG9ydHMg
			PT0gIm9iamVjdCIgJiYgdHlwZW9mIG1vZHVsZSA9PSAib2JqZWN0IikgLy8gQ29tbW9uSlMNCiAg
			ICBtb2QocmVxdWlyZSgiLi4vLi4vbGliL2NvZGVtaXJyb3IiKSk7DQogIGVsc2UgaWYgKHR5cGVv
			ZiBkZWZpbmUgPT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kKSAvLyBBTUQNCiAgICBkZWZpbmUo
			WyIuLi8uLi9saWIvY29kZW1pcnJvciJdLCBtb2QpOw0KICBlbHNlIC8vIFBsYWluIGJyb3dzZXIg
			ZW52DQogICAgbW9kKENvZGVNaXJyb3IpOw0KfSkoZnVuY3Rpb24oQ29kZU1pcnJvcikgew0KICAi
			dXNlIHN0cmljdCI7DQogIHZhciBXUkFQX0NMQVNTID0gIkNvZGVNaXJyb3ItYWN0aXZlbGluZSI7
			DQogIHZhciBCQUNLX0NMQVNTID0gIkNvZGVNaXJyb3ItYWN0aXZlbGluZS1iYWNrZ3JvdW5kIjsN
			CiAgdmFyIEdVVFRfQ0xBU1MgPSAiQ29kZU1pcnJvci1hY3RpdmVsaW5lLWd1dHRlciI7DQoNCiAg
			Q29kZU1pcnJvci5kZWZpbmVPcHRpb24oInN0eWxlQWN0aXZlTGluZSIsIGZhbHNlLCBmdW5jdGlv
			bihjbSwgdmFsLCBvbGQpIHsNCiAgICB2YXIgcHJldiA9IG9sZCA9PSBDb2RlTWlycm9yLkluaXQg
			PyBmYWxzZSA6IG9sZDsNCiAgICBpZiAodmFsID09IHByZXYpIHJldHVybg0KICAgIGlmIChwcmV2
			KSB7DQogICAgICBjbS5vZmYoImJlZm9yZVNlbGVjdGlvbkNoYW5nZSIsIHNlbGVjdGlvbkNoYW5n
			ZSk7DQogICAgICBjbGVhckFjdGl2ZUxpbmVzKGNtKTsNCiAgICAgIGRlbGV0ZSBjbS5zdGF0ZS5h
			Y3RpdmVMaW5lczsNCiAgICB9DQogICAgaWYgKHZhbCkgew0KICAgICAgY20uc3RhdGUuYWN0aXZl
			TGluZXMgPSBbXTsNCiAgICAgIHVwZGF0ZUFjdGl2ZUxpbmVzKGNtLCBjbS5saXN0U2VsZWN0aW9u
			cygpKTsNCiAgICAgIGNtLm9uKCJiZWZvcmVTZWxlY3Rpb25DaGFuZ2UiLCBzZWxlY3Rpb25DaGFu
			Z2UpOw0KICAgIH0NCiAgfSk7DQoNCiAgZnVuY3Rpb24gY2xlYXJBY3RpdmVMaW5lcyhjbSkgew0K
			ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY20uc3RhdGUuYWN0aXZlTGluZXMubGVuZ3RoOyBpKysp
			IHsNCiAgICAgIGNtLnJlbW92ZUxpbmVDbGFzcyhjbS5zdGF0ZS5hY3RpdmVMaW5lc1tpXSwgIndy
			YXAiLCBXUkFQX0NMQVNTKTsNCiAgICAgIGNtLnJlbW92ZUxpbmVDbGFzcyhjbS5zdGF0ZS5hY3Rp
			dmVMaW5lc1tpXSwgImJhY2tncm91bmQiLCBCQUNLX0NMQVNTKTsNCiAgICAgIGNtLnJlbW92ZUxp
			bmVDbGFzcyhjbS5zdGF0ZS5hY3RpdmVMaW5lc1tpXSwgImd1dHRlciIsIEdVVFRfQ0xBU1MpOw0K
			ICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHNhbWVBcnJheShhLCBiKSB7DQogICAgaWYgKGEubGVu
			Z3RoICE9IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBh
			Lmxlbmd0aDsgaSsrKQ0KICAgICAgaWYgKGFbaV0gIT0gYltpXSkgcmV0dXJuIGZhbHNlOw0KICAg
			IHJldHVybiB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gdXBkYXRlQWN0aXZlTGluZXMoY20sIHJh
			bmdlcykgew0KICAgIHZhciBhY3RpdmUgPSBbXTsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJh
			bmdlcy5sZW5ndGg7IGkrKykgew0KICAgICAgdmFyIHJhbmdlID0gcmFuZ2VzW2ldOw0KICAgICAg
			dmFyIG9wdGlvbiA9IGNtLmdldE9wdGlvbigic3R5bGVBY3RpdmVMaW5lIik7DQogICAgICBpZiAo
			dHlwZW9mIG9wdGlvbiA9PSAib2JqZWN0IiAmJiBvcHRpb24ubm9uRW1wdHkgPyByYW5nZS5hbmNo
			b3IubGluZSAhPSByYW5nZS5oZWFkLmxpbmUgOiAhcmFuZ2UuZW1wdHkoKSkNCiAgICAgICAgY29u
			dGludWUNCiAgICAgIHZhciBsaW5lID0gY20uZ2V0TGluZUhhbmRsZVZpc3VhbFN0YXJ0KHJhbmdl
			LmhlYWQubGluZSk7DQogICAgICBpZiAoYWN0aXZlW2FjdGl2ZS5sZW5ndGggLSAxXSAhPSBsaW5l
			KSBhY3RpdmUucHVzaChsaW5lKTsNCiAgICB9DQogICAgaWYgKHNhbWVBcnJheShjbS5zdGF0ZS5h
			Y3RpdmVMaW5lcywgYWN0aXZlKSkgcmV0dXJuOw0KICAgIGNtLm9wZXJhdGlvbihmdW5jdGlvbigp
			IHsNCiAgICAgIGNsZWFyQWN0aXZlTGluZXMoY20pOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkg
			PCBhY3RpdmUubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgY20uYWRkTGluZUNsYXNzKGFjdGl2ZVtp
			XSwgIndyYXAiLCBXUkFQX0NMQVNTKTsNCiAgICAgICAgY20uYWRkTGluZUNsYXNzKGFjdGl2ZVtp
			XSwgImJhY2tncm91bmQiLCBCQUNLX0NMQVNTKTsNCiAgICAgICAgY20uYWRkTGluZUNsYXNzKGFj
			dGl2ZVtpXSwgImd1dHRlciIsIEdVVFRfQ0xBU1MpOw0KICAgICAgfQ0KICAgICAgY20uc3RhdGUu
			YWN0aXZlTGluZXMgPSBhY3RpdmU7DQogICAgfSk7DQogIH0NCg0KICBmdW5jdGlvbiBzZWxlY3Rp
			b25DaGFuZ2UoY20sIHNlbCkgew0KICAgIHVwZGF0ZUFjdGl2ZUxpbmVzKGNtLCBzZWwucmFuZ2Vz
			KTsNCiAgfQ0KfSk7
		</Resource>
		<Resource ID="69646baf-4138-4033-8aec-8bf48e467c62" Type="js" Name="jump_to_line.js">
			Ly8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhl
			cnMNCi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJy
			b3IubmV0L0xJQ0VOU0UNCg0KLy8gRGVmaW5lcyBqdW1wVG9MaW5lIGNvbW1hbmQuIFVzZXMgZGlh
			bG9nLmpzIGlmIHByZXNlbnQuDQoNCihmdW5jdGlvbihtb2QpIHsNCiAgaWYgKHR5cGVvZiBleHBv
			cnRzID09ICJvYmplY3QiICYmIHR5cGVvZiBtb2R1bGUgPT0gIm9iamVjdCIpIC8vIENvbW1vbkpT
			DQogICAgbW9kKHJlcXVpcmUoIi4uLy4uL2xpYi9jb2RlbWlycm9yIiksIHJlcXVpcmUoIi4uL2Rp
			YWxvZy9kaWFsb2ciKSk7DQogIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gImZ1bmN0aW9uIiAm
			JiBkZWZpbmUuYW1kKSAvLyBBTUQNCiAgICBkZWZpbmUoWyIuLi8uLi9saWIvY29kZW1pcnJvciIs
			ICIuLi9kaWFsb2cvZGlhbG9nIl0sIG1vZCk7DQogIGVsc2UgLy8gUGxhaW4gYnJvd3NlciBlbnYN
			CiAgICBtb2QoQ29kZU1pcnJvcik7DQp9KShmdW5jdGlvbihDb2RlTWlycm9yKSB7DQogICJ1c2Ug
			c3RyaWN0IjsNCg0KICAvLyBkZWZhdWx0IHNlYXJjaCBwYW5lbCBsb2NhdGlvbg0KICBDb2RlTWly
			cm9yLmRlZmluZU9wdGlvbigic2VhcmNoIiwge2JvdHRvbTogZmFsc2V9KTsNCg0KICBmdW5jdGlv
			biBkaWFsb2coY20sIHRleHQsIHNob3J0VGV4dCwgZGVmbHQsIGYpIHsNCiAgICBpZiAoY20ub3Bl
			bkRpYWxvZykgY20ub3BlbkRpYWxvZyh0ZXh0LCBmLCB7dmFsdWU6IGRlZmx0LCBzZWxlY3RWYWx1
			ZU9uT3BlbjogdHJ1ZSwgYm90dG9tOiBjbS5vcHRpb25zLnNlYXJjaC5ib3R0b219KTsNCiAgICBl
			bHNlIGYocHJvbXB0KHNob3J0VGV4dCwgZGVmbHQpKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGdldEp1
			bXBEaWFsb2coY20pIHsNCiAgICByZXR1cm4gY20ucGhyYXNlKCJKdW1wIHRvIGxpbmU6IikgKyAn
			IDxpbnB1dCB0eXBlPSJ0ZXh0IiBzdHlsZT0id2lkdGg6IDEwZW0iIGNsYXNzPSJDb2RlTWlycm9y
			LXNlYXJjaC1maWVsZCIvPiA8c3BhbiBzdHlsZT0iY29sb3I6ICM4ODgiIGNsYXNzPSJDb2RlTWly
			cm9yLXNlYXJjaC1oaW50Ij4nICsgY20ucGhyYXNlKCIoVXNlIGxpbmU6Y29sdW1uIG9yIHNjcm9s
			bCUgc3ludGF4KSIpICsgJzwvc3Bhbj4nOw0KICB9DQoNCiAgZnVuY3Rpb24gaW50ZXJwcmV0TGlu
			ZShjbSwgc3RyaW5nKSB7DQogICAgdmFyIG51bSA9IE51bWJlcihzdHJpbmcpDQogICAgaWYgKC9e
			Wy0rXS8udGVzdChzdHJpbmcpKSByZXR1cm4gY20uZ2V0Q3Vyc29yKCkubGluZSArIG51bQ0KICAg
			IGVsc2UgcmV0dXJuIG51bSAtIDENCiAgfQ0KDQogIENvZGVNaXJyb3IuY29tbWFuZHMuanVtcFRv
			TGluZSA9IGZ1bmN0aW9uKGNtKSB7DQogICAgdmFyIGN1ciA9IGNtLmdldEN1cnNvcigpOw0KICAg
			IGRpYWxvZyhjbSwgZ2V0SnVtcERpYWxvZyhjbSksIGNtLnBocmFzZSgiSnVtcCB0byBsaW5lOiIp
			LCAoY3VyLmxpbmUgKyAxKSArICI6IiArIGN1ci5jaCwgZnVuY3Rpb24ocG9zU3RyKSB7DQogICAg
			ICBpZiAoIXBvc1N0cikgcmV0dXJuOw0KDQogICAgICB2YXIgbWF0Y2g7DQogICAgICBpZiAobWF0
			Y2ggPSAvXlxzKihbXCtcLV0/XGQrKVxzKlw6XHMqKFxkKylccyokLy5leGVjKHBvc1N0cikpIHsN
			CiAgICAgICAgY20uc2V0Q3Vyc29yKGludGVycHJldExpbmUoY20sIG1hdGNoWzFdKSwgTnVtYmVy
			KG1hdGNoWzJdKSkNCiAgICAgIH0gZWxzZSBpZiAobWF0Y2ggPSAvXlxzKihbXCtcLV0/XGQrKFwu
			XGQrKT8pXCVccyovLmV4ZWMocG9zU3RyKSkgew0KICAgICAgICB2YXIgbGluZSA9IE1hdGgucm91
			bmQoY20ubGluZUNvdW50KCkgKiBOdW1iZXIobWF0Y2hbMV0pIC8gMTAwKTsNCiAgICAgICAgaWYg
			KC9eWy0rXS8udGVzdChtYXRjaFsxXSkpIGxpbmUgPSBjdXIubGluZSArIGxpbmUgKyAxOw0KICAg
			ICAgICBjbS5zZXRDdXJzb3IobGluZSAtIDEsIGN1ci5jaCk7DQogICAgICB9IGVsc2UgaWYgKG1h
			dGNoID0gL15ccypcOj9ccyooW1wrXC1dP1xkKylccyovLmV4ZWMocG9zU3RyKSkgew0KICAgICAg
			ICBjbS5zZXRDdXJzb3IoaW50ZXJwcmV0TGluZShjbSwgbWF0Y2hbMV0pLCBjdXIuY2gpOw0KICAg
			ICAgfQ0KICAgIH0pOw0KICB9Ow0KDQogIENvZGVNaXJyb3Iua2V5TWFwWyJkZWZhdWx0Il1bIkFs
			dC1HIl0gPSAianVtcFRvTGluZSI7DQp9KTs=
		</Resource>
		<Resource ID="95be4415-7ccb-b87b-f50f-77c8485f6bd9" Type="js" Name="_for_vdom.js">
			Q29kZU1pcnJvci5kZWZpbmVNb2RlKCJ2c2NyaXB0IiwgZnVuY3Rpb24oKSB7DQogIHZhciByZWdl
			eFZCU2NyaXB0S2V5d29yZCA9IC9eKD86Q2FsbHxDYXNlfENEYXRlfENsZWFyfENJbnR8Q0xuZ3xD
			b25zdHxDU3RyfERlc2NyaXB0aW9ufERpbXxEb3xFYWNofEVsc2V8RWxzZUlmfEVuZHxFcnJ8RXJy
			b3J8RXhpdHxGYWxzZXxGb3J8RnVuY3Rpb258SWZ8TENhc2V8TG9vcHxMVHJpbXxOZXh0fE5vdGhp
			bmd8Tm93fE51bWJlcnxPbnxQcmVzZXJ2ZXxRdWl0fFJlRGltfFJlc3VtZXxSVHJpbXxTZWxlY3R8
			U2V0fFN1YnxUaGVufFRvfFRyaW18VHJ1ZXxVQm91bmR8VUNhc2V8VW50aWx8VmJDcnxWYkNyTGZ8
			VmJMZnxWYlRhYikkL2ltOw0KDQogIHJldHVybiB7DQogICAgdG9rZW46IGZ1bmN0aW9uKHN0cmVh
			bSkgew0KICAgICAgaWYgKHN0cmVhbS5lYXRTcGFjZSgpKSByZXR1cm4gbnVsbDsNCiAgICAgIHZh
			ciBjaCA9IHN0cmVhbS5uZXh0KCk7DQogICAgICBpZiAoY2ggPT0gIiciKSB7DQogICAgICAJc3Ry
			ZWFtLnNraXBUb0VuZCgpOw0KICAgICAgCXJldHVybiAiY29tbWVudCI7DQogICAgICB9DQogICAg
			ICBpZiAoY2ggPT0gJyInKSB7DQogICAgICAgIHZhciBzdGFydFBvc2l0aW9uID0gc3RyZWFtLnBv
			czsgICAgICAgIA0KICAgICAgICBzdHJlYW0uc2tpcFRvKCciJyk7ICAgICAgICANCiAgICAgIAlp
			ZiAoc3RyZWFtLnBvcyA+IHN0YXJ0UG9zaXRpb24pIHsgICAgICAgICAgDQogICAgICAgICAgc3Ry
			ZWFtLm5leHQoKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gInN0cmluZyI7DQogICAgICB9
			DQoNCiAgICAgIGlmICgvXHcvLnRlc3QoY2gpKSB7DQogICAgICAgIHN0cmVhbS5lYXRXaGlsZSgv
			XHcvKTsNCiAgICAgICAgaWYgKHJlZ2V4VkJTY3JpcHRLZXl3b3JkLnRlc3Qoc3RyZWFtLmN1cnJl
			bnQoKSkpIHJldHVybiAia2V5d29yZCI7DQogICAgICB9DQogICAgICByZXR1cm4gbnVsbDsNCiAg
			ICB9DQogIH07DQp9KTsNCg0KQ29kZU1pcnJvci5kZWZpbmVNSU1FKCJ0ZXh0L3ZzY3JpcHQiLCAi
			dnNjcmlwdCIpOw0KDQpDb2RlTWlycm9yLmRlZmluZU1vZGUoInhtbCIsIGZ1bmN0aW9uKGNvbmZp
			ZywgcGFyc2VyQ29uZmlnKSB7DQogIHZhciBpbmRlbnRVbml0ID0gY29uZmlnLmluZGVudFVuaXQ7
			DQogIHZhciBLbHVkZ2VzID0gcGFyc2VyQ29uZmlnLmh0bWxNb2RlID8gew0KICAgIGF1dG9TZWxm
			Q2xvc2VyczogeyJiciI6IHRydWUsICJpbWciOiB0cnVlLCAiaHIiOiB0cnVlLCAibGluayI6IHRy
			dWUsICJpbnB1dCI6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgIm1ldGEiOiB0cnVlLCAi
			Y29sIjogdHJ1ZSwgImZyYW1lIjogdHJ1ZSwgImJhc2UiOiB0cnVlLCAiYXJlYSI6IHRydWV9LA0K
			ICAgIGRvTm90SW5kZW50OiB7InByZSI6IHRydWV9LA0KICAgIGFsbG93VW5xdW90ZWQ6IHRydWUs
			DQogICAgYWxsb3dNaXNzaW5nOiBmYWxzZQ0KICB9IDoge2F1dG9TZWxmQ2xvc2Vyczoge30sIGRv
			Tm90SW5kZW50OiB7fSwgYWxsb3dVbnF1b3RlZDogZmFsc2UsIGFsbG93TWlzc2luZzogZmFsc2V9
			Ow0KICB2YXIgYWxpZ25DREFUQSA9IHBhcnNlckNvbmZpZy5hbGlnbkNEQVRBOw0KDQogIC8vIFJl
			dHVybiB2YXJpYWJsZXMgZm9yIHRva2VuaXplcnMNCiAgdmFyIHRhZ05hbWUsIHR5cGU7DQoNCiAg
			ZnVuY3Rpb24gaW5UZXh0KHN0cmVhbSwgc3RhdGUpIHsNCiAgICBmdW5jdGlvbiBjaGFpbihwYXJz
			ZXIpIHsNCiAgICAgIHN0YXRlLnRva2VuaXplID0gcGFyc2VyOw0KICAgICAgcmV0dXJuIHBhcnNl
			cihzdHJlYW0sIHN0YXRlKTsNCiAgICB9DQoNCiAgICB2YXIgY2ggPSBzdHJlYW0ubmV4dCgpOw0K
			ICAgIGlmIChjaCA9PSAiPCIpIHsNCiAgICAgIGlmIChzdHJlYW0uZWF0KCIhIikpIHsNCiAgICAg
			ICAgaWYgKHN0cmVhbS5lYXQoIlsiKSkgew0KICAgICAgICAgIGlmIChzdHJlYW0ubWF0Y2goIkNE
			QVRBWyIpKSByZXR1cm4gY2hhaW4oaW5CbG9jaygiYXRvbSIsICJdXT4iKSk7DQogICAgICAgICAg
			ZWxzZSByZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChzdHJlYW0ubWF0
			Y2goIi0tIikpIHJldHVybiBjaGFpbihpbkJsb2NrKCJjb21tZW50IiwgIi0tPiIpKTsNCiAgICAg
			ICAgZWxzZSBpZiAoc3RyZWFtLm1hdGNoKCJET0NUWVBFIiwgdHJ1ZSwgdHJ1ZSkpIHsNCiAgICAg
			ICAgICBzdHJlYW0uZWF0V2hpbGUoL1tcd1wuX1wtXS8pOw0KICAgICAgICAgIHJldHVybiBjaGFp
			bihkb2N0eXBlKDEpKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHJldHVybiBudWxsOw0KICAg
			ICAgfQ0KICAgICAgZWxzZSBpZiAoc3RyZWFtLmVhdCgiPyIpKSB7DQogICAgICAgIHN0cmVhbS5l
			YXRXaGlsZSgvW1x3XC5fXC1dLyk7DQogICAgICAgIHN0YXRlLnRva2VuaXplID0gaW5CbG9jaygi
			bWV0YSIsICI/PiIpOw0KICAgICAgICByZXR1cm4gIm1ldGEiOw0KICAgICAgfQ0KICAgICAgZWxz
			ZSB7DQogICAgICAgIHR5cGUgPSBzdHJlYW0uZWF0KCIvIikgPyAiY2xvc2VUYWciIDogIm9wZW5U
			YWciOw0KICAgICAgICBzdHJlYW0uZWF0U3BhY2UoKTsNCiAgICAgICAgdGFnTmFtZSA9ICIiOw0K
			ICAgICAgICB2YXIgYzsNCiAgICAgICAgd2hpbGUgKChjID0gc3RyZWFtLmVhdCgvW15cc1x1MDBh
			MD08PlwiXCdcLz9dLykpKSB0YWdOYW1lICs9IGM7DQogICAgICAgIHN0YXRlLnRva2VuaXplID0g
			aW5UYWc7DQogICAgICAgIHJldHVybiAidGFnIjsNCiAgICAgIH0NCiAgICB9DQogICAgZWxzZSBp
			ZiAoY2ggPT0gIiYiKSB7DQogICAgICB2YXIgb2s7DQogICAgICBpZiAoc3RyZWFtLmVhdCgiIyIp
			KSB7DQogICAgICAgIGlmIChzdHJlYW0uZWF0KCJ4IikpIHsNCiAgICAgICAgICBvayA9IHN0cmVh
			bS5lYXRXaGlsZSgvW2EtZkEtRlxkXS8pICYmIHN0cmVhbS5lYXQoIjsiKTsgICAgICAgICAgDQog
			ICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgb2sgPSBzdHJlYW0uZWF0V2hpbGUoL1tcZF0vKSAm
			JiBzdHJlYW0uZWF0KCI7Iik7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG9r
			ID0gc3RyZWFtLmVhdFdoaWxlKC9bXHdcLlwtOl0vKSAmJiBzdHJlYW0uZWF0KCI7Iik7DQogICAg
			ICB9DQogICAgICByZXR1cm4gb2sgPyAiYXRvbSIgOiAiZXJyb3IiOw0KICAgIH0NCiAgICBlbHNl
			IHsNCiAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW14mPF0vKTsNCiAgICAgIHJldHVybiBudWxsOw0K
			ICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIGluVGFnKHN0cmVhbSwgc3RhdGUpIHsNCiAgICB2YXIg
			Y2ggPSBzdHJlYW0ubmV4dCgpOw0KICAgIGlmIChjaCA9PSAiPiIgfHwgKGNoID09ICIvIiAmJiBz
			dHJlYW0uZWF0KCI+IikpKSB7DQogICAgICBzdGF0ZS50b2tlbml6ZSA9IGluVGV4dDsNCiAgICAg
			IHR5cGUgPSBjaCA9PSAiPiIgPyAiZW5kVGFnIiA6ICJzZWxmY2xvc2VUYWciOw0KICAgICAgcmV0
			dXJuICJ0YWciOw0KICAgIH0NCiAgICBlbHNlIGlmIChjaCA9PSAiPSIpIHsNCiAgICAgIHR5cGUg
			PSAiZXF1YWxzIjsNCiAgICAgIHJldHVybiBudWxsOw0KICAgIH0NCiAgICBlbHNlIGlmICgvW1wn
			XCJdLy50ZXN0KGNoKSkgew0KICAgICAgc3RhdGUudG9rZW5pemUgPSBpbkF0dHJpYnV0ZShjaCk7
			DQogICAgICByZXR1cm4gc3RhdGUudG9rZW5pemUoc3RyZWFtLCBzdGF0ZSk7DQogICAgfQ0KICAg
			IGVsc2Ugew0KICAgICAgc3RyZWFtLmVhdFdoaWxlKC9bXlxzXHUwMGEwPTw+XCJcJ1wvP10vKTsN
			CiAgICAgIHJldHVybiAid29yZCI7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gaW5BdHRyaWJ1
			dGUocXVvdGUpIHsNCiAgICByZXR1cm4gZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkgew0KICAgICAg
			d2hpbGUgKCFzdHJlYW0uZW9sKCkpIHsNCiAgICAgICAgaWYgKHN0cmVhbS5uZXh0KCkgPT0gcXVv
			dGUpIHsNCiAgICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IGluVGFnOw0KICAgICAgICAgIGJyZWFr
			Ow0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gInN0cmluZyI7DQogICAgfTsNCiAg
			fQ0KDQogIGZ1bmN0aW9uIGluQmxvY2soc3R5bGUsIHRlcm1pbmF0b3IpIHsNCiAgICByZXR1cm4g
			ZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkgew0KICAgICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHsN
			CiAgICAgICAgaWYgKHN0cmVhbS5tYXRjaCh0ZXJtaW5hdG9yKSkgew0KICAgICAgICAgIHN0YXRl
			LnRva2VuaXplID0gaW5UZXh0Ow0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICAg
			IHN0cmVhbS5uZXh0KCk7DQogICAgICB9DQogICAgICByZXR1cm4gc3R5bGU7DQogICAgfTsNCiAg
			fQ0KICBmdW5jdGlvbiBkb2N0eXBlKGRlcHRoKSB7DQogICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmVh
			bSwgc3RhdGUpIHsNCiAgICAgIHZhciBjaDsNCiAgICAgIHdoaWxlICgoY2ggPSBzdHJlYW0ubmV4
			dCgpKSAhPSBudWxsKSB7DQogICAgICAgIGlmIChjaCA9PSAiPCIpIHsNCiAgICAgICAgICBzdGF0
			ZS50b2tlbml6ZSA9IGRvY3R5cGUoZGVwdGggKyAxKTsNCiAgICAgICAgICByZXR1cm4gc3RhdGUu
			dG9rZW5pemUoc3RyZWFtLCBzdGF0ZSk7DQogICAgICAgIH0gZWxzZSBpZiAoY2ggPT0gIj4iKSB7
			DQogICAgICAgICAgaWYgKGRlcHRoID09IDEpIHsNCiAgICAgICAgICAgIHN0YXRlLnRva2VuaXpl
			ID0gaW5UZXh0Ow0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAg
			ICAgICAgIHN0YXRlLnRva2VuaXplID0gZG9jdHlwZShkZXB0aCAtIDEpOw0KICAgICAgICAgICAg
			cmV0dXJuIHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpOw0KICAgICAgICAgIH0NCiAgICAg
			ICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuICJtZXRhIjsNCiAgICB9Ow0KICB9DQoNCiAgdmFy
			IGN1clN0YXRlLCBzZXRTdHlsZTsNCiAgZnVuY3Rpb24gcGFzcygpIHsNCiAgICBmb3IgKHZhciBp
			ID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBjdXJTdGF0ZS5jYy5wdXNoKGFy
			Z3VtZW50c1tpXSk7DQogIH0NCiAgZnVuY3Rpb24gY29udCgpIHsNCiAgICBwYXNzLmFwcGx5KG51
			bGwsIGFyZ3VtZW50cyk7DQogICAgcmV0dXJuIHRydWU7DQogIH0NCg0KICBmdW5jdGlvbiBwdXNo
			Q29udGV4dCh0YWdOYW1lLCBzdGFydE9mTGluZSkgew0KICAgIHZhciBub0luZGVudCA9IEtsdWRn
			ZXMuZG9Ob3RJbmRlbnQuaGFzT3duUHJvcGVydHkodGFnTmFtZSkgfHwgKGN1clN0YXRlLmNvbnRl
			eHQgJiYgY3VyU3RhdGUuY29udGV4dC5ub0luZGVudCk7DQogICAgY3VyU3RhdGUuY29udGV4dCA9
			IHsNCiAgICAgIHByZXY6IGN1clN0YXRlLmNvbnRleHQsDQogICAgICB0YWdOYW1lOiB0YWdOYW1l
			LA0KICAgICAgaW5kZW50OiBjdXJTdGF0ZS5pbmRlbnRlZCwNCiAgICAgIHN0YXJ0T2ZMaW5lOiBz
			dGFydE9mTGluZSwNCiAgICAgIG5vSW5kZW50OiBub0luZGVudA0KICAgIH07DQogIH0NCiAgZnVu
			Y3Rpb24gcG9wQ29udGV4dCgpIHsNCiAgICBpZiAoY3VyU3RhdGUuY29udGV4dCkgY3VyU3RhdGUu
			Y29udGV4dCA9IGN1clN0YXRlLmNvbnRleHQucHJldjsNCiAgfQ0KDQogIGZ1bmN0aW9uIGVsZW1l
			bnQodHlwZSkgew0KICAgIGlmICh0eXBlID09ICJvcGVuVGFnIikgew0KICAgICAgY3VyU3RhdGUu
			dGFnTmFtZSA9IHRhZ05hbWU7DQogICAgICByZXR1cm4gY29udChhdHRyaWJ1dGVzLCBlbmR0YWco
			Y3VyU3RhdGUuc3RhcnRPZkxpbmUpKTsNCiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gImNsb3NlVGFn
			Iikgew0KICAgICAgdmFyIGVyciA9IGZhbHNlOw0KICAgICAgaWYgKGN1clN0YXRlLmNvbnRleHQp
			IHsNCiAgICAgICAgZXJyID0gY3VyU3RhdGUuY29udGV4dC50YWdOYW1lICE9IHRhZ05hbWU7DQog
			ICAgICB9IGVsc2Ugew0KICAgICAgICBlcnIgPSB0cnVlOw0KICAgICAgfQ0KICAgICAgaWYgKGVy
			cikgc2V0U3R5bGUgPSAiZXJyb3IiOw0KICAgICAgcmV0dXJuIGNvbnQoZW5kY2xvc2V0YWcoZXJy
			KSk7DQogICAgfQ0KICAgIHJldHVybiBjb250KCk7DQogIH0NCiAgZnVuY3Rpb24gZW5kdGFnKHN0
			YXJ0T2ZMaW5lKSB7DQogICAgcmV0dXJuIGZ1bmN0aW9uKHR5cGUpIHsNCiAgICAgIGlmICh0eXBl
			ID09ICJzZWxmY2xvc2VUYWciIHx8DQogICAgICAgICAgKHR5cGUgPT0gImVuZFRhZyIgJiYgS2x1
			ZGdlcy5hdXRvU2VsZkNsb3NlcnMuaGFzT3duUHJvcGVydHkoY3VyU3RhdGUudGFnTmFtZS50b0xv
			d2VyQ2FzZSgpKSkpDQogICAgICAgIHJldHVybiBjb250KCk7DQogICAgICBpZiAodHlwZSA9PSAi
			ZW5kVGFnIikge3B1c2hDb250ZXh0KGN1clN0YXRlLnRhZ05hbWUsIHN0YXJ0T2ZMaW5lKTsgcmV0
			dXJuIGNvbnQoKTt9DQogICAgICByZXR1cm4gY29udCgpOw0KICAgIH07DQogIH0NCiAgZnVuY3Rp
			b24gZW5kY2xvc2V0YWcoZXJyKSB7DQogICAgcmV0dXJuIGZ1bmN0aW9uKHR5cGUpIHsNCiAgICAg
			IGlmIChlcnIpIHNldFN0eWxlID0gImVycm9yIjsNCiAgICAgIGlmICh0eXBlID09ICJlbmRUYWci
			KSB7IHBvcENvbnRleHQoKTsgcmV0dXJuIGNvbnQoKTsgfQ0KICAgICAgc2V0U3R5bGUgPSAiZXJy
			b3IiOw0KICAgICAgcmV0dXJuIGNvbnQoYXJndW1lbnRzLmNhbGxlZSk7DQogICAgfQ0KICB9DQoN
			CiAgZnVuY3Rpb24gYXR0cmlidXRlcyh0eXBlKSB7DQogICAgaWYgKHR5cGUgPT0gIndvcmQiKSB7
			c2V0U3R5bGUgPSAiYXR0cmlidXRlIjsgcmV0dXJuIGNvbnQoYXR0cmlidXRlLCBhdHRyaWJ1dGVz
			KTt9DQogICAgaWYgKHR5cGUgPT0gImVuZFRhZyIgfHwgdHlwZSA9PSAic2VsZmNsb3NlVGFnIikg
			cmV0dXJuIHBhc3MoKTsNCiAgICBzZXRTdHlsZSA9ICJlcnJvciI7DQogICAgcmV0dXJuIGNvbnQo
			YXR0cmlidXRlcyk7DQogIH0NCiAgZnVuY3Rpb24gYXR0cmlidXRlKHR5cGUpIHsNCiAgICBpZiAo
			dHlwZSA9PSAiZXF1YWxzIikgcmV0dXJuIGNvbnQoYXR0dmFsdWUsIGF0dHJpYnV0ZXMpOw0KICAg
			IGlmICghS2x1ZGdlcy5hbGxvd01pc3NpbmcpIHNldFN0eWxlID0gImVycm9yIjsNCiAgICByZXR1
			cm4gKHR5cGUgPT0gImVuZFRhZyIgfHwgdHlwZSA9PSAic2VsZmNsb3NlVGFnIikgPyBwYXNzKCkg
			OiBjb250KCk7DQogIH0NCiAgZnVuY3Rpb24gYXR0dmFsdWUodHlwZSkgew0KICAgIGlmICh0eXBl
			ID09ICJzdHJpbmciKSByZXR1cm4gY29udChhdHR2YWx1ZW1heWJlKTsNCiAgICBpZiAodHlwZSA9
			PSAid29yZCIgJiYgS2x1ZGdlcy5hbGxvd1VucXVvdGVkKSB7c2V0U3R5bGUgPSAic3RyaW5nIjsg
			cmV0dXJuIGNvbnQoKTt9DQogICAgc2V0U3R5bGUgPSAiZXJyb3IiOw0KICAgIHJldHVybiAodHlw
			ZSA9PSAiZW5kVGFnIiB8fCB0eXBlID09ICJzZWxmQ2xvc2VUYWciKSA/IHBhc3MoKSA6IGNvbnQo
			KTsNCiAgfQ0KICBmdW5jdGlvbiBhdHR2YWx1ZW1heWJlKHR5cGUpIHsNCiAgICBpZiAodHlwZSA9
			PSAic3RyaW5nIikgcmV0dXJuIGNvbnQoYXR0dmFsdWVtYXliZSk7DQogICAgZWxzZSByZXR1cm4g
			cGFzcygpOw0KICB9DQoNCiAgcmV0dXJuIHsNCiAgICBzdGFydFN0YXRlOiBmdW5jdGlvbigpIHsN
			CiAgICAgIHJldHVybiB7dG9rZW5pemU6IGluVGV4dCwgY2M6IFtdLCBpbmRlbnRlZDogMCwgc3Rh
			cnRPZkxpbmU6IHRydWUsIHRhZ05hbWU6IG51bGwsIGNvbnRleHQ6IG51bGx9Ow0KICAgIH0sDQoN
			CiAgICB0b2tlbjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkgew0KICAgICAgaWYgKHN0cmVhbS5z
			b2woKSkgew0KICAgICAgICBzdGF0ZS5zdGFydE9mTGluZSA9IHRydWU7DQogICAgICAgIHN0YXRl
			LmluZGVudGVkID0gc3RyZWFtLmluZGVudGF0aW9uKCk7DQogICAgICB9DQogICAgICBpZiAoc3Ry
			ZWFtLmVhdFNwYWNlKCkpIHJldHVybiBudWxsOw0KDQogICAgICBzZXRTdHlsZSA9IHR5cGUgPSB0
			YWdOYW1lID0gbnVsbDsNCiAgICAgIHZhciBzdHlsZSA9IHN0YXRlLnRva2VuaXplKHN0cmVhbSwg
			c3RhdGUpOw0KICAgICAgc3RhdGUudHlwZSA9IHR5cGU7DQogICAgICBpZiAoKHN0eWxlIHx8IHR5
			cGUpICYmIHN0eWxlICE9ICJjb21tZW50Iikgew0KICAgICAgICBjdXJTdGF0ZSA9IHN0YXRlOw0K
			ICAgICAgICB3aGlsZSAodHJ1ZSkgew0KICAgICAgICAgIHZhciBjb21iID0gc3RhdGUuY2MucG9w
			KCkgfHwgZWxlbWVudDsNCiAgICAgICAgICBpZiAoY29tYih0eXBlIHx8IHN0eWxlKSkgYnJlYWs7
			DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHN0YXRlLnN0YXJ0T2ZMaW5lID0gZmFsc2U7DQog
			ICAgICByZXR1cm4gc2V0U3R5bGUgfHwgc3R5bGU7DQogICAgfSwNCg0KICAgIGluZGVudDogZnVu
			Y3Rpb24oc3RhdGUsIHRleHRBZnRlciwgZnVsbExpbmUpIHsNCiAgICAgIHZhciBjb250ZXh0ID0g
			c3RhdGUuY29udGV4dDsNCiAgICAgIGlmICgoc3RhdGUudG9rZW5pemUgIT0gaW5UYWcgJiYgc3Rh
			dGUudG9rZW5pemUgIT0gaW5UZXh0KSB8fA0KICAgICAgICAgIGNvbnRleHQgJiYgY29udGV4dC5u
			b0luZGVudCkNCiAgICAgICAgcmV0dXJuIGZ1bGxMaW5lID8gZnVsbExpbmUubWF0Y2goL14oXHMq
			KS8pWzBdLmxlbmd0aCA6IDA7DQogICAgICBpZiAoYWxpZ25DREFUQSAmJiAvPCFcW0NEQVRBXFsv
			LnRlc3QodGV4dEFmdGVyKSkgcmV0dXJuIDA7DQogICAgICBpZiAoY29udGV4dCAmJiAvXjxcLy8u
			dGVzdCh0ZXh0QWZ0ZXIpKQ0KICAgICAgICBjb250ZXh0ID0gY29udGV4dC5wcmV2Ow0KICAgICAg
			d2hpbGUgKGNvbnRleHQgJiYgIWNvbnRleHQuc3RhcnRPZkxpbmUpDQogICAgICAgIGNvbnRleHQg
			PSBjb250ZXh0LnByZXY7DQogICAgICBpZiAoY29udGV4dCkgcmV0dXJuIGNvbnRleHQuaW5kZW50
			ICsgaW5kZW50VW5pdDsNCiAgICAgIGVsc2UgcmV0dXJuIDA7DQogICAgfSwNCg0KICAgIGNvbXBh
			cmVTdGF0ZXM6IGZ1bmN0aW9uKGEsIGIpIHsNCiAgICAgIGlmIChhLmluZGVudGVkICE9IGIuaW5k
			ZW50ZWQgfHwgYS50b2tlbml6ZSAhPSBiLnRva2VuaXplKSByZXR1cm4gZmFsc2U7DQogICAgICBm
			b3IgKHZhciBjYSA9IGEuY29udGV4dCwgY2IgPSBiLmNvbnRleHQ7IDsgY2EgPSBjYS5wcmV2LCBj
			YiA9IGNiLnByZXYpIHsNCiAgICAgICAgaWYgKCFjYSB8fCAhY2IpIHJldHVybiBjYSA9PSBjYjsN
			CiAgICAgICAgaWYgKGNhLnRhZ05hbWUgIT0gY2IudGFnTmFtZSkgcmV0dXJuIGZhbHNlOw0KICAg
			ICAgfQ0KICAgIH0sDQoNCiAgICBlbGVjdHJpY0NoYXJzOiAiLyINCiAgfTsNCn0pOw0KDQpDb2Rl
			TWlycm9yLmRlZmluZU1JTUUoImFwcGxpY2F0aW9uL3htbCIsICJ4bWwiKTsNCkNvZGVNaXJyb3Iu
			ZGVmaW5lTUlNRSgidGV4dC9odG1sIiwge25hbWU6ICJ4bWwiLCBodG1sTW9kZTogdHJ1ZX0pOw0K
			DQpDb2RlTWlycm9yLmRlZmluZU1vZGUoInB5dGhvbiIsIGZ1bmN0aW9uKGNvbmYsIHBhcnNlckNv
			bmYpIHsNCiAgICB2YXIgRVJST1JDTEFTUyA9ICdlcnJvcic7DQogICAgDQogICAgZnVuY3Rpb24g
			d29yZFJlZ2V4cCh3b3Jkcykgew0KICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cCgiXigoIiArIHdv
			cmRzLmpvaW4oIil8KCIpICsgIikpXFxiIik7DQogICAgfQ0KICAgIA0KICAgIHZhciBzaW5nbGVP
			cGVyYXRvcnMgPSBuZXcgUmVnRXhwKCJeW1xcK1xcLVxcKi8lJnxcXF5+PD4hXSIpOw0KICAgIHZh
			ciBzaW5nbGVEZWxpbWl0ZXJzID0gbmV3IFJlZ0V4cCgnXltcXChcXClcXFtcXF1cXHtcXH1ALDpg
			PTtcXC5dJyk7DQogICAgdmFyIGRvdWJsZU9wZXJhdG9ycyA9IG5ldyBSZWdFeHAoIl4oKD09KXwo
			IT0pfCg8PSl8KD49KXwoPD4pfCg8PCl8KD4+KXwoLy8pfChcXCpcXCopKSIpOw0KICAgIHZhciBk
			b3VibGVEZWxpbWl0ZXJzID0gbmV3IFJlZ0V4cCgiXigoXFwrPSl8KFxcLT0pfChcXCo9KXwoJT0p
			fCgvPSl8KCY9KXwoXFx8PSl8KFxcXj0pKSIpOw0KICAgIHZhciB0cmlwbGVEZWxpbWl0ZXJzID0g
			bmV3IFJlZ0V4cCgiXigoLy89KXwoPj49KXwoPDw9KXwoXFwqXFwqPSkpIik7DQogICAgdmFyIGlk
			ZW50aWZpZXJzID0gbmV3IFJlZ0V4cCgiXltfQS1aYS16XVtfQS1aYS16MC05XSoiKTsNCg0KICAg
			IHZhciB3b3JkT3BlcmF0b3JzID0gd29yZFJlZ2V4cChbJ2FuZCcsICdvcicsICdub3QnLCAnaXMn
			LCAnaW4nXSk7DQogICAgdmFyIGNvbW1vbmtleXdvcmRzID0gWydhcycsICdhc3NlcnQnLCAnYnJl
			YWsnLCAnY2xhc3MnLCAnY29udGludWUnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAnZGVm
			JywgJ2RlbCcsICdlbGlmJywgJ2Vsc2UnLCAnZXhjZXB0JywgJ2ZpbmFsbHknLA0KICAgICAgICAg
			ICAgICAgICAgICAgICAgICAnZm9yJywgJ2Zyb20nLCAnZ2xvYmFsJywgJ2lmJywgJ2ltcG9ydCcs
			DQogICAgICAgICAgICAgICAgICAgICAgICAgICdsYW1iZGEnLCAncGFzcycsICdyYWlzZScsICdy
			ZXR1cm4nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAndHJ5JywgJ3doaWxlJywgJ3dpdGgn
			LCAneWllbGQnXTsNCiAgICB2YXIgY29tbW9uQnVpbHRpbnMgPSBbJ2FicycsICdhbGwnLCAnYW55
			JywgJ2JpbicsICdib29sJywgJ2J5dGVhcnJheScsICdjYWxsYWJsZScsICdjaHInLA0KICAgICAg
			ICAgICAgICAgICAgICAgICAgICAnY2xhc3NtZXRob2QnLCAnY29tcGlsZScsICdjb21wbGV4Jywg
			J2RlbGF0dHInLCAnZGljdCcsICdkaXInLCAnZGl2bW9kJywNCiAgICAgICAgICAgICAgICAgICAg
			ICAgICAgJ2VudW1lcmF0ZScsICdldmFsJywgJ2ZpbHRlcicsICdmbG9hdCcsICdmb3JtYXQnLCAn
			ZnJvemVuc2V0JywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2dldGF0dHInLCAnZ2xvYmFs
			cycsICdoYXNhdHRyJywgJ2hhc2gnLCAnaGVscCcsICdoZXgnLCAnaWQnLA0KICAgICAgICAgICAg
			ICAgICAgICAgICAgICAnaW5wdXQnLCAnaW50JywgJ2lzaW5zdGFuY2UnLCAnaXNzdWJjbGFzcycs
			ICdpdGVyJywgJ2xlbicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICdsaXN0JywgJ2xvY2Fs
			cycsICdtYXAnLCAnbWF4JywgJ21lbW9yeXZpZXcnLCAnbWluJywgJ25leHQnLA0KICAgICAgICAg
			ICAgICAgICAgICAgICAgICAnb2JqZWN0JywgJ29jdCcsICdvcGVuJywgJ29yZCcsICdwb3cnLCAn
			cHJvcGVydHknLCAncmFuZ2UnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAncmVwcicsICdy
			ZXZlcnNlZCcsICdyb3VuZCcsICdzZXQnLCAnc2V0YXR0cicsICdzbGljZScsDQogICAgICAgICAg
			ICAgICAgICAgICAgICAgICdzb3J0ZWQnLCAnc3RhdGljbWV0aG9kJywgJ3N0cicsICdzdW0nLCAn
			c3VwZXInLCAndHVwbGUnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAndHlwZScsICd2YXJz
			JywgJ3ppcCcsICdfX2ltcG9ydF9fJywgJ05vdEltcGxlbWVudGVkJywNCiAgICAgICAgICAgICAg
			ICAgICAgICAgICAgJ0VsbGlwc2lzJywgJ19fZGVidWdfXyddOw0KICAgIHZhciBweTIgPSB7J2J1
			aWx0aW5zJzogWydhcHBseScsICdiYXNlc3RyaW5nJywgJ2J1ZmZlcicsICdjbXAnLCAnY29lcmNl
			JywgJ2V4ZWNmaWxlJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZmlsZScsICdpbnRl
			cm4nLCAnbG9uZycsICdyYXdfaW5wdXQnLCAncmVkdWNlJywgJ3JlbG9hZCcsDQogICAgICAgICAg
			ICAgICAgICAgICAgICAgICAgJ3VuaWNocicsICd1bmljb2RlJywgJ3hyYW5nZScsICdGYWxzZScs
			ICdUcnVlJywgJ05vbmUnXSwNCiAgICAgICAgICAgICAgICdrZXl3b3Jkcyc6IFsnZXhlYycsICdw
			cmludCddfTsNCiAgICB2YXIgcHkzID0geydidWlsdGlucyc6IFsnYXNjaWknLCAnYnl0ZXMnLCAn
			ZXhlYycsICdwcmludCddLA0KICAgICAgICAgICAgICAgJ2tleXdvcmRzJzogWydub25sb2NhbCcs
			ICdGYWxzZScsICdUcnVlJywgJ05vbmUnXX07DQoNCiAgICBpZiAoISFwYXJzZXJDb25mLnZlcnNp
			b24gJiYgcGFyc2VJbnQocGFyc2VyQ29uZi52ZXJzaW9uLCAxMCkgPT09IDMpIHsNCiAgICAgICAg
			Y29tbW9ua2V5d29yZHMgPSBjb21tb25rZXl3b3Jkcy5jb25jYXQocHkzLmtleXdvcmRzKTsNCiAg
			ICAgICAgY29tbW9uQnVpbHRpbnMgPSBjb21tb25CdWlsdGlucy5jb25jYXQocHkzLmJ1aWx0aW5z
			KTsNCiAgICAgICAgdmFyIHN0cmluZ1ByZWZpeGVzID0gbmV3IFJlZ0V4cCgiXigoW3JiXXwoYnIp
			KT8oJ3szfXxcInszfXxbJ1wiXSkpIiwgImkiKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBjb21t
			b25rZXl3b3JkcyA9IGNvbW1vbmtleXdvcmRzLmNvbmNhdChweTIua2V5d29yZHMpOw0KICAgICAg
			ICBjb21tb25CdWlsdGlucyA9IGNvbW1vbkJ1aWx0aW5zLmNvbmNhdChweTIuYnVpbHRpbnMpOw0K
			ICAgICAgICB2YXIgc3RyaW5nUHJlZml4ZXMgPSBuZXcgUmVnRXhwKCJeKChbcnViXXwodXIpfChi
			cikpPygnezN9fFwiezN9fFsnXCJdKSkiLCAiaSIpOw0KICAgIH0NCiAgICB2YXIga2V5d29yZHMg
			PSB3b3JkUmVnZXhwKGNvbW1vbmtleXdvcmRzKTsNCiAgICB2YXIgYnVpbHRpbnMgPSB3b3JkUmVn
			ZXhwKGNvbW1vbkJ1aWx0aW5zKTsNCg0KICAgIHZhciBpbmRlbnRJbmZvID0gbnVsbDsNCg0KICAg
			IC8vIHRva2VuaXplcnMNCiAgICBmdW5jdGlvbiB0b2tlbkJhc2Uoc3RyZWFtLCBzdGF0ZSkgew0K
			ICAgICAgICAvLyBIYW5kbGUgc2NvcGUgY2hhbmdlcw0KICAgICAgICBpZiAoc3RyZWFtLnNvbCgp
			KSB7DQogICAgICAgICAgICB2YXIgc2NvcGVPZmZzZXQgPSBzdGF0ZS5zY29wZXNbMF0ub2Zmc2V0
			Ow0KICAgICAgICAgICAgaWYgKHN0cmVhbS5lYXRTcGFjZSgpKSB7DQogICAgICAgICAgICAgICAg
			dmFyIGxpbmVPZmZzZXQgPSBzdHJlYW0uaW5kZW50YXRpb24oKTsNCiAgICAgICAgICAgICAgICBp
			ZiAobGluZU9mZnNldCA+IHNjb3BlT2Zmc2V0KSB7DQogICAgICAgICAgICAgICAgICAgIGluZGVu
			dEluZm8gPSAnaW5kZW50JzsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVPZmZzZXQg
			PCBzY29wZU9mZnNldCkgew0KICAgICAgICAgICAgICAgICAgICBpbmRlbnRJbmZvID0gJ2RlZGVu
			dCc7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAg
			ICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAoc2NvcGVPZmZzZXQgPiAwKSB7
			DQogICAgICAgICAgICAgICAgICAgIGRlZGVudChzdHJlYW0sIHN0YXRlKTsNCiAgICAgICAgICAg
			ICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKHN0cmVhbS5lYXRT
			cGFjZSgpKSB7DQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgICAN
			CiAgICAgICAgdmFyIGNoID0gc3RyZWFtLnBlZWsoKTsNCiAgICAgICAgDQogICAgICAgIC8vIEhh
			bmRsZSBDb21tZW50cw0KICAgICAgICBpZiAoY2ggPT09ICcjJykgew0KICAgICAgICAgICAgc3Ry
			ZWFtLnNraXBUb0VuZCgpOw0KICAgICAgICAgICAgcmV0dXJuICdjb21tZW50JzsNCiAgICAgICAg
			fQ0KICAgICAgICANCiAgICAgICAgLy8gSGFuZGxlIE51bWJlciBMaXRlcmFscw0KICAgICAgICBp
			ZiAoc3RyZWFtLm1hdGNoKC9eWzAtOVwuXS8sIGZhbHNlKSkgew0KICAgICAgICAgICAgdmFyIGZs
			b2F0TGl0ZXJhbCA9IGZhbHNlOw0KICAgICAgICAgICAgLy8gRmxvYXRzDQogICAgICAgICAgICBp
			ZiAoc3RyZWFtLm1hdGNoKC9eXGQqXC5cZCsoZVtcK1wtXT9cZCspPy9pKSkgeyBmbG9hdExpdGVy
			YWwgPSB0cnVlOyB9DQogICAgICAgICAgICBpZiAoc3RyZWFtLm1hdGNoKC9eXGQrXC5cZCovKSkg
			eyBmbG9hdExpdGVyYWwgPSB0cnVlOyB9DQogICAgICAgICAgICBpZiAoc3RyZWFtLm1hdGNoKC9e
			XC5cZCsvKSkgeyBmbG9hdExpdGVyYWwgPSB0cnVlOyB9DQogICAgICAgICAgICBpZiAoZmxvYXRM
			aXRlcmFsKSB7DQogICAgICAgICAgICAgICAgLy8gRmxvYXQgbGl0ZXJhbHMgbWF5IGJlICJpbWFn
			aW5hcnkiDQogICAgICAgICAgICAgICAgc3RyZWFtLmVhdCgvSi9pKTsNCiAgICAgICAgICAgICAg
			ICByZXR1cm4gJ251bWJlcic7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBJbnRlZ2Vy
			cw0KICAgICAgICAgICAgdmFyIGludExpdGVyYWwgPSBmYWxzZTsNCiAgICAgICAgICAgIC8vIEhl
			eA0KICAgICAgICAgICAgaWYgKHN0cmVhbS5tYXRjaCgvXjB4WzAtOWEtZl0rL2kpKSB7IGludExp
			dGVyYWwgPSB0cnVlOyB9DQogICAgICAgICAgICAvLyBCaW5hcnkNCiAgICAgICAgICAgIGlmIChz
			dHJlYW0ubWF0Y2goL14wYlswMV0rL2kpKSB7IGludExpdGVyYWwgPSB0cnVlOyB9DQogICAgICAg
			ICAgICAvLyBPY3RhbA0KICAgICAgICAgICAgaWYgKHN0cmVhbS5tYXRjaCgvXjBvWzAtN10rL2kp
			KSB7IGludExpdGVyYWwgPSB0cnVlOyB9DQogICAgICAgICAgICAvLyBEZWNpbWFsDQogICAgICAg
			ICAgICBpZiAoc3RyZWFtLm1hdGNoKC9eWzEtOV1cZCooZVtcK1wtXT9cZCspPy8pKSB7DQogICAg
			ICAgICAgICAgICAgLy8gRGVjaW1hbCBsaXRlcmFscyBtYXkgYmUgImltYWdpbmFyeSINCiAgICAg
			ICAgICAgICAgICBzdHJlYW0uZWF0KC9KL2kpOw0KICAgICAgICAgICAgICAgIC8vIFRPRE8gLSBD
			YW4geW91IGhhdmUgaW1hZ2luYXJ5IGxvbmdzPw0KICAgICAgICAgICAgICAgIGludExpdGVyYWwg
			PSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLy8gWmVybyBieSBpdHNlbGYgd2l0
			aCBubyBvdGhlciBwaWVjZSBvZiBudW1iZXIuDQogICAgICAgICAgICBpZiAoc3RyZWFtLm1hdGNo
			KC9eMCg/IVtcZHhdKS9pKSkgeyBpbnRMaXRlcmFsID0gdHJ1ZTsgfQ0KICAgICAgICAgICAgaWYg
			KGludExpdGVyYWwpIHsNCiAgICAgICAgICAgICAgICAvLyBJbnRlZ2VyIGxpdGVyYWxzIG1heSBi
			ZSAibG9uZyINCiAgICAgICAgICAgICAgICBzdHJlYW0uZWF0KC9ML2kpOw0KICAgICAgICAgICAg
			ICAgIHJldHVybiAnbnVtYmVyJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAN
			CiAgICAgICAgLy8gSGFuZGxlIFN0cmluZ3MNCiAgICAgICAgaWYgKHN0cmVhbS5tYXRjaChzdHJp
			bmdQcmVmaXhlcykpIHsNCiAgICAgICAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5TdHJpbmdG
			YWN0b3J5KHN0cmVhbS5jdXJyZW50KCkpOw0KICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnRva2Vu
			aXplKHN0cmVhbSwgc3RhdGUpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBIYW5k
			bGUgb3BlcmF0b3JzIGFuZCBEZWxpbWl0ZXJzDQogICAgICAgIGlmIChzdHJlYW0ubWF0Y2godHJp
			cGxlRGVsaW1pdGVycykgfHwgc3RyZWFtLm1hdGNoKGRvdWJsZURlbGltaXRlcnMpKSB7DQogICAg
			ICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoc3RyZWFtLm1hdGNo
			KGRvdWJsZU9wZXJhdG9ycykNCiAgICAgICAgICAgIHx8IHN0cmVhbS5tYXRjaChzaW5nbGVPcGVy
			YXRvcnMpDQogICAgICAgICAgICB8fCBzdHJlYW0ubWF0Y2god29yZE9wZXJhdG9ycykpIHsNCiAg
			ICAgICAgICAgIHJldHVybiAnb3BlcmF0b3InOw0KICAgICAgICB9DQogICAgICAgIGlmIChzdHJl
			YW0ubWF0Y2goc2luZ2xlRGVsaW1pdGVycykpIHsNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0K
			ICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBpZiAoc3RyZWFtLm1hdGNoKGtleXdvcmRzKSkg
			ew0KICAgICAgICAgICAgcmV0dXJuICdrZXl3b3JkJzsNCiAgICAgICAgfQ0KICAgICAgICANCiAg
			ICAgICAgaWYgKHN0cmVhbS5tYXRjaChidWlsdGlucykpIHsNCiAgICAgICAgICAgIHJldHVybiAn
			YnVpbHRpbic7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGlmIChzdHJlYW0ubWF0Y2go
			aWRlbnRpZmllcnMpKSB7DQogICAgICAgICAgICByZXR1cm4gJ3ZhcmlhYmxlJzsNCiAgICAgICAg
			fQ0KICAgICAgICANCiAgICAgICAgLy8gSGFuZGxlIG5vbi1kZXRlY3RlZCBpdGVtcw0KICAgICAg
			ICBzdHJlYW0ubmV4dCgpOw0KICAgICAgICByZXR1cm4gRVJST1JDTEFTUzsNCiAgICB9DQogICAg
			DQogICAgZnVuY3Rpb24gdG9rZW5TdHJpbmdGYWN0b3J5KGRlbGltaXRlcikgew0KICAgICAgICB3
			aGlsZSAoJ3J1YicuaW5kZXhPZihkZWxpbWl0ZXIuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkpID49
			IDApIHsNCiAgICAgICAgICAgIGRlbGltaXRlciA9IGRlbGltaXRlci5zdWJzdHIoMSk7DQogICAg
			ICAgIH0NCiAgICAgICAgdmFyIHNpbmdsZWxpbmUgPSBkZWxpbWl0ZXIubGVuZ3RoID09IDE7DQog
			ICAgICAgIHZhciBPVVRDTEFTUyA9ICdzdHJpbmcnOw0KICAgICAgICANCiAgICAgICAgcmV0dXJu
			IGZ1bmN0aW9uIHRva2VuU3RyaW5nKHN0cmVhbSwgc3RhdGUpIHsNCiAgICAgICAgICAgIHdoaWxl
			ICghc3RyZWFtLmVvbCgpKSB7DQogICAgICAgICAgICAgICAgc3RyZWFtLmVhdFdoaWxlKC9bXici
			XFxdLyk7DQogICAgICAgICAgICAgICAgaWYgKHN0cmVhbS5lYXQoJ1xcJykpIHsNCiAgICAgICAg
			ICAgICAgICAgICAgc3RyZWFtLm5leHQoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNpbmds
			ZWxpbmUgJiYgc3RyZWFtLmVvbCgpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4g
			T1VUQ0xBU1M7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2Ug
			aWYgKHN0cmVhbS5tYXRjaChkZWxpbWl0ZXIpKSB7DQogICAgICAgICAgICAgICAgICAgIHN0YXRl
			LnRva2VuaXplID0gdG9rZW5CYXNlOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gT1VUQ0xB
			U1M7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgc3RyZWFt
			LmVhdCgvWyciXS8pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAg
			ICAgIGlmIChzaW5nbGVsaW5lKSB7DQogICAgICAgICAgICAgICAgaWYgKHBhcnNlckNvbmYuc2lu
			Z2xlTGluZVN0cmluZ0Vycm9ycykgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gRVJST1JD
			TEFTUzsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBzdGF0
			ZS50b2tlbml6ZSA9IHRva2VuQmFzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9
			DQogICAgICAgICAgICByZXR1cm4gT1VUQ0xBU1M7DQogICAgICAgIH07DQogICAgfQ0KICAgIA0K
			ICAgIGZ1bmN0aW9uIGluZGVudChzdHJlYW0sIHN0YXRlLCB0eXBlKSB7DQogICAgICAgIHR5cGUg
			PSB0eXBlIHx8ICdweSc7DQogICAgICAgIHZhciBpbmRlbnRVbml0ID0gMDsNCiAgICAgICAgaWYg
			KHR5cGUgPT09ICdweScpIHsNCiAgICAgICAgICAgIGlmIChzdGF0ZS5zY29wZXNbMF0udHlwZSAh
			PT0gJ3B5Jykgew0KICAgICAgICAgICAgICAgIHN0YXRlLnNjb3Blc1swXS5vZmZzZXQgPSBzdHJl
			YW0uaW5kZW50YXRpb24oKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9
			DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlLnNjb3Blcy5sZW5ndGg7ICsr
			aSkgew0KICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5zY29wZXNbaV0udHlwZSA9PT0gJ3B5Jykg
			ew0KICAgICAgICAgICAgICAgICAgICBpbmRlbnRVbml0ID0gc3RhdGUuc2NvcGVzW2ldLm9mZnNl
			dCArIGNvbmYuaW5kZW50VW5pdDsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAg
			ICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAg
			aW5kZW50VW5pdCA9IHN0cmVhbS5jb2x1bW4oKSArIHN0cmVhbS5jdXJyZW50KCkubGVuZ3RoOw0K
			ICAgICAgICB9DQogICAgICAgIHN0YXRlLnNjb3Blcy51bnNoaWZ0KHsNCiAgICAgICAgICAgIG9m
			ZnNldDogaW5kZW50VW5pdCwNCiAgICAgICAgICAgIHR5cGU6IHR5cGUNCiAgICAgICAgfSk7DQog
			ICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIGRlZGVudChzdHJlYW0sIHN0YXRlLCB0eXBlKSB7DQog
			ICAgICAgIHR5cGUgPSB0eXBlIHx8ICdweSc7DQogICAgICAgIGlmIChzdGF0ZS5zY29wZXMubGVu
			Z3RoID09IDEpIHJldHVybjsNCiAgICAgICAgaWYgKHN0YXRlLnNjb3Blc1swXS50eXBlID09PSAn
			cHknKSB7DQogICAgICAgICAgICB2YXIgX2luZGVudCA9IHN0cmVhbS5pbmRlbnRhdGlvbigpOw0K
			ICAgICAgICAgICAgdmFyIF9pbmRlbnRfaW5kZXggPSAtMTsNCiAgICAgICAgICAgIGZvciAodmFy
			IGkgPSAwOyBpIDwgc3RhdGUuc2NvcGVzLmxlbmd0aDsgKytpKSB7DQogICAgICAgICAgICAgICAg
			aWYgKF9pbmRlbnQgPT09IHN0YXRlLnNjb3Blc1tpXS5vZmZzZXQpIHsNCiAgICAgICAgICAgICAg
			ICAgICAgX2luZGVudF9pbmRleCA9IGk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAg
			ICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChfaW5kZW50X2lu
			ZGV4ID09PSAtMSkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAg
			fQ0KICAgICAgICAgICAgd2hpbGUgKHN0YXRlLnNjb3Blc1swXS5vZmZzZXQgIT09IF9pbmRlbnQp
			IHsNCiAgICAgICAgICAgICAgICBzdGF0ZS5zY29wZXMuc2hpZnQoKTsNCiAgICAgICAgICAgIH0N
			CiAgICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAg
			aWYgKHR5cGUgPT09ICdweScpIHsNCiAgICAgICAgICAgICAgICBzdGF0ZS5zY29wZXNbMF0ub2Zm
			c2V0ID0gc3RyZWFtLmluZGVudGF0aW9uKCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNl
			Ow0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuc2NvcGVz
			WzBdLnR5cGUgIT0gdHlwZSkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAg
			ICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc3RhdGUuc2NvcGVzLnNoaWZ0KCk7DQog
			ICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQog
			ICAgfQ0KDQogICAgZnVuY3Rpb24gdG9rZW5MZXhlcihzdHJlYW0sIHN0YXRlKSB7DQogICAgICAg
			IGluZGVudEluZm8gPSBudWxsOw0KICAgICAgICB2YXIgc3R5bGUgPSBzdGF0ZS50b2tlbml6ZShz
			dHJlYW0sIHN0YXRlKTsNCiAgICAgICAgdmFyIGN1cnJlbnQgPSBzdHJlYW0uY3VycmVudCgpOw0K
			DQogICAgICAgIC8vIEhhbmRsZSAnLicgY29ubmVjdGVkIGlkZW50aWZpZXJzDQogICAgICAgIGlm
			IChjdXJyZW50ID09PSAnLicpIHsNCiAgICAgICAgICAgIHN0eWxlID0gc3RhdGUudG9rZW5pemUo
			c3RyZWFtLCBzdGF0ZSk7DQogICAgICAgICAgICBjdXJyZW50ID0gc3RyZWFtLmN1cnJlbnQoKTsN
			CiAgICAgICAgICAgIGlmIChzdHlsZSA9PT0gJ3ZhcmlhYmxlJyB8fCBzdHlsZSA9PT0gJ2J1aWx0
			aW4nKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICd2YXJpYWJsZSc7DQogICAgICAgICAgICB9
			IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBFUlJPUkNMQVNTOw0KICAgICAgICAgICAg
			fQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBIYW5kbGUgZGVjb3JhdG9ycw0KICAg
			ICAgICBpZiAoY3VycmVudCA9PT0gJ0AnKSB7DQogICAgICAgICAgICBzdHlsZSA9IHN0YXRlLnRv
			a2VuaXplKHN0cmVhbSwgc3RhdGUpOw0KICAgICAgICAgICAgY3VycmVudCA9IHN0cmVhbS5jdXJy
			ZW50KCk7DQogICAgICAgICAgICBpZiAoc3R5bGUgPT09ICd2YXJpYWJsZScNCiAgICAgICAgICAg
			ICAgICB8fCBjdXJyZW50ID09PSAnQHN0YXRpY21ldGhvZCcNCiAgICAgICAgICAgICAgICB8fCBj
			dXJyZW50ID09PSAnQGNsYXNzbWV0aG9kJykgew0KICAgICAgICAgICAgICAgIHJldHVybiAnbWV0
			YSc7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBFUlJPUkNM
			QVNTOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBIYW5k
			bGUgc2NvcGUgY2hhbmdlcy4NCiAgICAgICAgaWYgKGN1cnJlbnQgPT09ICdwYXNzJyB8fCBjdXJy
			ZW50ID09PSAncmV0dXJuJykgew0KICAgICAgICAgICAgc3RhdGUuZGVkZW50ICs9IDE7DQogICAg
			ICAgIH0NCiAgICAgICAgaWYgKChjdXJyZW50ID09PSAnOicgJiYgIXN0YXRlLmxhbWJkYSAmJiBz
			dGF0ZS5zY29wZXNbMF0udHlwZSA9PSAncHknKQ0KICAgICAgICAgICAgfHwgaW5kZW50SW5mbyA9
			PT0gJ2luZGVudCcpIHsNCiAgICAgICAgICAgIGluZGVudChzdHJlYW0sIHN0YXRlKTsNCiAgICAg
			ICAgfQ0KICAgICAgICB2YXIgZGVsaW1pdGVyX2luZGV4ID0gJ1soeycuaW5kZXhPZihjdXJyZW50
			KTsNCiAgICAgICAgaWYgKGRlbGltaXRlcl9pbmRleCAhPT0gLTEpIHsNCiAgICAgICAgICAgIGlu
			ZGVudChzdHJlYW0sIHN0YXRlLCAnXSl9Jy5zbGljZShkZWxpbWl0ZXJfaW5kZXgsIGRlbGltaXRl
			cl9pbmRleCsxKSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGluZGVudEluZm8gPT09ICdkZWRl
			bnQnKSB7DQogICAgICAgICAgICBpZiAoZGVkZW50KHN0cmVhbSwgc3RhdGUpKSB7DQogICAgICAg
			ICAgICAgICAgcmV0dXJuIEVSUk9SQ0xBU1M7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAg
			ICAgICAgZGVsaW1pdGVyX2luZGV4ID0gJ10pfScuaW5kZXhPZihjdXJyZW50KTsNCiAgICAgICAg
			aWYgKGRlbGltaXRlcl9pbmRleCAhPT0gLTEpIHsNCiAgICAgICAgICAgIGlmIChkZWRlbnQoc3Ry
			ZWFtLCBzdGF0ZSwgY3VycmVudCkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gRVJST1JDTEFT
			UzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoc3RhdGUuZGVkZW50ID4g
			MCAmJiBzdHJlYW0uZW9sKCkgJiYgc3RhdGUuc2NvcGVzWzBdLnR5cGUgPT0gJ3B5Jykgew0KICAg
			ICAgICAgICAgaWYgKHN0YXRlLnNjb3Blcy5sZW5ndGggPiAxKSBzdGF0ZS5zY29wZXMuc2hpZnQo
			KTsNCiAgICAgICAgICAgIHN0YXRlLmRlZGVudCAtPSAxOw0KICAgICAgICB9DQogICAgICAgIA0K
			ICAgICAgICByZXR1cm4gc3R5bGU7DQogICAgfQ0KDQogICAgdmFyIGV4dGVybmFsID0gew0KICAg
			ICAgICBzdGFydFN0YXRlOiBmdW5jdGlvbihiYXNlY29sdW1uKSB7DQogICAgICAgICAgICByZXR1
			cm4gew0KICAgICAgICAgICAgICB0b2tlbml6ZTogdG9rZW5CYXNlLA0KICAgICAgICAgICAgICBz
			Y29wZXM6IFt7b2Zmc2V0OmJhc2Vjb2x1bW4gfHwgMCwgdHlwZToncHknfV0sDQogICAgICAgICAg
			ICAgIGxhc3RUb2tlbjogbnVsbCwNCiAgICAgICAgICAgICAgbGFtYmRhOiBmYWxzZSwNCiAgICAg
			ICAgICAgICAgZGVkZW50OiAwDQogICAgICAgICAgfTsNCiAgICAgICAgfSwNCiAgICAgICAgDQog
			ICAgICAgIHRva2VuOiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7DQogICAgICAgICAgICB2YXIg
			c3R5bGUgPSB0b2tlbkxleGVyKHN0cmVhbSwgc3RhdGUpOw0KICAgICAgICAgICAgDQogICAgICAg
			ICAgICBzdGF0ZS5sYXN0VG9rZW4gPSB7c3R5bGU6c3R5bGUsIGNvbnRlbnQ6IHN0cmVhbS5jdXJy
			ZW50KCl9Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoc3RyZWFtLmVvbCgpICYmIHN0
			cmVhbS5sYW1iZGEpIHsNCiAgICAgICAgICAgICAgICBzdGF0ZS5sYW1iZGEgPSBmYWxzZTsNCiAg
			ICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIHN0eWxlOw0KICAg
			ICAgICB9LA0KICAgICAgICANCiAgICAgICAgaW5kZW50OiBmdW5jdGlvbihzdGF0ZSwgdGV4dEFm
			dGVyKSB7DQogICAgICAgICAgICBpZiAoc3RhdGUudG9rZW5pemUgIT0gdG9rZW5CYXNlKSB7DQog
			ICAgICAgICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAg
			ICAgICAgICAgIHJldHVybiBzdGF0ZS5zY29wZXNbMF0ub2Zmc2V0Ow0KICAgICAgICB9DQogICAg
			ICAgIA0KICAgIH07DQogICAgcmV0dXJuIGV4dGVybmFsOw0KfSk7DQoNCkNvZGVNaXJyb3IuZGVm
			aW5lTUlNRSgidGV4dC94LXB5dGhvbiIsICJweXRob24iKTsNCg0KQ29kZU1pcnJvci5kZWZpbmVN
			b2RlKCJqYXZhc2NyaXB0IiwgZnVuY3Rpb24oY29uZmlnLCBwYXJzZXJDb25maWcpIHsNCiAgdmFy
			IGluZGVudFVuaXQgPSBjb25maWcuaW5kZW50VW5pdDsNCiAgdmFyIGpzb25Nb2RlID0gcGFyc2Vy
			Q29uZmlnLmpzb247DQoNCiAgLy8gVG9rZW5pemVyDQoNCiAgdmFyIGtleXdvcmRzID0gZnVuY3Rp
			b24oKXsNCiAgICBmdW5jdGlvbiBrdyh0eXBlKSB7cmV0dXJuIHt0eXBlOiB0eXBlLCBzdHlsZTog
			ImtleXdvcmQifTt9DQogICAgdmFyIEEgPSBrdygia2V5d29yZCBhIiksIEIgPSBrdygia2V5d29y
			ZCBiIiksIEMgPSBrdygia2V5d29yZCBjIik7DQogICAgdmFyIG9wZXJhdG9yID0ga3coIm9wZXJh
			dG9yIiksIGF0b20gPSB7dHlwZTogImF0b20iLCBzdHlsZTogImF0b20ifTsNCiAgICByZXR1cm4g
			ew0KICAgICAgImlmIjogQSwgIndoaWxlIjogQSwgIndpdGgiOiBBLCAiZWxzZSI6IEIsICJkbyI6
			IEIsICJ0cnkiOiBCLCAiZmluYWxseSI6IEIsDQogICAgICAicmV0dXJuIjogQywgImJyZWFrIjog
			QywgImNvbnRpbnVlIjogQywgIm5ldyI6IEMsICJkZWxldGUiOiBDLCAidGhyb3ciOiBDLA0KICAg
			ICAgInZhciI6IGt3KCJ2YXIiKSwgImNvbnN0Ijoga3coInZhciIpLCAibGV0Ijoga3coInZhciIp
			LA0KICAgICAgImZ1bmN0aW9uIjoga3coImZ1bmN0aW9uIiksICJjYXRjaCI6IGt3KCJjYXRjaCIp
			LA0KICAgICAgImZvciI6IGt3KCJmb3IiKSwgInN3aXRjaCI6IGt3KCJzd2l0Y2giKSwgImNhc2Ui
			OiBrdygiY2FzZSIpLCAiZGVmYXVsdCI6IGt3KCJkZWZhdWx0IiksDQogICAgICAiaW4iOiBvcGVy
			YXRvciwgInR5cGVvZiI6IG9wZXJhdG9yLCAiaW5zdGFuY2VvZiI6IG9wZXJhdG9yLA0KICAgICAg
			InRydWUiOiBhdG9tLCAiZmFsc2UiOiBhdG9tLCAibnVsbCI6IGF0b20sICJ1bmRlZmluZWQiOiBh
			dG9tLCAiTmFOIjogYXRvbSwgIkluZmluaXR5IjogYXRvbQ0KICAgIH07DQogIH0oKTsNCg0KICB2
			YXIgaXNPcGVyYXRvckNoYXIgPSAvWytcLSomJT08PiE/fF0vOw0KDQogIGZ1bmN0aW9uIGNoYWlu
			KHN0cmVhbSwgc3RhdGUsIGYpIHsNCiAgICBzdGF0ZS50b2tlbml6ZSA9IGY7DQogICAgcmV0dXJu
			IGYoc3RyZWFtLCBzdGF0ZSk7DQogIH0NCg0KICBmdW5jdGlvbiBuZXh0VW50aWxVbmVzY2FwZWQo
			c3RyZWFtLCBlbmQpIHsNCiAgICB2YXIgZXNjYXBlZCA9IGZhbHNlLCBuZXh0Ow0KICAgIHdoaWxl
			ICgobmV4dCA9IHN0cmVhbS5uZXh0KCkpICE9IG51bGwpIHsNCiAgICAgIGlmIChuZXh0ID09IGVu
			ZCAmJiAhZXNjYXBlZCkNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgZXNjYXBlZCA9ICFl
			c2NhcGVkICYmIG5leHQgPT0gIlxcIjsNCiAgICB9DQogICAgcmV0dXJuIGVzY2FwZWQ7DQogIH0N
			Cg0KICAvLyBVc2VkIGFzIHNjcmF0Y2ggdmFyaWFibGVzIHRvIGNvbW11bmljYXRlIG11bHRpcGxl
			IHZhbHVlcyB3aXRob3V0DQogIC8vIGNvbnNpbmcgdXAgdG9ucyBvZiBvYmplY3RzLg0KICB2YXIg
			dHlwZSwgY29udGVudDsNCiAgZnVuY3Rpb24gcmV0KHRwLCBzdHlsZSwgY29udCkgew0KICAgIHR5
			cGUgPSB0cDsgY29udGVudCA9IGNvbnQ7DQogICAgcmV0dXJuIHN0eWxlOw0KICB9DQoNCiAgZnVu
			Y3Rpb24ganNUb2tlbkJhc2Uoc3RyZWFtLCBzdGF0ZSkgew0KICAgIHZhciBjaCA9IHN0cmVhbS5u
			ZXh0KCk7DQogICAgaWYgKGNoID09ICciJyB8fCBjaCA9PSAiJyIpDQogICAgICByZXR1cm4gY2hh
			aW4oc3RyZWFtLCBzdGF0ZSwganNUb2tlblN0cmluZyhjaCkpOw0KICAgIGVsc2UgaWYgKC9bXFtc
			XXt9XChcKSw7XDpcLl0vLnRlc3QoY2gpKQ0KICAgICAgcmV0dXJuIHJldChjaCk7DQogICAgZWxz
			ZSBpZiAoY2ggPT0gIjAiICYmIHN0cmVhbS5lYXQoL3gvaSkpIHsNCiAgICAgIHN0cmVhbS5lYXRX
			aGlsZSgvW1xkYS1mXS9pKTsNCiAgICAgIHJldHVybiByZXQoIm51bWJlciIsICJudW1iZXIiKTsN
			CiAgICB9ICAgICAgDQogICAgZWxzZSBpZiAoL1xkLy50ZXN0KGNoKSkgew0KICAgICAgc3RyZWFt
			Lm1hdGNoKC9eXGQqKD86XC5cZCopPyg/OltlRV1bK1wtXT9cZCspPy8pOw0KICAgICAgcmV0dXJu
			IHJldCgibnVtYmVyIiwgIm51bWJlciIpOw0KICAgIH0NCiAgICBlbHNlIGlmIChjaCA9PSAiLyIp
			IHsNCiAgICAgIGlmIChzdHJlYW0uZWF0KCIqIikpIHsNCiAgICAgICAgcmV0dXJuIGNoYWluKHN0
			cmVhbSwgc3RhdGUsIGpzVG9rZW5Db21tZW50KTsNCiAgICAgIH0NCiAgICAgIGVsc2UgaWYgKHN0
			cmVhbS5lYXQoIi8iKSkgew0KICAgICAgICBzdHJlYW0uc2tpcFRvRW5kKCk7DQogICAgICAgIHJl
			dHVybiByZXQoImNvbW1lbnQiLCAiY29tbWVudCIpOw0KICAgICAgfQ0KICAgICAgZWxzZSBpZiAo
			c3RhdGUucmVBbGxvd2VkKSB7DQogICAgICAgIG5leHRVbnRpbFVuZXNjYXBlZChzdHJlYW0sICIv
			Iik7DQogICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvW2dpbXldLyk7IC8vICd5JyBpcyAic3RpY2t5
			IiBvcHRpb24gaW4gTW96aWxsYQ0KICAgICAgICByZXR1cm4gcmV0KCJyZWdleHAiLCAic3RyaW5n
			LTIiKTsNCiAgICAgIH0NCiAgICAgIGVsc2Ugew0KICAgICAgICBzdHJlYW0uZWF0V2hpbGUoaXNP
			cGVyYXRvckNoYXIpOw0KICAgICAgICByZXR1cm4gcmV0KCJvcGVyYXRvciIsIG51bGwsIHN0cmVh
			bS5jdXJyZW50KCkpOw0KICAgICAgfQ0KICAgIH0NCiAgICBlbHNlIGlmIChjaCA9PSAiIyIpIHsN
			CiAgICAgICAgc3RyZWFtLnNraXBUb0VuZCgpOw0KICAgICAgICByZXR1cm4gcmV0KCJlcnJvciIs
			ICJlcnJvciIpOw0KICAgIH0NCiAgICBlbHNlIGlmIChpc09wZXJhdG9yQ2hhci50ZXN0KGNoKSkg
			ew0KICAgICAgc3RyZWFtLmVhdFdoaWxlKGlzT3BlcmF0b3JDaGFyKTsNCiAgICAgIHJldHVybiBy
			ZXQoIm9wZXJhdG9yIiwgbnVsbCwgc3RyZWFtLmN1cnJlbnQoKSk7DQogICAgfQ0KICAgIGVsc2Ug
			ew0KICAgICAgc3RyZWFtLmVhdFdoaWxlKC9bXHdcJF9dLyk7DQogICAgICB2YXIgd29yZCA9IHN0
			cmVhbS5jdXJyZW50KCksIGtub3duID0ga2V5d29yZHMucHJvcGVydHlJc0VudW1lcmFibGUod29y
			ZCkgJiYga2V5d29yZHNbd29yZF07DQogICAgICByZXR1cm4gKGtub3duICYmIHN0YXRlLmt3QWxs
			b3dlZCkgPyByZXQoa25vd24udHlwZSwga25vd24uc3R5bGUsIHdvcmQpIDoNCiAgICAgICAgICAg
			ICAgICAgICAgIHJldCgidmFyaWFibGUiLCAidmFyaWFibGUiLCB3b3JkKTsNCiAgICB9DQogIH0N
			Cg0KICBmdW5jdGlvbiBqc1Rva2VuU3RyaW5nKHF1b3RlKSB7DQogICAgcmV0dXJuIGZ1bmN0aW9u
			KHN0cmVhbSwgc3RhdGUpIHsNCiAgICAgIGlmICghbmV4dFVudGlsVW5lc2NhcGVkKHN0cmVhbSwg
			cXVvdGUpKQ0KICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IGpzVG9rZW5CYXNlOw0KICAgICAgcmV0
			dXJuIHJldCgic3RyaW5nIiwgInN0cmluZyIpOw0KICAgIH07DQogIH0NCg0KICBmdW5jdGlvbiBq
			c1Rva2VuQ29tbWVudChzdHJlYW0sIHN0YXRlKSB7DQogICAgdmFyIG1heWJlRW5kID0gZmFsc2Us
			IGNoOw0KICAgIHdoaWxlIChjaCA9IHN0cmVhbS5uZXh0KCkpIHsNCiAgICAgIGlmIChjaCA9PSAi
			LyIgJiYgbWF5YmVFbmQpIHsNCiAgICAgICAgc3RhdGUudG9rZW5pemUgPSBqc1Rva2VuQmFzZTsN
			CiAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgICBtYXliZUVuZCA9IChjaCA9PSAiKiIpOw0K
			ICAgIH0NCiAgICByZXR1cm4gcmV0KCJjb21tZW50IiwgImNvbW1lbnQiKTsNCiAgfQ0KDQogIC8v
			IFBhcnNlcg0KDQogIHZhciBhdG9taWNUeXBlcyA9IHsiYXRvbSI6IHRydWUsICJudW1iZXIiOiB0
			cnVlLCAidmFyaWFibGUiOiB0cnVlLCAic3RyaW5nIjogdHJ1ZSwgInJlZ2V4cCI6IHRydWV9Ow0K
			DQogIGZ1bmN0aW9uIEpTTGV4aWNhbChpbmRlbnRlZCwgY29sdW1uLCB0eXBlLCBhbGlnbiwgcHJl
			diwgaW5mbykgew0KICAgIHRoaXMuaW5kZW50ZWQgPSBpbmRlbnRlZDsNCiAgICB0aGlzLmNvbHVt
			biA9IGNvbHVtbjsNCiAgICB0aGlzLnR5cGUgPSB0eXBlOw0KICAgIHRoaXMucHJldiA9IHByZXY7
			DQogICAgdGhpcy5pbmZvID0gaW5mbzsNCiAgICBpZiAoYWxpZ24gIT0gbnVsbCkgdGhpcy5hbGln
			biA9IGFsaWduOw0KICB9DQoNCiAgZnVuY3Rpb24gaW5TY29wZShzdGF0ZSwgdmFybmFtZSkgew0K
			ICAgIGZvciAodmFyIHYgPSBzdGF0ZS5sb2NhbFZhcnM7IHY7IHYgPSB2Lm5leHQpDQogICAgICBp
			ZiAodi5uYW1lID09IHZhcm5hbWUpIHJldHVybiB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gcGFy
			c2VKUyhzdGF0ZSwgc3R5bGUsIHR5cGUsIGNvbnRlbnQsIHN0cmVhbSkgew0KICAgIHZhciBjYyA9
			IHN0YXRlLmNjOw0KICAgIC8vIENvbW11bmljYXRlIG91ciBjb250ZXh0IHRvIHRoZSBjb21iaW5h
			dG9ycy4NCiAgICAvLyAoTGVzcyB3YXN0ZWZ1bCB0aGFuIGNvbnNpbmcgdXAgYSBodW5kcmVkIGNs
			b3N1cmVzIG9uIGV2ZXJ5IGNhbGwuKQ0KICAgIGN4LnN0YXRlID0gc3RhdGU7IGN4LnN0cmVhbSA9
			IHN0cmVhbTsgY3gubWFya2VkID0gbnVsbCwgY3guY2MgPSBjYzsNCiAgDQogICAgaWYgKCFzdGF0
			ZS5sZXhpY2FsLmhhc093blByb3BlcnR5KCJhbGlnbiIpKQ0KICAgICAgc3RhdGUubGV4aWNhbC5h
			bGlnbiA9IHRydWU7DQoNCiAgICB3aGlsZSh0cnVlKSB7DQogICAgICB2YXIgY29tYmluYXRvciA9
			IGNjLmxlbmd0aCA/IGNjLnBvcCgpIDoganNvbk1vZGUgPyBleHByZXNzaW9uIDogc3RhdGVtZW50
			Ow0KICAgICAgaWYgKGNvbWJpbmF0b3IodHlwZSwgY29udGVudCkpIHsNCiAgICAgICAgd2hpbGUo
			Y2MubGVuZ3RoICYmIGNjW2NjLmxlbmd0aCAtIDFdLmxleCkNCiAgICAgICAgICBjYy5wb3AoKSgp
			Ow0KICAgICAgICBpZiAoY3gubWFya2VkKSByZXR1cm4gY3gubWFya2VkOw0KICAgICAgICBpZiAo
			dHlwZSA9PSAidmFyaWFibGUiICYmIGluU2NvcGUoc3RhdGUsIGNvbnRlbnQpKSByZXR1cm4gInZh
			cmlhYmxlLTIiOw0KICAgICAgICByZXR1cm4gc3R5bGU7DQogICAgICB9DQogICAgfQ0KICB9DQoN
			CiAgLy8gQ29tYmluYXRvciB1dGlscw0KDQogIHZhciBjeCA9IHtzdGF0ZTogbnVsbCwgY29sdW1u
			OiBudWxsLCBtYXJrZWQ6IG51bGwsIGNjOiBudWxsfTsNCiAgZnVuY3Rpb24gcGFzcygpIHsNCiAg
			ICBmb3IgKHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBjeC5jYy5w
			dXNoKGFyZ3VtZW50c1tpXSk7DQogIH0NCiAgZnVuY3Rpb24gY29udCgpIHsNCiAgICBwYXNzLmFw
			cGx5KG51bGwsIGFyZ3VtZW50cyk7DQogICAgcmV0dXJuIHRydWU7DQogIH0NCiAgZnVuY3Rpb24g
			cmVnaXN0ZXIodmFybmFtZSkgew0KICAgIHZhciBzdGF0ZSA9IGN4LnN0YXRlOw0KICAgIGlmIChz
			dGF0ZS5jb250ZXh0KSB7DQogICAgICBjeC5tYXJrZWQgPSAiZGVmIjsNCiAgICAgIGZvciAodmFy
			IHYgPSBzdGF0ZS5sb2NhbFZhcnM7IHY7IHYgPSB2Lm5leHQpDQogICAgICAgIGlmICh2Lm5hbWUg
			PT0gdmFybmFtZSkgcmV0dXJuOw0KICAgICAgc3RhdGUubG9jYWxWYXJzID0ge25hbWU6IHZhcm5h
			bWUsIG5leHQ6IHN0YXRlLmxvY2FsVmFyc307DQogICAgfQ0KICB9DQoNCiAgLy8gQ29tYmluYXRv
			cnMNCg0KICB2YXIgZGVmYXVsdFZhcnMgPSB7bmFtZTogInRoaXMiLCBuZXh0OiB7bmFtZTogImFy
			Z3VtZW50cyJ9fTsNCiAgZnVuY3Rpb24gcHVzaGNvbnRleHQoKSB7DQogICAgaWYgKCFjeC5zdGF0
			ZS5jb250ZXh0KSBjeC5zdGF0ZS5sb2NhbFZhcnMgPSBkZWZhdWx0VmFyczsNCiAgICBjeC5zdGF0
			ZS5jb250ZXh0ID0ge3ByZXY6IGN4LnN0YXRlLmNvbnRleHQsIHZhcnM6IGN4LnN0YXRlLmxvY2Fs
			VmFyc307DQogIH0NCiAgZnVuY3Rpb24gcG9wY29udGV4dCgpIHsNCiAgICBjeC5zdGF0ZS5sb2Nh
			bFZhcnMgPSBjeC5zdGF0ZS5jb250ZXh0LnZhcnM7DQogICAgY3guc3RhdGUuY29udGV4dCA9IGN4
			LnN0YXRlLmNvbnRleHQucHJldjsNCiAgfQ0KICBmdW5jdGlvbiBwdXNobGV4KHR5cGUsIGluZm8p
			IHsNCiAgICB2YXIgcmVzdWx0ID0gZnVuY3Rpb24oKSB7DQogICAgICB2YXIgc3RhdGUgPSBjeC5z
			dGF0ZTsNCiAgICAgIHN0YXRlLmxleGljYWwgPSBuZXcgSlNMZXhpY2FsKHN0YXRlLmluZGVudGVk
			LCBjeC5zdHJlYW0uY29sdW1uKCksIHR5cGUsIG51bGwsIHN0YXRlLmxleGljYWwsIGluZm8pDQog
			ICAgfTsNCiAgICByZXN1bHQubGV4ID0gdHJ1ZTsNCiAgICByZXR1cm4gcmVzdWx0Ow0KICB9DQog
			IGZ1bmN0aW9uIHBvcGxleCgpIHsNCiAgICB2YXIgc3RhdGUgPSBjeC5zdGF0ZTsNCiAgICBpZiAo
			c3RhdGUubGV4aWNhbC5wcmV2KSB7DQogICAgICBpZiAoc3RhdGUubGV4aWNhbC50eXBlID09ICIp
			IikNCiAgICAgICAgc3RhdGUuaW5kZW50ZWQgPSBzdGF0ZS5sZXhpY2FsLmluZGVudGVkOw0KICAg
			ICAgc3RhdGUubGV4aWNhbCA9IHN0YXRlLmxleGljYWwucHJldjsNCiAgICB9DQogIH0NCiAgcG9w
			bGV4LmxleCA9IHRydWU7DQoNCiAgZnVuY3Rpb24gZXhwZWN0KHdhbnRlZCkgew0KICAgIHJldHVy
			biBmdW5jdGlvbiBleHBlY3RpbmcodHlwZSkgew0KICAgICAgaWYgKHR5cGUgPT0gd2FudGVkKSBy
			ZXR1cm4gY29udCgpOw0KICAgICAgZWxzZSBpZiAod2FudGVkID09ICI7IikgcmV0dXJuIHBhc3Mo
			KTsNCiAgICAgIGVsc2UgcmV0dXJuIGNvbnQoYXJndW1lbnRzLmNhbGxlZSk7DQogICAgfTsNCiAg
			fQ0KDQogIGZ1bmN0aW9uIHN0YXRlbWVudCh0eXBlKSB7DQogICAgaWYgKHR5cGUgPT0gInZhciIp
			IHJldHVybiBjb250KHB1c2hsZXgoInZhcmRlZiIpLCB2YXJkZWYxLCBleHBlY3QoIjsiKSwgcG9w
			bGV4KTsNCiAgICBpZiAodHlwZSA9PSAia2V5d29yZCBhIikgcmV0dXJuIGNvbnQocHVzaGxleCgi
			Zm9ybSIpLCBleHByZXNzaW9uLCBzdGF0ZW1lbnQsIHBvcGxleCk7DQogICAgaWYgKHR5cGUgPT0g
			ImtleXdvcmQgYiIpIHJldHVybiBjb250KHB1c2hsZXgoImZvcm0iKSwgc3RhdGVtZW50LCBwb3Bs
			ZXgpOw0KICAgIGlmICh0eXBlID09ICJ7IikgcmV0dXJuIGNvbnQocHVzaGxleCgifSIpLCBibG9j
			aywgcG9wbGV4KTsNCiAgICBpZiAodHlwZSA9PSAiOyIpIHJldHVybiBjb250KCk7DQogICAgaWYg
			KHR5cGUgPT0gImZ1bmN0aW9uIikgcmV0dXJuIGNvbnQoZnVuY3Rpb25kZWYpOw0KICAgIGlmICh0
			eXBlID09ICJmb3IiKSByZXR1cm4gY29udChwdXNobGV4KCJmb3JtIiksIGV4cGVjdCgiKCIpLCBw
			dXNobGV4KCIpIiksIGZvcnNwZWMxLCBleHBlY3QoIikiKSwNCiAgICAgICAgICAgICAgICAgICAg
			ICAgICAgICAgICAgICAgICAgcG9wbGV4LCBzdGF0ZW1lbnQsIHBvcGxleCk7DQogICAgaWYgKHR5
			cGUgPT0gInZhcmlhYmxlIikgcmV0dXJuIGNvbnQocHVzaGxleCgic3RhdCIpLCBtYXliZWxhYmVs
			KTsNCiAgICBpZiAodHlwZSA9PSAic3dpdGNoIikgcmV0dXJuIGNvbnQocHVzaGxleCgiZm9ybSIp
			LCBleHByZXNzaW9uLCBwdXNobGV4KCJ9IiwgInN3aXRjaCIpLCBleHBlY3QoInsiKSwNCiAgICAg
			ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2ssIHBvcGxleCwgcG9wbGV4
			KTsNCiAgICBpZiAodHlwZSA9PSAiY2FzZSIpIHJldHVybiBjb250KGV4cHJlc3Npb24sIGV4cGVj
			dCgiOiIpKTsNCiAgICBpZiAodHlwZSA9PSAiZGVmYXVsdCIpIHJldHVybiBjb250KGV4cGVjdCgi
			OiIpKTsNCiAgICBpZiAodHlwZSA9PSAiY2F0Y2giKSByZXR1cm4gY29udChwdXNobGV4KCJmb3Jt
			IiksIHB1c2hjb250ZXh0LCBleHBlY3QoIigiKSwgZnVuYXJnLCBleHBlY3QoIikiKSwNCiAgICAg
			ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZW1lbnQsIHBvcGxleCwgcG9w
			Y29udGV4dCk7DQogICAgcmV0dXJuIHBhc3MocHVzaGxleCgic3RhdCIpLCBleHByZXNzaW9uLCBl
			eHBlY3QoIjsiKSwgcG9wbGV4KTsNCiAgfQ0KICBmdW5jdGlvbiBleHByZXNzaW9uKHR5cGUpIHsN
			CiAgICBpZiAoYXRvbWljVHlwZXMuaGFzT3duUHJvcGVydHkodHlwZSkpIHJldHVybiBjb250KG1h
			eWJlb3BlcmF0b3IpOw0KICAgIGlmICh0eXBlID09ICJmdW5jdGlvbiIpIHJldHVybiBjb250KGZ1
			bmN0aW9uZGVmKTsNCiAgICBpZiAodHlwZSA9PSAia2V5d29yZCBjIikgcmV0dXJuIGNvbnQobWF5
			YmVleHByZXNzaW9uKTsNCiAgICBpZiAodHlwZSA9PSAiKCIpIHJldHVybiBjb250KHB1c2hsZXgo
			IikiKSwgbWF5YmVleHByZXNzaW9uLCBleHBlY3QoIikiKSwgcG9wbGV4LCBtYXliZW9wZXJhdG9y
			KTsNCiAgICBpZiAodHlwZSA9PSAib3BlcmF0b3IiKSByZXR1cm4gY29udChleHByZXNzaW9uKTsN
			CiAgICBpZiAodHlwZSA9PSAiWyIpIHJldHVybiBjb250KHB1c2hsZXgoIl0iKSwgY29tbWFzZXAo
			ZXhwcmVzc2lvbiwgIl0iKSwgcG9wbGV4LCBtYXliZW9wZXJhdG9yKTsNCiAgICBpZiAodHlwZSA9
			PSAieyIpIHJldHVybiBjb250KHB1c2hsZXgoIn0iKSwgY29tbWFzZXAob2JqcHJvcCwgIn0iKSwg
			cG9wbGV4LCBtYXliZW9wZXJhdG9yKTsNCiAgICByZXR1cm4gY29udCgpOw0KICB9DQogIGZ1bmN0
			aW9uIG1heWJlZXhwcmVzc2lvbih0eXBlKSB7DQogICAgaWYgKHR5cGUubWF0Y2goL1s7XH1cKVxd
			LF0vKSkgcmV0dXJuIHBhc3MoKTsNCiAgICByZXR1cm4gcGFzcyhleHByZXNzaW9uKTsNCiAgfQ0K
			ICAgIA0KICBmdW5jdGlvbiBtYXliZW9wZXJhdG9yKHR5cGUsIHZhbHVlKSB7DQogICAgaWYgKHR5
			cGUgPT0gIm9wZXJhdG9yIiAmJiAvXCtcK3wtLS8udGVzdCh2YWx1ZSkpIHJldHVybiBjb250KG1h
			eWJlb3BlcmF0b3IpOw0KICAgIGlmICh0eXBlID09ICJvcGVyYXRvciIpIHJldHVybiBjb250KGV4
			cHJlc3Npb24pOw0KICAgIGlmICh0eXBlID09ICI7IikgcmV0dXJuOw0KICAgIGlmICh0eXBlID09
			ICIoIikgcmV0dXJuIGNvbnQocHVzaGxleCgiKSIpLCBjb21tYXNlcChleHByZXNzaW9uLCAiKSIp
			LCBwb3BsZXgsIG1heWJlb3BlcmF0b3IpOw0KICAgIGlmICh0eXBlID09ICIuIikgcmV0dXJuIGNv
			bnQocHJvcGVydHksIG1heWJlb3BlcmF0b3IpOw0KICAgIGlmICh0eXBlID09ICJbIikgcmV0dXJu
			IGNvbnQocHVzaGxleCgiXSIpLCBleHByZXNzaW9uLCBleHBlY3QoIl0iKSwgcG9wbGV4LCBtYXli
			ZW9wZXJhdG9yKTsNCiAgfQ0KICBmdW5jdGlvbiBtYXliZWxhYmVsKHR5cGUpIHsNCiAgICBpZiAo
			dHlwZSA9PSAiOiIpIHJldHVybiBjb250KHBvcGxleCwgc3RhdGVtZW50KTsNCiAgICByZXR1cm4g
			cGFzcyhtYXliZW9wZXJhdG9yLCBleHBlY3QoIjsiKSwgcG9wbGV4KTsNCiAgfQ0KICBmdW5jdGlv
			biBwcm9wZXJ0eSh0eXBlKSB7DQogICAgaWYgKHR5cGUgPT0gInZhcmlhYmxlIikge2N4Lm1hcmtl
			ZCA9ICJwcm9wZXJ0eSI7IHJldHVybiBjb250KCk7fQ0KICB9DQogIGZ1bmN0aW9uIG9ianByb3Ao
			dHlwZSkgew0KICAgIGlmICh0eXBlID09ICJ2YXJpYWJsZSIpIGN4Lm1hcmtlZCA9ICJwcm9wZXJ0
			eSI7DQogICAgaWYgKGF0b21pY1R5cGVzLmhhc093blByb3BlcnR5KHR5cGUpKSByZXR1cm4gY29u
			dChleHBlY3QoIjoiKSwgZXhwcmVzc2lvbik7DQogIH0NCiAgZnVuY3Rpb24gY29tbWFzZXAod2hh
			dCwgZW5kKSB7DQogICAgZnVuY3Rpb24gcHJvY2VlZCh0eXBlKSB7DQogICAgICBpZiAodHlwZSA9
			PSAiLCIpIHJldHVybiBjb250KHdoYXQsIHByb2NlZWQpOw0KICAgICAgaWYgKHR5cGUgPT0gZW5k
			KSByZXR1cm4gY29udCgpOw0KICAgICAgcmV0dXJuIGNvbnQoZXhwZWN0KGVuZCkpOw0KICAgIH0N
			CiAgICByZXR1cm4gZnVuY3Rpb24gY29tbWFTZXBhcmF0ZWQodHlwZSkgew0KICAgICAgaWYgKHR5
			cGUgPT0gZW5kKSByZXR1cm4gY29udCgpOw0KICAgICAgZWxzZSByZXR1cm4gcGFzcyh3aGF0LCBw
			cm9jZWVkKTsNCiAgICB9Ow0KICB9DQogIGZ1bmN0aW9uIGJsb2NrKHR5cGUpIHsNCiAgICBpZiAo
			dHlwZSA9PSAifSIpIHJldHVybiBjb250KCk7DQogICAgcmV0dXJuIHBhc3Moc3RhdGVtZW50LCBi
			bG9jayk7DQogIH0NCiAgZnVuY3Rpb24gdmFyZGVmMSh0eXBlLCB2YWx1ZSkgew0KICAgIGlmICh0
			eXBlID09ICJ2YXJpYWJsZSIpe3JlZ2lzdGVyKHZhbHVlKTsgcmV0dXJuIGNvbnQodmFyZGVmMik7
			fQ0KICAgIHJldHVybiBjb250KCk7DQogIH0NCiAgZnVuY3Rpb24gdmFyZGVmMih0eXBlLCB2YWx1
			ZSkgew0KICAgIGlmICh2YWx1ZSA9PSAiPSIpIHJldHVybiBjb250KGV4cHJlc3Npb24sIHZhcmRl
			ZjIpOw0KICAgIGlmICh0eXBlID09ICIsIikgcmV0dXJuIGNvbnQodmFyZGVmMSk7DQogIH0NCiAg
			ZnVuY3Rpb24gZm9yc3BlYzEodHlwZSkgew0KICAgIGlmICh0eXBlID09ICJ2YXIiKSByZXR1cm4g
			Y29udCh2YXJkZWYxLCBmb3JzcGVjMik7DQogICAgaWYgKHR5cGUgPT0gIjsiKSByZXR1cm4gcGFz
			cyhmb3JzcGVjMik7DQogICAgaWYgKHR5cGUgPT0gInZhcmlhYmxlIikgcmV0dXJuIGNvbnQoZm9y
			bWF5YmVpbik7DQogICAgcmV0dXJuIHBhc3MoZm9yc3BlYzIpOw0KICB9DQogIGZ1bmN0aW9uIGZv
			cm1heWJlaW4odHlwZSwgdmFsdWUpIHsNCiAgICBpZiAodmFsdWUgPT0gImluIikgcmV0dXJuIGNv
			bnQoZXhwcmVzc2lvbik7DQogICAgcmV0dXJuIGNvbnQobWF5YmVvcGVyYXRvciwgZm9yc3BlYzIp
			Ow0KICB9DQogIGZ1bmN0aW9uIGZvcnNwZWMyKHR5cGUsIHZhbHVlKSB7DQogICAgaWYgKHR5cGUg
			PT0gIjsiKSByZXR1cm4gY29udChmb3JzcGVjMyk7DQogICAgaWYgKHZhbHVlID09ICJpbiIpIHJl
			dHVybiBjb250KGV4cHJlc3Npb24pOw0KICAgIHJldHVybiBjb250KGV4cHJlc3Npb24sIGV4cGVj
			dCgiOyIpLCBmb3JzcGVjMyk7DQogIH0NCiAgZnVuY3Rpb24gZm9yc3BlYzModHlwZSkgew0KICAg
			IGlmICh0eXBlICE9ICIpIikgY29udChleHByZXNzaW9uKTsNCiAgfQ0KICBmdW5jdGlvbiBmdW5j
			dGlvbmRlZih0eXBlLCB2YWx1ZSkgew0KICAgIGlmICh0eXBlID09ICJ2YXJpYWJsZSIpIHtyZWdp
			c3Rlcih2YWx1ZSk7IHJldHVybiBjb250KGZ1bmN0aW9uZGVmKTt9DQogICAgaWYgKHR5cGUgPT0g
			IigiKSByZXR1cm4gY29udChwdXNobGV4KCIpIiksIHB1c2hjb250ZXh0LCBjb21tYXNlcChmdW5h
			cmcsICIpIiksIHBvcGxleCwgc3RhdGVtZW50LCBwb3Bjb250ZXh0KTsNCiAgfQ0KICBmdW5jdGlv
			biBmdW5hcmcodHlwZSwgdmFsdWUpIHsNCiAgICBpZiAodHlwZSA9PSAidmFyaWFibGUiKSB7cmVn
			aXN0ZXIodmFsdWUpOyByZXR1cm4gY29udCgpO30NCiAgfQ0KDQogIC8vIEludGVyZmFjZQ0KDQog
			IHJldHVybiB7DQogICAgc3RhcnRTdGF0ZTogZnVuY3Rpb24oYmFzZWNvbHVtbikgew0KICAgICAg
			cmV0dXJuIHsNCiAgICAgICAgdG9rZW5pemU6IGpzVG9rZW5CYXNlLA0KICAgICAgICByZUFsbG93
			ZWQ6IHRydWUsDQogICAgICAgIGt3QWxsb3dlZDogdHJ1ZSwNCiAgICAgICAgY2M6IFtdLA0KICAg
			ICAgICBsZXhpY2FsOiBuZXcgSlNMZXhpY2FsKChiYXNlY29sdW1uIHx8IDApIC0gaW5kZW50VW5p
			dCwgMCwgImJsb2NrIiwgZmFsc2UpLA0KICAgICAgICBsb2NhbFZhcnM6IG51bGwsDQogICAgICAg
			IGNvbnRleHQ6IG51bGwsDQogICAgICAgIGluZGVudGVkOiAwDQogICAgICB9Ow0KICAgIH0sDQoN
			CiAgICB0b2tlbjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkgew0KICAgICAgaWYgKHN0cmVhbS5z
			b2woKSkgew0KICAgICAgICBpZiAoIXN0YXRlLmxleGljYWwuaGFzT3duUHJvcGVydHkoImFsaWdu
			IikpDQogICAgICAgICAgc3RhdGUubGV4aWNhbC5hbGlnbiA9IGZhbHNlOw0KICAgICAgICBzdGF0
			ZS5pbmRlbnRlZCA9IHN0cmVhbS5pbmRlbnRhdGlvbigpOw0KICAgICAgfQ0KICAgICAgaWYgKHN0
			cmVhbS5lYXRTcGFjZSgpKSByZXR1cm4gbnVsbDsNCiAgICAgIHZhciBzdHlsZSA9IHN0YXRlLnRv
			a2VuaXplKHN0cmVhbSwgc3RhdGUpOw0KICAgICAgaWYgKHR5cGUgPT0gImNvbW1lbnQiKSByZXR1
			cm4gc3R5bGU7DQogICAgICBzdGF0ZS5yZUFsbG93ZWQgPSB0eXBlID09ICJvcGVyYXRvciIgfHwg
			dHlwZSA9PSAia2V5d29yZCBjIiB8fCB0eXBlLm1hdGNoKC9eW1xbe31cKCw7Ol0kLyk7DQogICAg
			ICBzdGF0ZS5rd0FsbG93ZWQgPSB0eXBlICE9ICcuJzsNCiAgICAgIHJldHVybiBwYXJzZUpTKHN0
			YXRlLCBzdHlsZSwgdHlwZSwgY29udGVudCwgc3RyZWFtKTsNCiAgICB9LA0KDQogICAgaW5kZW50
			OiBmdW5jdGlvbihzdGF0ZSwgdGV4dEFmdGVyKSB7DQogICAgICBpZiAoc3RhdGUudG9rZW5pemUg
			IT0ganNUb2tlbkJhc2UpIHJldHVybiAwOw0KICAgICAgdmFyIGZpcnN0Q2hhciA9IHRleHRBZnRl
			ciAmJiB0ZXh0QWZ0ZXIuY2hhckF0KDApLCBsZXhpY2FsID0gc3RhdGUubGV4aWNhbCwNCiAgICAg
			ICAgICB0eXBlID0gbGV4aWNhbC50eXBlLCBjbG9zaW5nID0gZmlyc3RDaGFyID09IHR5cGU7DQog
			ICAgICBpZiAodHlwZSA9PSAidmFyZGVmIikgcmV0dXJuIGxleGljYWwuaW5kZW50ZWQgKyA0Ow0K
			ICAgICAgZWxzZSBpZiAodHlwZSA9PSAiZm9ybSIgJiYgZmlyc3RDaGFyID09ICJ7IikgcmV0dXJu
			IGxleGljYWwuaW5kZW50ZWQ7DQogICAgICBlbHNlIGlmICh0eXBlID09ICJzdGF0IiB8fCB0eXBl
			ID09ICJmb3JtIikgcmV0dXJuIGxleGljYWwuaW5kZW50ZWQgKyBpbmRlbnRVbml0Ow0KICAgICAg
			ZWxzZSBpZiAobGV4aWNhbC5pbmZvID09ICJzd2l0Y2giICYmICFjbG9zaW5nKQ0KICAgICAgICBy
			ZXR1cm4gbGV4aWNhbC5pbmRlbnRlZCArICgvXig/OmNhc2V8ZGVmYXVsdClcYi8udGVzdCh0ZXh0
			QWZ0ZXIpID8gaW5kZW50VW5pdCA6IDIgKiBpbmRlbnRVbml0KTsNCiAgICAgIGVsc2UgaWYgKGxl
			eGljYWwuYWxpZ24pIHJldHVybiBsZXhpY2FsLmNvbHVtbiArIChjbG9zaW5nID8gMCA6IDEpOw0K
			ICAgICAgZWxzZSByZXR1cm4gbGV4aWNhbC5pbmRlbnRlZCArIChjbG9zaW5nID8gMCA6IGluZGVu
			dFVuaXQpOw0KICAgIH0sDQoNCiAgICBlbGVjdHJpY0NoYXJzOiAiOnt9Ig0KICB9Ow0KfSk7DQoN
			CkNvZGVNaXJyb3IuZGVmaW5lTUlNRSgidGV4dC9qYXZhc2NyaXB0IiwgImphdmFzY3JpcHQiKTsN
			CkNvZGVNaXJyb3IuZGVmaW5lTUlNRSgiYXBwbGljYXRpb24vanNvbiIsIHtuYW1lOiAiamF2YXNj
			cmlwdCIsIGpzb246IHRydWV9KTsNCg0KQ29kZU1pcnJvci5kZWZpbmVNb2RlKCJodG1sIiwgZnVu
			Y3Rpb24oY29uZmlnLCBwYXJzZXJDb25maWcpIHsNCiAgdmFyIGh0bWxNb2RlID0gQ29kZU1pcnJv
			ci5nZXRNb2RlKGNvbmZpZywge25hbWU6ICJ4bWwiLCBodG1sTW9kZTogdHJ1ZX0pOw0KICB2YXIg
			anNNb2RlID0gQ29kZU1pcnJvci5nZXRNb2RlKGNvbmZpZywgImphdmFzY3JpcHQiKTsNCiAgdmFy
			IGNzc01vZGUgPSBDb2RlTWlycm9yLmdldE1vZGUoY29uZmlnLCAiY3NzIik7DQoNCiAgZnVuY3Rp
			b24gaHRtbChzdHJlYW0sIHN0YXRlKSB7DQogICAgdmFyIHN0eWxlID0gaHRtbE1vZGUudG9rZW4o
			c3RyZWFtLCBzdGF0ZS5odG1sU3RhdGUpOw0KICAgIGlmIChzdHlsZSA9PSAidGFnIiAmJiBzdHJl
			YW0uY3VycmVudCgpID09ICI+IiAmJiBzdGF0ZS5odG1sU3RhdGUuY29udGV4dCkgew0KICAgICAg
			aWYgKC9ec2NyaXB0JC9pLnRlc3Qoc3RhdGUuaHRtbFN0YXRlLmNvbnRleHQudGFnTmFtZSkpIHsN
			CiAgICAgICAgc3RhdGUudG9rZW4gPSBqYXZhc2NyaXB0Ow0KICAgICAgICBzdGF0ZS5sb2NhbFN0
			YXRlID0ganNNb2RlLnN0YXJ0U3RhdGUoaHRtbE1vZGUuaW5kZW50KHN0YXRlLmh0bWxTdGF0ZSwg
			IiIpKTsNCiAgICAgICAgc3RhdGUubW9kZSA9ICJqYXZhc2NyaXB0IjsNCiAgICAgIH0NCiAgICAg
			IGVsc2UgaWYgKC9ec3R5bGUkL2kudGVzdChzdGF0ZS5odG1sU3RhdGUuY29udGV4dC50YWdOYW1l
			KSkgew0KICAgICAgICBzdGF0ZS50b2tlbiA9IGNzczsNCiAgICAgICAgc3RhdGUubG9jYWxTdGF0
			ZSA9IGNzc01vZGUuc3RhcnRTdGF0ZShodG1sTW9kZS5pbmRlbnQoc3RhdGUuaHRtbFN0YXRlLCAi
			IikpOw0KICAgICAgICBzdGF0ZS5tb2RlID0gImNzcyI7DQogICAgICB9DQogICAgfQ0KICAgIHJl
			dHVybiBzdHlsZTsNCiAgfQ0KICBmdW5jdGlvbiBtYXliZUJhY2t1cChzdHJlYW0sIHBhdCwgc3R5
			bGUpIHsNCiAgICB2YXIgY3VyID0gc3RyZWFtLmN1cnJlbnQoKTsNCiAgICB2YXIgY2xvc2UgPSBj
			dXIuc2VhcmNoKHBhdCk7DQogICAgaWYgKGNsb3NlID4gLTEpIHN0cmVhbS5iYWNrVXAoY3VyLmxl
			bmd0aCAtIGNsb3NlKTsNCiAgICByZXR1cm4gc3R5bGU7DQogIH0NCiAgZnVuY3Rpb24gamF2YXNj
			cmlwdChzdHJlYW0sIHN0YXRlKSB7DQogICAgaWYgKHN0cmVhbS5tYXRjaCgvXjxcL1xzKnNjcmlw
			dFxzKj4vaSwgZmFsc2UpKSB7DQogICAgICBzdGF0ZS50b2tlbiA9IGh0bWw7DQogICAgICBzdGF0
			ZS5jdXJTdGF0ZSA9IG51bGw7DQogICAgICBzdGF0ZS5tb2RlID0gImh0bWwiOw0KICAgICAgcmV0
			dXJuIGh0bWwoc3RyZWFtLCBzdGF0ZSk7DQogICAgfQ0KICAgIHJldHVybiBtYXliZUJhY2t1cChz
			dHJlYW0sIC88XC9ccypzY3JpcHRccyo+LywNCiAgICAgICAgICAgICAgICAgICAgICAganNNb2Rl
			LnRva2VuKHN0cmVhbSwgc3RhdGUubG9jYWxTdGF0ZSkpOw0KICB9DQogIGZ1bmN0aW9uIGNzcyhz
			dHJlYW0sIHN0YXRlKSB7DQogICAgaWYgKHN0cmVhbS5tYXRjaCgvXjxcL1xzKnN0eWxlXHMqPi9p
			LCBmYWxzZSkpIHsNCiAgICAgIHN0YXRlLnRva2VuID0gaHRtbDsNCiAgICAgIHN0YXRlLmxvY2Fs
			U3RhdGUgPSBudWxsOw0KICAgICAgc3RhdGUubW9kZSA9ICJodG1sIjsNCiAgICAgIHJldHVybiBo
			dG1sKHN0cmVhbSwgc3RhdGUpOw0KICAgIH0NCiAgICByZXR1cm4gbWF5YmVCYWNrdXAoc3RyZWFt
			LCAvPFwvXHMqc3R5bGVccyo+LywNCiAgICAgICAgICAgICAgICAgICAgICAgY3NzTW9kZS50b2tl
			bihzdHJlYW0sIHN0YXRlLmxvY2FsU3RhdGUpKTsNCiAgfQ0KDQogIHJldHVybiB7DQogICAgc3Rh
			cnRTdGF0ZTogZnVuY3Rpb24oKSB7DQogICAgICB2YXIgc3RhdGUgPSBodG1sTW9kZS5zdGFydFN0
			YXRlKCk7DQogICAgICByZXR1cm4ge3Rva2VuOiBodG1sLCBsb2NhbFN0YXRlOiBudWxsLCBtb2Rl
			OiAiaHRtbCIsIGh0bWxTdGF0ZTogc3RhdGV9Ow0KICAgIH0sDQoNCiAgICBjb3B5U3RhdGU6IGZ1
			bmN0aW9uKHN0YXRlKSB7DQogICAgICBpZiAoc3RhdGUubG9jYWxTdGF0ZSkNCiAgICAgICAgdmFy
			IGxvY2FsID0gQ29kZU1pcnJvci5jb3B5U3RhdGUoc3RhdGUudG9rZW4gPT0gY3NzID8gY3NzTW9k
			ZSA6IGpzTW9kZSwgc3RhdGUubG9jYWxTdGF0ZSk7DQogICAgICByZXR1cm4ge3Rva2VuOiBzdGF0
			ZS50b2tlbiwgbG9jYWxTdGF0ZTogbG9jYWwsIG1vZGU6IHN0YXRlLm1vZGUsDQogICAgICAgICAg
			ICAgIGh0bWxTdGF0ZTogQ29kZU1pcnJvci5jb3B5U3RhdGUoaHRtbE1vZGUsIHN0YXRlLmh0bWxT
			dGF0ZSl9Ow0KICAgIH0sDQoNCiAgICB0b2tlbjogZnVuY3Rpb24oc3RyZWFtLCBzdGF0ZSkgew0K
			ICAgICAgcmV0dXJuIHN0YXRlLnRva2VuKHN0cmVhbSwgc3RhdGUpOw0KICAgIH0sDQoNCiAgICBp
			bmRlbnQ6IGZ1bmN0aW9uKHN0YXRlLCB0ZXh0QWZ0ZXIpIHsNCiAgICAgIGlmIChzdGF0ZS50b2tl
			biA9PSBodG1sIHx8IC9eXHMqPFwvLy50ZXN0KHRleHRBZnRlcikpDQogICAgICAgIHJldHVybiBo
			dG1sTW9kZS5pbmRlbnQoc3RhdGUuaHRtbFN0YXRlLCB0ZXh0QWZ0ZXIpOw0KICAgICAgZWxzZSBp
			ZiAoc3RhdGUudG9rZW4gPT0gamF2YXNjcmlwdCkNCiAgICAgICAgcmV0dXJuIGpzTW9kZS5pbmRl
			bnQoc3RhdGUubG9jYWxTdGF0ZSwgdGV4dEFmdGVyKTsNCiAgICAgIGVsc2UNCiAgICAgICAgcmV0
			dXJuIGNzc01vZGUuaW5kZW50KHN0YXRlLmxvY2FsU3RhdGUsIHRleHRBZnRlcik7DQogICAgfSwN
			Cg0KICAgIGNvbXBhcmVTdGF0ZXM6IGZ1bmN0aW9uKGEsIGIpIHsNCiAgICAgIHJldHVybiBodG1s
			TW9kZS5jb21wYXJlU3RhdGVzKGEuaHRtbFN0YXRlLCBiLmh0bWxTdGF0ZSk7DQogICAgfSwNCg0K
			ICAgIGVsZWN0cmljQ2hhcnM6ICIve306Ig0KICB9DQp9KTsNCg0KQ29kZU1pcnJvci5kZWZpbmVN
			SU1FKCJ0ZXh0L2h0bWwiLCAiaHRtbCIpOw0KDQpDb2RlTWlycm9yLmRlZmluZU1vZGUoImNzcyIs
			IGZ1bmN0aW9uKGNvbmZpZykgew0KICB2YXIgaW5kZW50VW5pdCA9IGNvbmZpZy5pbmRlbnRVbml0
			LCB0eXBlOw0KICBmdW5jdGlvbiByZXQoc3R5bGUsIHRwKSB7dHlwZSA9IHRwOyByZXR1cm4gc3R5
			bGU7fQ0KDQogIGZ1bmN0aW9uIHRva2VuQmFzZShzdHJlYW0sIHN0YXRlKSB7DQogICAgdmFyIGNo
			ID0gc3RyZWFtLm5leHQoKTsNCiAgICBpZiAoY2ggPT0gIkAiKSB7c3RyZWFtLmVhdFdoaWxlKC9b
			XHdcXFwtXS8pOyByZXR1cm4gcmV0KCJtZXRhIiwgc3RyZWFtLmN1cnJlbnQoKSk7fQ0KICAgIGVs
			c2UgaWYgKGNoID09ICIvIiAmJiBzdHJlYW0uZWF0KCIqIikpIHsNCiAgICAgIHN0YXRlLnRva2Vu
			aXplID0gdG9rZW5DQ29tbWVudDsNCiAgICAgIHJldHVybiB0b2tlbkNDb21tZW50KHN0cmVhbSwg
			c3RhdGUpOw0KICAgIH0NCiAgICBlbHNlIGlmIChjaCA9PSAiPCIgJiYgc3RyZWFtLmVhdCgiISIp
			KSB7DQogICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuU0dNTENvbW1lbnQ7DQogICAgICByZXR1
			cm4gdG9rZW5TR01MQ29tbWVudChzdHJlYW0sIHN0YXRlKTsNCiAgICB9DQogICAgZWxzZSBpZiAo
			Y2ggPT0gIj0iKSByZXQobnVsbCwgImNvbXBhcmUiKTsNCiAgICBlbHNlIGlmICgoY2ggPT0gIn4i
			IHx8IGNoID09ICJ8IikgJiYgc3RyZWFtLmVhdCgiPSIpKSByZXR1cm4gcmV0KG51bGwsICJjb21w
			YXJlIik7DQogICAgZWxzZSBpZiAoY2ggPT0gIlwiIiB8fCBjaCA9PSAiJyIpIHsNCiAgICAgIHN0
			YXRlLnRva2VuaXplID0gdG9rZW5TdHJpbmcoY2gpOw0KICAgICAgcmV0dXJuIHN0YXRlLnRva2Vu
			aXplKHN0cmVhbSwgc3RhdGUpOw0KICAgIH0NCiAgICBlbHNlIGlmIChjaCA9PSAiIyIpIHsNCiAg
			ICAgIHN0cmVhbS5lYXRXaGlsZSgvW1x3XFxcLV0vKTsNCiAgICAgIHJldHVybiByZXQoImF0b20i
			LCAiaGFzaCIpOw0KICAgIH0NCiAgICBlbHNlIGlmIChjaCA9PSAiISIpIHsNCiAgICAgIHN0cmVh
			bS5tYXRjaCgvXlxzKlx3Ki8pOw0KICAgICAgcmV0dXJuIHJldCgia2V5d29yZCIsICJpbXBvcnRh
			bnQiKTsNCiAgICB9DQogICAgZWxzZSBpZiAoL1xkLy50ZXN0KGNoKSkgew0KICAgICAgc3RyZWFt
			LmVhdFdoaWxlKC9bXHcuJV0vKTsNCiAgICAgIHJldHVybiByZXQoIm51bWJlciIsICJ1bml0Iik7
			DQogICAgfQ0KICAgIGVsc2UgaWYgKC9bLC4rPipcL10vLnRlc3QoY2gpKSB7DQogICAgICByZXR1
			cm4gcmV0KG51bGwsICJzZWxlY3Qtb3AiKTsNCiAgICB9DQogICAgZWxzZSBpZiAoL1s7e306XFtc
			XV0vLnRlc3QoY2gpKSB7DQogICAgICByZXR1cm4gcmV0KG51bGwsIGNoKTsNCiAgICB9DQogICAg
			ZWxzZSB7DQogICAgICBzdHJlYW0uZWF0V2hpbGUoL1tcd1xcXC1dLyk7DQogICAgICByZXR1cm4g
			cmV0KCJ2YXJpYWJsZSIsICJ2YXJpYWJsZSIpOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIHRv
			a2VuQ0NvbW1lbnQoc3RyZWFtLCBzdGF0ZSkgew0KICAgIHZhciBtYXliZUVuZCA9IGZhbHNlLCBj
			aDsNCiAgICB3aGlsZSAoKGNoID0gc3RyZWFtLm5leHQoKSkgIT0gbnVsbCkgew0KICAgICAgaWYg
			KG1heWJlRW5kICYmIGNoID09ICIvIikgew0KICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2Vu
			QmFzZTsNCiAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgICBtYXliZUVuZCA9IChjaCA9PSAi
			KiIpOw0KICAgIH0NCiAgICByZXR1cm4gcmV0KCJjb21tZW50IiwgImNvbW1lbnQiKTsNCiAgfQ0K
			DQogIGZ1bmN0aW9uIHRva2VuU0dNTENvbW1lbnQoc3RyZWFtLCBzdGF0ZSkgew0KICAgIHZhciBk
			YXNoZXMgPSAwLCBjaDsNCiAgICB3aGlsZSAoKGNoID0gc3RyZWFtLm5leHQoKSkgIT0gbnVsbCkg
			ew0KICAgICAgaWYgKGRhc2hlcyA+PSAyICYmIGNoID09ICI+Iikgew0KICAgICAgICBzdGF0ZS50
			b2tlbml6ZSA9IHRva2VuQmFzZTsNCiAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgICBkYXNo
			ZXMgPSAoY2ggPT0gIi0iKSA/IGRhc2hlcyArIDEgOiAwOw0KICAgIH0NCiAgICByZXR1cm4gcmV0
			KCJjb21tZW50IiwgImNvbW1lbnQiKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHRva2VuU3RyaW5nKHF1
			b3RlKSB7DQogICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHsNCiAgICAgIHZhciBl
			c2NhcGVkID0gZmFsc2UsIGNoOw0KICAgICAgd2hpbGUgKChjaCA9IHN0cmVhbS5uZXh0KCkpICE9
			IG51bGwpIHsNCiAgICAgICAgaWYgKGNoID09IHF1b3RlICYmICFlc2NhcGVkKQ0KICAgICAgICAg
			IGJyZWFrOw0KICAgICAgICBlc2NhcGVkID0gIWVzY2FwZWQgJiYgY2ggPT0gIlxcIjsNCiAgICAg
			IH0NCiAgICAgIGlmICghZXNjYXBlZCkgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7DQogICAg
			ICByZXR1cm4gcmV0KCJzdHJpbmciLCAic3RyaW5nIik7DQogICAgfTsNCiAgfQ0KDQogIHJldHVy
			biB7DQogICAgc3RhcnRTdGF0ZTogZnVuY3Rpb24oYmFzZSkgew0KICAgICAgcmV0dXJuIHt0b2tl
			bml6ZTogdG9rZW5CYXNlLA0KICAgICAgICAgICAgICBiYXNlSW5kZW50OiBiYXNlIHx8IDAsDQog
			ICAgICAgICAgICAgIHN0YWNrOiBbXX07DQogICAgfSwNCg0KICAgIHRva2VuOiBmdW5jdGlvbihz
			dHJlYW0sIHN0YXRlKSB7DQogICAgICBpZiAoc3RyZWFtLmVhdFNwYWNlKCkpIHJldHVybiBudWxs
			Ow0KICAgICAgdmFyIHN0eWxlID0gc3RhdGUudG9rZW5pemUoc3RyZWFtLCBzdGF0ZSk7DQoNCiAg
			ICAgIHZhciBjb250ZXh0ID0gc3RhdGUuc3RhY2tbc3RhdGUuc3RhY2subGVuZ3RoLTFdOw0KICAg
			ICAgaWYgKHR5cGUgPT0gImhhc2giICYmIGNvbnRleHQgPT0gInJ1bGUiKSBzdHlsZSA9ICJhdG9t
			IjsNCiAgICAgIGVsc2UgaWYgKHN0eWxlID09ICJ2YXJpYWJsZSIpIHsNCiAgICAgICAgaWYgKGNv
			bnRleHQgPT0gInJ1bGUiKSBzdHlsZSA9ICJudW1iZXIiOw0KICAgICAgICBlbHNlIGlmICghY29u
			dGV4dCB8fCBjb250ZXh0ID09ICJAbWVkaWF7Iikgc3R5bGUgPSAidGFnIjsNCiAgICAgIH0NCg0K
			ICAgICAgaWYgKGNvbnRleHQgPT0gInJ1bGUiICYmIC9eW1x7XH07XSQvLnRlc3QodHlwZSkpDQog
			ICAgICAgIHN0YXRlLnN0YWNrLnBvcCgpOw0KICAgICAgaWYgKHR5cGUgPT0gInsiKSB7DQogICAg
			ICAgIGlmIChjb250ZXh0ID09ICJAbWVkaWEiKSBzdGF0ZS5zdGFja1tzdGF0ZS5zdGFjay5sZW5n
			dGgtMV0gPSAiQG1lZGlheyI7DQogICAgICAgIGVsc2Ugc3RhdGUuc3RhY2sucHVzaCgieyIpOw0K
			ICAgICAgfQ0KICAgICAgZWxzZSBpZiAodHlwZSA9PSAifSIpIHN0YXRlLnN0YWNrLnBvcCgpOw0K
			ICAgICAgZWxzZSBpZiAodHlwZSA9PSAiQG1lZGlhIikgc3RhdGUuc3RhY2sucHVzaCgiQG1lZGlh
			Iik7DQogICAgICBlbHNlIGlmIChjb250ZXh0ID09ICJ7IiAmJiB0eXBlICE9ICJjb21tZW50Iikg
			c3RhdGUuc3RhY2sucHVzaCgicnVsZSIpOw0KICAgICAgcmV0dXJuIHN0eWxlOw0KICAgIH0sDQoN
			CiAgICBpbmRlbnQ6IGZ1bmN0aW9uKHN0YXRlLCB0ZXh0QWZ0ZXIpIHsNCiAgICAgIHZhciBuID0g
			c3RhdGUuc3RhY2subGVuZ3RoOw0KICAgICAgaWYgKC9eXH0vLnRlc3QodGV4dEFmdGVyKSkNCiAg
			ICAgICAgbiAtPSBzdGF0ZS5zdGFja1tzdGF0ZS5zdGFjay5sZW5ndGgtMV0gPT0gInJ1bGUiID8g
			MiA6IDE7DQogICAgICByZXR1cm4gc3RhdGUuYmFzZUluZGVudCArIG4gKiBpbmRlbnRVbml0Ow0K
			ICAgIH0sDQoNCiAgICBlbGVjdHJpY0NoYXJzOiAifSINCiAgfTsNCn0pOw0KDQpDb2RlTWlycm9y
			LmRlZmluZU1JTUUoInRleHQvY3NzIiwgImNzcyIpOw0K
		</Resource>
		<Resource ID="9cc0dd1e-ae9c-4028-b77a-cd3dddc81b10" Type="css" Name="code_editor_styles.css">
			Li8qIEJBU0lDUyAqLw0KDQouQ29kZU1pcnJvciB7DQogIC8qIFNldCBoZWlnaHQsIHdpZHRoLCBi
			b3JkZXJzLCBhbmQgZ2xvYmFsIGZvbnQgcHJvcGVydGllcyBoZXJlICovDQogIGZvbnQtZmFtaWx5
			OiBtb25vc3BhY2U7DQogIGhlaWdodDogMzAwcHg7DQogIGNvbG9yOiBibGFjazsNCiAgZGlyZWN0
			aW9uOiBsdHI7DQp9DQoNCi8qIFBBRERJTkcgKi8NCg0KLkNvZGVNaXJyb3ItbGluZXMgew0KICBw
			YWRkaW5nOiA0cHggMDsgLyogVmVydGljYWwgcGFkZGluZyBhcm91bmQgY29udGVudCAqLw0KfQ0K
			LkNvZGVNaXJyb3IgcHJlLkNvZGVNaXJyb3ItbGluZSwNCi5Db2RlTWlycm9yIHByZS5Db2RlTWly
			cm9yLWxpbmUtbGlrZSB7DQogIHBhZGRpbmc6IDAgNHB4OyAvKiBIb3Jpem9udGFsIHBhZGRpbmcg
			b2YgY29udGVudCAqLw0KfQ0KDQouQ29kZU1pcnJvci1zY3JvbGxiYXItZmlsbGVyLCAuQ29kZU1p
			cnJvci1ndXR0ZXItZmlsbGVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7IC8qIFRoZSBs
			aXR0bGUgc3F1YXJlIGJldHdlZW4gSCBhbmQgViBzY3JvbGxiYXJzICovDQp9DQoNCi8qIEdVVFRF
			UiAqLw0KDQouQ29kZU1pcnJvci1ndXR0ZXJzIHsNCiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQg
			I2RkZDsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Y3ZjdmNzsNCiAgd2hpdGUtc3BhY2U6IG5vd3Jh
			cDsNCn0NCi5Db2RlTWlycm9yLWxpbmVudW1iZXJzIHt9DQouQ29kZU1pcnJvci1saW5lbnVtYmVy
			IHsNCiAgcGFkZGluZzogMCAzcHggMCA1cHg7DQogIG1pbi13aWR0aDogMjBweDsNCiAgdGV4dC1h
			bGlnbjogcmlnaHQ7DQogIGNvbG9yOiAjOTk5Ow0KICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KfQ0K
			DQouQ29kZU1pcnJvci1ndXR0ZXJtYXJrZXIgeyBjb2xvcjogYmxhY2s7IH0NCi5Db2RlTWlycm9y
			LWd1dHRlcm1hcmtlci1zdWJ0bGUgeyBjb2xvcjogIzk5OTsgfQ0KDQovKiBDVVJTT1IgKi8NCg0K
			LkNvZGVNaXJyb3ItY3Vyc29yIHsNCiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCBibGFjazsNCiAg
			Ym9yZGVyLXJpZ2h0OiBub25lOw0KICB3aWR0aDogMDsNCn0NCi8qIFNob3duIHdoZW4gbW92aW5n
			IGluIGJpLWRpcmVjdGlvbmFsIHRleHQgKi8NCi5Db2RlTWlycm9yIGRpdi5Db2RlTWlycm9yLXNl
			Y29uZGFyeWN1cnNvciB7DQogIGJvcmRlci1sZWZ0OiAxcHggc29saWQgc2lsdmVyOw0KfQ0KLmNt
			LWZhdC1jdXJzb3IgLkNvZGVNaXJyb3ItY3Vyc29yIHsNCiAgd2lkdGg6IGF1dG87DQogIGJvcmRl
			cjogMCAhaW1wb3J0YW50Ow0KICBiYWNrZ3JvdW5kOiAjN2U3Ow0KfQ0KLmNtLWZhdC1jdXJzb3Ig
			ZGl2LkNvZGVNaXJyb3ItY3Vyc29ycyB7DQogIHotaW5kZXg6IDE7DQp9DQouY20tZmF0LWN1cnNv
			ci1tYXJrIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMCwgMjU1LCAyMCwgMC41KTsNCiAg
			LXdlYmtpdC1hbmltYXRpb246IGJsaW5rIDEuMDZzIHN0ZXBzKDEpIGluZmluaXRlOw0KICAtbW96
			LWFuaW1hdGlvbjogYmxpbmsgMS4wNnMgc3RlcHMoMSkgaW5maW5pdGU7DQogIGFuaW1hdGlvbjog
			YmxpbmsgMS4wNnMgc3RlcHMoMSkgaW5maW5pdGU7DQp9DQouY20tYW5pbWF0ZS1mYXQtY3Vyc29y
			IHsNCiAgd2lkdGg6IGF1dG87DQogIGJvcmRlcjogMDsNCiAgLXdlYmtpdC1hbmltYXRpb246IGJs
			aW5rIDEuMDZzIHN0ZXBzKDEpIGluZmluaXRlOw0KICAtbW96LWFuaW1hdGlvbjogYmxpbmsgMS4w
			NnMgc3RlcHMoMSkgaW5maW5pdGU7DQogIGFuaW1hdGlvbjogYmxpbmsgMS4wNnMgc3RlcHMoMSkg
			aW5maW5pdGU7DQogIGJhY2tncm91bmQtY29sb3I6ICM3ZTc7DQp9DQpALW1vei1rZXlmcmFtZXMg
			Ymxpbmsgew0KICAwJSB7fQ0KICA1MCUgeyBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsg
			fQ0KICAxMDAlIHt9DQp9DQpALXdlYmtpdC1rZXlmcmFtZXMgYmxpbmsgew0KICAwJSB7fQ0KICA1
			MCUgeyBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsgfQ0KICAxMDAlIHt9DQp9DQpAa2V5
			ZnJhbWVzIGJsaW5rIHsNCiAgMCUge30NCiAgNTAlIHsgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNw
			YXJlbnQ7IH0NCiAgMTAwJSB7fQ0KfQ0KDQovKiBDYW4gc3R5bGUgY3Vyc29yIGRpZmZlcmVudCBp
			biBvdmVyd3JpdGUgKG5vbi1pbnNlcnQpIG1vZGUgKi8NCi5Db2RlTWlycm9yLW92ZXJ3cml0ZSAu
			Q29kZU1pcnJvci1jdXJzb3Ige30NCg0KLmNtLXRhYiB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsg
			dGV4dC1kZWNvcmF0aW9uOiBpbmhlcml0OyB9DQoNCi5Db2RlTWlycm9yLXJ1bGVycyB7DQogIHBv
			c2l0aW9uOiBhYnNvbHV0ZTsNCiAgbGVmdDogMDsgcmlnaHQ6IDA7IHRvcDogLTUwcHg7IGJvdHRv
			bTogMDsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCi5Db2RlTWlycm9yLXJ1bGVyIHsNCiAgYm9y
			ZGVyLWxlZnQ6IDFweCBzb2xpZCAjY2NjOw0KICB0b3A6IDA7IGJvdHRvbTogMDsNCiAgcG9zaXRp
			b246IGFic29sdXRlOw0KfQ0KDQovKiBERUZBVUxUIFRIRU1FICovDQoNCi5jbS1zLWRlZmF1bHQg
			LmNtLWhlYWRlciB7Y29sb3I6IGJsdWU7fQ0KLmNtLXMtZGVmYXVsdCAuY20tcXVvdGUge2NvbG9y
			OiAjMDkwO30NCi5jbS1uZWdhdGl2ZSB7Y29sb3I6ICNkNDQ7fQ0KLmNtLXBvc2l0aXZlIHtjb2xv
			cjogIzI5Mjt9DQouY20taGVhZGVyLCAuY20tc3Ryb25nIHtmb250LXdlaWdodDogYm9sZDt9DQou
			Y20tZW0ge2ZvbnQtc3R5bGU6IGl0YWxpYzt9DQouY20tbGluayB7dGV4dC1kZWNvcmF0aW9uOiB1
			bmRlcmxpbmU7fQ0KLmNtLXN0cmlrZXRocm91Z2gge3RleHQtZGVjb3JhdGlvbjogbGluZS10aHJv
			dWdoO30NCg0KLmNtLXMtZGVmYXVsdCAuY20ta2V5d29yZCB7Y29sb3I6ICM3MDg7fQ0KLmNtLXMt
			ZGVmYXVsdCAuY20tYXRvbSB7Y29sb3I6ICMyMTk7fQ0KLmNtLXMtZGVmYXVsdCAuY20tbnVtYmVy
			IHtjb2xvcjogIzE2NDt9DQouY20tcy1kZWZhdWx0IC5jbS1kZWYge2NvbG9yOiAjMDBmO30NCi5j
			bS1zLWRlZmF1bHQgLmNtLXZhcmlhYmxlLA0KLmNtLXMtZGVmYXVsdCAuY20tcHVuY3R1YXRpb24s
			DQouY20tcy1kZWZhdWx0IC5jbS1wcm9wZXJ0eSwNCi5jbS1zLWRlZmF1bHQgLmNtLW9wZXJhdG9y
			IHt9DQouY20tcy1kZWZhdWx0IC5jbS12YXJpYWJsZS0yIHtjb2xvcjogIzA1YTt9DQouY20tcy1k
			ZWZhdWx0IC5jbS12YXJpYWJsZS0zLCAuY20tcy1kZWZhdWx0IC5jbS10eXBlIHtjb2xvcjogIzA4
			NTt9DQouY20tcy1kZWZhdWx0IC5jbS1jb21tZW50IHtjb2xvcjogI2E1MDt9DQouY20tcy1kZWZh
			dWx0IC5jbS1zdHJpbmcge2NvbG9yOiAjYTExO30NCi5jbS1zLWRlZmF1bHQgLmNtLXN0cmluZy0y
			IHtjb2xvcjogI2Y1MDt9DQouY20tcy1kZWZhdWx0IC5jbS1tZXRhIHtjb2xvcjogIzU1NTt9DQou
			Y20tcy1kZWZhdWx0IC5jbS1xdWFsaWZpZXIge2NvbG9yOiAjNTU1O30NCi5jbS1zLWRlZmF1bHQg
			LmNtLWJ1aWx0aW4ge2NvbG9yOiAjMzBhO30NCi5jbS1zLWRlZmF1bHQgLmNtLWJyYWNrZXQge2Nv
			bG9yOiAjOTk3O30NCi5jbS1zLWRlZmF1bHQgLmNtLXRhZyB7Y29sb3I6ICMxNzA7fQ0KLmNtLXMt
			ZGVmYXVsdCAuY20tYXR0cmlidXRlIHtjb2xvcjogIzAwYzt9DQouY20tcy1kZWZhdWx0IC5jbS1o
			ciB7Y29sb3I6ICM5OTk7fQ0KLmNtLXMtZGVmYXVsdCAuY20tbGluayB7Y29sb3I6ICMwMGM7fQ0K
			DQouY20tcy1kZWZhdWx0IC5jbS1lcnJvciB7Y29sb3I6ICNmMDA7fQ0KLmNtLWludmFsaWRjaGFy
			IHtjb2xvcjogI2YwMDt9DQoNCi5Db2RlTWlycm9yLWNvbXBvc2luZyB7IGJvcmRlci1ib3R0b206
			IDJweCBzb2xpZDsgfQ0KDQovKiBEZWZhdWx0IHN0eWxlcyBmb3IgY29tbW9uIGFkZG9ucyAqLw0K
			DQpkaXYuQ29kZU1pcnJvciBzcGFuLkNvZGVNaXJyb3ItbWF0Y2hpbmdicmFja2V0IHtjb2xvcjog
			IzBiMDt9DQpkaXYuQ29kZU1pcnJvciBzcGFuLkNvZGVNaXJyb3Itbm9ubWF0Y2hpbmdicmFja2V0
			IHtjb2xvcjogI2EyMjt9DQouQ29kZU1pcnJvci1tYXRjaGluZ3RhZyB7IGJhY2tncm91bmQ6IHJn
			YmEoMjU1LCAxNTAsIDAsIC4zKTsgfQ0KLkNvZGVNaXJyb3ItYWN0aXZlbGluZS1iYWNrZ3JvdW5k
			IHtiYWNrZ3JvdW5kOiAjZThmMmZmO30NCg0KLyogU1RPUCAqLw0KDQovKiBUaGUgcmVzdCBvZiB0
			aGlzIGZpbGUgY29udGFpbnMgc3R5bGVzIHJlbGF0ZWQgdG8gdGhlIG1lY2hhbmljcyBvZg0KICAg
			dGhlIGVkaXRvci4gWW91IHByb2JhYmx5IHNob3VsZG4ndCB0b3VjaCB0aGVtLiAqLw0KDQouQ29k
			ZU1pcnJvciB7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAg
			YmFja2dyb3VuZDogd2hpdGU7DQp9DQoNCi5Db2RlTWlycm9yLXNjcm9sbCB7DQogIG92ZXJmbG93
			OiBzY3JvbGwgIWltcG9ydGFudDsgLyogVGhpbmdzIHdpbGwgYnJlYWsgaWYgdGhpcyBpcyBvdmVy
			cmlkZGVuICovDQogIC8qIDMwcHggaXMgdGhlIG1hZ2ljIG1hcmdpbiB1c2VkIHRvIGhpZGUgdGhl
			IGVsZW1lbnQncyByZWFsIHNjcm9sbGJhcnMgKi8NCiAgLyogU2VlIG92ZXJmbG93OiBoaWRkZW4g
			aW4gLkNvZGVNaXJyb3IgKi8NCiAgbWFyZ2luLWJvdHRvbTogLTMwcHg7IG1hcmdpbi1yaWdodDog
			LTMwcHg7DQogIHBhZGRpbmctYm90dG9tOiAzMHB4Ow0KICBoZWlnaHQ6IDEwMCU7DQogIG91dGxp
			bmU6IG5vbmU7IC8qIFByZXZlbnQgZHJhZ2dpbmcgZnJvbSBoaWdobGlnaHRpbmcgdGhlIGVsZW1l
			bnQgKi8NCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KLkNvZGVNaXJyb3Itc2l6ZXIgew0KICBw
			b3NpdGlvbjogcmVsYXRpdmU7DQogIGJvcmRlci1yaWdodDogMzBweCBzb2xpZCB0cmFuc3BhcmVu
			dDsNCn0NCg0KLyogVGhlIGZha2UsIHZpc2libGUgc2Nyb2xsYmFycy4gVXNlZCB0byBmb3JjZSBy
			ZWRyYXcgZHVyaW5nIHNjcm9sbGluZw0KICAgYmVmb3JlIGFjdHVhbCBzY3JvbGxpbmcgaGFwcGVu
			cywgdGh1cyBwcmV2ZW50aW5nIHNoYWtpbmcgYW5kDQogICBmbGlja2VyaW5nIGFydGlmYWN0cy4g
			Ki8NCi5Db2RlTWlycm9yLXZzY3JvbGxiYXIsIC5Db2RlTWlycm9yLWhzY3JvbGxiYXIsIC5Db2Rl
			TWlycm9yLXNjcm9sbGJhci1maWxsZXIsIC5Db2RlTWlycm9yLWd1dHRlci1maWxsZXIgew0KICBw
			b3NpdGlvbjogYWJzb2x1dGU7DQogIHotaW5kZXg6IDY7DQogIGRpc3BsYXk6IG5vbmU7DQp9DQou
			Q29kZU1pcnJvci12c2Nyb2xsYmFyIHsNCiAgcmlnaHQ6IDA7IHRvcDogMDsNCiAgb3ZlcmZsb3ct
			eDogaGlkZGVuOw0KICBvdmVyZmxvdy15OiBzY3JvbGw7DQp9DQouQ29kZU1pcnJvci1oc2Nyb2xs
			YmFyIHsNCiAgYm90dG9tOiAwOyBsZWZ0OiAwOw0KICBvdmVyZmxvdy15OiBoaWRkZW47DQogIG92
			ZXJmbG93LXg6IHNjcm9sbDsNCn0NCi5Db2RlTWlycm9yLXNjcm9sbGJhci1maWxsZXIgew0KICBy
			aWdodDogMDsgYm90dG9tOiAwOw0KfQ0KLkNvZGVNaXJyb3ItZ3V0dGVyLWZpbGxlciB7DQogIGxl
			ZnQ6IDA7IGJvdHRvbTogMDsNCn0NCg0KLkNvZGVNaXJyb3ItZ3V0dGVycyB7DQogIHBvc2l0aW9u
			OiBhYnNvbHV0ZTsgbGVmdDogMDsgdG9wOiAwOw0KICBtaW4taGVpZ2h0OiAxMDAlOw0KICB6LWlu
			ZGV4OiAzOw0KfQ0KLkNvZGVNaXJyb3ItZ3V0dGVyIHsNCiAgd2hpdGUtc3BhY2U6IG5vcm1hbDsN
			CiAgaGVpZ2h0OiAxMDAlOw0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogIHZlcnRpY2FsLWFs
			aWduOiB0b3A7DQogIG1hcmdpbi1ib3R0b206IC0zMHB4Ow0KfQ0KLkNvZGVNaXJyb3ItZ3V0dGVy
			LXdyYXBwZXIgew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHotaW5kZXg6IDQ7DQogIGJhY2tn
			cm91bmQ6IG5vbmUgIWltcG9ydGFudDsNCiAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7DQp9DQou
			Q29kZU1pcnJvci1ndXR0ZXItYmFja2dyb3VuZCB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAg
			dG9wOiAwOyBib3R0b206IDA7DQogIHotaW5kZXg6IDQ7DQp9DQouQ29kZU1pcnJvci1ndXR0ZXIt
			ZWx0IHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICBjdXJzb3I6IGRlZmF1bHQ7DQogIHotaW5k
			ZXg6IDQ7DQp9DQouQ29kZU1pcnJvci1ndXR0ZXItd3JhcHBlciA6OnNlbGVjdGlvbiB7IGJhY2tn
			cm91bmQtY29sb3I6IHRyYW5zcGFyZW50IH0NCi5Db2RlTWlycm9yLWd1dHRlci13cmFwcGVyIDo6
			LW1vei1zZWxlY3Rpb24geyBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCB9DQoNCi5Db2Rl
			TWlycm9yLWxpbmVzIHsNCiAgY3Vyc29yOiB0ZXh0Ow0KICBtaW4taGVpZ2h0OiAxcHg7IC8qIHBy
			ZXZlbnRzIGNvbGxhcHNpbmcgYmVmb3JlIGZpcnN0IGRyYXcgKi8NCn0NCi5Db2RlTWlycm9yIHBy
			ZS5Db2RlTWlycm9yLWxpbmUsDQouQ29kZU1pcnJvciBwcmUuQ29kZU1pcnJvci1saW5lLWxpa2Ug
			ew0KICAvKiBSZXNldCBzb21lIHN0eWxlcyB0aGF0IHRoZSByZXN0IG9mIHRoZSBwYWdlIG1pZ2h0
			IGhhdmUgc2V0ICovDQogIC1tb3otYm9yZGVyLXJhZGl1czogMDsgLXdlYmtpdC1ib3JkZXItcmFk
			aXVzOiAwOyBib3JkZXItcmFkaXVzOiAwOw0KICBib3JkZXItd2lkdGg6IDA7DQogIGJhY2tncm91
			bmQ6IHRyYW5zcGFyZW50Ow0KICBmb250LWZhbWlseTogaW5oZXJpdDsNCiAgZm9udC1zaXplOiBp
			bmhlcml0Ow0KICBtYXJnaW46IDA7DQogIHdoaXRlLXNwYWNlOiBwcmU7DQogIHdvcmQtd3JhcDog
			bm9ybWFsOw0KICBsaW5lLWhlaWdodDogaW5oZXJpdDsNCiAgY29sb3I6IGluaGVyaXQ7DQogIHot
			aW5kZXg6IDI7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgb3ZlcmZsb3c6IHZpc2libGU7DQog
			IC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7DQogIC13ZWJraXQtZm9u
			dC12YXJpYW50LWxpZ2F0dXJlczogY29udGV4dHVhbDsNCiAgZm9udC12YXJpYW50LWxpZ2F0dXJl
			czogY29udGV4dHVhbDsNCn0NCi5Db2RlTWlycm9yLXdyYXAgcHJlLkNvZGVNaXJyb3ItbGluZSwN
			Ci5Db2RlTWlycm9yLXdyYXAgcHJlLkNvZGVNaXJyb3ItbGluZS1saWtlIHsNCiAgd29yZC13cmFw
			OiBicmVhay13b3JkOw0KICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7DQogIHdvcmQtYnJlYWs6IG5v
			cm1hbDsNCn0NCg0KLkNvZGVNaXJyb3ItbGluZWJhY2tncm91bmQgew0KICBwb3NpdGlvbjogYWJz
			b2x1dGU7DQogIGxlZnQ6IDA7IHJpZ2h0OiAwOyB0b3A6IDA7IGJvdHRvbTogMDsNCiAgei1pbmRl
			eDogMDsNCn0NCg0KLkNvZGVNaXJyb3ItbGluZXdpZGdldCB7DQogIHBvc2l0aW9uOiByZWxhdGl2
			ZTsNCiAgei1pbmRleDogMjsNCiAgcGFkZGluZzogMC4xcHg7IC8qIEZvcmNlIHdpZGdldCBtYXJn
			aW5zIHRvIHN0YXkgaW5zaWRlIG9mIHRoZSBjb250YWluZXIgKi8NCn0NCg0KLkNvZGVNaXJyb3It
			d2lkZ2V0IHt9DQoNCi5Db2RlTWlycm9yLXJ0bCBwcmUgeyBkaXJlY3Rpb246IHJ0bDsgfQ0KDQou
			Q29kZU1pcnJvci1jb2RlIHsNCiAgb3V0bGluZTogbm9uZTsNCn0NCg0KLyogRm9yY2UgY29udGVu
			dC1ib3ggc2l6aW5nIGZvciB0aGUgZWxlbWVudHMgd2hlcmUgd2UgZXhwZWN0IGl0ICovDQouQ29k
			ZU1pcnJvci1zY3JvbGwsDQouQ29kZU1pcnJvci1zaXplciwNCi5Db2RlTWlycm9yLWd1dHRlciwN
			Ci5Db2RlTWlycm9yLWd1dHRlcnMsDQouQ29kZU1pcnJvci1saW5lbnVtYmVyIHsNCiAgLW1vei1i
			b3gtc2l6aW5nOiBjb250ZW50LWJveDsNCiAgYm94LXNpemluZzogY29udGVudC1ib3g7DQp9DQoN
			Ci5Db2RlTWlycm9yLW1lYXN1cmUgew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHdpZHRoOiAx
			MDAlOw0KICBoZWlnaHQ6IDA7DQogIG92ZXJmbG93OiBoaWRkZW47DQogIHZpc2liaWxpdHk6IGhp
			ZGRlbjsNCn0NCg0KLkNvZGVNaXJyb3ItY3Vyc29yIHsNCiAgcG9zaXRpb246IGFic29sdXRlOw0K
			ICBwb2ludGVyLWV2ZW50czogbm9uZTsNCn0NCi5Db2RlTWlycm9yLW1lYXN1cmUgcHJlIHsgcG9z
			aXRpb246IHN0YXRpYzsgfQ0KDQpkaXYuQ29kZU1pcnJvci1jdXJzb3JzIHsNCiAgdmlzaWJpbGl0
			eTogaGlkZGVuOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIHotaW5kZXg6IDM7DQp9DQpkaXYu
			Q29kZU1pcnJvci1kcmFnY3Vyc29ycyB7DQogIHZpc2liaWxpdHk6IHZpc2libGU7DQp9DQoNCi5D
			b2RlTWlycm9yLWZvY3VzZWQgZGl2LkNvZGVNaXJyb3ItY3Vyc29ycyB7DQogIHZpc2liaWxpdHk6
			IHZpc2libGU7DQp9DQoNCi5Db2RlTWlycm9yLXNlbGVjdGVkIHsgYmFja2dyb3VuZDogI2Q5ZDlk
			OTsgfQ0KLkNvZGVNaXJyb3ItZm9jdXNlZCAuQ29kZU1pcnJvci1zZWxlY3RlZCB7IGJhY2tncm91
			bmQ6ICNkN2Q0ZjA7IH0NCi5Db2RlTWlycm9yLWNyb3NzaGFpciB7IGN1cnNvcjogY3Jvc3NoYWly
			OyB9DQouQ29kZU1pcnJvci1saW5lOjpzZWxlY3Rpb24sIC5Db2RlTWlycm9yLWxpbmUgPiBzcGFu
			OjpzZWxlY3Rpb24sIC5Db2RlTWlycm9yLWxpbmUgPiBzcGFuID4gc3Bhbjo6c2VsZWN0aW9uIHsg
			YmFja2dyb3VuZDogI2Q3ZDRmMDsgfQ0KLkNvZGVNaXJyb3ItbGluZTo6LW1vei1zZWxlY3Rpb24s
			IC5Db2RlTWlycm9yLWxpbmUgPiBzcGFuOjotbW96LXNlbGVjdGlvbiwgLkNvZGVNaXJyb3ItbGlu
			ZSA+IHNwYW4gPiBzcGFuOjotbW96LXNlbGVjdGlvbiB7IGJhY2tncm91bmQ6ICNkN2Q0ZjA7IH0N
			Cg0KLmNtLXNlYXJjaGluZyB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmE7DQogIGJhY2tncm91
			bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDAsIC40KTsNCn0NCg0KLyogVXNlZCB0byBmb3JjZSBh
			IGJvcmRlciBtb2RlbCBmb3IgYSBub2RlICovDQouY20tZm9yY2UtYm9yZGVyIHsgcGFkZGluZy1y
			aWdodDogLjFweDsgfQ0KDQpAbWVkaWEgcHJpbnQgew0KICAvKiBIaWRlIHRoZSBjdXJzb3Igd2hl
			biBwcmludGluZyAqLw0KICAuQ29kZU1pcnJvciBkaXYuQ29kZU1pcnJvci1jdXJzb3JzIHsNCiAg
			ICB2aXNpYmlsaXR5OiBoaWRkZW47DQogIH0NCn0NCg0KLyogU2VlIGlzc3VlICMyOTAxICovDQou
			Y20tdGFiLXdyYXAtaGFjazphZnRlciB7IGNvbnRlbnQ6ICcnOyB9DQoNCi8qIEhlbHAgdXNlcnMg
			dXNlIG1hcmtzZWxlY3Rpb24gdG8gc2FmZWx5IHN0eWxlIHRleHQgYmFja2dyb3VuZCAqLw0Kc3Bh
			bi5Db2RlTWlycm9yLXNlbGVjdGVkdGV4dCB7IGJhY2tncm91bmQ6IG5vbmU7IH0NCg0KLkNvZGVN
			aXJyb3Itc2Nyb2xsIGRpdiB7DQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICBwYWRk
			aW5nOiAwcHggN3B4IDBweCAxcHg7DQp9DQouQ29kZU1pcnJvciBwcmUuQ29kZU1pcnJvci1saW5l
			LCAuQ29kZU1pcnJvciBwcmUuQ29kZU1pcnJvci1saW5lLWxpa2Ugew0KICAgIHBhZGRpbmc6IDBw
			eCAzM3B4Ow0KfQ0KDQouY20tbWF0Y2hoaWdobGlnaHQgew0KICAgIGJhY2tncm91bmQtY29sb3I6
			ICAjZmYxOw0KfSANCi5Db2RlTWlycm9yLXNlbGVjdGlvbi1oaWdobGlnaHQtc2Nyb2xsYmFyIHsN
			CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmYxOw0KfQ==
		</Resource>
		<Resource ID="a7280e78-723d-4c0e-07b3-fb4b16697f8a" Type="png" Name="Codeeditor_16x16_.png">
			iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJ
			bWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdp
			bj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6
			eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0
			NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJo
			dHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlw
			dGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAv
			IiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RS
			ZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpD
			cmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNl
			SUQ9InhtcC5paWQ6ODhCMTE2RkQ3QkVBMTFFMkFENUZEQjgwQTA5OENCNjciIHhtcE1NOkRvY3Vt
			ZW50SUQ9InhtcC5kaWQ6ODhCMTE2RkU3QkVBMTFFMkFENUZEQjgwQTA5OENCNjciPiA8eG1wTU06
			RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4OEIxMTZGQjdCRUExMUUyQUQ1
			RkRCODBBMDk4Q0I2NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4OEIxMTZGQzdCRUExMUUy
			QUQ1RkRCODBBMDk4Q0I2NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1w
			bWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ptr5jzAAAADRSURBVHjaYpw0aZInAwPDXCCWZCANPAfi
			ZCYyNTNA9cxlgWmePHkySbpzc3PBhjAxUAhYcMr4BDP8V1AGMxkf3GVg2LIWqzLsLrB3ZfjvH8bA
			+O0rGIPYIDHiXCAsyvA/t4yB4cBuBoZ5UyEuIMsLyABqEPFeIAEQZ4CKOthrxBnw9jUDw5WLDAyy
			ChCNQPw/NZ+BwdKO+DBgnNwJDMhyhv95FRCBd28ZGI4fIiEQga5gbCihYhgQiEZQrpKEpm1SwQuQ
			C1JADDI0PwVlZ4AAAwCgjTPF4WOwaQAAAABJRU5ErkJggg==
		</Resource>
		<Resource ID="c43c7089-459d-acc2-f636-fb4b23f22d5b" Type="png" Name="Codeeditor_16x16_.png">
			iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJ
			bWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdp
			bj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6
			eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0
			NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJo
			dHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlw
			dGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAv
			IiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RS
			ZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpD
			cmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNl
			SUQ9InhtcC5paWQ6ODhCMTE2RkQ3QkVBMTFFMkFENUZEQjgwQTA5OENCNjciIHhtcE1NOkRvY3Vt
			ZW50SUQ9InhtcC5kaWQ6ODhCMTE2RkU3QkVBMTFFMkFENUZEQjgwQTA5OENCNjciPiA8eG1wTU06
			RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4OEIxMTZGQjdCRUExMUUyQUQ1
			RkRCODBBMDk4Q0I2NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4OEIxMTZGQzdCRUExMUUy
			QUQ1RkRCODBBMDk4Q0I2NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1w
			bWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ptr5jzAAAADRSURBVHjaYpw0aZInAwPDXCCWZCANPAfi
			ZCYyNTNA9cxlgWmePHkySbpzc3PBhjAxUAhYcMr4BDP8V1AGMxkf3GVg2LIWqzLsLrB3ZfjvH8bA
			+O0rGIPYIDHiXCAsyvA/t4yB4cBuBoZ5UyEuIMsLyABqEPFeIAEQZ4CKOthrxBnw9jUDw5WLDAyy
			ChCNQPw/NZ+BwdKO+DBgnNwJDMhyhv95FRCBd28ZGI4fIiEQga5gbCihYhgQiEZQrpKEpm1SwQuQ
			C1JADDI0PwVlZ4AAAwCgjTPF4WOwaQAAAABJRU5ErkJggg==
		</Resource>
		<Resource ID="dd098de4-af7a-473b-bd3a-8087be9fc197" Type="js" Name="match-highlighter.js">
			Ly8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhl
			cnMNCi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJy
			b3IubmV0L0xJQ0VOU0UNCg0KLy8gSGlnaGxpZ2h0aW5nIHRleHQgdGhhdCBtYXRjaGVzIHRoZSBz
			ZWxlY3Rpb24NCi8vDQovLyBEZWZpbmVzIGFuIG9wdGlvbiBoaWdobGlnaHRTZWxlY3Rpb25NYXRj
			aGVzLCB3aGljaCwgd2hlbiBlbmFibGVkLA0KLy8gd2lsbCBzdHlsZSBzdHJpbmdzIHRoYXQgbWF0
			Y2ggdGhlIHNlbGVjdGlvbiB0aHJvdWdob3V0IHRoZQ0KLy8gZG9jdW1lbnQuDQovLw0KLy8gVGhl
			IG9wdGlvbiBjYW4gYmUgc2V0IHRvIHRydWUgdG8gc2ltcGx5IGVuYWJsZSBpdCwgb3IgdG8gYQ0K
			Ly8ge21pbkNoYXJzLCBzdHlsZSwgd29yZHNPbmx5LCBzaG93VG9rZW4sIGRlbGF5fSBvYmplY3Qg
			dG8gZXhwbGljaXRseQ0KLy8gY29uZmlndXJlIGl0LiBtaW5DaGFycyBpcyB0aGUgbWluaW11bSBh
			bW91bnQgb2YgY2hhcmFjdGVycyB0aGF0IHNob3VsZCBiZQ0KLy8gc2VsZWN0ZWQgZm9yIHRoZSBi
			ZWhhdmlvciB0byBvY2N1ciwgYW5kIHN0eWxlIGlzIHRoZSB0b2tlbiBzdHlsZSB0bw0KLy8gYXBw
			bHkgdG8gdGhlIG1hdGNoZXMuIFRoaXMgd2lsbCBiZSBwcmVmaXhlZCBieSAiY20tIiB0byBjcmVh
			dGUgYW4NCi8vIGFjdHVhbCBDU1MgY2xhc3MgbmFtZS4gSWYgd29yZHNPbmx5IGlzIGVuYWJsZWQs
			IHRoZSBtYXRjaGVzIHdpbGwgYmUNCi8vIGhpZ2hsaWdodGVkIG9ubHkgaWYgdGhlIHNlbGVjdGVk
			IHRleHQgaXMgYSB3b3JkLiBzaG93VG9rZW4sIHdoZW4gZW5hYmxlZCwNCi8vIHdpbGwgY2F1c2Ug
			dGhlIGN1cnJlbnQgdG9rZW4gdG8gYmUgaGlnaGxpZ2h0ZWQgd2hlbiBub3RoaW5nIGlzIHNlbGVj
			dGVkLg0KLy8gZGVsYXkgaXMgdXNlZCB0byBzcGVjaWZ5IGhvdyBtdWNoIHRpbWUgdG8gd2FpdCwg
			aW4gbWlsbGlzZWNvbmRzLCBiZWZvcmUNCi8vIGhpZ2hsaWdodGluZyB0aGUgbWF0Y2hlcy4gSWYg
			YW5ub3RhdGVTY3JvbGxiYXIgaXMgZW5hYmxlZCwgdGhlIG9jY3VyZW5jZXMNCi8vIHdpbGwgYmUg
			aGlnaGxpZ2h0ZWQgb24gdGhlIHNjcm9sbGJhciB2aWEgdGhlIG1hdGNoZXNvbnNjcm9sbGJhciBh
			ZGRvbi4NCg0KKGZ1bmN0aW9uKG1vZCkgew0KICBpZiAodHlwZW9mIGV4cG9ydHMgPT0gIm9iamVj
			dCIgJiYgdHlwZW9mIG1vZHVsZSA9PSAib2JqZWN0IikgLy8gQ29tbW9uSlMNCiAgICBtb2QocmVx
			dWlyZSgiLi4vLi4vbGliL2NvZGVtaXJyb3IiKSwgcmVxdWlyZSgiLi9tYXRjaGVzb25zY3JvbGxi
			YXIiKSk7DQogIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUu
			YW1kKSAvLyBBTUQNCiAgICBkZWZpbmUoWyIuLi8uLi9saWIvY29kZW1pcnJvciIsICIuL21hdGNo
			ZXNvbnNjcm9sbGJhciJdLCBtb2QpOw0KICBlbHNlIC8vIFBsYWluIGJyb3dzZXIgZW52DQogICAg
			bW9kKENvZGVNaXJyb3IpOw0KfSkoZnVuY3Rpb24oQ29kZU1pcnJvcikgew0KICAidXNlIHN0cmlj
			dCI7DQoNCiAgdmFyIGRlZmF1bHRzID0gew0KICAgIHN0eWxlOiAibWF0Y2hoaWdobGlnaHQiLA0K
			ICAgIG1pbkNoYXJzOiAyLA0KICAgIGRlbGF5OiAxMDAsDQogICAgd29yZHNPbmx5OiBmYWxzZSwN
			CiAgICBhbm5vdGF0ZVNjcm9sbGJhcjogZmFsc2UsDQogICAgc2hvd1Rva2VuOiBmYWxzZSwNCiAg
			ICB0cmltOiB0cnVlDQogIH0NCg0KICBmdW5jdGlvbiBTdGF0ZShvcHRpb25zKSB7DQogICAgdGhp
			cy5vcHRpb25zID0ge30NCiAgICBmb3IgKHZhciBuYW1lIGluIGRlZmF1bHRzKQ0KICAgICAgdGhp
			cy5vcHRpb25zW25hbWVdID0gKG9wdGlvbnMgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShuYW1l
			KSA/IG9wdGlvbnMgOiBkZWZhdWx0cylbbmFtZV0NCiAgICB0aGlzLm92ZXJsYXkgPSB0aGlzLnRp
			bWVvdXQgPSBudWxsOw0KICAgIHRoaXMubWF0Y2hlc29uc2Nyb2xsID0gbnVsbDsNCiAgICB0aGlz
			LmFjdGl2ZSA9IGZhbHNlOw0KICB9DQoNCiAgQ29kZU1pcnJvci5kZWZpbmVPcHRpb24oImhpZ2hs
			aWdodFNlbGVjdGlvbk1hdGNoZXMiLCBmYWxzZSwgZnVuY3Rpb24oY20sIHZhbCwgb2xkKSB7DQog
			ICAgaWYgKG9sZCAmJiBvbGQgIT0gQ29kZU1pcnJvci5Jbml0KSB7DQogICAgICByZW1vdmVPdmVy
			bGF5KGNtKTsNCiAgICAgIGNsZWFyVGltZW91dChjbS5zdGF0ZS5tYXRjaEhpZ2hsaWdodGVyLnRp
			bWVvdXQpOw0KICAgICAgY20uc3RhdGUubWF0Y2hIaWdobGlnaHRlciA9IG51bGw7DQogICAgICBj
			bS5vZmYoImN1cnNvckFjdGl2aXR5IiwgY3Vyc29yQWN0aXZpdHkpOw0KICAgICAgY20ub2ZmKCJm
			b2N1cyIsIG9uRm9jdXMpDQogICAgfQ0KICAgIGlmICh2YWwpIHsNCiAgICAgIHZhciBzdGF0ZSA9
			IGNtLnN0YXRlLm1hdGNoSGlnaGxpZ2h0ZXIgPSBuZXcgU3RhdGUodmFsKTsNCiAgICAgIGlmIChj
			bS5oYXNGb2N1cygpKSB7DQogICAgICAgIHN0YXRlLmFjdGl2ZSA9IHRydWUNCiAgICAgICAgaGln
			aGxpZ2h0TWF0Y2hlcyhjbSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNtLm9uKCJmb2N1cyIs
			IG9uRm9jdXMpDQogICAgICB9DQogICAgICBjbS5vbigiY3Vyc29yQWN0aXZpdHkiLCBjdXJzb3JB
			Y3Rpdml0eSk7DQogICAgfQ0KICB9KTsNCg0KICBmdW5jdGlvbiBjdXJzb3JBY3Rpdml0eShjbSkg
			ew0KICAgIHZhciBzdGF0ZSA9IGNtLnN0YXRlLm1hdGNoSGlnaGxpZ2h0ZXI7DQogICAgaWYgKHN0
			YXRlLmFjdGl2ZSB8fCBjbS5oYXNGb2N1cygpKSBzY2hlZHVsZUhpZ2hsaWdodChjbSwgc3RhdGUp
			DQogIH0NCg0KICBmdW5jdGlvbiBvbkZvY3VzKGNtKSB7DQogICAgdmFyIHN0YXRlID0gY20uc3Rh
			dGUubWF0Y2hIaWdobGlnaHRlcg0KICAgIGlmICghc3RhdGUuYWN0aXZlKSB7DQogICAgICBzdGF0
			ZS5hY3RpdmUgPSB0cnVlDQogICAgICBzY2hlZHVsZUhpZ2hsaWdodChjbSwgc3RhdGUpDQogICAg
			fQ0KICB9DQoNCiAgZnVuY3Rpb24gc2NoZWR1bGVIaWdobGlnaHQoY20sIHN0YXRlKSB7DQogICAg
			Y2xlYXJUaW1lb3V0KHN0YXRlLnRpbWVvdXQpOw0KICAgIHN0YXRlLnRpbWVvdXQgPSBzZXRUaW1l
			b3V0KGZ1bmN0aW9uKCkge2hpZ2hsaWdodE1hdGNoZXMoY20pO30sIHN0YXRlLm9wdGlvbnMuZGVs
			YXkpOw0KICB9DQoNCiAgZnVuY3Rpb24gYWRkT3ZlcmxheShjbSwgcXVlcnksIGhhc0JvdW5kYXJ5
			LCBzdHlsZSkgew0KICAgIHZhciBzdGF0ZSA9IGNtLnN0YXRlLm1hdGNoSGlnaGxpZ2h0ZXI7DQog
			ICAgY20uYWRkT3ZlcmxheShzdGF0ZS5vdmVybGF5ID0gbWFrZU92ZXJsYXkocXVlcnksIGhhc0Jv
			dW5kYXJ5LCBzdHlsZSkpOw0KICAgIGlmIChzdGF0ZS5vcHRpb25zLmFubm90YXRlU2Nyb2xsYmFy
			ICYmIGNtLnNob3dNYXRjaGVzT25TY3JvbGxiYXIpIHsNCiAgICAgIHZhciBzZWFyY2hGb3IgPSBo
			YXNCb3VuZGFyeSA/IG5ldyBSZWdFeHAoKC9cdy8udGVzdChxdWVyeS5jaGFyQXQoMCkpID8gIlxc
			YiIgOiAiIikgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
			ICBxdWVyeS5yZXBsYWNlKC9bXFxcWy4rKj8oKXt8XiRdL2csICJcXCQmIikgKw0KICAgICAgICAg
			ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoL1x3Ly50ZXN0KHF1ZXJ5LmNo
			YXJBdChxdWVyeS5sZW5ndGggLSAxKSkgPyAiXFxiIiA6ICIiKSkgOiBxdWVyeTsNCiAgICAgIHN0
			YXRlLm1hdGNoZXNvbnNjcm9sbCA9IGNtLnNob3dNYXRjaGVzT25TY3JvbGxiYXIoc2VhcmNoRm9y
			LCBmYWxzZSwNCiAgICAgICAge2NsYXNzTmFtZTogIkNvZGVNaXJyb3Itc2VsZWN0aW9uLWhpZ2hs
			aWdodC1zY3JvbGxiYXIifSk7DQogICAgfQ0KICB9DQoNCiAgZnVuY3Rpb24gcmVtb3ZlT3Zlcmxh
			eShjbSkgew0KICAgIHZhciBzdGF0ZSA9IGNtLnN0YXRlLm1hdGNoSGlnaGxpZ2h0ZXI7DQogICAg
			aWYgKHN0YXRlLm92ZXJsYXkpIHsNCiAgICAgIGNtLnJlbW92ZU92ZXJsYXkoc3RhdGUub3Zlcmxh
			eSk7DQogICAgICBzdGF0ZS5vdmVybGF5ID0gbnVsbDsNCiAgICAgIGlmIChzdGF0ZS5tYXRjaGVz
			b25zY3JvbGwpIHsNCiAgICAgICAgc3RhdGUubWF0Y2hlc29uc2Nyb2xsLmNsZWFyKCk7DQogICAg
			ICAgIHN0YXRlLm1hdGNoZXNvbnNjcm9sbCA9IG51bGw7DQogICAgICB9DQogICAgfQ0KICB9DQoN
			CiAgZnVuY3Rpb24gaGlnaGxpZ2h0TWF0Y2hlcyhjbSkgew0KICAgIGNtLm9wZXJhdGlvbihmdW5j
			dGlvbigpIHsNCiAgICAgIHZhciBzdGF0ZSA9IGNtLnN0YXRlLm1hdGNoSGlnaGxpZ2h0ZXI7DQog
			ICAgICByZW1vdmVPdmVybGF5KGNtKTsNCiAgICAgIGlmICghY20uc29tZXRoaW5nU2VsZWN0ZWQo
			KSAmJiBzdGF0ZS5vcHRpb25zLnNob3dUb2tlbikgew0KICAgICAgICB2YXIgcmUgPSBzdGF0ZS5v
			cHRpb25zLnNob3dUb2tlbiA9PT0gdHJ1ZSA/IC9bXHckXS8gOiBzdGF0ZS5vcHRpb25zLnNob3dU
			b2tlbjsNCiAgICAgICAgdmFyIGN1ciA9IGNtLmdldEN1cnNvcigpLCBsaW5lID0gY20uZ2V0TGlu
			ZShjdXIubGluZSksIHN0YXJ0ID0gY3VyLmNoLCBlbmQgPSBzdGFydDsNCiAgICAgICAgd2hpbGUg
			KHN0YXJ0ICYmIHJlLnRlc3QobGluZS5jaGFyQXQoc3RhcnQgLSAxKSkpIC0tc3RhcnQ7DQogICAg
			ICAgIHdoaWxlIChlbmQgPCBsaW5lLmxlbmd0aCAmJiByZS50ZXN0KGxpbmUuY2hhckF0KGVuZCkp
			KSArK2VuZDsNCiAgICAgICAgaWYgKHN0YXJ0IDwgZW5kKQ0KICAgICAgICAgIGFkZE92ZXJsYXko
			Y20sIGxpbmUuc2xpY2Uoc3RhcnQsIGVuZCksIHJlLCBzdGF0ZS5vcHRpb25zLnN0eWxlKTsNCiAg
			ICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdmFyIGZyb20gPSBjbS5nZXRDdXJzb3IoImZy
			b20iKSwgdG8gPSBjbS5nZXRDdXJzb3IoInRvIik7DQogICAgICBpZiAoZnJvbS5saW5lICE9IHRv
			LmxpbmUpIHJldHVybjsNCiAgICAgIGlmIChzdGF0ZS5vcHRpb25zLndvcmRzT25seSAmJiAhaXNX
			b3JkKGNtLCBmcm9tLCB0bykpIHJldHVybjsNCiAgICAgIHZhciBzZWxlY3Rpb24gPSBjbS5nZXRS
			YW5nZShmcm9tLCB0bykNCiAgICAgIGlmIChzdGF0ZS5vcHRpb25zLnRyaW0pIHNlbGVjdGlvbiA9
			IHNlbGVjdGlvbi5yZXBsYWNlKC9eXHMrfFxzKyQvZywgIiIpDQogICAgICBpZiAoc2VsZWN0aW9u
			Lmxlbmd0aCA+PSBzdGF0ZS5vcHRpb25zLm1pbkNoYXJzKQ0KICAgICAgICBhZGRPdmVybGF5KGNt
			LCBzZWxlY3Rpb24sIGZhbHNlLCBzdGF0ZS5vcHRpb25zLnN0eWxlKTsNCiAgICB9KTsNCiAgfQ0K
			DQogIGZ1bmN0aW9uIGlzV29yZChjbSwgZnJvbSwgdG8pIHsNCiAgICB2YXIgc3RyID0gY20uZ2V0
			UmFuZ2UoZnJvbSwgdG8pOw0KICAgIGlmIChzdHIubWF0Y2goL15cdyskLykgIT09IG51bGwpIHsN
			CiAgICAgICAgaWYgKGZyb20uY2ggPiAwKSB7DQogICAgICAgICAgICB2YXIgcG9zID0ge2xpbmU6
			IGZyb20ubGluZSwgY2g6IGZyb20uY2ggLSAxfTsNCiAgICAgICAgICAgIHZhciBjaHIgPSBjbS5n
			ZXRSYW5nZShwb3MsIGZyb20pOw0KICAgICAgICAgICAgaWYgKGNoci5tYXRjaCgvXFcvKSA9PT0g
			bnVsbCkgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmICh0by5jaCA8IGNtLmdl
			dExpbmUoZnJvbS5saW5lKS5sZW5ndGgpIHsNCiAgICAgICAgICAgIHZhciBwb3MgPSB7bGluZTog
			dG8ubGluZSwgY2g6IHRvLmNoICsgMX07DQogICAgICAgICAgICB2YXIgY2hyID0gY20uZ2V0UmFu
			Z2UodG8sIHBvcyk7DQogICAgICAgICAgICBpZiAoY2hyLm1hdGNoKC9cVy8pID09PSBudWxsKSBy
			ZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfSBlbHNl
			IHJldHVybiBmYWxzZTsNCiAgfQ0KDQogIGZ1bmN0aW9uIGJvdW5kYXJpZXNBcm91bmQoc3RyZWFt
			LCByZSkgew0KICAgIHJldHVybiAoIXN0cmVhbS5zdGFydCB8fCAhcmUudGVzdChzdHJlYW0uc3Ry
			aW5nLmNoYXJBdChzdHJlYW0uc3RhcnQgLSAxKSkpICYmDQogICAgICAoc3RyZWFtLnBvcyA9PSBz
			dHJlYW0uc3RyaW5nLmxlbmd0aCB8fCAhcmUudGVzdChzdHJlYW0uc3RyaW5nLmNoYXJBdChzdHJl
			YW0ucG9zKSkpOw0KICB9DQoNCiAgZnVuY3Rpb24gbWFrZU92ZXJsYXkocXVlcnksIGhhc0JvdW5k
			YXJ5LCBzdHlsZSkgew0KICAgIHJldHVybiB7dG9rZW46IGZ1bmN0aW9uKHN0cmVhbSkgew0KICAg
			ICAgaWYgKHN0cmVhbS5tYXRjaChxdWVyeSkgJiYNCiAgICAgICAgICAoIWhhc0JvdW5kYXJ5IHx8
			IGJvdW5kYXJpZXNBcm91bmQoc3RyZWFtLCBoYXNCb3VuZGFyeSkpKQ0KICAgICAgICByZXR1cm4g
			c3R5bGU7DQogICAgICBzdHJlYW0ubmV4dCgpOw0KICAgICAgc3RyZWFtLnNraXBUbyhxdWVyeS5j
			aGFyQXQoMCkpIHx8IHN0cmVhbS5za2lwVG9FbmQoKTsNCiAgICB9fTsNCiAgfQ0KfSk7
		</Resource>
		<Resource ID="f63a7b6c-28bc-42a7-9142-9446b5dd9ac3" Type="js" Name="code_editor_serach.js">
			Ly8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhl
			cnMNCi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJy
			b3IubmV0L0xJQ0VOU0UNCg0KLy8gRGVmaW5lIHNlYXJjaCBjb21tYW5kcy4gRGVwZW5kcyBvbiBk
			aWFsb2cuanMgb3IgYW5vdGhlcg0KLy8gaW1wbGVtZW50YXRpb24gb2YgdGhlIG9wZW5EaWFsb2cg
			bWV0aG9kLg0KDQovLyBSZXBsYWNlIHdvcmtzIGEgbGl0dGxlIG9kZGx5IC0tIGl0IHdpbGwgZG8g
			dGhlIHJlcGxhY2Ugb24gdGhlIG5leHQNCi8vIEN0cmwtRyAob3Igd2hhdGV2ZXIgaXMgYm91bmQg
			dG8gZmluZE5leHQpIHByZXNzLiBZb3UgcHJldmVudCBhDQovLyByZXBsYWNlIGJ5IG1ha2luZyBz
			dXJlIHRoZSBtYXRjaCBpcyBubyBsb25nZXIgc2VsZWN0ZWQgd2hlbiBoaXR0aW5nDQovLyBDdHJs
			LUcuDQoNCihmdW5jdGlvbihtb2QpIHsNCiAgaWYgKHR5cGVvZiBleHBvcnRzID09ICJvYmplY3Qi
			ICYmIHR5cGVvZiBtb2R1bGUgPT0gIm9iamVjdCIpIC8vIENvbW1vbkpTDQogICAgbW9kKHJlcXVp
			cmUoIi4uLy4uL2xpYi9jb2RlbWlycm9yIiksIHJlcXVpcmUoIi4vc2VhcmNoY3Vyc29yIiksIHJl
			cXVpcmUoIi4uL2RpYWxvZy9kaWFsb2ciKSk7DQogIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0g
			ImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kKSAvLyBBTUQNCiAgICBkZWZpbmUoWyIuLi8uLi9saWIv
			Y29kZW1pcnJvciIsICIuL3NlYXJjaGN1cnNvciIsICIuLi9kaWFsb2cvZGlhbG9nIl0sIG1vZCk7
			DQogIGVsc2UgLy8gUGxhaW4gYnJvd3NlciBlbnYNCiAgICBtb2QoQ29kZU1pcnJvcik7DQp9KShm
			dW5jdGlvbihDb2RlTWlycm9yKSB7DQogICJ1c2Ugc3RyaWN0IjsNCg0KICAvLyBkZWZhdWx0IHNl
			YXJjaCBwYW5lbCBsb2NhdGlvbg0KICBDb2RlTWlycm9yLmRlZmluZU9wdGlvbigic2VhcmNoIiwg
			e2JvdHRvbTogZmFsc2V9KTsNCg0KICBmdW5jdGlvbiBzZWFyY2hPdmVybGF5KHF1ZXJ5LCBjYXNl
			SW5zZW5zaXRpdmUpIHsNCiAgICBpZiAodHlwZW9mIHF1ZXJ5ID09ICJzdHJpbmciKQ0KICAgICAg
			cXVlcnkgPSBuZXcgUmVnRXhwKHF1ZXJ5LnJlcGxhY2UoL1tcLVxbXF1cL1x7XH1cKFwpXCpcK1w/
			XC5cXFxeXCRcfF0vZywgIlxcJCYiKSwgY2FzZUluc2Vuc2l0aXZlID8gImdpIiA6ICJnIik7DQog
			ICAgZWxzZSBpZiAoIXF1ZXJ5Lmdsb2JhbCkNCiAgICAgIHF1ZXJ5ID0gbmV3IFJlZ0V4cChxdWVy
			eS5zb3VyY2UsIHF1ZXJ5Lmlnbm9yZUNhc2UgPyAiZ2kiIDogImciKTsNCg0KICAgIHJldHVybiB7
			dG9rZW46IGZ1bmN0aW9uKHN0cmVhbSkgew0KICAgICAgcXVlcnkubGFzdEluZGV4ID0gc3RyZWFt
			LnBvczsNCiAgICAgIHZhciBtYXRjaCA9IHF1ZXJ5LmV4ZWMoc3RyZWFtLnN0cmluZyk7DQogICAg
			ICBpZiAobWF0Y2ggJiYgbWF0Y2guaW5kZXggPT0gc3RyZWFtLnBvcykgew0KICAgICAgICBzdHJl
			YW0ucG9zICs9IG1hdGNoWzBdLmxlbmd0aCB8fCAxOw0KICAgICAgICByZXR1cm4gInNlYXJjaGlu
			ZyI7DQogICAgICB9IGVsc2UgaWYgKG1hdGNoKSB7DQogICAgICAgIHN0cmVhbS5wb3MgPSBtYXRj
			aC5pbmRleDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHN0cmVhbS5za2lwVG9FbmQoKTsNCiAg
			ICAgIH0NCiAgICB9fTsNCiAgfQ0KDQogIGZ1bmN0aW9uIFNlYXJjaFN0YXRlKCkgew0KICAgIHRo
			aXMucG9zRnJvbSA9IHRoaXMucG9zVG8gPSB0aGlzLmxhc3RRdWVyeSA9IHRoaXMucXVlcnkgPSBu
			dWxsOw0KICAgIHRoaXMub3ZlcmxheSA9IG51bGw7DQogIH0NCg0KICBmdW5jdGlvbiBnZXRTZWFy
			Y2hTdGF0ZShjbSkgew0KICAgIHJldHVybiBjbS5zdGF0ZS5zZWFyY2ggfHwgKGNtLnN0YXRlLnNl
			YXJjaCA9IG5ldyBTZWFyY2hTdGF0ZSgpKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHF1ZXJ5Q2FzZUlu
			c2Vuc2l0aXZlKHF1ZXJ5KSB7DQogICAgcmV0dXJuIHR5cGVvZiBxdWVyeSA9PSAic3RyaW5nIiAm
			JiBxdWVyeSA9PSBxdWVyeS50b0xvd2VyQ2FzZSgpOw0KICB9DQoNCiAgZnVuY3Rpb24gZ2V0U2Vh
			cmNoQ3Vyc29yKGNtLCBxdWVyeSwgcG9zKSB7DQogICAgLy8gSGV1cmlzdGljOiBpZiB0aGUgcXVl
			cnkgc3RyaW5nIGlzIGFsbCBsb3dlcmNhc2UsIGRvIGEgY2FzZSBpbnNlbnNpdGl2ZSBzZWFyY2gu
			DQogICAgcmV0dXJuIGNtLmdldFNlYXJjaEN1cnNvcihxdWVyeSwgcG9zLCB7Y2FzZUZvbGQ6IHF1
			ZXJ5Q2FzZUluc2Vuc2l0aXZlKHF1ZXJ5KSwgbXVsdGlsaW5lOiB0cnVlfSk7DQogIH0NCg0KICBm
			dW5jdGlvbiBwZXJzaXN0ZW50RGlhbG9nKGNtLCB0ZXh0LCBkZWZsdCwgb25FbnRlciwgb25LZXlE
			b3duKSB7DQogICAgY20ub3BlbkRpYWxvZyh0ZXh0LCBvbkVudGVyLCB7DQogICAgICB2YWx1ZTog
			ZGVmbHQsDQogICAgICBzZWxlY3RWYWx1ZU9uT3BlbjogdHJ1ZSwNCiAgICAgIGNsb3NlT25FbnRl
			cjogZmFsc2UsDQogICAgICBvbkNsb3NlOiBmdW5jdGlvbigpIHsgY2xlYXJTZWFyY2goY20pOyB9
			LA0KICAgICAgb25LZXlEb3duOiBvbktleURvd24sDQogICAgICBib3R0b206IGNtLm9wdGlvbnMu
			c2VhcmNoLmJvdHRvbQ0KICAgIH0pOw0KICB9DQoNCiAgZnVuY3Rpb24gZGlhbG9nKGNtLCB0ZXh0
			LCBzaG9ydFRleHQsIGRlZmx0LCBmKSB7DQogICAgaWYgKGNtLm9wZW5EaWFsb2cpIGNtLm9wZW5E
			aWFsb2codGV4dCwgZiwge3ZhbHVlOiBkZWZsdCwgc2VsZWN0VmFsdWVPbk9wZW46IHRydWUsIGJv
			dHRvbTogY20ub3B0aW9ucy5zZWFyY2guYm90dG9tfSk7DQogICAgZWxzZSBmKHByb21wdChzaG9y
			dFRleHQsIGRlZmx0KSk7DQogIH0NCg0KICBmdW5jdGlvbiBjb25maXJtRGlhbG9nKGNtLCB0ZXh0
			LCBzaG9ydFRleHQsIGZzKSB7DQogICAgaWYgKGNtLm9wZW5Db25maXJtKSBjbS5vcGVuQ29uZmly
			bSh0ZXh0LCBmcyk7DQogICAgZWxzZSBpZiAoY29uZmlybShzaG9ydFRleHQpKSBmc1swXSgpOw0K
			ICB9DQoNCiAgZnVuY3Rpb24gcGFyc2VTdHJpbmcoc3RyaW5nKSB7DQogICAgcmV0dXJuIHN0cmlu
			Zy5yZXBsYWNlKC9cXChbbnJ0XFxdKS9nLCBmdW5jdGlvbihtYXRjaCwgY2gpIHsNCiAgICAgIGlm
			IChjaCA9PSAibiIpIHJldHVybiAiXG4iDQogICAgICBpZiAoY2ggPT0gInIiKSByZXR1cm4gIlxy
			Ig0KICAgICAgaWYgKGNoID09ICJ0IikgcmV0dXJuICJcdCINCiAgICAgIGlmIChjaCA9PSAiXFwi
			KSByZXR1cm4gIlxcIg0KICAgICAgcmV0dXJuIG1hdGNoDQogICAgfSkNCiAgfQ0KDQogIGZ1bmN0
			aW9uIHBhcnNlUXVlcnkocXVlcnkpIHsNCiAgICB2YXIgaXNSRSA9IHF1ZXJ5Lm1hdGNoKC9eXC8o
			LiopXC8oW2Etel0qKSQvKTsNCiAgICBpZiAoaXNSRSkgew0KICAgICAgdHJ5IHsgcXVlcnkgPSBu
			ZXcgUmVnRXhwKGlzUkVbMV0sIGlzUkVbMl0uaW5kZXhPZigiaSIpID09IC0xID8gIiIgOiAiaSIp
			OyB9DQogICAgICBjYXRjaChlKSB7fSAvLyBOb3QgYSByZWd1bGFyIGV4cHJlc3Npb24gYWZ0ZXIg
			YWxsLCBkbyBhIHN0cmluZyBzZWFyY2gNCiAgICB9IGVsc2Ugew0KICAgICAgcXVlcnkgPSBwYXJz
			ZVN0cmluZyhxdWVyeSkNCiAgICB9DQogICAgaWYgKHR5cGVvZiBxdWVyeSA9PSAic3RyaW5nIiA/
			IHF1ZXJ5ID09ICIiIDogcXVlcnkudGVzdCgiIikpDQogICAgICBxdWVyeSA9IC94Xi87DQogICAg
			cmV0dXJuIHF1ZXJ5Ow0KICB9DQoNCiAgZnVuY3Rpb24gc3RhcnRTZWFyY2goY20sIHN0YXRlLCBx
			dWVyeSkgew0KICAgIHN0YXRlLnF1ZXJ5VGV4dCA9IHF1ZXJ5Ow0KICAgIHN0YXRlLnF1ZXJ5ID0g
			cGFyc2VRdWVyeShxdWVyeSk7DQogICAgY20ucmVtb3ZlT3ZlcmxheShzdGF0ZS5vdmVybGF5LCBx
			dWVyeUNhc2VJbnNlbnNpdGl2ZShzdGF0ZS5xdWVyeSkpOw0KICAgIHN0YXRlLm92ZXJsYXkgPSBz
			ZWFyY2hPdmVybGF5KHN0YXRlLnF1ZXJ5LCBxdWVyeUNhc2VJbnNlbnNpdGl2ZShzdGF0ZS5xdWVy
			eSkpOw0KICAgIGNtLmFkZE92ZXJsYXkoc3RhdGUub3ZlcmxheSk7DQogICAgaWYgKGNtLnNob3dN
			YXRjaGVzT25TY3JvbGxiYXIpIHsNCiAgICAgIGlmIChzdGF0ZS5hbm5vdGF0ZSkgeyBzdGF0ZS5h
			bm5vdGF0ZS5jbGVhcigpOyBzdGF0ZS5hbm5vdGF0ZSA9IG51bGw7IH0NCiAgICAgIHN0YXRlLmFu
			bm90YXRlID0gY20uc2hvd01hdGNoZXNPblNjcm9sbGJhcihzdGF0ZS5xdWVyeSwgcXVlcnlDYXNl
			SW5zZW5zaXRpdmUoc3RhdGUucXVlcnkpKTsNCiAgICB9DQogIH0NCg0KICBmdW5jdGlvbiBkb1Nl
			YXJjaChjbSwgcmV2LCBwZXJzaXN0ZW50LCBpbW1lZGlhdGUpIHsNCiAgICB2YXIgc3RhdGUgPSBn
			ZXRTZWFyY2hTdGF0ZShjbSk7DQogICAgaWYgKHN0YXRlLnF1ZXJ5KSByZXR1cm4gZmluZE5leHQo
			Y20sIHJldik7DQogICAgdmFyIHEgPSBjbS5nZXRTZWxlY3Rpb24oKSB8fCBzdGF0ZS5sYXN0UXVl
			cnk7DQogICAgaWYgKHEgaW5zdGFuY2VvZiBSZWdFeHAgJiYgcS5zb3VyY2UgPT0gInheIikgcSA9
			IG51bGwNCiAgICBpZiAocGVyc2lzdGVudCAmJiBjbS5vcGVuRGlhbG9nKSB7DQogICAgICB2YXIg
			aGlkaW5nID0gbnVsbA0KICAgICAgdmFyIHNlYXJjaE5leHQgPSBmdW5jdGlvbihxdWVyeSwgZXZl
			bnQpIHsNCiAgICAgICAgQ29kZU1pcnJvci5lX3N0b3AoZXZlbnQpOw0KICAgICAgICBpZiAoIXF1
			ZXJ5KSByZXR1cm47DQogICAgICAgIGlmIChxdWVyeSAhPSBzdGF0ZS5xdWVyeVRleHQpIHsNCiAg
			ICAgICAgICBzdGFydFNlYXJjaChjbSwgc3RhdGUsIHF1ZXJ5KTsNCiAgICAgICAgICBzdGF0ZS5w
			b3NGcm9tID0gc3RhdGUucG9zVG8gPSBjbS5nZXRDdXJzb3IoKTsNCiAgICAgICAgfQ0KICAgICAg
			ICBpZiAoaGlkaW5nKSBoaWRpbmcuc3R5bGUub3BhY2l0eSA9IDENCiAgICAgICAgZmluZE5leHQo
			Y20sIGV2ZW50LnNoaWZ0S2V5LCBmdW5jdGlvbihfLCB0bykgew0KICAgICAgICAgIHZhciBkaWFs
			b2cNCiAgICAgICAgICBpZiAodG8ubGluZSA8IDMgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvciAm
			Jg0KICAgICAgICAgICAgICAoZGlhbG9nID0gY20uZGlzcGxheS53cmFwcGVyLnF1ZXJ5U2VsZWN0
			b3IoIi5Db2RlTWlycm9yLWRpYWxvZyIpKSAmJg0KICAgICAgICAgICAgICBkaWFsb2cuZ2V0Qm91
			bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tIC0gNCA+IGNtLmN1cnNvckNvb3Jkcyh0bywgIndpbmRv
			dyIpLnRvcCkNCiAgICAgICAgICAgIChoaWRpbmcgPSBkaWFsb2cpLnN0eWxlLm9wYWNpdHkgPSAu
			NA0KICAgICAgICB9KQ0KICAgICAgfTsNCiAgICAgIHBlcnNpc3RlbnREaWFsb2coY20sIGdldFF1
			ZXJ5RGlhbG9nKGNtKSwgcSwgc2VhcmNoTmV4dCwgZnVuY3Rpb24oZXZlbnQsIHF1ZXJ5KSB7DQog
			ICAgICAgIHZhciBrZXlOYW1lID0gQ29kZU1pcnJvci5rZXlOYW1lKGV2ZW50KQ0KICAgICAgICB2
			YXIgZXh0cmEgPSBjbS5nZXRPcHRpb24oJ2V4dHJhS2V5cycpLCBjbWQgPSAoZXh0cmEgJiYgZXh0
			cmFba2V5TmFtZV0pIHx8IENvZGVNaXJyb3Iua2V5TWFwW2NtLmdldE9wdGlvbigia2V5TWFwIild
			W2tleU5hbWVdDQogICAgICAgIGlmIChjbWQgPT0gImZpbmROZXh0IiB8fCBjbWQgPT0gImZpbmRQ
			cmV2IiB8fA0KICAgICAgICAgIGNtZCA9PSAiZmluZFBlcnNpc3RlbnROZXh0IiB8fCBjbWQgPT0g
			ImZpbmRQZXJzaXN0ZW50UHJldiIpIHsNCiAgICAgICAgICBDb2RlTWlycm9yLmVfc3RvcChldmVu
			dCk7DQogICAgICAgICAgc3RhcnRTZWFyY2goY20sIGdldFNlYXJjaFN0YXRlKGNtKSwgcXVlcnkp
			Ow0KICAgICAgICAgIGNtLmV4ZWNDb21tYW5kKGNtZCk7DQogICAgICAgIH0gZWxzZSBpZiAoY21k
			ID09ICJmaW5kIiB8fCBjbWQgPT0gImZpbmRQZXJzaXN0ZW50Iikgew0KICAgICAgICAgIENvZGVN
			aXJyb3IuZV9zdG9wKGV2ZW50KTsNCiAgICAgICAgICBzZWFyY2hOZXh0KHF1ZXJ5LCBldmVudCk7
			DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgaWYgKGltbWVkaWF0ZSAmJiBxKSB7DQogICAg
			ICAgIHN0YXJ0U2VhcmNoKGNtLCBzdGF0ZSwgcSk7DQogICAgICAgIGZpbmROZXh0KGNtLCByZXYp
			Ow0KICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICBkaWFsb2coY20sIGdldFF1ZXJ5RGlhbG9n
			KGNtKSwgIlNlYXJjaCBmb3I6IiwgcSwgZnVuY3Rpb24ocXVlcnkpIHsNCiAgICAgICAgaWYgKHF1
			ZXJ5ICYmICFzdGF0ZS5xdWVyeSkgY20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkgew0KICAgICAgICAg
			IHN0YXJ0U2VhcmNoKGNtLCBzdGF0ZSwgcXVlcnkpOw0KICAgICAgICAgIHN0YXRlLnBvc0Zyb20g
			PSBzdGF0ZS5wb3NUbyA9IGNtLmdldEN1cnNvcigpOw0KICAgICAgICAgIGZpbmROZXh0KGNtLCBy
			ZXYpOw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0NCiAgfQ0KDQogIGZ1bmN0aW9uIGZp
			bmROZXh0KGNtLCByZXYsIGNhbGxiYWNrKSB7Y20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkgew0KICAg
			IHZhciBzdGF0ZSA9IGdldFNlYXJjaFN0YXRlKGNtKTsNCiAgICB2YXIgY3Vyc29yID0gZ2V0U2Vh
			cmNoQ3Vyc29yKGNtLCBzdGF0ZS5xdWVyeSwgcmV2ID8gc3RhdGUucG9zRnJvbSA6IHN0YXRlLnBv
			c1RvKTsNCiAgICBpZiAoIWN1cnNvci5maW5kKHJldikpIHsNCiAgICAgIGN1cnNvciA9IGdldFNl
			YXJjaEN1cnNvcihjbSwgc3RhdGUucXVlcnksIHJldiA/IENvZGVNaXJyb3IuUG9zKGNtLmxhc3RM
			aW5lKCkpIDogQ29kZU1pcnJvci5Qb3MoY20uZmlyc3RMaW5lKCksIDApKTsNCiAgICAgIGlmICgh
			Y3Vyc29yLmZpbmQocmV2KSkgcmV0dXJuOw0KICAgIH0NCiAgICBjbS5zZXRTZWxlY3Rpb24oY3Vy
			c29yLmZyb20oKSwgY3Vyc29yLnRvKCkpOw0KICAgIGNtLnNjcm9sbEludG9WaWV3KHtmcm9tOiBj
			dXJzb3IuZnJvbSgpLCB0bzogY3Vyc29yLnRvKCl9LCAyMCk7DQogICAgc3RhdGUucG9zRnJvbSA9
			IGN1cnNvci5mcm9tKCk7IHN0YXRlLnBvc1RvID0gY3Vyc29yLnRvKCk7DQogICAgaWYgKGNhbGxi
			YWNrKSBjYWxsYmFjayhjdXJzb3IuZnJvbSgpLCBjdXJzb3IudG8oKSkNCiAgfSk7fQ0KDQogIGZ1
			bmN0aW9uIGNsZWFyU2VhcmNoKGNtKSB7Y20ub3BlcmF0aW9uKGZ1bmN0aW9uKCkgew0KICAgIHZh
			ciBzdGF0ZSA9IGdldFNlYXJjaFN0YXRlKGNtKTsNCiAgICBzdGF0ZS5sYXN0UXVlcnkgPSBzdGF0
			ZS5xdWVyeTsNCiAgICBpZiAoIXN0YXRlLnF1ZXJ5KSByZXR1cm47DQogICAgc3RhdGUucXVlcnkg
			PSBzdGF0ZS5xdWVyeVRleHQgPSBudWxsOw0KICAgIGNtLnJlbW92ZU92ZXJsYXkoc3RhdGUub3Zl
			cmxheSk7DQogICAgaWYgKHN0YXRlLmFubm90YXRlKSB7IHN0YXRlLmFubm90YXRlLmNsZWFyKCk7
			IHN0YXRlLmFubm90YXRlID0gbnVsbDsgfQ0KICB9KTt9DQoNCg0KICBmdW5jdGlvbiBnZXRRdWVy
			eURpYWxvZyhjbSkgIHsNCiAgICByZXR1cm4gJzxzcGFuIGNsYXNzPSJDb2RlTWlycm9yLXNlYXJj
			aC1sYWJlbCI+JyArIGNtLnBocmFzZSgiU2VhcmNoOiIpICsgJzwvc3Bhbj4gPGlucHV0IHR5cGU9
			InRleHQiIHN0eWxlPSJ3aWR0aDogMTBlbSIgY2xhc3M9IkNvZGVNaXJyb3Itc2VhcmNoLWZpZWxk
			Ii8+IDxzcGFuIHN0eWxlPSJjb2xvcjogIzg4OCIgY2xhc3M9IkNvZGVNaXJyb3Itc2VhcmNoLWhp
			bnQiPicgKyBjbS5waHJhc2UoIihVc2UgL3JlLyBzeW50YXggZm9yIHJlZ2V4cCBzZWFyY2gpIikg
			KyAnPC9zcGFuPic7DQogIH0NCiAgZnVuY3Rpb24gZ2V0UmVwbGFjZVF1ZXJ5RGlhbG9nKGNtKSB7
			DQogICAgcmV0dXJuICcgPGlucHV0IHR5cGU9InRleHQiIHN0eWxlPSJ3aWR0aDogMTBlbSIgY2xh
			c3M9IkNvZGVNaXJyb3Itc2VhcmNoLWZpZWxkIi8+IDxzcGFuIHN0eWxlPSJjb2xvcjogIzg4OCIg
			Y2xhc3M9IkNvZGVNaXJyb3Itc2VhcmNoLWhpbnQiPicgKyBjbS5waHJhc2UoIihVc2UgL3JlLyBz
			eW50YXggZm9yIHJlZ2V4cCBzZWFyY2gpIikgKyAnPC9zcGFuPic7DQogIH0NCiAgZnVuY3Rpb24g
			Z2V0UmVwbGFjZW1lbnRRdWVyeURpYWxvZyhjbSkgew0KICAgIHJldHVybiAnPHNwYW4gY2xhc3M9
			IkNvZGVNaXJyb3Itc2VhcmNoLWxhYmVsIj4nICsgY20ucGhyYXNlKCJXaXRoOiIpICsgJzwvc3Bh
			bj4gPGlucHV0IHR5cGU9InRleHQiIHN0eWxlPSJ3aWR0aDogMTBlbSIgY2xhc3M9IkNvZGVNaXJy
			b3Itc2VhcmNoLWZpZWxkIi8+JzsNCiAgfQ0KICBmdW5jdGlvbiBnZXREb1JlcGxhY2VDb25maXJt
			KGNtKSB7DQogICAgcmV0dXJuICc8c3BhbiBjbGFzcz0iQ29kZU1pcnJvci1zZWFyY2gtbGFiZWwi
			PicgKyBjbS5waHJhc2UoIlJlcGxhY2U/IikgKyAnPC9zcGFuPiA8YnV0dG9uPicgKyBjbS5waHJh
			c2UoIlllcyIpICsgJzwvYnV0dG9uPiA8YnV0dG9uPicgKyBjbS5waHJhc2UoIk5vIikgKyAnPC9i
			dXR0b24+IDxidXR0b24+JyArIGNtLnBocmFzZSgiQWxsIikgKyAnPC9idXR0b24+IDxidXR0b24+
			JyArIGNtLnBocmFzZSgiU3RvcCIpICsgJzwvYnV0dG9uPiAnOw0KICB9DQoNCiAgZnVuY3Rpb24g
			cmVwbGFjZUFsbChjbSwgcXVlcnksIHRleHQpIHsNCiAgICBjbS5vcGVyYXRpb24oZnVuY3Rpb24o
			KSB7DQogICAgICBmb3IgKHZhciBjdXJzb3IgPSBnZXRTZWFyY2hDdXJzb3IoY20sIHF1ZXJ5KTsg
			Y3Vyc29yLmZpbmROZXh0KCk7KSB7DQogICAgICAgIGlmICh0eXBlb2YgcXVlcnkgIT0gInN0cmlu
			ZyIpIHsNCiAgICAgICAgICB2YXIgbWF0Y2ggPSBjbS5nZXRSYW5nZShjdXJzb3IuZnJvbSgpLCBj
			dXJzb3IudG8oKSkubWF0Y2gocXVlcnkpOw0KICAgICAgICAgIGN1cnNvci5yZXBsYWNlKHRleHQu
			cmVwbGFjZSgvXCQoXGQpL2csIGZ1bmN0aW9uKF8sIGkpIHtyZXR1cm4gbWF0Y2hbaV07fSkpOw0K
			ICAgICAgICB9IGVsc2UgY3Vyc29yLnJlcGxhY2UodGV4dCk7DQogICAgICB9DQogICAgfSk7DQog
			IH0NCg0KICBmdW5jdGlvbiByZXBsYWNlKGNtLCBhbGwpIHsNCiAgICBpZiAoY20uZ2V0T3B0aW9u
			KCJyZWFkT25seSIpKSByZXR1cm47DQogICAgdmFyIHF1ZXJ5ID0gY20uZ2V0U2VsZWN0aW9uKCkg
			fHwgZ2V0U2VhcmNoU3RhdGUoY20pLmxhc3RRdWVyeTsNCiAgICB2YXIgZGlhbG9nVGV4dCA9ICc8
			c3BhbiBjbGFzcz0iQ29kZU1pcnJvci1zZWFyY2gtbGFiZWwiPicgKyAoYWxsID8gY20ucGhyYXNl
			KCJSZXBsYWNlIGFsbDoiKSA6IGNtLnBocmFzZSgiUmVwbGFjZToiKSkgKyAnPC9zcGFuPic7DQog
			ICAgZGlhbG9nKGNtLCBkaWFsb2dUZXh0ICsgZ2V0UmVwbGFjZVF1ZXJ5RGlhbG9nKGNtKSwgZGlh
			bG9nVGV4dCwgcXVlcnksIGZ1bmN0aW9uKHF1ZXJ5KSB7DQogICAgICBpZiAoIXF1ZXJ5KSByZXR1
			cm47DQogICAgICBxdWVyeSA9IHBhcnNlUXVlcnkocXVlcnkpOw0KICAgICAgZGlhbG9nKGNtLCBn
			ZXRSZXBsYWNlbWVudFF1ZXJ5RGlhbG9nKGNtKSwgY20ucGhyYXNlKCJSZXBsYWNlIHdpdGg6Iiks
			ICIiLCBmdW5jdGlvbih0ZXh0KSB7DQogICAgICAgIHRleHQgPSBwYXJzZVN0cmluZyh0ZXh0KQ0K
			ICAgICAgICBpZiAoYWxsKSB7DQogICAgICAgICAgcmVwbGFjZUFsbChjbSwgcXVlcnksIHRleHQp
			DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY2xlYXJTZWFyY2goY20pOw0KICAgICAgICAg
			IHZhciBjdXJzb3IgPSBnZXRTZWFyY2hDdXJzb3IoY20sIHF1ZXJ5LCBjbS5nZXRDdXJzb3IoImZy
			b20iKSk7DQogICAgICAgICAgdmFyIGFkdmFuY2UgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAg
			IHZhciBzdGFydCA9IGN1cnNvci5mcm9tKCksIG1hdGNoOw0KICAgICAgICAgICAgaWYgKCEobWF0
			Y2ggPSBjdXJzb3IuZmluZE5leHQoKSkpIHsNCiAgICAgICAgICAgICAgY3Vyc29yID0gZ2V0U2Vh
			cmNoQ3Vyc29yKGNtLCBxdWVyeSk7DQogICAgICAgICAgICAgIGlmICghKG1hdGNoID0gY3Vyc29y
			LmZpbmROZXh0KCkpIHx8DQogICAgICAgICAgICAgICAgICAoc3RhcnQgJiYgY3Vyc29yLmZyb20o
			KS5saW5lID09IHN0YXJ0LmxpbmUgJiYgY3Vyc29yLmZyb20oKS5jaCA9PSBzdGFydC5jaCkpIHJl
			dHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNtLnNldFNlbGVjdGlvbihjdXJzb3Iu
			ZnJvbSgpLCBjdXJzb3IudG8oKSk7DQogICAgICAgICAgICBjbS5zY3JvbGxJbnRvVmlldyh7ZnJv
			bTogY3Vyc29yLmZyb20oKSwgdG86IGN1cnNvci50bygpfSk7DQogICAgICAgICAgICBjb25maXJt
			RGlhbG9nKGNtLCBnZXREb1JlcGxhY2VDb25maXJtKGNtKSwgY20ucGhyYXNlKCJSZXBsYWNlPyIp
			LA0KICAgICAgICAgICAgICAgICAgICAgICAgICBbZnVuY3Rpb24oKSB7ZG9SZXBsYWNlKG1hdGNo
			KTt9LCBhZHZhbmNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7cmVw
			bGFjZUFsbChjbSwgcXVlcnksIHRleHQpfV0pOw0KICAgICAgICAgIH07DQogICAgICAgICAgdmFy
			IGRvUmVwbGFjZSA9IGZ1bmN0aW9uKG1hdGNoKSB7DQogICAgICAgICAgICBjdXJzb3IucmVwbGFj
			ZSh0eXBlb2YgcXVlcnkgPT0gInN0cmluZyIgPyB0ZXh0IDoNCiAgICAgICAgICAgICAgICAgICAg
			ICAgICAgIHRleHQucmVwbGFjZSgvXCQoXGQpL2csIGZ1bmN0aW9uKF8sIGkpIHtyZXR1cm4gbWF0
			Y2hbaV07fSkpOw0KICAgICAgICAgICAgYWR2YW5jZSgpOw0KICAgICAgICAgIH07DQogICAgICAg
			ICAgYWR2YW5jZSgpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9KTsNCiAgfQ0KDQogIENv
			ZGVNaXJyb3IuY29tbWFuZHMuZmluZCA9IGZ1bmN0aW9uKGNtKSB7Y2xlYXJTZWFyY2goY20pOyBk
			b1NlYXJjaChjbSk7fTsNCiAgQ29kZU1pcnJvci5jb21tYW5kcy5maW5kUGVyc2lzdGVudCA9IGZ1
			bmN0aW9uKGNtKSB7Y2xlYXJTZWFyY2goY20pOyBkb1NlYXJjaChjbSwgZmFsc2UsIHRydWUpO307
			DQogIENvZGVNaXJyb3IuY29tbWFuZHMuZmluZFBlcnNpc3RlbnROZXh0ID0gZnVuY3Rpb24oY20p
			IHtkb1NlYXJjaChjbSwgZmFsc2UsIHRydWUsIHRydWUpO307DQogIENvZGVNaXJyb3IuY29tbWFu
			ZHMuZmluZFBlcnNpc3RlbnRQcmV2ID0gZnVuY3Rpb24oY20pIHtkb1NlYXJjaChjbSwgdHJ1ZSwg
			dHJ1ZSwgdHJ1ZSk7fTsNCiAgQ29kZU1pcnJvci5jb21tYW5kcy5maW5kTmV4dCA9IGRvU2VhcmNo
			Ow0KICBDb2RlTWlycm9yLmNvbW1hbmRzLmZpbmRQcmV2ID0gZnVuY3Rpb24oY20pIHtkb1NlYXJj
			aChjbSwgdHJ1ZSk7fTsNCiAgQ29kZU1pcnJvci5jb21tYW5kcy5jbGVhclNlYXJjaCA9IGNsZWFy
			U2VhcmNoOw0KICBDb2RlTWlycm9yLmNvbW1hbmRzLnJlcGxhY2UgPSByZXBsYWNlOw0KICBDb2Rl
			TWlycm9yLmNvbW1hbmRzLnJlcGxhY2VBbGwgPSBmdW5jdGlvbihjbSkge3JlcGxhY2UoY20sIHRy
			dWUpO307DQp9KTs=
		</Resource>
	</Resources>
	<SourceCode>
<![CDATA[from builtins import str
class VDOM_codeeditor(VDOM_object):

	def render(self, contents=""):
		id = u"o_" + (self.id).replace('-', '_')

		display = u"display:none;" if self.visible == "0" else u"display:block;"

		style = u"""z-index: {zind}; top: {top}px; left: {left}px; overflow: visible; position: absolute;
			width: {width}px; height: {height}px; padding: 2px 5px 2px 5px; {display} font: 14px tahoma
			""".format(zind = self.zindex, top = self.top, left = self.left,
					width = self.width, height = self.height, display = display)

		style_area = u"""width:{width}px; height:{height}px""".format(width = self.width, height = self.height)

		if VDOM_CONFIG_1["DEBUG"] == "1":
			debug_info = u"objtype='codeeditor' objname='%s' ver='%s'" % (self.name, self.type.version)
		else:
			debug_info = u""
			
		is_readonly = "true" if self.is_readonly == "1" else "false"

		result = u"""
<style type="text/css">
#%(id)s .CodeMirror-scroll { height: %(height)spx; }
</style>
<div id="%(id)s" style="%(style)s" %(debug_info)s>
	<textarea name="%(name)s" style='%(style_area)s'>%(value)s</textarea>
</div>
<script type="text/javascript">
$(document).ready(() => {
    if (typeof window.%(id)s_codeeditor !== 'undefined') {
        window.%(id)s_codeeditor.toTextArea();
        delete(window.%(id)s_codeeditor);
    }


    window.%(id)s_codeeditor = CodeMirror.fromTextArea($('#%(id)s>textarea').get(0), {
        mode: '%(mode)s',
        lineNumbers: true,
        styleActiveLine: true,
        highlightSelectionMatches: {minChars: 2},
        readOnly: %(is_readonly)s,
    });
    //bug fix

    $('#%(id)s').parents('form:first').submit(function(){
        window.%(id)s_codeeditor.save();
    });

    window.%(id)s_codeeditor.refresh();

    const el = $('#%(id)s');

    var intervalId = setInterval(function() {
        if (el.is(':visible')) {
            window.%(id)s_codeeditor.refresh();
            clearInterval(intervalId);
        }
    }, 200);
});
</script>""" % {
				"mode":       self.syntax,
				"id":         id,
				"name":       self.customname or self.name,
				"style":      style,
				"style_area": style_area,
				"value":      str(self.value).replace('&', '&amp;').replace('<', '&lt;').replace('>', '&gt;').replace('"', '&quot;'),
				"width":      self.width,
				"height":     self.height,
				"debug_info": debug_info,
				"is_readonly": is_readonly
			}

		return VDOM_object.render(self, contents=result)

	def get_lines_amount (self, value) : 			
		count = value.count("\n")
		
		return int(count)+1
	
	def get_lines_text (self, value, text_height) :
		
		amount = self.get_lines_amount(value)
		
		lines = \
			u""" <text x="0" y="2" width="28" height="{text_height}" 
					font-family="tahoma" font-size="14" fill="#aaaaaa" align="right"> 
			""".format(text_height=text_height)
		
		i = 1
		while (i <= amount):
			text_y = (i-1)*17
			
			if text_y >= text_height :
				i = i + 1
				break
				
			text_h = 20 if text_y + 20 <= text_height else text_height-text_y
			lines += u""" <tspan y="{y}" height="{height}">{line_number}</tspan> """.format(y=text_y, line_number=i, height=text_h)
			i = i + 1
		
		lines += u" </text> "
		
		return lines
		
	def wysiwyg(self, contents=""):
		
		text_width = int(self.width) - 38
		text_height = int(self.height) - 2

		result = \
			u"""<container name="{name}" id="{id}" visible="{vis}" zindex="{zind}" hierarchy="{hierarchy}" order="{order}"
					top="{top}" left="{left}" width="{width}" height="{height}" 
					backgroundcolor="#ffffff" bordercolor="#cccccc">
					<svg>
						<rect x="1" y="1" width="28" height="{text_height}" fill="#F7F7F7"/>
						<line x1="30" y1="1" x2="30" y2="{line_y_end}" style="stroke:#eeeeee"/>
						<text x="40" y="17" width="{text_width}" height="{text_height}" font-family="Courier New" font-size="14">{value}</text>
						{lines}
					</svg>
				</container>
			""".format(
					id = self.id, vis = self.visible, zind = self.zindex,
					hierarchy = self.hierarchy, order = self.order,
					top = self.top, left = self.left, 
					width = self.width, height = self.height,
					text_width = text_width, text_height = text_height,
					line_y_end = 1+int(self.height)-2,
					value = self.value, name = self.name,
					lines = self.get_lines_text(self.value, text_height))

		return VDOM_object.wysiwyg(self, contents=result)]]>
	</SourceCode>
	<Libraries>
		<Library Target="html"><![CDATA[<script type="text/javascript" src="/064add91-8595-0f40-10ea-09d38022edee.js"></script>]]></Library>
		<Library Target="html"><![CDATA[<script type='text/javascript' src='/0116ae12-49d8-4389-bb9d-fd74e73890bb.js'></script>]]></Library>
		<Library Target="html"><![CDATA[<script type='text/javascript' src='/95be4415-7ccb-b87b-f50f-77c8485f6bd9.js'></script>]]></Library>
		<Library Target="html"><![CDATA[<link rel="stylesheet" type="text/css" href="/9cc0dd1e-ae9c-4028-b77a-cd3dddc81b10.css" />]]></Library>
		<Library Target="html"><![CDATA[<link rel="stylesheet" type="text/css" href="/25634bc0-f478-460c-bdcd-29c38d0c3f6c.css" />]]></Library>
		<Library Target="html"><![CDATA[<script type='text/javascript' src='/4aa2cd26-287d-4f83-b2f8-927b5593693e.js'></script>]]></Library>
		<Library Target="html"><![CDATA[<script type='text/javascript' src='/f63a7b6c-28bc-42a7-9142-9446b5dd9ac3.js'></script>]]></Library>
		<Library Target="html"><![CDATA[<script type='text/javascript' src='/69646baf-4138-4033-8aec-8bf48e467c62.js'></script>]]></Library>
		<Library Target="html"><![CDATA[<script type='text/javascript' src='/dd098de4-af7a-473b-bd3a-8087be9fc197.js'></script>]]></Library>
		<Library Target="html"><![CDATA[<script type='text/javascript' src='/618a76f6-eb25-4afe-bde0-f1b991b914e4.js'></script>]]></Library>
	</Libraries>
	<E2VDOM>
		<Events>
			<UserInterfaceEvents>
				<Event Name="click" Description="#Lang(513)">
					<Parameters>
						<Parameter Name="X" Description="#Lang(901)" Order="0"/>
						<Parameter Name="Y" Description="#Lang(902)" Order="0"/>
					</Parameters>
				</Event>
				<Event Name="getvalue" Description="#Lang(514)">
					<Parameters>
						<Parameter Name="value" Description="#Lang(903)" Order="0"/>
					</Parameters>
				</Event>
			</UserInterfaceEvents>
		</Events>
		<Actions>
			<Container ID="2330fe83-8cd6-4ed5-907d-11874e7ebcf4">
				<Action Name="resizeTo" DisplayName="#Lang(605)" Description="#Lang(505)">
					<Parameters>
						<Parameter Name="width" DisplayName="#Lang(705)" Description="#Lang(805)" DefaultValue="0" RegularExpressionValidation=".*" Interface="" />
						<Parameter Name="height" DisplayName="#Lang(706)" Description="#Lang(806)" DefaultValue="0" RegularExpressionValidation=".*" Interface="" />
					</Parameters>
					<SourceCode>
<![CDATA[var w = parseInt(width,10), h = parseInt(height,10), o = $q(this.domCont);
				o.width(w).height(h);
				$q('.CodeMirror-scroll', o).width(w).height(h);
				eval(this.domCont.id+"_codeeditor.refresh();");]]>
					</SourceCode>
				</Action>
				<Action Name="hide" DisplayName="#Lang(602)" Description="#Lang(502)">
					<Parameters>
						<Parameter Name="fade" DisplayName="#Lang(701)" Description="#Lang(801)" DefaultValue="0" RegularExpressionValidation=".*" Interface="" />
					</Parameters>
					<SourceCode>
<![CDATA[vdom_ui_hide(this.domCont, fade);]]>
					</SourceCode>
				</Action>
				<Action Name="show" DisplayName="#Lang(612)" Description="#Lang(512)">
					<Parameters>
						<Parameter Name="fade" DisplayName="#Lang(712)" Description="#Lang(812)" DefaultValue="0" RegularExpressionValidation=".*" Interface="" />
					</Parameters>
					<SourceCode>
<![CDATA[vdom_ui_show(this.domCont, fade);]]>
					</SourceCode>
				</Action>
				<Action Name="setTheme" DisplayName="#Lang(609)" Description="#Lang(509)">
					<Parameters>
						<Parameter Name="theme" DisplayName="#Lang(709)" Description="#Lang(809)" DefaultValue="" RegularExpressionValidation=".*" Interface="" />
					</Parameters>
					<SourceCode>
<![CDATA[]]>
					</SourceCode>
				</Action>
				<Action Name="setCursor" DisplayName="#Lang(606)" Description="#Lang(506)">
					<Parameters>
						<Parameter Name="line" DisplayName="#Lang(707)" Description="#Lang(807)" DefaultValue="1" RegularExpressionValidation=".*" Interface="" />
					</Parameters>
					<SourceCode>
<![CDATA[eval('window.'+this.domCont.id+'_codeeditor.focus(); window.'+this.domCont.id+'_codeeditor.setCursor('+parseInt(line,10)+');');]]>
					</SourceCode>
				</Action>
				<Action Name="setFocus" DisplayName="#Lang(607)" Description="#Lang(507)">
					<SourceCode>
<![CDATA[eval('window.'+this.domCont.id+'_codeeditor.focus();');]]>
					</SourceCode>
				</Action>
				<Action Name="setSyntax" DisplayName="#Lang(608)" Description="#Lang(508)">
					<Parameters>
						<Parameter Name="syntax" DisplayName="#Lang(708)" Description="#Lang(808)" DefaultValue="&apos;xml&apos;" RegularExpressionValidation=".*" Interface="" />
					</Parameters>
					<SourceCode>
<![CDATA[]]>
					</SourceCode>
				</Action>
				<Action Name="setValue" DisplayName="#Lang(611)" Description="#Lang(511)">
					<Parameters>
						<Parameter Name="value" DisplayName="#Lang(711)" Description="#Lang(811)" DefaultValue="" RegularExpressionValidation=".*" Interface="" />
					</Parameters>
					<SourceCode>
<![CDATA[eval(this.domCont.id+"_codeeditor.setValue(value);");]]>
					</SourceCode>
				</Action>
				<Action Name="moveTo" DisplayName="#Lang(603)" Description="#Lang(503)">
					<Parameters>
						<Parameter Name="newX" DisplayName="#Lang(702)" Description="#Lang(802)" DefaultValue="0" RegularExpressionValidation=".*" Interface="" />
						<Parameter Name="newY" DisplayName="#Lang(703)" Description="#Lang(803)" DefaultValue="0" RegularExpressionValidation=".*" Interface="" />
						<Parameter Name="Effect" DisplayName="#Lang(704)" Description="#Lang(804)" DefaultValue="0" RegularExpressionValidation=".*" Interface="" />
					</Parameters>
					<SourceCode>
<![CDATA[vdom_ui_moveTo(this.domCont, newX, newY, Effect);]]>
					</SourceCode>
				</Action>
				<Action Name="getValue" DisplayName="#Lang(601)" Description="#Lang(501)">
					<SourceCode>
<![CDATA[eval('var x='+this.domCont.id+"_codeeditor.getValue(value);");
			execEventBinded(id.substring(2, id.length), "getvalue", {value:x});]]>
					</SourceCode>
				</Action>
				<Action Name="refresh" DisplayName="#Lang(604)" Description="#Lang(504)">
					<SourceCode>
<![CDATA[eval(this.domCont.id+"_codeeditor.refresh();");]]>
					</SourceCode>
				</Action>
			</Container>
		</Actions>
	</E2VDOM>
</Type>
