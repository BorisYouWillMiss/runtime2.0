<?xml version="1.0" encoding="utf-8"?>
<Type>
	<Information>
		<ID>117cc7aa-749f-4a37-8f9e-5a899f0b0458</ID>
		<Name>formeobuilder</Name>
		<DisplayName>#Lang(001)</DisplayName>
		<ClassName>VDOM_formeobuilder</ClassName>
		<Description>#Lang(002)</Description>
		<Version>0.4</Version>
		<Category>Form</Category>
		<InterfaceType>1</InterfaceType>
		<Icon>#Res(54e7f8ab-64f1-b113-029e-1703a76c6fa4)</Icon>
		<EditorIcon>#Res(2e3a0105-394f-95bd-e7c9-1703d0ed2ddc)</EditorIcon>
		<StructureIcon>#Res(8eb487a9-46f2-ac3e-202e-1703f8be5f80)</StructureIcon>
		<Dynamic>1</Dynamic>
		<Moveable>1</Moveable>
		<Resizable>3</Resizable>
		<OptimizationPriority>1</OptimizationPriority>
		<Container>1</Container>
		<Containers>htmlcontainer, dialog, container, tablecell, accordeon, dialog_2, vdomclass, smartfolderdata</Containers>
		<Languages>en_US, ru_RU, fr_FR</Languages>
	</Information>
	<Attributes>
		<Attribute>
			<Name>top</Name>
			<DisplayName>#Lang(004)</DisplayName>
			<Description>#Lang(004)</Description>
			<DefaultValue>0</DefaultValue>
			<RegularExpressionValidation>^\d{1,4}$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(305)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>TextField(4)</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>left</Name>
			<DisplayName>#Lang(005)</DisplayName>
			<Description>#Lang(206)</Description>
			<DefaultValue>0</DefaultValue>
			<RegularExpressionValidation>^\d{1,4}$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(306)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>TextField(4)</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>width</Name>
			<DisplayName>#Lang(006)</DisplayName>
			<Description>#Lang(207)</Description>
			<DefaultValue>400</DefaultValue>
			<RegularExpressionValidation>^[ \t]*(((-?\d{0,4}\.?\d{1,2})(px|em|ex|pt|cm|mm|in|%|vh|vw|)|auto)[ \t]+){0,3}((-?\d{0,4}\.?\d{1,2})(px|em|ex|pt|cm|mm|in|%|vh|vw|)|auto|)[ \t]*$|^$|^[ \t]*inherit[ \t]*$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(307)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>TextField(4)</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>height</Name>
			<DisplayName>#Lang(007)</DisplayName>
			<Description>#Lang(208)</Description>
			<DefaultValue>200</DefaultValue>
			<RegularExpressionValidation>^[ \t]*(((-?\d{0,4}\.?\d{1,2})(px|em|ex|pt|cm|mm|in|%|vh|vw|)|auto)[ \t]+){0,3}((-?\d{0,4}\.?\d{1,2})(px|em|ex|pt|cm|mm|in|%|vh|vw|)|auto|)[ \t]*$|^$|^[ \t]*inherit[ \t]*$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(308)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>TextField(4)</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>data</Name>
			<DisplayName>#Lang(003)</DisplayName>
			<Description>#Lang(212)</Description>
			<DefaultValue></DefaultValue>
			<RegularExpressionValidation>.*</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(312)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>MultiLine()</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>zindex</Name>
			<DisplayName>#Lang(014)</DisplayName>
			<Description>#Lang(000)</Description>
			<DefaultValue>0</DefaultValue>
			<RegularExpressionValidation>^\d{1,2}$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(000)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>TextField(2)</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>hierarchy</Name>
			<DisplayName>#Lang(013)</DisplayName>
			<Description>#Lang(000)</Description>
			<DefaultValue>0</DefaultValue>
			<RegularExpressionValidation>^\d+$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(000)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>TextField(2)</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
		<Attribute>
			<Name>positioning1</Name>
			<DisplayName>#Lang(008)</DisplayName>
			<Description>#Lang(000)</Description>
			<DefaultValue>absolute</DefaultValue>
			<RegularExpressionValidation>^.*$</RegularExpressionValidation>
			<ErrorValidationMessage>#Lang(000)</ErrorValidationMessage>
			<Visible>1</Visible>
			<InterfaceType>0</InterfaceType>
			<CodeInterface>DropDown((#Lang(009)|absolute)|(#Lang(010)|relative)|(#Lang(111)|fixed)|(#Lang(112)|static))</CodeInterface>
			<ColorGroup>1</ColorGroup>
		</Attribute>
	</Attributes>
	<Languages>
		<Language Code="en_US">
			<Sentence ID="000">Default help text</Sentence>
			<Sentence ID="001">Formeo Builder</Sentence>
			<Sentence ID="002">Formeo Builder</Sentence>
			<Sentence ID="003">Data</Sentence>
			<Sentence ID="004">top</Sentence>
			<Sentence ID="005">left</Sentence>
			<Sentence ID="006">width</Sentence>
			<Sentence ID="007">height</Sentence>
			<Sentence ID="008">position</Sentence>
			<Sentence ID="009">absolute</Sentence>
			<Sentence ID="010">relative</Sentence>
			<Sentence ID="011">fixed</Sentence>
			<Sentence ID="012">static</Sentence>
			<Sentence ID="013">Hierarchy</Sentence>
			<Sentence ID="014">Z-index</Sentence>
		</Language>
		<Language Code="fr_FR">
			<Sentence ID="000">Default help text</Sentence>
			<Sentence ID="001">Formeo Builder</Sentence>
			<Sentence ID="002">Formeo Builder</Sentence>
			<Sentence ID="003">Data</Sentence>
			<Sentence ID="004">top</Sentence>
			<Sentence ID="005">left</Sentence>
			<Sentence ID="006">width</Sentence>
			<Sentence ID="007">height</Sentence>
			<Sentence ID="008">position</Sentence>
			<Sentence ID="009">absolute</Sentence>
			<Sentence ID="010">relative</Sentence>
			<Sentence ID="011">fixed</Sentence>
			<Sentence ID="012">static</Sentence>
			<Sentence ID="013">Hierarchy</Sentence>
			<Sentence ID="014">Z-index</Sentence>
		</Language>
		<Language Code="ru_RU">
			<Sentence ID="000">Default help text</Sentence>
			<Sentence ID="001">Formeo Builder</Sentence>
			<Sentence ID="002">Formeo Builder</Sentence>
			<Sentence ID="003">Data</Sentence>
			<Sentence ID="004">top</Sentence>
			<Sentence ID="005">left</Sentence>
			<Sentence ID="006">width</Sentence>
			<Sentence ID="007">height</Sentence>
			<Sentence ID="008">position</Sentence>
			<Sentence ID="009">absolute</Sentence>
			<Sentence ID="010">relative</Sentence>
			<Sentence ID="011">fixed</Sentence>
			<Sentence ID="012">static</Sentence>
			<Sentence ID="013">Hierarchy</Sentence>
			<Sentence ID="014">Z-index</Sentence>
		</Language>
	</Languages>
	<SourceCode>
<![CDATA[class VDOM_formeobuilder(VDOM_object):
	def get_css_style(self, style_name, style_value):
		if style_name == 'clear' and style_value == 'none': return ""
		
		if style_name == 'background-color' and style_value == '#': return ""
		
		if style_name == 'z-index' and style_value == '0': return ""
	
		if (style_name == "right" or style_name == "bottom") and (style_value == 'px'): return ""
	
		if style_value == "": return ""
		else: return "{}: {};".format(style_name, style_value)

	def render(self, contents=""):
		woid = (self.id).replace('-', '_')
		id = u"o_" + woid

		result = u"""
			<div objname="%(name)s" data-id="%(id)s">
				<div id="%(id)s"></div>
				<button data-ident="%(id)s">GET JSON IN CONSOLE</button>
			</div>
			""" % {
			"id" : id,
			"name": self.name
			}

		javascript = u"""
    <script type='module'>
      var %(id)s = null
      async function init() {
        if (!window.FormeoEditor) await import('/72aef15c-ab6b-bb04-8163-1d8828ab5651.js');
        %(id)s = new FormeoEditor({
          editorContainer: '#%(id)s',
          svgSprite: 'https://draggable.github.io/formeo/assets/img/formeo-sprite.svg',
          events: {
            onSave: evt => {
              execEventBinded('%(woid)s', "onSave", {"formJSON": JSON.stringify(%(id)s.formData)});
            }
          }
        }, %(data)s);
        return %(id)s
      }
      init().then(function(data) {
        %(id)s = data
        $("[data-ident='%(id)s']").click(function() {
          console.log(JSON.stringify(%(id)s.formData))
        })
      });
		</script>
		""" % {
			"id": id,
      "woid": woid,
      "data": self.data
		}

		styles = u"""<style>
		#%(id)s { width: 100%%; height: 100%%; }
		.formeo-editor { width:100%%; height: 100%%; }
		.formeo-controls { overflow-x: hidden; overflow-y: auto; }
		[data-id="%(id)s"] { %(width)s %(height)s %(position)s %(top)s %(left)s }
		</style>""" % {
			"id": id,
			"width": self.get_css_style('width', self.width + "px" if self.width.isdigit() else self.width),
			"height": self.get_css_style('height', self.height + "px" if self.height.isdigit() else self.height),
			"top": self.get_css_style('top', self.top + "px" if self.top.isdigit() else self.top),
			"left": self.get_css_style('left', self.left + "px" if self.left.isdigit() else self.left),
			"position": self.get_css_style('position', self.positioning1)
			}
		styles = styles.replace(" ", "").replace("\t", "")

		result += javascript
		result += styles
		return VDOM_object.render(self, contents=result)

	def wysiwyg(self, contents=""):
		from scripting.legacy.wysiwyg import get_empty_wysiwyg_value

		image_id = "54e7f8ab-64f1-b113-029e-1703a76c6fa4"
		result = get_empty_wysiwyg_value(self, image_id)
			
		return VDOM_object.wysiwyg(self, contents=result)]]>
	</SourceCode>
	<Libraries>
		<Library Target="html"><![CDATA[<link rel="stylesheet" type="text/css" href="/a0147d68-b7b4-b1f2-d796-223e6390b140.res" />]]></Library>
	</Libraries>
	<E2VDOM>
		<Events>
			<UserInterfaceEvents>
				<Event Name="onSave" Description="#Lang(000)">
					<Parameters>
						<Parameter Name="formJSON" Description="#Lang(000)" Order="0"/>
					</Parameters>
				</Event>
			</UserInterfaceEvents>
		</Events>
	</E2VDOM>
</Type>
